{"version":3,"file":"tasklist-glsp-server.js","mappings":";;;;;;;;;AAAA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,WAAW,mBAAO,CAAC,kBAAM;AACzB,iCAAiC,mBAAO,CAAC,iEAAU;AACnD;AACA;;AAEA,uBAAuB,sIAAiD;;AAExE;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA,CAAC;;AAED,4CAA4C;;AAE5C;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc,mBAAO,CAAC,2EAAe;AACrC,eAAe,mBAAO,CAAC,6EAAgB;;AAEvC;AACA;AACA,sBAAsB,mBAAO,CAAC,6EAAgB;AAC9C,oBAAoB,mBAAO,CAAC,yEAAc;AAC1C,sBAAsB,mBAAO,CAAC,6EAAgB;AAC9C,qBAAqB,mBAAO,CAAC,2EAAe;;AAE5C;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;;;;;;;;;;AClNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH;AACA;;;;;;;;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,oBAAoB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC5GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACJA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;AC9FD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;;AAEA;AACA,mBAAmB,IAAI;AACvB;;AAEA;AACA;;;;;;;;;;;;AClCA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEa;;AAEb,SAAS,mBAAO,CAAC,cAAI;AACrB,cAAc,mBAAO,CAAC,+EAAe;;AAErC;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA,oCAAoC,GAAG;AACvC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACtJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,mBAAO,CAAC,qEAAc;AACnC;;;;;;;;;;;ACTA,cAAc,mBAAO,CAAC,oDAAS;;AAE/B;AACA;AACA;AACA,WAAW,UAAU;AACrB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,YAAY;;AAElB;AACA;AACA;;;;;;;;;;;ACjBA,cAAc,mBAAO,CAAC,kEAAI;;AAE1B;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;ACVD;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,UAAU;AACrB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,UAAU;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;;AAEA,kBAAkB,qBAAqB;AACvC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;AACA,WAAW,UAAU;AACrB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA,kBAAkB,sBAAsB;AACxC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,aAAa,UAAU;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;ACnNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;;;;;;;;;;;AClBA,iBAAiB,mBAAO,CAAC,0DAAY;AACrC,YAAY,mBAAO,CAAC,gDAAO;;AAE3B;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;ACnBA,aAAa,mBAAO,CAAC,2EAAgB;AACrC,UAAU,8CAAqB;;AAE/B;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,mBAAmB,mBAAO,CAAC,qGAA6B;AACxD,gBAAgB,mBAAO,CAAC,6FAAyB;AACjD,gBAAgB,mBAAO,CAAC,iFAAmB;;AAE3C;AACA;AACA;AACA;;;;;;;;;;;ACnCA;AACA;AACA;AACA,IAAI,KAAqC,EAAE,EAE1C,CAAC;AACF,EAAE,wHAA4C;AAC9C;;;;;;;;;;;;;;;ACPA;;;;;;;;;;;;;;kFAckF;AAClF,+HAA+D;AAC/D,gHAAoC;AACpC,+HAA8C;AAC9C,0GAAgC;AAChC,6GAAkC;AAClC,yHAAyC;AACzC,kIAA+C;AAC/C,6GAAkC;AAElC,0GAAgC;AAChC,0GAAgC;AAChC,0JAA8D;AAC9D,4KAA0E;AAE1E,SAAgB,iBAAiB;IAC7B,sFAAsF;IACtF,mCAAmC;IACnC,6GAA6G;IAC7G,MAAM,OAAO,GAAG,IAAI,GAAG,EAAoC,CAAC;IAC5D,OAAO,CAAC,GAAG,CAAC,uBAAK,CAAC,KAAK,EAAE,eAAM,CAAC,CAAC;IACjC,OAAO,CAAC,GAAG,CAAC,uBAAK,CAAC,IAAI,EAAE,aAAK,CAAC,CAAC;IAC/B,OAAO,CAAC,GAAG,CAAC,uBAAK,CAAC,IAAI,EAAE,aAAK,CAAC,CAAC;IAC/B,OAAO,CAAC,GAAG,CAAC,uBAAK,CAAC,IAAI,EAAE,aAAK,CAAC,CAAC;IAC/B,OAAO,CAAC,GAAG,CAAC,uBAAK,CAAC,KAAK,EAAE,eAAM,CAAC,CAAC;IACjC,OAAO,CAAC,GAAG,CAAC,uBAAK,CAAC,WAAW,EAAE,2BAAY,CAAC,CAAC;IAC7C,OAAO,CAAC,GAAG,CAAC,uBAAK,CAAC,MAAM,EAAE,iBAAO,CAAC,CAAC;IACnC,OAAO,CAAC,GAAG,CAAC,uBAAK,CAAC,YAAY,EAAE,4BAAY,CAAC,CAAC;IAE9C,OAAO,CAAC,GAAG,CAAC,uBAAK,CAAC,IAAI,EAAE,sBAAS,CAAC,CAAC;IACnC,OAAO,CAAC,GAAG,CAAC,uBAAK,CAAC,YAAY,EAAE,2CAAmB,CAAC,CAAC;IACrD,OAAO,CAAC,GAAG,CAAC,uBAAK,CAAC,cAAc,EAAE,uDAAyB,CAAC,CAAC;IAC7D,OAAO,OAAO,CAAC;AACnB,CAAC;AAlBD,8CAkBC;;;;;;;;;;;;;;;AC7BY,kBAAU,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC;AAO/C,SAAgB,YAAY,CAA0B,OAAU;IAC5D,OAAO,kBAAU,IAAI,OAAO,IAAI,OAAO,CAAC,kBAAU,CAAC,KAAK,IAAI,CAAC;AACjE,CAAC;AAFD,oCAEC;AAID,IAAiB,iBAAiB,CAgBjC;AAhBD,WAAiB,iBAAiB;IAC9B,SAAgB,SAAS,CAA8B,OAAU,EAAE,QAAwB,EAAE,CAAU;QACnG,MAAM,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;QAC/B,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE,CAAC;YAC/B,KAAK,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC/B,CAAC;aAAM,IAAI,CAAC,KAAK,SAAS,EAAE,CAAC;YACzB,KAAK,CAAC,SAAS,GAAG,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC;QACzC,CAAC;aAAM,CAAC;YACJ,kDAAkD;YAClD,KAAK,CAAC,SAAS,GAAG,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;YACxC,OAAO,CAAC,IAAI,CACR,wFAAwF,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE,CAC5H,CAAC;QACN,CAAC;QACD,OAAO,OAAO,CAAC;IACnB,CAAC;IAde,2BAAS,YAcxB;AACL,CAAC,EAhBgB,iBAAiB,iCAAjB,iBAAiB,QAgBjC;;;;;;;;;;;;;;;AC7BY,oBAAY,GAAG,MAAM,CAAC,cAAc,CAAC,CAAC;AAQnD,SAAgB,cAAc,CAA0B,OAAU;IAC9D,OAAO,oBAAY,IAAI,OAAO,IAAI,OAAO,CAAC,oBAAY,CAAC,KAAK,IAAI,CAAC;AACrE,CAAC;AAFD,wCAEC;AAID,IAAiB,mBAAmB,CA8BnC;AA9BD,WAAiB,mBAAmB;IAChC,SAAgB,QAAQ,CAAgC,OAAU,EAAE,QAAwB,EAAE,CAAU;QACpG,MAAM,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;QAC/B,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE,CAAC;YAC/B,KAAK,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAC9B,CAAC;aAAM,IAAI,CAAC,KAAK,SAAS,EAAE,CAAC;YACzB,KAAK,CAAC,QAAQ,GAAG,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC;QACxC,CAAC;aAAM,CAAC;YACJ,kDAAkD;YAClD,KAAK,CAAC,QAAQ,GAAG,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;YACvC,OAAO,CAAC,IAAI,CACR,wFAAwF,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE,CAC3H,CAAC;QACN,CAAC;QACD,OAAO,OAAO,CAAC;IACnB,CAAC;IAde,4BAAQ,WAcvB;IAED,SAAgB,IAAI,CAAgC,OAAU,EAAE,WAA+B,EAAE,MAAe;QAC5G,MAAM,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;QAC/B,IAAI,OAAO,WAAW,KAAK,QAAQ,EAAE,CAAC;YAClC,KAAK,CAAC,IAAI,GAAG,WAAW,CAAC;QAC7B,CAAC;aAAM,IAAI,MAAM,KAAK,SAAS,EAAE,CAAC;YAC9B,KAAK,CAAC,IAAI,GAAG,EAAE,KAAK,EAAE,WAAW,EAAE,MAAM,EAAE,CAAC;QAChD,CAAC;aAAM,CAAC;YACJ,uDAAuD;YACvD,KAAK,CAAC,IAAI,GAAG,EAAE,KAAK,EAAE,WAAW,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC;YAC/C,OAAO,CAAC,IAAI,CAAC,gFAAgF,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAC/H,CAAC;QACD,OAAO,OAAO,CAAC;IACnB,CAAC;IAZe,wBAAI,OAYnB;AACL,CAAC,EA9BgB,mBAAmB,mCAAnB,mBAAmB,QA8BnC;;;;;;;;;;;;;;;AC9DD;;;;;;;;;;;;;;kFAckF;AAClF,+HAAsD;AAEtD,qIAAuE;AAEvE,MAAa,OAAQ,SAAQ,8BAAa;IAA1C;;QAKa,SAAI,GAAG,uBAAY,CAAC,aAAa,CAAC;QAC3C,YAAO,GAAG,IAAI,CAAC;IACnB,CAAC;IANG,MAAM,CAAC,OAAO,CAA8B,WAAyC;QACjF,OAAO,IAAI,cAAc,CAAC,WAAW,aAAX,WAAW,cAAX,WAAW,GAAI,OAAO,CAAC,CAAC,IAAI,CAAC,uBAAY,CAAC,aAAa,CAAC,CAAC;IACvF,CAAC;CAIJ;AAPD,0BAOC;AAED,MAAa,cAA4C,SAAQ,qCAAuB;IACpF,OAAO,CAAC,OAAgB;QACpB,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;QAC7B,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AALD,wCAKC;;;;;;;;;;;;;;;;ACjCD;;;;;;;;;;;;;;kFAckF;AAClF,+HAAsD;AACtD,yHAA6D;AAC7D,qIAAuE;AAEvE,MAAa,YAAa,SAAQ,8BAAa;IAA/C;;QAKa,SAAI,GAAG,uBAAY,CAAC,WAAW,CAAC;QAEzC,QAAY,GAAG,IAAI,CAAC;IACxB,CAAC;IAPG,MAAM,CAAC,OAAO;QACV,OAAO,IAAI,mBAAmB,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,uBAAY,CAAC,WAAW,CAAC,CAAC;IAChF,CAAC;CAKJ;AARD,oCAQC;KADI,uBAAU;AAGf,MAAa,mBAA2D,SAAQ,qCAAuB;IACnG,MAAM,CAAC,MAAe;QAClB,OAAO,8BAAiB,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;IAClD,CAAC;CACJ;AAJD,kDAIC;;;;;;;;;;;;;;;ACRY,uBAAe,GAAG,MAAM,CAAC,iBAAiB,CAAC,CAAC;AAOzD,SAAgB,iBAAiB,CAA0B,OAAU;IACjE,OAAO,uBAAe,IAAI,OAAO,IAAI,OAAO,CAAC,uBAAe,CAAC,KAAK,IAAI,CAAC;AAC3E,CAAC;AAFD,8CAEC;AAID,IAAiB,sBAAsB,CAKtC;AALD,WAAiB,sBAAsB;IACnC,SAAgB,aAAa,CAAmC,OAAU,EAAE,SAA0B;QAClG,OAAO,CAAC,OAAO,CAAC,CAAC,aAAa,GAAG,SAAS,CAAC;QAC3C,OAAO,OAAO,CAAC;IACnB,CAAC;IAHe,oCAAa,gBAG5B;AACL,CAAC,EALgB,sBAAsB,sCAAtB,sBAAsB,QAKtC;;;;;;;;;;;;;;;AC3CD;;;;;;;;;;;;;;kFAckF;AAClF,+HAAmF;AACnF,qIAAuE;AAEvE,MAAa,KAAM,SAAQ,8BAAa;IAAxC;;QAKa,SAAI,GAAG,uBAAY,CAAC,IAAI,CAAC;QAClC,kBAAa,GAAY,EAAE,CAAC;IAIhC,CAAC;IATG,MAAM,CAAC,OAAO;QACV,OAAO,IAAI,YAAY,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,uBAAY,CAAC,IAAI,CAAC,CAAC;IAC3D,CAAC;CAOJ;AAVD,sBAUC;AAED,WAAiB,KAAK;IAClB,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,KAAK,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;IAC5B,CAAC;IAFe,QAAE,KAEjB;AACL,CAAC,EAJgB,KAAK,qBAAL,KAAK,QAIrB;AAED,MAAa,YAAsC,SAAQ,qCAAuB;IAC9E,MAAM,CAAC,MAAqB;QACxB,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,MAAM,CAAC,EAAE,CAAC;QAChC,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,QAAQ,CAAC,QAAgB;QACrB,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAC/B,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,MAAM,CAAC,MAAqB;QACxB,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,MAAM,CAAC,EAAE,CAAC;QAChC,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,QAAQ,CAAC,QAAgB;QACrB,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAC/B,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,UAAU,CAAC,UAAkB;QACzB,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,UAAU,CAAC;QACnC,OAAO,IAAI,CAAC;IAChB,CAAC;IAID,eAAe,CAAC,QAAwB,EAAE,CAAU;QAChD,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE,CAAC;YAC/B,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC5C,CAAC;aAAM,IAAI,CAAC,EAAE,CAAC;YACX,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;IAID,gBAAgB,CAAC,GAAG,aAAkC;QAClD,uBAAQ,EAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,aAAa,CAAC,CAAC;QAClD,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AA3CD,oCA2CC;;;;;;;;;;;;;AC/ED;;;;;;;;;;;;;;kFAckF;;;AAElF,4KAA2G;AAE3G;;;;;;;;;;GAUG;AACH,MAAa,qBAAsB,SAAQ,uDAAyB;IAChE,MAAM,CAAU,OAAO;QACnB,OAAO,IAAI,4BAA4B,CAAC,qBAAqB,CAAC,CAAC;IACnE,CAAC;CAEJ;AALD,sDAKC;AAED,MAAa,4BAEX,SAAQ,6DAAkC;IACxC,SAAS,CAAC,SAAiB;QACvB,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,SAAS,CAAC;QACjC,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AAPD,oEAOC;;;;;;;;;;;;;;;;AC3CD;;;;;;;;;;;;;;kFAckF;AAClF;;;;;GAKG;AACH,+HAAsG;AACtG,kIAAoE;AACpE,4HAAgE;AAChE,qIAAiE;AAEjE,MAAa,MAAO,SAAQ,2BAAU;IAAtC;;QAKa,SAAI,GAAG,uBAAK,CAAC,KAAK,CAAC;QAC5B,aAAQ,GAAU,gBAAK,CAAC,MAAM,CAAC;QAG/B,QAAc,GAAG,IAAI,CAAC;QACtB,QAAa,GAAG,IAAI,CAAC;IACzB,CAAC;IAVG,MAAM,CAAU,OAAO;QACnB,OAAO,IAAI,aAAa,CAAC,MAAM,CAAC,CAAC;IACrC,CAAC;CAQJ;AAXD,wBAWC;KAFI,4BAAY,OACZ,yBAAW;AAGhB,MAAa,aAAyC,SAAQ,kCAAoB;IAG9E,QAAQ,CAAC,WAA2B,EAAE,CAAU;QAC5C,OAAO,mCAAmB,CAAC,QAAQ,CAAC,IAAI,EAAE,WAAW,EAAE,CAAC,CAAC,CAAC;IAC9D,CAAC;IAID,IAAI,CAAC,WAA+B,EAAE,MAAe;QACjD,OAAO,mCAAmB,CAAC,IAAI,CAAC,IAAI,EAAE,WAAW,EAAE,MAAM,CAAC,CAAC;IAC/D,CAAC;IAED,eAAe,CAAC,GAAW,EAAE,KAAoB;QAC7C,OAAO,gCAAkB,CAAC,eAAe,CAAC,IAAI,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;IAChE,CAAC;IAID,gBAAgB,CAAC,aAAgD;QAC7D,OAAO,gCAAkB,CAAC,gBAAgB,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;IACpE,CAAC;CACJ;AAtBD,sCAsBC;;;;;;;;;;;;;;;AC7DD;;;;;;;;;;;;;;kFAckF;AAClF,+HAAqF;AACrF,qIAAiE;AAEjE;;GAEG;AACH,MAAa,SAAU,SAAQ,2BAAU;IAAzC;;QAKa,SAAI,GAAG,uBAAK,CAAC,IAAI,CAAC;QAC3B,YAAO,GAAa,EAAE,CAAC;IAC3B,CAAC;IANG,MAAM,CAAU,OAAO;QACnB,OAAO,IAAI,gBAAgB,CAAC,SAAS,CAAC,CAAC;IAC3C,CAAC;CAIJ;AAPD,8BAOC;AAED,MAAa,gBAAkD,SAAQ,kCAAoB;IAGvF,UAAU,CAAC,GAAG,OAA6B;QACvC,uBAAQ,EAAC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QACtC,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AAPD,4CAOC;;;;;;;;;;;;;;;ACrCD;;;;;;;;;;;;;;kFAckF;AAClF,+HAAoG;AACpG,qIAAuE;AAEvE,MAAa,YAAa,SAAQ,8BAAa;IAA/C;;QAKa,SAAI,GAAG,uBAAY,CAAC,YAAY,CAAC;QAC1C,WAAM,GAAa,EAAE,CAAC;IAC1B,CAAC;IANG,MAAM,CAAC,OAAO;QACV,OAAO,IAAI,mBAAmB,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,uBAAY,CAAC,YAAY,CAAC,CAAC;IACjF,CAAC;CAIJ;AAPD,oCAOC;AAED,MAAa,mBAA2D,SAAQ,qCAAuB;IAGnG,QAAQ,CAAC,cAA+B,EAAE,QAAyB;QAC/D,IAAI,OAAO,cAAc,KAAK,QAAQ,EAAE,CAAC;YACrC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAC3C,CAAC;aAAM,IAAI,QAAQ,EAAE,CAAC;YAClB,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,cAAc,EAAE,QAAQ,EAAE,CAAC,CAAC;QAClE,CAAC;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;IAID,SAAS,CAAC,GAAG,MAA4B;QACrC,uBAAQ,EAAC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACpC,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AAlBD,kDAkBC;;;;;;;;;;;;;;;;AC7CD;;;;;;;;;;;;;;kFAckF;AAClF,+HAA6D;AAC7D,yHAA6D;AAC7D,2IAA6F;AAE7F,qIAAuE;AAEvE,MAAa,MAAO,SAAQ,8BAAa;IAAzC;;QAKa,SAAI,GAAG,uBAAY,CAAC,KAAK,CAAC;QAEnC,cAAS,GAAU,gBAAK,CAAC,MAAM,CAAC;QAEhC,QAAY,GAAG,IAAI,CAAC;QACpB,QAAiB,GAAG,IAAI,CAAC;IAC7B,CAAC;IAVG,MAAM,CAAC,OAAO,CAA4B,WAAyC;QAC/E,OAAO,IAAI,aAAa,CAAC,WAAW,aAAX,WAAW,cAAX,WAAW,GAAI,MAAM,CAAC,CAAC,IAAI,CAAC,uBAAY,CAAC,KAAK,CAAC,CAAC;IAC7E,CAAC;CAQJ;AAXD,wBAWC;KAFI,uBAAU,OACV,kCAAe;AAGpB,MAAa,aAAyC,SAAQ,qCAAuB;IAGjF,SAAS,CAAC,QAAwB,EAAE,CAAU;QAC1C,OAAO,8BAAiB,CAAC,SAAS,CAAC,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAC;IAC1D,CAAC;IAED,IAAI,CAAC,IAAY;QACb,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC;QACvB,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,aAAa,CAAC,SAAyB;QACnC,OAAO,yCAAsB,CAAC,aAAa,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;IACjE,CAAC;CACJ;AAfD,sCAeC;;;;;;;;;;;;;;;AC/BY,mBAAW,GAAG,MAAM,CAAC,aAAa,CAAC,CAAC;AAOjD,SAAgB,aAAa,CAA0B,OAAU;IAC7D,OAAO,mBAAW,IAAI,OAAO,IAAI,OAAO,CAAC,mBAAW,CAAC,KAAK,IAAI,CAAC;AACnE,CAAC;AAFD,sCAEC;AAID,IAAiB,kBAAkB,CAyBlC;AAzBD,WAAiB,kBAAkB;IAC/B,SAAgB,eAAe,CAA+B,OAAU,EAAE,GAAW,EAAE,KAAoB;QACvG,MAAM,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;QAC/B,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;YACvB,KAAK,CAAC,aAAa,GAAG,EAAE,CAAC;QAC7B,CAAC;QACD,KAAK,CAAC,aAAa,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;QACjC,OAAO,OAAO,CAAC;IACnB,CAAC;IAPe,kCAAe,kBAO9B;IAED,SAAgB,gBAAgB,CAA+B,OAAU,EAAE,aAAgD;QACvH,MAAM,QAAQ,GAAS,EAAE,CAAC;QAC1B,MAAM,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;QAC/B,IAAI,aAAa,YAAY,GAAG,EAAE,CAAC;YAC/B,CAAC,GAAG,aAAa,CAAC,IAAI,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,aAAa,CAAC,GAAG,CAAC,GAAG,CAAE,CAAC,CAAC,CAAC;QACxF,CAAC;aAAM,CAAC;YACJ,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACpF,CAAC;QACD,IAAI,KAAK,CAAC,aAAa,EAAE,CAAC;YACtB,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAC;QACjD,CAAC;aAAM,CAAC;YACJ,KAAK,CAAC,aAAa,GAAG,QAAQ,CAAC;QACnC,CAAC;QACD,OAAO,OAAO,CAAC;IACnB,CAAC;IAde,mCAAgB,mBAc/B;AACL,CAAC,EAzBgB,kBAAkB,kCAAlB,kBAAkB,QAyBlC;;;;;;;;;;;;;;;ACvCY,kBAAU,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC;AAO/C,SAAgB,YAAY,CAA0B,OAAU;IAC5D,OAAO,kBAAU,IAAI,OAAO,IAAI,OAAO,CAAC,kBAAU,CAAC,KAAK,IAAI,CAAC;AACjE,CAAC;AAFD,oCAEC;AAID,IAAiB,iBAAiB,CAKjC;AALD,WAAiB,iBAAiB;IAC9B,SAAgB,MAAM,CAA8B,OAAU,EAAE,SAAkB;QAC9E,OAAO,CAAC,OAAO,CAAC,CAAC,MAAM,GAAG,SAAS,CAAC;QACpC,OAAO,OAAO,CAAC;IACnB,CAAC;IAHe,wBAAM,SAGrB;AACL,CAAC,EALgB,iBAAiB,iCAAjB,iBAAiB,QAKjC;;;;;;;;;;;;;;;ACnCD;;;;;;;;;;;;;;kFAckF;AAClF,+HAUgC;AAChC,iFAA6B;AAI7B;;;GAGG;AACH,MAAsB,aAAa;IAAnC;QAcI;;WAEG;QACH,eAAU,GAAa,EAAE,CAAC;QAC1B;;;;WAIG;QACH,aAAQ,GAAoB,EAAE,CAAC;IAqBnC,CAAC;IAVG;;OAEG;IACH,IAAI,IAAI;QACJ,IAAI,OAAO,GAAkB,IAAI,CAAC;QAClC,OAAO,CAAC,CAAC,OAAO,YAAY,UAAU,CAAC,EAAE,CAAC;YACtC,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC;QAC7B,CAAC;QACD,OAAO,OAAO,CAAC;IACnB,CAAC;CACJ;AA5CD,sCA4CC;AAED;;;;;GAKG;AACH,MAAsB,oBAAoB;IAItC,YAAY,kBAA+C;QACvD,IAAI,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;QAC7C,IAAI,CAAC,KAAK,GAAG,IAAI,kBAAkB,EAAE,CAAC;QACtC,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,EAAE,CAAC;QAC3B,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,EAAE,CAAC;QACzB,IAAI,CAAC,KAAK,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,EAAE,CAAC;IAC9B,CAAC;IAED,KAAK;QACD,IAAI,CAAC,KAAK,GAAG,IAAI,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC3C,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,KAAK;QACD,MAAM,OAAO,GAAG,IAAI,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC9C,MAAM,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QACnC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,GAAG,OAAO,CAAC,CAAC,CAAC;QAC5D,IAAI,OAAO,CAAC,EAAE,KAAK,SAAS,EAAE,CAAC;YAC3B,MAAM,IAAI,KAAK,CAAC,6DAA6D,CAAC,CAAC;QACnF,CAAC;QACD,IAAI,OAAO,CAAC,IAAI,KAAK,SAAS,EAAE,CAAC;YAC7B,MAAM,IAAI,KAAK,CAAC,+DAA+D,CAAC,CAAC;QACrF,CAAC;QACD,OAAO,OAAO,CAAC;IACnB,CAAC;IAED,EAAE,CAAC,EAAU;QACT,IAAI,CAAC,KAAK,CAAC,EAAE,GAAG,EAAE,CAAC;QACnB,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,IAAI,CAAC,IAAY;QACb,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC;QACvB,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,WAAW,CAAC,QAAgB;QACxB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACrC,OAAO,IAAI,CAAC;IAChB,CAAC;IAID,aAAa,CAAC,GAAG,UAAgC;QAC7C,uBAAQ,EAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;QAC5C,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,GAAG,CAAC,KAAoB;QACpB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAChC,OAAO,IAAI,CAAC;IAChB,CAAC;IAID,WAAW,CAAC,GAAG,QAAqC;QAChD,uBAAQ,EAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QACxC,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,MAAM,CAAC,GAAW,EAAE,KAAoB;QACpC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;YACnB,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,EAAE,CAAC;QACzB,CAAC;QACD,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;QAC7B,OAAO,IAAI,CAAC;IAChB,CAAC;IAID,OAAO,CAAC,IAAuC;QAC3C,MAAM,QAAQ,GAAS,EAAE,CAAC;QAC1B,IAAI,IAAI,YAAY,GAAG,EAAE,CAAC;YACtB,CAAC,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAE,CAAC,CAAC,CAAC;QACtE,CAAC;aAAM,CAAC;YACJ,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAClE,CAAC;QACD,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;YAClB,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;QAC7C,CAAC;aAAM,CAAC;YACJ,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,QAAQ,CAAC;QAC/B,CAAC;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AAxFD,oDAwFC;AAED,MAAa,UAAW,SAAQ,aAAa;IACzC,MAAM,CAAC,OAAO;QACV,OAAO,IAAI,iBAAiB,CAAC,UAAU,CAAC,CAAC;IAC7C,CAAC;CAIJ;AAPD,gCAOC;AAED,MAAa,iBAAqD,SAAQ,oBAAuB;IAC7F,QAAQ,CAAC,QAAgB;QACrB,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAC/B,OAAO,IAAI,CAAC;IAChB,CAAC;IAID,YAAY,CAAC,gBAAgC,EAAE,IAAgB;QAC3D,IAAI,MAAc,CAAC;QACnB,IAAI,IAAI,EAAE,CAAC;YACP,MAAM,GAAG,EAAE,GAAG,gBAAgB,EAAE,GAAG,IAAI,EAAE,CAAC;QAC9C,CAAC;aAAM,CAAC;YACJ,MAAM,GAAG,gBAA0B,CAAC;QACxC,CAAC;QACD,IAAI,CAAC,KAAK,CAAC,YAAY,GAAG,MAAM,CAAC;QACjC,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AAlBD,8CAkBC;;;;;;;;;;;;;AC3MD;;;;;;;;;;;;;;kFAckF;;;AAMlF;;;;;;;GAOG;AACH,SAAgB,UAAU,CAAC,OAAsB,EAAE,eAAyC;IACxF,IAAI,CAAC,OAAO,EAAE,CAAC;QACX,OAAO,SAAS,CAAC;IACrB,CAAC;IACD,IAAI,eAAe,CAAC,OAAO,CAAC,EAAE,CAAC;QAC3B,OAAO,OAAO,CAAC;IACnB,CAAC;IACD,MAAM,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC;IAC9B,OAAO,MAAM,CAAC,CAAC,CAAC,UAAU,CAAC,MAAM,EAAE,eAAe,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;AACpE,CAAC;AATD,gCASC;AAED;;;;;;;GAOG;AACH,SAAgB,iBAAiB,CAC7B,OAAsB,EACtB,WAAwC;IAExC,MAAM,SAAS,GAA6B,OAAO,CAAC,EAAE,CAAC,OAAO,YAAY,WAAW,CAAC;IACtF,MAAM,MAAM,GAAG,UAAU,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;IAC9C,IAAI,MAAM,EAAE,CAAC;QACT,OAAO,MAAW,CAAC;IACvB,CAAC;IACD,OAAO,SAAS,CAAC;AACrB,CAAC;AAVD,8CAUC;;;;;;;;;;;;;;;;ACzDD;;;;;;;;;;;;;;kFAckF;AAClF,+HAAsD;AACtD,2IAA6F;AAC7F,yHAA6D;AAC7D,qIAAuE;AAEvE,MAAa,KAAM,SAAQ,8BAAa;IAAxC;;QAKa,SAAI,GAAG,uBAAY,CAAC,IAAI,CAAC;QAGlC,QAAiB,GAAG,IAAI,CAAC;QACzB,QAAY,GAAG,IAAI,CAAC;IACxB,CAAC;IATG,MAAM,CAAC,OAAO;QACV,OAAO,IAAI,YAAY,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,uBAAY,CAAC,IAAI,CAAC,CAAC;IAC3D,CAAC;CAOJ;AAVD,sBAUC;KAFI,kCAAe,OACf,uBAAU;AAGf,MAAa,YAAsC,SAAQ,qCAAuB;IAC9E,aAAa,CAAC,SAAyB;QACnC,OAAO,yCAAsB,CAAC,aAAa,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;IACjE,CAAC;IAED,MAAM,CAAC,MAAe;QAClB,OAAO,8BAAiB,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;IAClD,CAAC;CACJ;AARD,oCAQC;;;;;;;;;;;;;ACxCD;;;;;;;;;;;;;;kFAckF;;;AAElF,+HAAsD;AACtD,qIAAuE;AAEvE,MAAa,KAAM,SAAQ,8BAAa;IAAxC;;QAKa,SAAI,GAAG,uBAAY,CAAC,IAAI,CAAC;IACtC,CAAC;IALG,MAAM,CAAC,OAAO;QACV,OAAO,IAAI,qCAAoB,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,uBAAY,CAAC,IAAI,CAAC,CAAC;IACnE,CAAC;CAGJ;AAND,sBAMC;;;;;;;;;;;;;ACzBD;;;;;;;;;;;;;;kFAckF;;;AAElF,+HAAsD;AACtD,qIAAuE;AAEvE;;;;;;GAMG;AACH,MAAa,mBAAoB,SAAQ,8BAAa;IAClD,MAAM,CAAC,OAAO;QACV,OAAO,IAAI,0BAA0B,CAAC,mBAAmB,CAAC,CAAC,IAAI,CAAC,uBAAY,CAAC,YAAY,CAAC,CAAC;IAC/F,CAAC;CAGJ;AAND,kDAMC;AAED,MAAa,0BAAgF,SAAQ,qCAAuB;IACxH,IAAI,CAAC,IAAY;QACb,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC;QACvB,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AALD,gEAKC;;;;;;;;;;;;;ACvCD;;;;;;;;;;;;;;kFAckF;;;AAIrE,kBAAU,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC;AAO/C,SAAgB,YAAY,CAA0B,OAAU;IAC5D,OAAO,kBAAU,IAAI,OAAO,IAAI,OAAO,CAAC,kBAAU,CAAC,KAAK,IAAI,CAAC;AACjE,CAAC;AAFD,oCAEC;AAID,IAAiB,iBAAiB,CAMjC;AAND,WAAiB,iBAAiB;IAC9B,SAAgB,eAAe,CAA8B,OAAU,EAAE,eAAmC;QACxG,MAAM,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;QAC/B,KAAK,CAAC,eAAe,GAAG,eAAe,CAAC;QACxC,OAAO,OAAO,CAAC;IACnB,CAAC;IAJe,iCAAe,kBAI9B;AACL,CAAC,EANgB,iBAAiB,iCAAjB,iBAAiB,QAMjC;AAED,IAAY,eASX;AATD,WAAY,eAAe;IACvB,uCAAoB;IACpB,8BAAW;IACX,yCAAsB;IACtB,kCAAe;IACf,+CAA4B;IAC5B,oCAAiB;IACjB,6CAA0B;IAC1B,gCAAa;AACjB,CAAC,EATW,eAAe,+BAAf,eAAe,QAS1B;AAED,WAAiB,eAAe;IACf,uBAAO,GAAsB;QACtC,eAAe,CAAC,OAAO;QACvB,eAAe,CAAC,QAAQ;QACxB,eAAe,CAAC,WAAW;QAC3B,eAAe,CAAC,UAAU;KAC7B,CAAC;IACW,qBAAK,GAAsB,CAAC,eAAe,CAAC,GAAG,EAAE,eAAe,CAAC,KAAK,EAAE,eAAe,CAAC,MAAM,EAAE,eAAe,CAAC,IAAI,CAAC,CAAC;IACtH,mBAAG,GAAsB,CAAC,GAAG,eAAe,CAAC,OAAO,EAAE,GAAG,eAAe,CAAC,KAAK,CAAC,CAAC;AACjG,CAAC,EATgB,eAAe,+BAAf,eAAe,QAS/B;;;;;;;;;;;;;;;;AC3CD,kIAAoE;AACpE,4HAAgE;AAChE,qIAAuE;AACvE,yHAA8E;AAE9E,MAAsB,aAAc,SAAQ,8BAAa;IAAzD;;QAKI,QAAc,GAAG,IAAI,CAAC;QACtB,QAAa,GAAG,IAAI,CAAC;QACrB,QAAY,GAAG,IAAI,CAAC;IACxB,CAAC;CAAA;AARD,sCAQC;KAHI,4BAAY,OACZ,yBAAW,OACX,uBAAU;AAGf,MAAa,oBAA8C,SAAQ,qCAAuB;IAGtF,QAAQ,CAAC,QAAwB,EAAE,CAAU;QACzC,OAAO,mCAAmB,CAAC,QAAQ,CAAC,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAC;IAC3D,CAAC;IAID,IAAI,CAAC,WAA+B,EAAE,MAAe;QACjD,OAAO,mCAAmB,CAAC,IAAI,CAAC,IAAI,EAAE,WAAW,EAAE,MAAM,CAAC,CAAC;IAC/D,CAAC;IAED,eAAe,CAAC,GAAW,EAAE,KAAoB;QAC7C,OAAO,gCAAkB,CAAC,eAAe,CAAC,IAAI,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;IAChE,CAAC;IAID,gBAAgB,CAAC,aAAgD;QAC7D,OAAO,gCAAkB,CAAC,gBAAgB,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;IACpE,CAAC;IAED,eAAe,CAAC,eAAmC;QAC/C,OAAO,8BAAiB,CAAC,eAAe,CAAC,IAAI,EAAE,eAAe,CAAC,CAAC;IACpE,CAAC;CACJ;AA1BD,oDA0BC;;;;;;;;;;;;;ACzDD;;;;;;;;;;;;;;kFAckF;;;;AAGlF,yHAA0C;AAC1C,kIAAoE;AACpE,qIAAwD;AACxD,0JAA8D;AAE9D;;;;;;GAMG;AACH,MAAa,yBAA0B,SAAQ,2CAAmB;IAAlE;;QAQI,QAAc,GAAG,IAAI,CAAC;QACtB,QAAY,GAAG,IAAI,CAAC;IACxB,CAAC;IATG,MAAM,CAAU,OAAO;QACnB,OAAO,IAAI,+BAA+B,CAAC,yBAAyB,CAAC,CAAC;IAC1E,CAAC;CAOJ;AAVD,8DAUC;KAFI,4BAAY,OACZ,uBAAU;AAGf,MAAa,+BAEX,SAAQ,qCAAuB;IAC7B,IAAI,CAAC,IAAY;QACb,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC;QACvB,OAAO,IAAI,CAAC;IAChB,CAAC;IAID,QAAQ,CAAC,QAAwB,EAAE,CAAU;QACzC,OAAO,mCAAmB,CAAC,QAAQ,CAAC,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAC;IAC3D,CAAC;IAID,IAAI,CAAC,WAA+B,EAAE,MAAe;QACjD,OAAO,mCAAmB,CAAC,IAAI,CAAC,IAAI,EAAE,WAAW,EAAE,MAAM,CAAC,CAAC;IAC/D,CAAC;CACJ;AAnBD,0EAmBC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5DD;;;;;;;;;;;;;;kFAckF;AAClF,iIAAgC;AAChC,2HAA6B;AAC7B,iIAAgC;AAChC,qHAA0B;AAC1B,+HAA+B;AAC/B,iHAAwB;AACxB,uIAAmC;AACnC,qJAA0C;AAC1C,mHAAyB;AACzB,2HAA6B;AAC7B,iIAAgC;AAChC,mHAAyB;AACzB,6HAA8B;AAC9B,2HAA6B;AAC7B,mIAAiC;AACjC,6HAA8B;AAC9B,iHAAwB;AACxB,iHAAwB;AACxB,iJAAwC;AACxC,2HAA6B;AAC7B,mIAAiC;AACjC,6JAA8C;;;;;;;;;;;;;;;ACpC9C;;;;;;;;;;;;;;kFAckF;AAClF,8HAAwD;AACxD,sIAAuF;AAgBvF,IAAiB,MAAM,CAatB;AAbD,WAAiB,MAAM;IACnB,SAAgB,EAAE,CAAC,MAAW;QAC1B,OAAO,qBAAS,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,MAAM,CAAC,CAAC;IACjE,CAAC;IAFe,SAAE,KAEjB;IACD;;;;;OAKG;IACH,SAAgB,OAAO,CAAC,MAAW,EAAE,IAAY;QAC7C,OAAO,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC;IACrD,CAAC;IAFe,cAAO,UAEtB;AACL,CAAC,EAbgB,MAAM,sBAAN,MAAM,QAatB;AAmBD,IAAiB,aAAa,CAK7B;AALD,WAAiB,aAAa;IAC1B,SAAgB,EAAE,CAAmB,MAAW,EAAE,SAAwB;QACtE,MAAM,WAAW,GAAG,SAAS,aAAT,SAAS,cAAT,SAAS,GAAI,MAAM,CAAC,EAAE,CAAC;QAC3C,OAAO,qBAAS,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,UAAU,CAAC,IAAI,QAAQ,IAAI,MAAM,IAAI,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IACzH,CAAC;IAHe,gBAAE,KAGjB;AACL,CAAC,EALgB,aAAa,6BAAb,aAAa,QAK7B;AAqBD,IAAiB,aAAa,CAkB7B;AAlBD,WAAiB,aAAa;IAC1B,SAAgB,EAAE,CAAC,MAAW;QAC1B,OAAO,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,WAAW,CAAC,CAAC;IACnE,CAAC;IAFe,gBAAE,KAEjB;IAED;;;;;OAKG;IACH,SAAgB,OAAO,CAAC,MAAW,EAAE,IAAY;QAC7C,OAAO,aAAa,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC;IAC5D,CAAC;IAFe,qBAAO,UAEtB;IAED,SAAgB,iBAAiB;QAC7B,OAAO,OAAO,CAAC,iBAAiB,EAAE,CAAC;IACvC,CAAC;IAFe,+BAAiB,oBAEhC;AACL,CAAC,EAlBgB,aAAa,6BAAb,aAAa,QAkB7B;AAiBD,IAAiB,cAAc,CAa9B;AAbD,WAAiB,cAAc;IAC3B,SAAgB,EAAE,CAAC,MAAW;QAC1B,OAAO,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,YAAY,CAAC,CAAC;IACpE,CAAC;IAFe,iBAAE,KAEjB;IAED;;;;OAIG;IACH,SAAgB,kBAAkB,CAAC,MAAW;QAC1C,OAAO,cAAc,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,UAAU,KAAK,EAAE,CAAC;IACjE,CAAC;IAFe,iCAAkB,qBAEjC;AACL,CAAC,EAbgB,cAAc,8BAAd,cAAc,QAa9B;AAqBD,IAAiB,YAAY,CAe5B;AAfD,WAAiB,YAAY;IACZ,iBAAI,GAAG,eAAe,CAAC;IAEpC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,MAAM,CAAC,OAAO,CAAC,MAAM,EAAE,YAAY,CAAC,IAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,SAAS,CAAC,CAAC;IACzF,CAAC;IAFe,eAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,OAAe,EAAE,UAAoD,EAAE;QAC1F,OAAO;YACH,IAAI,EAAE,iBAAI;YACV,UAAU,EAAE,EAAE;YACd,OAAO;YACP,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAPe,mBAAM,SAOrB;AACL,CAAC,EAfgB,YAAY,4BAAZ,YAAY,QAe5B;AAqBD,IAAiB,SAAS,CAczB;AAdD,WAAiB,SAAS;IACtB,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,aAAa,IAAI,MAAM,IAAI,MAAM,CAAC,WAAW,KAAK,IAAI,CAAC;IACvF,CAAC;IAFe,YAAE,KAEjB;IAED;;;;;OAKG;IACH,SAAgB,OAAO,CAAC,MAAe,EAAE,IAAY;QACjD,OAAO,SAAS,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC;IACxD,CAAC;IAFe,iBAAO,UAEtB;AACL,CAAC,EAdgB,SAAS,yBAAT,SAAS,QAczB;AAeD,IAAiB,iBAAiB,CAejC;AAfD,WAAiB,iBAAiB;IACjB,sBAAI,GAAG,UAAU,CAAC;IAE/B,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,SAAS,CAAC,OAAO,CAAC,MAAM,EAAE,sBAAI,CAAC,IAAI,4BAAY,EAAC,MAAM,EAAE,eAAe,CAAC,CAAC;IACpF,CAAC;IAFe,oBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,aAA0B,EAAE,UAA2B,EAAE;QAC5E,OAAO;YACH,IAAI,EAAE,sBAAI;YACV,WAAW,EAAE,IAAI;YACjB,aAAa;YACb,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAPe,wBAAM,SAOrB;AACL,CAAC,EAfgB,iBAAiB,iCAAjB,iBAAiB,QAejC;;;;;;;;;;;;;;;AC/OD;;;;;;;;;;;;;;kFAckF;AAClF,sIAAmD;AACnD,qJAAyC;AA0BzC,IAAiB,YAAY,CAe5B;AAfD,WAAiB,YAAY;IACZ,iBAAI,GAAG,QAAQ,CAAC;IAE7B,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,iBAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,UAAU,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,SAAS,CAAC,CAAC;IACjH,CAAC;IAFe,eAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,OAAe,EAAE,UAA0D,EAAE;QAChG,OAAO;YACH,IAAI,EAAE,iBAAI;YACV,QAAQ,EAAE,MAAM;YAChB,OAAO;YACP,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAPe,mBAAM,SAOrB;AACL,CAAC,EAfgB,YAAY,4BAAZ,YAAY,QAe5B;AA+BD,IAAiB,aAAa,CAqB7B;AArBD,WAAiB,aAAa;IACb,kBAAI,GAAG,SAAS,CAAC;IAE9B,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,kBAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,SAAS,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,UAAU,CAAC,CAAC;IACjH,CAAC;IAFe,gBAAE,KAEjB;IAED,SAAgB,MAAM,CAClB,OAAe,EACf,UAGI,EAAE;QAEN,OAAO;YACH,IAAI,EAAE,kBAAI;YACV,OAAO;YACP,QAAQ,EAAE,MAAM;YAChB,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAbe,oBAAM,SAarB;AACL,CAAC,EArBgB,aAAa,6BAAb,aAAa,QAqB7B;AA0BD,IAAiB,mBAAmB,CAanC;AAbD,WAAiB,mBAAmB;IACnB,wBAAI,GAAG,eAAe,CAAC;IAEpC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,wBAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,YAAY,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,OAAO,CAAC,CAAC;IACjH,CAAC;IAFe,sBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,OAAqF;QACxG,OAAO;YACH,IAAI,EAAE,wBAAI;YACV,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IALe,0BAAM,SAKrB;AACL,CAAC,EAbgB,mBAAmB,mCAAnB,mBAAmB,QAanC;AAsBD,IAAiB,oBAAoB,CAoBpC;AApBD,WAAiB,oBAAoB;IACpB,yBAAI,GAAG,gBAAgB,CAAC;IAErC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,yBAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,YAAY,CAAC,CAAC;IAC/E,CAAC;IAFe,uBAAE,KAEjB;IAED,SAAgB,MAAM,CAClB,UAAkB,EAClB,UAGI,EAAE;QAEN,OAAO;YACH,IAAI,EAAE,yBAAI;YACV,UAAU;YACV,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAZe,2BAAM,SAYrB;AACL,CAAC,EApBgB,oBAAoB,oCAApB,oBAAoB,QAoBpC;AAkBD,IAAiB,iBAAiB,CAcjC;AAdD,WAAiB,iBAAiB;IACjB,sBAAI,GAAG,aAAa,CAAC;IAElC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,sBAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,YAAY,CAAC,CAAC;IAC/E,CAAC;IAFe,oBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,UAAkB,EAAE,OAAgB;QACvD,OAAO;YACH,IAAI,EAAE,sBAAI;YACV,UAAU;YACV,OAAO;SACV,CAAC;IACN,CAAC;IANe,wBAAM,SAMrB;AACL,CAAC,EAdgB,iBAAiB,iCAAjB,iBAAiB,QAcjC;;;;;;;;;;;;;AC9ND;;;;;;;;;;;;;;kFAckF;;;AAElF,sIAAmD;AACnD,qJAAmF;AAcnF,IAAiB,0BAA0B,CAe1C;AAfD,WAAiB,0BAA0B;IAC1B,+BAAI,GAAG,sBAAsB,CAAC;IAE3C,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,6BAAa,CAAC,OAAO,CAAC,MAAM,EAAE,+BAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,eAAe,CAAC,CAAC;IACzF,CAAC;IAFe,6BAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,aAA4B,EAAE,UAAkC,EAAE;QACrF,OAAO;YACH,IAAI,EAAE,+BAAI;YACV,SAAS,EAAE,EAAE;YACb,aAAa;YACb,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAPe,iCAAM,SAOrB;AACL,CAAC,EAfgB,0BAA0B,0CAA1B,0BAA0B,QAe1C;AAgBD,IAAiB,sBAAsB,CAetC;AAfD,WAAiB,sBAAsB;IACtB,2BAAI,GAAG,kBAAkB,CAAC;IAEvC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,2BAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,eAAe,CAAC,CAAC;IAClF,CAAC;IAFe,yBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,aAA4B,EAAE,UAAmC,EAAE;QACtF,OAAO;YACH,IAAI,EAAE,2BAAI;YACV,UAAU,EAAE,EAAE;YACd,aAAa;YACb,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAPe,6BAAM,SAOrB;AACL,CAAC,EAfgB,sBAAsB,sCAAtB,sBAAsB,QAetC;AAcD,IAAiB,YAAY,CAe5B;AAfD,WAAiB,YAAY;IACZ,iBAAI,GAAG,KAAK,CAAC;IAE1B,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,yBAAS,CAAC,OAAO,CAAC,MAAM,EAAE,iBAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,eAAe,CAAC,CAAC;IACrF,CAAC;IAFe,eAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,aAA4B,EAAE,UAA2B,EAAE;QAC9E,OAAO;YACH,IAAI,EAAE,iBAAI;YACV,WAAW,EAAE,IAAI;YACjB,aAAa;YACb,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAPe,mBAAM,SAOrB;AACL,CAAC,EAfgB,YAAY,4BAAZ,YAAY,QAe5B;AAmBD,IAAiB,cAAc,CAc9B;AAdD,WAAiB,cAAc;IACd,mBAAI,GAAG,OAAO,CAAC;IAE5B,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,yBAAS,CAAC,OAAO,CAAC,MAAM,EAAE,mBAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,eAAe,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,eAAe,CAAC,CAAC;IAC/H,CAAC;IAFe,iBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,OAAoF;QACvG,OAAO;YACH,IAAI,EAAE,mBAAI;YACV,WAAW,EAAE,IAAI;YACjB,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IANe,qBAAM,SAMrB;AACL,CAAC,EAdgB,cAAc,8BAAd,cAAc,QAc9B;;;;;;;;;;;;;AC3ID;;;;;;;;;;;;;;kFAckF;;;AAElF,sIAAgF;AAChF,qJAAwE;AAmBxE,IAAiB,qBAAqB,CAcrC;AAdD,WAAiB,qBAAqB;IACrB,0BAAI,GAAG,uBAAuB,CAAC;IAE5C,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,6BAAa,CAAC,OAAO,CAAC,MAAM,EAAE,0BAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,WAAW,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,eAAe,CAAC,CAAC;IAC/H,CAAC;IAFe,wBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,OAAgF;QACnG,OAAO;YACH,IAAI,EAAE,0BAAI;YACV,SAAS,EAAE,EAAE;YACb,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IANe,4BAAM,SAMrB;AACL,CAAC,EAdgB,qBAAqB,qCAArB,qBAAqB,QAcrC;AAqBD,IAAiB,iBAAiB,CAejC;AAfD,WAAiB,iBAAiB;IACjB,sBAAI,GAAG,mBAAmB,CAAC;IAExC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,sBAAI,CAAC,IAAI,4BAAY,EAAC,MAAM,EAAE,SAAS,CAAC,CAAC;IAC3E,CAAC;IAFe,oBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,OAAwB,EAAE,UAAgD,EAAE;QAC/F,OAAO;YACH,IAAI,EAAE,sBAAI;YACV,UAAU,EAAE,EAAE;YACd,OAAO;YACP,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAPe,wBAAM,SAOrB;AACL,CAAC,EAfgB,iBAAiB,iCAAjB,iBAAiB,QAejC;;;;;;;;;;;;;ACtFD;;;;;;;;;;;;;;kFAckF;;;AAElF,sIAAiE;AACjE,qJAA4C;AA2B5C,IAAiB,sBAAsB,CAwBtC;AAxBD,WAAiB,sBAAsB;IACtB,2BAAI,GAAG,eAAe,CAAC;IAEpC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,CACH,yBAAS,CAAC,OAAO,CAAC,MAAM,EAAE,2BAAI,CAAC;YAC/B,6BAAa,EAAC,MAAM,EAAE,eAAe,CAAC;YACtC,6BAAa,EAAC,MAAM,EAAE,iBAAiB,CAAC;YACxC,6BAAa,EAAC,MAAM,EAAE,iBAAiB,CAAC,CAC3C,CAAC;IACN,CAAC;IAPe,yBAAE,KAOjB;IAED,SAAgB,MAAM,CAAC,OAKtB;QACG,OAAO;YACH,IAAI,EAAE,2BAAI;YACV,WAAW,EAAE,IAAI;YACjB,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAXe,6BAAM,SAWrB;AACL,CAAC,EAxBgB,sBAAsB,sCAAtB,sBAAsB,QAwBtC;AAiBD,IAAiB,4BAA4B,CAe5C;AAfD,WAAiB,4BAA4B;IAC5B,iCAAI,GAAG,qBAAqB,CAAC;IAE1C,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,yBAAS,CAAC,OAAO,CAAC,MAAM,EAAE,iCAAI,CAAC,IAAI,4BAAY,EAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC;IACvF,CAAC;IAFe,+BAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,gBAA2C,EAAE,UAA2B,EAAE;QAC7F,OAAO;YACH,IAAI,EAAE,iCAAI;YACV,WAAW,EAAE,IAAI;YACjB,gBAAgB;YAChB,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAPe,mCAAM,SAOrB;AACL,CAAC,EAfgB,4BAA4B,4CAA5B,4BAA4B,QAe5C;;;;;;;;;;;;;ACpGD;;;;;;;;;;;;;;kFAckF;;;AAIlF,sIAAiE;AACjE,qJAA4C;AAc5C,IAAiB,eAAe,CAc/B;AAdD,WAAiB,eAAe;IAC5B,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,yBAAS,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,eAAe,CAAC,CAAC;IAC1E,CAAC;IAFe,kBAAE,KAEjB;IAED;;;;;OAKG;IACH,SAAgB,OAAO,CAAC,MAAe,EAAE,IAAY;QACjD,OAAO,eAAe,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC;IAC9D,CAAC;IAFe,uBAAO,UAEtB;AACL,CAAC,EAdgB,eAAe,+BAAf,eAAe,QAc/B;AAuBD,IAAiB,mBAAmB,CAkBnC;AAlBD,WAAiB,mBAAmB;IACnB,wBAAI,GAAG,YAAY,CAAC;IAEjC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,eAAe,CAAC,OAAO,CAAC,MAAM,EAAE,wBAAI,CAAC,CAAC;IACjD,CAAC;IAFe,sBAAE,KAEjB;IAED,SAAgB,MAAM,CAClB,aAAqB,EACrB,UAAmE,EAAE;QAErE,OAAO;YACH,IAAI,EAAE,wBAAI;YACV,WAAW,EAAE,IAAI;YACjB,aAAa;YACb,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAVe,0BAAM,SAUrB;AACL,CAAC,EAlBgB,mBAAmB,mCAAnB,mBAAmB,QAkBnC;AAeD,IAAiB,mBAAmB,CAqBnC;AArBD,WAAiB,mBAAmB;IACnB,wBAAI,GAAG,YAAY,CAAC;IAEjC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,CACH,eAAe,CAAC,OAAO,CAAC,MAAM,EAAE,wBAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,iBAAiB,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,iBAAiB,CAAC,CAChI,CAAC;IACN,CAAC;IAJe,sBAAE,KAIjB;IAED,SAAgB,MAAM,CAAC,OAKtB;QACG,OAAO;YACH,IAAI,EAAE,wBAAI;YACV,WAAW,EAAE,IAAI;YACjB,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAXe,0BAAM,SAWrB;AACL,CAAC,EArBgB,mBAAmB,mCAAnB,mBAAmB,QAqBnC;AAeD,IAAiB,sBAAsB,CAetC;AAfD,WAAiB,sBAAsB;IACtB,2BAAI,GAAG,eAAe,CAAC;IAEpC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,yBAAS,CAAC,OAAO,CAAC,MAAM,EAAE,2BAAI,CAAC,IAAI,4BAAY,EAAC,MAAM,EAAE,YAAY,CAAC,CAAC;IACjF,CAAC;IAFe,yBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,UAAoB,EAAE,UAA2B,EAAE;QACtE,OAAO;YACH,IAAI,EAAE,2BAAI;YACV,WAAW,EAAE,IAAI;YACjB,UAAU;YACV,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAPe,6BAAM,SAOrB;AACL,CAAC,EAfgB,sBAAsB,sCAAtB,sBAAsB,QAetC;;;;;;;;;;;;;;;ACxID,sIAAkE;AAClE,qJAAwE;AAsBxE,IAAiB,uBAAuB,CAcvC;AAdD,WAAiB,uBAAuB;IACvB,4BAAI,GAAG,mBAAmB,CAAC;IAExC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,6BAAa,CAAC,OAAO,CAAC,MAAM,EAAE,4BAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,WAAW,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;IACxH,CAAC;IAFe,0BAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,OAAkE;QACrF,OAAO;YACH,IAAI,EAAE,4BAAI;YACV,SAAS,EAAE,EAAE;YACb,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IANe,8BAAM,SAMrB;AACL,CAAC,EAdgB,uBAAuB,uCAAvB,uBAAuB,QAcvC;AAcD,IAAiB,mBAAmB,CAenC;AAfD,WAAiB,mBAAmB;IACnB,wBAAI,GAAG,eAAe,CAAC;IAEpC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,wBAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,SAAS,CAAC,CAAC;IAC5E,CAAC;IAFe,sBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,OAAyB,EAAE,UAAmC,EAAE;QACnF,OAAO;YACH,IAAI,EAAE,wBAAI;YACV,UAAU,EAAE,EAAE;YACd,OAAO;YACP,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAPe,0BAAM,SAOrB;AACL,CAAC,EAfgB,mBAAmB,mCAAnB,mBAAmB,QAenC;;;;;;;;;;;;;;;ACpED,sIAA2F;AAC3F,qJAAwE;AAwBxE,IAAiB,gBAAgB,CAkHhC;AAlHD,WAAiB,gBAAgB;IAC7B,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,qBAAS,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,KAAK,CAAC,CAAC;IAChE,CAAC;IAFe,mBAAE,KAEjB;IACD;;OAEG;IACU,4BAAW,GAAG,YAAY,CAAC;IACxC;;OAEG;IACU,sCAAqB,GAAG,GAAG,CAAC;IACzC;;OAEG;IACU,0BAAS,GAAG,MAAM,CAAC;IAChC;;OAEG;IACU,4BAAW,GAAG,QAAQ,CAAC;IAapC;;;;OAIG;IACH,SAAgB,YAAY,CAAC,MAAwB;QACjD,OAAO,MAAM,CAAC,IAAI,KAAK,SAAS,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;IAC5E,CAAC;IAFe,6BAAY,eAE3B;IAED;;;;;OAKG;IACH,SAAgB,WAAW,CAAC,MAAwB,EAAE,GAAW,EAAE,KAAoB;QACnF,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;YACf,MAAM,CAAC,IAAI,GAAG,EAAE,CAAC;QACrB,CAAC;QACD,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;IAC7B,CAAC;IALe,4BAAW,cAK1B;IAED;;;;;;OAMG;IACH,SAAgB,aAAa,CAAC,MAAwB;;QAClD,IAAI,CAAC,aAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,IAAI,0CAAG,4BAAW,CAAC,GAAE,CAAC;YAC/B,OAAO,EAAE,CAAC;QACd,CAAC;QACD,MAAM,eAAe,GAAG,MAAM,CAAC,IAAI,CAAC,4BAAW,CAAC,CAAC,QAAQ,EAAE,CAAC;QAC5D,OAAO,eAAe,CAAC,KAAK,CAAC,sCAAqB,CAAC,CAAC;IACxD,CAAC;IANe,8BAAa,gBAM5B;IAED;;;;;OAKG;IACH,SAAgB,aAAa,CAAC,MAAwB,EAAE,GAAG,UAAoB;QAC3E,IAAI,MAAM,CAAC,IAAI,KAAK,SAAS,EAAE,CAAC;YAC5B,MAAM,CAAC,IAAI,GAAG,EAAE,CAAC;QACrB,CAAC;QACD,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,4BAAW,CAAC,GAAG,UAAU,CAAC,IAAI,CAAC,sCAAqB,CAAC,CAAC,CAAC;IAC/E,CAAC;IALe,8BAAa,gBAK5B;IAED;;;;;OAKG;IACH,SAAgB,eAAe,CAAC,MAAwB,EAAE,QAAkC;QACxF,IAAI,QAAQ,EAAE,CAAC;YACX,IAAI,MAAM,CAAC,IAAI,KAAK,SAAS,EAAE,CAAC;gBAC5B,MAAM,CAAC,IAAI,GAAG,EAAE,CAAC;YACrB,CAAC;YACD,MAAM,CAAC,IAAI,CAAC,0BAAS,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC;YACvC,MAAM,CAAC,IAAI,CAAC,4BAAW,CAAC,GAAG,QAAQ,CAAC,SAAS,CAAC;QAClD,CAAC;IACL,CAAC;IARe,gCAAe,kBAQ9B;IAED;;;;;;OAMG;IACH,SAAgB,eAAe,CAAC,MAAwB;QACpD,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,0BAAS,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,4BAAW,CAAC,EAAE,CAAC;YACvE,OAAO,SAAS,CAAC;QACrB,CAAC;QACD,OAAO;YACH,IAAI,EAAE,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,0BAAS,CAAC,CAAC;YACpC,SAAS,EAAE,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,4BAAW,CAAC,CAAC;SAC9C,CAAC;IACN,CAAC;IARe,gCAAe,kBAQ9B;AACL,CAAC,EAlHgB,gBAAgB,gCAAhB,gBAAgB,QAkHhC;AAmBD,IAAiB,8BAA8B,CAkB9C;AAlBD,WAAiB,8BAA8B;IAC9B,mCAAI,GAAG,0BAA0B,CAAC;IAE/C,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,6BAAa,CAAC,OAAO,CAAC,MAAM,EAAE,mCAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,cAAc,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,eAAe,CAAC,CAAC;IAClI,CAAC;IAFe,iCAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,OAItB;QACG,OAAO;YACH,IAAI,EAAE,mCAAI;YACV,SAAS,EAAE,EAAE;YACb,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAVe,qCAAM,SAUrB;AACL,CAAC,EAlBgB,8BAA8B,8CAA9B,8BAA8B,QAkB9C;AAoBD,IAAiB,0BAA0B,CAe1C;AAfD,WAAiB,0BAA0B;IAC1B,+BAAI,GAAG,sBAAsB,CAAC;IAE3C,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,+BAAI,CAAC,IAAI,4BAAY,EAAC,MAAM,EAAE,SAAS,CAAC,CAAC;IAC3E,CAAC;IAFe,6BAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,OAA2B,EAAE,UAAgD,EAAE;QAClG,OAAO;YACH,IAAI,EAAE,+BAAI;YACV,UAAU,EAAE,EAAE;YACd,OAAO;YACP,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAPe,iCAAM,SAOrB;AACL,CAAC,EAfgB,0BAA0B,0CAA1B,0BAA0B,QAe1C;AAaD,IAAiB,sBAAsB,CAatC;AAbD,WAAiB,sBAAsB;IACtB,2BAAI,GAAG,kBAAkB,CAAC;IAEvC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,2BAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;IAC3E,CAAC;IAFe,yBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,MAAwB;QAC3C,OAAO;YACH,IAAI,EAAE,2BAAI;YACV,MAAM;SACT,CAAC;IACN,CAAC;IALe,6BAAM,SAKrB;AACL,CAAC,EAbgB,sBAAsB,sCAAtB,sBAAsB,QAatC;AAkBD,IAAiB,6BAA6B,CAe7C;AAfD,WAAiB,6BAA6B;IAC7B,kCAAI,GAAG,yBAAyB,CAAC;IAE9C,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,6BAAa,CAAC,OAAO,CAAC,MAAM,EAAE,kCAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC;IAC5F,CAAC;IAFe,gCAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,gBAAkC,EAAE,UAAkC,EAAE;QAC3F,OAAO;YACH,IAAI,EAAE,kCAAI;YACV,SAAS,EAAE,EAAE;YACb,gBAAgB;YAChB,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAPe,oCAAM,SAOrB;AACL,CAAC,EAfgB,6BAA6B,6CAA7B,6BAA6B,QAe7C;AAsBD,IAAiB,iCAAiC,CAejD;AAfD,WAAiB,iCAAiC;IACjC,sCAAI,GAAG,6BAA6B,CAAC;IAElD,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,sCAAI,CAAC,IAAI,4BAAY,EAAC,MAAM,EAAE,YAAY,CAAC,CAAC;IAC9E,CAAC;IAFe,oCAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,UAAoB,EAAE,UAAgD,EAAE;QAC3F,OAAO;YACH,IAAI,EAAE,sCAAI;YACV,UAAU,EAAE,EAAE;YACd,UAAU;YACV,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAPe,wCAAM,SAOrB;AACL,CAAC,EAfgB,iCAAiC,iDAAjC,iCAAiC,QAejD;AAkBD,IAAiB,8BAA8B,CAa9C;AAbD,WAAiB,8BAA8B;IAC9B,mCAAI,GAAG,0BAA0B,CAAC;IAE/C,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,mCAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;IAC3E,CAAC;IAFe,iCAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,MAAwB;QAC3C,OAAO;YACH,IAAI,EAAE,mCAAI;YACV,MAAM;SACT,CAAC;IACN,CAAC;IALe,qCAAM,SAKrB;AACL,CAAC,EAbgB,8BAA8B,8CAA9B,8BAA8B,QAa9C;;;;;;;;;;;;;;;AClVD,yIAAoD;AACpD,sIAAkE;AAClE,qJAAyC;AA4BzC,IAAiB,YAAY,CA4B5B;AA5BD,WAAiB,YAAY;IACZ,iBAAI,GAAG,iBAAiB,CAAC;IAEtC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,iBAAI,CAAC,IAAI,4BAAY,EAAC,MAAM,EAAE,qBAAqB,CAAC,IAAI,4BAAY,EAAC,MAAM,EAAE,uBAAuB,CAAC,CAAC;IACxI,CAAC;IAFe,eAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,UAA0F,EAAE;;QAC/G,MAAM,qBAAqB,GAAG,aAAO,CAAC,qBAAqB,mCAAI,EAAE,CAAC;QAClE,OAAO;YACH,IAAI,EAAE,iBAAI;YACV,mBAAmB,EAAE,aAAO,CAAC,mBAAmB,mCAAI,EAAE;YACtD,qBAAqB,EAAE,8BAAa,EAAC,qBAAqB,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,EAAE;YAC9F,WAAW,EAAE,OAAO,qBAAqB,KAAK,SAAS,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,KAAK;SAC1F,CAAC;IACN,CAAC;IARe,mBAAM,SAQrB;IAED,SAAgB,YAAY,CAAC,mBAA6B;QACtD,OAAO,MAAM,CAAC,EAAE,mBAAmB,EAAE,CAAC,CAAC;IAC3C,CAAC;IAFe,yBAAY,eAE3B;IAED,SAAgB,eAAe,CAAC,qBAA+B;QAC3D,OAAO,MAAM,CAAC,EAAE,qBAAqB,EAAE,CAAC,CAAC;IAC7C,CAAC;IAFe,4BAAe,kBAE9B;IAED,SAAgB,YAAY,CAAC,mBAA6B;QACtD,OAAO,MAAM,CAAC,EAAE,mBAAmB,EAAE,qBAAqB,EAAE,IAAI,EAAE,CAAC,CAAC;IACxE,CAAC;IAFe,yBAAY,eAE3B;AACL,CAAC,EA5BgB,YAAY,4BAAZ,YAAY,QA4B5B;AAgBD,IAAiB,eAAe,CAa/B;AAbD,WAAiB,eAAe;IACf,oBAAI,GAAG,aAAa,CAAC;IAElC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,oBAAI,CAAC,IAAI,8BAAc,EAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;IAC5E,CAAC;IAFe,kBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,MAAM,GAAG,IAAI;QAChC,OAAO;YACH,IAAI,EAAE,oBAAI;YACV,MAAM;SACT,CAAC;IACN,CAAC;IALe,sBAAM,SAKrB;AACL,CAAC,EAbgB,eAAe,+BAAf,eAAe,QAa/B;;;;;;;;;;;;;;;ACvFD,sIAAkE;AAClE,qJAAmF;AA2BnF,IAAiB,2BAA2B,CAwB3C;AAxBD,WAAiB,2BAA2B;IAC3B,gCAAI,GAAG,uBAAuB,CAAC;IAE5C,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,CACH,6BAAa,CAAC,OAAO,CAAC,MAAM,EAAE,gCAAI,CAAC;YACnC,6BAAa,EAAC,MAAM,EAAE,WAAW,CAAC;YAClC,6BAAa,EAAC,MAAM,EAAE,gBAAgB,CAAC;YACvC,6BAAa,EAAC,MAAM,EAAE,MAAM,CAAC,CAChC,CAAC;IACN,CAAC;IAPe,8BAAE,KAOjB;IAED,SAAgB,MAAM,CAAC,OAKtB;QACG,OAAO;YACH,IAAI,EAAE,gCAAI;YACV,SAAS,EAAE,EAAE;YACb,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAXe,kCAAM,SAWrB;AACL,CAAC,EAxBgB,2BAA2B,2CAA3B,2BAA2B,QAwB3C;AAkBD,IAAiB,6BAA6B,CAe7C;AAfD,WAAiB,6BAA6B;IAC7B,kCAAI,GAAG,yBAAyB,CAAC;IAE9C,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,kCAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;IAC3E,CAAC;IAFe,gCAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,MAAwB,EAAE,UAAgD,EAAE;QAC/F,OAAO;YACH,IAAI,EAAE,kCAAI;YACV,UAAU,EAAE,EAAE;YACd,MAAM;YACN,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAPe,oCAAM,SAOrB;AACL,CAAC,EAfgB,6BAA6B,6CAA7B,6BAA6B,QAe7C;AAuBD,IAAiB,uBAAuB,CAcvC;AAdD,WAAiB,uBAAuB;IACvB,4BAAI,GAAG,gBAAgB,CAAC;IAErC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,yBAAS,CAAC,OAAO,CAAC,MAAM,EAAE,4BAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,SAAS,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,MAAM,CAAC,CAAC;IAChH,CAAC;IAFe,0BAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,OAAuD;QAC1E,OAAO;YACH,IAAI,EAAE,4BAAI;YACV,WAAW,EAAE,IAAI;YACjB,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IANe,8BAAM,SAMrB;AACL,CAAC,EAdgB,uBAAuB,uCAAvB,uBAAuB,QAcvC;AAwBD,IAAiB,gBAAgB,CAuDhC;AAvDD,WAAiB,gBAAgB;IAC7B;;OAEG;IACH,IAAY,QAOX;IAPD,WAAY,QAAQ;QAChB,yCAAK;QACL,yCAAK;QACL,6CAAO;QACP,uCAAI;QACJ,mCAAE;QACF,uCAAI;IACR,CAAC,EAPW,QAAQ,GAAR,yBAAQ,KAAR,yBAAQ,QAOnB;IAED;;OAEG;IACU,qBAAI,GAAqB;QAClC,QAAQ,EAAE,QAAQ,CAAC,IAAI;QACvB,OAAO,EAAE,EAAE;QACX,KAAK,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE;KAC7C,CAAC;IAEF;;;;;OAKG;IACH,SAAgB,IAAI,CAAC,gBAAkC;QACnD,OAAO,CACH,gBAAgB,CAAC,QAAQ,KAAK,QAAQ,CAAC,EAAE;YACzC,gBAAgB,CAAC,QAAQ,KAAK,QAAQ,CAAC,IAAI;YAC3C,gBAAgB,CAAC,QAAQ,KAAK,QAAQ,CAAC,IAAI,CAC9C,CAAC;IACN,CAAC;IANe,qBAAI,OAMnB;IAED;;;;;OAKG;IACH,SAAgB,SAAS,CAAC,gBAAkC;QACxD,OAAO,gBAAgB,CAAC,QAAQ,KAAK,QAAQ,CAAC,OAAO,CAAC;IAC1D,CAAC;IAFe,0BAAS,YAExB;IAED;;;;;OAKG;IACH,SAAgB,OAAO,CAAC,gBAAkC;QACtD,OAAO,gBAAgB,CAAC,QAAQ,KAAK,QAAQ,CAAC,KAAK,IAAI,gBAAgB,CAAC,QAAQ,KAAK,QAAQ,CAAC,KAAK,CAAC;IACxG,CAAC;IAFe,wBAAO,UAEtB;AACL,CAAC,EAvDgB,gBAAgB,gCAAhB,gBAAgB,QAuDhC;;;;;;;;;;;;;ACzND;;;;;;;;;;;;;;kFAckF;;;AAGlF,sIAAiF;AACjF,qJAAwE;AAsFxE,IAAiB,sBAAsB,CActC;AAdD,WAAiB,sBAAsB;IACtB,2BAAI,GAAG,kBAAkB,CAAC;IAEvC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,6BAAa,CAAC,OAAO,CAAC,MAAM,EAAE,2BAAI,CAAC,CAAC;IAC/C,CAAC;IAFe,yBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,UAAkC,EAAE;QACvD,OAAO;YACH,IAAI,EAAE,2BAAI;YACV,SAAS,EAAE,EAAE;YACb,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IANe,6BAAM,SAMrB;AACL,CAAC,EAdgB,sBAAsB,sCAAtB,sBAAsB,QActC;AAeD,IAAiB,kBAAkB,CAclC;AAdD,WAAiB,kBAAkB;IAClB,uBAAI,GAAG,cAAc,CAAC;IAEnC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,uBAAI,CAAC,IAAI,4BAAY,EAAC,MAAM,EAAE,YAAY,CAAC,IAAI,4BAAY,EAAC,MAAM,EAAE,WAAW,CAAC,CAAC;IACnH,CAAC;IAFe,qBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,OAAwF;QAC3G,OAAO;YACH,IAAI,EAAE,uBAAI;YACV,UAAU,EAAE,EAAE;YACd,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IANe,yBAAM,SAMrB;AACL,CAAC,EAdgB,kBAAkB,kCAAlB,kBAAkB,QAclC;AA2BD,IAAiB,sBAAsB,CA0BtC;AA1BD,WAAiB,sBAAsB;IACtB,2BAAI,GAAG,kBAAkB,CAAC;IAEvC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,CACH,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,2BAAI,CAAC;YAC5B,6BAAa,EAAC,MAAM,EAAE,UAAU,CAAC;YACjC,6BAAa,EAAC,MAAM,EAAE,iBAAiB,CAAC;YACxC,6BAAa,EAAC,MAAM,EAAE,iBAAiB,EAAE,IAAI,CAAC,CACjD,CAAC;IACN,CAAC;IAPe,yBAAE,KAOjB;IAED,SAAgB,MAAM,CAAC,OAKtB;;QACG,OAAO;YACH,IAAI,EAAE,2BAAI;YACV,QAAQ,EAAE,OAAO,CAAC,QAAQ;YAC1B,eAAe,EAAE,gBAAgB,CAAC,OAAO,CAAC,aAAa,CAAC;YACxD,eAAe,EAAE,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,gBAAgB,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,SAAS;YAC5F,SAAS,EAAE,aAAO,CAAC,SAAS,mCAAI,EAAE;SACrC,CAAC;IACN,CAAC;IAbe,6BAAM,SAarB;AACL,CAAC,EA1BgB,sBAAsB,sCAAtB,sBAAsB,QA0BtC;AAED,SAAS,gBAAgB,CAAC,OAAqC;IAC3D,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE,CAAC;QAC9B,OAAO,OAAO,CAAC;IACnB,CAAC;IACD,OAAO,OAAO,CAAC,EAAE,CAAC;AACtB,CAAC;AA8BD,IAAiB,qBAAqB,CA0BrC;AA1BD,WAAiB,qBAAqB;IACrB,0BAAI,GAAG,uBAAuB,CAAC;IAE5C,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,CACH,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,0BAAI,CAAC;YAC5B,8BAAc,EAAC,MAAM,EAAE,SAAS,CAAC;YACjC,6BAAa,EAAC,MAAM,EAAE,UAAU,CAAC;YACjC,6BAAa,EAAC,MAAM,EAAE,iBAAiB,CAAC;YACxC,6BAAa,EAAC,MAAM,EAAE,iBAAiB,EAAE,IAAI,CAAC,CACjD,CAAC;IACN,CAAC;IARe,wBAAE,KAQjB;IAED,SAAgB,MAAM,CAAC,OAMtB;QACG,OAAO;YACH,IAAI,EAAE,0BAAI;YACV,UAAU,EAAE,EAAE;YACd,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAZe,4BAAM,SAYrB;AACL,CAAC,EA1BgB,qBAAqB,qCAArB,qBAAqB,QA0BrC;;;;;;;;;;;;;;;ACvQD;;;;;;;;;;;;;;kFAckF;AAClF,sIAAkD;AAClD,qJAAwE;AAwBxE;;GAEG;AACH,IAAiB,UAAU,CAI1B;AAJD,WAAiB,UAAU;IACV,eAAI,GAAG,MAAM,CAAC;IACd,kBAAO,GAAG,SAAS,CAAC;IACpB,gBAAK,GAAG,OAAO,CAAC;AACjC,CAAC,EAJgB,UAAU,0BAAV,UAAU,QAI1B;AAED;;GAEG;AACH,IAAiB,aAAa,CAK7B;AALD,WAAiB,aAAa;IAC1B,gDAAgD;IACnC,mBAAK,GAAG,OAAO,CAAC;IAC7B,+CAA+C;IAClC,kBAAI,GAAG,MAAM,CAAC;AAC/B,CAAC,EALgB,aAAa,6BAAb,aAAa,QAK7B;AAqBD,IAAiB,oBAAoB,CAgBpC;AAhBD,WAAiB,oBAAoB;IACpB,yBAAI,GAAG,gBAAgB,CAAC;IAErC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,6BAAa,CAAC,OAAO,CAAC,MAAM,EAAE,yBAAI,CAAC,IAAI,4BAAY,EAAC,MAAM,EAAE,aAAa,CAAC,CAAC;IACtF,CAAC;IAFe,uBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,WAAqB,EAAE,UAAmD,EAAE;QAC/F,OAAO;YACH,IAAI,EAAE,yBAAI;YACV,SAAS,EAAE,EAAE;YACb,WAAW;YACX,MAAM,EAAE,aAAa,CAAC,KAAK;YAC3B,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IARe,2BAAM,SAQrB;AACL,CAAC,EAhBgB,oBAAoB,oCAApB,oBAAoB,QAgBpC;AAuBD,IAAiB,gBAAgB,CAgBhC;AAhBD,WAAiB,gBAAgB;IAChB,qBAAI,GAAG,YAAY,CAAC;IAEjC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,qBAAI,CAAC,IAAI,4BAAY,EAAC,MAAM,EAAE,SAAS,CAAC,CAAC;IAC3E,CAAC;IAFe,mBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,OAAiB,EAAE,UAAoD,EAAE;QAC5F,OAAO;YACH,IAAI,EAAE,qBAAI;YACV,UAAU,EAAE,EAAE;YACd,OAAO;YACP,MAAM,EAAE,aAAa,CAAC,KAAK;YAC3B,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IARe,uBAAM,SAQrB;AACL,CAAC,EAhBgB,gBAAgB,gCAAhB,gBAAgB,QAgBhC;AAgBD,IAAiB,mBAAmB,CAanC;AAbD,WAAiB,mBAAmB;IACnB,wBAAI,GAAG,eAAe,CAAC;IAEpC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,wBAAI,CAAC,IAAI,4BAAY,EAAC,MAAM,EAAE,SAAS,CAAC,CAAC;IAC3E,CAAC;IAFe,sBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,OAAiB;QACpC,OAAO;YACH,IAAI,EAAE,wBAAI;YACV,OAAO;SACV,CAAC;IACN,CAAC;IALe,0BAAM,SAKrB;AACL,CAAC,EAbgB,mBAAmB,mCAAnB,mBAAmB,QAanC;;;;;;;;;;;;;;;ACjJD,sIAAkE;AAClE,qJAAwE;AAiBxE,IAAiB,kBAAkB,CAclC;AAdD,WAAiB,kBAAkB;IAClB,uBAAI,GAAG,cAAc,CAAC;IAEnC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,6BAAa,CAAC,OAAO,CAAC,MAAM,EAAE,uBAAI,CAAC,CAAC;IAC/C,CAAC;IAFe,qBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,UAAkD,EAAE;QACvE,OAAO;YACH,IAAI,EAAE,uBAAI;YACV,SAAS,EAAE,EAAE;YACb,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IANe,yBAAM,SAMrB;AACL,CAAC,EAdgB,kBAAkB,kCAAlB,kBAAkB,QAclC;AAeD,IAAiB,cAAc,CAe9B;AAfD,WAAiB,cAAc;IACd,mBAAI,GAAG,UAAU,CAAC;IAE/B,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,mBAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,SAAS,CAAC,CAAC;IAC5E,CAAC;IAFe,iBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,OAAyB,EAAE,UAAmC,EAAE;QACnF,OAAO;YACH,IAAI,EAAE,mBAAI;YACV,UAAU,EAAE,EAAE;YACd,OAAO;YACP,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAPe,qBAAM,SAOrB;AACL,CAAC,EAfgB,cAAc,8BAAd,cAAc,QAe9B;AAkBD,IAAiB,iBAAiB,CAejC;AAfD,WAAiB,iBAAiB;IACjB,sBAAI,GAAG,aAAa,CAAC;IAElC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,sBAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,SAAS,CAAC,CAAC;IAC5E,CAAC;IAFe,oBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,OAAyB,EAAE,UAAiC,EAAE;QACjF,OAAO;YACH,IAAI,EAAE,sBAAI;YACV,OAAO;YACP,OAAO,EAAE,IAAI;YACb,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAPe,wBAAM,SAOrB;AACL,CAAC,EAfgB,iBAAiB,iCAAjB,iBAAiB,QAejC;AAiBD,IAAiB,wBAAwB,CAaxC;AAbD,WAAiB,wBAAwB;IACxB,6BAAI,GAAG,oBAAoB,CAAC;IAEzC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,6BAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,iBAAiB,CAAC,CAAC;IACpF,CAAC;IAFe,2BAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,eAAuB;QAC1C,OAAO;YACH,IAAI,EAAE,6BAAI;YACV,eAAe,EAAE,eAAe;SACnC,CAAC;IACN,CAAC;IALe,+BAAM,SAKrB;AACL,CAAC,EAbgB,wBAAwB,wCAAxB,wBAAwB,QAaxC;;;;;;;;;;;;;;;AC9ID;;;;;;;;;;;;;;kFAckF;AAClF,sIAAmD;AACnD,qJAAyC;AAiBzC,IAAiB,iBAAiB,CAajC;AAbD,WAAiB,iBAAiB;IACjB,sBAAI,GAAG,aAAa,CAAC;IAElC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,sBAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,UAAU,CAAC,CAAC;IAC7E,CAAC;IAFe,oBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,QAAgB;QACnC,OAAO;YACH,IAAI,EAAE,sBAAI;YACV,QAAQ;SACX,CAAC;IACN,CAAC;IALe,wBAAM,SAKrB;AACL,CAAC,EAbgB,iBAAiB,iCAAjB,iBAAiB,QAajC;AAED;;GAEG;AACH,IAAiB,QAAQ,CAGxB;AAHD,WAAiB,QAAQ;IACR,iBAAQ,GAAG,UAAU,CAAC;IACtB,iBAAQ,GAAG,UAAU,CAAC;AACvC,CAAC,EAHgB,QAAQ,wBAAR,QAAQ,QAGxB;;;;;;;;;;;;;;;ACrCD,sIAAiE;AACjE,qJAAmF;AAmBnF,IAAiB,mBAAmB,CAenC;AAfD,WAAiB,mBAAmB;IACnB,wBAAI,GAAG,eAAe,CAAC;IAEpC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,6BAAa,CAAC,OAAO,CAAC,MAAM,EAAE,wBAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,SAAS,CAAC,CAAC;IACnF,CAAC;IAFe,sBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,OAAyB,EAAE,UAAkC,EAAE;QAClF,OAAO;YACH,IAAI,EAAE,wBAAI;YACV,SAAS,EAAE,EAAE;YACb,OAAO;YACP,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAPe,0BAAM,SAOrB;AACL,CAAC,EAfgB,mBAAmB,mCAAnB,mBAAmB,QAenC;AAoCD,IAAiB,oBAAoB,CAwBpC;AAxBD,WAAiB,oBAAoB;IACpB,yBAAI,GAAG,gBAAgB,CAAC;IAErC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,yBAAI,CAAC,IAAI,4BAAY,EAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;IAC1E,CAAC;IAFe,uBAAE,KAEjB;IAED,SAAgB,MAAM,CAClB,MAA0B,EAC1B,UAMI,EAAE;QAEN,OAAO;YACH,IAAI,EAAE,yBAAI;YACV,UAAU,EAAE,EAAE;YACd,MAAM;YACN,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAhBe,2BAAM,SAgBrB;AACL,CAAC,EAxBgB,oBAAoB,oCAApB,oBAAoB,QAwBpC;AAgBD,IAAiB,eAAe,CAe/B;AAfD,WAAiB,eAAe;IACf,oBAAI,GAAG,QAAQ,CAAC;IAE7B,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,oBAAI,CAAC,IAAI,4BAAY,EAAC,MAAM,EAAE,YAAY,CAAC,CAAC;IAC9E,CAAC;IAFe,kBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,UAAqB,EAAE,UAA2B,EAAE;QACvE,OAAO;YACH,IAAI,EAAE,oBAAI;YACV,WAAW,EAAE,IAAI;YACjB,UAAU;YACV,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAPe,sBAAM,SAOrB;AACL,CAAC,EAfgB,eAAe,+BAAf,eAAe,QAe/B;;;;;;;;;;;;;;;AC/ID;;;;;;;;;;;;;;kFAckF;AAClF,sIAAmE;AACnE,qJAAwE;AAgBxE,IAAiB,eAAe,CAa/B;AAbD,WAAiB,eAAe;IACf,oBAAI,GAAG,WAAW,CAAC;IAEhC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,oBAAI,CAAC,CAAC;IACxC,CAAC;IAFe,kBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,UAAgC,EAAE;QACrD,OAAO;YACH,IAAI,EAAE,oBAAI;YACV,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IALe,sBAAM,SAKrB;AACL,CAAC,EAbgB,eAAe,+BAAf,eAAe,QAa/B;AAuBD,IAAiB,mBAAmB,CAcnC;AAdD,WAAiB,mBAAmB;IACnB,wBAAI,GAAG,eAAe,CAAC;IAEpC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,wBAAI,CAAC,IAAI,8BAAc,EAAC,MAAM,EAAE,SAAS,CAAC,CAAC;IAC7E,CAAC;IAFe,sBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,OAAgB,EAAE,UAA+C,EAAE;QACtF,OAAO;YACH,IAAI,EAAE,wBAAI;YACV,OAAO;YACP,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IANe,0BAAM,SAMrB;AACL,CAAC,EAdgB,mBAAmB,mCAAnB,mBAAmB,QAcnC;AAUD,IAAiB,sBAAsB,CActC;AAdD,WAAiB,sBAAsB;IACtB,2BAAI,GAAG,kBAAkB,CAAC;IAEvC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,6BAAa,CAAC,OAAO,CAAC,MAAM,EAAE,2BAAI,CAAC,CAAC;IAC/C,CAAC;IAFe,yBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,UAAkC,EAAE;QACvD,OAAO;YACH,IAAI,EAAE,2BAAI;YACV,SAAS,EAAE,EAAE;YACb,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IANe,6BAAM,SAMrB;AACL,CAAC,EAdgB,sBAAsB,sCAAtB,sBAAsB,QActC;AAcD,IAAiB,eAAe,CAe/B;AAfD,WAAiB,eAAe;IACf,oBAAI,GAAG,WAAW,CAAC;IAEhC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,oBAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,KAAK,CAAC,CAAC;IACxE,CAAC;IAFe,kBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,GAAW,EAAE,UAAmC,EAAE;QACrE,OAAO;YACH,IAAI,EAAE,oBAAI;YACV,GAAG;YACH,UAAU,EAAE,EAAE;YACd,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAPe,sBAAM,SAOrB;AACL,CAAC,EAfgB,eAAe,+BAAf,eAAe,QAe/B;;;;;;;;;;;;;ACvID;;;;;;;;;;;;;;kFAckF;;;AAGlF,sIAAiE;AACjE,qJAA4C;AAgB5C,IAAiB,qBAAqB,CAcrC;AAdD,WAAiB,qBAAqB;IACrB,0BAAI,GAAG,cAAc,CAAC;IAEnC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,yBAAS,CAAC,OAAO,CAAC,MAAM,EAAE,0BAAI,CAAC,IAAI,4BAAY,EAAC,MAAM,EAAE,WAAW,CAAC,CAAC;IAChF,CAAC;IAFe,wBAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,SAA6B;QAChD,OAAO;YACH,IAAI,EAAE,0BAAI;YACV,WAAW,EAAE,IAAI;YACjB,SAAS;SACZ,CAAC;IACN,CAAC;IANe,4BAAM,SAMrB;AACL,CAAC,EAdgB,qBAAqB,qCAArB,qBAAqB,QAcrC;AA2BD,IAAiB,wBAAwB,CAmBxC;AAnBD,WAAiB,wBAAwB;IACxB,6BAAI,GAAG,iBAAiB,CAAC;IAEtC,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,yBAAS,CAAC,OAAO,CAAC,MAAM,EAAE,6BAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,WAAW,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,mBAAmB,CAAC,CAAC;IAC/H,CAAC;IAFe,2BAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,OAKtB;QACG,OAAO;YACH,IAAI,EAAE,6BAAI;YACV,WAAW,EAAE,IAAI;YACjB,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAXe,+BAAM,SAWrB;AACL,CAAC,EAnBgB,wBAAwB,wCAAxB,wBAAwB,QAmBxC;;;;;;;;;;;;;AC9FD;;;;;;;;;;;;;;kFAckF;;;AAElF,sIAAmD;AACnD,qJAAyC;AAsCzC,IAAiB,yBAAyB,CAiBzC;AAjBD,WAAiB,yBAAyB;IACzB,8BAAI,GAAG,qBAAqB,CAAC;IAE1C,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,8BAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,eAAe,CAAC,CAAC;IAClF,CAAC;IAFe,4BAAE,KAEjB;IAED,SAAgB,MAAM,CAClB,aAAqB,EACrB,OAAmE;QAEnE,OAAO;YACH,IAAI,EAAE,8BAAI;YACV,aAAa;YACb,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IATe,gCAAM,SASrB;AACL,CAAC,EAjBgB,yBAAyB,yCAAzB,yBAAyB,QAiBzC;AAuBD,IAAiB,yBAAyB,CAczC;AAdD,WAAiB,yBAAyB;IACzB,8BAAI,GAAG,qBAAqB,CAAC;IAE1C,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,8BAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,eAAe,CAAC,CAAC;IAClF,CAAC;IAFe,4BAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,aAAqB,EAAE,UAA2B,EAAE;QACvE,OAAO;YACH,IAAI,EAAE,8BAAI;YACV,aAAa;YACb,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IANe,gCAAM,SAMrB;AACL,CAAC,EAdgB,yBAAyB,yCAAzB,yBAAyB,QAczC;;;;;;;;;;;;;;;AC3FD,sIAA4E;AAE5E,kJAAsF;AA6GtF,IAAiB,aAAa,CAI7B;AAJD,WAAiB,aAAa;IAC1B,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,qBAAS,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,4BAAY,EAAC,MAAM,EAAE,oBAAoB,CAAC,CAAC;IAC9E,CAAC;IAFe,gBAAE,KAEjB;AACL,CAAC,EAJgB,aAAa,6BAAb,aAAa,QAI7B;AAsBD,IAAiB,aAAa,CAa7B;AAbD,WAAiB,aAAa;IAC1B,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,qBAAS,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,OAAO,CAAC,IAAI,4BAAY,EAAC,MAAM,EAAE,SAAS,CAAC,CAAC;IACrG,CAAC;IAFe,gBAAE,KAEjB;IAED,SAAgB,aAAa,CAAC,KAAwC;QAClE,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC;YACvB,OAAO,KAAK,CAAC;QACjB,CAAC;aAAM,IAAI,aAAa,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;YACjC,OAAO,KAAK,CAAC,OAAO,CAAC;QACzB,CAAC;QACD,OAAO,CAAC,KAAK,CAAC,CAAC;IACnB,CAAC;IAPe,2BAAa,gBAO5B;AACL,CAAC,EAbgB,aAAa,6BAAb,aAAa,QAa7B;AAeD,IAAiB,WAAW,CAoB3B;AApBD,WAAiB,WAAW;IACxB,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,aAAa,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,IAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,YAAY,CAAC,CAAC;IAC1G,CAAC;IAFe,cAAE,KAEjB;IAED,SAAgB,gBAAgB,CAAC,IAAkB;QAC/C,IAAI,IAAI,EAAE,CAAC;YACP,MAAM,cAAc,GAAG,IAAI,CAAC,OAAO;iBAC9B,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,8BAA8B,CAAC,CAAC,CAAC,CAAC;iBAC9C,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,MAAsC,CAAC,CAAC;YAC3D,OAAO,cAAc,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;QACrE,CAAC;QACD,OAAO,SAAS,CAAC;IACrB,CAAC;IARe,4BAAgB,mBAQ/B;IAID,SAAgB,8BAA8B,CAAC,MAAe;QAC1D,OAAO,wCAAyB,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,wCAAyB,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;IACxF,CAAC;IAFe,0CAA8B,iCAE7C;AACL,CAAC,EApBgB,WAAW,2BAAX,WAAW,QAoB3B;AA4BD,IAAiB,QAAQ,CAIxB;AAJD,WAAiB,QAAQ;IACrB,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,aAAa,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,IAAI,CAAC,CAAC;IACnE,CAAC;IAFe,WAAE,KAEjB;AACL,CAAC,EAJgB,QAAQ,wBAAR,QAAQ,QAIxB;;;;;;;;;;;;;AC3OD;;;;;;;;;;;;;;kFAckF;;;AAGlF,qJAAyC;AAUzC,IAAiB,UAAU,CAY1B;AAZD,WAAiB,UAAU;IACV,eAAI,GAAG,UAAU,CAAC;IAE/B,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,eAAI,CAAC,CAAC;IACxC,CAAC;IAFe,aAAE,KAEjB;IAED,SAAgB,MAAM;QAClB,OAAO;YACH,IAAI,EAAE,eAAI;SACb,CAAC;IACN,CAAC;IAJe,iBAAM,SAIrB;AACL,CAAC,EAZgB,UAAU,0BAAV,UAAU,QAY1B;AAWD,IAAiB,UAAU,CAY1B;AAZD,WAAiB,UAAU;IACV,eAAI,GAAG,UAAU,CAAC;IAE/B,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,eAAI,CAAC,CAAC;IACxC,CAAC;IAFe,aAAE,KAEjB;IAED,SAAgB,MAAM;QAClB,OAAO;YACH,IAAI,EAAE,eAAI;SACb,CAAC;IACN,CAAC;IAJe,iBAAM,SAIrB;AACL,CAAC,EAZgB,UAAU,0BAAV,UAAU,QAY1B;;;;;;;;;;;;;;;AC9CD,sIAAkE;AAClE,qJAAyC;AA6BzC,IAAiB,YAAY,CAgB5B;AAhBD,WAAiB,YAAY;IACZ,iBAAI,GAAG,QAAQ,CAAC;IAE7B,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,iBAAI,CAAC,IAAI,8BAAc,EAAC,MAAM,EAAE,SAAS,CAAC,IAAI,8BAAc,EAAC,MAAM,EAAE,YAAY,CAAC,CAAC;IACrH,CAAC;IAFe,eAAE,KAEjB;IAED,SAAgB,MAAM,CAAC,UAAoB,EAAE,UAAuD,EAAE;QAClG,OAAO;YACH,IAAI,EAAE,iBAAI;YACV,OAAO,EAAE,IAAI;YACb,UAAU,EAAE,KAAK;YACjB,UAAU;YACV,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IARe,mBAAM,SAQrB;AACL,CAAC,EAhBgB,YAAY,4BAAZ,YAAY,QAgB5B;AA+BD,IAAiB,iBAAiB,CAkBjC;AAlBD,WAAiB,iBAAiB;IACjB,sBAAI,GAAG,KAAK,CAAC;IAE1B,SAAgB,EAAE,CAAC,MAAe;QAC9B,OAAO,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,sBAAI,CAAC,IAAI,4BAAY,EAAC,MAAM,EAAE,YAAY,CAAC,IAAI,8BAAc,EAAC,MAAM,EAAE,SAAS,CAAC,CAAC;IACnH,CAAC;IAFe,oBAAE,KAEjB;IAED,SAAgB,MAAM,CAClB,UAAoB,EACpB,UAAqE,EAAE;QAEvE,OAAO;YACH,IAAI,EAAE,sBAAI;YACV,OAAO,EAAE,IAAI;YACb,UAAU;YACV,GAAG,OAAO;SACb,CAAC;IACN,CAAC;IAVe,wBAAM,SAUrB;AACL,CAAC,EAlBgB,iBAAiB,iCAAjB,iBAAiB,QAkBjC;;;;;;;;;;;;;AC/GD;;;;;;;;;;;;;;kFAckF;;;AAElF,2HAA4C;AAC5C,yHAA4C;AAE5C,yIAA0D;AAC1D,0HAAgD;AAChD,sJAA8E;AAIjE,yBAAiB,GAAG,GAAG,CAAC;AACrC;;;;GAIG;AACH,MAAa,cAAc;IAYvB,IAAI,mBAAmB;QACnB,OAAO,IAAI,CAAC,0BAA0B,CAAC,KAAK,CAAC;IACjD,CAAC;IAED,YAAsB,OAA2B;QAA3B,YAAO,GAAP,OAAO,CAAoB;QAbvC,mBAAc,GAAG,IAAI,2BAAQ,EAAc,CAAC;QAC5C,oBAAe,GAAG,IAAI,2BAAQ,EAAQ,CAAC;QACvC,mBAAc,GAAG,IAAI,2BAAQ,EAAQ,CAAC;QAEtC,mBAAc,GAAG,IAAI,CAAC;QACtB,0BAAqB,GAAwC,IAAI,GAAG,CAAC,CAAC,CAAC,yBAAiB,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;QAGhG,+BAA0B,GAAG,IAAI,eAAO,EAAoB,CAAC;QAMnE,IAAI,CAAC,KAAK,GAAG,yBAAW,CAAC,OAAO,CAAC;QACjC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;IACpC,CAAC;IAES,WAAW;QACjB,OAAO;YACH,OAAO,EAAE,OAAO,CAAC,EAAE;;gBACf,MAAM,QAAQ,GAAG,UAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,OAAO,CAAC,QAAQ,CAAC,mCAAI,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,yBAAiB,CAAC,CAAC;gBACvH,IAAI,CAAC,QAAQ,EAAE,CAAC;oBACZ,OAAO,CAAC,IAAI,CAAC,sEAAsE,EAAE,OAAO,CAAC,CAAC;oBAC9F,OAAO;gBACX,CAAC;gBACD,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;YAClD,CAAC;SACJ,CAAC;IACN,CAAC;IAED,eAAe,CAAC,MAAkB;QAC9B,IAAI,IAAI,CAAC,KAAK,KAAK,yBAAW,CAAC,OAAO,EAAE,CAAC;YACrC,MAAM,IAAI,KAAK,CAAC,mEAAmE,CAAC,CAAC;QACzF,CAAC;QACD,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;IACxC,CAAC;IAED,KAAK;QACD,IAAI,IAAI,CAAC,KAAK,KAAK,yBAAW,CAAC,OAAO,EAAE,CAAC;YACrC,OAAO,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC;QACxC,CAAC;QAED,IAAI,CAAC,KAAK,GAAG,yBAAW,CAAC,QAAQ,CAAC;QAClC,MAAM,OAAO,GAAG,IAAI,OAAO,CAAa,CAAC,CAAC,EAAE,MAAM,EAAE,EAAE,CAClD,UAAU,CAAC,GAAG,EAAE;YACZ,MAAM,CAAC,IAAI,KAAK,CAAC,iDAAiD,CAAC,CAAC,CAAC;QACzE,CAAC,EAAE,IAAI,CAAC,cAAc,CAAC,CAC1B,CAAC;QACF,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;aAC/C,IAAI,CAAC,MAAM,CAAC,EAAE;YACX,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;YACtB,IAAI,CAAC,KAAK,GAAG,yBAAW,CAAC,OAAO,CAAC;YACjC,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,CAAC;QACnC,CAAC,CAAC;aACD,KAAK,CAAC,KAAK,CAAC,EAAE;YACX,IAAI,CAAC,KAAK,GAAG,yBAAW,CAAC,WAAW,CAAC;YACrC,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACvC,CAAC,CAAC,CAAC;QAEP,OAAO,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC;IACxC,CAAC;IAED,KAAK,CAAC,gBAAgB,CAAC,MAA4B;QAC/C,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAC1B,IAAI,CAAC,iBAAiB,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;YACrE,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACjE,CAAC;QACD,OAAO,IAAI,CAAC,iBAAiB,CAAC;IAClC,CAAC;IAED,IAAI,gBAAgB;QAChB,OAAO,IAAI,CAAC,iBAAiB,CAAC;IAClC,CAAC;IAED,uBAAuB,CAAC,MAAyC;QAC7D,OAAO,IAAI,CAAC,aAAa,CAAC,uBAAuB,CAAC,MAAM,CAAC,CAAC;IAC9D,CAAC;IAED,oBAAoB,CAAC,MAAsC;QACvD,OAAO,IAAI,CAAC,aAAa,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC;IAC3D,CAAC;IAED,cAAc;QACV,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,CAAC;IAClC,CAAC;IAED,KAAK,CAAC,IAAI;QACN,IAAI,IAAI,CAAC,KAAK,KAAK,yBAAW,CAAC,OAAO,IAAI,IAAI,CAAC,KAAK,KAAK,yBAAW,CAAC,QAAQ,EAAE,CAAC;YAC5E,OAAO,IAAI,CAAC,MAAM,EAAE,CAAC;QACzB,CAAC;QAED,IAAI,CAAC,KAAK,GAAG,yBAAW,CAAC,QAAQ,CAAC;QAClC,IAAI,CAAC;YACD,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;gBACf,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YAC5B,CAAC;QACL,CAAC;gBAAS,CAAC;YACP,IAAI,CAAC,KAAK,GAAG,yBAAW,CAAC,OAAO,CAAC;YACjC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,CAAC;QAClC,CAAC;IACL,CAAC;IAED,iBAAiB,CAAC,OAA8B;QAC5C,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;IACxC,CAAC;IAED,eAAe,CAAC,OAA6B,EAAE,QAAiB;QAC5D,IAAI,CAAC,QAAQ,EAAE,CAAC;YACZ,4BAAW,EAAC,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,yBAAiB,CAAE,EAAE,OAAO,CAAC,CAAC;YACzE,OAAO,2BAAU,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,uBAAM,EAAC,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,yBAAiB,CAAE,EAAE,OAAO,CAAC,CAAC,CAAC;QACxG,CAAC;QACD,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC;YAC5C,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;QACxD,CAAC;aAAM,CAAC;YACJ,4BAAW,EAAC,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,QAAQ,CAAE,EAAE,OAAO,CAAC,CAAC;QACpE,CAAC;QACD,OAAO,2BAAU,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,uBAAM,EAAC,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,QAAQ,CAAE,EAAE,OAAO,CAAC,CAAC,CAAC;IAC/F,CAAC;IAED,IAAI,YAAY;QACZ,OAAO,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,OAAO;QACH,OAAO,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC;IACxC,CAAC;IAED,MAAM;QACF,OAAO,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC;IACvC,CAAC;IAED,IAAI,EAAE;QACF,OAAO,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;IAC3B,CAAC;IAES,UAAU;QAChB,IAAI,IAAI,CAAC,KAAK,KAAK,yBAAW,CAAC,OAAO,EAAE,CAAC;YACrC,MAAM,IAAI,KAAK,CAAC,mBAAmB,IAAI,CAAC,EAAE,6BAA6B,CAAC,CAAC;QAC7E,CAAC;IACL,CAAC;IAED,IAAc,aAAa;QACvB,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;YAChB,MAAM,IAAI,KAAK,CAAC,mDAAmD,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;QACnF,CAAC;QACD,OAAO,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;IAED,iBAAiB,CAAC,EAAU;QACxB,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;IAC7B,CAAC;CACJ;AA5JD,wCA4JC;;;;;;;;;;;;;;;AC3LD;;;;;;;;;;;;;;kFAckF;AAClF,mIAA6B;AAK7B,sIAA8D;AAG9D,MAAa,qBAAqB;IAE9B,MAAM,CAAC,GAAG;QACN,IAAI,CAAC,qBAAqB,CAAC,cAAc,EAAE,CAAC;YACxC,qBAAqB,CAAC,cAAc,GAAG,IAAI,CAAC,EAAE,EAAE,CAAC;QACrD,CAAC;QACD,OAAO,qBAAqB,CAAC,cAAc,CAAC;IAChD,CAAC;CACJ;AARD,sDAQC;AAID,IAAY,WA6BX;AA7BD,WAAY,WAAW;IACnB;;OAEG;IACH,mDAAO;IACP;;OAEG;IACH,qDAAQ;IACR;;OAEG;IACH,2DAAW;IACX;;OAEG;IACH,mDAAO;IACP;;OAEG;IACH,qDAAQ;IACR;;OAEG;IACH,mDAAO;IACP;;OAEG;IACH,2DAAW;AACf,CAAC,EA7BW,WAAW,2BAAX,WAAW,QA6BtB;AA8FD,IAAiB,UAAU,CAW1B;AAXD,WAAiB,UAAU;IAKvB,6EAA6E;IAC7E,SAAgB,SAAS,CAAC,MAAe;QACrC,OAAO,qBAAS,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,IAAI,CAAC,CAAC;IAC/D,CAAC;IAFe,oBAAS,YAExB;IAEY,0BAAe,GAAG,OAAO,CAAC;AAC3C,CAAC,EAXgB,UAAU,0BAAV,UAAU,QAW1B;;;;;;;;;;;;;ACzKD;;;;;;;;;;;;;;kFAckF;;;AA+FrE,kBAAU,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC;AAsBlC,0BAAkB,GAAG,MAAM,CAAC,oBAAoB,CAAC,CAAC;AAiBlD,uBAAe,GAAG,MAAM,CAAC,iBAAiB,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;ACpJzD;;;;;;;;;;;;;;kFAckF;AAClF,yGAAuC;AAGvC,6HAAmD;AACnD,uJAA+E;AAG/E,sLAA8E;AAE9E,MAAa,qBAAqB;IAU9B,IAAI,mBAAmB;QACnB,OAAO,IAAI,CAAC,0BAA0B,CAAC,KAAK,CAAC;IACjD,CAAC;IAGD,IAAc,2BAA2B;QACrC,OAAO,IAAI,CAAC,kCAAkC,CAAC,KAAK,CAAC;IACzD,CAAC;IAED,YAAY,OAAkC;QAVpC,+BAA0B,GAAG,IAAI,eAAO,EAAoB,CAAC;QAK7D,uCAAkC,GAAG,IAAI,eAAO,EAAiB,CAAC;QAMxE,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;QAC7B,IAAI,CAAC,KAAK,GAAG,yBAAW,CAAC,OAAO,CAAC;IACrC,CAAC;IAED,cAAc;QACV,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,uCAAiB,CAAC,oBAAoB,CAAC,CAAC;IACpF,CAAC;IAED,KAAK,CAAC,gBAAgB,CAAC,MAA4B;QAC/C,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAC1B,IAAI,CAAC,iBAAiB,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,WAAW,CAAC,uCAAiB,CAAC,iBAAiB,EAAE,MAAM,CAAC,CAAC;YAC/G,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACjE,CAAC;QACD,OAAO,IAAI,CAAC,iBAAiB,CAAC;IAClC,CAAC;IAED,IAAI,gBAAgB;QAChB,OAAO,IAAI,CAAC,iBAAiB,CAAC;IAClC,CAAC;IAED,uBAAuB,CAAC,MAAyC;QAC7D,OAAO,IAAI,CAAC,iBAAiB,CAAC,WAAW,CAAC,uCAAiB,CAAC,8BAA8B,EAAE,MAAM,CAAC,CAAC;IACxG,CAAC;IAED,oBAAoB,CAAC,MAAsC;QACvD,OAAO,IAAI,CAAC,iBAAiB,CAAC,WAAW,CAAC,uCAAiB,CAAC,2BAA2B,EAAE,MAAM,CAAC,CAAC;IACrG,CAAC;IAED,eAAe,CAAC,OAA6B,EAAE,QAAiB;QAC5D,OAAO,IAAI,CAAC,2BAA2B,CAAC,GAAG,CAAC,EAAE;YAC1C,IAAI,CAAC,QAAQ,IAAI,GAAG,CAAC,QAAQ,KAAK,QAAQ,EAAE,CAAC;gBACzC,OAAO,CAAC,GAAG,CAAC,CAAC;YACjB,CAAC;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAED,iBAAiB,CAAC,OAAsB;QACpC,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,uCAAiB,CAAC,yBAAyB,EAAE,OAAO,CAAC,CAAC;IAClG,CAAC;IAED,IAAc,iBAAiB;QAC3B,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE,EAAE,CAAC;YAC7B,MAAM,IAAI,KAAK,CAAC,uCAAiB,CAAC,iBAAiB,CAAC,CAAC;QACzD,CAAC;QACD,OAAO,IAAI,CAAC,kBAAmB,CAAC;IACpC,CAAC;IAED,KAAK,CAAC,KAAK;QACP,IAAI,IAAI,CAAC,KAAK,KAAK,yBAAW,CAAC,OAAO,EAAE,CAAC;YACrC,OAAO;QACX,CAAC;QACD,IAAI,CAAC;YACD,IAAI,CAAC,KAAK,GAAG,yBAAW,CAAC,QAAQ,CAAC;YAClC,MAAM,UAAU,GAAG,MAAM,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAClD,UAAU,CAAC,MAAM,EAAE,CAAC;YACpB,IAAI,CAAC,kBAAkB,GAAG,UAAU,CAAC;YACrC,IAAI,CAAC,KAAK,GAAG,yBAAW,CAAC,OAAO,CAAC;QACrC,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACb,uCAAiB,CAAC,KAAK,CAAC,sCAAsC,EAAE,KAAK,CAAC,CAAC;YACvE,IAAI,CAAC,KAAK,GAAG,yBAAW,CAAC,WAAW,CAAC;QACzC,CAAC;IACL,CAAC;IAED,IAAI;QACA,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAC1B,IAAI,CAAC,KAAK,GAAG,yBAAW,CAAC,OAAO,CAAC;YACjC,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;QAC7B,CAAC;QACD,IAAI,IAAI,CAAC,KAAK,KAAK,yBAAW,CAAC,QAAQ,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;YACrD,OAAO,IAAI,CAAC,MAAM,CAAC;QACvB,CAAC;QACD,IAAI,CAAC,KAAK,GAAG,yBAAW,CAAC,QAAQ,CAAC;QAClC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;YAC7D,UAAU,CAAC,OAAO,EAAE,CAAC;YACrB,IAAI,CAAC,KAAK,GAAG,yBAAW,CAAC,OAAO,CAAC;YACjC,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;YACxB,IAAI,CAAC,kCAAkC,CAAC,OAAO,EAAE,CAAC;YAClD,IAAI,CAAC,iBAAiB,GAAG,SAAS,CAAC;YACnC,IAAI,CAAC,kBAAkB,GAAG,SAAS,CAAC;QACxC,CAAC,CAAC,CAAC,CAAC;IACR,CAAC;IAES,iBAAiB;QACvB,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAC1B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;QACvD,CAAC;QACD,OAAO,IAAI,CAAC,iBAAiB,CAAC;IAClC,CAAC;IAES,KAAK,CAAC,kBAAkB;QAC9B,MAAM,UAAU,GAAG,OAAO,IAAI,CAAC,kBAAkB,KAAK,UAAU,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC;QAC7H,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAClF,UAAU,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,sBAAsB,EAAE,CAAC,CAAC;QACxD,UAAU,CAAC,cAAc,CAAC,uCAAiB,CAAC,yBAAyB,EAAE,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,kCAAkC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;QACjI,OAAO,UAAU,CAAC;IACtB,CAAC;IAES,qBAAqB,CAAC,KAAY,EAAE,OAA4B,EAAE,KAAyB;QACjG,uCAAiB,CAAC,KAAK,CAAC,yDAAyD,EAAE,KAAK,CAAC,CAAC;QAC1F,IAAI,CAAC,IAAI,EAAE,CAAC;QACZ,IAAI,CAAC,KAAK,GAAG,yBAAW,CAAC,WAAW,CAAC;IACzC,CAAC;IAES,sBAAsB;QAC5B,IAAI,IAAI,CAAC,KAAK,KAAK,yBAAW,CAAC,QAAQ,IAAI,IAAI,CAAC,KAAK,KAAK,yBAAW,CAAC,OAAO,EAAE,CAAC;YAC5E,OAAO;QACX,CAAC;QACD,IAAI,CAAC;YACD,IAAI,IAAI,CAAC,kBAAkB,EAAE,CAAC;gBAC1B,IAAI,CAAC,kBAAkB,CAAC,OAAO,EAAE,CAAC;gBAClC,IAAI,CAAC,iBAAiB,GAAG,SAAS,CAAC;gBACnC,IAAI,CAAC,kBAAkB,GAAG,SAAS,CAAC;YACxC,CAAC;QACL,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACb,oDAAoD;QACxD,CAAC;QAED,uCAAiB,CAAC,KAAK,CAAC,gEAAgE,CAAC,CAAC;QAC1F,IAAI,CAAC,KAAK,GAAG,yBAAW,CAAC,WAAW,CAAC;IACzC,CAAC;IAED,kBAAkB;QACd,OAAO,IAAI,CAAC,KAAK,KAAK,yBAAW,CAAC,OAAO,IAAI,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC;IAC3E,CAAC;IAED,IAAI,YAAY;QACZ,OAAO,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;CACJ;AApJD,sDAoJC;AAED;;GAEG;AAEI,IAAM,kBAAkB,GAAxB,MAAM,kBAAkB;IAI3B,UAAU,CAAC,gBAAmC,EAAE,aAAa,GAAG,KAAK;QACjE,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;QACzC,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;IACvC,CAAC;IAED,OAAO,CAAC,OAAsB;;QAC1B,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,OAAO,CAAC,GAAG,CAAC,gBAAgB,OAAO,CAAC,MAAM,CAAC,IAAI,gBAAgB,OAAO,CAAC,QAAQ,GAAG,CAAC,CAAC;QACxF,CAAC;QACD,UAAI,CAAC,gBAAgB,0CAAE,gBAAgB,CAAC,uCAAiB,CAAC,yBAAyB,EAAE,OAAO,CAAC,CAAC;IAClG,CAAC;CACJ;AAfY,gDAAkB;6BAAlB,kBAAkB;IAD9B,0BAAU,GAAE;GACA,kBAAkB,CAe9B;;;;;;;;;;;;;;;ACjMD;;;;;;;;;;;;;;kFAckF;AAClF,yHAAqG;AAGrG,uJAA4C;AAK5C,IAAiB,iBAAiB,CAqBjC;AArBD,WAAiB,iBAAiB;IAK9B,6EAA6E;IAC7E,SAAgB,SAAS,CAAC,MAAe;QACrC,OAAO,wBAAU,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,oBAAoB,IAAI,MAAM,CAAC;IAC1E,CAAC;IAFe,2BAAS,YAExB;IAEY,2CAAyB,GAAG,IAAI,iCAAgB,CAAgB,SAAS,CAAC,CAAC;IAC3E,mCAAiB,GAAG,IAAI,4BAAW,CAA+C,YAAY,CAAC,CAAC;IAChG,gDAA8B,GAAG,IAAI,4BAAW,CAAgD,yBAAyB,CAAC,CAAC;IAC3H,6CAA2B,GAAG,IAAI,4BAAW,CAA6C,sBAAsB,CAAC,CAAC;IAElH,sCAAoB,GAAG,IAAI,kCAAiB,CAAC,UAAU,CAAC,CAAC;IACzD,mCAAiB,GAAG,oCAAoC,CAAC;IAEtE,SAAgB,KAAK,CAAC,OAAe,EAAE,GAAG,cAAyB;QAC/D,OAAO,CAAC,KAAK,CAAC,uBAAuB,OAAO,EAAE,EAAE,cAAc,CAAC,CAAC;IACpE,CAAC;IAFe,uBAAK,QAEpB;AACL,CAAC,EArBgB,iBAAiB,iCAAjB,iBAAiB,QAqBjC;;;;;;;;;;;;;AC5CD;;;;;;;;;;;;;;kFAckF;;;AAKlF,sLAA0D;AAE1D;;;;GAIG;AACH,SAAgB,yBAAyB,CAAC,gBAAmC,EAAE,UAAsB;IACjG,gBAAgB,CAAC,SAAS,CAAC,uCAAiB,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,MAA4B,EAAE,EAAE,CAAC,UAAU,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;IACxI,gBAAgB,CAAC,SAAS,CAAC,uCAAiB,CAAC,8BAA8B,EAAE,CAAC,MAAyC,EAAE,EAAE,CACvH,UAAU,CAAC,uBAAuB,CAAC,MAAM,CAAC,CAC7C,CAAC;IACF,gBAAgB,CAAC,SAAS,CAAC,uCAAiB,CAAC,2BAA2B,EAAE,CAAC,MAAsC,EAAE,EAAE,CACjH,UAAU,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAC1C,CAAC;IACF,gBAAgB,CAAC,cAAc,CAAC,uCAAiB,CAAC,yBAAyB,EAAE,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;IAErH,gBAAgB,CAAC,MAAM,EAAE,CAAC;AAC9B,CAAC;AAXD,8DAWC;;;;;;;;;;;;;ACrCD;;;;;;;;;;;;;;kFAckF;;;AAElF,2HAA2H;AAC3H;;;gGAGgG;AAChG,yHASwB;AAaxB;;;GAGG;AACH,SAAgB,IAAI,CAAC,MAAiB;IAClC,OAAO;QACH,IAAI,EAAE,OAAO,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;QACrC,SAAS,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,SAAS,GAAG,KAAK,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAC7D,OAAO,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;QACvE,OAAO,EAAE,EAAE,CAAC,EAAE,CACV,CAAC,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC,EAAE;YACtB,IAAI,OAAO,IAAI,KAAK,EAAE,CAAC;gBACnB,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACpB,CAAC;QACL,CAAC,CAAC;QACN,OAAO,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,KAAK,EAAE;KAChC,CAAC;AACN,CAAC;AAbD,oBAaC;AAED;;GAEG;AACH,MAAa,sBAAuB,SAAQ,sCAAqB;IAK7D,YAA+B,MAAwB;QACnD,KAAK,EAAE,CAAC;QADmB,WAAM,GAAN,MAAM,CAAkB;QAJ7C,UAAK,GAAuC,SAAS,CAAC;QAEtD,eAAU,GAAkD,EAAE,CAAC;QAIrE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC;QAC9D,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;QACpD,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;IAChD,CAAC;IAED,MAAM,CAAC,QAAsB;QACzB,IAAI,IAAI,CAAC,KAAK,KAAK,SAAS,EAAE,CAAC;YAC3B,IAAI,CAAC,KAAK,GAAG,WAAW,CAAC;YACzB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;YACzB,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;gBAC5B,IAAI,KAAK,CAAC,OAAO,EAAE,CAAC;oBAChB,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;gBACtC,CAAC;qBAAM,IAAI,KAAK,CAAC,KAAK,EAAE,CAAC;oBACrB,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;gBAChC,CAAC;qBAAM,CAAC;oBACJ,IAAI,CAAC,SAAS,EAAE,CAAC;gBACrB,CAAC;YACL,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACzB,CAAC;QACD,OAAO,2BAAU,CAAC,MAAM,CAAC,GAAG,EAAE;YAC1B,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC;YAC1B,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC;IACP,CAAC;IAES,aAAa,CAAC,OAAY;QAChC,IAAI,IAAI,CAAC,KAAK,KAAK,SAAS,EAAE,CAAC;YAC3B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,CAAC,CAAC;QACtC,CAAC;aAAM,IAAI,IAAI,CAAC,KAAK,KAAK,WAAW,EAAE,CAAC;YACpC,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;YACjC,IAAI,CAAC,QAAS,CAAC,IAAI,CAAC,CAAC;QACzB,CAAC;IACL,CAAC;IAEkB,SAAS,CAAC,KAAc;QACvC,IAAI,IAAI,CAAC,KAAK,KAAK,SAAS,EAAE,CAAC;YAC3B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC;QACpC,CAAC;aAAM,IAAI,IAAI,CAAC,KAAK,KAAK,WAAW,EAAE,CAAC;YACpC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QAC3B,CAAC;IACL,CAAC;IAEkB,SAAS;QACxB,IAAI,IAAI,CAAC,KAAK,KAAK,SAAS,EAAE,CAAC;YAC3B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAC7B,CAAC;aAAM,IAAI,IAAI,CAAC,KAAK,KAAK,WAAW,EAAE,CAAC;YACpC,KAAK,CAAC,SAAS,EAAE,CAAC;QACtB,CAAC;QACD,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;IAC1B,CAAC;CACJ;AA1DD,wDA0DC;AAED;;GAEG;AACH,MAAa,sBAAuB,SAAQ,sCAAqB;IAG7D,YAA+B,MAAwB;QACnD,KAAK,EAAE,CAAC;QADmB,WAAM,GAAN,MAAM,CAAkB;QAF7C,eAAU,GAAG,CAAC,CAAC;IAIzB,CAAC;IAED,GAAG;QACC,YAAY;IAChB,CAAC;IAED,KAAK,CAAC,KAAK,CAAC,GAAY;QACpB,IAAI,CAAC;YACD,MAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YACpC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC9B,CAAC;QAAC,OAAO,CAAC,EAAE,CAAC;YACT,IAAI,CAAC,UAAU,EAAE,CAAC;YAClB,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,GAAG,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QAC5C,CAAC;IACL,CAAC;CACJ;AApBD,wDAoBC;AAED;;GAEG;AACH,SAAgB,yBAAyB,CAAC,MAAwB,EAAE,MAAe;IAC/E,MAAM,MAAM,GAAG,IAAI,sBAAsB,CAAC,MAAM,CAAC,CAAC;IAClD,MAAM,MAAM,GAAG,IAAI,sBAAsB,CAAC,MAAM,CAAC,CAAC;IAClD,OAAO,4CAAuB,EAAC,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;AAC3D,CAAC;AAJD,8DAIC;AAED;;;;;;GAMG;AACH,SAAgB,MAAM,CAClB,SAAoB,EACpB,YAAsD,EACtD,MAAe;IAEf,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;QACzB,SAAS,CAAC,MAAM,GAAG,GAAG,EAAE;YACpB,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC;YAC/B,MAAM,UAAU,GAAG,yBAAyB,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;YAC7D,YAAY,aAAZ,YAAY,uBAAZ,YAAY,CAAG,UAAU,CAAC,CAAC;YAC3B,OAAO,CAAC,UAAU,CAAC,CAAC;QACxB,CAAC,CAAC;IACN,CAAC,CAAC,CAAC;AACP,CAAC;AAbD,wBAaC;;;;;;;;;;;;;;;ACnLD;;;;;;;;;;;;;;kFAckF;AAClF,oHAAgI;AAGhI,MAAa,qBAAqB;IAG9B,YAAsB,GAAW;QAAX,QAAG,GAAH,GAAG,CAAQ;IAAG,CAAC;IAE3B,eAAe,CAAC,GAAW;QACjC,OAAO,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC;IAC3B,CAAC;IAED,MAAM,CAAC,OAA8B;;QACjC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC7C,MAAM,YAAY,GAAG,qCAAuB,EAAC,IAAI,8BAAoB,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,IAAI,8BAAoB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;QAE3H,aAAO,CAAC,MAAM,0CAAE,IAAI,CAAC,qCAAqC,CAAC,CAAC;QAC5D,aAAO,CAAC,YAAY,wDAAG,YAAY,CAAC,CAAC;QAErC,OAAO,YAAY,CAAC;IACxB,CAAC;CACJ;AAlBD,sDAkBC;;;;;;;;;;;;;ACpCD;;;;;;;;;;;;;;kFAckF;;;AAIlF,yLAAyE;AAoB5D,6BAAqB,GAAG,MAAM,CAAC,uBAAuB,CAAC,CAAC;AAOrE,MAAa,qBAAqB;IAY9B,YACc,GAAW,EACrB,OAA8B;QADpB,QAAG,GAAH,GAAG,CAAQ;QAVf,sBAAiB,GAAG,CAAC,CAAC;QAEtB,YAAO,GAAyB;YACtC,iBAAiB;YACjB,YAAY,EAAE,IAAI;YAClB,iBAAiB,EAAE,QAAQ;YAC3B,cAAc,EAAE,IAAI;SACvB,CAAC;QAME,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;IACxD,CAAC;IAES,eAAe,CAAC,GAAW;QACjC,OAAO,IAAI,SAAS,CAAC,GAAG,CAAC,CAAC;IAC9B,CAAC;IAED,MAAM,CAAC,OAA8B,EAAE,cAAc,GAAG,KAAK;QACzD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAEhD,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,GAAS,EAAE;;YAChC,aAAO,CAAC,MAAM,0CAAE,KAAK,CAAC,kGAAkG,CAAC,CAAC;YAC1H,aAAa,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YACnC,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;QAC3B,CAAC,CAAC;QAEF,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;YACzB,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,GAAS,EAAE;;gBAC/B,aAAa,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;gBACnC,MAAM,aAAa,GAAG,+BAAI,EAAC,IAAI,CAAC,SAAS,CAAC,CAAC;gBAC3C,MAAM,YAAY,GAAG,oDAAyB,EAAC,aAAa,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC;gBAE9E,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,GAAS,EAAE;;oBAChC,MAAM,EAAE,YAAY,EAAE,iBAAiB,EAAE,cAAc,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC;oBACzE,IAAI,YAAY,EAAE,CAAC;wBACf,IAAI,IAAI,CAAC,iBAAiB,IAAI,iBAAkB,EAAE,CAAC;4BAC/C,aAAO,CAAC,MAAM,0CAAE,KAAK,CACjB,uFAAuF;gCACnF,IAAI,iBAAiB,iBAAiB,CAC7C,CAAC;wBACN,CAAC;6BAAM,CAAC;4BACJ,IAAI,CAAC,cAAc,GAAG,WAAW,CAAC,GAAG,EAAE;;gCACnC,aAAO,CAAC,MAAM,0CAAE,IAAI,CAAC,uCAAuC,CAAC,CAAC;gCAC9D,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;gCAC3B,IAAI,CAAC,iBAAiB,EAAE,CAAC;4BAC7B,CAAC,EAAE,cAAe,CAAC,CAAC;wBACxB,CAAC;oBACL,CAAC;yBAAM,CAAC;wBACJ,aAAO,CAAC,MAAM,0CAAE,KAAK,CAAC,kFAAkF,CAAC,CAAC;oBAC9G,CAAC;gBACL,CAAC,CAAC;gBAEF,IAAI,cAAc,EAAE,CAAC;oBACjB,aAAO,CAAC,MAAM,0CAAE,IAAI,CAAC,qCAAqC,CAAC,CAAC;oBAC5D,aAAO,CAAC,WAAW,wDAAG,YAAY,CAAC,CAAC;gBACxC,CAAC;qBAAM,CAAC;oBACJ,aAAO,CAAC,MAAM,0CAAE,IAAI,CAAC,qCAAqC,CAAC,CAAC;oBAC5D,aAAO,CAAC,YAAY,wDAAG,YAAY,CAAC,CAAC;gBACzC,CAAC;gBACD,OAAO,CAAC,YAAY,CAAC,CAAC;YAC1B,CAAC,CAAC;QACN,CAAC,CAAC,CAAC;IACP,CAAC;CACJ;AArED,sDAqEC;;;;;;;;;;;;;AClHD;;;;;;;;;;;;;;kFAckF;;;;;;;;;;;;;;ACdlF;;;;;;;;;;;;;;kFAckF;;;AAGlF,yIAA+E;AAC/E,sIAAoE;AACpE,2IAAiD;AAEjD;;;;;;;;GAQG;AACH,SAAgB,mBAAmB,CAAC,SAAoB,EAAE,GAAG,uBAA+C;IACxG,MAAM,OAAO,GAAG,6BAA6B,CAAC,GAAG,uBAAuB,CAAC,CAAC;IAC1E,SAAS,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,CAAC;IAC3B,OAAO,SAAS,CAAC;AACrB,CAAC;AAJD,kDAIC;AAED;;;;;;;;GAQG;AACH,SAAgB,6BAA6B,CAAC,GAAG,uBAA+C;IAC5F,MAAM,OAAO,GAAsB,EAAE,CAAC;IACtC,uBAAuB,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;QACrC,IAAI,iBAAiB,CAAC,MAAM,CAAC,EAAE,CAAC;YAC5B,4BAAW,EAAC,OAAO,EAAE,MAAM,CAAC,CAAC;QACjC,CAAC;aAAM,CAAC;YACJ,IAAI,MAAM,CAAC,MAAM,EAAE,CAAC;gBAChB,uBAAM,EAAC,OAAO,EAAE,GAAG,wBAAO,EAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;YAC/C,CAAC;YACD,IAAI,MAAM,CAAC,GAAG,EAAE,CAAC;gBACb,4BAAW,EAAC,OAAO,EAAE,GAAG,wBAAO,EAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;YACjD,CAAC;YACD,IAAI,MAAM,CAAC,OAAO,EAAE,CAAC;gBACjB,wBAAO,EAAC,MAAM,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;oBACtC,MAAM,aAAa,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,YAAY,8BAAa,IAAI,CAAC,CAAC,SAAS,KAAK,OAAO,CAAC,SAAS,CAAC,CAAC;oBAC9G,IAAI,aAAa,IAAI,CAAC,EAAE,CAAC;wBACrB,OAAO,CAAC,aAAa,CAAC,GAAG,OAAO,CAAC;oBACrC,CAAC;yBAAM,CAAC;wBACJ,OAAO,CAAC,IAAI,CACR,oDAAoD,OAAO,CAAC,SAAS,CAAC,QAAQ,EAAE,GAAG;4BAC/E,sEAAsE,CAC7E,CAAC;wBACF,4BAAW,EAAC,OAAO,EAAE,OAAO,CAAC,CAAC;oBAClC,CAAC;gBACL,CAAC,CAAC,CAAC;YACP,CAAC;QACL,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,sDAAsD;IACtD,MAAM,UAAU,GAAG,IAAI,GAAG,EAAU,CAAC;IACrC,MAAM,UAAU,GAAoB,EAAE,CAAC;IACvC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;QACrB,IAAI,MAAM,YAAY,8BAAa,EAAE,CAAC;YAClC,IAAI,UAAU,CAAC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,CAAC;gBACnC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC5B,CAAC;iBAAM,CAAC;gBACJ,UAAU,CAAC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;YACrC,CAAC;QACL,CAAC;IACL,CAAC,CAAC,CAAC;IACH,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;QACxB,MAAM,QAAQ,GAAG,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACxE,MAAM,IAAI,KAAK,CAAC,uGAAuG,QAAQ,EAAE,CAAC,CAAC;IACvI,CAAC;IACD,OAAO,OAAO,CAAC;AACnB,CAAC;AA9CD,sEA8CC;AACD;;;;GAIG;AACH,SAAS,iBAAiB,CAAC,MAA6C;IACpE,OAAO,6BAAa,EAAC,MAAM,EAAE,IAAI,CAAC,IAAI,+BAAe,EAAC,MAAM,EAAE,UAAU,CAAC,CAAC;AAC9E,CAAC;;;;;;;;;;;;;ACnGD;;;;;;;;;;;;;;kFAckF;;;AAElF,yGAAwD;AACxD,yIAA0D;AAiB1D;;;;;GAKG;AAEH,MAAa,aAAc,SAAQ,2BAAe;IAU9C,YAAY,QAA4C,EAAE,UAAgC,EAAE;;QACxF,KAAK,CAAC,CAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,IAAI,EAAE,EAAE;YACrC,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,OAAO,CAAC,EAAE,CAAC;gBAChC,QAAQ,CAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,IAAI,CAAC,CAAC;gBACzC,IAAI,CAAC,QAAQ,CAAC,sCAAsC,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC;YAChG,CAAC;QACL,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,SAAS,GAAG,aAAO,CAAC,SAAS,mCAAI,IAAI,CAAC,eAAe,EAAE,CAAC;QAC7D,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC;IACrC,CAAC;IAES,eAAe;QACrB,OAAO,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAC3B,CAAC;IAED;;;;;;OAMG;IACH,SAAS,CAAC,IAAqB,EAAE,OAA2B;QACxD,IAAI,CAAC,QAAQ,CAAC,0CAA0C,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;QACtF,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;YAC7B,MAAM,OAAO,GAAG,0DAA0D,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,qBAAqB,CAAC;YACzH,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;YACvB,MAAM,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;QAC7B,CAAC;QACD,IAAI,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,EAAE,CAAC;YAClC,IAAI,CAAC,QAAQ,CAAC,qEAAqE,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;YACjH,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACrD,OAAO,IAAI,CAAC;QAChB,CAAC;QACD,OAAO,KAAK,CAAC;IACjB,CAAC;IAES,QAAQ,CAAC,OAAa,EAAE,GAAG,cAAqB;QACtD,IAAI,aAAa,CAAC,iBAAiB,EAAE,CAAC;YAClC,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,cAAc,CAAC,CAAC;QAC5C,CAAC;IACL,CAAC;IAED;;;;OAIG;IACO,iBAAiB,CAAC,OAA2B;;QACnD,MAAM,QAAQ,GAAG,wBAAO,EAAC,UAAI,CAAC,QAAQ,mCAAI,EAAE,CAAC,CAAC;QAC9C,IAAI,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YACxB,OAAO,IAAI,CAAC;QAChB,CAAC;QACD,MAAM,OAAO,GAAG,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC;QACzE,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YACrB,IAAI,CAAC,QAAQ;YACT,mCAAmC;YACnC,gFAAgF,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CACxI,CAAC;YACF,OAAO,KAAK,CAAC;QACjB,CAAC;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,QAAQ,CAAC,OAAwC;QAC7C,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IAC3C,CAAC;;AA5EL,sCA6EC;AA5EG;;;GAGG;AACW,+BAAiB,GAAG,KAAK,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9C5C;;;;;;;;;;;;;;kFAckF;AAClF,2JAA0C;AAC1C,yIAAiC;AACjC,yIAAiC;AACjC,uIAAgC;;;;;;;;;;;;;;;ACUhC;;;;;;;;;;;;;;;;;;;GAmBG;AACH,SAAgB,YAAY,CACxB,OAAuC,EACvC,iBAAkD;IAElD,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,CAAC,EAAE,CAAC;QACrC,OAAO,OAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;IAC7C,CAAC;IACD,OAAO,OAAO,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;AAC3C,CAAC;AARD,oCAQC;AAED;;;;;;;;;;;;;;;;GAgBG;AACH,SAAgB,QAAQ,CACpB,OAAiD,EACjD,iBAAkD;IAElD,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,CAAC,EAAE,CAAC;QACrC,OAAO,SAAS,CAAC;IACrB,CAAC;IACD,OAAO,OAAO,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;AAC3C,CAAC;AARD,4BAQC;AAED;;;;;;;;;;;;;;;;GAgBG;AACH,SAAgB,aAAa,CACzB,OAAuD,EACvD,iBAAkD,EAClD,aAA8C;IAE9C,MAAM,IAAI,GAAG,OAAO,OAAO,KAAK,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;IAChF,IAAI,CAAC,aAAa,CAAC,CAAC,MAAM,EAAE,CAAC,gBAAgB,EAAE,CAAC;IAChD,IAAI,CAAC,iBAAiB,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;AACrD,CAAC;AARD,sCAQC;;;;;;;;;;;;;AC9GD;;;;;;;;;;;;;;kFAckF;;;AAElF;;;;;;;;;;;;;;kFAckF;AAElF,yGAAqE;AACrE,+IAAoE;AAuDvD,oBAAY,GAAG,MAAM,CAAC,cAAc,CAAC,CAAC;AAEnD;;;GAGG;AAEH,MAAa,mBAAmB;IAG5B,YAA+B,SAA+B;QAA/B,cAAS,GAAT,SAAS,CAAsB;QAFpD,UAAK,GAAG,IAAI,GAAG,EAA8E,CAAC;IAEvC,CAAC;IAElE,GAAG,CAAmB,iBAAkD;QACpE,MAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC;QACpD,IAAI,OAAO,KAAK,SAAS,EAAE,CAAC;YACxB,MAAM,IAAI,KAAK,CAAC,2BAAc,GAAG,4CAA4B,EAAC,iBAAiB,CAAC,CAAC,CAAC;QACtF,CAAC;QACD,OAAO,OAAO,CAAC;IACnB,CAAC;IAED,WAAW,CAAmB,iBAAkD;QAC5E,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,iBAAiB,CAAC,EAAE,CAAC;YACpC,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,iBAAiB,CAAkB,CAAC;QAC9D,CAAC;QAED,MAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAI,iBAAiB,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;QACjH,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,iBAAiB,EAAE,OAAO,CAAC,CAAC;QAC3C,OAAO,OAAO,CAAC;IACnB,CAAC;IAED,MAAM,CAAmB,iBAAkD;QACvE,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,iBAAiB,CAAC,EAAE,CAAC;YACpC,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,iBAAiB,CAAQ,CAAC;QACpD,CAAC;QACD,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAI,iBAAiB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QAC9G,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,iBAAiB,EAAE,QAAQ,CAAC,CAAC;QAC5C,OAAO,QAAQ,CAAC;IACpB,CAAC;CACJ;AA/BD,kDA+BC;AAED,SAAgB,gBAAgB,CAAC,OAAuD;IACpF,MAAM,IAAI,GAAG,OAAO,OAAO,KAAK,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;IAChF,IAAI,CAAC,oBAAY,CAAC,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC;AACrF,CAAC;AAHD,4CAGC;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnID;;;;;;;;;;;;;;kFAckF;AAClF,oKAAgD;AAChD,gLAAsD;AACtD,4JAA4C;AAC5C,0JAA2C;AAC3C,4KAAoD;AACpD,0KAAmD;AACnD,oKAAgD;AAChD,8KAAqD;AACrD,4KAAoD;AACpD,kLAAuD;AACvD,8KAAqD;AACrD,8KAAqD;AACrD,8JAA6C;AAC7C,wKAAkD;AAClD,kKAA+C;AAC/C,kKAA+C;AAC/C,4KAAoD;AACpD,kKAA+C;AAC/C,oJAAwC;AACxC,4JAA4C;AAC5C,0JAA2C;AAC3C,wLAA0D;AAC1D,8KAAqD;AACrD,8KAAqD;AACrD,wNAA0E;AAC1E,8MAAqE;AACrE,8MAAqE;AACrE,gNAAsE;AACtE,4NAA4E;AAC5E,oNAAwE;AACxE,kKAA+C;AAC/C,gJAAsC;AACtC,8IAAqC;AACrC,8HAA6B;AAC7B,wIAAkC;AAClC,wJAA0C;AAC1C,8JAA6C;AAC7C,sJAAyC;AACzC,0IAAmC;AACnC,0IAAmC;AACnC,gIAA8B;AAC9B,wJAA0C;AAC1C,gJAAsC;AACtC,oJAAwC;AACxC,wIAAkC;AAClC,wIAAkC;;;;;;;;;;;;;AC5DlC;;;;;;;;;;;;;;kFAckF;;;AAElF;;GAEG;AACH,IAAiB,YAAY,CAgC5B;AAhCD,WAAiB,YAAY;IACzB,gBAAgB;IACH,iBAAI,GAAG,MAAM,CAAC;IAE3B,gBAAgB;IACH,2BAAc,GAAG,gBAAgB,CAAC;IAClC,yBAAY,GAAG,cAAc,CAAC;IAC9B,+BAAkB,GAAG,oBAAoB,CAAC;IAEvD,eAAe;IACF,gBAAG,GAAG,KAAK,CAAC;IAEzB,cAAc;IACD,kBAAK,GAAG,OAAO,CAAC;IAChB,iBAAI,GAAG,MAAM,CAAC;IACd,wBAAW,GAAG,MAAM,CAAC;IACrB,+BAAkB,GAAG,aAAa,CAAC;IACnC,iBAAI,GAAG,MAAM,CAAC;IACd,iBAAI,GAAG,MAAM,CAAC;IACd,0BAAa,GAAG,eAAe,CAAC;IAChC,mCAAsB,GAAG,YAAY,0BAAa,EAAE,CAAC;IACrD,kBAAK,GAAG,OAAO,CAAC;IAE7B,cAAc;IACD,mBAAM,GAAG,QAAQ,CAAC;IAClB,0BAAa,GAAG,eAAe,CAAC;IAChC,yBAAY,GAAG,QAAQ,CAAC;IAErC,SAAS;IACI,wBAAW,GAAG,aAAa,CAAC;IAC5B,2BAAc,GAAG,gBAAgB,CAAC;IAClC,yBAAY,GAAG,cAAc,CAAC;AAC/C,CAAC,EAhCgB,YAAY,4BAAZ,YAAY,QAgC5B;;;;;;;;;;;;;;;ACpBD,sIAAmD;AAEnD;;;;;;GAMG;AAEH,SAAgB,qBAAqB,CAAC,MAAW;IAC7C,OAAO,OAAO,MAAM,KAAK,QAAQ,IAAI,6BAAa,EAAC,MAAM,EAAE,MAAM,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,IAAI,CAAC,CAAC;AACtG,CAAC;AAFD,sDAEC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3CD;;;;;;;;;;;;;;kFAckF;AAClF,wHAsCoC;AAFhC,kHAAY;AACZ,8GAAU;AAEd,6IAAiD;AACjD,mJAAoD;AACpD,2IAAgD;AAChD,sJAAwH;AAA/G,sHAAW;AAAE,oHAAU;AAAE,sHAAW;AAAE,wHAAY;AAAE,oHAAU;;;;;;;;;;;;;ACzDvE;;;;;;;;;;;;;;kFAckF;AAClF,iDAAiD;;;AAEjD,gIAasC;AAsFlC,oGAlGA,4BAAkB,QAkGA;AAClB,sGAlGA,8BAAoB,QAkGA;AACpB,yGAlGA,iCAAuB,QAkGA;AACvB,oGAlGA,4BAAkB,QAkGA;AAClB,mGAlGA,2BAAiB,QAkGA;AACjB,qGAlGA,6BAAmB,QAkGA;AACnB,4FAlGA,oBAAU,QAkGA;AACV,4FAlGA,oBAAU,QAkGA;AACV,iGAlGA,yBAAe,QAkGA;AACf,iGAlGA,yBAAe,QAkGA;AACf,mGAlGA,2BAAiB,QAkGA;AACjB,gGAlGA,wBAAc,QAkGA;AAhGlB,qKAAwE;AACxE,qIAA+F;AAgD/F,8BAAoB,CAAC,EAAE,GAAG,CAAC,MAAM,EAAkC,EAAE,CACjE,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,8BAAoB,CAAC,IAAI,CAAC,IAAI,4BAAY,EAAC,MAAM,EAAE,WAAW,CAAC,IAAI,4BAAY,EAAC,MAAM,EAAE,aAAa,CAAC,CAAC;AAElI,iCAAuB,CAAC,EAAE,GAAG,CAAC,MAAM,EAAqC,EAAE,CACvE,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,iCAAuB,CAAC,IAAI,CAAC,IAAI,8BAAc,EAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;AAE7F,4BAAkB,CAAC,EAAE,GAAG,CAAC,MAAM,EAAgC,EAAE,CAAC,6BAAa,CAAC,OAAO,CAAC,MAAM,EAAE,4BAAkB,CAAC,IAAI,CAAC,CAAC;AAEzH,2BAAiB,CAAC,EAAE,GAAG,CAAC,MAAM,EAA+B,EAAE,CAAC,6BAAa,CAAC,OAAO,CAAC,MAAM,EAAE,2BAAiB,CAAC,IAAI,CAAC,CAAC;AAEtH,6BAAmB,CAAC,EAAE,GAAG,CAAC,MAAM,EAAiC,EAAE,CAC/D,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,6BAAmB,CAAC,IAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,kBAAkB,CAAC,IAAI,8BAAc,EAAC,MAAM,EAAE,aAAa,CAAC,CAAC;AAE3I,oBAAU,CAAC,EAAE,GAAG,CAAC,MAAM,EAAwB,EAAE,CAC7C,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,oBAAU,CAAC,IAAI,CAAC;IACvC,4BAAY,EAAC,MAAM,EAAE,OAAO,CAAC;IAC7B,8BAAc,EAAC,MAAM,EAAE,SAAS,CAAC;IACjC,8BAAc,EAAC,MAAM,EAAE,UAAU,CAAC,CAAC;AAEvC,oBAAU,CAAC,EAAE,GAAG,CAAC,MAAM,EAAwB,EAAE,CAAC,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,oBAAU,CAAC,IAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,WAAW,CAAC,CAAC;AAEhI,yBAAe,CAAC,EAAE,GAAG,CAAC,MAAM,EAA6B,EAAE,CACvD,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,yBAAe,CAAC,IAAI,CAAC,IAAI,4BAAY,EAAC,MAAM,EAAE,qBAAqB,CAAC,CAAC;AAEhG,yBAAe,CAAC,EAAE,GAAG,CAAC,MAAM,EAA6B,EAAE,CAAC,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,yBAAe,CAAC,IAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;AAE5I,2BAAiB,CAAC,EAAE,GAAG,CAAC,MAAM,EAA+B,EAAE,CAC3D,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,2BAAiB,CAAC,IAAI,CAAC;IAC9C,6BAAa,EAAC,MAAM,EAAE,WAAW,CAAC;IAClC,6BAAa,EAAC,MAAM,EAAE,aAAa,CAAC;IACpC,8BAAc,EAAC,MAAM,EAAE,SAAS,CAAC,CAAC;AAEtC,wBAAc,CAAC,EAAE,GAAG,CAAC,MAAM,EAA4B,EAAE,CACrD,sBAAM,CAAC,OAAO,CAAC,MAAM,EAAE,wBAAc,CAAC,IAAI,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,UAAU,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,cAAc,CAAC,CAAC;;;;;;;;;;;;;ACjH9H;;;;;;;;;;;;;;kFAckF;AAClF,iDAAiD;;;AAEjD,+IAA6D;AA6VpD,wFA7VA,iBAAM,QA6VA;AA5Vf,4KAAyD;AACzD,gKAAiD;AACjD,qIAA6D;AAwP5D,iBAAc,CAAC,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC;IACjC,CAAC,EAAE,CAAC;IACJ,CAAC,EAAE,CAAC;IACJ,KAAK,EAAE,CAAC;IACR,MAAM,EAAE,CAAC;CACZ,CAAC,CAAC;AAEH,iBAAM,CAAC,EAAE,GAAG,CAAC,MAAW,EAAoB,EAAE,CAC1C,qBAAS,CAAC,EAAE,CAAC,MAAM,CAAC;IACpB,6BAAa,EAAC,MAAM,EAAE,GAAG,CAAC;IAC1B,6BAAa,EAAC,MAAM,EAAE,GAAG,CAAC;IAC1B,6BAAa,EAAC,MAAM,EAAE,OAAO,CAAC;IAC9B,6BAAa,EAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;AAEpC,iBAAM,CAAC,OAAO,GAAG,CAAC,MAAe,EAAoB,EAAE,CAAC,MAAM,KAAK,SAAS,IAAI,sCAAS,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,8BAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AAEnI,iBAAM,CAAC,WAAW,GAAG,CAAC,KAAa,EAAE,KAAa,EAAW,EAAE,CAC3D,iBAAM,CAAC,QAAQ,CAAC,KAAK,EAAE,iBAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,IAAI,iBAAM,CAAC,QAAQ,CAAC,KAAK,EAAE,iBAAM,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;AAEvG,iBAAM,CAAC,OAAO,GAAG,CAAC,GAAW,EAAE,KAAa,EAAE,KAAe,EAAW,EAAE;IACtE,MAAM,UAAU,GAAU,iBAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC9C,MAAM,cAAc,GAAG,iBAAM,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;IAC/C,MAAM,YAAY,GAAU,iBAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IAClD,MAAM,gBAAgB,GAAG,iBAAM,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;IACnD,OAAO,KAAK;QACR,CAAC,CAAC,UAAU,CAAC,CAAC,IAAI,gBAAgB,CAAC,CAAC;YAC9B,YAAY,CAAC,CAAC,IAAI,cAAc,CAAC,CAAC;YAClC,cAAc,CAAC,CAAC,IAAI,YAAY,CAAC,CAAC;YAClC,gBAAgB,CAAC,CAAC,IAAI,UAAU,CAAC,CAAC;QACxC,CAAC,CAAC,UAAU,CAAC,CAAC,GAAG,gBAAgB,CAAC,CAAC;YAC7B,YAAY,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC;YACjC,cAAc,CAAC,CAAC,GAAG,YAAY,CAAC,CAAC;YACjC,gBAAgB,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC;AAChD,CAAC,CAAC;AAEF,iBAAM,CAAC,MAAM,GAAG,CAAC,IAAY,EAAE,KAAa,EAAE,GAAY,EAAW,EAAE,CACnE,8BAAK,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,EAAE,GAAG,CAAC,IAAI,sCAAS,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,EAAE,GAAG,CAAC,CAAC;AAEzE,iBAAM,CAAC,IAAI,GAAG,CAAC,MAAc,EAAU,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;AAEnD,iBAAM,CAAC,OAAO,GAAG,CAAC,MAAc,EAAU,EAAE,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAErG,iBAAM,CAAC,KAAK,GAAG,CAAC,MAAc,EAAU,EAAE,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC;AAEnE,iBAAM,CAAC,GAAG,GAAG,CAAC,MAAc,EAAU,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;AAElD,iBAAM,CAAC,MAAM,GAAG,CAAC,MAAc,EAAU,EAAE,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAEtG,iBAAM,CAAC,OAAO,GAAG,iBAAM,CAAC,MAAM,CAAC;AAE/B,iBAAM,CAAC,MAAM,GAAG,CAAC,MAAc,EAAU,EAAE,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC;AAErE,iBAAM,CAAC,OAAO,GAAG,CAAC,MAAc,EAAS,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,iBAAM,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,iBAAM,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;AAEhG,iBAAM,CAAC,SAAS,GAAG,CAAC,MAAc,EAAS,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,iBAAM,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,iBAAM,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;AAErG,iBAAM,CAAC,QAAQ,GAAG,CAAC,MAAc,EAAS,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,iBAAM,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,iBAAM,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;AAElG,iBAAM,CAAC,UAAU,GAAG,CAAC,MAAc,EAAS,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,iBAAM,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,iBAAM,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;AAEtG,iBAAM,CAAC,YAAY,GAAG,CAAC,MAAc,EAAS,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,iBAAM,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,iBAAM,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;AAE3G,iBAAM,CAAC,WAAW,GAAG,CAAC,MAAc,EAAS,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,iBAAM,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,iBAAM,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;AAExG,iBAAM,CAAC,UAAU,GAAG,CAAC,MAAc,EAAS,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,iBAAM,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,iBAAM,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;AAEtG,iBAAM,CAAC,YAAY,GAAG,CAAC,MAAc,EAAS,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,iBAAM,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,iBAAM,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;AAE3G,iBAAM,CAAC,WAAW,GAAG,CAAC,MAAc,EAAS,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,iBAAM,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,iBAAM,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;AAExG,iBAAM,CAAC,OAAO,GAAG,CAAC,UAAkB,EAAE,WAAmB,EAAW,EAAE,CAAC,iBAAM,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,iBAAM,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;AAEzH,iBAAM,CAAC,OAAO,GAAG,CAAC,UAAkB,EAAE,WAAmB,EAAW,EAAE,CAAC,iBAAM,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,iBAAM,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;AAEzH,iBAAM,CAAC,QAAQ,GAAG,CAAC,UAAkB,EAAE,WAAmB,EAAW,EAAE,CAAC,iBAAM,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,iBAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAE3H,iBAAM,CAAC,OAAO,GAAG,CAAC,UAAkB,EAAE,WAAmB,EAAW,EAAE,CAAC,iBAAM,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,iBAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAE3H,iBAAM,CAAC,MAAM,GAAG,CAAI,QAA6B,EAAE,GAAG,MAAW,EAAO,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;AAE1I,iBAAM,CAAC,IAAI,GAAG,CAAC,OAAc,EAAE,WAAkB,EAAU,EAAE,CAAC,CAAC;IAC3D,GAAG,OAAO;IACV,KAAK,EAAE,WAAW,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC;IAChC,MAAM,EAAE,WAAW,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC;CACpC,CAAC,CAAC;AAEH,iBAAM,CAAC,QAAQ,GAAG,iBAAM,CAAC,OAAO,CAAC;AAEjC,iBAAM,CAAC,SAAS,GAAG,CAAC,MAAc,EAAa,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,MAAM,CAAC,KAAK,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC;AAEnG,iBAAM,CAAC,IAAI,GAAG,iBAAM,CAAC,SAAS,CAAC;AAE/B,iBAAM,CAAC,MAAM,GAAG,CAAC,MAAc,EAAE,KAAgB,EAAU,EAAE,CAAC,CAAC;IAC3D,GAAG,MAAM;IACT,KAAK,EAAE,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK;IACjC,MAAM,EAAE,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM;CACvC,CAAC,CAAC;;;;;;;;;;;;;AC5WH;;;;;;;;;;;;;;kFAckF;AAClF,iDAAiD;;;AAEjD,+IAAuE;AAmH9D,2FAnHA,oBAAS,QAmHA;AAlHlB,qIAA8C;AAC9C,qIAA6D;AA0F5D,oBAAiB,CAAC,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC;IACpC,KAAK,EAAE,CAAC;IACR,MAAM,EAAE,CAAC;CACZ,CAAC,CAAC;AAEH,oBAAS,CAAC,EAAE,GAAG,CAAC,SAAc,EAA0B,EAAE,CACtD,qBAAS,CAAC,EAAE,CAAC,SAAS,CAAC,IAAI,6BAAa,EAAC,SAAS,EAAE,OAAO,CAAC,IAAI,6BAAa,EAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;AACvG,oBAAS,CAAC,MAAM,GAAG,CAAC,CAAY,EAAS,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,KAAK,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,MAAM,GAAG,GAAG,EAAE,CAAC,CAAC;AACtF,oBAAS,CAAC,GAAG,GAAG,CAAC,CAAY,EAAE,CAAY,EAAa,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,EAAE,MAAM,EAAE,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC;AACvH,oBAAS,CAAC,QAAQ,GAAG,CAAC,CAAY,EAAE,CAAY,EAAa,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,EAAE,MAAM,EAAE,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC;AAC5H,oBAAS,CAAC,eAAe,GAAG,CAAC,CAAY,EAAE,CAAS,EAAa,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,KAAK,GAAG,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,CAAC;AACnH,oBAAS,CAAC,aAAa,GAAG,CAAC,CAAY,EAAE,CAAS,EAAa,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,KAAK,GAAG,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,CAAC;AAEjH,oBAAS,CAAC,GAAG,GAAG,CAAsB,SAAY,EAAE,UAA2D,EAAK,EAAE,CAAC,CAAC;IACpH,GAAG,SAAS;IACZ,KAAK,EAAE,UAAU,CAAC,SAAS,CAAC,KAAK,EAAE,OAAO,CAAC;IAC3C,MAAM,EAAE,UAAU,CAAC,SAAS,CAAC,MAAM,EAAE,QAAQ,CAAC;CACjD,CAAC,CAAC;AACH,oBAAS,CAAC,MAAM,GAAG,CAAC,IAAe,EAAE,KAAgB,EAAE,GAAY,EAAW,EAAE,CAC5E,yBAAS,EAAC,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,KAAK,EAAE,GAAG,CAAC,IAAI,yBAAS,EAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;AACzF,oBAAS,CAAC,SAAS,GAAG,CAAC,KAAY,EAAa,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;AACzF,oBAAS,CAAC,IAAI,GAAG,CAAC,SAAoB,EAAU,EAAE,CAAC,SAAS,CAAC,KAAK,GAAG,SAAS,CAAC,MAAM,CAAC;;;;;;;;;;;;;AClItF;;;;;;;;;;;;;;kFAckF;AAClF,iDAAiD;;;AAEjD,+IAA4D;AA0InD,uFA1IA,gBAAK,QA0IA;AAxId,uJAAiD;AACjD,qIAA8C;AAC9C,qIAA6D;AAiG7D,gBAAK,CAAC,EAAE,GAAG,CAAC,KAAU,EAAkB,EAAE,CAAC,qBAAS,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,6BAAa,EAAC,KAAK,EAAE,GAAG,CAAC,IAAI,6BAAa,EAAC,KAAK,EAAE,GAAG,CAAC,CAAC;AACzH,gBAAK,CAAC,QAAQ,GAAG,CAAC,KAAY,EAAW,EAAE,CAAC,gBAAK,CAAC,MAAM,CAAC,KAAK,EAAE,gBAAK,CAAC,MAAM,CAAC,CAAC;AAC9E,gBAAK,CAAC,OAAO,GAAG,CAAC,KAAa,EAAkB,EAAE,CAAC,KAAK,KAAK,SAAS,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AAC7G,gBAAK,CAAC,GAAG,GAAG,CAAC,KAAY,EAAS,EAAE,CAAC,gBAAK,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;AAChE,gBAAK,CAAC,YAAY,GAAG,CAAC,KAAY,EAAE,MAAc,EAAS,EAAE,CAAC,gBAAK,CAAC,GAAG,CAAC,KAAK,EAAE,UAAU,CAAC,EAAE,CAAC,UAAU,GAAG,MAAM,CAAC,CAAC;AAClH,gBAAK,CAAC,cAAc,GAAG,CAAC,KAAY,EAAE,MAAc,EAAS,EAAE,CAAC,gBAAK,CAAC,GAAG,CAAC,KAAK,EAAE,UAAU,CAAC,EAAE,CAAC,UAAU,GAAG,MAAM,CAAC,CAAC;AACpH,gBAAK,CAAC,GAAG,GAAG,CAAkB,KAAQ,EAAE,UAAuD,EAAK,EAAE,CAAC,CAAC;IACpG,GAAG,KAAK;IACR,CAAC,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC;IAC3B,CAAC,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC;CAC9B,CAAC,CAAC;AACH,gBAAK,CAAC,UAAU,GAAG,CAAC,KAAY,EAAE,IAAW,EAAE,UAAkB,EAAS,EAAE;IACxE,IAAI,UAAU,EAAE,CAAC;QACb,qEAAqE;QACrE,MAAM,QAAQ,GAAG,gBAAK,CAAC,QAAQ,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC;QACnD,MAAM,OAAO,GAAG,gBAAK,CAAC,UAAU,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QACjD,OAAO,gBAAK,CAAC,GAAG,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;IAC1C,CAAC;SAAM,CAAC;QACJ,OAAO,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,EAAE,CAAC;IAClG,CAAC;AACL,CAAC,CAAC;AACF,gBAAK,CAAC,MAAM,GAAG,CAAC,IAAW,EAAE,EAAS,EAAU,EAAE,CAAC,gBAAK,CAAC,QAAQ,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;AAE5E,gBAAK,CAAC,IAAI,GAAG,CAAC,IAAW,EAAE,EAAS,EAAY,EAAE;IAC9C,MAAM,MAAM,GAAG,gBAAK,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;IACtC,MAAM,SAAS,GAAG,wBAAM,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;IAC3C,OAAO,EAAE,IAAI,EAAE,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,CAAC;AAC3C,CAAC,CAAC;AAEF,gBAAK,CAAC,WAAW,GAAG,CAAC,IAAW,EAAE,MAAc,EAAY,EAAE;IAC1D,MAAM,EAAE,GAAG,gBAAK,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;IACnC,MAAM,GAAG,GAAG,wBAAM,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;IACrC,OAAO,EAAE,IAAI,EAAE,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,GAAG,EAAE,CAAC;AAChD,CAAC,CAAC;AAEF,gBAAK,CAAC,MAAM,GAAG,CAAC,GAAU,EAAE,KAAY,EAAE,GAAY,EAAW,EAAE,CAAC,yBAAS,EAAC,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,yBAAS,EAAC,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;;;;;;;;;;;;;ACzJrI;;;;;;;;;;;;;;kFAckF;;;AAuBlF,SAAgB,KAAK,CAAI,KAAU,EAAE,CAAU;IAC3C,IAAI,CAAC,EAAE,CAAC;QACJ,OAAO,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;IACjD,CAAC;IACD,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC;AACpB,CAAC;AALD,sBAKC;AAgBD,SAAgB,IAAI,CAAI,KAAU,EAAE,CAAU;IAC1C,IAAI,CAAC,EAAE,CAAC;QACJ,OAAO,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK,IAAI,CAAC,CAAC,CAAC;IACjE,CAAC;IACD,OAAO,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AACnC,CAAC;AALD,oBAKC;AAED;;;;;GAKG;AACH,SAAgB,KAAK,CAAuB,KAAU,EAAE,GAAM;IAC1D,OAAO,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;AAC9C,CAAC;AAFD,sBAEC;AAED;;;;GAIG;AACH,SAAgB,MAAM,CAAI,KAAU,EAAE,GAAG,MAAW;IAChD,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;QACnB,MAAM,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QACnC,IAAI,KAAK,IAAI,CAAC,EAAE,CAAC;YACb,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QAC3B,CAAC;IACL,CAAC,CAAC,CAAC;AACP,CAAC;AAPD,wBAOC;AAED;;;;;;GAMG;AACH,SAAgB,QAAQ,CAAI,KAAU,EAAE,MAAuB;IAC3D,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AAC/F,CAAC;AAFD,4BAEC;AAED;;;;GAIG;AACH,SAAgB,OAAO,CAAI,KAAoB;IAC3C,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC;QACvB,OAAO,KAAK,CAAC;IACjB,CAAC;IACD,OAAO,CAAC,KAAK,CAAC,CAAC;AACnB,CAAC;AALD,0BAKC;AACD;;;;;GAKG;AACH,SAAgB,WAAW,CAAI,KAAU,EAAE,GAAG,MAAW;IACrD,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;QACnB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC;YACzB,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACtB,CAAC;IACL,CAAC,CAAC,CAAC;AACP,CAAC;AAND,kCAMC;AAED;;;;;;;GAOG;AACH,SAAgB,aAAa,CAAI,MAAe,EAAE,SAAuC,EAAE,YAAY,GAAG,KAAK;IAC3G,OAAO,eAAe,CAAC,MAAM,EAAE,OAAO,CAAC,EAAE,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,YAAY,CAAC,CAAC;AAChF,CAAC;AAFD,sCAEC;AAED;;;;;;;GAOG;AACH,SAAgB,cAAc,CAAI,MAAe,EAAE,WAA2B,EAAE,YAAY,GAAG,KAAK;IAChG,OAAO,eAAe,CAAC,MAAM,EAAE,OAAO,CAAC,EAAE,CAAC,OAAO,YAAY,WAAW,EAAE,YAAY,CAAC,CAAC;AAC5F,CAAC;AAFD,wCAEC;AAED;;;;;;;GAOG;AACH,SAAgB,kBAAkB,CAAI,MAAe,EAAE,aAAwB,EAAE,YAAY,GAAG,KAAK;IACjG,OAAO,eAAe,CAAC,MAAM,EAAE,OAAO,CAAC,EAAE,CAAC,OAAO,OAAO,KAAK,aAAa,EAAE,YAAY,CAAC,CAAC;AAC9F,CAAC;AAFD,gDAEC;AAED;;;;;;GAMG;AACH,SAAgB,aAAa,CAAC,MAAe,EAAE,YAAY,GAAG,KAAK;IAC/D,OAAO,kBAAkB,CAAC,MAAM,EAAE,QAAQ,EAAE,YAAY,CAAC,CAAC;AAC9D,CAAC;AAFD,sCAEC;AAED;;;;;;GAMG;AACH,SAAgB,eAAe,CAAC,MAAe,EAAE,SAAqC,EAAE,YAAY,GAAG,KAAK;IACxG,OAAO,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AACnG,CAAC;AAFD,0CAEC;AAED,SAAgB,SAAS,CAAI,MAAW,EAAE,UAAwB;IAC9D,MAAM,KAAK,GAAQ,EAAE,CAAC;IACtB,MAAM,IAAI,GAAQ,EAAE,CAAC;IACrB,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;QACrB,IAAI,UAAU,CAAC,OAAO,CAAC,EAAE,CAAC;YACtB,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACxB,CAAC;aAAM,CAAC;YACJ,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACvB,CAAC;IACL,CAAC,CAAC,CAAC;IACH,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;AAC3B,CAAC;AAXD,8BAWC;AAED;;;;GAIG;AACH,SAAgB,OAAO,CAAI,GAAG,MAAyB;IACnD,OAAO,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,KAAK,SAAS,CAAQ,CAAC;AAClE,CAAC;AAFD,0BAEC;;;;;;;;;;;;;;;AC3LD,yIAA4D;AAC5D,sIAAgE;AAYhE,IAAiB,UAAU,CAsB1B;AAtBD,WAAiB,UAAU;IACvB,SAAgB,EAAE,CAAC,KAAc;QAC7B,OAAO,qBAAS,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,+BAAe,EAAC,KAAK,EAAE,SAAS,CAAC,CAAC;IACpE,CAAC;IAFe,aAAE,KAEjB;IAED;;;OAGG;IACH,SAAgB,KAAK;QACjB,gEAAgE;QAChE,OAAO,EAAE,OAAO,EAAE,GAAG,EAAE,GAAE,CAAC,EAAE,CAAC;IACjC,CAAC;IAHe,gBAAK,QAGpB;IAED;;;;OAIG;IACH,SAAgB,MAAM,CAAC,EAAc;QACjC,OAAO,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC;IAC3B,CAAC;IAFe,iBAAM,SAErB;AACL,CAAC,EAtBgB,UAAU,0BAAV,UAAU,QAsB1B;AAED;;GAEG;AACH,MAAa,oBAAoB;IAI7B,YAAY,GAAG,SAAuB;QAHnB,gBAAW,GAAiB,EAAE,CAAC;QAI9C,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;QACrC,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IAClD,CAAC;IAED,OAAO;;QACH,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,OAAO;QACX,CAAC;QACD,IAAI,CAAC;YACD,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;gBACpB,UAAI,CAAC,WAAW,CAAC,GAAG,EAAE,0CAAE,OAAO,EAAE,CAAC;YACtC,CAAC;QACL,CAAC;QAAC,OAAO,GAAG,EAAE,CAAC;YACX,UAAI,CAAC,YAAY,qDAAG,GAAG,CAAC,CAAC;QAC7B,CAAC;IACL,CAAC;IAED,IAAI,QAAQ;QACR,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,CAAC,CAAC;IACzC,CAAC;IASD,IAAI,CAAC,GAAG,WAA0C;QAC9C,MAAM,KAAK,GAAG,8BAAa,EAAC,WAAW,EAAE,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;QAC3G,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,CAAC;QAChC,OAAO,UAAU,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,uBAAM,EAAC,IAAI,CAAC,WAAW,EAAE,GAAG,KAAK,CAAC,CAAC,CAAC;IACvE,CAAC;IAED,IAAI,UAAU;QACV,OAAO,IAAI,CAAC,QAAQ,CAAC;IACzB,CAAC;IAED;;OAEG;IACH,KAAK;QACD,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC;IAChC,CAAC;CACJ;AAjDD,oDAiDC;;;;;;;;;;;;;;;ACzGD;;;;;;;;;;;;;;kFAckF;AAClF,gHAA0C;AAkD1C,MAAa,OAAW,SAAQ,OAAO,CAAC,OAAU;IAC9C,YAAY,UAA0B,EAAE;QACpC,KAAK,CAAC,OAAO,CAAC,CAAC;IACnB,CAAC;IAED;;;OAGG;IACH,IAAa,KAAK;QACd,OAAO,KAAK,CAAC,KAAK,CAAC;IACvB,CAAC;IAED;;OAEG;IACM,IAAI,CAAC,KAAQ;QAClB,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACtB,CAAC;CACJ;AAnBD,0BAmBC;;;;;;;;;;;;;ACpFD;;;;;;;;;;;;;;kFAckF;;;AAElF,iKAAkD;AAElD,iJAA2C;AAC3C,+HAAuD;AAwBvD;;;GAGG;AACH,IAAiB,QAAQ,CAwDxB;AAxDD,WAAiB,QAAQ;IACrB;;OAEG;IACU,aAAI,GAAG,MAAM,CAAC,MAAM,CAAW;QACxC,IAAI,EAAE,8BAAK,CAAC,MAAM;QAClB,EAAE,EAAE,8BAAK,CAAC,MAAM;QAChB,MAAM,EAAE,wBAAM,CAAC,IAAI;QACnB,SAAS,EAAE,EAAE;KAChB,CAAC,CAAC;IAEH;;;;OAIG;IACH,SAAgB,EAAE,CAAC,GAAQ;QACvB,OAAO,CACH,qBAAS,CAAC,EAAE,CAAC,GAAG,CAAC;YACjB,6BAAa,EAAC,GAAG,EAAE,MAAM,CAAC;YAC1B,8BAAK,CAAC,EAAE,CAAE,GAAW,CAAC,IAAI,CAAC;YAC3B,6BAAa,EAAC,GAAG,EAAE,IAAI,CAAC;YACxB,8BAAK,CAAC,EAAE,CAAE,GAAW,CAAC,EAAE,CAAC;YACzB,6BAAa,EAAC,GAAG,EAAE,QAAQ,CAAC;YAC5B,wBAAM,CAAC,EAAE,CAAE,GAAW,CAAC,EAAE,CAAC;YAC1B,6BAAa,EAAC,GAAG,EAAE,WAAW,CAAC,CAClC,CAAC;IACN,CAAC;IAXe,WAAE,KAWjB;IAED;;;;OAIG;IACH,SAAgB,YAAY,CAAC,QAAkB;QAC3C,OAAO,wBAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;IAC1C,CAAC;IAFe,qBAAY,eAE3B;IAED;;;;OAIG;IACH,SAAgB,MAAM,CAAC,QAAkB;QACrC,OAAO,QAAQ,CAAC,MAAM,CAAC,QAAQ,EAAE,aAAI,CAAC,CAAC;IAC3C,CAAC;IAFe,eAAM,SAErB;IAED;;;;;OAKG;IACH,SAAgB,MAAM,CAAC,IAAc,EAAE,KAAe;QAClD,OAAO,8BAAK,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,IAAI,CAAC,IAAI,8BAAK,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,CAAC,IAAI,wBAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;IAC9H,CAAC;IAFe,eAAM,SAErB;AACL,CAAC,EAxDgB,QAAQ,wBAAR,QAAQ,QAwDxB;;;;;;;;;;;;;ACvGD;;;;;;;;;;;;;;kFAckF;;;AAElF;;GAEG;AACU,iBAAS,GAAG;IACrB,IAAI,EAAE,MAAM;IACZ,KAAK,EAAE,OAAO;IACd,EAAE,EAAE,IAAI;IACR,IAAI,EAAE,MAAM;CACN,CAAC;;;;;;;;;;;;;ACxBX;;;;;;;;;;;;;;kFAckF;;;AAElF,2IAA4C;AAC5C,+HAAuD;AAWvD;;GAEG;AACH,IAAiB,MAAM,CA2MtB;AA3MD,WAAiB,MAAM;IACnB;;OAEG;IACU,WAAI,GAAW,MAAM,CAAC,MAAM,CAAC;QACtC,CAAC,EAAE,CAAC;QACJ,CAAC,EAAE,CAAC;KACP,CAAC,CAAC;IAEH;;;;OAIG;IACH,SAAgB,GAAG,CAAC,MAAc;QAC9B,OAAO,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC;IAC5D,CAAC;IAFe,UAAG,MAElB;IAED;;;;;OAKG;IACH,SAAgB,GAAG,CAAC,MAAc,EAAE,MAAc;QAC9C,OAAO,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC;IAC9D,CAAC;IAFe,UAAG,MAElB;IAED;;;;;OAKG;IACH,SAAgB,MAAM,CAAC,IAAY,EAAE,KAAa;QAC9C,OAAO,IAAI,CAAC,CAAC,KAAK,KAAK,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC;IACpD,CAAC;IAFe,aAAM,SAErB;IAED;;;;OAIG;IACH,SAAgB,OAAO,CAAC,MAAe;QACnC,OAAO,MAAM,KAAK,SAAS,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IACxE,CAAC;IAFe,cAAO,UAEtB;IAED;;;;OAIG;IACH,SAAgB,SAAS,CAAC,KAAa;QACnC,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IAClE,CAAC;IAFe,gBAAS,YAExB;IAED;;;;;OAKG;IACH,SAAgB,GAAG,CAAC,MAAc,EAAE,UAAwD;QACxF,OAAO;YACH,GAAG,MAAM;YACT,CAAC,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC;YAC5B,CAAC,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC;SAC/B,CAAC;IACN,CAAC;IANe,UAAG,MAMlB;IAED;;;;;;OAMG;IACH,SAAgB,SAAS,CAAC,MAAc;QACpC,MAAM,GAAG,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;QAC9B,IAAI,GAAG,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,EAAE,CAAC;YACzB,OAAO,WAAI,CAAC;QAChB,CAAC;QACD,OAAO;YACH,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,GAAG;YACjB,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,GAAG;SACpB,CAAC;IACN,CAAC;IATe,gBAAS,YASxB;IAED;;;;OAIG;IACH,SAAgB,MAAM,CAAC,MAAc;QACjC,OAAO,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,WAAI,CAAC,CAAC;IACvC,CAAC;IAFe,aAAM,SAErB;IAED;;;;OAIG;IACH,SAAgB,EAAE,CAAC,MAAW;QAC1B,OAAO,qBAAS,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,GAAG,CAAC,IAAI,6BAAa,EAAC,MAAM,EAAE,GAAG,CAAC,CAAC;IAC5F,CAAC;IAFe,SAAE,KAEjB;IAED;;;;;;OAMG;IACH,SAAgB,MAAM,CAAC,MAAc,EAAE,MAAc;QACjD,OAAO,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,UAAU,CAAC,EAAE,CAAC,UAAU,GAAG,MAAM,CAAC,CAAC;IACjE,CAAC;IAFe,aAAM,SAErB;IAED;;;;;;OAMG;IACH,SAAgB,QAAQ,CAAC,MAAc,EAAE,MAAc;QACnD,OAAO,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,UAAU,CAAC,EAAE,CAAC,UAAU,GAAG,MAAM,CAAC,CAAC;IACjE,CAAC;IAFe,eAAQ,WAEvB;IAED;;;;;;OAMG;IACH,SAAgB,QAAQ,CAAC,MAAc,EAAE,UAAkB;QACvD,OAAO,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC,EAAE,CAAC;IACtE,CAAC;IAFe,eAAQ,WAEvB;IAED;;;;OAIG;IACH,SAAgB,OAAO,CAAC,MAAc;QAClC,OAAO,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC;IAC1C,CAAC;IAFe,cAAO,UAEtB;IAED;;;;OAIG;IACH,SAAgB,SAAS,CAAC,MAAc;QACpC,MAAM,UAAU,GAAgB,EAAE,CAAC;QACnC,IAAI,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC;YACf,UAAU,CAAC,IAAI,CAAC,yBAAS,CAAC,IAAI,CAAC,CAAC;QACpC,CAAC;aAAM,IAAI,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC;YACtB,UAAU,CAAC,IAAI,CAAC,yBAAS,CAAC,KAAK,CAAC,CAAC;QACrC,CAAC;QACD,IAAI,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC;YACf,UAAU,CAAC,IAAI,CAAC,yBAAS,CAAC,EAAE,CAAC,CAAC;QAClC,CAAC;aAAM,IAAI,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC;YACtB,UAAU,CAAC,IAAI,CAAC,yBAAS,CAAC,IAAI,CAAC,CAAC;QACpC,CAAC;QACD,OAAO,UAAU,CAAC;IACtB,CAAC;IAbe,gBAAS,YAaxB;IAED;;;OAGG;IACH,SAAgB,GAAG,CAAC,GAAG,OAAiB;QACpC,OAAO;YACH,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAC/C,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;SAClD,CAAC;IACN,CAAC;IALe,UAAG,MAKlB;IAED;;;OAGG;IACH,SAAgB,GAAG,CAAC,GAAG,OAAiB;QACpC,OAAO;YACH,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAC/C,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;SAClD,CAAC;IACN,CAAC;IALe,UAAG,MAKlB;IAED;;;OAGG;IACH,SAAgB,GAAG,CAAC,GAAG,OAAiB;QACpC,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YACvB,OAAO,MAAM,CAAC,IAAI,CAAC;QACvB,CAAC;QACD,OAAO;YACH,CAAC,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,GAAG,EAAE,EAAE,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,OAAO,CAAC,MAAM;YAClE,CAAC,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,GAAG,EAAE,EAAE,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,OAAO,CAAC,MAAM;SACrE,CAAC;IACN,CAAC;IARe,UAAG,MAQlB;AACL,CAAC,EA3MgB,MAAM,sBAAN,MAAM,QA2MtB;;;;;;;;;;;;;AC1OD;;;;;;;;;;;;;;kFAckF;;;AAElF,SAAgB,SAAS,CAAC,GAAW,EAAE,KAAa,EAAE,UAAkB,MAAM,CAAC,OAAO;IAClF,OAAO,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,KAAK,CAAC,IAAI,OAAO,CAAC;AAC5C,CAAC;AAFD,8BAEC;;;;;;;;;;;;;AClBD;;;;;;;;;;;;;;kFAckF;;;AAKlF,IAAiB,SAAS,CAUzB;AAVD,WAAiB,SAAS;IACtB;;;;OAIG;IACH,SAAgB,EAAE,CAAC,MAAe;QAC9B,2CAA2C;QAC3C,OAAO,MAAM,KAAK,IAAI,IAAI,OAAO,MAAM,KAAK,QAAQ,CAAC;IACzD,CAAC;IAHe,YAAE,KAGjB;AACL,CAAC,EAVgB,SAAS,yBAAT,SAAS,QAUzB;AA0CD,kDAAkD;AAClD,SAAgB,SAAS,CAAO,GAAiB,EAAE,KAAmB;IAClE,OAAO,CAAC,OAAY,EAAoB,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;AAC9E,CAAC;AAFD,8BAEC;AAED,6DAA6D;AAC7D,SAAgB,WAAW,CAAO,GAAiB,EAAE,KAAmB;IACpE,OAAO,CAAC,OAAY,EAAoB,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;AAC9E,CAAC;AAFD,kCAEC;AAED;;;;;GAKG;AACH,SAAgB,WAAW,CAAI,WAA2B;IACtD,OAAO,CAAC,OAAY,EAAgB,EAAE,CAAC,OAAO,YAAY,WAAW,CAAC;AAC1E,CAAC;AAFD,kCAEC;AAUD,SAAgB,IAAI,CAAI,QAA0B,EAAE,GAAG,IAAW;IAC9D,OAAO,OAAO,QAAQ,KAAK,UAAU,CAAC,CAAC,CAAE,QAA4B,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;AAC9F,CAAC;AAFD,oBAEC;AAED;;;;;;GAMG;AACH,SAAgB,aAAa,CAAC,MAAiB,EAAE,WAAmB,EAAE,QAAQ,GAAG,KAAK;IAClF,MAAM,QAAQ,GAAI,MAAc,CAAC,WAAW,CAAC,CAAC;IAC9C,OAAO,QAAQ,KAAK,SAAS,CAAC,CAAC,CAAC,OAAO,QAAQ,KAAK,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC;AAC5E,CAAC;AAHD,sCAGC;AAED;;;;;;GAMG;AACH,SAAgB,cAAc,CAAC,MAAiB,EAAE,WAAmB,EAAE,QAAQ,GAAG,KAAK;IACnF,MAAM,QAAQ,GAAI,MAAc,CAAC,WAAW,CAAC,CAAC;IAC9C,OAAO,QAAQ,KAAK,SAAS,CAAC,CAAC,CAAC,OAAO,QAAQ,KAAK,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC;AAC7E,CAAC;AAHD,wCAGC;AAED;;;;;;GAMG;AACH,SAAgB,aAAa,CAAC,MAAiB,EAAE,WAAmB,EAAE,QAAQ,GAAG,KAAK;IAClF,MAAM,QAAQ,GAAI,MAAc,CAAC,WAAW,CAAC,CAAC;IAC9C,OAAO,QAAQ,KAAK,SAAS,CAAC,CAAC,CAAC,OAAO,QAAQ,KAAK,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC;AAC5E,CAAC;AAHD,sCAGC;AAED;;;;;;GAMG;AACH,SAAgB,aAAa,CAAmB,MAAiB,EAAE,WAAc,EAAE,QAAQ,GAAG,KAAK;IAC/F,MAAM,QAAQ,GAAI,MAAc,CAAC,WAAW,CAAC,CAAC;IAC9C,OAAO,QAAQ,KAAK,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;AACtE,CAAC;AAHD,sCAGC;AAED;;;;;;GAMG;AACH,SAAgB,eAAe,CAAC,MAAiB,EAAE,WAAmB,EAAE,QAAQ,GAAG,KAAK;IACpF,MAAM,QAAQ,GAAI,MAAc,CAAC,WAAW,CAAC,CAAC;IAC9C,OAAO,QAAQ,KAAK,SAAS,CAAC,CAAC,CAAC,OAAO,QAAQ,KAAK,UAAU,CAAC,CAAC,CAAC,QAAQ,CAAC;AAC9E,CAAC;AAHD,0CAGC;AAED;;;;;;GAMG;AACH,SAAgB,YAAY,CAAC,MAAiB,EAAE,WAAmB,EAAE,QAAQ,GAAG,KAAK;IACjF,MAAM,QAAQ,GAAI,MAAc,CAAC,WAAW,CAAC,CAAC;IAC9C,OAAO,QAAQ,KAAK,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;AACvE,CAAC;AAHD,oCAGC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7KyC;AACA;AACI;AACQ;AACd;AACQ;AACR;AACA;AACA;AACA;AACQ;AACR;AACY;;;;;;;;;;;;;;;;ACZpD,iEAAe,sCAAsC;;;;;;;;;;;;;;;;;ACApB;AACjC;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,SAAS,6DAAiB;AAC1B;AACA,iEAAe,GAAG;;;;;;;;;;;;;;;;;ACTe;AACjC,iEAAe;AACf,cAAc,+DAAiB;AAC/B,CAAC;;;;;;;;;;;;;;;ACHD,iEAAe,sCAAsC;;;;;;;;;;;;;;;;ACAhB;AACrC;AACA,OAAO,wDAAQ;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,KAAK;;;;;;;;;;;;;;;ACpCpB,iEAAe,cAAc,EAAE,UAAU,EAAE,eAAe,EAAE,gBAAgB,EAAE,UAAU,GAAG,8EAA8E;;;;;;;;;;;;;;;;;ACAxI;AACjC,uCAAuC;AACvC;AACe;AACf;AACA,IAAI,iEAAqB;AACzB;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACTiC;AACjC;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,SAAS,6DAAiB;AAC1B;AACA,iEAAe,IAAI;;;;;;;;;;;;;;;;;ACTkB;;AAErC;AACA;AACA;AACA;AACA;AACA,gBAAgB,SAAS;AACzB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,wDAAQ;AACf;AACA;AACA;AACA;AACA,iEAAe,SAAS;;;;;;;;;;;;;;;;;AC9BG;AACsB;;AAEjD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wDAAwD,+CAAG;;AAE3D;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC;AACpC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAkB,OAAO;AACzB;AACA;AACA,gBAAgB,8DAAe;AAC/B;AACA,iEAAe,EAAE;;;;;;;;;;;;;;;;;AC5Hc;AACkB;;AAEjD;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,aAAa,mBAAmB;AAChC;AACA;AACe;AACf,6CAA6C,qDAAK;AAClD;AACA,oCAAoC,8DAAe;AACnD;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACnB2B;AACA;AAC3B,WAAW,mDAAG,aAAa,+CAAG;AAC9B,iEAAe,EAAE;;;;;;;;;;;;;;;;;;;ACHgC;AAClB;AAC/B;AACA,2CAA2C;;AAE3C;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA;AACA;AACO;AACA;AACQ;AACf;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,qDAAK;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,QAAQ;AAC9B;AACA;AACA;AACA;AACA,WAAW,8DAAe;AAC1B;;AAEA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACtDiC;AACN;AACsB;AACjD;AACA,MAAM,kDAAM;AACZ,WAAW,kDAAM;AACjB;AACA;AACA,iDAAiD,+CAAG;;AAEpD;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB,QAAQ;AAC5B;AACA;AACA;AACA;AACA,SAAS,8DAAe;AACxB;AACA,iEAAe,EAAE;;;;;;;;;;;;;;;;;ACxBU;AACE;AAC7B,WAAW,mDAAG,aAAa,gDAAI;AAC/B,iEAAe,EAAE;;;;;;;;;;;;;;;;;;ACHgC;AACxB;AACQ;;AAEjC;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,aAAa;AACxB,WAAW,SAAS;AACpB;AACA;AACe,wBAAwB;AACvC;AACA;AACA;AACA,cAAc,kDAAE;AAChB;AACA;AACA,GAAG;;AAEH;AACA,UAAU,sDAAM;;AAEhB;AACA;AACA,oBAAoB,QAAQ;AAC5B;AACA;AACA;AACA;AACA,SAAS,8DAAe;AACxB;;;;;;;;;;;;;;;;;AC/B+B;AACkB;;AAEjD;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,aAAa,mBAAmB;AAChC;AACA;AACe;AACf,6CAA6C,qDAAK;AAClD;AACA,oCAAoC,8DAAe;AACnD;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACnB2B;AACsB;;AAEjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iDAAiD,+CAAG;;AAEpD;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,kBAAkB;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,8DAAe;AAC/B;AACA,iEAAe,EAAE;;;;;;;;;;;;;;;;ACjJc;AAC/B;AACA,qCAAqC,iDAAK;AAC1C;AACA,iEAAe,QAAQ;;;;;;;;;;;;;;;;ACJc;AACrC;AACA,OAAO,wDAAQ;AACf;AACA;AACA;AACA;AACA,iEAAe,OAAO;;;;;;;;;;;;;;;;;;;;;;;ACPtB;;;;;;;;;;;;;;kFAckF;AAClF,+HASgC;AAChC,yGAA+C;AAC/C,mKAAqD;AACrD,mKAA6D;AAC7D,kIAAyC;AACzC,uJAAsD;AAEtD,gLAAkE;AAClE,0KAAgE;AAEnD,wBAAgB,GAAG,MAAM,CAAC,kBAAkB,CAAC,CAAC;AAoCpD,IAAM,uBAAuB,GAA7B,MAAM,uBAAuB;IAA7B;QAaO,gBAAW,GAAG,IAAI,4BAAY,EAAE,CAAC;QACjC,oBAAe,GAAa,EAAE,CAAC;IAiE7C,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;AACnB,WAAW,QAAQ;AACnB;AACA;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA;AACA;AACA,kBAAkB,mBAAmB;AACrC;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY,aAAa;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd,YAAY,QAAQ;AACpB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,mBAAO,CAAC,yIAAY;;AAE3C,IAAI,mBAAmB;AACvB;AACA;AACA;;AAEA,IAAI,qBAAqB;AACzB;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;;;;;;;;;;;AClIa;;AAEb;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACjBa;;AAEb,QAAQ,kCAAkC,EAAE,mBAAO,CAAC,6FAAa;;AAEjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,cAAc,WAAW;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA,mDAAmD,kBAAkB;AACrE,iDAAiD,kBAAkB;;AAEnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,SAAS;AACtB;AACA;AACA,gCAAgC;AAChC;;AAEA;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA,sDAAsD,kBAAkB;AACxE,wDAAwD,kBAAkB;AAC1E,0DAA0D,kBAAkB;;AAE5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB;AACA,aAAa,GAAG;AAChB,aAAa,QAAQ;AACrB;AACA,gCAAgC;AAChC;;AAEA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA,uDAAuD,kBAAkB;AACzE,yDAAyD,kBAAkB;;AAE3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB;AACA,aAAa,GAAG;AAChB;AACA,gCAAgC;AAChC;;AAEA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA,wDAAwD,kBAAkB;;AAE1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,mBAAmB;AAChC,aAAa,QAAQ;AACrB;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,mBAAmB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,WAAW,GAAG;AACd,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;;;;;;;;;;;ACnSa;;AAEb,QAAQ,aAAa,EAAE,mBAAO,CAAC,+FAAc;;AAE7C;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,yBAAyB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS,mBAAmB;AAC5B;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,QAAQ,4BAA4B;AACpC;AACA,iEAAiE,EAAE;AACnE;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA,QAAQ;AACR,+DAA+D,EAAE;AACjE;AACA,MAAM;AACN;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,iEAAiE,EAAE;AACnE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR,+DAA+D,EAAE;AACjE;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,EAAE;AACnE;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,UAAU;AACV;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV,iEAAiE,EAAE;AACnE;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,iEAAiE,EAAE;AACnE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;AACR,+DAA+D,EAAE;AACjE;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,EAAE,GAAG,EAAE;AAC1D,2BAA2B;AAC3B,eAAe;AACf;AACA,qBAAqB;AACrB,SAAS;AACT;AACA,KAAK;AACL;AACA;;AAEA,mBAAmB;;;;;;;;;;;;AC1MN;;AAEb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACtDa;;AAEb,aAAa,mBAAO,CAAC,kBAAM;;AAE3B,mBAAmB,mBAAO,CAAC,iGAAe;AAC1C,gBAAgB,mBAAO,CAAC,yFAAW;AACnC,QAAQ,cAAc,EAAE,mBAAO,CAAC,6FAAa;;AAE7C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,kBAAkB;AAC/B;AACA,aAAa,SAAS;AACtB;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,kBAAkB;AAC/B;AACA,aAAa,SAAS;AACtB;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,SAAS;AACtB;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB,cAAc,QAAQ;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB,cAAc,QAAQ;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wCAAwC,IAAI;AAC5C;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,gDAAgD,IAAI,KAAK,MAAM;AAC/D;AACA;AACA;AACA,YAAY;AACZ;AACA,8CAA8C,IAAI,KAAK,MAAM;AAC7D;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,8CAA8C,IAAI,KAAK,MAAM;AAC7D;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,8CAA8C,IAAI,KAAK,MAAM;AAC7D;AACA;AACA,UAAU;AACV,gDAAgD,IAAI;AACpD;;AAEA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA,aAAa,iBAAiB;AAC9B,aAAa,SAAS;AACtB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB,aAAa,UAAU;AACvB;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;;AAEA,kCAAkC,SAAS;AAC3C;AACA;AACA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,aAAa,iBAAiB;AAC9B,aAAa,SAAS;AACtB,aAAa,UAAU;AACvB;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,gCAAgC,SAAS;AACzC;AACA;;AAEA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACjgBa;;AAEb,QAAQ,WAAW,EAAE,mBAAO,CAAC,sBAAQ;;AAErC,0BAA0B,mBAAO,CAAC,+GAAsB;AACxD;AACA;AACA;AACA;AACA;AACA,EAAE,EAAE,mBAAO,CAAC,6FAAa;AACzB,QAAQ,gCAAgC,EAAE,mBAAO,CAAC,iGAAe;AACjE,QAAQ,iCAAiC,EAAE,mBAAO,CAAC,+FAAc;;AAEjE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB;AACA,aAAa,SAAS;AACtB;AACA,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB;AACA;AACA,0BAA0B;AAC1B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,cAAc,QAAQ;AACtB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;;AAEN;AACA;;AAEA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;;AAEN;AACA;;AAEA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA,4BAA4B,aAAa;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,oBAAoB;AACxD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,0BAA0B,aAAa;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,MAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,cAAc,8BAA8B;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;;AAEA;AACA;AACA;AACA,mCAAmC,KAAK;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,aAAa,gCAAgC;AAC7C,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,cAAc,oBAAoB;AAClC;AACA;AACA;AACA;AACA;;AAEA;AACA,2CAA2C,QAAQ;AACnD;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACjsBA,sCAAsC,gCAAgC;;AAEzD;;AAEb,QAAQ,SAAS,EAAE,mBAAO,CAAC,sBAAQ;AACnC,QAAQ,iBAAiB,EAAE,mBAAO,CAAC,sBAAQ;;AAE3C,0BAA0B,mBAAO,CAAC,+GAAsB;AACxD,QAAQ,iCAAiC,EAAE,mBAAO,CAAC,6FAAa;AAChE,QAAQ,4BAA4B,EAAE,mBAAO,CAAC,+FAAc;AAC5D,QAAQ,4BAA4B,EAAE,mBAAO,CAAC,iGAAe;;AAE7D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,iBAAiB;AAC9B,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB;AACA,aAAa,UAAU;AACvB;AACA,aAAa,SAAS;AACtB;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB;AACA,aAAa,SAAS;AACtB;AACA,cAAc,mBAAmB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,iBAAiB;AAC9B,aAAa,SAAS;AACtB,aAAa,UAAU;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,GAAG;AAChB,aAAa,SAAS;AACtB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,GAAG;AAChB,aAAa,SAAS;AACtB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,GAAG;AAChB,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB;AACA,aAAa,SAAS;AACtB;AACA,aAAa,SAAS;AACtB;AACA,aAAa,SAAS;AACtB;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,MAAM;AACnB,aAAa,SAAS;AACtB;AACA,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB;AACA,aAAa,UAAU;AACvB;AACA,aAAa,SAAS;AACtB;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB;AACA,aAAa,SAAS;AACtB;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA,aAAa,iBAAiB;AAC9B,aAAa,SAAS;AACtB;AACA,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB;AACA,aAAa,UAAU;AACvB;AACA,aAAa,SAAS;AACtB;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB;AACA,aAAa,SAAS;AACtB;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,UAAU;AACvB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB,WAAW,UAAU;AACrB;AACA;AACA;AACA;;AAEA,kBAAkB,0BAA0B;AAC5C;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB,WAAW,UAAU;AACrB;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACzlBa;;AAEb,QAAQ,SAAS,EAAE,mBAAO,CAAC,sBAAQ;;AAEnC;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,WAAW;AACtB,WAAW,QAAQ;AACnB,YAAY,QAAQ;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC9Ja;;AAEb,QAAQ,aAAa,EAAE,mBAAO,CAAC,+FAAc;;AAE7C;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY,KAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAU,mBAAmB;AAC7B;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,+DAA+D,EAAE;AACjE;;AAEA;;AAEA;;AAEA;AACA,sCAAsC,SAAS;AAC/C;;AAEA;AACA;AACA,MAAM;AACN,6DAA6D,EAAE;AAC/D;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,kCAAkC,SAAS;AAC3C;;AAEA;AACA;AACA;;AAEA,mBAAmB;;;;;;;;;;;;AC7DN;;AAEb,QAAQ,SAAS,EAAE,mBAAO,CAAC,sBAAQ;;AAEnC,QAAQ,UAAU,EAAE,mBAAO,CAAC,6FAAa;;AAEzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd,YAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE,0BAA0B;AAC5B;AACA;AACA,EAAE;AACF;AACA,wBAAwB,mBAAO,CAAC,6IAAgB;;AAEhD,IAAI,0BAA0B;AAC9B;AACA;AACA,IAAI;AACJ;AACA;AACA;;;;;;;;;;;;ACvJA,sCAAsC,yDAAyD;;AAElF;;AAEb,qBAAqB,mBAAO,CAAC,sBAAQ;AACrC,aAAa,mBAAO,CAAC,kBAAM;AAC3B,QAAQ,SAAS,EAAE,mBAAO,CAAC,sBAAQ;AACnC,QAAQ,aAAa,EAAE,mBAAO,CAAC,sBAAQ;;AAEvC,kBAAkB,mBAAO,CAAC,6FAAa;AACvC,0BAA0B,mBAAO,CAAC,+GAAsB;AACxD,oBAAoB,mBAAO,CAAC,iGAAe;AAC3C,kBAAkB,mBAAO,CAAC,6FAAa;AACvC,QAAQ,mBAAmB,EAAE,mBAAO,CAAC,6FAAa;;AAElD,iCAAiC,GAAG;;AAEpC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB;AACA;AACA,aAAa,SAAS;AACtB;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,SAAS;AACtB;AACA,aAAa,UAAU;AACvB,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB;AACA,aAAa,SAAS;AACtB,aAAa,QAAQ;AACrB,aAAa,kBAAkB;AAC/B;AACA,aAAa,QAAQ;AACrB,aAAa,4BAA4B;AACzC;AACA,aAAa,SAAS;AACtB;AACA,aAAa,UAAU;AACvB,aAAa,UAAU;AACvB;AACA,aAAa,UAAU;AACvB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,sBAAsB;AACpC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,aAAa,sBAAsB;AACnC,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa,sBAAsB;AACnC,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,kDAAkD;AAC3E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,KAAK;AAClB,aAAa,sBAAsB;AACnC,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA+B,OAAO;AACtC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gDAAgD,SAAS;AACzD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,gDAAgD,MAAM;AACtD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,2BAA2B;AACtC,YAAY,UAAU;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,cAAc;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,gBAAgB,MAAM,EAAE,wBAAwB;AAChD;AACA,uBAAuB,EAAE,IAAI,WAAW;AACxC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,iBAAiB;AAC5B,WAAW,sBAAsB;AACjC,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;AACA;;;;;;;;;;;;AC3hBA,sCAAsC,kEAAkE;;AAE3F;;AAEb,qBAAqB,mBAAO,CAAC,sBAAQ;AACrC,cAAc,mBAAO,CAAC,oBAAO;AAC7B,aAAa,mBAAO,CAAC,kBAAM;AAC3B,YAAY,mBAAO,CAAC,gBAAK;AACzB,YAAY,mBAAO,CAAC,gBAAK;AACzB,QAAQ,0BAA0B,EAAE,mBAAO,CAAC,sBAAQ;AACpD,QAAQ,mBAAmB,EAAE,mBAAO,CAAC,sBAAQ;AAC7C,QAAQ,MAAM,EAAE,mBAAO,CAAC,gBAAK;;AAE7B,0BAA0B,mBAAO,CAAC,+GAAsB;AACxD,iBAAiB,mBAAO,CAAC,2FAAY;AACrC,eAAe,mBAAO,CAAC,uFAAU;AACjC,QAAQ,SAAS,EAAE,mBAAO,CAAC,+FAAc;;AAEzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,EAAE,mBAAO,CAAC,6FAAa;AACzB;AACA,iBAAiB;AACjB,EAAE,EAAE,mBAAO,CAAC,mGAAgB;AAC5B,QAAQ,gBAAgB,EAAE,mBAAO,CAAC,6FAAa;AAC/C,QAAQ,WAAW,EAAE,mBAAO,CAAC,iGAAe;;AAE5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,cAAc;AAC3B,aAAa,mBAAmB;AAChC,aAAa,QAAQ;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB;AACA;AACA,aAAa,UAAU;AACvB;AACA,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,GAAG;AAChB,aAAa,SAAS;AACtB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,GAAG;AAChB,aAAa,SAAS;AACtB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,GAAG;AAChB,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB;AACA,aAAa,SAAS;AACtB;AACA,aAAa,SAAS;AACtB;AACA,aAAa,SAAS;AACtB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,kBAAkB;AAC3E,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,kDAAkD,OAAO;AACzD;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH,CAAC;;AAED;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,WAAW;AACtB,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB;AACA;AACA,WAAW,SAAS;AACpB;AACA,WAAW,UAAU;AACrB;AACA,WAAW,SAAS;AACpB;AACA,WAAW,UAAU;AACrB;AACA,WAAW,QAAQ;AACnB;AACA,WAAW,QAAQ;AACnB;AACA,WAAW,QAAQ;AACnB;AACA,WAAW,QAAQ;AACnB;AACA,WAAW,kBAAkB;AAC7B;AACA,WAAW,QAAQ;AACnB;AACA,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,uCAAuC,sBAAsB;AAC7D,gCAAgC,4BAA4B;AAC5D;AACA;;AAEA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA,MAAM;AACN,4CAA4C,QAAQ;AACpD;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mEAAmE;AACnE;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,mBAAmB,mBAAmB,GAAG,mBAAmB;AAC5D;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB;;AAElB;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,QAAQ;AACR,oDAAoD,SAAS;AAC7D;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA,uCAAuC,eAAe;AACtD;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,WAAW;AACtB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY,YAAY;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY,eAAe;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,WAAW;AACtB,WAAW,4CAA4C;AACvD;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,WAAW;AACtB,WAAW,GAAG;AACd,WAAW,UAAU;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2CAA2C,sBAAsB;AACjE,YAAY,kCAAkC;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,oBAAoB;AAC/B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,8BAA8B;AACzC,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,UAAU;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,WAAW;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;ACz1CA;;;;AAIA,MAAqB,WAAY,SAAQA,2BAAoC;;;;IAIzE;QACI,KAAK,EAAE;QACP,MAAM,IAAI,SAAS,CAAC,4CAA4C,CAAC;KACpE;;;;IAKD,IAAW,OAAO;QACd,MAAM,OAAO,GAAG,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC;QACtC,IAAI,OAAO,OAAO,KAAK,SAAS,EAAE;YAC9B,MAAM,IAAI,SAAS,CACf,0DACI,IAAI,KAAK,IAAI,GAAG,MAAM,GAAG,OAAO,IACpC,EAAE,CACL;SACJ;QACD,OAAO,OAAO;KACjB;CACJ;AACDC,oCAAoB,CAAC,WAAW,CAAC,SAAS,EAAE,OAAO,CAAC;;;;AAK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A;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wBAAwB;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO,QAAQ;AAChC,iBAAiB,OAAO,QAAQ;AAChC,kBAAkB,OAAO,OAAO;AAChC,kBAAkB,OAAO,OAAO;AAChC,iBAAiB,QAAQ,OAAO;AAChC,iBAAiB,QAAQ,OAAO;AAChC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,uEAAuE;;AAEvE;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,uBAAuB;AACvB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,+CAA+C,EAAE,UAAU,EAAE;AAC7D;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,aAAa,aAAa;AAC1C;AACA,gBAAgB,aAAa,aAAa;AAC1C;AACA,gBAAgB,aAAa,aAAa;AAC1C;AACA,gBAAgB,aAAa,aAAa;AAC1C;AACA,gBAAgB,aAAa,aAAa;AAC1C;AACA,gBAAgB,aAAa;AAC7B;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;ACn2BA,kBAAkB,mBAAO,CAAC,sEAAe;AACzC,YAAY,mBAAO,CAAC,0DAAS;;AAE7B;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,mCAAmC;AACnC;AACA;AACA,wCAAwC,SAAS;AACjD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,wDAAwD,uCAAuC;AAC/F,sDAAsD,qCAAqC;;AAE3F;AACA;;AAEA;AACA;;AAEA;AACA;AACA,EAAE;AACF,CAAC;;AAED;;;;;;;;;;;;AC7EY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACvJA,kBAAkB,mBAAO,CAAC,sEAAe;;AAEzC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,sCAAsC,SAAS;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,0BAA0B;;AAE1B;;AAEA;AACA;AACA;;AAEA,0CAA0C,SAAS;AACnD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,sCAAsC,SAAS;AAC/C;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;AC/FY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACvJA;AACA,iBAAiB,mBAAO,CAAC,0DAAY;AACrC,cAAc,mBAAO,CAAC,kEAAgB;AACtC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA,yBAAyB,IAAI;AAC7B,wBAAwB,EAAE,WAAW,EAAE;AACvC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,cAAc,OAAO;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA,cAAc,OAAO;AACrB;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH,cAAc,OAAO;AACrB;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH,cAAc,OAAO;AACrB;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAG;AACH;AACA;;AAEA,aAAa,OAAO;AACpB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mCAAmC,IAAI;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,8BAA8B,IAAI;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;ACjPa;;AAEb,kBAAkB,mBAAO,CAAC,8DAAc;AACxC,cAAc,mBAAO,CAAC,gEAAe;;AAErC;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,oBAAoB;AACpB;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,cAAc,mBAAmB;AACjC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAc,cAAc;AAC5B;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA,kBAAkB,cAAc;AAChC;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA,sEAAsE,mCAAmC;;AAEzG;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,kBAAkB,OAAO;AACzB;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;;ACjea;;AAEb,YAAY,mBAAO,CAAC,gDAAO;AAC3B,UAAU,mBAAO,CAAC,sDAAU;;AAE5B;AACA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AACA;AACA;AACA,wBAAwB,8EAAsC;AAC9D;AACA,4BAA4B,iEAAwB;AACpD;AACA;AACA;AACA;AACA;AACA,wBAAwB,iEAAsB,+BAA+B,gBAAgB;AAC7F;AACA,4BAA4B,sEAA8B;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,0BAA0B;AACzE,gCAAgC,sEAA8B;AAC9D;AACA;AACA,8EAA8E,uCAAuC;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACsE;;;;;;;;;;;;;;;;;;ACvFX;AAChB;AAC3C,aAAa,wDAAU,CAAC,gEAAuB;AAC7B;;;;;;;;;;;;;;;;;;;ACHoD;AACtB;AACU;AACnD;AACP;AACA;AACA;AACA;AACA,gCAAgC,kFAA2B;AAC3D;AACA,mBAAmB,uEAAqB,KAAK,wDAAQ;AACrD;AACA;AACA;;;;;;;;;;;;;;;;;;ACbuD;AACI;AAC3D;AACA;AACA,mCAAmC,iEAAwB;AAC3D,4BAA4B,kFAA2C;AACvE;AACA,wCAAwC,wEAA+B;AACvE,+BAA+B,iEAAwB;AACvD;AACA;AACA;AACsB;;;;;;;;;;;;;;;;ACZtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACgC;;;;;;;;;;;;;;;;;;ACT0B;AAChB;AAC3C,kBAAkB,wDAAU,CAAC,sEAA6B;AACnC;;;;;;;;;;;;;;;;;;;ACHoC;AACX;AACU;AAC1D;AACA,WAAW,uEAAqB,KAAK,wDAAQ,CAAC,+DAAsB;AACpE;AACiB;;;;;;;;;;;;;;;;;;;ACN0C;AACX;AACU;AAC1D;AACA,WAAW,uEAAqB,KAAK,wDAAQ,CAAC,kEAAyB;AACvE;AACoB;;;;;;;;;;;;;;;;;;;ACNmC;AACI;AACS;AACpE,oBAAoB,iFAAsB,CAAC,oEAA2B,EAAE,kFAA2C;AAC1F;;;;;;;;;;;;;;;;;;;ACJ8B;AACI;AACS;AACpE,iBAAiB,iFAAsB,CAAC,iEAAwB,EAAE,+EAAwC;AACpF;;;;;;;;;;;;;;;;;ACJ0B;AAChD;AACA;AACA;AACA,+BAA+B,wDAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACkC;;;;;;;;;;;;;;;;;;ACZc;AACU;AAC1D;AACA,WAAW,uEAAqB,KAAK,wDAAQ;AAC7C;AACkB;;;;;;;;;;;;;;;;;;;ACLyC;AACX;AACC;AACjD;AACA;AACA,2BAA2B,wDAAQ,CAAC,8DAAqB;AACzD,QAAQ,8DAAY;AACpB;AACA;AACsB;;;;;;;;;;;;;;;;;;;ACTqC;AACX;AACC;AACjD;AACA;AACA,2BAA2B,wDAAQ,CAAC,mEAA0B;AAC9D,QAAQ,8DAAY;AACpB;AACA;AACqB;;;;;;;;;;;;;;;;;;ACT0D;AAC9C;AACjC;AACA;AACA,kBAAkB,6CAAE;AACpB;AACA;AACA;AACA,oBAAoB,qEAAe;AACnC,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,sEAAgB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACkB;;;;;;;;;;;;;;;;ACnCZ;AACP;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJO;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACP;AACA;AACA;AACA;AACO;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACP;AACO;AACP;AACO;AACP;AACA,qBAAqB,uBAAuB;AAC5C;AACA;AACA;AACA;AACA;AACO;AACP;AACO;AACP;AACO;AACP;AACO;AACP;AACO;AACA;AACA;AACA,4DAA4D;AAC5D,yDAAyD;AACzD,6DAA6D;AAC7D;AACP;AACA;AACA;AACO;;;;;;;;;;;;;;;;;;ACnDP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC6D;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpBtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBP,gBAAgB,SAAI,IAAI,SAAI;AAC5B;AACA,iDAAiD,OAAO;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAI,IAAI,SAAI;AAC7B,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,mBAAmB,SAAI,IAAI,SAAI;AAC/B,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,iBAAiB,oDAAoD,qEAAqE,cAAc;AACxJ,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AACA,qBAAqB,SAAI,IAAI,SAAI;AACjC,6EAA6E,OAAO;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AAC8C;AACQ;AACwB;AACnB;AACE;AACuB;AACnC;AACa;AACS;AACtC;AACqC;AACb;AACvB;AACgC;AAClE;AACA;AACA;AACA;AACA,iCAAiC,sFAA8C;AAC/E;AACA;AACA,mCAAmC,sEAAgB;AACnD;AACA,0CAA0C,sEAAgB;AAC1D,qCAAqC,sEAAgB;AACrD,qCAAqC,sEAAgB;AACrD,iCAAiC,0FAAkD;AACnF;AACA;AACA;AACA;AACA;AACA,iCAAiC,iGAAyD;AAC1F;AACA;AACA;AACA;AACA;AACA,iCAAiC,4FAAoD;AACrF;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,6CAAE;AACpB,sCAAsC,2CAAM;AAC5C;AACA;AACA,gCAAgC,2CAAM;AACtC,kCAAkC,2CAAM;AACxC;AACA,mCAAmC,qEAAc;AACjD,0CAA0C,2EAAqB;AAC/D;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA,0HAA0H,OAAO,uEAAoB,oBAAoB;AACzK,gCAAgC,uEAAoB;AACpD;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA,8CAA8C,uBAAuB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,iDAAiD,sEAAgB;AACjE,0BAA0B,sDAAO;AACjC;AACA,mBAAmB,sEAAe;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,sCAAsC,2CAAM;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,sDAAsD,2CAAM;AAC5D;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,+DAAsB;AAC3E;AACA;AACA;AACA;AACA;AACA,4BAA4B,oEAAiB;AAC7C,iDAAiD,iCAAiC;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,mEAAiB;AAC9C;AACA;AACA;AACA;AACA,4BAA4B,8EAAsC;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA,sEAAsE,oBAAoB;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,iDAAiD,+DAAsB;AACvE;AACA;AACA,sDAAsD,+DAAsB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,+DAAsB;AAC1E;AACA;AACA,yDAAyD,+DAAsB;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,iEAAwB;AACxD,2CAA2C,iEAAwB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,uCAAuC;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,wDAAS;AAC7B,mFAAmF,4GAA4G;AAC/L;AACA;AACA;AACA,gBAAgB,wDAAS;AACzB;AACA;AACA;AACA;AACA;AACA,gCAAgC,wEAAgC;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,wEAAgC;AAC5E;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,wDAAS;AACzB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,qDAAqD,cAAc,yCAAyC,iBAAiB,cAAc,oEAAc,WAAW;AACpK;AACA;AACA;AACA,gCAAgC,4EAAoC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,yEAA0B;AACtC,4BAA4B,+DAAuB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,uDAAI;AAC9B;AACA,yBAAyB,8DAAO;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,wDAAS;AACrB,4DAA4D,8CAA8C;AAC1G;AACA;AACA;AACA;AACA,gDAAgD,wBAAwB;AACxE;AACA;AACA,gBAAgB,wDAAS;AACzB,gCAAgC,wEAAgC;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,yCAAyC;AACxH;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gEAAwB,SAAS,mFAA4B;AACzF;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,wDAAS;AACzB,iDAAiD,kDAAkD;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,CAAC;AACoB;;;;;;;;;;;;;;;;;;AClsBY;AACjC;AACA;AACA,kBAAkB,6CAAE;AACpB;AACA;AACA;AACA,CAAC;AAC0B;AAC3B;AACA;AACA,kBAAkB,6CAAE;AACpB;AACA;AACA;AACA,CAAC;AAC+B;;;;;;;;;;;;;;;;AChBhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAC4B;;;;;;;;;;;;;;;;;;ACdyB;AACP;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gEAAwB;AACpD;AACA;AACA,4BAA4B,gEAAwB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gEAAwB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gEAAwB;AACpD;AACA;AACA;AACA;AACA,4BAA4B,gEAAwB;AACpD;AACA;AACA,4BAA4B,gEAAwB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF,0CAA0C;AAC3H,iBAAiB;AACjB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,uBAAuB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,4BAA4B,gEAAwB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,qBAAqB,2DAAU,uBAAuB;AAC/F,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACiB;;;;;;;;;;;;;;;;;ACvGgB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,2CAAM;AACrC,iCAAiC,2CAAM;AACvC;AACA;AACA;AACA;AACA,CAAC;AACgC;;;;;;;;;;;;;;;;AChDjC;AACA;AACA;AACA,CAAC,gCAAgC;AACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJ4B;AAC3C,mBAAmB,qDAAI;AACoB;AAC4C;AACT;AAChB;AAChB;AACR;AACF;AACE;AACgC;AACwB;AACpD;AACE;AACK;AACF;AACM;AACN;AACM;AAC5B;AACqB;AACG;AAC4D;AAC/C;AACV;;;;;;;;;;;;;;;;;ACxB1B;AACjC;AACA;AACA,kBAAkB,6CAAE;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACkB;;;;;;;;;;;;;;;;;ACdwC;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,+DAAsB;AAC/C;AACA;AACA;AACA,8BAA8B,oEAAoE;AAClG;AACA;AACA;AACA,CAAC;AACmB;;;;;;;;;;;;;;;;;AChBuC;AAC3D;AACA;AACA;AACA;AACA,4DAA4D,iEAAwB;AACpF,wDAAwD,4DAAmB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,iEAAwB;AAChF;AACA;AACA;AACA,CAAC;AACyB;;;;;;;;;;;;;;;;AClB1B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPyC;AACH;AACuB;AAClB;AACG;AAC0G;AACpI;AACE;AACR;AACqE;AAC/D;AACF;AAClC;AACA;AACA;AACA;AACA,sCAAsC,sEAA6B,GAAG,gEAAuB;AAC7F,6BAA6B,+CAAQ;AACrC,qBAAqB,2CAAM;AAC3B;AACA,8BAA8B,+CAAQ;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,iEAAY;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,6CAAO;AACrC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,iEAAY;AACzB;AACA;AACA;AACA;AACA,8CAA8C,kFAA4B;AAC1E,0BAA0B,iEAAyB;AACnD,uBAAuB,2EAAqB;AAC5C,uBAAuB,gGAA0C;AACjE;AACA;AACA,aAAa,iEAAY;AACzB;AACA,aAAa,iEAAY;AACzB;AACA;AACA,8CAA8C,kFAA4B;AAC1E,0BAA0B,kEAA0B;AACpD,uBAAuB,gGAA0C;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,6CAAO;AAClC,0BAA0B,uCAAI;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,qEAAe;AAC5C,+BAA+B,kEAAe;AAC9C;AACA,+CAA+C,8EAA2B;AAC1E;AACA,gCAAgC,4EAAoC,CAAC,qEAAe;AACpF;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,sBAAsB,8CAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,2EAAuB;AACnC,YAAY,mFAA6B;AACzC;AACA;AACA;AACA;AACA;AACA,qBAAqB,2CAAM,CAAC,oEAAc,sCAAsC,+CAAQ;AACxF,sBAAsB,8CAAO;AAC7B,sBAAsB,6CAAO;AAC7B;AACA;AACyD;;;;;;;;;;;;;;;;AClJzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,oBAAoB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAC0B;;;;;;;;;;;;;;;;;;;;;;;;ACxB3B,qBAAqB,SAAI,IAAI,SAAI;AACjC,6EAA6E,OAAO;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AAC8E;AACxB;AACM;AACD;AACF;AACvB;AAClC;AACA,0BAA0B,qEAAe;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,gFAAwC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,sFAAqB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,4EAAoC;AAC1D;AACA;AACA,yBAAyB,2CAAM,CAAC,oEAAc;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,gFAAwC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,oBAAoB;AACxD;AACA;AACA;AACA;AACA;AACA,yBAAyB,2CAAM,CAAC,oEAAc;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,qEAAe;AACjD;AACA,kDAAkD,wCAAwC,iBAAiB,mEAA0B,GAAG,IAAI;AAC5I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,kCAAkC,gEAAuB;AACzD,uCAAuC,sEAA6B;AACpE,sCAAsC,8DAAqB;AAC3D,qCAAqC,mEAA0B;AAC/D;AACA;AACyE;;;;;;;;;;;;;;;;;ACtIxC;AACjC;AACA;AACA,kBAAkB,6CAAE;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACkB;;;;;;;;;;;;;;;;;;;;;ACrBwC;AAC1B;AAC6B;AACxB;AACe;AACrD;AACA;AACA,kBAAkB,6CAAE;AACpB;AACA;AACA,6DAA6D,0EAAoB;AACjF,wBAAwB,8DAAe;AACvC;AACA;AACA;AACA;AACA,+BAA+B,+CAAQ,CAAC,+DAAsB;AAC9D;AACA,0CAA0C,+CAAQ;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,gBAAgB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,sEAA6B;AACxD;AACA;AACA,+BAA+B,sEAA6B;AAC5D;AACA;AACA,2BAA2B,+DAAsB;AACjD;AACA;AACA,wDAAwD,OAAO,yEAAgC,wBAAwB,8BAA8B,IAAI;AACzJ;AACA;AACA,+BAA+B,kEAAyB;AACxD;AACA;AACA;AACA,uDAAuD,iBAAiB,+DAAsB,GAAG;AACjG;AACA;AACA;AACA;AACA;AACA,8DAA8D,OAAO,yEAAgC,wBAAwB,8BAA8B,IAAI;AAC/J;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,+DAAsB;AACrD;AACA;AACA;AACA;AACA,kDAAkD,gBAAgB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACiB;;;;;;;;;;;;;;;;;;;;AChFlB,gBAAgB,SAAI,IAAI,SAAI;AAC5B;AACA,iDAAiD,OAAO;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAI,IAAI,SAAI;AAC7B,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,mBAAmB,SAAI,IAAI,SAAI;AAC/B,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,iBAAiB,oDAAoD,qEAAqE,cAAc;AACxJ,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AACA,qBAAqB,SAAI,IAAI,SAAI;AACjC,6EAA6E,OAAO;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACyG;AAC3B;AACnB;AACY;AACvE;AACA;AACA;AACA;AACA,2BAA2B,oEAAc;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,wEAA0B;AACjE;AACA;AACA,KAAK,IAAI,yFAAyF;AAClG;AACA;AACA;AACA;AACA;AACA,kEAAkE,eAAe,gBAAgB;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF,WAAW,sFAAsF;AACjL;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,yCAAyC;AAC3H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,QAAQ,uDAAS;AACjB,sDAAsD,gBAAgB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,oEAA2B;AACvD,uCAAuC,oEAA2B;AAClE;AACA;AACA;AACA;AACA;AACA,gCAAgC,2EAAoB;AACpD;AACA;AACA;AACA;AACA;AACA,0BAA0B,sEAAgB;AAC1C;AACA;AACA;AACA;AACA,oFAAoF,sEAAgB;AACpG;AACA;AACA;AACA,wBAAwB,4EAAqB;AAC7C;AACA,4BAA4B,iEAAwB;AACpD,wBAAwB,wEAAiB;AACzC;AACA;AACA;AACA;AACA;AACA,QAAQ,uDAAS;AACjB,uDAAuD,gEAAgE;AACvH;AACA;AACA;AACA;AACA;AAC2B;;;;;;;;;;;;;;;;;;;;;;;;AC7L3B,iBAAiB,SAAI,IAAI,SAAI;AAC7B,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,mBAAmB,SAAI,IAAI,SAAI;AAC/B,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,iBAAiB,oDAAoD,qEAAqE,cAAc;AACxJ,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AACsD;AACO;AACF;AACG;AACnB;AACkC;AACP;AACpB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,uEAAiB;AAC1C,WAAW,kFAA+B,eAAe,uDAAuD,gBAAgB,iBAAiB,iFAAyC,qFAAqF;AAC/Q;AACA;AACA;AACA;AACA,IAAI,sEAAgB;AACpB;AACA,aAAa,qEAAe;AAC5B,aAAa,qEAAe;AAC5B;AACA;AACA,aAAa,qEAAe;AAC5B;AACA;AACA,aAAa,qEAAe;AAC5B,qBAAqB,+DAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,6DAAe;AAChC;AACA;AACA;AACA;AACA,IAAI,yDAAW;AACf;AACA;AACA;AACA;AACA;AACA,YAAY,uDAAS;AACrB,uDAAuD,mDAAmD;AAC1G;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,uDAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,kDAAkD,uEAAoB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,uDAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACmB;;;;;;;;;;;;;;;;;;;AC5MnB,iBAAiB,SAAI,IAAI,SAAI;AAC7B,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,mBAAmB,SAAI,IAAI,SAAI;AAC/B,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,iBAAiB,oDAAoD,qEAAqE,cAAc;AACxJ,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AAC8D;AACnB;AACpC;AACP,2BAA2B,sEAAgB;AAC3C;AACA;AACA,0BAA0B,sEAAgB;AAC1C;AACA;AACA;AACA;AACA;AACO;AACP,0BAA0B,sEAAgB;AAC1C;AACA;AACA,0BAA0B,sEAAgB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,uDAAS;AACjB;AACA;AACA;AACA,yEAAyE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC;;;;;;;;;;;;;;;;;;ACvF6D;AACC;AAC/D;AACA;AACA;AACA;AACA;AACA,8BAA8B,sEAAgB;AAC9C,mBAAmB,wEAAmB;AACtC;AACA;AACA,8BAA8B,sEAAgB;AAC9C,mBAAmB,wEAAmB;AACtC;AACA;AACA,8BAA8B,sEAAgB;AAC9C,mBAAmB,wEAAmB;AACtC;AACA;AACA,CAAC;AAC0B;;;;;;;;;;;;;;;;;;;ACpB2B;AACA;AACI;AAC1D;AACA;AACA;AACA,sCAAsC,mEAAiB;AACvD,oCAAoC,+DAAe;AACnD,oCAAoC,+DAAe;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACgC;;;;;;;;;;;;;;;;;ACxEyB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,mEAAiB;AACpC;AACA;AACA;AACA,mBAAmB,mEAAiB;AACpC;AACA;AACA,CAAC;AAC0B;;;;;;;;;;;;;;;;;;;;ACf2B;AACyB;AACX;AACL;AAC/D;AACA;AACA;AACA;AACA;AACA,6BAA6B,qEAAe;AAC5C;AACA,mBAAmB,6EAAqB;AACxC;AACA;AACA;AACA,iCAAiC,wEAAgC;AACjE;AACA;AACA;AACA;AACA;AACA,6BAA6B,qEAAe;AAC5C;AACA;AACA;AACA,8BAA8B,sEAAgB;AAC9C,mBAAmB,wEAAmB;AACtC;AACA;AACA,6BAA6B,qEAAe;AAC5C;AACA;AACA;AACA,mBAAmB,6EAAqB;AACxC;AACA;AACA,6BAA6B,qEAAe;AAC5C;AACA,8BAA8B,sEAAgB;AAC9C,mBAAmB,wEAAmB;AACtC;AACA;AACA,6BAA6B,qEAAe;AAC5C;AACA,8BAA8B,sEAAgB;AAC9C,mBAAmB,wEAAmB;AACtC;AACA;AACA;AACA,4BAA4B,2EAAmC;AAC/D;AACA;AACA,6BAA6B,qEAAe;AAC5C,8BAA8B,sEAAgB;AAC9C;AACA;AACA;AACA,6BAA6B,qEAAe;AAC5C;AACA,4CAA4C;AAC5C;AACA;AACA,8BAA8B,sEAAgB;AAC9C,mBAAmB,wEAAmB;AACtC;AACA;AACA,6BAA6B,qEAAe;AAC5C;AACA,sCAAsC;AACtC;AACA,mBAAmB,wEAAmB;AACtC;AACA;AACA,6BAA6B,qEAAe;AAC5C;AACA,8BAA8B,sEAAgB;AAC9C,mBAAmB,wEAAmB;AACtC;AACA;AACA,iDAAiD,wCAAwC;AACzF;AACA;AACA,CAAC;AAC0B;;;;;;;;;;;;;;;;;;ACnF2B;AACI;AAC1D;AACA;AACA;AACA,sCAAsC,mEAAiB;AACvD,oCAAoC,+DAAe;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAC8B;;;;;;;;;;;;;;;;;;AC7DuB;AACuD;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA,mCAAmC,oEAAe;AAClD,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA,mCAAmC,qEAAgB;AACnD,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA,uCAAuC,mEAAc;AACrD;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA,uCAAuC,oEAAe;AACtD;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA,uCAAuC,qEAAgB;AACvD;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA,uCAAuC,uEAAkB,UAAU,mEAAc;AACjF;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA,wCAAwC,uEAAkB,UAAU,mEAAc;AAClF;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA,uCAAuC,uEAAkB,UAAU,oEAAe;AAClF;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA,wCAAwC,uEAAkB,UAAU,oEAAe;AACnF;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA,uCAAuC,uEAAkB,UAAU,qEAAgB;AACnF;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA,wCAAwC,uEAAkB,UAAU,qEAAgB;AACpF;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA,uCAAuC,uEAAkB;AACzD;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA,wCAAwC,uEAAkB;AAC1D;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA,CAAC;AAC4B;;;;;;;;;;;;;;;;;;;;;AClG8B;AACX;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA,8BAA8B,wDAAQ;AACtC;AACA;AACA,uCAAuC,+DAAsB;AAC7D,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACiF;;;;;;;;;;;;;;;;;AClCjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACiD;;;;;;;;;;;;;;;;;;;;;;ACVqB;AAChB;AACO;AAChB;AACtC;AACP;AACA;AACA;AACA,6BAA6B,uBAAuB;AACpD;AACA;AACA,gDAAgD,8CAA8C;AAC9F;AACA;AACA;AACO;AACP;AACA;AACA,aAAa,qEAAe;AAC5B,aAAa,qEAAe;AAC5B;AACA;AACA,aAAa,qEAAe;AAC5B,aAAa,qEAAe;AAC5B;AACA;AACA,aAAa,qEAAe;AAC5B;AACA;AACA,aAAa,qEAAe;AAC5B;AACA;AACA,aAAa,qEAAe;AAC5B;AACA;AACA;AACA;AACA,wCAAwC,kFAA4B;AACpE,wBAAwB,uEAA+B;AACvD;AACA;AACO;AACP;AACA,aAAa,qEAAe;AAC5B,qBAAqB,uCAAuC,sDAAW;AACvE,aAAa,qEAAe;AAC5B,qBAAqB,wCAAwC,sDAAW;AACxE,aAAa,qEAAe;AAC5B,qBAAqB,4CAA4C,sDAAW;AAC5E;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACsB;;;;;;;;;;;;;;;;;;ACNgC;AAC/C;AACP;AACA,0BAA0B,iEAAyB;AACnD;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACfO;AACP;AACA;AACA;AACA;AACA,CAAC,kCAAkC;;;;;;;;;;;;;;;;ACLnC;AACA;AACA;AACA;AACc;;;;;;;;;;;;;;;;ACJP;AACP;AACA,sCAAsC,qBAAqB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;ACZsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,sEAA8B;AAC1D;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACiL;;;;;;;;;;;;ACnGpK;AACb;AACA;AACA,mCAAmC,oCAAoC,gBAAgB;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,6BAA6B,GAAG,mBAAmB,GAAG,oBAAoB,GAAG,gBAAgB;AAC7F,8BAA8B,mBAAO,CAAC,yFAAyB;AAC/D,gCAAgC,mBAAO,CAAC,+FAA4B;AACpE,WAAW,mBAAO,CAAC,iEAAa;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA,uFAAuF,gBAAgB;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB;AAChB,gCAAgC,mBAAO,CAAC,+FAA4B;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,oEAAoE;AAClG;AACA;AACA;AACA,CAAC;AACD,gBAAgB;;;;;;;;;;;;ACtCH;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,8BAA8B;AAC9B;AACA;AACA,sCAAsC,qBAAqB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;;;;;;;;;;;;AChBjB;;AAEb;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB;AACzB,yBAAyB;AACzB,yBAAyB;AACzB,yBAAyB;AACzB,yBAAyB;;AAEzB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA,0BAA0B;AAC1B;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA;AACA;AACA,0BAA0B,EAAE;AAC5B;;;AAGA;AACA;AACA;AACA;;;;;;;;;;;;ACrHa;;AAEb,eAAe,mBAAO,CAAC,sDAAU;;AAEjC;AACA;AACA;AACA;AACA,uBAAuB,cAAc;AACrC;AACA;AACA,sBAAsB,aAAa;AACnC;AACA,CAAC;;;;;;;;;;;;ACbY;;AAEb,QAAQ,YAAY,EAAE,mBAAO,CAAC,0DAAY;AAC1C,QAAQ,SAAS,EAAE,mBAAO,CAAC,8DAAc;AACzC,QAAQ,mBAAmB,EAAE,mBAAO,CAAC,4DAAa;;;AAGlD;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,WAAW,GAAG,aAAa;AAClD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;;;;;;;;;;;;ACnDR;;AAEb,eAAe,mBAAO,CAAC,sEAAqB;AAC5C,QAAQ,iBAAiB,EAAE,mBAAO,CAAC,4DAAa;;AAEhD;AACA;AACA;AACA;;AAEA;AACA,cAAc,QAAQ;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK,IAAI;;AAET,0CAA0C,2BAA2B;AACrE;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,8DAA8D,SAAS;AACvE;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gCAAgC,iBAAiB;AACjD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ,iBAAiB;AACzB;AACA;;AAEA;AACA;AACA;AACA,wBAAwB;AACxB,IAAI,qBAAqB;AACzB;;;;;;;;;;;;ACzHa;;AAEb,eAAe,mBAAO,CAAC,sDAAU;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,oBAAoB;AACxC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,mCAAmC;AACnC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAsB;;;;;;;;;;;;ACjEtB;AACa;;AAEb,eAAe,mBAAO,CAAC,sDAAU;AACjC,QAAQ,iBAAiB,EAAE,mBAAO,CAAC,4DAAa;;AAEhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,cAAc;AAChD;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACxCY;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,mCAAmC;;AAE5C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnDa;;AAEb;AACA;AACA,cAAc,UAAU;AACxB;AACA;AACA;AACA,eAAe,4FAAoC;;AAEnD;AACA;AACA,YAAY,UAAU;AACtB;AACA;AACA,4FAAoC;;AAEpC;AACA;AACA,WAAW,UAAU;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,oCAAoC,OAAO,mBAAO,CAAC,oDAAS,IAAI;AAChE,qCAAqC,OAAO,mBAAO,CAAC,sDAAU,IAAI;AAClE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;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,QAAQ;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;ACjKa;;AAEb,WAAW,mBAAO,CAAC,oDAAS;;AAE5B;AACA;AACA;AACA,WAAW,UAAU;AACrB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACzCA;AACA;;;;;;;;;;;ACDA;AACA;AACA,gEAAgE;AAChE;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,kDAAkD;AAC3G;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE,8BAA8B,gBAAgB,kBAAkB;AAChE;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA,oCAAoC,wBAAwB,iBAAiB;AAC7E,oCAAoC,wBAAwB,IAAI;AAChE;AACA,wCAAwC;AACxC,wCAAwC,oBAAoB;AAC5D;AACA,wCAAwC;AACxC,wCAAwC,kBAAkB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wGAAwG;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,QAAQ;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,QAAQ;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,uBAAuB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,0BAA0B;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE;AACpE,sEAAsE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,2BAA2B;AAClE;AACA;AACA,iBAAiB;AACjB,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,UAAU;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD,qDAAqD;AACrD,sDAAsD;AACtD,4DAA4D;AAC5D,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,wBAAwB;AAC/D;AACA;AACA,iBAAiB;AACjB,uDAAuD;AACvD,uDAAuD;AACvD,0DAA0D;AAC1D,oDAAoD;AACpD,mDAAmD;AACnD,qDAAqD;AACrD,sDAAsD;AACtD,4DAA4D;AAC5D,8DAA8D;AAC9D;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,yBAAyB;AACtF;AACA;AACA;AACA;AACA,gCAAgC,UAAU;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,oBAAoB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC,0BAA0B;;;;;;;;;;;AC1mC3B;AACA;AACA,aAAa,mBAAO,CAAC,sBAAQ;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE,cAAc;AAChB;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AChEY;;AAEZ,QAAQ,iBAAiB;;AAEzB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iBAAiB;AACjB;AACA,iBAAiB;;AAEjB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,IAAI;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,kBAAkB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,WAAW,EAAE,SAAS;AACzC,kBAAkB,oBAAoB;AACtC,cAAc,UAAU,GAAG,EAAE,IAAI,WAAW,EAAE,SAAS;AACvD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kCAAkC,IAAI;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kCAAkC,IAAI;AACtC;AACA;AACA,kCAAkC,IAAI;AACtC;AACA;AACA,mCAAmC,IAAI;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,QAAQ;AACpB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,aAAa;AAC1F,yDAAyD,iBAAiB;AAC1E;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,YAAY;AACpC,yBAAyB,YAAY;AACrC;AACA;AACA;AACA,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,KAAK,OAAO,2BAA2B;AAC7D;AACA;AACA,wBAAwB,oBAAoB;AAC5C;AACA;AACA,qBAAqB,IAAI;AACzB;;AAEA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kCAAkC;AAC1D;AACA;AACA;AACA,sBAAsB,UAAU,EAAE,eAAe,GAAG,WAAW,EAAE,IAAI;AACrE;AACA;AACA;AACA;AACA;AACA,oBAAoB,UAAU,QAAQ,WAAW,GAAG,2BAA2B;AAC/E;AACA;AACA;AACA,qBAAqB,YAAY,EAAE,IAAI,IAAI,oBAAoB;AAC/D;AACA;AACA,iBAAiB,EAAE,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,YAAY;AACpC,yBAAyB,YAAY;AACrC;AACA;AACA;AACA,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,KAAK,OAAO,2BAA2B;AAC7D;AACA;AACA,wBAAwB,oBAAoB;AAC5C;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;AACA;AACA;AACA;AACA,uBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,UAAU,EAAE,eAAe,GAAG,WAAW,EAAE,IAAI;AACrE;AACA;AACA;AACA;AACA,qBAAqB,YAAY,EAAE,IAAI,IAAI,oBAAoB;AAC/D;AACA;AACA,iBAAiB,EAAE,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,YAAY;AACrC,6BAA6B,YAAY;AACzC;AACA;AACA,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,KAAK,OAAO,2BAA2B;AAC7D;AACA,sBAAsB,oBAAoB;AAC1C;AACA,qBAAqB,IAAI;AACzB;;AAEA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,2BAA2B,YAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kCAAkC;AAC1D;AACA;AACA;AACA,sBAAsB,UAAU,EAAE,eAAe,IAAI,IAAI;AACzD;AACA;AACA;AACA;AACA;AACA,oBAAoB,UAAU,UAAU,2BAA2B;AACnE;AACA;AACA;AACA,qBAAqB,YAAY,EAAE,IAAI,IAAI,oBAAoB;AAC/D;AACA;AACA,iBAAiB,EAAE,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,2BAA2B;AACvD;AACA;AACA,qBAAqB,IAAI;AACzB;;AAEA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kCAAkC;AAC1D;AACA;AACA;AACA,sBAAsB,UAAU,EAAE,eAAe,GAAG,IAAI;AACxD;AACA;AACA;AACA;AACA;AACA,oBAAoB,UAAU,SAAS,2BAA2B;AAClE;AACA;AACA,iBAAiB,EAAE,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,2CAA2C,WAAW;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;AChnBa;;AAEb,iBAAiB,mBAAO,CAAC,wFAAa;;AAEtC;AACA;;AAEA;AACA;;AAEA,oCAAoC,SAAS;AAC7C;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC5BA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;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;AAEA;AACA;AACA,8BAA8B,GAAG;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,6BAA6B;AAC7B;AACA;;;;;;;;;;;;ACvIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;;AAEA,aAAa,0FAA6B;AAC1C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,sCAAsC,sCAAsC;AACzG;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;ACvSa;;AAEb;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA,UAAU;AACV;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACzCA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA,UAAU;AACV;AACA,uCAAsC;AACtC,SAAS,mBAAO,CAAC,2DAAO;AACxB,CAAC,EAAC;;AAEF;AACA;AACA,UAAU;AACV;AACA,uCAAsC;AACtC,SAAS,mBAAO,CAAC,2DAAO;AACxB,CAAC,EAAC;;AAEF;AACA;AACA,UAAU;AACV;AACA,0CAAyC;AACzC,SAAS,mBAAO,CAAC,iEAAU;AAC3B,CAAC,EAAC;;;;;;;;;;;;AC/BF;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA,UAAU;AACV;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnCA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA,UAAU;AACV;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrCa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,yCAAwC;AACxC;AACA,CAAC,EAAC;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,2CAA0C;AAC1C;AACA,CAAC,EAAC;;AAEF;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,yCAAwC;AACxC;AACA,CAAC,EAAC;;AAEF;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,2CAA0C;AAC1C,SAAS,mBAAO,CAAC,gEAAU;AAC3B,CAAC,EAAC;;;;;;;;;;;;AC5CF;AACA;AACA;;AAEA,kEAA0C;;;;;;;;;;;ACL1C,SAAS,mBAAO,CAAC,2CAAM;AACvB,SAAS,mBAAO,CAAC,2CAAM;;AAEvB;AACA;AACA;;AAEA;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA,gBAAgB,SAAS;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;ACzBA;AACA;;AAEA,aAAa,mBAAO,CAAC,sBAAQ;;AAE7B;AACA;AACA;;;;;;;;;;;ACPA,UAAU,mBAAO,CAAC,qDAAW;AAC7B,kBAAkB,mBAAO,CAAC,qEAAmB;;AAE7C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC;AACpC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAkB,OAAO;AACzB;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;AC5GA,UAAU,mBAAO,CAAC,qDAAW;AAC7B,kBAAkB,mBAAO,CAAC,qEAAmB;;AAE7C;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;;AC5BA;AACA;AACA;AACA;AACa;;AAEb,uHAA8C;;;;;;;;;;;ACNjC;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,+BAA+B,GAAG,4BAA4B,GAAG,4BAA4B;AAC7F,cAAc,mBAAO,CAAC,mEAAO;AAC7B;AACA;AACA,cAAc,mBAAO,CAAC,0EAAe;AACrC,aAAa,mBAAO,CAAC,0EAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,+BAA+B;;;;;;;;;;;;AC3ElB;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,cAAc,mBAAO,CAAC,0EAAe;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sHAAsH,SAAS;AAC/H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,0HAA0H,gBAAgB;AAC1I;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,qBAAqB;AACrB,SAAS;AACT;AACA;AACA,qBAAqB;AACrB,SAAS;AACT;AACA;AACA,qBAAqB;AACrB,SAAS;AA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,mBAAO,CAAC,wEAAU;AACnC;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wBAAwB,yBAAyB,yBAAyB;AAC3E;AACA;AACA,aAAa,YAAY;AACzB,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;;;;;;;;;;;;AC/FlB;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,+BAA+B,GAAG,yBAAyB,GAAG,uBAAuB,GAAG,4BAA4B,GAAG,kCAAkC,GAAG,oCAAoC,GAAG,2CAA2C,GAAG,sCAAsC,GAAG,0BAA0B,GAAG,uBAAuB,GAAG,wBAAwB,GAAG,4BAA4B,GAAG,4BAA4B,GAAG,mBAAmB,GAAG,mBAAmB,GAAG,aAAa,GAAG,kBAAkB,GAAG,oBAAoB,GAAG,qBAAqB;AACviB,cAAc,mBAAO,CAAC,kEAAO;AAC7B,WAAW,mBAAO,CAAC,gEAAM;AACzB,mBAAmB,mBAAO,CAAC,4EAAY;AACvC,oBAAoB,mBAAO,CAAC,8EAAa;AACzC,iBAAiB,mBAAO,CAAC,wEAAU;AACnC,uBAAuB,mBAAO,CAAC,oFAAgB;AAC/C;AACA;AACA;AACA,CAAC,gDAAgD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oBAAoB,qBAAqB,qBAAqB;AAC/D;AACA;AACA;AACA,CAAC,oDAAoD;AACrD;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gDAAgD;AACjD,kBAAkB;AAClB,oBAAoB;AACpB,mBAAmB;AACnB,mBAAmB;AACnB;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,YAAY,aAAa,aAAa;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kBAAkB,mBAAmB,mBAAmB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,YAAY,aAAa,aAAa;AACvC;AACA;AACA;AACA;AACA,CAAC,kBAAkB,mBAAmB,mBAAmB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kBAAkB,mBAAmB,mBAAmB;AACzD;AACA;AACA;AACA,CAAC,2BAA2B,4BAA4B,4BAA4B;AACpF;AACA;AACA;AACA,CAAC,2BAA2B,4BAA4B,4BAA4B;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,uBAAuB,wBAAwB,wBAAwB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,yBAAyB,0BAA0B,0BAA0B;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qCAAqC,sCAAsC,sCAAsC;AAClH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,0CAA0C,2CAA2C,2CAA2C;AACjI;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC,mCAAmC,oCAAoC,oCAAoC;AAC5G;AACA;AACA;AACA;AACA,oEAAoE,IAAI;AACxE,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC,iCAAiC,kCAAkC,kCAAkC;AACtG;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC,2BAA2B,4BAA4B,4BAA4B;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sBAAsB,uBAAuB,uBAAuB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wBAAwB,yBAAyB,yBAAyB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,0CAA0C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oHAAoH,uBAAuB,UAAU,qBAAqB;AAC1K;AACA;AACA;AACA;AACA;AACA;AACA,oHAAoH,uBAAuB;AAC3I;AACA;AACA;AACA;AACA;AACA;AACA,oHAAoH,uBAAuB;AAC3I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,oHAAoH,uBAAuB,uBAAuB,cAAc;AAChL;AACA;AACA,oHAAoH,uBAAuB;AAC3I;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4GAA4G,uBAAuB,uBAAuB,cAAc;AACxK;AACA;AACA,4GAA4G,uBAAuB;AACnI;AACA;AACA;AACA;AACA,8GAA8G,sBAAsB;AACpI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,oDAAoD;AACtI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,uBAAuB,yBAAyB,cAAc;AACxH;AACA;AACA,0DAA0D,uBAAuB;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,gBAAgB,UAAU,qBAAqB;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,oCAAoC;AACtF;AACA;AACA;AACA;AACA,iEAAiE,gBAAgB;AACjF;AACA;AACA,iEAAiE,gBAAgB,UAAU,qBAAqB,sBAAsB,eAAe;AACrJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,gBAAgB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,eAAe,yBAAyB,cAAc;AAChH;AACA;AACA,0DAA0D,eAAe;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kGAAkG,iCAAiC;AACnI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,+BAA+B;AACjE;AACA,2CAA2C,gBAAgB,KAAK,WAAW;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,+BAA+B;AACrE;AACA;AACA;AACA;AACA;AACA,gDAAgD,eAAe;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,mCAAmC;AAC7E;AACA;AACA;AACA,0CAA0C,+BAA+B;AACzE;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ,KAAK,WAAW,8BAA8B,uBAAuB;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,+BAA+B;AACjE;AACA,4CAA4C,gBAAgB,KAAK,WAAW;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,+BAA+B;AACrE;AACA;AACA;AACA;AACA;AACA,iDAAiD,eAAe;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,mCAAmC;AAC7E;AACA;AACA;AACA,0CAA0C,+BAA+B;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,uBAAuB,GAAG,mBAAmB;AAC/G,iDAAiD,wBAAwB,KAAK,WAAW,QAAQ,wCAAwC,KAAK,MAAM;AACpJ;AACA;AACA,gDAAgD,YAAY;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,+BAA+B;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,yCAAyC;AACzE;AACA;AACA;AACA,gDAAgD,oBAAoB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,gBAAgB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,0BAA0B;AAC/E;AACA;AACA;AACA,4DAA4D,eAAe;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,8DAA8D,OAAO;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,4EAA4E,cAAc;AAC1F,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,gBAAgB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wGAAwG,GAAG;AAC3G;AACA;AACA;AACA;AACA,+EAA+E,IAAI;AACnF,yBAAyB;AACzB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,mCAAmC;AACnF;AACA;AACA;AACA;AACA;AACA,uDAAuD,eAAe;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,+BAA+B;AAC9G;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,+BAA+B;;;;;;;;;;;;AC3rClB;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,iBAAiB,kBAAkB,kBAAkB;;;;;;;;;;;;ACfzC;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,eAAe,GAAG,aAAa;AAC/B,cAAc,mBAAO,CAAC,kEAAO;AAC7B;AACA;AACA,0BAA0B;AAC1B,+BAA+B;AAC/B,CAAC,YAAY,aAAa,aAAa;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,+CAA+C;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,SAAS;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,SAAS;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;;;;;;;;;;;;AC/Ha;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,aAAa,GAAG,YAAY,GAAG,aAAa,GAAG,cAAc,GAAG,cAAc,GAAG,eAAe;AACtH;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,mBAAmB;;;;;;;;;;;;AClCN;AACb;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB,GAAG,iBAAiB,GAAG,aAAa;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,YAAY,aAAa,aAAa;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;;;;;;;;;;;;AC7YH;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,wBAAwB;AAChD;AACA;AACA;AACA,yFAAyF,OAAO;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;;;;;;;;;;;;ACvJhB;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mCAAmC,GAAG,6BAA6B,GAAG,qBAAqB;AAC3F,cAAc,mBAAO,CAAC,kEAAO;AAC7B,WAAW,mBAAO,CAAC,gEAAM;AACzB,iBAAiB,mBAAO,CAAC,wEAAU;AACnC,oBAAoB,mBAAO,CAAC,8EAAa;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oBAAoB,qBAAqB,qBAAqB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,qDAAqD;AACpH;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,CAAC,oEAAoE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oGAAoG,4CAA4C;AAChJ;AACA;AACA;AACA;AACA,+FAA+F,cAAc;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,2CAA2C;AACrF;AACA;AACA,SAAS;AACT;AACA;AACA,mCAAmC;;;;;;;;;;;;ACpMtB;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oCAAoC,GAAG,6BAA6B,GAAG,qBAAqB;AAC5F,cAAc,mBAAO,CAAC,kEAAO;AAC7B,WAAW,mBAAO,CAAC,gEAAM;AACzB,oBAAoB,mBAAO,CAAC,8EAAa;AACzC,iBAAiB,mBAAO,CAAC,wEAAU;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oBAAoB,qBAAqB,qBAAqB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,qDAAqD;AACpH;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,CAAC,oEAAoE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;;;;;;;;;;;;AClHvB;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,eAAe,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,wBAAwB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,mBAAmB,GAAG,oBAAoB,GAAG,gCAAgC,GAAG,2BAA2B,GAAG,qBAAqB,GAAG,kBAAkB;AAC5qB,WAAW,mBAAO,CAAC,gEAAM;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,iBAAiB,kBAAkB,kBAAkB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,cAAc,eAAe,eAAe;;;;;;;;;;;;ACjThC;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kBAAkB;AACnB,kBAAe;;;;;;;;;;;;ACtBF;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,cAAc,mBAAO,CAAC,kEAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,wBAAwB;AACzD;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;;;;;;;;;;;ACnEJ;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mCAAmC,GAAG,iCAAiC;AACvE,uBAAuB,mBAAO,CAAC,oFAAgB;AAC/C;AACA;AACA;AACA;AACA,CAAC,8CAA8C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;;;;;;;;;;;;AC3EtB;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,+BAA+B,GAAG,mCAAmC,GAAG,mCAAmC,GAAG,iCAAiC,GAAG,iCAAiC,GAAG,8BAA8B,GAAG,2BAA2B,GAAG,2BAA2B,GAAG,2BAA2B,GAAG,2BAA2B,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,wBAAwB,GAAG,wBAAwB;AAC1b;AACA;AACA;AACA;AACA,cAAc,mBAAO,CAAC,gEAAO;AAC7B;AACA;AACA,aAAa,mBAAO,CAAC,kBAAM;AAC3B,WAAW,mBAAO,CAAC,cAAI;AACvB,iBAAiB,mBAAO,CAAC,sBAAQ;AACjC,cAAc,mBAAO,CAAC,gBAAK;AAC3B,cAAc,mBAAO,CAAC,0EAAe;AACrC,aAAa,mBAAO,CAAC,0EAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,aAAa;AAC3D;AACA;AACA;AACA,0DAA0D,aAAa;AACvE;AACA;AACA,kDAAkD,aAAa;AAC/D;AACA;AACA;AACA,kEAAkE,OAAO,mBAAmB,OAAO;AACnG;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,qCAAqC;AACrC,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,qCAAqC;AACrC,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,+BAA+B;;;;;;;;;;;;AChQlB;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,eAAe,mBAAO,CAAC,kBAAM;AAC7B,cAAc,mBAAO,CAAC,0EAAe;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,qBAAqB;AACrB,SAAS;AACT;AACA;AACA,qBAAqB;AACrB,SAAS;AACT;AACA;AACA,qBAAqB;AACrB;AACA,KAAK;AACL,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kBAAkB;AACnB,kBAAe;;;;;;;;;;;;AChKf;AACA;AACA;AACA;AACa;;AAEb,iHAA2C;;;;;;;;;;;ACN9B;;AAEb;AACA,sGAAoC;;AAEpC;AACA,4HAA0D;;;;;;;;;;;;ACN7C;;AAEb,aAAa,mBAAO,CAAC,kBAAM;AAC3B,QAAQ,QAAQ,EAAE,mBAAO,CAAC,4DAAa;AACvC,wBAAwB,mBAAO,CAAC,gEAAU;;AAE1C;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB;;AAEA,0FAA0F;AAC1F;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,UAAU;AACrB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,UAAU;AACrB,aAAa,OAAO;AACpB;AACA;AACA;AACA,kBAAkB,mBAAmB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,OAAO,qBAAqB;AAC5B;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtHa;;AAEb,aAAa,mBAAO,CAAC,kBAAM;AAC3B,iBAAiB,mBAAO,CAAC,0IAAyC;AAClE,QAAQ,QAAQ,EAAE,mBAAO,CAAC,4DAAa;;AAEvC;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,KAAK,kBAAkB;AACvB,WAAW,UAAU;AACrB;AACA,WAAW,UAAU;AACrB;AACA,8EAA8E;AAC9E,wBAAwB,wDAAwD;;AAEhF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,UAAU;AACrB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,0DAA0D;AAC1D,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,UAAU;AACrB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,mBAAmB;AACrC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,WAAW;AAC9D,YAAY,wBAAwB;AACpC,YAAY,kBAAkB;AAC9B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClNY;;AAEZ;AACA,gJAA6C;;;;;;;;;;;;ACHjC;;AAEZ,QAAQ,gBAAgB,EAAE,mBAAO,CAAC,yHAAwB;AAC1D,QAAQ,oBAAoB,EAAE,mBAAO,CAAC,+GAAmB;AACzD,QAAQ,sDAAsD,EAAE,mBAAO,CAAC,gHAAS;AACjF,YAAY,mBAAO,CAAC,gIAAiB;AACrC,QAAQ,uBAAuB;AAC/B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,IAAI;AACJ,2CAA2C,mJAA2C;AACtF;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnDY;;AAEZ,QAAQ,2EAA2E,EAAE,mBAAO,CAAC,yHAAwB;AACrH,QAAQ,SAAS,EAAE,mBAAO,CAAC,sBAAQ;AACnC,QAAQ,UAAU,EAAE,mBAAO,CAAC,2GAAiB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,GAAG;AAC/B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;;;;;;AC5JY;;AAEZ,QAAQ,WAAW,EAAE,mBAAO,CAAC,sHAAY;AACzC,eAAe,mBAAO,CAAC,kHAAU;AACjC,QAAQ,YAAY,EAAE,mBAAO,CAAC,oHAAW;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,EAAE,mBAAO,CAAC,gHAAS;AACrB;AACA;AACA,WAAW;AACX,EAAE,EAAE,mBAAO,CAAC,+GAAmB;AAC/B,YAAY,mBAAO,CAAC,gIAAiB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,oBAAoB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,EAAE;AACnD;AACA;AACA,iDAAiD,EAAE;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,oBAAoB,cAAc;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACjMY;;AAEZ;;AAEA,gBAAgB,mBAAO,CAAC,qDAAU;;AAElC;;AAEA;AACA;AACA,WAAW,uBAAuB;AAClC;AACA,EAAE,EAAE,mBAAO,CAAC,+GAAmB;AAC/B,QAAQ,SAAS,EAAE,mBAAO,CAAC,yHAAwB;AACnD,QAAQ,yDAAyD,EAAE,mBAAO,CAAC,gHAAS;AACpF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACjSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEY;;AAEZ;AACA;AACA;AACA;AACA;AACA,EAAE,EAAE,mBAAO,CAAC,yHAAwB;AACpC;AACA,iBAAiB,mBAAO,CAAC,sHAAY;AACrC,iBAAiB,mBAAO,CAAC,sHAAY;AACrC;AACA;AACA;AACA;AACA;AACA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mBAAO,CAAC,wHAAa;AACrC;AACA;AACA;;;;;;;;;;;AC9IA;;AAEA,gBAAgB,mBAAO,CAAC,qDAAU;;AAElC;;AAEA,CAAC;AACD,qBAAqB,mBAAO,CAAC,sBAAQ;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,EAAE,mBAAO,CAAC,gHAAS;AACrB,YAAY,mBAAO,CAAC,gIAAiB;AACrC;AACA;AACA,WAAW;AACX,EAAE,EAAE,mBAAO,CAAC,+GAAmB;AAC/B,QAAQ,YAAY,EAAE,mBAAO,CAAC,oHAAW;AACzC,eAAe,mBAAO,CAAC,kHAAU;AACjC,iBAAiB,mBAAO,CAAC,sHAAY;AACrC,iBAAiB,mBAAO,CAAC,sHAAY;AACrC,QAAQ,wBAAwB,EAAE,mBAAO,CAAC,2GAAiB;AAC3D,aAAa,mBAAO,CAAC,8GAAQ;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,6HAA2C;AACjG,QAAQ,wBAAwB,EAAE,mBAAO,CAAC,yHAAwB;;AAElE;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,YAAY,+BAA+B;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,qBAAqB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,mBAAmB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,kBAAkB;AAClC;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS,GAAG,mBAAmB;AAC/B;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACzXA;;AAEA,gBAAgB,mBAAO,CAAC,qDAAU;;AAElC;AACA;AACA;;AAEA,CAAC;AACD,QAAQ,oBAAoB,EAAE,mBAAO,CAAC,+GAAmB;AACzD,QAAQ,mDAAmD;AAC3D,QAAQ,qBAAqB,EAAE,mBAAO,CAAC,2GAAiB;AACxD,QAAQ,yEAAyE,EAAE,mBAAO,CAAC,mHAAe;AAC1G,QAAQ,+CAA+C,EAAE,mBAAO,CAAC,yHAAwB;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,EAAE,mBAAO,CAAC,gHAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,MAAM;AACN,6CAA6C,mJAA2C;AACxF;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,MAAM;AACN,6CAA6C,mJAA2C;AACxF;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,uBAAuB;;;;;;;;;;;;AC3RX;;AAEZ;;AAEA,gBAAgB,mBAAO,CAAC,qDAAU;;AAElC;;AAEA,QAAQ,4DAA4D,EAAE,mBAAO,CAAC,yHAAwB;AACtG,QAAQ,SAAS,EAAE,mBAAO,CAAC,sBAAQ;AACnC,QAAQ,+CAA+C,EAAE,4IAAkC;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,cAAc;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,gBAAgB,cAAc;AAC9B;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACjGY;;AAEZ,QAAQ,qCAAqC,EAAE,mBAAO,CAAC,yHAAwB;AAC/E,QAAQ,mBAAmB,EAAE,mBAAO,CAAC,sBAAQ;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACxFY;;AAEZ,sDAAsD,6HAA2C;AACjG;AACA,WAAW,iFAAiF;AAC5F;AACA,EAAE,EAAE,mBAAO,CAAC,+GAAmB;AAC/B,QAAQ,uDAAuD,EAAE,mBAAO,CAAC,mHAAe;AACxF,qBAAqB,uJAAwC;AAC7D,+BAA+B,uJAAwC;AACvE,QAAQ,WAAW,EAAE,mBAAO,CAAC,gIAAiB;AAC9C,sBAAsB,mBAAO,CAAC,oHAAW;AACzC,QAAQ,2BAA2B,EAAE,mBAAO,CAAC,sIAAoB;AACjE,QAAQ,2BAA2B,EAAE,mBAAO,CAAC,gHAAS;AACtD,QAAQ,YAAY,EAAE,mBAAO,CAAC,2GAAiB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,EAAE,mBAAO,CAAC,yHAAwB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,iJAAyC;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACxcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEY;;AAEZ,QAAQ,uBAAuB,EAAE,mBAAO,CAAC,yHAAwB;AACjE;AACA,kBAAkB,mBAAO,CAAC,wHAAa;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACtCA;;AAEA,gBAAgB,mBAAO,CAAC,qDAAU;;AAElC;AACA;AACA;;AAEA,CAAC;AACD,QAAQ,4DAA4D,EAAE,mBAAO,CAAC,yHAAwB;AACtG,YAAY,mBAAO,CAAC,gIAAiB;AACrC,QAAQ,OAAO,EAAE,mBAAO,CAAC,2GAAiB;AAC1C,oBAAoB,mBAAO,CAAC,oHAAW;AACvC,eAAe,mBAAO,CAAC,kHAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,EAAE,EAAE,mBAAO,CAAC,+GAAmB;AAC/B,QAAQ,wCAAwC,EAAE,mBAAO,CAAC,mHAAe;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,EAAE,mBAAO,CAAC,gHAAS;AACrB,sDAAsD,6HAA2C;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,mBAAO,CAAC,sHAAY;AACnC;AACA;AACA;AACA,wDAAwD,KAAK;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,uDAAuD,KAAK;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,mJAA2C;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,oBAAoB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,2EAA2E,MAAM;AACjF;AACA,QAAQ;AACR;AACA;AACA,wBAAwB,mBAAO,CAAC,4HAAe;AAC/C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,WAAW;AACX,UAAU;AACV;AACA;AACA;AACA;AACA,WAAW;AACX,UAAU;AACV;AACA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,SAAS;AACT,QAAQ;AACR;AACA;AACA;AACA,SAAS;AACT,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,SAAS;AACT,QAAQ;AACR;AACA;AACA;AACA,SAAS;AACT,QAAQ;AACR;AACA;AACA;AACA,SAAS;AACT,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACtdA;;AAEA,gBAAgB,mBAAO,CAAC,qDAAU;;AAElC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,EAAE,mBAAO,CAAC,yHAAwB;AACpC;AACA;AACA,QAAQ,mBAAmB,EAAE,mBAAO,CAAC,sBAAQ;AAC7C,QAAQ,0BAA0B,EAAE,mBAAO,CAAC,kHAAU;AACtD,QAAQ,SAAS,EAAE,mBAAO,CAAC,sBAAQ;AACnC,QAAQ,iBAAiB,EAAE,mBAAO,CAAC,sIAAoB;AACvD,YAAY,mBAAO,CAAC,gIAAiB;AACrC,YAAY,2IAAmC;AAC/C;AACA,CAAC;AACD,mBAAmB,mBAAO,CAAC,4HAAe;AAC1C,oBAAoB,mBAAO,CAAC,oHAAW;AACvC,QAAQ,4CAA4C,EAAE,mBAAO,CAAC,gHAAS;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,EAAE,EAAE,mBAAO,CAAC,+GAAmB;AAC/B,QAAQ,iBAAiB,EAAE,mBAAO,CAAC,mHAAe;AAClD;AACA,QAAQ,gBAAgB,EAAE,mBAAO,CAAC,sCAAgB;AAClD,aAAa,mBAAO,CAAC,8GAAQ;AAC7B;AACA;AACA;AACA,QAAQ,iBAAiB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,mBAAO,CAAC,kHAAU;;AAEpF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mCAAmC,mBAAO,CAAC,kHAAU;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,uBAAuB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;ACvwCY;;AAEZ,QAAQ,6BAA6B,EAAE,mBAAO,CAAC,yHAAwB;AACvE,QAAQ,kBAAkB,EAAE,mBAAO,CAAC,mHAAe;AACnD,QAAQ,wBAAwB,EAAE,4IAAkC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,UAAU;AACnD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,aAAa;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEY;;AAEZ,QAAQ,+BAA+B,EAAE,mBAAO,CAAC,yHAAwB;AACzE;AACA,QAAQ,6BAA6B,EAAE,4IAAkC;AACzE,eAAe,mBAAO,CAAC,kHAAU;AACjC,QAAQ,mBAAmB,EAAE,mBAAO,CAAC,gHAAS;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnLY;;AAEZ,QAAQ,iDAAiD,EAAE,mBAAO,CAAC,yHAAwB;;AAE3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACxUA;;AAEA,gBAAgB,mBAAO,CAAC,qDAAU;;AAElC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,EAAE,mBAAO,CAAC,yHAAwB;AACpC;AACA;AACA,QAAQ,mBAAmB,EAAE,mBAAO,CAAC,sBAAQ;AAC7C,eAAe,gJAA0B;AACzC,QAAQ,SAAS,EAAE,mBAAO,CAAC,sBAAQ;AACnC,oBAAoB,mBAAO,CAAC,oHAAW;AACvC,QAAQ,iBAAiB,EAAE,mBAAO,CAAC,sIAAoB;AACvD,QAAQ,4CAA4C,EAAE,mBAAO,CAAC,gHAAS;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,EAAE,4IAAkC;AACtC,QAAQ,iBAAiB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,mBAAO,CAAC,kHAAU;;AAEpF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mCAAmC,mBAAO,CAAC,kHAAU;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,0BAA0B,0BAA0B;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oCAAoC,2BAA2B;AAC/D;AACA,YAAY,kBAAkB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,8BAA8B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU,sCAAsC;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,qBAAqB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,cAAc,4BAA4B;AAC1C;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,8BAA8B;AACpD;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,8BAA8B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AChzBA;;AAEY;;AAEZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,EAAE,mBAAO,CAAC,sHAAqB;AACjC;AACA;AACA,WAAW;AACX,EAAE,EAAE,mBAAO,CAAC,4GAAgB;AAC5B,QAAQ,oBAAoB,EAAE,mBAAO,CAAC,wGAAc;AACpD,QAAQ,qCAAqC,EAAE,qIAA6B;AAC5E;;AAEA;AACA,WAAW,GAAG;AACd,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA,WAAW,GAAG;AACd,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa;AACb;;AAEA,WAAW,iBAAiB;AAC5B;AACA;AACA;AACA,yEAAyE,KAAK,QAAQ,IAAI;AAC1F,CAAC;;AAED;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa;AACb;;AAEA,WAAW,eAAe;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,KAAK,QAAQ,IAAI;AAC5D;AACA,CAAC;;AAED;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,WAAW,gBAAgB;AAC3B,aAAa;AACb;;AAEA,WAAW,gBAAgB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,KAAK,QAAQ,IAAI;AAC5D;AACA,CAAC;;AAED;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,aAAa;AACb;;AAEA,WAAW,gBAAgB;AAC3B;AACA;AACA;;AAEA;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa;AACb;;AAEA,WAAW,gBAAgB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,oBAAoB,IAAI,OAAO,EAAE,yCAAyC,EAAE,oBAAoB,IAAI,OAAO;AACpH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,WAAW,KAAK;AAChB;;AAEA,WAAW,eAAe;AAC1B;AACA;AACA;AACA,mEAAmE,EAAE;AACrE;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,aAAa;AACb;;AAEA,WAAW,iBAAiB;AAC5B;AACA;AACA;;AAEA;AACA,WAAW,KAAK;AAChB,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA,MAAM;AACN;;AAEA,WAAW,gBAAgB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB;AACA;AACA;;AAEA,WAAW,oBAAoB;AAC/B;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa;AACb;;AAEA,WAAW,eAAe;AAC1B;AACA;AACA;AACA;AACA;AACA,0CAA0C,UAAU;AACpD;AACA;AACA,CAAC;;AAED;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,aAAa;AACb;;AAEA,WAAW,qBAAqB;AAChC;AACA;AACA,kBAAkB,kBAAkB;AACpC,gCAAgC,KAAK,GAAG,EAAE;AAC1C;AACA;;AAEA;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,aAAa;AACb;;AAEA,WAAW,sBAAsB;AACjC;AACA;AACA,kBAAkB,kBAAkB;AACpC,iCAAiC,KAAK,GAAG,EAAE;AAC3C;AACA;;AAEA;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,aAAa;AACb;;AAEA,WAAW,0BAA0B;AACrC;AACA;AACA,kBAAkB,kBAAkB;AACpC;AACA,2BAA2B,KAAK,GAAG,EAAE;AACrC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,aAAa;AACb;;AAEA,WAAW,gBAAgB;AAC3B;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA,2FAA2F,OAAO;AAClG;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB;;AAEA,WAAW,qBAAqB;AAChC;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,aAAa;AACb;;AAEA,WAAW,kBAAkB;AAC7B;AACA;AACA,CAAC;;AAED;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,aAAa;AACb;;AAEA,WAAW,uBAAuB;AAClC;AACA;AACA,CAAC;;AAED;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,aAAa;AACb;;AAEA,WAAW,mBAAmB;AAC9B;AACA;AACA,CAAC;;AAED;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,WAAW,KAAK;AAChB;AACA;AACA;AACA,8CAA8C,+BAA+B;AAC7E;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,4CAA4C,MAAM,gBAAgB;;AAElE;AACA,WAAW,KAAK;AAChB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,aAAa;AACzE;AACA;AACA;;AAEA;AACA,WAAW,KAAK;AAChB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,aAAa;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACjhBY;;AAEZ,QAAQ,wDAAwD,EAAE,mBAAO,CAAC,kGAAQ;;AAElF;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS,gBAAgB;AACzB,cAAc,oBAAoB,EAAE,IAAI;AACxC;AACA,YAAY,gBAAgB,EAAE,IAAI;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAM,iCAAiC,YAAY,sCAAsC,WAAW;AACnH;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,MAAM,iCAAiC,YAAY,sCAAsC,eAAe;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,WAAW,GAAG,KAAK,KAAK,aAAa;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,kBAAkB,WAAW,GAAG,KAAK,KAAK,aAAa;AACvD,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,MAAM;AACtB,MAAM;AACN,iBAAiB,KAAK,IAAI,8CAA8C;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,SAAS;AACrC;AACA;AACA,gCAAgC,UAAU,KAAK,SAAS;AACxD;AACA;AACA;AACA,gCAAgC,iBAAiB,OAAO,KAAK;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,aAAa;AAChD;AACA;AACA,mCAAmC,cAAc,KAAK,aAAa;AACnE;AACA;AACA;AACA,mCAAmC,qBAAqB,OAAO,KAAK;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,SAAS;AAC3B;AACA;AACA,yBAAyB,UAAU,KAAK,SAAS;AACjD;AACA;AACA;AACA,yBAAyB,iBAAiB,OAAO,KAAK;AACtD;AACA;AACA;AACA,2BAA2B,OAAO;AAClC,MAAM;AACN,oCAAoC,YAAY;AAChD,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,wBAAwB;AACpE,QAAQ;AACR;AACA;AACA,SAAS;AACT,6BAA6B,UAAU;AACvC;AACA,MAAM;AACN;AACA;AACA,OAAO;AACP;AACA,uBAAuB,uBAAuB;AAC9C;AACA,gCAAgC,eAAe,GAAG,UAAU;AAC5D;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,MAAM,GAAG,KAAK,IAAI,OAAO,aAAa,UAAU;AAClE,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD,kBAAkB,aAAa;AAC/B,uBAAuB,OAAO,2BAA2B,KAAK,0BAA0B,KAAK;AAC7F,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,EAAE;AAClE;AACA;AACA,sBAAsB,SAAS;AAC/B;AACA;AACA,sBAAsB,SAAS,MAAM,SAAS;AAC9C;AACA;AACA;AACA;AACA,wBAAwB,gBAAgB,QAAQ,MAAM;AACtD;AACA;AACA;AACA,cAAc,KAAK;AACnB,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,4BAA4B,IAAI,gCAAgC,MAAM,aAAa,SAAS;AAC5F,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACpVY;;AAEZ;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;;AC1GY;;AAEZ,qBAAqB,mBAAO,CAAC,sBAAQ;AACrC,QAAQ,wCAAwC,EAAE,mBAAO,CAAC,gHAAe;AACzE,8CAA8C,yHAAuC;AACrF,sDAAsD,6HAA2C;AACjG,gEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gEAAgE,cAAc;AAC9E;AACA;AACA,oBAAoB,mBAAmB;AACvC,wBAAwB,gBAAgB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,kBAAkB,QAAQ;AAC1B,QAAQ;AACR;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,MAAM;AAC7B,YAAY,oDAAoD;AAChE,wBAAwB,MAAM;AAC9B;AACA;AACA,mBAAmB,MAAM;AACzB;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,kBAAkB,cAAc;AAChC;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA,IAAI,8DAAkC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;;;;;;;;;;;ACvM/B;;AAEA,QAAQ,SAAS,EAAE,mBAAO,CAAC,sBAAQ;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;AACD,QAAQ,iDAAiD,EAAE,mBAAO,CAAC,qHAAoB;AACvF;AACA,eAAe;AACf,EAAE,EAAE,mBAAO,CAAC,uGAAa;AACzB,QAAQ,sDAAsD,EAAE,mBAAO,CAAC,yIAA8B;AACtG;AACA,WAAW;AACX,EAAE,EAAE,mBAAO,CAAC,2GAAe;AAC3B,gBAAgB,mBAAO,CAAC,qIAA4B;AACpD,QAAQ,mDAAmD,EAAE,mBAAO,CAAC,iIAA0B;AAC/F,QAAQ,WAAW,EAAE,mBAAO,CAAC,uIAA6B;AAC1D,QAAQ,YAAY,EAAE,mBAAO,CAAC,qIAA4B;AAC1D,YAAY,mBAAO,CAAC,iJAAkC;AACtD;AACA,iBAAiB,mBAAO,CAAC,mHAAmB;AAC5C,cAAc,mBAAO,CAAC,iIAA0B;AAChD,gBAAgB,gLAA4D;AAC5E;AACA;AACA;AACA;AACA;AACA,kBAAkB,mBAAO,CAAC,uIAA6B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,kBAAkB,mBAAO,CAAC,uIAA6B;AACvD,gBAAgB,mBAAO,CAAC,mIAA2B;AACnD,mBAAmB,mBAAO,CAAC,yIAA8B;AACzD,qBAAqB,mBAAO,CAAC,6IAAgC;AAC7D;AACA,QAAQ,iBAAiB,EAAE,mBAAO,CAAC,uJAAqC;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC5IY;;AAEZ,QAAQ,6BAA6B,EAAE,mBAAO,CAAC,sHAAqB;AACpE,QAAQ,wCAAwC,EAAE,mBAAO,CAAC,kIAA2B;AACrF,QAAQ,mBAAmB,EAAE,mBAAO,CAAC,wIAA8B;AACnE,QAAQ,WAAW,EAAE,mBAAO,CAAC,kJAAmC;AAChE,mBAAO,CAAC,4GAAqB;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC1CA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,gBAAgB,mBAAO,CAAC,oDAAS;AACjC,QAAQ,OAAO,EAAE,mBAAO,CAAC,0EAAkB;;AAE3C;AACA;AACA,UAAU;AACV;AACA,+GAAoD;AACpD;AACA;AACA,UAAU;AACV;AACA,kIAAoD;AACpD;AACA;AACA,UAAU;AACV;AACA,sHAA4C;AAC5C;AACA;AACA,UAAU;AACV;AACA,iBAAiB;AACjB;AACA;AACA,UAAU;AACV;AACA,cAAc;AACd;AACA;AACA,UAAU;AACV;AACA,oIAAyD;AACzD;AACA;AACA,UAAU;AACV;AACA,gHAA4C;AAC5C;AACA;AACA,UAAU;AACV;AACA,gJAAiE;AACjE;AACA;AACA,UAAU;AACV;AACA,gJAAiE;AACjE;AACA;AACA,UAAU;AACV;AACA,yHAAkD;AAClD;AACA;AACA,UAAU;AACV;AACA,iHAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA,yCAAwC;AACxC;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,CAAC,EAAC;;AAEF;AACA;AACA;AACA,UAAU;AACV;AACA,8CAA6C;AAC7C;AACA;AACA;AACA,CAAC,EAAC;;AAEF;AACA;AACA;AACA,UAAU;AACV;AACA,8CAA6C;AAC7C;AACA;AACA;AACA,CAAC,EAAC;;AAEF;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAED;AACA;AACA,UAAU;AACV;AACA,2CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAC;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC7LA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,QAAQ,SAAS,EAAE,mBAAO,CAAC,kBAAM;;AAEjC;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,YAAY;AACZ;AACA;AACA,gCAAgC,KAAK;AACrC;AACA,GAAG;AACH;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;;;;;;;;;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,gBAAgB,mBAAO,CAAC,oDAAS;AACjC,QAAQ,UAAU,EAAE,mBAAO,CAAC,4DAAa;;AAEzC;AACA;AACA,UAAU;AACV;AACA,WAAW;;AAEX;AACA;AACA,UAAU;AACV;AACA,WAAW;;AAEX;AACA;AACA,UAAU;AACV;AACA,cAAc;;AAEd;AACA;AACA,UAAU;AACV;AACA,iBAAiB;;;;;;;;;;;;AClCjB;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,qBAAqB,mBAAO,CAAC,gFAAiB;;AAE9C;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS,WAAW;AACjC;AACA,0BAA0B;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB,aAAa,SAAS;AACtB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB,aAAa,SAAS;AACtB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,SAAS;AACtB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAa,SAAS;AACtB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,SAAS;AACtB;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrHA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,QAAQ,QAAQ,EAAE,mBAAO,CAAC,4DAAa;AACvC,eAAe,mBAAO,CAAC,wEAAU;AACjC,eAAe,mBAAO,CAAC,kEAAU;AACjC,cAAc,mBAAO,CAAC,6EAAmB;;AAEzC;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,QAAQ;AACrB;AACA,oCAAoC;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY;AACZ,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mEAAmE,SAAS;AAC5E;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;;;;;;;;;;;ACvGA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,WAAW,mBAAO,CAAC,cAAI;AACvB,qBAAqB,mBAAO,CAAC,+EAAe;AAC5C,cAAc,mBAAO,CAAC,6EAAmB;AACzC,aAAa,mBAAO,CAAC,sDAAU;AAC/B,mBAAmB,mBAAO,CAAC,sEAAa;AACxC,wBAAwB,mBAAO,CAAC,sFAAoB;;AAEpD;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8BAA8B,kCAAkC;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,aAAa,WAAW;AACxB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;;;;;;ACpPA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,QAAQ,WAAW,EAAE,mBAAO,CAAC,4FAAiB;;AAE9C;AACA;AACA,UAAU;AACV,aAAa;AACb;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,aAAa,kBAAkB;AAC/B;AACA;AACA,YAAY,kBAAkB;;AAE9B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;ACrDA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,QAAQ,oBAAoB,EAAE,mBAAO,CAAC,4FAAiB;AACvD,qBAAqB,mBAAO,CAAC,+EAAe;AAC5C,QAAQ,eAAe,EAAE,mBAAO,CAAC,4DAAa;AAC9C,iBAAiB,mBAAO,CAAC,6EAAW;AACpC,yBAAyB,mBAAO,CAAC,wFAAqB;AACtD,yBAAyB,mBAAO,CAAC,wFAAqB;AACtD,8BAA8B,mBAAO,CAAC,gFAA0B;AAChE,iBAAiB,mBAAO,CAAC,sEAAY;AACrC,QAAQ,OAAO,EAAE,mBAAO,CAAC,kEAAU;AACnC,eAAe,mBAAO,CAAC,wEAAU;;AAEjC;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA,UAAU;AACV,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB;AACA;AACA,YAAY,kBAAkB;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,IAAI;AACR;AACA;AACA;AACA;;AAEA;AACA,2CAA2C,mBAAO,CAAC,wDAAc;;AAEjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,kEAAkE;AAC/E;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,eAAe,QAAQ;AACvB;AACA;AACA;AACA,4CAA4C,cAAc;AAC1D;AACA;AACA;AACA,wDAAwD,kBAAkB;AAC1E;AACA;AACA,qBAAqB,qDAAqD;AAC1E,qBAAqB,wDAAwD;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAc;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,SAAS;;AAET,4CAA4C,cAAc,EAAE,aAAa;AACzE;;AAEA;AACA;AACA;AACA;;AAEA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,WAAW;AACjD;;AAEA;AACA;AACA,8DAA8D,kBAAkB;AAChF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wCAAwC,qBAAqB;;AAE7D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY,QAAQ,WAAW;AAC/B,eAAe,QAAQ;AACvB;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;;AAEP;AACA;;AAEA;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,YAAY,QAAQ;AACpB;AACA;AACA,CAAC;;AAED;;;;;;;;;;;;ACnqBA;AACA;AACA;AACA;AACA;AACA;;AAEa;AACb;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA,mBAAmB,mBAAO,CAAC,kEAAU;AACrC;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,WAAW,mBAAO,CAAC,cAAI;AACvB,qBAAqB,mBAAO,CAAC,+EAAe;AAC5C,cAAc,mBAAO,CAAC,6EAAmB;AACzC,aAAa,mBAAO,CAAC,sDAAU;AAC/B,mBAAmB,mBAAO,CAAC,sEAAa;AACxC,wBAAwB,mBAAO,CAAC,sFAAoB;;AAEpD;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+BAA+B,gCAAgC;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,aAAa,WAAW;AACxB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;;;;;;AC1PA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,QAAQ,WAAW,EAAE,mBAAO,CAAC,4FAAiB;;AAE9C;AACA;AACA,UAAU;AACV,aAAa;AACb;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,aAAa,kBAAkB;AAC/B;AACA;AACA,YAAY,kBAAkB;;AAE9B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;ACnDA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,WAAW,mBAAO,CAAC,cAAI;AACvB,QAAQ,gBAAgB,EAAE,mBAAO,CAAC,sCAAgB;AAClD,QAAQ,SAAS,EAAE,mBAAO,CAAC,4FAAiB;;AAE5C;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;AC3HA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,WAAW,mBAAO,CAAC,cAAI;AACvB,QAAQ,iBAAiB,EAAE,mBAAO,CAAC,4DAAa;AAChD,wBAAwB,mBAAO,CAAC,wEAAmB;;AAEnD;AACA;AACA,UAAU;AACV,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS,WAAW;AACjC;AACA,0BAA0B;AAC1B;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB,eAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iCAAiC,cAAc,EAAE,SAAS;AAC1D,QAAQ;AACR;AACA;AACA;;AAEA;AACA,oBAAoB;AACpB;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,iCAAiC,cAAc,EAAE,SAAS;AAC1D,QAAQ;AACR;AACA;AACA;;AAEA;AACA,oBAAoB;AACpB;AACA;AACA;;AAEA;AACA;AACA,+BAA+B,cAAc,EAAE,SAAS;AACxD,MAAM;AACN;AACA;AACA;;AAEA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,SAAS;AACtB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK,IAAI;AACT;AACA;;;;;;;;;;;;AC5HA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,WAAW,mBAAO,CAAC,cAAI;AACvB,aAAa,mBAAO,CAAC,kBAAM;AAC3B,oBAAoB,mBAAO,CAAC,6EAAc;AAC1C,aAAa,mBAAO,CAAC,kBAAM;AAC3B,QAAQ,UAAU,EAAE,mBAAO,CAAC,4DAAa;AACzC,QAAQ,sBAAsB,EAAE,mBAAO,CAAC,4FAAiB;AACzD,wBAAwB,mBAAO,CAAC,wEAAmB;AACnD,cAAc,mBAAO,CAAC,6EAAmB;AACzC,WAAW,mBAAO,CAAC,cAAI;AACvB,iBAAiB,mBAAO,CAAC,yEAAc;;AAEvC;AACA;AACA,UAAU;AACV,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA,0BAA0B;AAC1B;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wCAAwC,MAAM,MAAM,QAAQ;AAC5D;AACA,OAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,0CAA0C;AAC1C,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB,eAAe;AACf;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA,sBAAsB,cAAc,EAAE,SAAS;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+BAA+B,yBAAyB;AACxD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN,kBAAkB;AAClB;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS,IAAI;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,QAAQ;AACvB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,6BAA6B,UAAU;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA,aAAa,UAAU;AACvB,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,UAAU,EAAE,SAAS;AAC1C;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,aAAa,UAAU;AACvB,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,OAAO;AACtB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,gBAAgB;AAC7B,eAAe,gBAAgB;AAC/B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;;AAEA;AACA;AACA,aAAa,UAAU;AACvB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uCAAuC,SAAS,EAAE,IAAI,EAAE,IAAI;AAC5D,uCAAuC,SAAS,EAAE,IAAI,EAAE,IAAI;AAC5D;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS,EAAE,WAAW,EAAE,IAAI;AACvC,WAAW,SAAS,EAAE,IAAI;AAC1B;;AAEA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,SAAS,EAAE,SAAS,EAAE,IAAI,EAAE,SAAS;AAC7D;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oCAAoC,OAAO;AAC3C;AACA,0BAA0B,SAAS,EAAE,QAAQ,EAAE,IAAI,EAAE,SAAS;AAC9D;;AAEA;AACA;AACA;AACA;;AAEA,wBAAwB,SAAS,EAAE,EAAE,EAAE,IAAI,EAAE,SAAS;AACtD;AACA,SAAS;AACT,OAAO;AACP;;AAEA;AACA;AACA,mCAAmC,SAAS,EAAE,IAAI,EAAE,SAAS;AAC7D,mCAAmC,SAAS,GAAG,IAAI,EAAE,SAAS;AAC9D;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,8BAA8B,iBAAiB;AAC/C;AACA;AACA;AACA;;;;;;;;;;;;AC1vBA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,aAAa,mBAAO,CAAC,kBAAM;AAC3B,cAAc,mBAAO,CAAC,oBAAO;AAC7B,QAAQ,SAAS,EAAE,mBAAO,CAAC,4FAAiB;AAC5C,wBAAwB,mBAAO,CAAC,wEAAmB;AACnD,QAAQ,YAAY,EAAE,mBAAO,CAAC,gFAAuB;;AAErD;AACA;AACA,UAAU;AACV,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS,WAAW;AACjC;AACA;AACA,0BAA0B;AAC1B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB,eAAe;AACf;AACA;AACA;AACA;AACA,qDAAqD,eAAe;AACpE;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,qDAAqD,eAAe;AACpE;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,QAAQ;AACvB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,aAAa,OAAO;AACpB;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa,UAAU;AACvB,aAAa,SAAS;AACtB,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA,aAAa,UAAU;AACvB,aAAa,UAAU;AACvB,aAAa,SAAS;AACtB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,UAAU;AACvB,aAAa,SAAS;AACtB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,UAAU;AACvB,aAAa,UAAU;AACvB,aAAa,SAAS;AACtB,aAAa,QAAQ;AACrB;AACA;AACA;AACA,oCAAoC;AACpC;AACA,wCAAwC,YAAY;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,wBAAwB;AACxC;AACA,2DAA2D,cAAc,GAAG,cAAc;AAC1F;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,iCAAiC,iCAAiC;AAClE,KAAK;AACL;AACA;AACA;;;;;;;;;;;;ACrQA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA,UAAU;AACV;AACA,2CAA0C;AAC1C;AACA;AACA;AACA,WAAW,mBAAO,CAAC,+EAAW;AAC9B;AACA,CAAC,EAAC;;AAEF;AACA;AACA,UAAU;AACV;AACA,wCAAuC;AACvC;AACA;AACA;AACA,WAAW,mBAAO,CAAC,yEAAQ;AAC3B;AACA,CAAC,EAAC;;AAEF;AACA;AACA,UAAU;AACV;AACA,wCAAuC;AACvC;AACA;AACA;AACA,WAAW,mBAAO,CAAC,yEAAQ;AAC3B;AACA,CAAC,EAAC;;AAEF;AACA;AACA,UAAU;AACV;AACA,0CAAyC;AACzC;AACA;AACA;AACA,WAAW,mBAAO,CAAC,6EAAU;AAC7B;AACA,CAAC,EAAC;;;;;;;;;;;;ACvDF;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,iBAAiB,mBAAO,CAAC,6EAAW;AACpC,QAAQ,UAAU,EAAE,mBAAO,CAAC,4DAAa;AACzC,WAAW,mBAAO,CAAC,cAAI;AACvB,wBAAwB,mBAAO,CAAC,wEAAmB;;AAEnD;AACA;AACA,UAAU;AACV,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS,WAAW;AACjC;AACA,0BAA0B;AAC1B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;;AAEA,0BAA0B,cAAc,EAAE,SAAS;AACnD;AACA,kBAAkB;AAClB;AACA;AACA;AACA;;;;;;;;;;;;AC9Da;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAe;;AAEf,qBAAqB,mBAAO,CAAC,4GAA6B;;AAE1D;;AAEA,oBAAoB,mBAAO,CAAC,0GAA4B;;AAExD;;AAEA,iBAAiB,mBAAO,CAAC,oGAAyB;;AAElD,uCAAuC,uCAAuC;;AAE9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,8BAA8B,oBAAoB;AAClD,aAAa,eAAe;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,SAAS;AACT;AACA;AACA;;;;;;;;;;;ACrHa;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;;AAEF,mBAAmB,mBAAO,CAAC,wGAA2B;;AAEtD;;AAEA,iBAAiB,mBAAO,CAAC,oGAAyB;;AAElD;;AAEA,mBAAmB,mBAAO,CAAC,sFAAkB;;AAE7C;;AAEA,YAAY,mBAAO,CAAC,0FAAoB;;AAExC;;AAEA,gBAAgB,mBAAO,CAAC,kGAAwB;;AAEhD;;AAEA,iBAAiB,mBAAO,CAAC,oGAAyB;;AAElD;;AAEA,gBAAgB,mBAAO,CAAC,kGAAwB;;AAEhD;;AAEA,uCAAuC,uCAAuC;;AAE9E;AACA;AACA;AACA;AACA;AACA,UAAU,SAAS;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA,WAAW,gBAAgB;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,8BAA8B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,WAAW,qCAAqC;AAChD,WAAW,eAAe;AAC1B;AACA;AACA;AACA,WAAW,UAAU;AACrB;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,6BAA6B;AAC7B,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,gBAAgB;AAChB;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAe;AACf;;;;;;;;;;;ACxLa;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;;AAEF,oBAAoB,mBAAO,CAAC,wGAA2B;;AAEvD;;AAEA,iBAAiB,mBAAO,CAAC,oGAAyB;;AAElD;;AAEA,gBAAgB,mBAAO,CAAC,kGAAwB;;AAEhD;;AAEA,uCAAuC,uCAAuC;;AAE9E;AACA,0BAA0B,iCAAiC;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA,WAAW,qCAAqC;AAChD,WAAW,QAAQ;AACnB,WAAW,eAAe;AAC1B;AACA;AACA;AACA,WAAW,UAAU;AACrB;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA,kBAAe;AACf;;;;;;;;;;;AC9Ca;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;;AAEF,mBAAmB,mBAAO,CAAC,sFAAkB;;AAE7C;;AAEA,gBAAgB,mBAAO,CAAC,kGAAwB;;AAEhD;;AAEA,uCAAuC,uCAAuC;;AAE9E;AACA,0BAA0B,iCAAiC;AAC3D;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA,WAAW,qCAAqC;AAChD,WAAW,eAAe;AAC1B;AACA;AACA,WAAW,UAAU;AACrB;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA,kBAAe;AACf;;;;;;;;;;;ACtCa;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;;AAEF,cAAc,mBAAO,CAAC,4EAAa;;AAEnC;;AAEA,oBAAoB,mBAAO,CAAC,0GAA4B;;AAExD;;AAEA,iBAAiB,mBAAO,CAAC,oGAAyB;;AAElD;;AAEA,gBAAgB,mBAAO,CAAC,kGAAwB;;AAEhD;;AAEA,uCAAuC,uCAAuC;;AAE9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,qCAAqC;AAChD,WAAW,eAAe;AAC1B;AACA;AACA;AACA,WAAW,UAAU;AACrB;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAe;AACf;;;;;;;;;;;AChIa;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAe;;AAEf,iBAAiB,mBAAO,CAAC,2FAAgB;;AAEzC;;AAEA,uCAAuC,uCAAuC;;AAE9E;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iCAAiC,uBAAuB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;AC1Ea;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;;;;;;;;;;AC3Ba;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF;AACA;AACA;AACA,kBAAe;AACf;;;;;;;;;;;ACTa;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;;AAEF,YAAY,mBAAO,CAAC,iFAAW;;AAE/B;;AAEA,gBAAgB,mBAAO,CAAC,yFAAe;;AAEvC;;AAEA,gBAAgB,mBAAO,CAAC,yFAAe;;AAEvC;;AAEA,iBAAiB,mBAAO,CAAC,2FAAgB;;AAEzC,wBAAwB,mBAAO,CAAC,yGAAuB;;AAEvD;;AAEA,iBAAiB,mBAAO,CAAC,2FAAgB;;AAEzC;;AAEA,uCAAuC,uCAAuC;;AAE9E,kBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,cAAc;AACd;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;;;;;ACzFa;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;;AAEF,kBAAe;AACf;AACA;;AAEA;;;;;;;;;;;ACVa;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;;AAEF,kBAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;ACba;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAe;AACf;AACA;AACA;AACA;;;;;;;;;;;ACTa;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAe;;AAEf,mBAAmB,mBAAO,CAAC,+FAAkB;;AAE7C;;AAEA,mBAAmB,mBAAO,CAAC,+FAAkB;;AAE7C;;AAEA,uCAAuC,uCAAuC;;AAE9E;AACA;AACA;AACA;AACA,6BAA6B,yBAAyB;AACtD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;ACxDa;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AChBa;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACda;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;;AAEF,mBAAmB,mBAAO,CAAC,+FAAkB;;AAE7C;;AAEA,iBAAiB,mBAAO,CAAC,2FAAgB;;AAEzC;;AAEA,gBAAgB,mBAAO,CAAC,yFAAe;;AAEvC;;AAEA,uCAAuC,uCAAuC;;AAE9E,kBAAe;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL,CAAC;AACD;;;;;;;;;;;ACjCa;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,gBAAgB;AAChB,YAAY;AACZ;;AAEA,wBAAwB,yBAAyB;AACjD,sBAAsB,uBAAuB;AAC7C,kBAAkB,mBAAmB;;AAErC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;;AAEA,kBAAe;;;;;;;;;;;ACjCF;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAe;AACf;AACA;AACA;AACA;;;;;;;;;;;ACTa;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,uBAAuB,GAAG,wBAAwB,GAAG,eAAe;;AAEpE,gBAAgB,mBAAO,CAAC,iFAAgB;;AAExC;;AAEA,uCAAuC,uCAAuC;;AAE9E;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kBAAe;AACf,eAAe;AACf,wBAAwB;AACxB,uBAAuB;;;;;;;;;;;ACjCV;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAe;;AAEf,iBAAiB,mBAAO,CAAC,kGAAwB;;AAEjD;;AAEA,oBAAoB,mBAAO,CAAC,wFAAmB;;AAE/C;;AAEA,uCAAuC,uCAAuC;;AAE9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,mBAAmB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,qCAAqC;AAChD,qBAAqB,qBAAqB;AAC1C;AACA,WAAW,UAAU;AACrB;AACA;AACA;AACA,YAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,QAAQ;AACR;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,QAAQ;AACR;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,IAAI;AACJ;AACA,iCAAiC;AACjC,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,QAAQ;AACR;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,QAAQ;AACR;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,IAAI;AACJ;AACA,iCAAiC;AACjC,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,gBAAgB;AAChB;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,gBAAgB;AAChB;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA,YAAY;AACZ;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACzLa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;;;;;;AC3Ba;;AAEb;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO,EAAE,sCAAsC;AACtE;AACA,MAAM;AACN,uBAAuB,OAAO,EAAE,aAAa,KAAK,YAAY;AAC9D,MAAM;AACN,mBAAmB,OAAO,EAAE,YAAY;AACxC;AACA,IAAI;AACJ,iBAAiB,OAAO,EAAE,iBAAiB;AAC3C;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,MAAM,EAAE,YAAY,EAAE,wBAAwB;AAC/D,IAAI;AACJ;AACA,kBAAkB,KAAK,IAAI,MAAM,EAAE,YAAY,EAAE,wBAAwB;AACzE;;AAEA,4BAA4B,cAAc;AAC1C;AACA,CAAC;AACD;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;AAEA,oBAAoB;;;;;;;;;;;;ACnHpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,mBAAO,CAAC,2GAAoB;AAC3C,eAAe,mBAAO,CAAC,2GAAoB;AAC3C,mBAAO,CAAC,yDAAU;AAClB;AACA;AACA;AACA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;AC7HD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEa;;AAEb;AACA,gBAAgB,mBAAO,CAAC,6GAAqB;AAC7C,mBAAO,CAAC,yDAAU;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,SAAS,0DAA8B;AACvC;AACA;AACA;AACA;;AAEA;AACA,aAAa,mBAAO,CAAC,yHAA2B;AAChD;;AAEA,aAAa,oDAAwB;AACrC,8IAA8I;AAC9I;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAO,CAAC,kBAAM;AAC9B;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA,iBAAiB,mBAAO,CAAC,mIAAgC;AACzD,kBAAkB,mBAAO,CAAC,2HAA4B;AACtD,eAAe,mBAAO,CAAC,uHAA0B;AACjD;AACA,qBAAqB,iHAA0B;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAO,CAAC,yDAAU;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yEAAyE,mFAAmF;AAC5J;AACA;AACA,qBAAqB,mBAAO,CAAC,uGAAkB;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wCAAwC,qHAAwC;AAChF;AACA;AACA;AACA;AACA;AACA,qBAAqB,mBAAO,CAAC,uGAAkB;AAC/C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,+FAA+F;AAC/F,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA,4FAA4F;AAC5F,UAAU;AACV;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sCAAsC,qHAAwC;AAC9E;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,SAAS;AAC7B;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA,4EAA4E;AAC5E;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,kBAAkB,yBAAyB;AAC3C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,mBAAO,CAAC,yIAAmC;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA,mDAAmD,+DAA+D;AAClH;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,mBAAO,CAAC,qHAAyB;AAC9C;AACA;AACA;AACA;AACA;AACA,iCAAiC,OAAO;AACxC;AACA;AACA;AACA;;;;;;;;;;;AClgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,aAAa;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA,qBAAqB,iHAA0B;AAC/C;AACA;AACA;AACA;AACA,aAAa,mBAAO,CAAC,uGAAkB;AACvC,mBAAO,CAAC,yDAAU;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC7LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEa;;AAEb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,aAAa,mBAAO,CAAC,iEAAgB;AACrC;AACA;;AAEA;AACA,aAAa,mBAAO,CAAC,yHAA2B;AAChD;;AAEA,aAAa,oDAAwB;AACrC,8IAA8I;AAC9I;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,mBAAO,CAAC,2HAA4B;AACtD,eAAe,mBAAO,CAAC,uHAA0B;AACjD;AACA,qBAAqB,iHAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAO,CAAC,yDAAU;AAClB;AACA;AACA,qBAAqB,mBAAO,CAAC,uGAAkB;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,IAAI;AACJ,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,qBAAqB,mBAAO,CAAC,uGAAkB;;AAE/C;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,sDAAsD;AAC9H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;;;;;;;;;;;AChoBa;;AAEb;AACA,4CAA4C,2BAA2B,kBAAkB,kCAAkC,oEAAoE,KAAK,OAAO,oBAAoB;AAC/N,+BAA+B,uCAAuC;AACtE,qCAAqC,+DAA+D,sCAAsC,0BAA0B,+CAA+C,yCAAyC,uEAAuE;AACnU,eAAe,mBAAO,CAAC,sHAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,iEAAiE;AACjE;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,SAAS;AACT,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH,CAAC;AACD;AACA;AACA,yFAAyF;AACzF;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;ACnLa;;AAEb,2CAA2C,gCAAgC,oCAAoC,oDAAoD,6DAA6D,iEAAiE,sCAAsC;AACvU,iCAAiC,gBAAgB,sBAAsB,OAAO,uDAAuD,6DAA6D,4CAA4C,oKAAoK,mFAAmF,KAAK;AAC1e,4CAA4C,2BAA2B,kBAAkB,kCAAkC,oEAAoE,KAAK,OAAO,oBAAoB;AAC/N,kDAAkD,0CAA0C;AAC5F,4CAA4C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD;AAC/P,8DAA8D,sEAAsE,8DAA8D,kDAAkD,iBAAiB,GAAG;AACxQ,+BAA+B,uCAAuC;AACtE,qCAAqC,+DAA+D,sCAAsC,0BAA0B,+CAA+C,yCAAyC,uEAAuE;AACnU,eAAe,mBAAO,CAAC,sBAAQ;AAC/B;AACA,gBAAgB,mBAAO,CAAC,kBAAM;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA,2CAA2C;AAC3C,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA,yDAAyD,cAAc;AACvE;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA,CAAC;;;;;;;;;;;ACtLY;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wFAAwF;AACxF;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC/FA;AACA;;AAEa;;AAEb,iCAAiC,uHAAgC;AACjE;AACA;AACA;AACA;AACA;AACA,wEAAwE,aAAa;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACrFa;;AAEb,6EAA6E,MAAM,0BAA0B,0BAA0B,gBAAgB,eAAe,UAAU,iBAAiB,kBAAkB,OAAO;AAC1N,iCAAiC,qBAAqB,mCAAmC,gDAAgD,gCAAgC,wBAAwB,0EAA0E,uBAAuB,yEAAyE,mBAAmB;AAC9X,2CAA2C,gCAAgC,oCAAoC,oDAAoD,6DAA6D,iEAAiE,sCAAsC;AACvU,iCAAiC,gBAAgB,sBAAsB,OAAO,uDAAuD,6DAA6D,4CAA4C,oKAAoK,mFAAmF,KAAK;AAC1e,4CAA4C,2BAA2B,kBAAkB,kCAAkC,oEAAoE,KAAK,OAAO,oBAAoB;AAC/N,+BAA+B,uCAAuC;AACtE,qCAAqC,+DAA+D,sCAAsC,0BAA0B,+CAA+C,yCAAyC,uEAAuE;AACnU,2BAA2B,uHAAgC;AAC3D;AACA;AACA;AACA;AACA,IAAI,iGAAiG,uFAAuF;AAC5L;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA,QAAQ;AACR;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnDA;AACA;;AAEa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,uHAAgC;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,+BAA+B,mBAAO,CAAC,sHAAiB;AACxD;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,aAAa;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;;;;;;;;;;;ACrFa;;AAEb,4BAA4B,uHAAgC;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACrBA,4DAAkC;;;;;;;;;;;ACAlC,aAAa,mBAAO,CAAC,sBAAQ;AAC7B;AACA;AACA;AACA,EAAE,qBAAqB;AACvB,EAAE;AACF,YAAY,wJAAqD;AACjE,EAAE,cAAc;AAChB,EAAE,gBAAgB;AAClB,EAAE,0JAAuD;AACzD,EAAE,oJAAmD;AACrD,EAAE,6JAAyD;AAC3D,EAAE,mKAA6D;AAC/D,EAAE,sLAAqE;AACvE,EAAE,4KAAgE;AAClE;;;;;;;;;;;;;;;ACfA;;;;;;;;;;;;;;;kFAekF;AAClF,8FAA0B;AAE1B,uHAAuH;AACvH,yGAAsC;AACtC,2IAA0E;AAEnE,KAAK,UAAU,MAAM,CAAC,IAAe;IACxC,MAAM,OAAO,GAAG,gCAAqB,GAAE,CAAC,KAAK,CAAC,IAAI,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;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,UAAU;AACrB,YAAY;AACZ;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB,4BAA4B;;;;;;;;;;;AClJ5B,qBAAqB,0DAA8B;AACnD,qBAAqB,mBAAO,CAAC,oCAAe;AAC5C,aAAa,mBAAO,CAAC,kBAAM;AAC3B,WAAW,mBAAO,CAAC,cAAI;;AAEvB,QAAQ,iCAAiC,EAAE,mBAAO,CAAC,qGAAe;AAClE,QAAQ,iBAAiB,EAAE,mBAAO,CAAC,+FAAY;AAC/C,QAAQ,OAAO,EAAE,mBAAO,CAAC,6FAAW;AACpC,QAAQ,2BAA2B,EAAE,mBAAO,CAAC,iGAAa;AAC1D,QAAQ,iBAAiB,EAAE,mBAAO,CAAC,8GAAkB;;AAErD;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;;AAEA;AACA;AACA,eAAe,WAAW;AAC1B;AACA,eAAe,UAAU;AACzB;AACA;AACA;AACA;AACA,eAAe,YAAY;AAC3B;AACA,eAAe,UAAU;AACzB,oBAAoB;AACpB;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA,+BAA+B;AAC/B,eAAe,kBAAkB;AACjC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,eAAe;AAC5B,aAAa,QAAQ;AACrB,cAAc,SAAS;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD,uDAAuD;AACvD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,cAAc,SAAS;AACvB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc;AACd;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,cAAc,gBAAgB;AAC9B;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,cAAc,gBAAgB;AAC9B;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,gBAAgB;AAC7B,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB,aAAa,QAAQ;AACrB,cAAc,SAAS;AACvB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uFAAuF,WAAW;AAClG;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,wDAAwD;;AAExD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,cAAc,UAAU;AACxB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,YAAY;AACzB,aAAa,GAAG;AAChB,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,cAAc,SAAS;AACvB;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,aAAa,UAAU;AACvB,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA,iEAAiE,wBAAwB;AACzF;AACA;AACA,iFAAiF,gBAAgB;AACjG;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B,gEAAgE;AAChE;AACA,cAAc,SAAS;AACvB;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB,cAAc,SAAS;AACvB;;AAEA;AACA;AACA;AACA,sEAAsE,MAAM;AAC5E,oBAAoB,2BAA2B;AAC/C;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,UAAU;AACvB,cAAc,SAAS;AACvB;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,aAAa,UAAU;AACvB,cAAc,SAAS;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,cAAc,QAAQ;AACtB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,cAAc,SAAS;AACvB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,+BAA+B,qBAAqB,EAAE,YAAY;AAClE;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA,oDAAoD,aAAa,cAAc,IAAI;AACnF;AACA,KAAK;;AAEL;AACA;AACA,sDAAsD,aAAa,WAAW,IAAI,cAAc,cAAc;AAC9G;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,YAAY;AACzB,aAAa,GAAG;AAChB,cAAc,SAAS;AACvB;;AAEA;AACA,4BAA4B;AAC5B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,QAAQ;AACpB,YAAY,QAAQ;AACpB,YAAY,YAAY;AACxB,YAAY,GAAG;AACf,aAAa,SAAS;AACtB;;AAEA;AACA,4BAA4B,iBAAiB;AAC7C;;AAEA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,SAAS;AACvB,eAAe,SAAS;AACxB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,cAAc,QAAQ;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,cAAc,SAAS;AACvB;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,QAAQ;AACtB,cAAc,QAAQ;AACtB,cAAc,QAAQ;AACtB,eAAe,SAAS;AACxB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,QAAQ;AACtB,eAAe;AACf;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,SAAS,kBAAkB,GAAG;AACjF;AACA,6BAA6B,4CAAY;AACzC,yBAAyB,4CAAY;AACrC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB,8BAA8B,cAAc,GAAG;AAC/C;AACA,aAAa,UAAU;AACvB,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,cAAc,SAAS;AACvB;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,yCAAyC,cAAc,GAAG;AAC1D;AACA,aAAa,UAAU;AACvB,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,cAAc;AACd;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gCAAgC;AAChC;;AAEA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,4CAAY;AACnC,mBAAmB,4CAAY;AAC/B;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN,qBAAqB;AACrB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,6BAA6B,SAAS,EAAE,IAAI;AAC5C,mBAAmB,SAAS,EAAE,IAAI;AAClC;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,2DAA2D,kBAAkB;AAC7E,QAAQ;AACR,+CAA+C,kBAAkB;AACjE;AACA,MAAM;AACN;AACA;AACA;AACA,0DAA0D,kBAAkB;AAC5E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,sCAAsC,IAAI;AAC1C,SAAS,iBAAiB;AAC1B;AACA;AACA;AACA,QAAQ;AACR,4BAA4B,IAAI;AAChC;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iCAAiC,aAAa;;AAE9C;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,8DAA8D,MAAM,6BAA6B,gBAAgB,KAAK,YAAY;AAClI;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,UAAU;AACV;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,aAAa,mBAAmB;AAChC,aAAa,UAAU;AACvB,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,mBAAmB;AAChC,aAAa,QAAQ;AACrB,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,yBAAyB;AAChD,SAAS;AACT,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA,kBAAkB,aAAa;AAC/B;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,oCAAoC,YAAY;AAChD;AACA;AACA;;AAEA;AACA;AACA;AACA,0EAA0E;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD,MAAM;AACN,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,kBAAkB,aAAa;AAC/B,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,cAAc;AACd;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB,eAAe;AACf;;AAEA;AACA,yBAAyB;AACzB,wBAAwB;AACxB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,4BAA4B;AACxD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,cAAc;AAC9C,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,gCAAgC,cAAc;AAC9C,YAAY,OAAO;AACnB,gCAAgC,cAAc;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA,gCAAgC,cAAc;AAC9C,YAAY;AACZ;AACA,gCAAgC,cAAc;AAC9C,6BAA6B,aAAa;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8BAA8B,cAAc;AAC5C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,aAAa;AACb;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAsB,SAAS;AAC/B;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA,4CAA4C,yBAAyB;AACrE,MAAM;AACN;AACA,wBAAwB,aAAa;AACrC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA,mCAAmC,cAAc;AACjD,YAAY,OAAO;AACnB;AACA,mCAAmC,cAAc;AACjD;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;;AAEA;AACA,yDAAyD,KAAK;AAC9D;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;;AAEA;AACA,sCAAsC,aAAa;AACnD;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;;AAEA;AACA,+CAA+C,aAAa;AAC5D;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;;AAEA,8CAA8C,KAAK,GAAG,WAAW;AACjE;AACA;;AAEA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iDAAiD,YAAY;AAC7D,gDAAgD,cAAc,aAAa,UAAU,UAAU,GAAG,UAAU,oBAAoB;AAChI;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA,+CAA+C,YAAY,GAAG,WAAW;AACzE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,cAAc,eAAe;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,IAAI;AAChD;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,cAAc;AACd;;AAEA;AACA,sDAAsD;;AAEtD,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB,cAAc;AACd;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,cAAc;AACd;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,cAAc;AACd;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,kBAAkB,yBAAyB,YAAY;AACtE,cAAc;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,iBAAiB,YAAY,yBAAyB,YAAY;AACjF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mCAAmC;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,kBAAkB;AAC/B,aAAa,QAAQ;AACrB,cAAc,SAAS;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,kBAAkB,yBAAyB,YAAY;AACtE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,mBAAmB;AAChC,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;AACA,oBAAoB,2BAA2B;AAC/C;AACA,yBAAyB,SAAS;AAClC;AACA;AACA;AACA,yBAAyB,gDAAgD;AACzE,QAAQ;AACR;AACA;AACA;AACA;AACA,yBAAyB,QAAQ;AACjC;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,UAAU;AACrB,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,YAAY,GAAG,UAAU,GAAG,wBAAwB;AACpE;AACA;AACA,GAAG;AACH;;AAEA;AACA,WAAW,SAAS;AACpB,aAAa;AACb;AACA;;AAEA;AACA;AACA,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;;AAEA,eAAe;;;;;;;;;;;ACv5Df;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAsB;AACtB,4BAA4B;;;;;;;;;;;AC5C5B,QAAQ,uBAAuB,EAAE,mBAAO,CAAC,qGAAe;;AAExD;AACA;AACA;AACA,cAAc,mCAAmC;AACjD,cAAc,iCAAiC;AAC/C,cAAc,+BAA+B;AAC7C;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB,eAAe;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB,eAAe;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB,eAAe;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB,eAAe;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe;AACf;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,UAAU;AACvB,eAAe;AACf;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB,aAAa,MAAM;AACnB,eAAe;AACf;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB,aAAa,MAAM;AACnB,eAAe;AACf;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB,aAAa,MAAM;AACnB,eAAe;AACf;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB,eAAe;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,WAAW;AAChD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB,eAAe;AACf;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB,eAAe;AACf;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,cAAc;AACd;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB,qEAAqE;AACzF;AACA;AACA,iCAAiC,sEAAsE;AACvG;AACA;AACA,6BAA6B,cAAc;AAC3C;AACA;AACA,gBAAgB,oBAAoB,GAAG,qBAAqB;AAC5D;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa,UAAU;AACvB,cAAc;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uEAAuE;AAC3F;AACA;AACA,iCAAiC,0EAA0E;AAC3G;AACA;AACA,kCAAkC,qBAAqB;AACvD;AACA,kBAAkB,sBAAsB,EAAE,gBAAgB;AAC1D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB,aAAa,MAAM;AACnB,eAAe;AACf;;AAEA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA,4BAA4B,4CAA4C,EAAE,YAAY;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,yBAAyB;;AAErD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB,aAAa,MAAM;AACnB,eAAe;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,gCAAgC,4BAA4B;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA,YAAY;;;;;;;;;;;AC3YZ,QAAQ,uBAAuB,EAAE,mBAAO,CAAC,+FAAY;;AAErD;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB;;AAEA;AACA;AACA;;AAEA,yCAAyC;AACzC,yCAAyC;AACzC;AACA,kDAAkD;AAClD,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,KAAK;AAClB,aAAa,QAAQ;AACrB,cAAc;AACd;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,cAAc;AACd;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,UAAU;AACvB,cAAc;AACd;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB,cAAc;AACd;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB,cAAc;AACd;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa,UAAU;AACvB,cAAc;AACd;;AAEA;AACA;AACA;AACA;AACA,8DAA8D,kBAAkB;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;;AAEA,cAAc;AACd,wBAAwB;;;;;;;;;;;AC/MxB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAkB,eAAe;AACjC;AACA;AACA;AACA,kBAAkB,eAAe;AACjC;AACA;;AAEA;AACA,kBAAkB,eAAe;AACjC,oBAAoB,eAAe;AACnC;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB,aAAa;AACb;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uCAAuC;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,4CAA4C,UAAU;AACtD;;AAEA;AACA,qCAAqC,mBAAmB;AACxD;AACA;AACA,8BAA8B,WAAW;AACzC;AACA;AACA;;AAEA,sBAAsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnGY;AACE;AAMN;;;AAG9B;AACA;AACA;;AAE0C;AACI;AAMhB;;AAE9B,iEAAe,gBAAgB,EAAE,6CAAI,EAAE,+CAAM;AAC7C,kBAAkB;AAClB,aAAa;AACb,uBAAuB;AACvB,yBAAyB;AACzB,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;AC5BqG;AAChG,qBAAqB,oDAAU;AAC/B,gBAAgB,oDAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,KAAK;AACL;AACA;AACA;AACA,iBAAiB;AACjB,KAAK;AACL;AACA;AACA;AACA,iBAAiB;AACjB,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,wDAAU;AAChC;AACA,uDAAuD,+BAA+B;AACtF,mCAAmC,kDAAkD;AACrF,iBAAiB;AACjB,KAAK;AACL;AACA;AACA;AACA,mCAAmC,mCAAmC,wDAAU,eAAe;AAC/F,iBAAiB;AACjB,KAAK;AACL;AACA,iBAAiB;AACjB,KAAK;AACL;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,YAAY,uDAAS;AACrB;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,iBAAiB;AACjB,KAAK;AACL;AACA;AACA,iBAAiB;AACjB,KAAK;AACL;AACA;AACA;AACA,iBAAiB;AACjB,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,oBAAoB;AACjC;AACO;AACP,wCAAwC;AACxC,qCAAqC;AACrC,gDAAgD;AAChD,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA,uEAAuE;AACvE,mFAAmF;AACnF,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,uBAAuB,wDAAU;AACjC;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,mEAAqB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,uDAAS;AACvD;AACA,sBAAsB;AACtB,6BAA6B,uDAAS;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gGAAgG;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gGAAgG;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,oBAAoB;AAC7C;AACO;AACP,qCAAqC;AACrC,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,wDAAU;AAC7B;AACA;AACA,6CAA6C,cAAc;AAC3D;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kGAAkG,0DAAY;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,wDAAU,YAAY,wDAAU;AACvD;AACA;AACA;AACA,4BAA4B,qBAAqB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,UAAU;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,UAAU;AACnC;AACA;AACA,yBAAyB,UAAU;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AChbA;AACA;AACA;AACA;AACA;AAC6F;AACrD;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,wDAAU;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP,iCAAiC;AACjC;AACA;AACA;AACA,QAAQ,qDAAU;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,yDAAW;AAC7B,kBAAkB,yDAAW;AAC7B;AACA;AACA;AACA,qCAAqC,QAAQ;AAC7C;AACA;AACA,YAAY,4DAAc;AAC1B;AACA;AACA,gEAAgE,iEAAmB;AACnF;AACA;AACA;AACA;AACA;AACA,uCAAuC,+BAA+B,iEAAmB,cAAc,wDAAU,UAAU;AAC3H;AACA,mCAAmC,kCAAkC,iEAAmB,cAAc,wDAAU,UAAU;AAC1H;AACA;AACA;AACA;AACA;AACA,+BAA+B,+BAA+B,iEAAmB,cAAc,wDAAU,UAAU;AACnH;AACA,2BAA2B,iCAAiC,iEAAmB,OAAO;AACtF,4BAA4B;AAC5B;AACA;AACA;AACA,+BAA+B,uCAAuC;AACtE;AACA,2BAA2B,uCAAuC;AAClE;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,oBAAoB;AACxC;AACA,aAAa,4DAAc;AAC3B,2BAA2B,8BAA8B,iEAAmB,cAAc,wDAAU,YAAY;AAChH;AACA;AACA;AACA;AACA;AACA;AACO;AACP,iCAAiC;AACjC;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;AC/KA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD;AACO;AACP;AACA;AACO;AACP;AACA;AACA,wBAAwB,mBAAmB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB;AACO;AACP;AACA;AACA,oDAAoD;AACpD;AACA,yBAAyB;AACzB;AACA,wBAAwB;AACxB;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA,gDAAgD,WAAW;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mBAAmB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oGAAoG;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E,4DAA4D;AACxI;AACA;AACA;AACA;AACA,4DAA4D;AAC5D,8DAA8D,4DAA4D;AAC1H;AACA;AACA;AACA,CAAC;AACqB;;;;;;;;;;;;;;;;;;UC1KtB;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WCzBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;UENA;UACA;UACA;UACA","sources":["webpack://design-flow-glsp-server/../../node_modules/@colors/colors/lib/colors.js","webpack://design-flow-glsp-server/../../node_modules/@colors/colors/lib/custom/trap.js","webpack://design-flow-glsp-server/../../node_modules/@colors/colors/lib/custom/zalgo.js","webpack://design-flow-glsp-server/../../node_modules/@colors/colors/lib/maps/america.js","webpack://design-flow-glsp-server/../../node_modules/@colors/colors/lib/maps/rainbow.js","webpack://design-flow-glsp-server/../../node_modules/@colors/colors/lib/maps/random.js","webpack://design-flow-glsp-server/../../node_modules/@colors/colors/lib/maps/zebra.js","webpack://design-flow-glsp-server/../../node_modules/@colors/colors/lib/styles.js","webpack://design-flow-glsp-server/../../node_modules/@colors/colors/lib/system/has-flag.js","webpack://design-flow-glsp-server/../../node_modules/@colors/colors/lib/system/supports-colors.js","webpack://design-flow-glsp-server/../../node_modules/@colors/colors/safe.js","webpack://design-flow-glsp-server/../../node_modules/@dabh/diagnostics/adapters/index.js","webpack://design-flow-glsp-server/../../node_modules/@dabh/diagnostics/adapters/process.env.js","webpack://design-flow-glsp-server/../../node_modules/@dabh/diagnostics/diagnostics.js","webpack://design-flow-glsp-server/../../node_modules/@dabh/diagnostics/logger/console.js","webpack://design-flow-glsp-server/../../node_modules/@dabh/diagnostics/modifiers/namespace-ansi.js","webpack://design-flow-glsp-server/../../node_modules/@dabh/diagnostics/node/development.js","webpack://design-flow-glsp-server/../../node_modules/@dabh/diagnostics/node/index.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/default-types.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/galignable.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/gbounds-aware.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/gbutton.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/gcompartment.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/gedge-layoutable.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/gedge.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/gforeign-object-element.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/ggraph.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/ghtml-root.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/gissue-marker.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/glabel.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/glayoutable.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/glayouting.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/gmodel-element.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/gmodel-util.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/gnode.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/gport.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/gpre-rendered-element.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/gresizable.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/gshape-element.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/gshaped-prerendered-element.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/graph/src/index.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/base-protocol.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/client-notification.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/clipboard.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/contexts.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/edge-modification.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/element-creation.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/element-hover.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/element-navigation.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/element-selection.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/element-text-editing.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/element-type-hints.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/element-validation.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/model-data.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/model-edit-mode.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/model-layout.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/model-saving.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/node-modification.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/tool-palette.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/types.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/undo-redo.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/viewport.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/client-server-protocol/base-glsp-client.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/client-server-protocol/glsp-client.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/client-server-protocol/glsp-server.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/client-server-protocol/jsonrpc/base-jsonrpc-glsp-client.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/client-server-protocol/jsonrpc/glsp-jsonrpc-client.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/client-server-protocol/jsonrpc/glsp-jsonrpc-server.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/client-server-protocol/jsonrpc/websocket-connection.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/client-server-protocol/jsonrpc/worker-connection-provider.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/client-server-protocol/jsonrpc/ws-connection-provider.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/client-server-protocol/types.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/di/container-configuration.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/di/feature-module.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/di/index.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/di/inversify-util.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/di/lazy-injector.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/index.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/model/default-types.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/model/model-schema.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/re-exports.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/sprotty-actions.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/sprotty-geometry-bounds.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/sprotty-geometry-dimension.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/sprotty-geometry-point.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/utils/array-util.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/utils/disposable.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/utils/event.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/utils/geometry-movement.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/utils/geometry-util.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/utils/geometry-vector.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/utils/math-util.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/src/utils/type-util.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-node/index.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-node/max.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-node/md5.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-node/native.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-node/nil.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-node/parse.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-node/regex.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-node/rng.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-node/sha1.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-node/stringify.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-node/v1.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-node/v1ToV6.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-node/v3.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-node/v35.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-node/v4.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-node/v5.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-node/v6.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-node/v6ToV1.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-node/v7.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-node/validate.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-node/version.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/actions/action-dispatcher.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/actions/action-handler-registry.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/actions/action-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/actions/client-action-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/actions/global-action-provider.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/command/command-stack.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/command/command.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/command/recording-command.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/command/undo-redo-action-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/di/binding-target.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/di/client-session-module.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/di/diagram-module.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/di/glsp-module.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/di/multi-binding.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/di/server-module.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/di/service-identifiers.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/diagram/diagram-configuration.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/clipboard/request-clipboard-data-action-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/contextactions/command-palette-action-provider.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/contextactions/context-actions-provider-registry.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/contextactions/context-actions-provider.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/contextactions/context-menu-item-provider.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/contextactions/request-context-actions-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/contextactions/tool-palette-item-provider.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/directediting/context-edit-validator-registry.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/directediting/context-edit-validator.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/directediting/label-edit-validator.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/directediting/request-edit-validation-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/layout/computed-bounds-action-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/layout/layout-engine.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/layout/layout-operation-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/model/gmodel-factory.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/model/gmodel-index.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/model/gmodel-serializer.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/model/model-state.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/model/model-submission-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/model/request-model-action-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/model/save-model-action-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/model/source-model-storage.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/navigation/json-opener-options.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/navigation/navigation-target-provider-registry.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/navigation/navigation-target-provider.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/navigation/navigation-target-resolution.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/navigation/navigation-target-resolver.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/navigation/request-navigation-targets-action-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/navigation/resolve-navigation-targets-action-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/popup/popup-model-factory.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/popup/request-popup-model-action-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/progress/progress-service.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/type-hints/edge-creation-checker.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/type-hints/request-check-edge-action-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/type-hints/request-type-hints-action-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/validation/model-validator.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/features/validation/request-markers-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/gmodel/apply-label-edit-operation-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/gmodel/change-bounds-operation-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/gmodel/change-routing-points-operation-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/gmodel/cut-operation-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/gmodel/delete-operation-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/gmodel/gmodel-create-edge-operation-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/gmodel/gmodel-create-node-operation-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/gmodel/gmodel-diagram-module.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/gmodel/gmodel-operation-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/gmodel/paste-operation-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/gmodel/reconnect-edge-operation-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/index.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/launch/glsp-server-launcher.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/launch/jsonrpc-server-launcher.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/operations/compound-operation-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/operations/create-operation-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/operations/json-operation-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/operations/operation-action-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/operations/operation-handler-registry.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/operations/operation-handler.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/protocol/client-action.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/protocol/glsp-server.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/reexport.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/session/client-session-factory.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/session/client-session-initializer.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/session/client-session-listener.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/session/client-session-manager.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/session/client-session.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/utils/args-util.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/utils/client-options-util.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/utils/console-logger.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/utils/glsp-server-error.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/utils/layout-util.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/utils/logger.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/utils/promise-queue.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/common/utils/registry.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/node/abstract-json-model-storage.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/node/di/app-module.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/node/di/winston-logger.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/node/gmodel/gmodel-storage.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/node/index.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/node/launch/cli-parser.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/node/launch/socket-cli-parser.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/node/launch/socket-server-launcher.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/node/launch/websocket-server-launcher.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/src/node/reexport.ts","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/node.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/node_modules/ws/index.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/node_modules/ws/lib/buffer-util.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/node_modules/ws/lib/constants.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/node_modules/ws/lib/event-target.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/node_modules/ws/lib/extension.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/node_modules/ws/lib/limiter.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/node_modules/ws/lib/permessage-deflate.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/node_modules/ws/lib/receiver.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/node_modules/ws/lib/sender.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/node_modules/ws/lib/stream.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/node_modules/ws/lib/subprotocol.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/node_modules/ws/lib/validation.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/node_modules/ws/lib/websocket-server.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/node_modules/ws/lib/websocket.js","webpack://design-flow-glsp-server/../../node_modules/abort-controller/src/abort-signal.ts","webpack://design-flow-glsp-server/../../node_modules/abort-controller/src/abort-controller.ts","webpack://design-flow-glsp-server/../../node_modules/color-convert/conversions.js","webpack://design-flow-glsp-server/../../node_modules/color-convert/index.js","webpack://design-flow-glsp-server/../../node_modules/color-convert/node_modules/color-name/index.js","webpack://design-flow-glsp-server/../../node_modules/color-convert/route.js","webpack://design-flow-glsp-server/../../node_modules/color-name/index.js","webpack://design-flow-glsp-server/../../node_modules/color-string/index.js","webpack://design-flow-glsp-server/../../node_modules/color/index.js","webpack://design-flow-glsp-server/../../node_modules/colorspace/index.js","webpack://design-flow-glsp-server/../../node_modules/enabled/index.js","webpack://design-flow-glsp-server/../../node_modules/event-target-shim/src/event.mjs","webpack://design-flow-glsp-server/../../node_modules/event-target-shim/src/event-target.mjs","webpack://design-flow-glsp-server/../../node_modules/fecha/src/fecha.ts","webpack://design-flow-glsp-server/../../node_modules/fn.name/index.js","webpack://design-flow-glsp-server/../../node_modules/inherits/inherits.js","webpack://design-flow-glsp-server/../../node_modules/inherits/inherits_browser.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/annotation/decorator_utils.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/annotation/inject.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/annotation/inject_base.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/annotation/injectable.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/annotation/lazy_service_identifier.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/annotation/multi_inject.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/annotation/named.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/annotation/optional.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/annotation/post_construct.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/annotation/pre_destroy.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/annotation/property_event_decorator.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/annotation/tagged.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/annotation/target_name.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/annotation/unmanaged.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/bindings/binding.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/bindings/binding_count.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/constants/error_msgs.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/constants/literal_types.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/constants/metadata_keys.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/container/container.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/container/container_module.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/container/container_snapshot.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/container/lookup.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/container/module_activation_store.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/interfaces/interfaces.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/inversify.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/planning/context.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/planning/metadata.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/planning/metadata_reader.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/planning/plan.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/planning/planner.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/planning/queryable_string.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/planning/reflection_utils.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/planning/request.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/planning/target.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/resolution/instantiation.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/resolution/resolver.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/scope/scope.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/syntax/binding_in_syntax.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/syntax/binding_in_when_on_syntax.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/syntax/binding_on_syntax.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/syntax/binding_to_syntax.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/syntax/binding_when_on_syntax.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/syntax/binding_when_syntax.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/syntax/constraint_helpers.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/utils/async.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/utils/binding_utils.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/utils/clonable.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/utils/exceptions.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/utils/factory_type.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/utils/id.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/utils/js.js","webpack://design-flow-glsp-server/../../node_modules/inversify/es/utils/serialization.js","webpack://design-flow-glsp-server/../../node_modules/inversify/lib/annotation/decorator_utils.js","webpack://design-flow-glsp-server/../../node_modules/inversify/lib/annotation/inject.js","webpack://design-flow-glsp-server/../../node_modules/inversify/lib/annotation/inject_base.js","webpack://design-flow-glsp-server/../../node_modules/inversify/lib/constants/error_msgs.js","webpack://design-flow-glsp-server/../../node_modules/inversify/lib/constants/metadata_keys.js","webpack://design-flow-glsp-server/../../node_modules/inversify/lib/planning/metadata.js","webpack://design-flow-glsp-server/../../node_modules/inversify/lib/utils/js.js","webpack://design-flow-glsp-server/../../node_modules/kuler/index.js","webpack://design-flow-glsp-server/../../node_modules/logform/align.js","webpack://design-flow-glsp-server/../../node_modules/logform/cli.js","webpack://design-flow-glsp-server/../../node_modules/logform/colorize.js","webpack://design-flow-glsp-server/../../node_modules/logform/combine.js","webpack://design-flow-glsp-server/../../node_modules/logform/errors.js","webpack://design-flow-glsp-server/../../node_modules/logform/format.js","webpack://design-flow-glsp-server/../../node_modules/logform/index.js","webpack://design-flow-glsp-server/../../node_modules/logform/json.js","webpack://design-flow-glsp-server/../../node_modules/logform/label.js","webpack://design-flow-glsp-server/../../node_modules/logform/levels.js","webpack://design-flow-glsp-server/../../node_modules/logform/logstash.js","webpack://design-flow-glsp-server/../../node_modules/logform/metadata.js","webpack://design-flow-glsp-server/../../node_modules/logform/ms.js","webpack://design-flow-glsp-server/../../node_modules/logform/pad-levels.js","webpack://design-flow-glsp-server/../../node_modules/logform/pretty-print.js","webpack://design-flow-glsp-server/../../node_modules/logform/printf.js","webpack://design-flow-glsp-server/../../node_modules/logform/simple.js","webpack://design-flow-glsp-server/../../node_modules/logform/splat.js","webpack://design-flow-glsp-server/../../node_modules/logform/timestamp.js","webpack://design-flow-glsp-server/../../node_modules/logform/uncolorize.js","webpack://design-flow-glsp-server/../../node_modules/ms/index.js","webpack://design-flow-glsp-server/../../node_modules/one-time/index.js","webpack://design-flow-glsp-server/../../node_modules/process/index.js","webpack://design-flow-glsp-server/../../node_modules/reflect-metadata/Reflect.js","webpack://design-flow-glsp-server/../../node_modules/safe-buffer/index.js","webpack://design-flow-glsp-server/../../node_modules/safe-stable-stringify/index.js","webpack://design-flow-glsp-server/../../node_modules/simple-swizzle/index.js","webpack://design-flow-glsp-server/../../node_modules/simple-swizzle/node_modules/is-arrayish/index.js","webpack://design-flow-glsp-server/../../node_modules/sprotty-protocol/src/action-handler.ts","webpack://design-flow-glsp-server/../../node_modules/sprotty-protocol/src/actions.ts","webpack://design-flow-glsp-server/../../node_modules/sprotty-protocol/src/diagram-server.ts","webpack://design-flow-glsp-server/../../node_modules/sprotty-protocol/src/diagram-services.ts","webpack://design-flow-glsp-server/../../node_modules/sprotty-protocol/src/index.ts","webpack://design-flow-glsp-server/../../node_modules/sprotty-protocol/src/model.ts","webpack://design-flow-glsp-server/../../node_modules/sprotty-protocol/src/utils/async.ts","webpack://design-flow-glsp-server/../../node_modules/sprotty-protocol/src/utils/geometry.ts","webpack://design-flow-glsp-server/../../node_modules/sprotty-protocol/src/utils/json.ts","webpack://design-flow-glsp-server/../../node_modules/sprotty-protocol/src/utils/model-utils.ts","webpack://design-flow-glsp-server/../../node_modules/sprotty-protocol/src/utils/object.ts","webpack://design-flow-glsp-server/../../node_modules/stack-trace/lib/stack-trace.js","webpack://design-flow-glsp-server/../../node_modules/string_decoder/lib/string_decoder.js","webpack://design-flow-glsp-server/../../node_modules/text-hex/index.js","webpack://design-flow-glsp-server/../../node_modules/triple-beam/config/cli.js","webpack://design-flow-glsp-server/../../node_modules/triple-beam/config/index.js","webpack://design-flow-glsp-server/../../node_modules/triple-beam/config/npm.js","webpack://design-flow-glsp-server/../../node_modules/triple-beam/config/syslog.js","webpack://design-flow-glsp-server/../../node_modules/triple-beam/index.js","webpack://design-flow-glsp-server/../../node_modules/util-deprecate/node.js","webpack://design-flow-glsp-server/../../node_modules/uuid/index.js","webpack://design-flow-glsp-server/../../node_modules/uuid/lib/bytesToUuid.js","webpack://design-flow-glsp-server/../../node_modules/uuid/lib/rng.js","webpack://design-flow-glsp-server/../../node_modules/uuid/v1.js","webpack://design-flow-glsp-server/../../node_modules/uuid/v4.js","webpack://design-flow-glsp-server/../../node_modules/vscode-jsonrpc/browser.js","webpack://design-flow-glsp-server/../../node_modules/vscode-jsonrpc/lib/browser/main.js","webpack://design-flow-glsp-server/../../node_modules/vscode-jsonrpc/lib/browser/ril.js","webpack://design-flow-glsp-server/../../node_modules/vscode-jsonrpc/lib/common/api.js","webpack://design-flow-glsp-server/../../node_modules/vscode-jsonrpc/lib/common/cancellation.js","webpack://design-flow-glsp-server/../../node_modules/vscode-jsonrpc/lib/common/connection.js","webpack://design-flow-glsp-server/../../node_modules/vscode-jsonrpc/lib/common/disposable.js","webpack://design-flow-glsp-server/../../node_modules/vscode-jsonrpc/lib/common/events.js","webpack://design-flow-glsp-server/../../node_modules/vscode-jsonrpc/lib/common/is.js","webpack://design-flow-glsp-server/../../node_modules/vscode-jsonrpc/lib/common/linkedMap.js","webpack://design-flow-glsp-server/../../node_modules/vscode-jsonrpc/lib/common/messageBuffer.js","webpack://design-flow-glsp-server/../../node_modules/vscode-jsonrpc/lib/common/messageReader.js","webpack://design-flow-glsp-server/../../node_modules/vscode-jsonrpc/lib/common/messageWriter.js","webpack://design-flow-glsp-server/../../node_modules/vscode-jsonrpc/lib/common/messages.js","webpack://design-flow-glsp-server/../../node_modules/vscode-jsonrpc/lib/common/ral.js","webpack://design-flow-glsp-server/../../node_modules/vscode-jsonrpc/lib/common/semaphore.js","webpack://design-flow-glsp-server/../../node_modules/vscode-jsonrpc/lib/common/sharedArrayCancellation.js","webpack://design-flow-glsp-server/../../node_modules/vscode-jsonrpc/lib/node/main.js","webpack://design-flow-glsp-server/../../node_modules/vscode-jsonrpc/lib/node/ril.js","webpack://design-flow-glsp-server/../../node_modules/vscode-jsonrpc/node.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/index.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/legacy.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/modern.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/_stream_writable.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/internal/streams/add-abort-signal.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/internal/streams/buffer_list.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/internal/streams/compose.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/internal/streams/destroy.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/internal/streams/duplex.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/internal/streams/duplexify.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/internal/streams/end-of-stream.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/internal/streams/from.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/internal/streams/legacy.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/internal/streams/operators.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/internal/streams/passthrough.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/internal/streams/pipeline.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/internal/streams/readable.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/internal/streams/state.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/internal/streams/transform.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/internal/streams/utils.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/internal/streams/writable.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/internal/validators.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/ours/errors.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/ours/primordials.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/ours/util.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/stream.js","webpack://design-flow-glsp-server/../../node_modules/winston-transport/node_modules/readable-stream/lib/stream/promises.js","webpack://design-flow-glsp-server/../../node_modules/winston/lib/winston.js","webpack://design-flow-glsp-server/../../node_modules/winston/lib/winston/common.js","webpack://design-flow-glsp-server/../../node_modules/winston/lib/winston/config/index.js","webpack://design-flow-glsp-server/../../node_modules/winston/lib/winston/container.js","webpack://design-flow-glsp-server/../../node_modules/winston/lib/winston/create-logger.js","webpack://design-flow-glsp-server/../../node_modules/winston/lib/winston/exception-handler.js","webpack://design-flow-glsp-server/../../node_modules/winston/lib/winston/exception-stream.js","webpack://design-flow-glsp-server/../../node_modules/winston/lib/winston/logger.js","webpack://design-flow-glsp-server/../../node_modules/winston/lib/winston/profiler.js","webpack://design-flow-glsp-server/../../node_modules/winston/lib/winston/rejection-handler.js","webpack://design-flow-glsp-server/../../node_modules/winston/lib/winston/rejection-stream.js","webpack://design-flow-glsp-server/../../node_modules/winston/lib/winston/tail-file.js","webpack://design-flow-glsp-server/../../node_modules/winston/lib/winston/transports/console.js","webpack://design-flow-glsp-server/../../node_modules/winston/lib/winston/transports/file.js","webpack://design-flow-glsp-server/../../node_modules/winston/lib/winston/transports/http.js","webpack://design-flow-glsp-server/../../node_modules/winston/lib/winston/transports/index.js","webpack://design-flow-glsp-server/../../node_modules/winston/lib/winston/transports/stream.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/async/asyncify.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/async/eachOf.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/async/eachOfLimit.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/async/eachOfSeries.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/async/forEach.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/async/internal/asyncEachOfLimit.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/async/internal/awaitify.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/async/internal/breakLoop.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/async/internal/eachOfLimit.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/async/internal/getIterator.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/async/internal/initialParams.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/async/internal/isArrayLike.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/async/internal/iterator.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/async/internal/once.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/async/internal/onlyOnce.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/async/internal/parallel.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/async/internal/setImmediate.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/async/internal/withoutIndex.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/async/internal/wrapAsync.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/async/series.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/is-stream/index.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/readable-stream/errors.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/readable-stream/lib/_stream_duplex.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/readable-stream/lib/_stream_passthrough.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/readable-stream/lib/_stream_readable.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/readable-stream/lib/_stream_transform.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/readable-stream/lib/_stream_writable.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/readable-stream/lib/internal/streams/async_iterator.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/readable-stream/lib/internal/streams/buffer_list.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/readable-stream/lib/internal/streams/destroy.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/readable-stream/lib/internal/streams/end-of-stream.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/readable-stream/lib/internal/streams/from.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/readable-stream/lib/internal/streams/pipeline.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/readable-stream/lib/internal/streams/state.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/readable-stream/lib/internal/streams/stream.js","webpack://design-flow-glsp-server/../../node_modules/winston/node_modules/readable-stream/readable.js","webpack://design-flow-glsp-server/./src/app.ts","webpack://design-flow-glsp-server/./src/diagram/tasklist-diagram-configuration.ts","webpack://design-flow-glsp-server/./src/diagram/tasklist-diagram-module.ts","webpack://design-flow-glsp-server/./src/handler/create-task-node-handler.ts","webpack://design-flow-glsp-server/./src/handler/create-transition-handler.ts","webpack://design-flow-glsp-server/./src/handler/delete-element-handler.ts","webpack://design-flow-glsp-server/./src/handler/tasklist-apply-label-edit-handler.ts","webpack://design-flow-glsp-server/./src/handler/tasklist-change-bounds-handler.ts","webpack://design-flow-glsp-server/./src/handler/tasklist-label-edit-validator.ts","webpack://design-flow-glsp-server/./src/model/tasklist-gmodel-factory.ts","webpack://design-flow-glsp-server/./src/model/tasklist-model-index.ts","webpack://design-flow-glsp-server/./src/model/tasklist-model-state.ts","webpack://design-flow-glsp-server/./src/model/tasklist-model.ts","webpack://design-flow-glsp-server/./src/model/tasklist-storage.ts","webpack://design-flow-glsp-server/external node-commonjs \"buffer\"","webpack://design-flow-glsp-server/external node-commonjs \"child_process\"","webpack://design-flow-glsp-server/external node-commonjs \"crypto\"","webpack://design-flow-glsp-server/external node-commonjs \"events\"","webpack://design-flow-glsp-server/external node-commonjs \"fs\"","webpack://design-flow-glsp-server/external node-commonjs \"http\"","webpack://design-flow-glsp-server/external node-commonjs \"https\"","webpack://design-flow-glsp-server/external node-commonjs \"net\"","webpack://design-flow-glsp-server/external node-commonjs \"node:crypto\"","webpack://design-flow-glsp-server/external node-commonjs \"os\"","webpack://design-flow-glsp-server/external node-commonjs \"path\"","webpack://design-flow-glsp-server/external node-commonjs \"stream\"","webpack://design-flow-glsp-server/external node-commonjs \"string_decoder\"","webpack://design-flow-glsp-server/external node-commonjs \"tls\"","webpack://design-flow-glsp-server/external node-commonjs \"tty\"","webpack://design-flow-glsp-server/external node-commonjs \"url\"","webpack://design-flow-glsp-server/external node-commonjs \"util\"","webpack://design-flow-glsp-server/external node-commonjs \"zlib\"","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/node_modules/commander/index.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/node_modules/commander/lib/argument.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/node_modules/commander/lib/command.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/node_modules/commander/lib/error.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/node_modules/commander/lib/help.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/node_modules/commander/lib/option.js","webpack://design-flow-glsp-server/../../node_modules/@eclipse-glsp/server/node_modules/commander/lib/suggestSimilar.js","webpack://design-flow-glsp-server/../../node_modules/fast-json-patch/index.mjs","webpack://design-flow-glsp-server/../../node_modules/fast-json-patch/module/core.mjs","webpack://design-flow-glsp-server/../../node_modules/fast-json-patch/module/duplex.mjs","webpack://design-flow-glsp-server/../../node_modules/fast-json-patch/module/helpers.mjs","webpack://design-flow-glsp-server/webpack/bootstrap","webpack://design-flow-glsp-server/webpack/runtime/compat get default export","webpack://design-flow-glsp-server/webpack/runtime/define property getters","webpack://design-flow-glsp-server/webpack/runtime/hasOwnProperty shorthand","webpack://design-flow-glsp-server/webpack/runtime/make namespace object","webpack://design-flow-glsp-server/webpack/before-startup","webpack://design-flow-glsp-server/webpack/startup","webpack://design-flow-glsp-server/webpack/after-startup"],"sourcesContent":["/*\n\nThe MIT License (MIT)\n\nOriginal Library\n  - Copyright (c) Marak Squires\n\nAdditional functionality\n - Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n*/\n\nvar colors = {};\nmodule['exports'] = colors;\n\ncolors.themes = {};\n\nvar util = require('util');\nvar ansiStyles = colors.styles = require('./styles');\nvar defineProps = Object.defineProperties;\nvar newLineRegex = new RegExp(/[\\r\\n]+/g);\n\ncolors.supportsColor = require('./system/supports-colors').supportsColor;\n\nif (typeof colors.enabled === 'undefined') {\n  colors.enabled = colors.supportsColor() !== false;\n}\n\ncolors.enable = function() {\n  colors.enabled = true;\n};\n\ncolors.disable = function() {\n  colors.enabled = false;\n};\n\ncolors.stripColors = colors.strip = function(str) {\n  return ('' + str).replace(/\\x1B\\[\\d+m/g, '');\n};\n\n// eslint-disable-next-line no-unused-vars\nvar stylize = colors.stylize = function stylize(str, style) {\n  if (!colors.enabled) {\n    return str+'';\n  }\n\n  var styleMap = ansiStyles[style];\n\n  // Stylize should work for non-ANSI styles, too\n  if (!styleMap && style in colors) {\n    // Style maps like trap operate as functions on strings;\n    // they don't have properties like open or close.\n    return colors[style](str);\n  }\n\n  return styleMap.open + str + styleMap.close;\n};\n\nvar matchOperatorsRe = /[|\\\\{}()[\\]^$+*?.]/g;\nvar escapeStringRegexp = function(str) {\n  if (typeof str !== 'string') {\n    throw new TypeError('Expected a string');\n  }\n  return str.replace(matchOperatorsRe, '\\\\$&');\n};\n\nfunction build(_styles) {\n  var builder = function builder() {\n    return applyStyle.apply(builder, arguments);\n  };\n  builder._styles = _styles;\n  // __proto__ is used because we must return a function, but there is\n  // no way to create a function with a different prototype.\n  builder.__proto__ = proto;\n  return builder;\n}\n\nvar styles = (function() {\n  var ret = {};\n  ansiStyles.grey = ansiStyles.gray;\n  Object.keys(ansiStyles).forEach(function(key) {\n    ansiStyles[key].closeRe =\n      new RegExp(escapeStringRegexp(ansiStyles[key].close), 'g');\n    ret[key] = {\n      get: function() {\n        return build(this._styles.concat(key));\n      },\n    };\n  });\n  return ret;\n})();\n\nvar proto = defineProps(function colors() {}, styles);\n\nfunction applyStyle() {\n  var args = Array.prototype.slice.call(arguments);\n\n  var str = args.map(function(arg) {\n    // Use weak equality check so we can colorize null/undefined in safe mode\n    if (arg != null && arg.constructor === String) {\n      return arg;\n    } else {\n      return util.inspect(arg);\n    }\n  }).join(' ');\n\n  if (!colors.enabled || !str) {\n    return str;\n  }\n\n  var newLinesPresent = str.indexOf('\\n') != -1;\n\n  var nestedStyles = this._styles;\n\n  var i = nestedStyles.length;\n  while (i--) {\n    var code = ansiStyles[nestedStyles[i]];\n    str = code.open + str.replace(code.closeRe, code.open) + code.close;\n    if (newLinesPresent) {\n      str = str.replace(newLineRegex, function(match) {\n        return code.close + match + code.open;\n      });\n    }\n  }\n\n  return str;\n}\n\ncolors.setTheme = function(theme) {\n  if (typeof theme === 'string') {\n    console.log('colors.setTheme now only accepts an object, not a string.  ' +\n      'If you are trying to set a theme from a file, it is now your (the ' +\n      'caller\\'s) responsibility to require the file.  The old syntax ' +\n      'looked like colors.setTheme(__dirname + ' +\n      '\\'/../themes/generic-logging.js\\'); The new syntax looks like '+\n      'colors.setTheme(require(__dirname + ' +\n      '\\'/../themes/generic-logging.js\\'));');\n    return;\n  }\n  for (var style in theme) {\n    (function(style) {\n      colors[style] = function(str) {\n        if (typeof theme[style] === 'object') {\n          var out = str;\n          for (var i in theme[style]) {\n            out = colors[theme[style][i]](out);\n          }\n          return out;\n        }\n        return colors[theme[style]](str);\n      };\n    })(style);\n  }\n};\n\nfunction init() {\n  var ret = {};\n  Object.keys(styles).forEach(function(name) {\n    ret[name] = {\n      get: function() {\n        return build([name]);\n      },\n    };\n  });\n  return ret;\n}\n\nvar sequencer = function sequencer(map, str) {\n  var exploded = str.split('');\n  exploded = exploded.map(map);\n  return exploded.join('');\n};\n\n// custom formatter methods\ncolors.trap = require('./custom/trap');\ncolors.zalgo = require('./custom/zalgo');\n\n// maps\ncolors.maps = {};\ncolors.maps.america = require('./maps/america')(colors);\ncolors.maps.zebra = require('./maps/zebra')(colors);\ncolors.maps.rainbow = require('./maps/rainbow')(colors);\ncolors.maps.random = require('./maps/random')(colors);\n\nfor (var map in colors.maps) {\n  (function(map) {\n    colors[map] = function(str) {\n      return sequencer(colors.maps[map], str);\n    };\n  })(map);\n}\n\ndefineProps(colors, init());\n","module['exports'] = function runTheTrap(text, options) {\n  var result = '';\n  text = text || 'Run the trap, drop the bass';\n  text = text.split('');\n  var trap = {\n    a: ['\\u0040', '\\u0104', '\\u023a', '\\u0245', '\\u0394', '\\u039b', '\\u0414'],\n    b: ['\\u00df', '\\u0181', '\\u0243', '\\u026e', '\\u03b2', '\\u0e3f'],\n    c: ['\\u00a9', '\\u023b', '\\u03fe'],\n    d: ['\\u00d0', '\\u018a', '\\u0500', '\\u0501', '\\u0502', '\\u0503'],\n    e: ['\\u00cb', '\\u0115', '\\u018e', '\\u0258', '\\u03a3', '\\u03be', '\\u04bc',\n      '\\u0a6c'],\n    f: ['\\u04fa'],\n    g: ['\\u0262'],\n    h: ['\\u0126', '\\u0195', '\\u04a2', '\\u04ba', '\\u04c7', '\\u050a'],\n    i: ['\\u0f0f'],\n    j: ['\\u0134'],\n    k: ['\\u0138', '\\u04a0', '\\u04c3', '\\u051e'],\n    l: ['\\u0139'],\n    m: ['\\u028d', '\\u04cd', '\\u04ce', '\\u0520', '\\u0521', '\\u0d69'],\n    n: ['\\u00d1', '\\u014b', '\\u019d', '\\u0376', '\\u03a0', '\\u048a'],\n    o: ['\\u00d8', '\\u00f5', '\\u00f8', '\\u01fe', '\\u0298', '\\u047a', '\\u05dd',\n      '\\u06dd', '\\u0e4f'],\n    p: ['\\u01f7', '\\u048e'],\n    q: ['\\u09cd'],\n    r: ['\\u00ae', '\\u01a6', '\\u0210', '\\u024c', '\\u0280', '\\u042f'],\n    s: ['\\u00a7', '\\u03de', '\\u03df', '\\u03e8'],\n    t: ['\\u0141', '\\u0166', '\\u0373'],\n    u: ['\\u01b1', '\\u054d'],\n    v: ['\\u05d8'],\n    w: ['\\u0428', '\\u0460', '\\u047c', '\\u0d70'],\n    x: ['\\u04b2', '\\u04fe', '\\u04fc', '\\u04fd'],\n    y: ['\\u00a5', '\\u04b0', '\\u04cb'],\n    z: ['\\u01b5', '\\u0240'],\n  };\n  text.forEach(function(c) {\n    c = c.toLowerCase();\n    var chars = trap[c] || [' '];\n    var rand = Math.floor(Math.random() * chars.length);\n    if (typeof trap[c] !== 'undefined') {\n      result += trap[c][rand];\n    } else {\n      result += c;\n    }\n  });\n  return result;\n};\n","// please no\nmodule['exports'] = function zalgo(text, options) {\n  text = text || '   he is here   ';\n  var soul = {\n    'up': [\n      '̍', '̎', '̄', '̅',\n      '̿', '̑', '̆', '̐',\n      '͒', '͗', '͑', '̇',\n      '̈', '̊', '͂', '̓',\n      '̈', '͊', '͋', '͌',\n      '̃', '̂', '̌', '͐',\n      '̀', '́', '̋', '̏',\n      '̒', '̓', '̔', '̽',\n      '̉', 'ͣ', 'ͤ', 'ͥ',\n      'ͦ', 'ͧ', 'ͨ', 'ͩ',\n      'ͪ', 'ͫ', 'ͬ', 'ͭ',\n      'ͮ', 'ͯ', '̾', '͛',\n      '͆', '̚',\n    ],\n    'down': [\n      '̖', '̗', '̘', '̙',\n      '̜', '̝', '̞', '̟',\n      '̠', '̤', '̥', '̦',\n      '̩', '̪', '̫', '̬',\n      '̭', '̮', '̯', '̰',\n      '̱', '̲', '̳', '̹',\n      '̺', '̻', '̼', 'ͅ',\n      '͇', '͈', '͉', '͍',\n      '͎', '͓', '͔', '͕',\n      '͖', '͙', '͚', '̣',\n    ],\n    'mid': [\n      '̕', '̛', '̀', '́',\n      '͘', '̡', '̢', '̧',\n      '̨', '̴', '̵', '̶',\n      '͜', '͝', '͞',\n      '͟', '͠', '͢', '̸',\n      '̷', '͡', ' ҉',\n    ],\n  };\n  var all = [].concat(soul.up, soul.down, soul.mid);\n\n  function randomNumber(range) {\n    var r = Math.floor(Math.random() * range);\n    return r;\n  }\n\n  function isChar(character) {\n    var bool = false;\n    all.filter(function(i) {\n      bool = (i === character);\n    });\n    return bool;\n  }\n\n\n  function heComes(text, options) {\n    var result = '';\n    var counts;\n    var l;\n    options = options || {};\n    options['up'] =\n      typeof options['up'] !== 'undefined' ? options['up'] : true;\n    options['mid'] =\n      typeof options['mid'] !== 'undefined' ? options['mid'] : true;\n    options['down'] =\n      typeof options['down'] !== 'undefined' ? options['down'] : true;\n    options['size'] =\n      typeof options['size'] !== 'undefined' ? options['size'] : 'maxi';\n    text = text.split('');\n    for (l in text) {\n      if (isChar(l)) {\n        continue;\n      }\n      result = result + text[l];\n      counts = {'up': 0, 'down': 0, 'mid': 0};\n      switch (options.size) {\n        case 'mini':\n          counts.up = randomNumber(8);\n          counts.mid = randomNumber(2);\n          counts.down = randomNumber(8);\n          break;\n        case 'maxi':\n          counts.up = randomNumber(16) + 3;\n          counts.mid = randomNumber(4) + 1;\n          counts.down = randomNumber(64) + 3;\n          break;\n        default:\n          counts.up = randomNumber(8) + 1;\n          counts.mid = randomNumber(6) / 2;\n          counts.down = randomNumber(8) + 1;\n          break;\n      }\n\n      var arr = ['up', 'mid', 'down'];\n      for (var d in arr) {\n        var index = arr[d];\n        for (var i = 0; i <= counts[index]; i++) {\n          if (options[index]) {\n            result = result + soul[index][randomNumber(soul[index].length)];\n          }\n        }\n      }\n    }\n    return result;\n  }\n  // don't summon him\n  return heComes(text, options);\n};\n\n","module['exports'] = function(colors) {\n  return function(letter, i, exploded) {\n    if (letter === ' ') return letter;\n    switch (i%3) {\n      case 0: return colors.red(letter);\n      case 1: return colors.white(letter);\n      case 2: return colors.blue(letter);\n    }\n  };\n};\n","module['exports'] = function(colors) {\n  // RoY G BiV\n  var rainbowColors = ['red', 'yellow', 'green', 'blue', 'magenta'];\n  return function(letter, i, exploded) {\n    if (letter === ' ') {\n      return letter;\n    } else {\n      return colors[rainbowColors[i++ % rainbowColors.length]](letter);\n    }\n  };\n};\n\n","module['exports'] = function(colors) {\n  var available = ['underline', 'inverse', 'grey', 'yellow', 'red', 'green',\n    'blue', 'white', 'cyan', 'magenta', 'brightYellow', 'brightRed',\n    'brightGreen', 'brightBlue', 'brightWhite', 'brightCyan', 'brightMagenta'];\n  return function(letter, i, exploded) {\n    return letter === ' ' ? letter :\n      colors[\n          available[Math.round(Math.random() * (available.length - 2))]\n      ](letter);\n  };\n};\n","module['exports'] = function(colors) {\n  return function(letter, i, exploded) {\n    return i % 2 === 0 ? letter : colors.inverse(letter);\n  };\n};\n","/*\nThe MIT License (MIT)\n\nCopyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n*/\n\nvar styles = {};\nmodule['exports'] = styles;\n\nvar codes = {\n  reset: [0, 0],\n\n  bold: [1, 22],\n  dim: [2, 22],\n  italic: [3, 23],\n  underline: [4, 24],\n  inverse: [7, 27],\n  hidden: [8, 28],\n  strikethrough: [9, 29],\n\n  black: [30, 39],\n  red: [31, 39],\n  green: [32, 39],\n  yellow: [33, 39],\n  blue: [34, 39],\n  magenta: [35, 39],\n  cyan: [36, 39],\n  white: [37, 39],\n  gray: [90, 39],\n  grey: [90, 39],\n\n  brightRed: [91, 39],\n  brightGreen: [92, 39],\n  brightYellow: [93, 39],\n  brightBlue: [94, 39],\n  brightMagenta: [95, 39],\n  brightCyan: [96, 39],\n  brightWhite: [97, 39],\n\n  bgBlack: [40, 49],\n  bgRed: [41, 49],\n  bgGreen: [42, 49],\n  bgYellow: [43, 49],\n  bgBlue: [44, 49],\n  bgMagenta: [45, 49],\n  bgCyan: [46, 49],\n  bgWhite: [47, 49],\n  bgGray: [100, 49],\n  bgGrey: [100, 49],\n\n  bgBrightRed: [101, 49],\n  bgBrightGreen: [102, 49],\n  bgBrightYellow: [103, 49],\n  bgBrightBlue: [104, 49],\n  bgBrightMagenta: [105, 49],\n  bgBrightCyan: [106, 49],\n  bgBrightWhite: [107, 49],\n\n  // legacy styles for colors pre v1.0.0\n  blackBG: [40, 49],\n  redBG: [41, 49],\n  greenBG: [42, 49],\n  yellowBG: [43, 49],\n  blueBG: [44, 49],\n  magentaBG: [45, 49],\n  cyanBG: [46, 49],\n  whiteBG: [47, 49],\n\n};\n\nObject.keys(codes).forEach(function(key) {\n  var val = codes[key];\n  var style = styles[key] = [];\n  style.open = '\\u001b[' + val[0] + 'm';\n  style.close = '\\u001b[' + val[1] + 'm';\n});\n","/*\nMIT License\n\nCopyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\nof the Software, and to permit persons to whom the Software is furnished to do\nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\n'use strict';\n\nmodule.exports = function(flag, argv) {\n  argv = argv || process.argv || [];\n\n  var terminatorPos = argv.indexOf('--');\n  var prefix = /^-{1,2}/.test(flag) ? '' : '--';\n  var pos = argv.indexOf(prefix + flag);\n\n  return pos !== -1 && (terminatorPos === -1 ? true : pos < terminatorPos);\n};\n","/*\nThe MIT License (MIT)\n\nCopyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n*/\n\n'use strict';\n\nvar os = require('os');\nvar hasFlag = require('./has-flag.js');\n\nvar env = process.env;\n\nvar forceColor = void 0;\nif (hasFlag('no-color') || hasFlag('no-colors') || hasFlag('color=false')) {\n  forceColor = false;\n} else if (hasFlag('color') || hasFlag('colors') || hasFlag('color=true')\n           || hasFlag('color=always')) {\n  forceColor = true;\n}\nif ('FORCE_COLOR' in env) {\n  forceColor = env.FORCE_COLOR.length === 0\n    || parseInt(env.FORCE_COLOR, 10) !== 0;\n}\n\nfunction translateLevel(level) {\n  if (level === 0) {\n    return false;\n  }\n\n  return {\n    level: level,\n    hasBasic: true,\n    has256: level >= 2,\n    has16m: level >= 3,\n  };\n}\n\nfunction supportsColor(stream) {\n  if (forceColor === false) {\n    return 0;\n  }\n\n  if (hasFlag('color=16m') || hasFlag('color=full')\n      || hasFlag('color=truecolor')) {\n    return 3;\n  }\n\n  if (hasFlag('color=256')) {\n    return 2;\n  }\n\n  if (stream && !stream.isTTY && forceColor !== true) {\n    return 0;\n  }\n\n  var min = forceColor ? 1 : 0;\n\n  if (process.platform === 'win32') {\n    // Node.js 7.5.0 is the first version of Node.js to include a patch to\n    // libuv that enables 256 color output on Windows. Anything earlier and it\n    // won't work. However, here we target Node.js 8 at minimum as it is an LTS\n    // release, and Node.js 7 is not. Windows 10 build 10586 is the first\n    // Windows release that supports 256 colors. Windows 10 build 14931 is the\n    // first release that supports 16m/TrueColor.\n    var osRelease = os.release().split('.');\n    if (Number(process.versions.node.split('.')[0]) >= 8\n        && Number(osRelease[0]) >= 10 && Number(osRelease[2]) >= 10586) {\n      return Number(osRelease[2]) >= 14931 ? 3 : 2;\n    }\n\n    return 1;\n  }\n\n  if ('CI' in env) {\n    if (['TRAVIS', 'CIRCLECI', 'APPVEYOR', 'GITLAB_CI'].some(function(sign) {\n      return sign in env;\n    }) || env.CI_NAME === 'codeship') {\n      return 1;\n    }\n\n    return min;\n  }\n\n  if ('TEAMCITY_VERSION' in env) {\n    return (/^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.test(env.TEAMCITY_VERSION) ? 1 : 0\n    );\n  }\n\n  if ('TERM_PROGRAM' in env) {\n    var version = parseInt((env.TERM_PROGRAM_VERSION || '').split('.')[0], 10);\n\n    switch (env.TERM_PROGRAM) {\n      case 'iTerm.app':\n        return version >= 3 ? 3 : 2;\n      case 'Hyper':\n        return 3;\n      case 'Apple_Terminal':\n        return 2;\n      // No default\n    }\n  }\n\n  if (/-256(color)?$/i.test(env.TERM)) {\n    return 2;\n  }\n\n  if (/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)) {\n    return 1;\n  }\n\n  if ('COLORTERM' in env) {\n    return 1;\n  }\n\n  if (env.TERM === 'dumb') {\n    return min;\n  }\n\n  return min;\n}\n\nfunction getSupportLevel(stream) {\n  var level = supportsColor(stream);\n  return translateLevel(level);\n}\n\nmodule.exports = {\n  supportsColor: getSupportLevel,\n  stdout: getSupportLevel(process.stdout),\n  stderr: getSupportLevel(process.stderr),\n};\n","//\n// Remark: Requiring this file will use the \"safe\" colors API,\n// which will not touch String.prototype.\n//\n//   var colors = require('colors/safe');\n//   colors.red(\"foo\")\n//\n//\nvar colors = require('./lib/colors');\nmodule['exports'] = colors;\n","var enabled = require('enabled');\n\n/**\n * Creates a new Adapter.\n *\n * @param {Function} fn Function that returns the value.\n * @returns {Function} The adapter logic.\n * @public\n */\nmodule.exports = function create(fn) {\n  return function adapter(namespace) {\n    try {\n      return enabled(namespace, fn());\n    } catch (e) { /* Any failure means that we found nothing */ }\n\n    return false;\n  };\n}\n","var adapter = require('./');\n\n/**\n * Extracts the values from process.env.\n *\n * @type {Function}\n * @public\n */\nmodule.exports = adapter(function processenv() {\n  return process.env.DEBUG || process.env.DIAGNOSTICS;\n});\n","/**\n * Contains all configured adapters for the given environment.\n *\n * @type {Array}\n * @public\n */\nvar adapters = [];\n\n/**\n * Contains all modifier functions.\n *\n * @typs {Array}\n * @public\n */\nvar modifiers = [];\n\n/**\n * Our default logger.\n *\n * @public\n */\nvar logger = function devnull() {};\n\n/**\n * Register a new adapter that will used to find environments.\n *\n * @param {Function} adapter A function that will return the possible env.\n * @returns {Boolean} Indication of a successful add.\n * @public\n */\nfunction use(adapter) {\n  if (~adapters.indexOf(adapter)) return false;\n\n  adapters.push(adapter);\n  return true;\n}\n\n/**\n * Assign a new log method.\n *\n * @param {Function} custom The log method.\n * @public\n */\nfunction set(custom) {\n  logger = custom;\n}\n\n/**\n * Check if the namespace is allowed by any of our adapters.\n *\n * @param {String} namespace The namespace that needs to be enabled\n * @returns {Boolean|Promise} Indication if the namespace is enabled by our adapters.\n * @public\n */\nfunction enabled(namespace) {\n  var async = [];\n\n  for (var i = 0; i < adapters.length; i++) {\n    if (adapters[i].async) {\n      async.push(adapters[i]);\n      continue;\n    }\n\n    if (adapters[i](namespace)) return true;\n  }\n\n  if (!async.length) return false;\n\n  //\n  // Now that we know that we Async functions, we know we run in an ES6\n  // environment and can use all the API's that they offer, in this case\n  // we want to return a Promise so that we can `await` in React-Native\n  // for an async adapter.\n  //\n  return new Promise(function pinky(resolve) {\n    Promise.all(\n      async.map(function prebind(fn) {\n        return fn(namespace);\n      })\n    ).then(function resolved(values) {\n      resolve(values.some(Boolean));\n    });\n  });\n}\n\n/**\n * Add a new message modifier to the debugger.\n *\n * @param {Function} fn Modification function.\n * @returns {Boolean} Indication of a successful add.\n * @public\n */\nfunction modify(fn) {\n  if (~modifiers.indexOf(fn)) return false;\n\n  modifiers.push(fn);\n  return true;\n}\n\n/**\n * Write data to the supplied logger.\n *\n * @param {Object} meta Meta information about the log.\n * @param {Array} args Arguments for console.log.\n * @public\n */\nfunction write() {\n  logger.apply(logger, arguments);\n}\n\n/**\n * Process the message with the modifiers.\n *\n * @param {Mixed} message The message to be transformed by modifers.\n * @returns {String} Transformed message.\n * @public\n */\nfunction process(message) {\n  for (var i = 0; i < modifiers.length; i++) {\n    message = modifiers[i].apply(modifiers[i], arguments);\n  }\n\n  return message;\n}\n\n/**\n * Introduce options to the logger function.\n *\n * @param {Function} fn Calback function.\n * @param {Object} options Properties to introduce on fn.\n * @returns {Function} The passed function\n * @public\n */\nfunction introduce(fn, options) {\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var key in options) {\n    if (has.call(options, key)) {\n      fn[key] = options[key];\n    }\n  }\n\n  return fn;\n}\n\n/**\n * Nope, we're not allowed to write messages.\n *\n * @returns {Boolean} false\n * @public\n */\nfunction nope(options) {\n  options.enabled = false;\n  options.modify = modify;\n  options.set = set;\n  options.use = use;\n\n  return introduce(function diagnopes() {\n    return false;\n  }, options);\n}\n\n/**\n * Yep, we're allowed to write debug messages.\n *\n * @param {Object} options The options for the process.\n * @returns {Function} The function that does the logging.\n * @public\n */\nfunction yep(options) {\n  /**\n   * The function that receives the actual debug information.\n   *\n   * @returns {Boolean} indication that we're logging.\n   * @public\n   */\n  function diagnostics() {\n    var args = Array.prototype.slice.call(arguments, 0);\n\n    write.call(write, options, process(args, options));\n    return true;\n  }\n\n  options.enabled = true;\n  options.modify = modify;\n  options.set = set;\n  options.use = use;\n\n  return introduce(diagnostics, options);\n}\n\n/**\n * Simple helper function to introduce various of helper methods to our given\n * diagnostics function.\n *\n * @param {Function} diagnostics The diagnostics function.\n * @returns {Function} diagnostics\n * @public\n */\nmodule.exports = function create(diagnostics) {\n  diagnostics.introduce = introduce;\n  diagnostics.enabled = enabled;\n  diagnostics.process = process;\n  diagnostics.modify = modify;\n  diagnostics.write = write;\n  diagnostics.nope = nope;\n  diagnostics.yep = yep;\n  diagnostics.set = set;\n  diagnostics.use = use;\n\n  return diagnostics;\n}\n","/**\n * An idiot proof logger to be used as default. We've wrapped it in a try/catch\n * statement to ensure the environments without the `console` API do not crash\n * as well as an additional fix for ancient browsers like IE8 where the\n * `console.log` API doesn't have an `apply`, so we need to use the Function's\n * apply functionality to apply the arguments.\n *\n * @param {Object} meta Options of the logger.\n * @param {Array} messages The actuall message that needs to be logged.\n * @public\n */\nmodule.exports = function (meta, messages) {\n  //\n  // So yea. IE8 doesn't have an apply so we need a work around to puke the\n  // arguments in place.\n  //\n  try { Function.prototype.apply.call(console.log, console, messages); }\n  catch (e) {}\n}\n","var colorspace = require('colorspace');\nvar kuler = require('kuler');\n\n/**\n * Prefix the messages with a colored namespace.\n *\n * @param {Array} args The messages array that is getting written.\n * @param {Object} options Options for diagnostics.\n * @returns {Array} Altered messages array.\n * @public\n */\nmodule.exports = function ansiModifier(args, options) {\n  var namespace = options.namespace;\n  var ansi = options.colors !== false\n  ? kuler(namespace +':', colorspace(namespace))\n  : namespace +':';\n\n  args[0] = ansi +' '+ args[0];\n  return args;\n};\n","var create = require('../diagnostics');\nvar tty = require('tty').isatty(1);\n\n/**\n * Create a new diagnostics logger.\n *\n * @param {String} namespace The namespace it should enable.\n * @param {Object} options Additional options.\n * @returns {Function} The logger.\n * @public\n */\nvar diagnostics = create(function dev(namespace, options) {\n  options = options || {};\n  options.colors = 'colors' in options ? options.colors : tty;\n  options.namespace = namespace;\n  options.prod = false;\n  options.dev = true;\n\n  if (!dev.enabled(namespace) && !(options.force || dev.force)) {\n    return dev.nope(options);\n  }\n  \n  return dev.yep(options);\n});\n\n//\n// Configure the logger for the given environment.\n//\ndiagnostics.modify(require('../modifiers/namespace-ansi'));\ndiagnostics.use(require('../adapters/process.env'));\ndiagnostics.set(require('../logger/console'));\n\n//\n// Expose the diagnostics logger.\n//\nmodule.exports = diagnostics;\n","//\n// Select the correct build version depending on the environment.\n//\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./production.js');\n} else {\n  module.exports = require('./development.js');\n}\n","/********************************************************************************\n * Copyright (c) 2022-2024 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { DefaultTypes as types } from '@eclipse-glsp/protocol';\nimport { GButton } from './gbutton';\nimport { GCompartment } from './gcompartment';\nimport { GEdge } from './gedge';\nimport { GGraph } from './ggraph';\nimport { GHtmlRoot } from './ghtml-root';\nimport { GIssueMarker } from './gissue-marker';\nimport { GLabel } from './glabel';\nimport { GModelElementConstructor } from './gmodel-element';\nimport { GNode } from './gnode';\nimport { GPort } from './gport';\nimport { GPreRenderedElement } from './gpre-rendered-element';\nimport { GShapedPreRenderedElement } from './gshaped-prerendered-element';\n\nexport function getDefaultMapping(): Map<string, GModelElementConstructor> {\n    // The GModelSerializer (packages/server-node/src/features/model/gmodel-serializer.ts)\n    // has a built-in subtype handling.\n    // If the mapping for a subtype, e.g. for comp:header, is not found it will use the mapping for comp instead.\n    const mapping = new Map<string, GModelElementConstructor>();\n    mapping.set(types.GRAPH, GGraph);\n    mapping.set(types.NODE, GNode);\n    mapping.set(types.EDGE, GEdge);\n    mapping.set(types.PORT, GPort);\n    mapping.set(types.LABEL, GLabel);\n    mapping.set(types.COMPARTMENT, GCompartment);\n    mapping.set(types.BUTTON, GButton);\n    mapping.set(types.ISSUE_MARKER, GIssueMarker);\n\n    mapping.set(types.HTML, GHtmlRoot);\n    mapping.set(types.PRE_RENDERED, GPreRenderedElement);\n    mapping.set(types.FOREIGN_OBJECT, GShapedPreRenderedElement);\n    return mapping;\n}\n","/********************************************************************************\n * Copyright (c) 2022-2024 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Point } from '@eclipse-glsp/protocol';\nimport { GModelElement, GModelElementBuilder } from './gmodel-element';\n\nexport const GAlignable = Symbol('GAlignable');\n\nexport interface GAlignable {\n    alignment: Point;\n    [GAlignable]: boolean;\n}\n\nexport function isGAlignable<G extends GModelElement>(element: G): element is G & GAlignable {\n    return GAlignable in element && element[GAlignable] === true;\n}\n\nexport type GAlignableBuilder<G extends GModelElement = GModelElement> = GModelElementBuilder<G & GAlignable>;\n\nexport namespace GAlignableBuilder {\n    export function alignment<B extends GAlignableBuilder>(builder: B, pointOrX: Point | number, y?: number): B {\n        const proxy = builder['proxy'];\n        if (typeof pointOrX === 'object') {\n            proxy.alignment = pointOrX;\n        } else if (y !== undefined) {\n            proxy.alignment = { x: pointOrX, y };\n        } else {\n            // Optionally handle cases where y is not provided\n            proxy.alignment = { x: pointOrX, y: 0 };\n            console.warn(\n                `Incomplete parameters for GAlignableBuilder.alignment function. Setting alignment to ${JSON.stringify(proxy.alignment)}`\n            );\n        }\n        return builder;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2024 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Dimension, Point } from '@eclipse-glsp/protocol';\nimport { GModelElement, GModelElementBuilder } from './gmodel-element';\n\nexport const GBoundsAware = Symbol('GBoundsAware');\n\nexport interface GBoundsAware {\n    position?: Point;\n    size?: Dimension;\n    [GBoundsAware]: boolean;\n}\n\nexport function isGBoundsAware<G extends GModelElement>(element: G): element is G & GBoundsAware {\n    return GBoundsAware in element && element[GBoundsAware] === true;\n}\n\nexport type GBoundsAwareBuilder<G extends GModelElement = GModelElement> = GModelElementBuilder<G & GBoundsAware>;\n\nexport namespace GBoundsAwareBuilder {\n    export function position<B extends GBoundsAwareBuilder>(builder: B, pointOrX: Point | number, y?: number): B {\n        const proxy = builder['proxy'];\n        if (typeof pointOrX === 'object') {\n            proxy.position = pointOrX;\n        } else if (y !== undefined) {\n            proxy.position = { x: pointOrX, y };\n        } else {\n            // Optionally handle cases where y is not provided\n            proxy.position = { x: pointOrX, y: 0 };\n            console.warn(\n                `Incomplete parameters for GBoundsAwareBuilder.position function. Setting position to ${JSON.stringify(proxy.position)}`\n            );\n        }\n        return builder;\n    }\n\n    export function size<B extends GBoundsAwareBuilder>(builder: B, sizeOrWidth: Dimension | number, height?: number): B {\n        const proxy = builder['proxy'];\n        if (typeof sizeOrWidth === 'object') {\n            proxy.size = sizeOrWidth;\n        } else if (height !== undefined) {\n            proxy.size = { width: sizeOrWidth, height };\n        } else {\n            // Optionally handle cases where height is not provided\n            proxy.size = { width: sizeOrWidth, height: 0 };\n            console.warn(`Incomplete parameters for GBoundsAwareBuilder.size function. Setting size to ${JSON.stringify(proxy.size)}`);\n        }\n        return builder;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { DefaultTypes } from '@eclipse-glsp/protocol';\nimport { GModelElementConstructor } from './gmodel-element';\nimport { GShapeElement, GShapeElementBuilder } from './gshape-element';\n\nexport class GButton extends GShapeElement {\n    static builder<G extends GButton = GButton>(constructor?: GModelElementConstructor<G>): GButtonBuilder {\n        return new GButtonBuilder(constructor ?? GButton).type(DefaultTypes.BUTTON_EXPAND);\n    }\n\n    override type = DefaultTypes.BUTTON_EXPAND;\n    enabled = true;\n}\n\nexport class GButtonBuilder<G extends GButton = GButton> extends GShapeElementBuilder<G> {\n    enabled(enabled: boolean): this {\n        this.proxy.enabled = enabled;\n        return this;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { DefaultTypes } from '@eclipse-glsp/protocol';\nimport { GLayouting, GLayoutingBuilder } from './glayouting';\nimport { GShapeElement, GShapeElementBuilder } from './gshape-element';\n\nexport class GCompartment extends GShapeElement implements GLayouting {\n    static builder(): GCompartmentBuilder {\n        return new GCompartmentBuilder(GCompartment).type(DefaultTypes.COMPARTMENT);\n    }\n\n    override type = DefaultTypes.COMPARTMENT;\n    layout?: string;\n    [GLayouting] = true;\n}\n\nexport class GCompartmentBuilder<G extends GCompartment = GCompartment> extends GShapeElementBuilder<G> {\n    layout(layout?: string): this {\n        return GLayoutingBuilder.layout(this, layout);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { EdgeSide } from '@eclipse-glsp/protocol';\nimport { GModelElement, GModelElementBuilder } from './gmodel-element';\n\nexport interface GEdgePlacement {\n    rotate: boolean;\n    side: EdgeSide;\n    position: number;\n    offset: number;\n}\n\nexport const GEdgeLayoutable = Symbol('GEdgeLayoutable');\n\nexport interface GEdgeLayoutable {\n    edgePlacement?: GEdgePlacement;\n    [GEdgeLayoutable]: boolean;\n}\n\nexport function isGEdgeLayoutable<G extends GModelElement>(element: G): element is G & GEdgeLayoutable {\n    return GEdgeLayoutable in element && element[GEdgeLayoutable] === true;\n}\n\nexport type GEdgeLayoutableBuilder<G extends GModelElement = GModelElement> = GModelElementBuilder<G & GEdgeLayoutable>;\n\nexport namespace GEdgeLayoutableBuilder {\n    export function edgePlacement<B extends GEdgeLayoutableBuilder>(builder: B, placement?: GEdgePlacement): B {\n        builder['proxy'].edgePlacement = placement;\n        return builder;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { DefaultTypes, flatPush, MaybeArray, Point } from '@eclipse-glsp/protocol';\nimport { GModelElement, GModelElementBuilder } from './gmodel-element';\n\nexport class GEdge extends GModelElement {\n    static builder(): GEdgeBuilder {\n        return new GEdgeBuilder(GEdge).type(DefaultTypes.EDGE);\n    }\n\n    override type = DefaultTypes.EDGE;\n    routingPoints: Point[] = [];\n    sourceId: string;\n    targetId: string;\n    routerKind?: string;\n}\n\nexport namespace GEdge {\n    export function is(object: unknown): object is GEdge {\n        return GEdge.is(object);\n    }\n}\n\nexport class GEdgeBuilder<G extends GEdge = GEdge> extends GModelElementBuilder<G> {\n    source(source: GModelElement): this {\n        this.proxy.sourceId = source.id;\n        return this;\n    }\n\n    sourceId(sourceId: string): this {\n        this.proxy.sourceId = sourceId;\n        return this;\n    }\n\n    target(target: GModelElement): this {\n        this.proxy.targetId = target.id;\n        return this;\n    }\n\n    targetId(targetId: string): this {\n        this.proxy.targetId = targetId;\n        return this;\n    }\n\n    routerKind(routerKind: string): this {\n        this.proxy.routerKind = routerKind;\n        return this;\n    }\n\n    addRoutingPoint(x: number, y: number): this;\n    addRoutingPoint(point: Point): this;\n    addRoutingPoint(xOrPoint: Point | number, y?: number): this {\n        if (typeof xOrPoint === 'object') {\n            this.proxy.routingPoints.push(xOrPoint);\n        } else if (y) {\n            this.proxy.routingPoints.push({ x: xOrPoint, y });\n        }\n        return this;\n    }\n\n    addRoutingPoints(routingPoints: Point[]): this;\n    addRoutingPoints(...routingPoints: Point[]): this;\n    addRoutingPoints(...routingPoints: MaybeArray<Point>[]): this {\n        flatPush(this.proxy.routingPoints, routingPoints);\n        return this;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { GShapePreRenderedElementBuilder, GShapedPreRenderedElement } from './gshaped-prerendered-element';\n\n/**\n * A `foreignObject` element to be transferred to the DOM within the SVG.\n *\n * This can be useful to to benefit from e.g. HTML rendering features, such as line wrapping, inside of\n * the SVG diagram.  Note that `foreignObject` is not supported by all browsers and SVG viewers may not\n * support rendering the `foreignObject` content.\n *\n * If no dimensions are specified in the schema element, this element will obtain the dimension of\n * its parent to fill the entire available room. Thus, this element requires specified bounds itself\n * or bounds to be available for its parent.\n */\nexport class GForeignObjectElement extends GShapedPreRenderedElement {\n    static override builder(): GForeignObjectElementBuilder {\n        return new GForeignObjectElementBuilder(GForeignObjectElement);\n    }\n    namespace: string;\n}\n\nexport class GForeignObjectElementBuilder<\n    G extends GForeignObjectElement = GForeignObjectElement\n> extends GShapePreRenderedElementBuilder<G> {\n    namespace(namespace: string): this {\n        this.proxy.namespace = namespace;\n        return this;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022 StMicroelectronics.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/**\n * TS implementation of the GLSP graph definition\n * (https://github.com/eclipse-glsp/glsp-server/tree/master/plugins/org.eclipse.glsp.graph/src-gen/org/eclipse/glsp/graph)\n * Parts of the implementation is derived from Sprotty's SModel API\n * (https://github.com/eclipse/sprotty/blob/master/packages/sprotty/src/base/model/smodel.ts)\n */\nimport { Args, DefaultTypes as types, Dimension, JsonPrimitive, Point } from '@eclipse-glsp/protocol';\nimport { GBoundsAware, GBoundsAwareBuilder } from './gbounds-aware';\nimport { GLayoutable, GLayoutableBuilder } from './glayoutable';\nimport { GModelRoot, GModelRootBuilder } from './gmodel-element';\n\nexport class GGraph extends GModelRoot implements GBoundsAware, GLayoutable {\n    static override builder(): GGraphBuilder {\n        return new GGraphBuilder(GGraph);\n    }\n\n    override type = types.GRAPH;\n    position: Point = Point.ORIGIN;\n    size?: Dimension;\n    layoutOptions?: Args;\n    [GBoundsAware] = true;\n    [GLayoutable] = true;\n}\n\nexport class GGraphBuilder<G extends GGraph = GGraph> extends GModelRootBuilder<G> {\n    position(x: number, y: number): this;\n    position(position: Point): this;\n    position(positionOrX: Point | number, y?: number): this {\n        return GBoundsAwareBuilder.position(this, positionOrX, y);\n    }\n\n    size(width: number, height: number): this;\n    size(size: Dimension): this;\n    size(sizeOrWidth: Dimension | number, height?: number): this {\n        return GBoundsAwareBuilder.size(this, sizeOrWidth, height);\n    }\n\n    addLayoutOption(key: string, value: JsonPrimitive): this {\n        return GLayoutableBuilder.addLayoutOption(this, key, value);\n    }\n\n    addLayoutOptions(layoutOptions: Args): this;\n    addLayoutOptions(layoutOptions: Map<string, JsonPrimitive>): this;\n    addLayoutOptions(layoutOptions: Args | Map<string, JsonPrimitive>): this {\n        return GLayoutableBuilder.addLayoutOptions(this, layoutOptions);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2024 StMicroelectronics.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { DefaultTypes as types, flatPush, MaybeArray } from '@eclipse-glsp/protocol';\nimport { GModelRoot, GModelRootBuilder } from './gmodel-element';\n\n/**\n * Root model element class for HTML content. Usually this is rendered with a `div` DOM element.\n */\nexport class GHtmlRoot extends GModelRoot {\n    static override builder(): GHtmlRootBuilder {\n        return new GHtmlRootBuilder(GHtmlRoot);\n    }\n\n    override type = types.HTML;\n    classes: string[] = [];\n}\n\nexport class GHtmlRootBuilder<G extends GHtmlRoot = GHtmlRoot> extends GModelRootBuilder<G> {\n    addClasses(classes: string[]): this;\n    addClasses(...classes: string[]): this;\n    addClasses(...classes: MaybeArray<string>[]): this {\n        flatPush(this.proxy.classes, classes);\n        return this;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { DefaultTypes, flatPush, GIssue, GIssueSeverity, MaybeArray } from '@eclipse-glsp/protocol';\nimport { GShapeElement, GShapeElementBuilder } from './gshape-element';\n\nexport class GIssueMarker extends GShapeElement {\n    static builder(): GIssueMarkerBuilder {\n        return new GIssueMarkerBuilder(GIssueMarker).type(DefaultTypes.ISSUE_MARKER);\n    }\n\n    override type = DefaultTypes.ISSUE_MARKER;\n    issues: GIssue[] = [];\n}\n\nexport class GIssueMarkerBuilder<G extends GIssueMarker = GIssueMarker> extends GShapeElementBuilder<G> {\n    addIssue(issue: GIssue): this;\n    addIssue(message: string, severity: GIssueSeverity): this;\n    addIssue(issueOrMessage: GIssue | string, severity?: GIssueSeverity): this {\n        if (typeof issueOrMessage === 'object') {\n            this.proxy.issues.push(issueOrMessage);\n        } else if (severity) {\n            this.proxy.issues.push({ message: issueOrMessage, severity });\n        }\n        return this;\n    }\n\n    addIssues(issues: GIssue[]): this;\n    addIssues(...issues: GIssue[]): this;\n    addIssues(...issues: MaybeArray<GIssue>[]): this {\n        flatPush(this.proxy.issues, issues);\n        return this;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { DefaultTypes, Point } from '@eclipse-glsp/protocol';\nimport { GAlignable, GAlignableBuilder } from './galignable';\nimport { GEdgeLayoutable, GEdgeLayoutableBuilder, GEdgePlacement } from './gedge-layoutable';\nimport { GModelElementConstructor } from './gmodel-element';\nimport { GShapeElement, GShapeElementBuilder } from './gshape-element';\n\nexport class GLabel extends GShapeElement implements GAlignable, GEdgeLayoutable {\n    static builder<G extends GLabel = GLabel>(constructor?: GModelElementConstructor<G>): GLabelBuilder {\n        return new GLabelBuilder(constructor ?? GLabel).type(DefaultTypes.LABEL);\n    }\n\n    override type = DefaultTypes.LABEL;\n    text: string;\n    alignment: Point = Point.ORIGIN;\n    edgePlacement?: GEdgePlacement;\n    [GAlignable] = true;\n    [GEdgeLayoutable] = true;\n}\n\nexport class GLabelBuilder<G extends GLabel = GLabel> extends GShapeElementBuilder<G> {\n    alignment(x: number, y: number): this;\n    alignment(alignment: Point): this;\n    alignment(xOrAlign: number | Point, y?: number): this {\n        return GAlignableBuilder.alignment(this, xOrAlign, y);\n    }\n\n    text(text: string): this {\n        this.proxy.text = text;\n        return this;\n    }\n\n    edgePlacement(placement: GEdgePlacement): this {\n        return GEdgeLayoutableBuilder.edgePlacement(this, placement);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Args, JsonPrimitive } from '@eclipse-glsp/protocol';\nimport { GModelElement, GModelElementBuilder } from './gmodel-element';\n\nexport const GLayoutable = Symbol('GLayoutable');\n\nexport interface GLayoutable {\n    layoutOptions?: Args;\n    [GLayoutable]: boolean;\n}\n\nexport function isGLayoutable<G extends GModelElement>(element: G): element is G & GLayoutable {\n    return GLayoutable in element && element[GLayoutable] === true;\n}\n\nexport type GLayoutableBuilder = GModelElementBuilder<GModelElement & GLayoutable>;\n\nexport namespace GLayoutableBuilder {\n    export function addLayoutOption<B extends GLayoutableBuilder>(builder: B, key: string, value: JsonPrimitive): B {\n        const proxy = builder['proxy'];\n        if (!proxy.layoutOptions) {\n            proxy.layoutOptions = {};\n        }\n        proxy.layoutOptions[key] = value;\n        return builder;\n    }\n\n    export function addLayoutOptions<B extends GLayoutableBuilder>(builder: B, layoutOptions: Args | Map<string, JsonPrimitive>): B {\n        const toAssign: Args = {};\n        const proxy = builder['proxy'];\n        if (layoutOptions instanceof Map) {\n            [...layoutOptions.keys()].forEach(key => (toAssign[key] = layoutOptions.get(key)!));\n        } else {\n            Object.keys(layoutOptions).forEach(key => (toAssign[key] = layoutOptions[key]));\n        }\n        if (proxy.layoutOptions) {\n            Object.assign(proxy.layoutOptions, toAssign);\n        } else {\n            proxy.layoutOptions = toAssign;\n        }\n        return builder;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { GModelElement, GModelElementBuilder } from './gmodel-element';\n\nexport const GLayouting = Symbol('GLayouting');\n\nexport interface GLayouting {\n    layout?: string;\n    [GLayouting]: boolean;\n}\n\nexport function isGLayouting<G extends GModelElement>(element: G): element is G & GLayouting {\n    return GLayouting in element && element[GLayouting] === true;\n}\n\nexport type GLayoutingBuilder = GModelElementBuilder<GModelElement & GLayouting>;\n\nexport namespace GLayoutingBuilder {\n    export function layout<B extends GLayoutingBuilder>(builder: B, newLayout?: string): B {\n        builder['proxy'].layout = newLayout;\n        return builder;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2024 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    Args,\n    Bounds,\n    Dimension,\n    GModelElementSchema,\n    GModelRootSchema,\n    JsonPrimitive,\n    MaybeArray,\n    Point,\n    flatPush\n} from '@eclipse-glsp/protocol';\nimport * as uuid from 'uuid';\n\nexport type GModelElementConstructor<G extends GModelElement = GModelElement> = new () => G;\n\n/**\n * Base type for all elements of the graphical model.\n * Each model element must have a unique ID and a type that is used to look up its view.\n */\nexport abstract class GModelElement implements GModelElementSchema {\n    /**\n     * The `type` of a `GModelElement` has two main purposes. It is used by the GLSP client\n     * during the rendering phase to lookup the View that is responsible for rendering this element.\n     * In addition, it serves as the discriminator for serialization & deserialization of `GModeElements` and their corresponding\n     * `GModelElementSchema`. e.g. If the glsp server receives a `GModelElementSchema` (plain JSON object) the type is used to\n     * lookup and construct the corresponding `GModelElement` class.\n     */\n    type: string;\n    /**\n     * Each model element must have a unique ID. Duplicate ids in the graphical element will result in an error during the\n     * rendering phase.\n     */\n    id: string;\n    /**\n     * A set of css classes that should be applied to the DOM element that corresponds to this element.\n     */\n    cssClasses: string[] = [];\n    /**\n     * A `GModelElement can have an arbitrary amount of children. This parent-child relation ship is also reflected in\n     * the corresponding DOM element i.e. DOM elements that reflect children of this element are also children\n     * of the DOM element that reflects this element.\n     */\n    children: GModelElement[] = [];\n    /**\n     * Each `GModelElement` (apart from  the root element) must have an assigned parent. Orphan elements are not allowed.\n     */\n    parent: GModelElement;\n    /**\n     * Additional custom arguments. Can be used to transmit additional information between client & server without\n     * having to extend the model.\n     */\n    args?: Args;\n\n    /**\n     * Retrieve the {@link GModelRoot} element by traversing up the parent hierachy.\n     */\n    get root(): GModelRoot {\n        let current: GModelElement = this;\n        while (!(current instanceof GModelRoot)) {\n            current = current.parent;\n        }\n        return current;\n    }\n}\n\n/**\n * A fluent builder API that simplifies the construction of complex {@link GModelElement}s.\n * The builder API is derived from the Java GLSP server implementation where it is used to hide the complexity\n * of creating EMF objects. However, the API is also useful in a Typescript/Node context to declare the creation of a new\n * {@link GModelElement} in a more concise way.\n */\nexport abstract class GModelElementBuilder<G extends GModelElement> {\n    protected proxy: G;\n    protected elementConstructor: GModelElementConstructor<G>;\n\n    constructor(elementConstructor: GModelElementConstructor<G>) {\n        this.elementConstructor = elementConstructor;\n        this.proxy = new elementConstructor();\n        this.proxy.cssClasses = [];\n        this.proxy.children = [];\n        this.proxy.id = uuid.v4();\n    }\n\n    reset(): this {\n        this.proxy = new this.elementConstructor();\n        return this;\n    }\n\n    build(): G {\n        const element = new this.elementConstructor();\n        Object.assign(element, this.proxy);\n        element.children.forEach(child => (child.parent = element));\n        if (element.id === undefined) {\n            throw new Error('The `id` property of a GModelElement must not be undefined!');\n        }\n        if (element.type === undefined) {\n            throw new Error('The `type` property of a GModelElement must not be undefined!');\n        }\n        return element;\n    }\n\n    id(id: string): this {\n        this.proxy.id = id;\n        return this;\n    }\n\n    type(type: string): this {\n        this.proxy.type = type;\n        return this;\n    }\n\n    addCssClass(cssClass: string): this {\n        this.proxy.cssClasses.push(cssClass);\n        return this;\n    }\n\n    addCssClasses(cssClasses: string[]): this;\n    addCssClasses(...cssClasses: string[]): this;\n    addCssClasses(...cssClasses: MaybeArray<string>[]): this {\n        flatPush(this.proxy.cssClasses, cssClasses);\n        return this;\n    }\n\n    add(child: GModelElement): this {\n        this.proxy.children.push(child);\n        return this;\n    }\n\n    addChildren(children: GModelElement[]): this;\n    addChildren(...children: GModelElement[]): this;\n    addChildren(...children: MaybeArray<GModelElement>[]): this {\n        flatPush(this.proxy.children, children);\n        return this;\n    }\n\n    addArg(key: string, value: JsonPrimitive): this {\n        if (!this.proxy.args) {\n            this.proxy.args = {};\n        }\n        this.proxy.args[key] = value;\n        return this;\n    }\n\n    addArgs(args: Args): this;\n    addArgs(args: Map<string, JsonPrimitive>): this;\n    addArgs(args: Args | Map<string, JsonPrimitive>): this {\n        const toAssign: Args = {};\n        if (args instanceof Map) {\n            [...args.keys()].forEach(key => (toAssign[key] = args.get(key)!));\n        } else {\n            Object.keys(args).forEach(key => (toAssign[key] = args[key]));\n        }\n        if (this.proxy.args) {\n            Object.assign(this.proxy.args, toAssign);\n        } else {\n            this.proxy.args = toAssign;\n        }\n        return this;\n    }\n}\n\nexport class GModelRoot extends GModelElement implements GModelRootSchema {\n    static builder(): GModelRootBuilder {\n        return new GModelRootBuilder(GModelRoot);\n    }\n\n    canvasBounds?: Bounds;\n    revision?: number;\n}\n\nexport class GModelRootBuilder<G extends GModelRoot = GModelRoot> extends GModelElementBuilder<G> {\n    revision(revision: number): this {\n        this.proxy.revision = revision;\n        return this;\n    }\n\n    canvasBounds(position: Point, size: Dimension): this;\n    canvasBounds(bounds: Bounds): this;\n    canvasBounds(positionOrBounds: Point | Bounds, size?: Dimension): this {\n        let bounds: Bounds;\n        if (size) {\n            bounds = { ...positionOrBounds, ...size };\n        } else {\n            bounds = positionOrBounds as Bounds;\n        }\n        this.proxy.canvasBounds = bounds;\n        return this;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { GModelElement, GModelElementConstructor } from './gmodel-element';\n\nexport type Predicate<T> = (element: T) => boolean;\n\n/**\n * Returns the first element matching the search predicate starting from the given\n * element and walking up the parent hierarchy.\n *\n * @param element   The element to start the search from.\n * @param searchPredicate The predicate which the element should match.\n * @returns The first matching element or `undefined`.\n */\nexport function findParent(element: GModelElement, searchPredicate: Predicate<GModelElement>): GModelElement | undefined {\n    if (!element) {\n        return undefined;\n    }\n    if (searchPredicate(element)) {\n        return element;\n    }\n    const parent = element.parent;\n    return parent ? findParent(parent, searchPredicate) : undefined;\n}\n\n/**\n * Returns the first parent element that is an instance of the given {@link GModelElementConstructor} starting from the given element.\n * (recursively walking up the parent hierarchy).\n *\n * @param element   The element to start the search from.\n * @param constructor The queried parent class ({@link GModelElementConstructor}).\n * @returns The first matching parent element or `undefined`.\n */\nexport function findParentByClass<G extends GModelElement>(\n    element: GModelElement,\n    constructor: GModelElementConstructor<G>\n): G | undefined {\n    const predicate: Predicate<GModelElement> = element => element instanceof constructor;\n    const result = findParent(element, predicate);\n    if (result) {\n        return result as G;\n    }\n    return undefined;\n}\n","/********************************************************************************\n * Copyright (c) 2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { DefaultTypes } from '@eclipse-glsp/protocol';\nimport { GEdgeLayoutable, GEdgeLayoutableBuilder, GEdgePlacement } from './gedge-layoutable';\nimport { GLayouting, GLayoutingBuilder } from './glayouting';\nimport { GShapeElement, GShapeElementBuilder } from './gshape-element';\n\nexport class GNode extends GShapeElement implements GEdgeLayoutable, GLayouting {\n    static builder(): GNodeBuilder {\n        return new GNodeBuilder(GNode).type(DefaultTypes.NODE);\n    }\n\n    override type = DefaultTypes.NODE;\n    edgePlacement?: GEdgePlacement;\n    layout?: string;\n    [GEdgeLayoutable] = true;\n    [GLayouting] = true;\n}\n\nexport class GNodeBuilder<G extends GNode = GNode> extends GShapeElementBuilder<G> {\n    edgePlacement(placement: GEdgePlacement): this {\n        return GEdgeLayoutableBuilder.edgePlacement(this, placement);\n    }\n\n    layout(layout?: string): this {\n        return GLayoutingBuilder.layout(this, layout);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { DefaultTypes } from '@eclipse-glsp/protocol';\nimport { GShapeElement, GShapeElementBuilder } from './gshape-element';\n\nexport class GPort extends GShapeElement {\n    static builder(): GShapeElementBuilder<GPort> {\n        return new GShapeElementBuilder(GPort).type(DefaultTypes.PORT);\n    }\n\n    override type = DefaultTypes.PORT;\n}\n","/********************************************************************************\n * Copyright (c) 2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { DefaultTypes } from '@eclipse-glsp/protocol';\nimport { GModelElement, GModelElementBuilder } from './gmodel-element';\n\n/**\n * Pre-rendered elements contain HTML or SVG code to be transferred to the DOM. This can be useful to\n * render complex figures or to compute the view on the server instead of the client code.\n * Pre rendered elements are often used for the popup model that is created by a `PopupModelFactory`.\n * A popup model is rendered when hovering over a element and for many common use cases e.g rendering a tooltip\n * this model can be computed entirely on the server side.\n */\nexport class GPreRenderedElement extends GModelElement {\n    static builder(): GPreRenderedElementBuilder {\n        return new GPreRenderedElementBuilder(GPreRenderedElement).type(DefaultTypes.PRE_RENDERED);\n    }\n\n    code: string;\n}\n\nexport class GPreRenderedElementBuilder<G extends GPreRenderedElement = GPreRenderedElement> extends GModelElementBuilder<G> {\n    code(code: string): this {\n        this.proxy.code = code;\n        return this;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { GModelElement, GModelElementBuilder } from './gmodel-element';\n\nexport const GResizable = Symbol('GResizable');\n\nexport interface GResizable {\n    resizeLocations?: GResizeLocation[];\n    [GResizable]: boolean;\n}\n\nexport function isGResizable<G extends GModelElement>(element: G): element is G & GResizable {\n    return GResizable in element && element[GResizable] === true;\n}\n\nexport type GResizableBuilder<G extends GModelElement = GModelElement> = GModelElementBuilder<G & GResizable>;\n\nexport namespace GResizableBuilder {\n    export function resizeLocations<B extends GResizableBuilder>(builder: B, resizeLocations?: GResizeLocation[]): B {\n        const proxy = builder['proxy'];\n        proxy.resizeLocations = resizeLocations;\n        return builder;\n    }\n}\n\nexport enum GResizeLocation {\n    TopLeft = 'top-left',\n    Top = 'top',\n    TopRight = 'top-right',\n    Right = 'right',\n    BottomRight = 'bottom-right',\n    Bottom = 'bottom',\n    BottomLeft = 'bottom-left',\n    Left = 'left'\n}\n\nexport namespace GResizeLocation {\n    export const CORNERS: GResizeLocation[] = [\n        GResizeLocation.TopLeft,\n        GResizeLocation.TopRight,\n        GResizeLocation.BottomRight,\n        GResizeLocation.BottomLeft\n    ];\n    export const CROSS: GResizeLocation[] = [GResizeLocation.Top, GResizeLocation.Right, GResizeLocation.Bottom, GResizeLocation.Left];\n    export const ALL: GResizeLocation[] = [...GResizeLocation.CORNERS, ...GResizeLocation.CROSS];\n}\n","/********************************************************************************\n * Copyright (c) 2022-2024 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Args, Dimension, JsonPrimitive, Point } from '@eclipse-glsp/protocol';\nimport { GBoundsAware, GBoundsAwareBuilder } from './gbounds-aware';\nimport { GLayoutable, GLayoutableBuilder } from './glayoutable';\nimport { GModelElement, GModelElementBuilder } from './gmodel-element';\nimport { GResizable, GResizableBuilder, GResizeLocation } from './gresizable';\n\nexport abstract class GShapeElement extends GModelElement implements GBoundsAware, GLayoutable, GResizable {\n    layoutOptions?: Args;\n    position: Point;\n    size: Dimension;\n    resizeLocations?: GResizeLocation[];\n    [GBoundsAware] = true;\n    [GLayoutable] = true;\n    [GResizable] = true;\n}\n\nexport class GShapeElementBuilder<G extends GShapeElement> extends GModelElementBuilder<G> {\n    position(x: number, y: number): this;\n    position(position: Point): this;\n    position(pointOrX: Point | number, y?: number): this {\n        return GBoundsAwareBuilder.position(this, pointOrX, y);\n    }\n\n    size(width: number, height: number): this;\n    size(size: Dimension): this;\n    size(sizeOrWidth: Dimension | number, height?: number): this {\n        return GBoundsAwareBuilder.size(this, sizeOrWidth, height);\n    }\n\n    addLayoutOption(key: string, value: JsonPrimitive): this {\n        return GLayoutableBuilder.addLayoutOption(this, key, value);\n    }\n\n    addLayoutOptions(layoutOptions: Args): this;\n    addLayoutOptions(layoutOptions: Map<string, JsonPrimitive>): this;\n    addLayoutOptions(layoutOptions: Args | Map<string, JsonPrimitive>): this {\n        return GLayoutableBuilder.addLayoutOptions(this, layoutOptions);\n    }\n\n    resizeLocations(resizeLocations?: GResizeLocation[]): this {\n        return GResizableBuilder.resizeLocations(this, resizeLocations);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Dimension, Point } from '@eclipse-glsp/protocol';\nimport { GAlignable } from './galignable';\nimport { GBoundsAware, GBoundsAwareBuilder } from './gbounds-aware';\nimport { GModelElementBuilder } from './gmodel-element';\nimport { GPreRenderedElement } from './gpre-rendered-element';\n\n/**\n * Pre-rendered elements contain HTML or SVG code to be transferred to the DOM. This can be useful to\n * render complex figures or to compute the view on the server instead of the client code.\n * Pre rendered elements are often used for the popup model that is created by a `PopupModelFactory`.\n * A popup model is rendered when hovering over a element and for many common use cases e.g rendering a tooltip\n * this model can be computed entirely on the server side.\n */\nexport class GShapedPreRenderedElement extends GPreRenderedElement implements GBoundsAware, GAlignable {\n    static override builder(): GShapePreRenderedElementBuilder {\n        return new GShapePreRenderedElementBuilder(GShapedPreRenderedElement);\n    }\n\n    position: Point;\n    size: Dimension;\n    alignment: Point;\n    [GBoundsAware] = true;\n    [GAlignable] = true;\n}\n\nexport class GShapePreRenderedElementBuilder<\n    G extends GShapedPreRenderedElement = GShapedPreRenderedElement\n> extends GModelElementBuilder<G> {\n    code(code: string): this {\n        this.proxy.code = code;\n        return this;\n    }\n\n    position(x: number, y: number): this;\n    position(position: Point): this;\n    position(pointOrX: Point | number, y?: number): this {\n        return GBoundsAwareBuilder.position(this, pointOrX, y);\n    }\n\n    size(width: number, height: number): this;\n    size(size: Dimension): this;\n    size(sizeOrWidth: Dimension | number, height?: number): this {\n        return GBoundsAwareBuilder.size(this, sizeOrWidth, height);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2024 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nexport * from './default-types';\nexport * from './galignable';\nexport * from './gbounds-aware';\nexport * from './gbutton';\nexport * from './gcompartment';\nexport * from './gedge';\nexport * from './gedge-layoutable';\nexport * from './gforeign-object-element';\nexport * from './ggraph';\nexport * from './ghtml-root';\nexport * from './gissue-marker';\nexport * from './glabel';\nexport * from './glayoutable';\nexport * from './glayouting';\nexport * from './gmodel-element';\nexport * from './gmodel-util';\nexport * from './gnode';\nexport * from './gport';\nexport * from './gpre-rendered-element';\nexport * from './gresizable';\nexport * from './gshape-element';\nexport * from './gshaped-prerendered-element';\n","/********************************************************************************\n * Copyright (c) 2021-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as sprotty from 'sprotty-protocol/lib/actions';\nimport { AnyObject, TypeGuard, hasArrayProp, hasStringProp } from '../utils/type-util';\nimport { Args } from './types';\n\n/**\n * An action is a declarative description of a behavior that shall be invoked by the receiver upon receipt of the action.\n * It is a plain data structure, and as such transferable between server and client. An action must never contain actual\n * SModelElement instances, but either refer to them via their ids or contain serializable schema for model elements.\n * Additional typeguard functions are provided via the corresponding namespace.\n */\nexport interface Action extends sprotty.Action {\n    /**\n     * Unique identifier specifying the kind of action to process.\n     */\n    kind: string;\n}\n\nexport namespace Action {\n    export function is(object: any): object is Action {\n        return AnyObject.is(object) && hasStringProp(object, 'kind');\n    }\n    /**\n     * Typeguard function to check wether the given object is an {@link Action} with the given `kind`.\n     * @param object The object to check.\n     * @param kind  The expected action kind.\n     * @returns A type literal indicating wether the given object is an action with the given kind.\n     */\n    export function hasKind(object: any, kind: string): object is Action {\n        return Action.is(object) && object.kind === kind;\n    }\n}\n\n/**\n * A general message serves as an envelope carrying an action to be transmitted between the client and the server via a DiagramServer.\n * @typeParam A the {@link Action} type that is contained by this message.\n * A typeguard function is provided via the corresponding namespace.\n */\nexport interface ActionMessage<A extends Action = Action> extends sprotty.ActionMessage {\n    /**\n     * The unique client id\n     *  */\n    clientId: string;\n\n    /**\n     * The action to execute.\n     */\n    action: A;\n}\n\nexport namespace ActionMessage {\n    export function is<A extends Action>(object: any, typeguard?: TypeGuard<A>): object is ActionMessage<A> {\n        const actionGuard = typeguard ?? Action.is;\n        return AnyObject.is(object) && hasStringProp(object, 'clientId') && 'action' in object && actionGuard(object.action);\n    }\n}\n\n/**\n * A request action is tied to the expectation of receiving a corresponding response action. The requestId property is used to match the\n * received response with the original request. Typically its not necessary to create an explicit requestId. The requestId can be set\n * to an empty string. The action dispatcher than auto generates an request id if needed (i.e. the action was dispatched as request).\n *\n\n * A typeguard function, and a generic helper function to generate a request id are provided via the corresponding namespace.\n */\nexport interface RequestAction<Res extends ResponseAction> extends Action, sprotty.RequestAction<Res> {\n    /**\n     * Unique id for this request. In order to match a response to this request, the response needs to have the same id.\n     */\n    requestId: string;\n    /**\n     * Used to ensure correct typing. Clients must not use this property\n     */\n    readonly _?: Res;\n}\n\nexport namespace RequestAction {\n    export function is(object: any): object is RequestAction<ResponseAction> {\n        return Action.is(object) && hasStringProp(object, 'requestId');\n    }\n\n    /**\n     * Typeguard function to check wether the given object is an {@link RequestAction} with the given `kind`.\n     * @param object The object to check.\n     * @param kind  The expected action kind.\n     * @returns A type literal indicating wether the given object is a request action with the given kind.\n     */\n    export function hasKind(object: any, kind: string): object is Action {\n        return RequestAction.is(object) && object.kind === kind;\n    }\n\n    export function generateRequestId(): string {\n        return sprotty.generateRequestId();\n    }\n}\n\n/**\n * A response action is sent to respond to a request action. The responseId must match the requestId of the preceding request.\n * In case the responseId is empty, the action is handled as standalone, i.e. it was fired without a preceding request.\n * The action dispatcher of the GLSP server has a special handling for {@link RequestAction} handlers\n * and automatically sets the `responseId` of the corresponding responseAction. So on the server side its typically enough\n * to set the `responseId` to an empty string and rely on the `ActionDispatcher` for assigning the correct `responseId.\n * Additional typeguard functions are provided via the corresponding namespace.\n */\nexport interface ResponseAction extends Action, sprotty.ResponseAction {\n    /**\n     * Id corresponding to the request this action responds to.\n     */\n    responseId: string;\n}\n\nexport namespace ResponseAction {\n    export function is(object: any): object is ResponseAction {\n        return Action.is(object) && hasStringProp(object, 'responseId');\n    }\n\n    /**\n     * Typeguard function to check wether the given object is an {@link ResponseAction} with a non-empty response id.\n     * @param object The object to check.\n     * @returns A type literal indicating wether the given object is a response action with a non-empty response id.\n     */\n    export function hasValidResponseId(object: any): object is ResponseAction {\n        return ResponseAction.is(object) && object.responseId !== '';\n    }\n}\n\n/**\n * A reject action is a {@link ResponseAction} fired to indicate that a certain {@link ResponseAction}\n * has been rejected.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `RejectActions`.\n */\nexport interface RejectAction extends ResponseAction, sprotty.RejectAction {\n    kind: typeof RejectAction.KIND;\n    /**\n     * A human-readable description of the reject reason. Typically this is an error message\n     * that has been thrown when handling the corresponding {@link RequestAction}.\n     */\n    message: string;\n    /**\n     * Optional additional details.\n     */\n    detail?: string;\n}\n\nexport namespace RejectAction {\n    export const KIND = 'rejectRequest';\n\n    export function is(object: unknown): object is RejectAction {\n        return Action.hasKind(object, RejectAction.KIND) && hasStringProp(object, 'message');\n    }\n\n    export function create(message: string, options: { detail?: string; responseId?: string } = {}): RejectAction {\n        return {\n            kind: KIND,\n            responseId: '',\n            message,\n            ...options\n        };\n    }\n}\n\n/**\n * Operations are actions that denote requests from the client to _modify_ the model. Model modifications are always performed by the\n * server. After a successful modification, the server sends the updated model back to the client using the `UpdateModelAction`.\n * An operation contains a dedicated `isOperation` property that is used as a discriminator. This is necessary so that the server\n * can distinguish between plain actions and operations.\n * The corresponding namespace offers a helper function for type guard checks.\n */\nexport interface Operation extends Action {\n    /**\n     * Discriminator property to make operations distinguishable from plain {@link Action}s.\n     */\n    isOperation: true;\n\n    /**\n     * Optional custom arguments.\n     */\n    args?: Args;\n}\n\nexport namespace Operation {\n    export function is(object: unknown): object is Operation {\n        return Action.is(object) && 'isOperation' in object && object.isOperation === true;\n    }\n\n    /**\n     * Typeguard function to check wether the given object is an {@link Operation} with the given `kind`.\n     * @param object The object to check.\n     * @param kind  The expected operation kind.\n     * @returns A type literal indicating wether the given object is an operation with the given kind.\n     */\n    export function hasKind(object: unknown, kind: string): object is Operation {\n        return Operation.is(object) && object.kind === kind;\n    }\n}\n\n/**\n * An operation that executes a list of sub-operations.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `CompoundOperations`.\n */\nexport interface CompoundOperation extends Operation {\n    kind: typeof CompoundOperation.KIND;\n    /**\n     * List of operations that should be executed.\n     */\n    operationList: Operation[];\n}\n\nexport namespace CompoundOperation {\n    export const KIND = 'compound';\n\n    export function is(object: unknown): object is CompoundOperation {\n        return Operation.hasKind(object, KIND) && hasArrayProp(object, 'operationList');\n    }\n\n    export function create(operationList: Operation[], options: { args?: Args } = {}): CompoundOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            operationList,\n            ...options\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { hasStringProp } from '../utils/type-util';\nimport { Action } from './base-protocol';\n\n/**\n * Sent by the server (or the client) to signal a status change.\n * If a timeout is given the respective status should disappear after the timeout is reached.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `StatusAction`s.\n */\nexport interface StatusAction extends Action {\n    kind: typeof StatusAction.KIND;\n    /**\n     * The severity of the status.\n     */\n    severity: SeverityLevel;\n\n    /**\n     * The user-facing message describing the status.\n     */\n    message: string;\n\n    /**\n     * Timeout after which a displayed status should disappear.\n     */\n    timeout?: number;\n}\n\nexport namespace StatusAction {\n    export const KIND = 'status';\n\n    export function is(object: unknown): object is StatusAction {\n        return Action.hasKind(object, KIND) && hasStringProp(object, 'severity') && hasStringProp(object, 'message');\n    }\n\n    export function create(message: string, options: { severity?: SeverityLevel; timeout?: number } = {}): StatusAction {\n        return {\n            kind: KIND,\n            severity: 'INFO',\n            message,\n            ...options\n        };\n    }\n}\n\n/**\n * The possible server status severity levels.\n */\n\nexport type SeverityLevel = 'NONE' | 'INFO' | 'WARNING' | 'ERROR' | 'FATAL' | 'OK';\n\n/**\n * Sent by the server (or the client) to notify the user about something of interest. Typically this message is handled by\n * the client by showing a message to the user with the application's message service.\n * If a timeout is given the respective message should disappear after the timeout is reached.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `MessageAction`s.\n */\nexport interface MessageAction extends Action {\n    kind: typeof MessageAction.KIND;\n\n    severity: SeverityLevel;\n\n    /**\n     * The message that shall be shown to the user.\n     */\n    message: string;\n\n    /**\n     * Further details on the message.\n     */\n    details?: string;\n}\n\nexport namespace MessageAction {\n    export const KIND = 'message';\n\n    export function is(object: unknown): object is MessageAction {\n        return Action.hasKind(object, KIND) && hasStringProp(object, 'message') && hasStringProp(object, 'severity');\n    }\n\n    export function create(\n        message: string,\n        options: {\n            severity?: SeverityLevel;\n            details?: string;\n        } = {}\n    ): MessageAction {\n        return {\n            kind: KIND,\n            message,\n            severity: 'INFO',\n            ...options\n        };\n    }\n}\n\n/**\n * Sent to request presenting the progress of a long running process in the UI.\n */\nexport interface StartProgressAction extends Action {\n    kind: typeof StartProgressAction.KIND;\n\n    /**\n     * An ID that can be used in subsequent `updateProgress` and `endProgress` events to make them refer to the same progress reporting.\n     */\n    progressId: string;\n    /**\n     * Short title of the progress reporting. Shown in the UI to describe the long running process.\n     */\n    title: string;\n    /**\n     * Optional additional progress message. Shown in the UI to describe the long running process.\n     */\n    message?: string;\n    /**\n     * Progress percentage to display (value range: 0 to 100). If omitted no percentage is shown.\n     */\n    percentage?: number;\n}\n\nexport namespace StartProgressAction {\n    export const KIND = 'startProgress';\n\n    export function is(object: unknown): object is StartProgressAction {\n        return Action.hasKind(object, KIND) && hasStringProp(object, 'progressId') && hasStringProp(object, 'title');\n    }\n\n    export function create(options: { progressId: string; title: string; message?: string; percentage?: number }): StartProgressAction {\n        return {\n            kind: KIND,\n            ...options\n        };\n    }\n}\n\n/**\n * Sent to presenting an update of the progress of a long running process in the UI.\n */\nexport interface UpdateProgressAction extends Action {\n    kind: typeof UpdateProgressAction.KIND;\n\n    /**\n     * The ID of the progress reporting to update.\n     */\n    progressId: string;\n    /**\n     * The message to show in the progress reporting.\n     */\n    message?: string;\n    /**\n     * The percentage (value range: 0 to 100) to show in the progress reporting.\n     */\n    percentage?: number;\n}\n\nexport namespace UpdateProgressAction {\n    export const KIND = 'updateProgress';\n\n    export function is(object: unknown): object is UpdateProgressAction {\n        return Action.hasKind(object, KIND) && hasStringProp(object, 'progressId');\n    }\n\n    export function create(\n        progressId: string,\n        options: {\n            message?: string;\n            percentage?: number;\n        } = {}\n    ): UpdateProgressAction {\n        return {\n            kind: KIND,\n            progressId,\n            ...options\n        };\n    }\n}\n\n/**\n * Sent to end the reporting of a progress.\n */\nexport interface EndProgressAction extends Action {\n    kind: typeof EndProgressAction.KIND;\n\n    /**\n     * The ID of the progress reporting to update.\n     */\n    progressId: string;\n    /**\n     * The message to show in the progress reporting.\n     */\n    message?: string;\n}\n\nexport namespace EndProgressAction {\n    export const KIND = 'endProgress';\n\n    export function is(object: unknown): object is EndProgressAction {\n        return Action.hasKind(object, KIND) && hasStringProp(object, 'progressId');\n    }\n\n    export function create(progressId: string, message?: string): EndProgressAction {\n        return {\n            kind: KIND,\n            progressId,\n            message\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { hasObjectProp } from '../utils/type-util';\nimport { Action, Operation, RequestAction, ResponseAction } from './base-protocol';\nimport { Args, EditorContext } from './types';\n\n/**\n * Requests the clipboard data for the current editor context, i.e., the selected elements, in a clipboard-compatible format.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `RequestClipboardDataActions`.\n */\nexport interface RequestClipboardDataAction extends RequestAction<SetClipboardDataAction> {\n    kind: typeof RequestClipboardDataAction.KIND;\n\n    editorContext: EditorContext;\n}\n\nexport namespace RequestClipboardDataAction {\n    export const KIND = 'requestClipboardData';\n\n    export function is(object: unknown): object is RequestClipboardDataAction {\n        return RequestAction.hasKind(object, KIND) && hasObjectProp(object, 'editorContext');\n    }\n\n    export function create(editorContext: EditorContext, options: { requestId?: string } = {}): RequestClipboardDataAction {\n        return {\n            kind: KIND,\n            requestId: '',\n            editorContext,\n            ...options\n        };\n    }\n}\n\n/**\n * Server response to a {@link RequestClipboardDataAction} containing the selected elements as clipboard-compatible format.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SetClipboardDataActions`.\n */\nexport interface SetClipboardDataAction extends ResponseAction {\n    kind: typeof SetClipboardDataAction.KIND;\n\n    /**\n     * The data to be added into the clipboard. This data will be sent back to the server on paste.\n     */\n    clipboardData: ClipboardData;\n}\n\nexport namespace SetClipboardDataAction {\n    export const KIND = 'setClipboardData';\n\n    export function is(object: unknown): object is SetClipboardDataAction {\n        return Action.hasKind(object, KIND) && hasObjectProp(object, 'clipboardData');\n    }\n\n    export function create(clipboardData: ClipboardData, options: { responseId?: string } = {}): SetClipboardDataAction {\n        return {\n            kind: KIND,\n            responseId: '',\n            clipboardData,\n            ...options\n        };\n    }\n}\n\n/**\n * Requests a cut operation from the server, i.e., deleting the selected elements from the model. Before submitting a `CutOperation`\n * a client should ensure that the cut elements are put into the clipboard.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `CutOperations`.\n */\nexport interface CutOperation extends Operation {\n    kind: typeof CutOperation.KIND;\n\n    editorContext: EditorContext;\n}\n\nexport namespace CutOperation {\n    export const KIND = 'cut';\n\n    export function is(object: unknown): object is CutOperation {\n        return Operation.hasKind(object, KIND) && hasObjectProp(object, 'editorContext');\n    }\n\n    export function create(editorContext: EditorContext, options: { args?: Args } = {}): CutOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            editorContext,\n            ...options\n        };\n    }\n}\n\n/**\n * Requests a paste operation from the server by providing the current clipboard data. Typically this means that elements should be created\n *  based on the data in the clipboard.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `PasteOperations`.\n */\nexport interface PasteOperation extends Operation {\n    kind: typeof PasteOperation.KIND;\n\n    editorContext: EditorContext;\n\n    /**\n     * The clipboard data that should be pasted to the editor's last recorded mouse position (see `editorContext`).\n     */\n    clipboardData: ClipboardData;\n}\n\nexport namespace PasteOperation {\n    export const KIND = 'paste';\n\n    export function is(object: unknown): object is PasteOperation {\n        return Operation.hasKind(object, KIND) && hasObjectProp(object, 'clipboardData') && hasObjectProp(object, 'editorContext');\n    }\n\n    export function create(options: { editorContext: EditorContext; clipboardData: ClipboardData; args?: Args }): PasteOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            ...options\n        };\n    }\n}\n/**\n * In GLSP the clipboard needs to be managed by the client but the conversion from the selection to be copied into a\n * clipboard-compatible format is handled by the server. By default, GLSP use application/json as exchange format.\n */\nexport interface ClipboardData {\n    [format: string]: string;\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { hasArrayProp, hasObjectProp, hasStringProp } from '../utils/type-util';\nimport { Action, RequestAction, ResponseAction } from './base-protocol';\nimport { Args, EditorContext, LabeledAction } from './types';\n\n/**\n * The `RequestContextActions` is sent from the client to the server to request the available actions for the context with id contextId.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `RequestContextActions`.\n */\nexport interface RequestContextActions extends RequestAction<SetContextActions> {\n    kind: typeof RequestContextActions.KIND;\n\n    /**\n     * The identifier for the context.\n     */\n    contextId: string;\n\n    editorContext: EditorContext;\n}\n\nexport namespace RequestContextActions {\n    export const KIND = 'requestContextActions';\n\n    export function is(object: unknown): object is RequestContextActions {\n        return RequestAction.hasKind(object, KIND) && hasStringProp(object, 'contextId') && hasObjectProp(object, 'editorContext');\n    }\n\n    export function create(options: { contextId: string; editorContext: EditorContext; requestId?: string }): RequestContextActions {\n        return {\n            kind: KIND,\n            requestId: '',\n            ...options\n        };\n    }\n}\n\n/**\n * The `SetContextActions` is the response to a {@link RequestContextActions} containing all actions for the queried context.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SetContextsActions`.\n */\nexport interface SetContextActions extends ResponseAction {\n    kind: typeof SetContextActions.KIND;\n\n    /**\n     * The actions available in the queried context.\n     */\n    readonly actions: LabeledAction[];\n\n    /**\n     * Custom arguments.\n     */\n    args?: Args;\n}\n\nexport namespace SetContextActions {\n    export const KIND = 'setContextActions';\n\n    export function is(object: unknown): object is SetContextActions {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'actions');\n    }\n\n    export function create(actions: LabeledAction[], options: { args?: Args; responseId?: string } = {}): SetContextActions {\n        return {\n            kind: KIND,\n            responseId: '',\n            actions,\n            ...options\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { hasArrayProp, hasStringProp } from '../utils/type-util';\nimport { Operation } from './base-protocol';\nimport { Args, ElementAndRoutingPoints } from './types';\n\n/**\n * If the source and/or target element of an edge should be adapted, the client can send a `ReconnectEdgeOperation` to the server.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `ReconnectEdgeOperations`.\n */\nexport interface ReconnectEdgeOperation extends Operation {\n    kind: typeof ReconnectEdgeOperation.KIND;\n\n    /**\n     * The edge element that should be reconnected.\n     */\n    edgeElementId: string;\n\n    /**\n     * The (new) source element of the edge.\n     */\n    sourceElementId: string;\n\n    /**\n     * The (new) target element of the edge.\n     */\n    targetElementId: string;\n}\n\nexport namespace ReconnectEdgeOperation {\n    export const KIND = 'reconnectEdge';\n\n    export function is(object: unknown): object is ReconnectEdgeOperation {\n        return (\n            Operation.hasKind(object, KIND) &&\n            hasStringProp(object, 'edgeElementId') &&\n            hasStringProp(object, 'sourceElementId') &&\n            hasStringProp(object, 'targetElementId')\n        );\n    }\n\n    export function create(options: {\n        edgeElementId: string;\n        sourceElementId: string;\n        targetElementId: string;\n        args?: Args;\n    }): ReconnectEdgeOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            ...options\n        };\n    }\n}\n\n/**\n * An edge may have zero or more routing points that \"re-direct\" the edge between the source and the target element. In order to set these\n * routing points the client may send a `ChangeRoutingPointsOperation`.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `ChangeRoutingPointsOperations`.\n */\nexport interface ChangeRoutingPointsOperation extends Operation {\n    kind: typeof ChangeRoutingPointsOperation.KIND;\n\n    /**\n     * The routing points of the edge (may be empty).\n     */\n    newRoutingPoints: ElementAndRoutingPoints[];\n}\n\nexport namespace ChangeRoutingPointsOperation {\n    export const KIND = 'changeRoutingPoints';\n\n    export function is(object: unknown): object is ChangeRoutingPointsOperation {\n        return Operation.hasKind(object, KIND) && hasArrayProp(object, 'newRoutingPoints');\n    }\n\n    export function create(newRoutingPoints: ElementAndRoutingPoints[], options: { args?: Args } = {}): ChangeRoutingPointsOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            newRoutingPoints,\n            ...options\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Point } from 'sprotty-protocol';\nimport * as sprotty from 'sprotty-protocol/lib/actions';\nimport { hasArrayProp, hasStringProp } from '../utils/type-util';\nimport { Operation } from './base-protocol';\nimport { Args } from './types';\n\n/**\n * Common interface for all create {@link Operation}s in GLSP.\n * The corresponding namespace offers a helper function for type guard checks.\n */\nexport interface CreateOperation extends Operation {\n    /**\n     * The type of the element that should be created.\n     */\n    elementTypeId: string;\n}\n\nexport namespace CreateOperation {\n    export function is(object: unknown): object is CreateOperation {\n        return Operation.is(object) && hasStringProp(object, 'elementTypeId');\n    }\n\n    /**\n     * Typeguard function to check wether the given object is a {@link CreateOperation} with the given `kind`.\n     * @param object The object to check.\n     * @param kind  The expected operation kind.\n     * @returns A type literal indicating wether the given object is a create operation with the given kind.\n     */\n    export function hasKind(object: unknown, kind: string): object is CreateOperation {\n        return CreateOperation.is(object) && object.kind === kind;\n    }\n}\n\n/**\n * In order to create a node in the model the client can send a CreateNodeOperation with the necessary information to create\n * the element that corresponds to that node in the source model.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `CreateNodeOperations`.\n */\nexport interface CreateNodeOperation extends CreateOperation {\n    kind: typeof CreateNodeOperation.KIND;\n\n    /*\n     * The location at which the operation shall be executed.\n     */\n    location?: Point;\n\n    /*\n     * The id of container element in which the node should be created. If not defined\n     * the root element will be used.\n     */\n    containerId?: string;\n}\n\nexport namespace CreateNodeOperation {\n    export const KIND = 'createNode';\n\n    export function is(object: unknown): object is CreateNodeOperation {\n        return CreateOperation.hasKind(object, KIND);\n    }\n\n    export function create(\n        elementTypeId: string,\n        options: { location?: Point; containerId?: string; args?: Args } = {}\n    ): CreateNodeOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            elementTypeId,\n            ...options\n        };\n    }\n}\n/**\n * In order to create an edge in the model the client can send a `CreateEdgeOperation` with the necessary information to create\n * the element that corresponds to that edge in the source model.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `CreateEdgeOperations`.\n */\nexport interface CreateEdgeOperation extends CreateOperation {\n    kind: typeof CreateEdgeOperation.KIND;\n\n    sourceElementId: string;\n\n    targetElementId: string;\n}\n\nexport namespace CreateEdgeOperation {\n    export const KIND = 'createEdge';\n\n    export function is(object: unknown): object is CreateEdgeOperation {\n        return (\n            CreateOperation.hasKind(object, KIND) && hasStringProp(object, 'sourceElementId') && hasStringProp(object, 'targetElementId')\n        );\n    }\n\n    export function create(options: {\n        elementTypeId: string;\n        sourceElementId: string;\n        targetElementId: string;\n        args?: Args;\n    }): CreateEdgeOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            ...options\n        };\n    }\n}\n/**\n * The client sends a `DeleteElementOperation` to the server to request the deletion of an element from the source model.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `DeleteElementOperations`.\n */\nexport interface DeleteElementOperation extends Operation, Omit<sprotty.DeleteElementAction, 'kind'> {\n    kind: typeof DeleteElementOperation.KIND;\n\n    /**\n     * The ids of the elements to be deleted.\n     */\n    elementIds: string[];\n}\n\nexport namespace DeleteElementOperation {\n    export const KIND = 'deleteElement';\n\n    export function is(object: unknown): object is DeleteElementOperation {\n        return Operation.hasKind(object, KIND) && hasArrayProp(object, 'elementIds');\n    }\n\n    export function create(elementIds: string[], options: { args?: Args } = {}): DeleteElementOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            elementIds,\n            ...options\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Bounds } from 'sprotty-protocol';\nimport * as sprotty from 'sprotty-protocol/lib/actions';\nimport { GModelRootSchema } from '../model/model-schema';\nimport { hasObjectProp, hasStringProp } from '../utils/type-util';\nimport { Action, RequestAction, ResponseAction } from './base-protocol';\n\n/**\n * Triggered when the user hovers the mouse pointer over an element to get a popup with details on that element.\n * This action is sent from the client to the server. The response is a `SetPopupModelAction`.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `RequestPopupModelActions`.\n */\nexport interface RequestPopupModelAction extends RequestAction<SetPopupModelAction>, sprotty.RequestPopupModelAction {\n    kind: typeof RequestPopupModelAction.KIND;\n\n    /**\n     * The identifier of the elements for which a popup is requested.\n     */\n    elementId: string;\n\n    /**\n     * The popup bounds declaring the position of the popup. Optionally the desired dimension.\n     */\n    bounds: Bounds;\n}\n\nexport namespace RequestPopupModelAction {\n    export const KIND = 'requestPopupModel';\n\n    export function is(object: unknown): object is RequestPopupModelAction {\n        return RequestAction.hasKind(object, KIND) && hasStringProp(object, 'elementId') && hasObjectProp(object, 'bounds');\n    }\n\n    export function create(options: { elementId: string; bounds: Bounds; requestId?: string }): RequestPopupModelAction {\n        return {\n            kind: KIND,\n            requestId: '',\n            ...options\n        };\n    }\n}\n\n/**\n * Sent from the server to the client to display a popup in response to a RequestPopupModelAction. This action can also be used to remove\n * unknown existing popup by choosing EMPTY_ROOT as root element.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SetPopupModelActions`.\n */\nexport interface SetPopupModelAction extends ResponseAction, sprotty.SetPopupModelAction {\n    kind: typeof SetPopupModelAction.KIND;\n\n    newRoot: GModelRootSchema;\n}\n\nexport namespace SetPopupModelAction {\n    export const KIND = 'setPopupModel';\n\n    export function is(object: unknown): object is SetPopupModelAction {\n        return Action.hasKind(object, KIND) && hasObjectProp(object, 'newRoot');\n    }\n\n    export function create(newRoot: GModelRootSchema, options: { responseId?: string } = {}): SetPopupModelAction {\n        return {\n            kind: KIND,\n            responseId: '',\n            newRoot,\n            ...options\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { JsonPrimitive } from 'sprotty-protocol';\nimport { AnyObject, hasArrayProp, hasObjectProp, hasStringProp } from '../utils/type-util';\nimport { Action, RequestAction, ResponseAction } from './base-protocol';\nimport { Args, EditorContext } from './types';\n\n/**\n * A `NavigationTarget` identifies the object we want to navigate to via its uri and may further provide a label to display to the user.\n * The corresponding namespace offers a set of utility function to interact with `NavigationTargets`.\n */\nexport interface NavigationTarget {\n    /**\n     * URI to identify the object we want to navigate to.\n     */\n    uri: string;\n\n    /**\n     * Optional label to display to the user.\n     */\n    label?: string;\n\n    /**\n     * Domain-specific arguments that may be interpreted directly or resolved further.\n     */\n    args?: Args;\n}\n\nexport namespace NavigationTarget {\n    export function is(object: unknown): object is NavigationTarget {\n        return AnyObject.is(object) && hasStringProp(object, 'uri');\n    }\n    /**\n     *  Generic key to store element ids as additional argument\n     */\n    export const ELEMENT_IDS = 'elementIds';\n    /**\n     * The separator that is used to store he values for the {@link ELEMENT_IDS} as a single string.\n     */\n    export const ELEMENT_IDS_SEPARATOR = '&';\n    /**\n     *  Generic key ot store the line property of a {@link TextPosition} as additional argument.\n     */\n    export const TEXT_LINE = 'line';\n    /**\n     *  Generic key ot store the character property of a {@link TextPosition} as additional argument.\n     */\n    export const TEXT_COLUMN = 'column';\n\n    /**\n     * Denotes the position of the cursor in a text element.\n     */\n    export interface TextPosition {\n        line: number;\n        /**\n         * The character number within the line. Also refereed to as column.\n         */\n        character: number;\n    }\n\n    /**\n     * Utility function to check wether the given {@link NavigationTarget} has additional arguments defined.\n     * @param target The navigation target to check.\n     * @returns `true` if the navigation target has a non-empty `args` property, `false`\n     */\n    export function hasArguments(target: NavigationTarget): boolean {\n        return target.args !== undefined && Object.keys(target.args).length > 0;\n    }\n\n    /**\n     * Adds a new key-value pair to the additional arguments of the given {@link NavigationTarget}.\n     * @param target The navigation target.\n     * @param key The key of the new argument.\n     * @param value The (primitive) value of the new argument.\n     */\n    export function addArgument(target: NavigationTarget, key: string, value: JsonPrimitive): void {\n        if (!target.args) {\n            target.args = {};\n        }\n        target.args[key] = value;\n    }\n\n    /**\n     * Retrieves the element ids that have been stored with the generic {@link ELEMENT_IDS} key from the args of the\n     * given target.\n     * @param target The navigation target.\n     * @returns An array with the parsed element ids. The array is empty if no {@link ELEMENT_IDS} key is present in the args\n     * of the navigation target.\n     */\n    export function getElementIds(target: NavigationTarget): string[] {\n        if (!target?.args?.[ELEMENT_IDS]) {\n            return [];\n        }\n        const elementIdsValue = target.args[ELEMENT_IDS].toString();\n        return elementIdsValue.split(ELEMENT_IDS_SEPARATOR);\n    }\n\n    /**\n     * Stores the given element ids in the given {@link NavigationTarget} as additional arguments using the generic {@link ELEMENT_IDS} key.\n     * @param target The navigation target.\n     * @param elementIds The element ids that should be stored.\n     * @returns the value of the {@link ELEMENT_IDS} key after storing the given element ids.\n     */\n    export function setElementIds(target: NavigationTarget, ...elementIds: string[]): string {\n        if (target.args === undefined) {\n            target.args = {};\n        }\n        return (target.args[ELEMENT_IDS] = elementIds.join(ELEMENT_IDS_SEPARATOR));\n    }\n\n    /**\n     * Stores the given {@link TextPosition} in the given {@link NavigationTarget} as additional arguments using\n     * the generic {@link TEXT_LINE} & {@link TEXT_COLUMN} keys.\n     * @param target The navigation target.\n     * @param position The text position that should be stored.\n     */\n    export function setTextPosition(target: NavigationTarget, position: TextPosition | undefined): void {\n        if (position) {\n            if (target.args === undefined) {\n                target.args = {};\n            }\n            target.args[TEXT_LINE] = position.line;\n            target.args[TEXT_COLUMN] = position.character;\n        }\n    }\n\n    /**\n     * Retrieves the {@link TextPosition} that have been stored with the generic {@link TEXT_LINE} & {@link TEXT_COLUMN} keys\n     * from the args of the given target.\n     * @param target The navigation target.\n     * @returns The parsed text position or `undefined` if one of the generic text keys is not present in the args\n     * of the navigation target.\n     */\n    export function getTextPosition(target: NavigationTarget): TextPosition | undefined {\n        if (!target.args || !target.args[TEXT_LINE] || !target.args[TEXT_COLUMN]) {\n            return undefined;\n        }\n        return {\n            line: Number(target.args[TEXT_LINE]),\n            character: Number(target.args[TEXT_COLUMN])\n        };\n    }\n}\n\n/**\n * Action that is usually sent from the client to the server to request navigation targets for a specific navigation type such as\n * `documentation` or `implementation` in the given editor context.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `RequestNavigationTargetsActions`.\n */\nexport interface RequestNavigationTargetsAction extends RequestAction<SetNavigationTargetsAction> {\n    kind: typeof RequestNavigationTargetsAction.KIND;\n\n    /**\n     * Identifier of the type of navigation targets we want to retrieve, e.g., 'documentation', 'implementation', etc.\n     */\n    targetTypeId: string;\n\n    editorContext: EditorContext;\n}\n\nexport namespace RequestNavigationTargetsAction {\n    export const KIND = 'requestNavigationTargets';\n\n    export function is(object: unknown): object is RequestNavigationTargetsAction {\n        return RequestAction.hasKind(object, KIND) && hasStringProp(object, 'targetTypeId') && hasObjectProp(object, 'editorContext');\n    }\n\n    export function create(options: {\n        targetTypeId: string;\n        editorContext: EditorContext;\n        requestId?: string;\n    }): RequestNavigationTargetsAction {\n        return {\n            kind: KIND,\n            requestId: '',\n            ...options\n        };\n    }\n}\n\n/**\n * Response action from the server following a {@link RequestNavigationTargetsAction}. It contains all available navigation targets for the\n * queried target type in the provided editor context. The server may also provide additional information using the arguments, e.g.,\n * warnings, that can be interpreted by the client.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SetNavigationTargetsActions`.\n */\nexport interface SetNavigationTargetsAction extends ResponseAction {\n    kind: typeof SetNavigationTargetsAction.KIND;\n\n    targets: NavigationTarget[];\n\n    /**\n     * Custom arguments that may be interpreted by the client.\n     */\n    args?: Args;\n}\n\nexport namespace SetNavigationTargetsAction {\n    export const KIND = 'setNavigationTargets';\n\n    export function is(object: unknown): object is SetNavigationTargetsAction {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'targets');\n    }\n\n    export function create(targets: NavigationTarget[], options: { args?: Args; responseId?: string } = {}): SetNavigationTargetsAction {\n        return {\n            kind: KIND,\n            responseId: '',\n            targets,\n            ...options\n        };\n    }\n}\n\n/**\n * Action that triggers the navigation to a particular navigation target, such as element IDs, queries, etc..\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `NavigateToTargetActions`.\n */\nexport interface NavigateToTargetAction extends Action {\n    kind: typeof NavigateToTargetAction.KIND;\n\n    target: NavigationTarget;\n}\n\nexport namespace NavigateToTargetAction {\n    export const KIND = 'navigateToTarget';\n\n    export function is(object: unknown): object is NavigateToTargetAction {\n        return Action.hasKind(object, KIND) && hasObjectProp(object, 'target');\n    }\n\n    export function create(target: NavigationTarget): NavigateToTargetAction {\n        return {\n            kind: KIND,\n            target\n        };\n    }\n}\n\n/**\n * If a client cannot navigate to a target directly, a {@link ResolveNavigationTargetAction} may be sent to the server to resolve the\n * navigation target to one or more model elements. This may be useful in cases where the resolution of each target is expensive or the\n * client architecture requires an indirection.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `ResolveNavigationTargetActions`.\n */\nexport interface ResolveNavigationTargetAction extends RequestAction<SetResolvedNavigationTargetAction> {\n    kind: typeof ResolveNavigationTargetAction.KIND;\n\n    /**\n     * The navigation target to resolve.\n     */\n    navigationTarget: NavigationTarget;\n}\n\nexport namespace ResolveNavigationTargetAction {\n    export const KIND = 'resolveNavigationTarget';\n\n    export function is(object: unknown): object is ResolveNavigationTargetAction {\n        return RequestAction.hasKind(object, KIND) && hasObjectProp(object, 'navigationTarget');\n    }\n\n    export function create(navigationTarget: NavigationTarget, options: { requestId?: string } = {}): ResolveNavigationTargetAction {\n        return {\n            kind: KIND,\n            requestId: '',\n            navigationTarget,\n            ...options\n        };\n    }\n}\n\n/**\n * An action sent from the server in response to a {@link ResolveNavigationTargetAction}. The response contains the resolved element ids\n * for the given target and may contain additional information in the args property.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SetResolvedNavigationTargetActions`.\n */\nexport interface SetResolvedNavigationTargetAction extends ResponseAction {\n    kind: typeof SetResolvedNavigationTargetAction.KIND;\n\n    /**\n     * The element ids of the resolved navigation target.\n     */\n    elementIds: string[];\n\n    /**\n     * Custom arguments that may be interpreted by the client.\n     */\n    args?: Args;\n}\n\nexport namespace SetResolvedNavigationTargetAction {\n    export const KIND = 'setResolvedNavigationTarget';\n\n    export function is(object: unknown): object is SetResolvedNavigationTargetAction {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'elementIds');\n    }\n\n    export function create(elementIds: string[], options: { args?: Args; responseId?: string } = {}): SetResolvedNavigationTargetAction {\n        return {\n            kind: KIND,\n            responseId: '',\n            elementIds,\n            ...options\n        };\n    }\n}\n\n/**\n * If a {@link NavigationTarget} cannot be resolved or the resolved target is something that is not part of our source model, e.g.,\n * a separate documentation file, a {@link NavigateToExternalTargetAction} may be sent. Since the target it outside of the model scope such\n * an action would be typically handled by an integration layer (such as the surrounding IDE).\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `NavigateToExternalTargetActions`.\n */\nexport interface NavigateToExternalTargetAction extends Action {\n    kind: typeof NavigateToExternalTargetAction.KIND;\n\n    /**\n     * The diagram-external target to which the client shall navigate.\n     */\n    target: NavigationTarget;\n}\n\nexport namespace NavigateToExternalTargetAction {\n    export const KIND = 'navigateToExternalTarget';\n\n    export function is(object: unknown): object is NavigateToExternalTargetAction {\n        return Action.hasKind(object, KIND) && hasObjectProp(object, 'target');\n    }\n\n    export function create(target: NavigationTarget): NavigateToExternalTargetAction {\n        return {\n            kind: KIND,\n            target\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as sprotty from 'sprotty-protocol/lib/actions';\nimport { isStringArray } from '../utils/array-util';\nimport { hasArrayProp, hasBooleanProp } from '../utils/type-util';\nimport { Action } from './base-protocol';\n\n/**\n * Triggered when the user changes the selection, e.g. by clicking on a selectable element. The action should trigger a change in the\n * selected state accordingly, so the elements can be rendered differently. The server can send such an action to the client in order to\n * change the selection remotely.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SelectActions`.\n */\nexport interface SelectAction extends Action, sprotty.SelectAction {\n    kind: typeof SelectAction.KIND;\n\n    /**\n     * The identifiers of the elements to mark as selected.\n     */\n    selectedElementsIDs: string[];\n\n    /**\n     * The identifiers of the elements to mark as not selected.\n     */\n    deselectedElementsIDs: string[];\n\n    /**\n     * Whether all currently selected elements should be deselected.\n     */\n    deselectAll?: boolean;\n}\n\nexport namespace SelectAction {\n    export const KIND = 'elementSelected';\n\n    export function is(object: unknown): object is SelectAction {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'selectedElementsIDs') && hasArrayProp(object, 'deselectedElementsIDs');\n    }\n\n    export function create(options: { selectedElementsIDs?: string[]; deselectedElementsIDs?: string[] | boolean } = {}): SelectAction {\n        const deselectedElementsIDs = options.deselectedElementsIDs ?? [];\n        return {\n            kind: KIND,\n            selectedElementsIDs: options.selectedElementsIDs ?? [],\n            deselectedElementsIDs: isStringArray(deselectedElementsIDs, true) ? deselectedElementsIDs : [],\n            deselectAll: typeof deselectedElementsIDs === 'boolean' ? deselectedElementsIDs : false\n        };\n    }\n\n    export function addSelection(selectedElementsIDs: string[]): SelectAction {\n        return create({ selectedElementsIDs });\n    }\n\n    export function removeSelection(deselectedElementsIDs: string[]): SelectAction {\n        return create({ deselectedElementsIDs });\n    }\n\n    export function setSelection(selectedElementsIDs: string[]): SelectAction {\n        return create({ selectedElementsIDs, deselectedElementsIDs: true });\n    }\n}\n\n/**\n * Programmatic action for selecting or deselecting all elements.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SelectAllActions`.\n */\nexport interface SelectAllAction extends Action, sprotty.SelectAllAction {\n    kind: typeof SelectAllAction.KIND;\n\n    /**\n     * If `select` is true, all elements are selected, otherwise they are deselected.\n     */\n    select: boolean;\n}\n\nexport namespace SelectAllAction {\n    export const KIND = 'allSelected';\n\n    export function is(object: unknown): object is SelectAllAction {\n        return Action.hasKind(object, KIND) && hasBooleanProp(object, 'select');\n    }\n\n    export function create(select = true): SelectAllAction {\n        return {\n            kind: KIND,\n            select\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as sprotty from 'sprotty-protocol/lib/actions';\nimport { hasObjectProp, hasStringProp } from '../utils/type-util';\nimport { Action, Operation, RequestAction, ResponseAction } from './base-protocol';\nimport { Args } from './types';\n\n/**\n * Requests the validation of the given text in the context of the provided model element. Typically sent from the client to the server.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `NewActions`.\n */\nexport interface RequestEditValidationAction extends RequestAction<SetEditValidationResultAction> {\n    kind: typeof RequestEditValidationAction.KIND;\n\n    /**\n     * Context in which the text is validated, e.g., 'label-edit'.\n     */\n    contextId: string;\n\n    /**\n     * Model element that is being edited.\n     */\n    modelElementId: string;\n\n    /**\n     * Text that should be validated for the given context and the model element.\n     */\n    text: string;\n}\n\nexport namespace RequestEditValidationAction {\n    export const KIND = 'requestEditValidation';\n\n    export function is(object: unknown): object is RequestEditValidationAction {\n        return (\n            RequestAction.hasKind(object, KIND) &&\n            hasStringProp(object, 'contextId') &&\n            hasStringProp(object, 'modelElementId') &&\n            hasStringProp(object, 'text')\n        );\n    }\n\n    export function create(options: {\n        contextId: string;\n        modelElementId: string;\n        text: string;\n        requestId?: string;\n    }): RequestEditValidationAction {\n        return {\n            kind: KIND,\n            requestId: '',\n            ...options\n        };\n    }\n}\n\n/**\n * Response to a {@link RequestEditValidationAction} containing the validation result for applying a text on a certain model element.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SetEditValidationResultActions`.\n */\nexport interface SetEditValidationResultAction extends ResponseAction {\n    kind: typeof SetEditValidationResultAction.KIND;\n\n    status: ValidationStatus;\n\n    /*\n     * Additional arguments for custom behavior.\n     */\n    args?: Args;\n}\n\nexport namespace SetEditValidationResultAction {\n    export const KIND = 'setEditValidationResult';\n\n    export function is(object: unknown): object is SetEditValidationResultAction {\n        return Action.hasKind(object, KIND) && hasObjectProp(object, 'status');\n    }\n\n    export function create(status: ValidationStatus, options: { args?: Args; responseId?: string } = {}): SetEditValidationResultAction {\n        return {\n            kind: KIND,\n            responseId: '',\n            status,\n            ...options\n        };\n    }\n}\n\n/**\n * A very common use case in domain models is the support of labels that display textual information to the user.\n * To apply new text to such a label element the client may send an ApplyLabelEditOperation to the server. Typically this is\n * done by the client after it has received a error free validation result via {@link SetEditValidationResultAction} from the server.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `ApplyLabelEditOperations`.\n */\nexport interface ApplyLabelEditOperation extends Operation, sprotty.ApplyLabelEditAction {\n    kind: typeof ApplyLabelEditOperation.KIND;\n\n    /**\n     * Identifier of the label model element.\n     */\n    labelId: string;\n\n    /**\n     * Text that should be applied on the label.\n     */\n    text: string;\n}\n\nexport namespace ApplyLabelEditOperation {\n    export const KIND = 'applyLabelEdit';\n\n    export function is(object: unknown): object is ApplyLabelEditOperation {\n        return Operation.hasKind(object, KIND) && hasStringProp(object, 'labelId') && hasStringProp(object, 'text');\n    }\n\n    export function create(options: { labelId: string; text: string; args?: Args }): ApplyLabelEditOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            ...options\n        };\n    }\n}\n\n/**\n * The serializable result of an an validation request.\n * Tje corresponding namespace offers the default severity values\n * and other utility functions.\n */\nexport interface ValidationStatus {\n    /**\n     * The severity of the validation returned by the server.\n     */\n    readonly severity: ValidationStatus.Severity;\n\n    /**\n     * The validation status message which may be rendered in the view.\n     */\n    readonly message?: string;\n\n    /**\n     * A potential error that encodes more details.\n     */\n    readonly error?: ResponseError;\n}\n\nexport namespace ValidationStatus {\n    /**\n     * The default {@link ValidationStatus} severity levels used in GLSP.\n     */\n    export enum Severity {\n        FATAL,\n        ERROR,\n        WARNING,\n        INFO,\n        OK,\n        NONE\n    }\n\n    /**\n     * An empty {@link ValidationStatus}.\n     */\n    export const NONE: ValidationStatus = {\n        severity: Severity.NONE,\n        message: '',\n        error: { code: -1, message: '', data: {} }\n    };\n\n    /**\n     * Utility function to check wether the given {@link ValidationStatus} has\n     * a severity that is considered to be OK.\n     * @param validationStatus The validation status to check.\n     * @returns `true` if the given status has a non critical severity, `false` otherwise.\n     */\n    export function isOk(validationStatus: ValidationStatus): boolean {\n        return (\n            validationStatus.severity === Severity.OK ||\n            validationStatus.severity === Severity.INFO ||\n            validationStatus.severity === Severity.NONE\n        );\n    }\n\n    /**\n     * Utility function to check wether the given {@link ValidationStatus} has\n     * a `warning` severity.\n     * @param validationStatus The validation status to check.\n     * @returns `true` if the given status has a `warning` severity, `false` otherwise.\n     */\n    export function isWarning(validationStatus: ValidationStatus): boolean {\n        return validationStatus.severity === Severity.WARNING;\n    }\n\n    /**\n     * Utility function to check wether the given {@link ValidationStatus} has\n     * an `error` or `fatal` severity.\n     * @param validationStatus The validation status to check.\n     * @returns `true` if the given status has a `error` or `fatal` severity, `false` otherwise.\n     */\n    export function isError(validationStatus: ValidationStatus): boolean {\n        return validationStatus.severity === Severity.ERROR || validationStatus.severity === Severity.FATAL;\n    }\n}\n\n/**\n * The serializable format of an error that occurred during validation.\n */\nexport interface ResponseError {\n    /**\n     * Code identifying the error kind.\n     */\n    readonly code: number;\n\n    /**\n     * Error message.\n     */\n    readonly message: string;\n\n    /**\n     * Additional custom data, e.g., a serialized stacktrace.\n     */\n    readonly data: Record<string, unknown>;\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { GModelElementSchema } from '../model/model-schema';\nimport { hasArrayProp, hasBooleanProp, hasStringProp } from '../utils/type-util';\nimport { Action, RequestAction, ResponseAction } from './base-protocol';\n\n/**\n * Type hints are used to define what modifications are supported on the different element types.\n * The rationale is to avoid a client-server round-trip for user feedback of each synchronous user interaction.\n */\nexport interface TypeHint {\n    /**\n     * The id of the element.\n     */\n    readonly elementTypeId: string;\n\n    /**\n     * Specifies whether the element can be relocated.\n     */\n    readonly repositionable: boolean;\n\n    /**\n     * Specifies whether the element can be deleted\n     */\n    readonly deletable: boolean;\n}\n\n/**\n * A {@link TypeHint} with additional modification properties for shape elements.\n */\nexport interface ShapeTypeHint extends TypeHint {\n    /**\n     * Specifies whether the element can be resized.\n     */\n    readonly resizable: boolean;\n\n    /**\n     * Specifies whether the element can be moved to another parent\n     */\n    readonly reparentable: boolean;\n\n    /**\n     * The types of elements that can be contained by this element (if unknown)\n     */\n    readonly containableElementTypeIds?: string[];\n}\n\n/**\n * A {@link TypeHint} with additional modification properties for edge elements.\n */\nexport interface EdgeTypeHint extends TypeHint {\n    /**\n     * Specifies whether the routing points of the edge can be changed\n     * i.e. edited by the user.\n     */\n    readonly routable: boolean;\n\n    /**\n     * Allowed source element types for this edge type.\n     * If not defined unknown element can be used as source element for this edge.\n     */\n    readonly sourceElementTypeIds?: string[];\n\n    /**\n     * Allowed target element types for this edge type\n     *  If not defined unknown element can be used as target element for this edge.\n     */\n    readonly targetElementTypeIds?: string[];\n\n    /**\n     * Indicates whether this type hint is dynamic or not. Dynamic edge type hints\n     * require an additional runtime check before creating an edge, when checking\n     * source and target element types is not sufficient.\n     *\n     * @see {@link RequestCheckEdgeAction}\n     */\n    readonly dynamic?: boolean;\n}\n\n/**\n * Sent from the client to the server in order to request hints on whether certain modifications are allowed for a specific element type.\n * The `RequestTypeHintsAction` is optional, but should usually be among the first messages sent from the client to the server after\n * receiving the model via `RequestModelAction`. The response is a {@link SetTypeHintsAction}.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `RequestTypeHintsActions`.\n */\nexport interface RequestTypeHintsAction extends RequestAction<SetTypeHintsAction> {\n    kind: typeof RequestTypeHintsAction.KIND;\n}\n\nexport namespace RequestTypeHintsAction {\n    export const KIND = 'requestTypeHints';\n\n    export function is(object: unknown): object is RequestTypeHintsAction {\n        return RequestAction.hasKind(object, KIND);\n    }\n\n    export function create(options: { requestId?: string } = {}): RequestTypeHintsAction {\n        return {\n            kind: KIND,\n            requestId: '',\n            ...options\n        };\n    }\n}\n\n/**\n * Sent from the server to the client in order to provide hints certain modifications are allowed for a specific element type.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SetTypeHintsActions`.\n */\nexport interface SetTypeHintsAction extends ResponseAction {\n    kind: typeof SetTypeHintsAction.KIND;\n\n    shapeHints: ShapeTypeHint[];\n\n    edgeHints: EdgeTypeHint[];\n}\n\nexport namespace SetTypeHintsAction {\n    export const KIND = 'setTypeHints';\n\n    export function is(object: unknown): object is SetTypeHintsAction {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'shapeHints') && hasArrayProp(object, 'edgeHints');\n    }\n\n    export function create(options: { shapeHints: ShapeTypeHint[]; edgeHints: EdgeTypeHint[]; responseId?: string }): SetTypeHintsAction {\n        return {\n            kind: KIND,\n            responseId: '',\n            ...options\n        };\n    }\n}\n\n/**\n * Sent from the client to the server to check wether the provided edge context information is valid i.e.\n * creation of an edge with the given edge type and source/target element is allowed by the server.\n * Typically this action is dispatched by edge creation tools in the creation phase of an edge that's associated\n * with a dynamic {@link EdgeTypeHint}.\n */\nexport interface RequestCheckEdgeAction extends RequestAction<CheckEdgeResultAction> {\n    kind: typeof RequestCheckEdgeAction.KIND;\n\n    /**\n     * The element type of the edge being created.\n     */\n    edgeType: string;\n\n    /**\n     * The ID of the edge source element.\n     */\n    sourceElementId: string;\n\n    /**\n     * The ID of the edge target element to check.\n     */\n    targetElementId?: string;\n}\n\nexport namespace RequestCheckEdgeAction {\n    export const KIND = 'requestCheckEdge';\n\n    export function is(object: unknown): object is RequestCheckEdgeAction {\n        return (\n            Action.hasKind(object, KIND) &&\n            hasStringProp(object, 'edgeType') &&\n            hasStringProp(object, 'sourceElementId') &&\n            hasStringProp(object, 'targetElementId', true)\n        );\n    }\n\n    export function create(options: {\n        sourceElement: GModelElementSchema | string;\n        targetElement?: GModelElementSchema | string;\n        edgeType: string;\n        requestId?: string;\n    }): RequestCheckEdgeAction {\n        return {\n            kind: KIND,\n            edgeType: options.edgeType,\n            sourceElementId: getElementTypeId(options.sourceElement),\n            targetElementId: options.targetElement ? getElementTypeId(options.targetElement) : undefined,\n            requestId: options.requestId ?? ''\n        };\n    }\n}\n\nfunction getElementTypeId(element: GModelElementSchema | string): string {\n    if (typeof element === 'string') {\n        return element;\n    }\n    return element.id;\n}\n\n/**\n * Send from the server to the client as a response for a {@link RequestCheckEdgeAction}. It provides\n * a boolean indicating whether the edge context information provided by the corresponding request action is valid\n * i.e. creation of an  edge with the given edge type and source/target element is allowed.\n */\nexport interface CheckEdgeResultAction extends ResponseAction {\n    kind: typeof CheckEdgeResultAction.KIND;\n\n    /**\n     * true if the selected element is a valid target for this edge,\n     * false otherwise.\n     */\n    isValid: boolean;\n    /**\n     * The element type of the edge that has been checked.\n     */\n    edgeType: string;\n\n    /**\n     * The ID of the source element of the edge that has been checked.\n     */\n    sourceElementId: string;\n    /**\n     * The ID of the target element of the edge that has been checked.\n     */\n    targetElementId?: string;\n}\n\nexport namespace CheckEdgeResultAction {\n    export const KIND = 'checkEdgeTargetResult';\n\n    export function is(object: unknown): object is CheckEdgeResultAction {\n        return (\n            Action.hasKind(object, KIND) &&\n            hasBooleanProp(object, 'isValid') &&\n            hasStringProp(object, 'edgeType') &&\n            hasStringProp(object, 'sourceElementId') &&\n            hasStringProp(object, 'targetElementId', true)\n        );\n    }\n\n    export function create(options: {\n        isValid: boolean;\n        edgeType: string;\n        sourceElementId: string;\n        targetElementId?: string;\n        responseId?: string;\n    }): CheckEdgeResultAction {\n        return {\n            kind: KIND,\n            responseId: '',\n            ...options\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { hasArrayProp } from '../utils/type-util';\nimport { Action, RequestAction, ResponseAction } from './base-protocol';\n\n/**\n * Validation in GLSP is performed by using validation markers. A marker represents the validation result for a single model element\n */\nexport interface Marker {\n    /**\n     * Short label describing this marker message, e.g., short validation message\n     */\n    readonly label: string;\n    /**\n     * Full description of this marker, e.g., full validation message\n     */\n    readonly description: string;\n    /**\n     * Id of the model element this marker refers to\n     */\n    readonly elementId: string;\n    /**\n     * Marker kind, e.g., info, warning, error or custom kind\n     */\n    readonly kind: string;\n}\n\n/**\n * The default marker kinds used in GLSP\n */\nexport namespace MarkerKind {\n    export const INFO = 'info';\n    export const WARNING = 'warning';\n    export const ERROR = 'error';\n}\n\n/**\n * The default reasons for markers.\n */\nexport namespace MarkersReason {\n    /** Markers resulting from a batch validation */\n    export const BATCH = 'batch';\n    /** Markers resulting from a live validation */\n    export const LIVE = 'live';\n}\n\n/**\n * Action to retrieve markers for the specified model elements. Sent from the client to the server.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `RequestMarkersActions`.\n */\nexport interface RequestMarkersAction extends RequestAction<SetMarkersAction> {\n    kind: typeof RequestMarkersAction.KIND;\n\n    /**\n     * The elements for which markers are requested, may be just the root element.\n     */\n    elementsIDs: string[];\n\n    /**\n     * The reason for this request, such as `batch` or `live` validation. `batch` by default.\n     */\n    reason?: string;\n}\n\nexport namespace RequestMarkersAction {\n    export const KIND = 'requestMarkers';\n\n    export function is(object: unknown): object is RequestMarkersAction {\n        return RequestAction.hasKind(object, KIND) && hasArrayProp(object, 'elementsIDs');\n    }\n\n    export function create(elementsIDs: string[], options: { requestId?: string; reason?: string } = {}): RequestMarkersAction {\n        return {\n            kind: KIND,\n            requestId: '',\n            elementsIDs,\n            reason: MarkersReason.BATCH,\n            ...options\n        };\n    }\n}\n\n/**\n * Instructs the client to add markers to the diagram.\n * Typically, this is a response to the {@link RequestMarkersAction} containing all validation markers, but can be sent by the server at\n * unknown time.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SetMarkersActions`.\n */\nexport interface SetMarkersAction extends ResponseAction {\n    kind: typeof SetMarkersAction.KIND;\n\n    /**\n     * The list of markers to be added to the diagram.\n     */\n    readonly markers: Marker[];\n\n    /**\n     * The reason for message, such as `batch` or `live` validation.\n     */\n    reason?: string;\n}\n\nexport namespace SetMarkersAction {\n    export const KIND = 'setMarkers';\n\n    export function is(object: unknown): object is SetMarkersAction {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'markers');\n    }\n\n    export function create(markers: Marker[], options: { responseId?: string; reason?: string } = {}): SetMarkersAction {\n        return {\n            kind: KIND,\n            responseId: '',\n            markers,\n            reason: MarkersReason.BATCH,\n            ...options\n        };\n    }\n}\n\n/**\n * Action for clearing makers of a model\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `DeleteMarkersActions`. Can be sent by either the client or the server.\n */\nexport interface DeleteMarkersAction extends Action {\n    kind: typeof DeleteMarkersAction.KIND;\n\n    /**\n     * The list of markers that has been requested by the `RequestMarkersAction`.\n     */\n    markers: Marker[];\n}\n\nexport namespace DeleteMarkersAction {\n    export const KIND = 'deleteMarkers';\n\n    export function is(object: unknown): object is DeleteMarkersAction {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'markers');\n    }\n\n    export function create(markers: Marker[]): DeleteMarkersAction {\n        return {\n            kind: KIND,\n            markers\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as sprotty from 'sprotty-protocol/lib/actions';\nimport { GModelRootSchema } from '../model/model-schema';\nimport { hasObjectProp, hasStringProp } from '../utils/type-util';\nimport { Action, RequestAction, ResponseAction } from './base-protocol';\nimport { Args } from './types';\n\n/**\n * Sent from the server to the client in order to set the model. If a model is already present, it is replaced.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `RequestModelActions`.\n */\nexport interface RequestModelAction extends RequestAction<SetModelAction>, sprotty.RequestModelAction {\n    kind: typeof RequestModelAction.KIND;\n\n    /**\n     * Additional options used to compute the graphical model.\n     */\n    options?: Args;\n}\n\nexport namespace RequestModelAction {\n    export const KIND = 'requestModel';\n\n    export function is(object: unknown): object is RequestModelAction {\n        return RequestAction.hasKind(object, KIND);\n    }\n\n    export function create(options: { options?: Args; requestId?: string } = {}): RequestModelAction {\n        return {\n            kind: KIND,\n            requestId: '',\n            ...options\n        };\n    }\n}\n\n/**\n * Sent from the server to the client in order to set the model. If a model is already present, it is replaced.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SetModelActions`.\n */\nexport interface SetModelAction extends ResponseAction, sprotty.SetModelAction {\n    kind: typeof SetModelAction.KIND;\n    /**\n     * The new graphical model root.\n     */\n    newRoot: GModelRootSchema;\n}\n\nexport namespace SetModelAction {\n    export const KIND = 'setModel';\n\n    export function is(object: unknown): object is SetModelAction {\n        return Action.hasKind(object, KIND) && hasObjectProp(object, 'newRoot');\n    }\n\n    export function create(newRoot: GModelRootSchema, options: { responseId?: string } = {}): SetModelAction {\n        return {\n            kind: KIND,\n            responseId: '',\n            newRoot,\n            ...options\n        };\n    }\n}\n\n/**\n * Sent from the server to the client in order to update the model. If no model is present yet, this behaves the same as\n * a {@link SetModelAction}. The transition from the old model to the new one can be animated.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `UpdateModelActions`.\n */\nexport interface UpdateModelAction extends Action, Omit<sprotty.UpdateModelAction, 'matches' | 'cause'> {\n    kind: typeof UpdateModelAction.KIND;\n\n    newRoot: GModelRootSchema;\n    /**\n     * Boolean flag to indicate wether updated/changed elements should be animated in the diagram.\n     */\n    animate?: boolean;\n}\n\nexport namespace UpdateModelAction {\n    export const KIND = 'updateModel';\n\n    export function is(action: unknown): action is UpdateModelAction {\n        return Action.hasKind(action, KIND) && hasObjectProp(action, 'newRoot');\n    }\n\n    export function create(newRoot: GModelRootSchema, options: { animate?: boolean } = {}): UpdateModelAction {\n        return {\n            kind: KIND,\n            newRoot,\n            animate: true,\n            ...options\n        };\n    }\n}\n\n/**\n * Sent from the server to the client in order to indicate that the source model has changed.\n * The source model denotes the data source from which the diagram has been originally derived (such as a file, a database, etc.).\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SourceModelChangedActions`.\n */\nexport interface SourceModelChangedAction extends Action {\n    kind: typeof SourceModelChangedAction.KIND;\n\n    /**\n     * A human readable name of the source model (e.g. the file name).\n     */\n    sourceModelName: string;\n}\n\nexport namespace SourceModelChangedAction {\n    export const KIND = 'sourceModelChanged';\n\n    export function is(object: unknown): object is SourceModelChangedAction {\n        return Action.hasKind(object, KIND) && hasStringProp(object, 'sourceModelName');\n    }\n\n    export function create(sourceModelName: string): SourceModelChangedAction {\n        return {\n            kind: KIND,\n            sourceModelName: sourceModelName\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { hasStringProp } from '../utils/type-util';\nimport { Action } from './base-protocol';\n\n/**\n * Sent from the client to the server to set the model into a specific editor mode, allowing the server to react to certain\n * requests differently depending on the mode. A client may also listen to this action to prevent certain user interactions preemptively.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SetEditModeActions`.\n */\nexport interface SetEditModeAction extends Action {\n    kind: typeof SetEditModeAction.KIND;\n\n    /**\n     * The new edit mode of the diagram.\n     */\n    editMode: string;\n}\n\nexport namespace SetEditModeAction {\n    export const KIND = 'setEditMode';\n\n    export function is(object: unknown): object is SetEditModeAction {\n        return Action.hasKind(object, KIND) && hasStringProp(object, 'editMode');\n    }\n\n    export function create(editMode: string): SetEditModeAction {\n        return {\n            kind: KIND,\n            editMode\n        };\n    }\n}\n\n/**\n * The potential default values for the `editMode` property of  a {@link SetEditModeAction}.\n */\nexport namespace EditMode {\n    export const READONLY = 'readonly';\n    export const EDITABLE = 'editable';\n}\n","/********************************************************************************\n * Copyright (c) 2021-2024 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as sprotty from 'sprotty-protocol/lib/actions';\nimport { GModelRootSchema } from '../model/model-schema';\nimport { hasArrayProp, hasObjectProp } from '../utils/type-util';\nimport { Action, Operation, RequestAction, ResponseAction } from './base-protocol';\nimport { Args, ElementAndAlignment, ElementAndBounds, ElementAndLayoutData, ElementAndRoutingPoints } from './types';\n\n/**\n * Sent from the server to the client to request bounds for the given model. The model is rendered invisibly so the bounds can\n * derived from the DOM. The response is a ComputedBoundsAction. This hidden rendering round-trip is necessary if the client is responsible\n * for parts of the layout.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `RequestBoundsActions`.\n */\nexport interface RequestBoundsAction extends RequestAction<ComputedBoundsAction>, Omit<sprotty.RequestBoundsAction, '_'> {\n    kind: typeof RequestBoundsAction.KIND;\n\n    /**\n     * The model root element for which to compute the bounds.\n     */\n    newRoot: GModelRootSchema;\n}\n\nexport namespace RequestBoundsAction {\n    export const KIND = 'requestBounds';\n\n    export function is(object: unknown): object is RequestBoundsAction {\n        return RequestAction.hasKind(object, KIND) && hasObjectProp(object, 'newRoot');\n    }\n\n    export function create(newRoot: GModelRootSchema, options: { requestId?: string } = {}): RequestBoundsAction {\n        return {\n            kind: KIND,\n            requestId: '',\n            newRoot,\n            ...options\n        };\n    }\n}\n\n/**\n * Sent from the client to the server to transmit the result of bounds computation as a response to a {@link RequestBoundsAction}.\n * If the server is responsible for parts of the layout, it can do so after applying the computed bounds received with this action.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `ComputedBoundsActions`.\n */\nexport interface ComputedBoundsAction extends ResponseAction, sprotty.ComputedBoundsAction {\n    kind: typeof ComputedBoundsAction.KIND;\n    /**\n     * The new bounds of the model elements.\n     */\n    bounds: ElementAndBounds[];\n\n    /*\n     * The revision number.\n     */\n    revision?: number;\n\n    /**\n     * The new alignment of the model elements.\n     */\n    alignments?: ElementAndAlignment[];\n\n    /**\n     * The route of the model elements.\n     */\n    routes?: ElementAndRoutingPoints[];\n\n    /**\n     * The layout data of hte model elements.\n     */\n    layoutData?: ElementAndLayoutData[];\n}\n\nexport namespace ComputedBoundsAction {\n    export const KIND = 'computedBounds';\n\n    export function is(object: unknown): object is ComputedBoundsAction {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'bounds');\n    }\n\n    export function create(\n        bounds: ElementAndBounds[],\n        options: {\n            revision?: number;\n            responseId?: string;\n            alignments?: ElementAndAlignment[];\n            routes?: ElementAndRoutingPoints[];\n            layoutData?: ElementAndLayoutData[];\n        } = {}\n    ): ComputedBoundsAction {\n        return {\n            kind: KIND,\n            responseId: '',\n            bounds,\n            ...options\n        };\n    }\n}\n\n/**\n * Request a layout of the diagram or the selected elements only.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `LayoutOperations`.\n */\nexport interface LayoutOperation extends Operation, Omit<sprotty.LayoutAction, 'layoutType'> {\n    kind: typeof LayoutOperation.KIND;\n\n    /**\n     * The identifiers of the elements that should be layouted, will default to the root element if not defined.\n     */\n    elementIds?: string[];\n}\n\nexport namespace LayoutOperation {\n    export const KIND = 'layout';\n\n    export function is(object: unknown): object is LayoutOperation {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'elementIds');\n    }\n\n    export function create(elementIds?: string[], options: { args?: Args } = {}): LayoutOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            elementIds,\n            ...options\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { hasBooleanProp, hasStringProp } from '../utils/type-util';\nimport { Action, RequestAction, ResponseAction } from './base-protocol';\n\n/**\n * Sent from the client to the server in order to persist the current model state back to the source model.\n * A new fileUri can be defined to save the model to a new destination different from its original source model.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SaveModelActions`.\n */\nexport interface SaveModelAction extends Action {\n    kind: typeof SaveModelAction.KIND;\n    /**\n     *  The optional destination file uri.\n     */\n    fileUri?: string;\n}\n\nexport namespace SaveModelAction {\n    export const KIND = 'saveModel';\n\n    export function is(object: unknown): object is SaveModelAction {\n        return Action.hasKind(object, KIND);\n    }\n\n    export function create(options: { fileUri?: string } = {}): SaveModelAction {\n        return {\n            kind: KIND,\n            ...options\n        };\n    }\n}\n\n/**\n * The server sends this action to indicate to the client that the current model state on the server does not correspond\n * to the persisted model state of the source model. A client may ignore such an action or use it to indicate to the user the dirty state.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SetDirtyStateActions`.\n */\nexport interface SetDirtyStateAction extends Action {\n    kind: typeof SetDirtyStateAction.KIND;\n    /**\n     * True if the current model state is dirty\n     */\n    isDirty: boolean;\n\n    /**\n     * A string indicating the reason for the dirty state change e.g 'operation', 'undo',...\n     */\n    reason?: DirtyStateChangeReason;\n}\n\nexport type DirtyStateChangeReason = 'operation' | 'undo' | 'redo' | 'save' | 'external';\n\nexport namespace SetDirtyStateAction {\n    export const KIND = 'setDirtyState';\n\n    export function is(object: unknown): object is SetDirtyStateAction {\n        return Action.hasKind(object, KIND) && hasBooleanProp(object, 'isDirty');\n    }\n\n    export function create(isDirty: boolean, options: { reason?: DirtyStateChangeReason } = {}): SetDirtyStateAction {\n        return {\n            kind: KIND,\n            isDirty,\n            ...options\n        };\n    }\n}\n\n/**\n * A `RequestExportSvgAction` is sent by the client (or the server) to initiate the SVG export of the current diagram.\n * The handler of this action is expected to retrieve the diagram SVG and should send a {@link ExportSvgAction} as response.\n * Typically the {@link ExportSvgAction} is handled directly on client side.\n */\nexport interface RequestExportSvgAction extends RequestAction<ExportSvgAction> {\n    kind: typeof RequestExportSvgAction.KIND;\n}\nexport namespace RequestExportSvgAction {\n    export const KIND = 'requestExportSvg';\n\n    export function is(object: unknown): object is RequestExportSvgAction {\n        return RequestAction.hasKind(object, KIND);\n    }\n\n    export function create(options: { requestId?: string } = {}): RequestExportSvgAction {\n        return {\n            kind: KIND,\n            requestId: '',\n            ...options\n        };\n    }\n}\n\n/**\n * The client sends an `ExportSvgAction` to indicate that the diagram, which represents the current model state,\n * should be exported in SVG format. The action only provides the diagram SVG as plain string. The expected result of executing\n * an `ExportSvgAction` is a new file in SVG-format on the underlying filesystem. However, other details like the target destination,\n * concrete file name, file extension etc. are not specified in the protocol. So it is the responsibility of the action handler to\n * process this information accordingly and export the result to the underlying filesystem.\n */\nexport interface ExportSvgAction extends ResponseAction {\n    kind: typeof ExportSvgAction.KIND;\n    svg: string;\n    responseId: string;\n}\nexport namespace ExportSvgAction {\n    export const KIND = 'exportSvg';\n\n    export function is(object: unknown): object is ExportSvgAction {\n        return Action.hasKind(object, KIND) && hasStringProp(object, 'svg');\n    }\n\n    export function create(svg: string, options: { responseId?: string } = {}): ExportSvgAction {\n        return {\n            kind: KIND,\n            svg,\n            responseId: '',\n            ...options\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Point } from 'sprotty-protocol';\nimport { hasArrayProp, hasStringProp } from '../utils/type-util';\nimport { Operation } from './base-protocol';\nimport { Args, ElementAndBounds } from './types';\n\n/**\n * Triggers the position or size change of elements. This action concerns only the element's graphical size and position.\n * Whether an element can be resized or repositioned may be specified by the server with a `TypeHint` to allow for immediate user feedback\n * before resizing or repositioning.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `ChangeBoundsOperations`.\n */\nexport interface ChangeBoundsOperation extends Operation {\n    kind: typeof ChangeBoundsOperation.KIND;\n\n    newBounds: ElementAndBounds[];\n}\n\nexport namespace ChangeBoundsOperation {\n    export const KIND = 'changeBounds';\n\n    export function is(object: unknown): object is ChangeBoundsOperation {\n        return Operation.hasKind(object, KIND) && hasArrayProp(object, 'newBounds');\n    }\n\n    export function create(newBounds: ElementAndBounds[]): ChangeBoundsOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            newBounds\n        };\n    }\n}\n\n/**\n * The client sends a `ChangeContainerOperation` to the server to request the a semantic move i.e. the corresponding element\n * should be moved form its current container to the target container.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `ChangeContainerOperations`.\n */\nexport interface ChangeContainerOperation extends Operation {\n    kind: typeof ChangeContainerOperation.KIND;\n\n    /**\n     * The element to be changed.\n     */\n    elementId: string;\n\n    /**\n     * The element container of the changeContainer operation.\n     */\n    targetContainerId: string;\n\n    /**\n     * The graphical location.\n     */\n    location?: Point;\n}\n\nexport namespace ChangeContainerOperation {\n    export const KIND = 'changeContainer';\n\n    export function is(object: unknown): object is ChangeContainerOperation {\n        return Operation.hasKind(object, KIND) && hasStringProp(object, 'elementId') && hasStringProp(object, 'targetContainerId');\n    }\n\n    export function create(options: {\n        elementId: string;\n        targetContainerId: string;\n        location?: Point;\n        args?: Args;\n    }): ChangeContainerOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            ...options\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { hasStringProp } from '../utils/type-util';\nimport { Action } from './base-protocol';\nimport { Args, ElementTemplate } from './types';\n\n/**\n * A ghost element describes an element that may be rendered as a schematic visualization of an element that may be inserted\n * during creation.\n */\nexport interface GhostElement {\n    template: ElementTemplate;\n    dynamic?: boolean;\n}\n\n/**\n * Triggers the enablement of the tool that is responsible for creating nodes and initializes it with the creation of nodes of the given\n * `elementTypeId`.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `TriggerNodeCreationActions`.\n */\nexport interface TriggerNodeCreationAction extends Action {\n    kind: typeof TriggerNodeCreationAction.KIND;\n\n    /**\n     * The type of node that should be created by the node creation tool.\n     */\n    elementTypeId: string;\n\n    /**\n     * A ghost element represents the node that may be created by this action schematically.\n     * It is not guaranteed that the created element will match the ghost element exactly.\n     */\n    ghostElement?: GhostElement;\n\n    /**\n     * Custom arguments.\n     */\n    args?: Args;\n}\n\nexport namespace TriggerNodeCreationAction {\n    export const KIND = 'triggerNodeCreation';\n\n    export function is(object: unknown): object is TriggerNodeCreationAction {\n        return Action.hasKind(object, KIND) && hasStringProp(object, 'elementTypeId');\n    }\n\n    export function create(\n        elementTypeId: string,\n        options?: Omit<TriggerNodeCreationAction, 'kind' | 'elementTypeId'>\n    ): TriggerNodeCreationAction {\n        return {\n            kind: KIND,\n            elementTypeId,\n            ...options\n        };\n    }\n}\n\n/**\n * Triggers the enablement of the tool that is responsible for creating edges and initializes it with the creation of edges of the given\n * `elementTypeId`.\n * <Insert documentation>\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `TriggerEdgeCreationActions`.\n */\nexport interface TriggerEdgeCreationAction extends Action {\n    kind: typeof TriggerEdgeCreationAction.KIND;\n\n    /**\n     * The type of edge that should be created by the edge creation tool.\n     */\n    elementTypeId: string;\n\n    /**\n     * Custom arguments.\n     */\n    args?: Args;\n}\n\nexport namespace TriggerEdgeCreationAction {\n    export const KIND = 'triggerEdgeCreation';\n\n    export function is(object: unknown): object is TriggerEdgeCreationAction {\n        return Action.hasKind(object, KIND) && hasStringProp(object, 'elementTypeId');\n    }\n\n    export function create(elementTypeId: string, options: { args?: Args } = {}): TriggerEdgeCreationAction {\n        return {\n            kind: KIND,\n            elementTypeId,\n            ...options\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2024 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as sprotty from 'sprotty-protocol';\nimport { Dimension, Point } from 'sprotty-protocol';\nimport { GModelElementSchema } from '../model/model-schema';\nimport { AnyObject, hasArrayProp, hasStringProp } from '../utils/type-util';\nimport { Action } from './base-protocol';\nimport { TriggerEdgeCreationAction, TriggerNodeCreationAction } from './tool-palette';\n// A collection of convenience and utility types that are used in the GLSP action protocol.\n\n/**\n * A key-value pair structure for primitive typed custom arguments.\n */\nexport interface Args {\n    [key: string]: sprotty.JsonPrimitive;\n}\n\n/**\n * The template for a model element, i.e., either a reference to an existing element by element id or an element schema.\n */\nexport type ElementTemplate = string | GModelElementSchema;\n\n/**\n * The ElementAndBounds type is used to associate new bounds with a model element, which is referenced via its id.\n */\nexport interface ElementAndBounds extends sprotty.ElementAndBounds {\n    /**\n     * The identifier of the element.\n     */\n    elementId: string;\n    /**\n     * The new size of the element.\n     */\n    newSize: Dimension;\n    /**\n     * The new position of the element.\n     */\n    newPosition?: Point;\n}\n\n/**\n * The `ElementAndAlignment` type is used to associate a new alignment with a model element, which is referenced via its id.\n * Typically used to align label relative to their parent element.\n */\nexport interface ElementAndAlignment extends sprotty.ElementAndAlignment {\n    /**\n     * The identifier of the element.\n     */\n    elementId: string;\n    /**\n     * The new alignment of the element.\n     */\n    newAlignment: Point;\n}\n\n/**\n * The `ElementAndRoutingPoints` type is used to associate an edge with specific routing points.\n */\nexport interface ElementAndRoutingPoints {\n    /**\n     * The identifier of an element.\n     */\n    elementId: string;\n\n    /**\n     * The new list of routing points.\n     */\n    newRoutingPoints?: Point[];\n}\n\n/**\n * Data provided by the layouter.\n */\nexport interface LayoutData {\n    /**\n     * The computed minimum size of the element.\n     */\n    computedDimensions?: Dimension;\n}\n\n/**\n * The `ElementAndLayoutData` type is used to associate new layout data with a model element, which is referenced via its id.\n */\nexport interface ElementAndLayoutData {\n    /**\n     * The identifier of the element.\n     */\n    elementId: string;\n    /**\n     * The data provided by the layouter.\n     */\n    layoutData: LayoutData;\n}\n\n/**\n * The `EditorContext` may be used to represent the current state of the editor for particular actions.\n * It encompasses the last recorded mouse position, the list of selected elements, and may contain\n * custom arguments to encode additional state information.\n */\nexport interface EditorContext {\n    /**\n     * The list of selected element identifiers.\n     */\n    readonly selectedElementIds: string[];\n\n    /**\n     * The last recorded mouse position.\n     */\n    readonly lastMousePosition?: Point;\n\n    /**\n     * Custom arguments.\n     */\n    readonly args?: Args;\n}\n\nexport namespace EditorContext {\n    export function is(object: unknown): object is EditorContext {\n        return AnyObject.is(object) && hasArrayProp(object, 'selectedElementIds');\n    }\n}\n/**\n * Labeled actions are used to denote a group of actions in a user-interface context, e.g., to define an entry in the command palette or\n * in the context menu.\n * The corresponding namespace offers a helper function for type guard checks.\n */\nexport interface LabeledAction {\n    /**\n     * Group label.\n     */\n    label: string;\n\n    /**\n     * Actions in the group.\n     */\n    actions: Action[];\n    /**\n     * Optional group icon.\n     */\n    icon?: string;\n}\n\nexport namespace LabeledAction {\n    export function is(object: unknown): object is LabeledAction {\n        return AnyObject.is(object) && hasStringProp(object, 'label') && hasArrayProp(object, 'actions');\n    }\n\n    export function toActionArray(input: LabeledAction | Action[] | Action): Action[] {\n        if (Array.isArray(input)) {\n            return input;\n        } else if (LabeledAction.is(input)) {\n            return input.actions;\n        }\n        return [input];\n    }\n}\n\n/**\n * A special {@link LabeledAction} that is used to denote actions that should be triggered when the user\n * click a tool palette item (e.g. a button to create a new node).,\n */\nexport interface PaletteItem extends LabeledAction {\n    /** Technical id of the palette item. */\n    readonly id: string;\n    /** String indicating the order. */\n    readonly sortString: string;\n    /** Children of this item. If this item has children, the client will know to render them as sub group. */\n    readonly children?: PaletteItem[];\n}\n\nexport namespace PaletteItem {\n    export function is(object: unknown): object is PaletteItem {\n        return LabeledAction.is(object) && hasStringProp(object, 'id') && hasStringProp(object, 'sortString');\n    }\n\n    export function getTriggerAction(item?: PaletteItem): TriggerElementCreationAction | undefined {\n        if (item) {\n            const initialActions = item.actions\n                .filter(a => isTriggerElementCreationAction(a))\n                .map(action => action as TriggerElementCreationAction);\n            return initialActions.length > 0 ? initialActions[0] : undefined;\n        }\n        return undefined;\n    }\n\n    export type TriggerElementCreationAction = TriggerEdgeCreationAction | TriggerNodeCreationAction;\n\n    export function isTriggerElementCreationAction(object: unknown): object is TriggerElementCreationAction {\n        return TriggerNodeCreationAction.is(object) || TriggerEdgeCreationAction.is(object);\n    }\n}\n\n/**\n * A special {@link LabeledAction} that is used to denote items in a menu.\n */\nexport interface MenuItem extends LabeledAction {\n    /** Technical id of the menu item. */\n    readonly id: string;\n    /** String indicating the order. */\n    readonly sortString?: string;\n    /** String indicating the grouping (separators). Items with equal group will be in the same group. */\n    readonly group?: string;\n    /**\n     * The optional parent id can be used to add this element as a child of another element provided by another menu provider.\n     * The `parentId` must be fully qualified in the form of `a.b.c`, whereas `a`, `b` and `c` are referring to the IDs of other elements.\n     * Note that this attribute will only be considered for root items of a provider and not for children of provided items.\n     */\n    readonly parentId?: string;\n    /** Function determining whether the element is enabled. */\n    readonly isEnabled?: () => boolean;\n    /** Function determining whether the element is visible. */\n    readonly isVisible?: () => boolean;\n    /** Function determining whether the element is toggled on or off. */\n    readonly isToggled?: () => boolean;\n    /** Children of this item. If this item has children, they will be added into a submenu of this item. */\n    children?: MenuItem[];\n}\n\nexport namespace MenuItem {\n    export function is(object: unknown): object is MenuItem {\n        return LabeledAction.is(object) && hasStringProp(object, 'id');\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as sprotty from 'sprotty-protocol/lib/actions';\nimport { Action } from './base-protocol';\n/**\n * Trigger an undo of the latest executed command.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `UndoAction`.\n */\nexport interface UndoAction extends Omit<sprotty.UndoAction, 'kind'> {\n    kind: typeof UndoAction.KIND;\n}\n\nexport namespace UndoAction {\n    export const KIND = 'glspUndo';\n\n    export function is(object: unknown): object is UndoAction {\n        return Action.hasKind(object, KIND);\n    }\n\n    export function create(): UndoAction {\n        return {\n            kind: KIND\n        };\n    }\n}\n\n/**\n * Trigger a redo of the latest undone command.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `RedoAction`.\n */\nexport interface RedoAction extends Omit<sprotty.RedoAction, 'kind'> {\n    kind: typeof RedoAction.KIND;\n}\n\nexport namespace RedoAction {\n    export const KIND = 'glspRedo';\n\n    export function is(object: unknown): object is RedoAction {\n        return Action.hasKind(object, KIND);\n    }\n\n    export function create(): RedoAction {\n        return {\n            kind: KIND\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as sprotty from 'sprotty-protocol/lib/actions';\nimport { hasArrayProp, hasBooleanProp } from '../utils/type-util';\nimport { Action } from './base-protocol';\n\n/**\n * Centers the viewport on the elements with the given identifiers. It changes the scroll setting of the viewport accordingly and resets\n * the zoom to its default. This action is usually be created on the client but it can also be sent by the server in order to perform such\n * a viewport change remotely.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `CenterActions`.\n */\nexport interface CenterAction extends Action, sprotty.CenterAction {\n    kind: typeof CenterAction.KIND;\n\n    /**\n     * The identifier of the elements on which the viewport should be centered.\n     * If empty the root element will be used.\n     */\n    elementIds: string[];\n\n    /**\n     * Indicate if the modification of the viewport should be realized with or without support of animations.\n     */\n    animate: boolean;\n\n    /**\n     * Indicates whether the zoom level should be kept.\n     */\n    retainZoom: boolean;\n}\n\nexport namespace CenterAction {\n    export const KIND = 'center';\n\n    export function is(object: unknown): object is CenterAction {\n        return Action.hasKind(object, KIND) && hasBooleanProp(object, 'animate') && hasBooleanProp(object, 'retainZoom');\n    }\n\n    export function create(elementIds: string[], options: { animate?: boolean; retainZoom?: boolean } = {}): CenterAction {\n        return {\n            kind: KIND,\n            animate: true,\n            retainZoom: false,\n            elementIds,\n            ...options\n        };\n    }\n}\n\n/**\n * Triggers to fit all or a list of elements into the available diagram canvas.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `CenterActions`.\n */\nexport interface FitToScreenAction extends Action, sprotty.FitToScreenAction {\n    kind: typeof FitToScreenAction.KIND;\n\n    /**\n     * The identifier of the elements to fit on screen.\n     */\n    elementIds: string[];\n\n    /**\n     * The padding that should be visible on the viewport.\n     */\n    padding?: number;\n\n    /**\n     * The max zoom level authorized.\n     */\n    maxZoom?: number;\n\n    /**\n     * Indicate if the action should be performed with animation support or not.\n     */\n    animate: boolean;\n}\n\nexport namespace FitToScreenAction {\n    export const KIND = 'fit';\n\n    export function is(object: unknown): object is FitToScreenAction {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'elementIds') && hasBooleanProp(object, 'animate');\n    }\n\n    export function create(\n        elementIds: string[],\n        options: { padding?: number; maxZoom?: number; animate?: boolean } = {}\n    ): FitToScreenAction {\n        return {\n            kind: KIND,\n            animate: true,\n            elementIds,\n            ...options\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Deferred } from 'sprotty-protocol';\nimport { Disposable } from 'vscode-jsonrpc';\nimport { Action, ActionMessage } from '../action-protocol/base-protocol';\nimport { distinctAdd, remove } from '../utils/array-util';\nimport { Emitter, Event } from '../utils/event';\nimport { ActionMessageHandler, ClientState, GLSPClient } from './glsp-client';\nimport { GLSPClientProxy, GLSPServer } from './glsp-server';\nimport { DisposeClientSessionParameters, InitializeClientSessionParameters, InitializeParameters, InitializeResult } from './types';\n\nexport const GLOBAL_HANDLER_ID = '*';\n/**\n * A simple {@link GLSPClient} implementation for use cases where the client & server are running\n * in the same context/process without a communication layer (like json-rpc) between. The client\n * directly communicates with a given {@link GLSPServer} instance.\n */\nexport class BaseGLSPClient implements GLSPClient {\n    protected state: ClientState;\n    protected _server?: GLSPServer;\n    protected serverDeferred = new Deferred<GLSPServer>();\n    protected onStartDeferred = new Deferred<void>();\n    protected onStopDeferred = new Deferred<void>();\n    readonly proxy: GLSPClientProxy;\n    protected startupTimeout = 1500;\n    protected actionMessageHandlers: Map<string, ActionMessageHandler[]> = new Map([[GLOBAL_HANDLER_ID, []]]);\n    protected _initializeResult: InitializeResult;\n\n    protected onServerInitializedEmitter = new Emitter<InitializeResult>();\n    get onServerInitialized(): Event<InitializeResult> {\n        return this.onServerInitializedEmitter.event;\n    }\n\n    constructor(protected options: GLSPClient.Options) {\n        this.state = ClientState.Initial;\n        this.proxy = this.createProxy();\n    }\n\n    protected createProxy(): GLSPClientProxy {\n        return {\n            process: message => {\n                const handlers = this.actionMessageHandlers.get(message.clientId) ?? this.actionMessageHandlers.get(GLOBAL_HANDLER_ID);\n                if (!handlers) {\n                    console.warn('No ActionMessageHandler is configured- Cannot process server message', message);\n                    return;\n                }\n                handlers.forEach(handler => handler(message));\n            }\n        };\n    }\n\n    configureServer(server: GLSPServer): void {\n        if (this.state === ClientState.Running) {\n            throw new Error('Could not configure new server. The GLSPClient is already running');\n        }\n        this.serverDeferred.resolve(server);\n    }\n\n    start(): Promise<void> {\n        if (this.state === ClientState.Running) {\n            return this.onStartDeferred.promise;\n        }\n\n        this.state = ClientState.Starting;\n        const timeOut = new Promise<GLSPServer>((_, reject) =>\n            setTimeout(() => {\n                reject(new Error('Could not start client. No server is configured'));\n            }, this.startupTimeout)\n        );\n        Promise.race([this.serverDeferred.promise, timeOut])\n            .then(server => {\n                this._server = server;\n                this.state = ClientState.Running;\n                this.onStartDeferred.resolve();\n            })\n            .catch(error => {\n                this.state = ClientState.StartFailed;\n                this.onStartDeferred.reject(error);\n            });\n\n        return this.onStartDeferred.promise;\n    }\n\n    async initializeServer(params: InitializeParameters): Promise<InitializeResult> {\n        if (!this._initializeResult) {\n            this._initializeResult = await this.checkedServer.initialize(params);\n            this.onServerInitializedEmitter.fire(this._initializeResult);\n        }\n        return this._initializeResult;\n    }\n\n    get initializeResult(): InitializeResult | undefined {\n        return this._initializeResult;\n    }\n\n    initializeClientSession(params: InitializeClientSessionParameters): Promise<void> {\n        return this.checkedServer.initializeClientSession(params);\n    }\n\n    disposeClientSession(params: DisposeClientSessionParameters): Promise<void> {\n        return this.checkedServer.disposeClientSession(params);\n    }\n\n    shutdownServer(): void {\n        this.checkedServer.shutdown();\n    }\n\n    async stop(): Promise<void> {\n        if (this.state === ClientState.Stopped || this.state === ClientState.Stopping) {\n            return this.onStop();\n        }\n\n        this.state = ClientState.Stopping;\n        try {\n            if (this._server) {\n                this._server.shutdown();\n            }\n        } finally {\n            this.state = ClientState.Stopped;\n            this.onStopDeferred.resolve();\n        }\n    }\n\n    sendActionMessage(message: ActionMessage<Action>): void {\n        this.checkedServer.process(message);\n    }\n\n    onActionMessage(handler: ActionMessageHandler, clientId?: string): Disposable {\n        if (!clientId) {\n            distinctAdd(this.actionMessageHandlers.get(GLOBAL_HANDLER_ID)!, handler);\n            return Disposable.create(() => remove(this.actionMessageHandlers.get(GLOBAL_HANDLER_ID)!, handler));\n        }\n        if (!this.actionMessageHandlers.has(clientId)) {\n            this.actionMessageHandlers.set(clientId, [handler]);\n        } else {\n            distinctAdd(this.actionMessageHandlers.get(clientId)!, handler);\n        }\n        return Disposable.create(() => remove(this.actionMessageHandlers.get(clientId)!, handler));\n    }\n\n    get currentState(): ClientState {\n        return this.state;\n    }\n\n    onStart(): Promise<void> {\n        return this.onStartDeferred.promise;\n    }\n\n    onStop(): Promise<void> {\n        return this.onStopDeferred.promise;\n    }\n\n    get id(): string {\n        return this.options.id;\n    }\n\n    protected checkState(): void | never {\n        if (this.state !== ClientState.Running) {\n            throw new Error(`Client with id '${this.id}' is not in 'Running' state`);\n        }\n    }\n\n    protected get checkedServer(): GLSPServer {\n        this.checkState();\n        if (!this._server) {\n            throw new Error(`No server is configured for GLSPClient with id '${this.id}'`);\n        }\n        return this._server;\n    }\n\n    setStartupTimeout(ms: number): void {\n        this.startupTimeout = ms;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020-2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as uuid from 'uuid';\n\nimport { ActionMessage } from '../action-protocol/base-protocol';\nimport { Disposable } from '../utils/disposable';\nimport { Event } from '../utils/event';\nimport { AnyObject, hasStringProp } from '../utils/type-util';\nimport { DisposeClientSessionParameters, InitializeClientSessionParameters, InitializeParameters, InitializeResult } from './types';\n\nexport class ApplicationIdProvider {\n    private static _applicationId?: string;\n    static get(): string {\n        if (!ApplicationIdProvider._applicationId) {\n            ApplicationIdProvider._applicationId = uuid.v4();\n        }\n        return ApplicationIdProvider._applicationId;\n    }\n}\n\nexport type ActionMessageHandler = (message: ActionMessage) => void;\n\nexport enum ClientState {\n    /**\n     * The client has been created.\n     */\n    Initial,\n    /**\n     * `Start` has been called on the client and the start process is still on-going.\n     */\n    Starting,\n    /**\n     * The client failed to complete the start process.\n     */\n    StartFailed,\n    /**\n     * The client was successfully started and is now running.\n     */\n    Running,\n    /**\n     * `Stop` has been called on the client and the stop process is still on-going.\n     */\n    Stopping,\n    /**\n     * The client stopped and disposed the server connection. Thus, action messages can no longer be sent.\n     */\n    Stopped,\n    /**\n     * An error was encountered while connecting to the server. No action messages can be sent.\n     */\n    ServerError\n}\n\nexport interface GLSPClient {\n    /**\n     * Unique client Id.\n     */\n    readonly id: string;\n\n    /**\n     * Current client state.\n     */\n    readonly currentState: ClientState;\n\n    /**\n     * Initializes the client and the server connection. During the start procedure the client is in the\n     * `Starting` state and will transition to either `Running` or `StartFailed`. Calling this method\n     *  if the client is already running has no effect.\n     *\n     * @returns A promise that resolves if the startup was successful.\n     */\n    start(): Promise<void>;\n\n    /**\n     * Send an `initialize` request to the server. The server needs to be initialized in order to accept and\n     * process other requests and notifications. The {@link InitializeResult} ist cached and can be retrieved\n     * via the {@link GLSPClient.initializeResult} property.\n     * Only the first method invocation actually sends a request to the server. Subsequent invocations simply\n     * return the cached result.\n     *\n     * @param params Initialize parameters\n     * @returns A promise of the {@link InitializeResult}.\n     */\n    initializeServer(params: InitializeParameters): Promise<InitializeResult>;\n\n    /**\n     * The cached {@link {InitializeResult}. Is `undefined` if the server has not been initialized yet via\n     * the {@link GLSPClient.initializeServer} method.\n     */\n    readonly initializeResult: InitializeResult | undefined;\n\n    /**\n     * Event that is fired once the first invocation of {@link GLSPClient.initializeServer} has been completed.\n     */\n    readonly onServerInitialized: Event<InitializeResult>;\n\n    /**\n     * Send an `initializeClientSession` request to the server. One client application may open several session.\n     * Each individual diagram on the client side counts as one session and has to provide\n     * a unique clientId.\n     *\n     * @param params InitializeClientSession parameters\n     * @returns A promise that resolves if the initialization was successful\n     */\n    initializeClientSession(params: InitializeClientSessionParameters): Promise<void>;\n\n    /**\n     * Sends a `disposeClientSession` request to the server. This request has to be sent at the end of client session lifecycle\n     * e.g. when an editor widget is closed.\n     *\n     * @param params DisposeClientSession parameters\n     * @returns A promise that resolves if the disposal was successful\n     */\n    disposeClientSession(params: DisposeClientSessionParameters): Promise<void>;\n\n    /**\n     * Send a `shutdown` notification to the server.\n     */\n    shutdownServer(): void;\n\n    /**\n     * Stops the client and disposes unknown resources. During the stop procedure the client is in the `Stopping` state and will\n     * transition to either `Stopped` or `ServerError`.\n     *\n     * @returns A promise that resolves after the server was stopped and disposed.\n     */\n    stop(): Promise<void>;\n\n    /**\n     * Send an action message to the server.\n     *\n     * @param message The message\n     */\n    sendActionMessage(message: ActionMessage): void;\n\n    /**\n     * Sets a handler/listener for action messages received from the server.\n     * Can be scoped to a particular client session by passing the corresponding `clientId`.\n     *\n     * @param handler The action message handler\n     * @param clientId If passed given action message handler will only be invoked for action messages with this client id.\n     * @returns A {@link Disposable} that can be used to unregister the handler\n     */\n    onActionMessage(handler: ActionMessageHandler, clientId?: string): Disposable;\n}\nexport namespace GLSPClient {\n    export interface Options {\n        id: string;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n    export function isOptions(object: unknown): object is Options {\n        return AnyObject.is(object) && hasStringProp(object, 'id');\n    }\n\n    export const protocolVersion = '1.0.0';\n}\n","/********************************************************************************\n * Copyright (c) 2022-2024 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ActionMessage } from '../action-protocol/base-protocol';\nimport { DisposeClientSessionParameters, InitializeClientSessionParameters, InitializeParameters, InitializeResult } from './types';\n\n/**\n * Interface for implementations of a ts server component.\n * Based on the specification of the Graphical Language Server Protocol:\n * https://www.eclipse.org/glsp/documentation/protocol/\n */\nexport interface GLSPServer {\n    /**\n     *\n     * The `initialize` request has to be the first request from the client to the server. Until the server has responded\n     * with an {@link InitializeResult} no other request or notification can be handled and is expected to throw an\n     * error. A client is uniquely identified by an `applicationId` and has to specify on which `protocolVersion` it is\n     * based on. In addition, custom arguments can be provided in the `args` map to allow for custom initialization\n     * behavior on the server.\n     *\n     * After successfully initialization all {@link GLSPServerListener}s are notified via the\n     * {@link GLSPServerListener.serverInitialized} method.\n     *\n     * @param params the {@link InitializeParameters}.\n     * @returns A promise of the {@link InitializeResult} .\n     *\n     * @throws {@link Error} Subsequent initialize requests return the {@link InitializeResult} of the initial request\n     * if the given application id and protocol version are matching, otherwise the promise rejects with an error.\n     *\n     */\n    initialize(params: InitializeParameters): Promise<InitializeResult>;\n\n    /**\n     * The `initializeClientSession` request is sent to the server whenever a new graphical representation (diagram) is\n     * created. Each individual diagram on the client side counts as one session and has to provide a unique\n     * `clientSessionId` and its `diagramType`. In addition, custom arguments can be provided in the `args` map to allow\n     * for custom initialization behavior on the server. Subsequent `initializeClientSession` requests for the same\n     * client id and diagram type are expected to resolve successfully but don't have an actual effect because the\n     * corresponding client session is  already initialized.\n     *\n     * @param params the {@link InitializeClientSessionParameters}.\n     * @returns A promise that completes when the initialization was successful.\n     */\n    initializeClientSession(params: InitializeClientSessionParameters): Promise<void>;\n\n    /**\n     * The 'DisposeClientSession' request is sent to the server when a graphical representation (diagram) is no longer\n     * needed, e.g. the tab containing the diagram widget has been closed. The session is identified by its unique\n     * `clientSessionId`. In addition, custom arguments can be provided in the `args` map to allow for custom dispose\n     * behavior on the server.\n     *\n     * @param params the {@link DisposeClientSessionParameters}.\n     * @returns A `void` promise that completes if the disposal was successful.\n     *\n     */\n    disposeClientSession(params: DisposeClientSessionParameters): Promise<void>;\n\n    /**\n     * A `process` notification is sent from the client to server when the server should handle i.e. process a specific\n     * {@link ActionMessage}. Any communication that is performed between initialization and shutdown is handled by\n     * sending action messages, either from the client to the server or from the server to the client. This is the core\n     * part of the Graphical Language Server Protocol.\n     *\n     * @param message The {@link ActionMessage} that should be processed.\n     */\n    process(message: ActionMessage): void;\n\n    /**\n     * The `shutdown` notification is sent from the client to the server if the client disconnects from the server (e.g.\n     * the client application has been closed).\n     * This gives the server a chance to clean up and dispose unknown resources dedicated to the client and its sessions.\n     * All {@link GLSPServerListener}s are notified via the {@link GLSPServerListener.serverShutDown} method.\n     * Afterwards the server instance is considered to be disposed and can no longer be used for handling requests.\n     *\n     */\n    shutdown(): void;\n\n    /**\n     * Register a new {@link GLSPServerListener}.\n     *\n     * @param listener The listener that should be registered.\n     * @returns `true` if the listener was registered successfully, `false` otherwise (e.g. listener is already\n     *         registered).\n     */\n    addListener(listener: GLSPServerListener): boolean;\n\n    /**\n     * Unregister a {@link GLSPServerListener}.\n     *\n     * @param listener The listener that should be removed\n     * @returns 'true' if the listener was unregistered successfully, `false` otherwise (e.g. listener is was not\n     *         registered in the first place).\n     */\n    removeListener(listener: GLSPServerListener): boolean;\n}\n\nexport const GLSPServer = Symbol('GLSPServer');\n\n/**\n * A listener to track the connection status of {@link GLSPClient}s (i.e. client applications).\n * Gets notified when a new GLSP client connects or disconnects.\n */\nexport interface GLSPServerListener {\n    /**\n     * Triggered after a GLSPServer has been initialized via the {@link GLSPServer.initialize()}\n     * method.\n     *\n     * @param server The GLSPServer which has been initialized.\n     */\n    serverInitialized?(server: GLSPServer): void;\n\n    /**\n     * Triggered after the {@link GLSPServer.shutdown()} method has been invoked.\n     *\n     * @param glspServer The glspServer which has been shut down.\n     */\n    serverShutDown?(server: GLSPServer): void;\n}\nexport const GLSPServerListener = Symbol('GLSPServerListener');\n\n/**\n * Communication proxy interface used by the GLSP servers to send action messages to clients.\n * The default `JsonrpcClientProxy` used an underlying jsonrpc message connection for sending the action messages.\n */\nexport interface GLSPClientProxy {\n    /**\n     * A `process` notification is sent from the server to server to the client when the client should handle i.e.\n     * process a specific {@link ActionMessage}. Any communication that is performed between initialization and shutdown\n     * is handled by sending action messages, either from the client to the server or from the server to the client. This\n     * is the core part of the Graphical Language Server Protocol.\n     *\n     * @param message The {@link ActionMessage} that should be processed.\n     */\n    process(message: ActionMessage): void;\n}\nexport const GLSPClientProxy = Symbol('GLSPClientProxy');\n","/********************************************************************************\n * Copyright (c) 2019-2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport { Disposable, Message, MessageConnection } from 'vscode-jsonrpc';\nimport { ActionMessage } from '../../action-protocol/base-protocol';\nimport { Emitter, Event } from '../../utils/event';\nimport { ActionMessageHandler, ClientState, GLSPClient } from '../glsp-client';\nimport { GLSPClientProxy } from '../glsp-server';\nimport { DisposeClientSessionParameters, InitializeClientSessionParameters, InitializeParameters, InitializeResult } from '../types';\nimport { ConnectionProvider, JsonrpcGLSPClient } from './glsp-jsonrpc-client';\n\nexport class BaseJsonrpcGLSPClient implements GLSPClient {\n    readonly id: string;\n    protected readonly connectionProvider: ConnectionProvider;\n    protected connectionPromise?: Promise<MessageConnection>;\n    protected resolvedConnection?: MessageConnection;\n    protected state: ClientState;\n    protected onStop?: Promise<void>;\n    protected _initializeResult: InitializeResult | undefined;\n\n    protected onServerInitializedEmitter = new Emitter<InitializeResult>();\n    get onServerInitialized(): Event<InitializeResult> {\n        return this.onServerInitializedEmitter.event;\n    }\n\n    protected onActionMessageNotificationEmitter = new Emitter<ActionMessage>();\n    protected get onActionMessageNotification(): Event<ActionMessage> {\n        return this.onActionMessageNotificationEmitter.event;\n    }\n\n    constructor(options: JsonrpcGLSPClient.Options) {\n        Object.assign(this, options);\n        this.state = ClientState.Initial;\n    }\n\n    shutdownServer(): void {\n        this.checkedConnection.sendNotification(JsonrpcGLSPClient.ShutdownNotification);\n    }\n\n    async initializeServer(params: InitializeParameters): Promise<InitializeResult> {\n        if (!this._initializeResult) {\n            this._initializeResult = await this.checkedConnection.sendRequest(JsonrpcGLSPClient.InitializeRequest, params);\n            this.onServerInitializedEmitter.fire(this._initializeResult);\n        }\n        return this._initializeResult;\n    }\n\n    get initializeResult(): InitializeResult | undefined {\n        return this._initializeResult;\n    }\n\n    initializeClientSession(params: InitializeClientSessionParameters): Promise<void> {\n        return this.checkedConnection.sendRequest(JsonrpcGLSPClient.InitializeClientSessionRequest, params);\n    }\n\n    disposeClientSession(params: DisposeClientSessionParameters): Promise<void> {\n        return this.checkedConnection.sendRequest(JsonrpcGLSPClient.DisposeClientSessionRequest, params);\n    }\n\n    onActionMessage(handler: ActionMessageHandler, clientId?: string): Disposable {\n        return this.onActionMessageNotification(msg => {\n            if (!clientId || msg.clientId === clientId) {\n                handler(msg);\n            }\n        });\n    }\n\n    sendActionMessage(message: ActionMessage): void {\n        this.checkedConnection.sendNotification(JsonrpcGLSPClient.ActionMessageNotification, message);\n    }\n\n    protected get checkedConnection(): MessageConnection {\n        if (!this.isConnectionActive()) {\n            throw new Error(JsonrpcGLSPClient.ClientNotReadyMsg);\n        }\n        return this.resolvedConnection!;\n    }\n\n    async start(): Promise<void> {\n        if (this.state === ClientState.Running) {\n            return;\n        }\n        try {\n            this.state = ClientState.Starting;\n            const connection = await this.resolveConnection();\n            connection.listen();\n            this.resolvedConnection = connection;\n            this.state = ClientState.Running;\n        } catch (error) {\n            JsonrpcGLSPClient.error('Failed to start connection to server', error);\n            this.state = ClientState.StartFailed;\n        }\n    }\n\n    stop(): Promise<void> {\n        if (!this.connectionPromise) {\n            this.state = ClientState.Stopped;\n            return Promise.resolve();\n        }\n        if (this.state === ClientState.Stopping && this.onStop) {\n            return this.onStop;\n        }\n        this.state = ClientState.Stopping;\n        return (this.onStop = this.resolveConnection().then(connection => {\n            connection.dispose();\n            this.state = ClientState.Stopped;\n            this.onStop = undefined;\n            this.onActionMessageNotificationEmitter.dispose();\n            this.connectionPromise = undefined;\n            this.resolvedConnection = undefined;\n        }));\n    }\n\n    protected resolveConnection(): Promise<MessageConnection> {\n        if (!this.connectionPromise) {\n            this.connectionPromise = this.doCreateConnection();\n        }\n        return this.connectionPromise;\n    }\n\n    protected async doCreateConnection(): Promise<MessageConnection> {\n        const connection = typeof this.connectionProvider === 'function' ? await this.connectionProvider() : this.connectionProvider;\n        connection.onError(data => this.handleConnectionError(data[0], data[1], data[2]));\n        connection.onClose(() => this.handleConnectionClosed());\n        connection.onNotification(JsonrpcGLSPClient.ActionMessageNotification, msg => this.onActionMessageNotificationEmitter.fire(msg));\n        return connection;\n    }\n\n    protected handleConnectionError(error: Error, message: Message | undefined, count: number | undefined): void {\n        JsonrpcGLSPClient.error('Connection to server is erroring. Shutting down server.', error);\n        this.stop();\n        this.state = ClientState.ServerError;\n    }\n\n    protected handleConnectionClosed(): void {\n        if (this.state === ClientState.Stopping || this.state === ClientState.Stopped) {\n            return;\n        }\n        try {\n            if (this.resolvedConnection) {\n                this.resolvedConnection.dispose();\n                this.connectionPromise = undefined;\n                this.resolvedConnection = undefined;\n            }\n        } catch (error) {\n            // Disposing a connection could fail if error cases.\n        }\n\n        JsonrpcGLSPClient.error('Connection to server got closed. Server will not be restarted.');\n        this.state = ClientState.ServerError;\n    }\n\n    isConnectionActive(): boolean {\n        return this.state === ClientState.Running && !!this.resolvedConnection;\n    }\n\n    get currentState(): ClientState {\n        return this.state;\n    }\n}\n\n/**\n * Default {@link GLSPClientProxy} implementation for jsonrpc-based client-server communication with typescript based servers.\n */\n@injectable()\nexport class JsonrpcClientProxy implements GLSPClientProxy {\n    protected clientConnection?: MessageConnection;\n    protected enableLogging: boolean;\n\n    initialize(clientConnection: MessageConnection, enableLogging = false): void {\n        this.clientConnection = clientConnection;\n        this.enableLogging = enableLogging;\n    }\n\n    process(message: ActionMessage): void {\n        if (this.enableLogging) {\n            console.log(`Send action '${message.action.kind}' to client '${message.clientId}'`);\n        }\n        this.clientConnection?.sendNotification(JsonrpcGLSPClient.ActionMessageNotification, message);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { MessageConnection, NotificationType, NotificationType0, RequestType } from 'vscode-jsonrpc';\nimport { ActionMessage } from '../../action-protocol/base-protocol';\nimport { MaybePromise } from '../../utils/type-util';\nimport { GLSPClient } from '../glsp-client';\nimport { DisposeClientSessionParameters, InitializeClientSessionParameters, InitializeParameters, InitializeResult } from '../types';\n\nexport type ConnectionProvider = MessageConnection | (() => MaybePromise<MessageConnection>);\n\nexport namespace JsonrpcGLSPClient {\n    export interface Options extends GLSPClient.Options {\n        connectionProvider: ConnectionProvider;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n    export function isOptions(object: unknown): object is Options {\n        return GLSPClient.isOptions(object) && 'connectionProvider' in object;\n    }\n\n    export const ActionMessageNotification = new NotificationType<ActionMessage>('process');\n    export const InitializeRequest = new RequestType<InitializeParameters, InitializeResult, void>('initialize');\n    export const InitializeClientSessionRequest = new RequestType<InitializeClientSessionParameters, void, void>('initializeClientSession');\n    export const DisposeClientSessionRequest = new RequestType<DisposeClientSessionParameters, void, void>('disposeClientSession');\n\n    export const ShutdownNotification = new NotificationType0('shutdown');\n    export const ClientNotReadyMsg = 'JsonrpcGLSPClient is not ready yet';\n\n    export function error(message: string, ...optionalParams: unknown[]): void {\n        console.error(`[JsonrpcGLSPClient] ${message}`, optionalParams);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { MessageConnection } from 'vscode-jsonrpc';\nimport { GLSPServer } from '../glsp-server';\nimport { DisposeClientSessionParameters, InitializeClientSessionParameters, InitializeParameters } from '../types';\nimport { JsonrpcGLSPClient } from './glsp-jsonrpc-client';\n\n/**\n * Configure the given client connection to forward the requests and notifications to the given {@link GLSPServer} instance.\n * @param clientConnection JSON-RPC client connection.\n * @param glspServer The GLSP Server which should react to requests & notifications.\n */\nexport function configureClientConnection(clientConnection: MessageConnection, glspServer: GLSPServer): void {\n    clientConnection.onRequest(JsonrpcGLSPClient.InitializeRequest.method, (params: InitializeParameters) => glspServer.initialize(params));\n    clientConnection.onRequest(JsonrpcGLSPClient.InitializeClientSessionRequest, (params: InitializeClientSessionParameters) =>\n        glspServer.initializeClientSession(params)\n    );\n    clientConnection.onRequest(JsonrpcGLSPClient.DisposeClientSessionRequest, (params: DisposeClientSessionParameters) =>\n        glspServer.disposeClientSession(params)\n    );\n    clientConnection.onNotification(JsonrpcGLSPClient.ActionMessageNotification, message => glspServer.process(message));\n\n    clientConnection.listen();\n}\n","/********************************************************************************\n * Copyright (c) 2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// based on https://github.com/TypeFox/monaco-languageclient/blob/vwj-2.0.1/packages/vscode-ws-jsonrpc/src/socket/reader.ts\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018-2022 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport {\n    AbstractMessageReader,\n    AbstractMessageWriter,\n    createMessageConnection,\n    DataCallback,\n    Disposable,\n    Logger,\n    Message,\n    MessageConnection\n} from 'vscode-jsonrpc';\n\n/**\n * A wrapper interface that enables the reuse of the {@link WebSocketMessageReader} and {@link WebSocketMessageWriter}\n * independent of the underlying WebSocket implementation/library. e.g. one could use Socket.io instead of plain WebSockets\n */\nexport interface WebSocketWrapper extends Disposable {\n    send(content: string | ArrayBufferLike | ArrayBufferView): void;\n    onMessage(cb: (data: unknown) => void): void;\n    onError(cb: (reason: unknown) => void): void;\n    onClose(cb: (code: number, reason: string) => void): void;\n}\n\n/**\n * Creates a {@link WebSocketWrapper} for the given plain WebSocket\n * @param socket The socket to wrap\n */\nexport function wrap(socket: WebSocket): WebSocketWrapper {\n    return {\n        send: content => socket.send(content),\n        onMessage: cb => (socket.onmessage = event => cb(event.data)),\n        onClose: cb => (socket.onclose = event => cb(event.code, event.reason)),\n        onError: cb =>\n            (socket.onerror = event => {\n                if ('error' in event) {\n                    cb(event.error);\n                }\n            }),\n        dispose: () => socket.close()\n    };\n}\n\n/**\n * A `vscode-jsonrpc` {@link MessageReader} that reads messages from an underlying {@link WebSocketWrapper}.\n */\nexport class WebSocketMessageReader extends AbstractMessageReader {\n    protected state: 'initial' | 'listening' | 'closed' = 'initial';\n    protected callback?: DataCallback;\n    protected eventQueue: Array<{ message?: unknown; error?: unknown }> = [];\n\n    constructor(protected readonly socket: WebSocketWrapper) {\n        super();\n        this.socket.onMessage(message => this.handleMessage(message));\n        this.socket.onError(error => this.fireError(error));\n        this.socket.onClose(() => this.fireClose());\n    }\n\n    listen(callback: DataCallback): Disposable {\n        if (this.state === 'initial') {\n            this.state = 'listening';\n            this.callback = callback;\n            this.eventQueue.forEach(event => {\n                if (event.message) {\n                    this.handleMessage(event.message);\n                } else if (event.error) {\n                    this.fireError(event.error);\n                } else {\n                    this.fireClose();\n                }\n            });\n            this.eventQueue = [];\n        }\n        return Disposable.create(() => {\n            this.callback = undefined;\n            this.eventQueue = [];\n        });\n    }\n\n    protected handleMessage(message: any): void {\n        if (this.state === 'initial') {\n            this.eventQueue.push({ message });\n        } else if (this.state === 'listening') {\n            const data = JSON.parse(message);\n            this.callback!(data);\n        }\n    }\n\n    protected override fireError(error: unknown): void {\n        if (this.state === 'initial') {\n            this.eventQueue.push({ error });\n        } else if (this.state === 'listening') {\n            super.fireError(error);\n        }\n    }\n\n    protected override fireClose(): void {\n        if (this.state === 'initial') {\n            this.eventQueue.push({});\n        } else if (this.state === 'listening') {\n            super.fireClose();\n        }\n        this.state = 'closed';\n    }\n}\n\n/**\n * A `vscode-jsonrpc` {@link MessageReader} that writes messages to an underlying {@link WebSocketWrapper}.\n */\nexport class WebSocketMessageWriter extends AbstractMessageWriter {\n    protected errorCount = 0;\n\n    constructor(protected readonly socket: WebSocketWrapper) {\n        super();\n    }\n\n    end(): void {\n        /** no-op */\n    }\n\n    async write(msg: Message): Promise<void> {\n        try {\n            const content = JSON.stringify(msg);\n            this.socket.send(content);\n        } catch (e) {\n            this.errorCount++;\n            this.fireError(e, msg, this.errorCount);\n        }\n    }\n}\n\n/**\n * Create a `vscode-jsonrpc` {@link MessageConnection} on top of a given {@link WebSocketWrapper}.\n */\nexport function createWebSocketConnection(socket: WebSocketWrapper, logger?: Logger): MessageConnection {\n    const reader = new WebSocketMessageReader(socket);\n    const writer = new WebSocketMessageWriter(socket);\n    return createMessageConnection(reader, writer, logger);\n}\n\n/**\n * Creates a new {@link MessageConnection} on top of the given websocket on open.\n * @param webSocket The target webSocket\n * @param onConnection Optional callback that is invoked after the connection has been created\n * @param logger Optional connection logger\n * @returns A promise of the created connection\n */\nexport function listen(\n    webSocket: WebSocket,\n    onConnection?: (connection: MessageConnection) => void,\n    logger?: Logger\n): Promise<MessageConnection> {\n    return new Promise(resolve => {\n        webSocket.onopen = () => {\n            const socket = wrap(webSocket);\n            const connection = createWebSocketConnection(socket, logger);\n            onConnection?.(connection);\n            resolve(connection);\n        };\n    });\n}\n","/********************************************************************************\n * Copyright (c) 2023-2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { BrowserMessageReader, BrowserMessageWriter, MessageConnection, createMessageConnection } from 'vscode-jsonrpc/browser';\nimport { GLSPConnectionHandler } from './ws-connection-provider';\n\nexport class GLSPWebWorkerProvider {\n    protected worker: Worker;\n\n    constructor(protected url: string) {}\n\n    protected createWebWorker(url: string): Worker {\n        return new Worker(url);\n    }\n\n    listen(handler: GLSPConnectionHandler): MessageConnection {\n        this.worker = this.createWebWorker(this.url);\n        const wwConnection = createMessageConnection(new BrowserMessageReader(this.worker), new BrowserMessageWriter(this.worker));\n\n        handler.logger?.warn('GLSPWebWorkerProvider Initializing!');\n        handler.onConnection?.(wwConnection);\n\n        return wwConnection;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023-2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Logger, MessageConnection } from 'vscode-jsonrpc';\nimport { MaybePromise } from '../../utils/type-util';\nimport { createWebSocketConnection, wrap } from './websocket-connection';\n\nexport interface GLSPWebSocketOptions {\n    /**\n     * Allow automatic reconnect of WebSocket connections\n     * @default true\n     */\n    reconnecting?: boolean;\n    /**\n     * Max attempts of reconnects\n     * @default Infinity\n     */\n    reconnectAttempts?: number;\n    /**\n     * The time delay in milliseconds between reconnect attempts\n     * @default 1000\n     */\n    reconnectDelay?: number;\n}\n\nexport const GLSPConnectionHandler = Symbol('GLSPConnectionHandler');\nexport interface GLSPConnectionHandler {\n    onConnection?(connection: MessageConnection): MaybePromise<void>;\n    onReconnect?(connection: MessageConnection): MaybePromise<void>;\n    logger?: Logger;\n}\n\nexport class GLSPWebSocketProvider {\n    protected webSocket: WebSocket;\n    protected reconnectTimer: NodeJS.Timer;\n    protected reconnectAttempts = 0;\n\n    protected options: GLSPWebSocketOptions = {\n        // default values\n        reconnecting: true,\n        reconnectAttempts: Infinity,\n        reconnectDelay: 1000\n    };\n\n    constructor(\n        protected url: string,\n        options?: GLSPWebSocketOptions\n    ) {\n        this.options = Object.assign(this.options, options);\n    }\n\n    protected createWebSocket(url: string): WebSocket {\n        return new WebSocket(url);\n    }\n\n    listen(handler: GLSPConnectionHandler, isReconnecting = false): Promise<MessageConnection> {\n        this.webSocket = this.createWebSocket(this.url);\n\n        this.webSocket.onerror = (): void => {\n            handler.logger?.error('GLSPWebSocketProvider Connection to server errored. Please make sure that the server is running!');\n            clearInterval(this.reconnectTimer);\n            this.webSocket.close();\n        };\n\n        return new Promise(resolve => {\n            this.webSocket.onopen = (): void => {\n                clearInterval(this.reconnectTimer);\n                const wrappedSocket = wrap(this.webSocket);\n                const wsConnection = createWebSocketConnection(wrappedSocket, handler.logger);\n\n                this.webSocket.onclose = (): void => {\n                    const { reconnecting, reconnectAttempts, reconnectDelay } = this.options;\n                    if (reconnecting) {\n                        if (this.reconnectAttempts >= reconnectAttempts!) {\n                            handler.logger?.error(\n                                'GLSPWebSocketProvider WebSocket reconnect failed - maximum number reconnect attempts ' +\n                                    `(${reconnectAttempts}) was exceeded!`\n                            );\n                        } else {\n                            this.reconnectTimer = setInterval(() => {\n                                handler.logger?.warn('GLSPWebSocketProvider reconnecting...');\n                                this.listen(handler, true);\n                                this.reconnectAttempts++;\n                            }, reconnectDelay!);\n                        }\n                    } else {\n                        handler.logger?.error('GLSPWebSocketProvider WebSocket will not reconnect - closing the connection now!');\n                    }\n                };\n\n                if (isReconnecting) {\n                    handler.logger?.warn('GLSPWebSocketProvider Reconnecting!');\n                    handler.onReconnect?.(wsConnection);\n                } else {\n                    handler.logger?.warn('GLSPWebSocketProvider Initializing!');\n                    handler.onConnection?.(wsConnection);\n                }\n                resolve(wsConnection);\n            };\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023-2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Args } from '../action-protocol/types';\n\n/**\n * A key-value pair structure to map a diagramType to its server-handled action kinds.\n */\nexport interface ServerActions {\n    [key: string]: string[];\n}\n\nexport interface InitializeParameters {\n    /**\n     * Unique identifier for the current client application.\n     */\n    applicationId: string;\n\n    /**\n     * GLSP protocol version that this client is implementing.\n     */\n    protocolVersion: string;\n\n    /**\n     * Additional custom arguments e.g. application specific parameters.\n     */\n    args?: Args;\n}\n\nexport interface InitializeResult {\n    /**\n     * GLSP protocol version that the server is implementing.\n     */\n    protocolVersion: string;\n\n    /**\n     * The actions (grouped by diagramType) that the server can handle.\n     */\n    serverActions: ServerActions;\n}\n\n/**\n * Known server actions i.e. action kinds that the server can handle for a specific diagram type.\n */\nexport interface InitializeClientSessionParameters {\n    /**\n     * Unique identifier for the new client session.\n     */\n    clientSessionId: string;\n\n    /**\n     * Unique identifier of the diagram type for which the session should be configured.\n     */\n    diagramType: string;\n\n    /**\n     * The set of action kinds that can be handled by the client.\n     * Used by the server to know which dispatched actions should be forwarded to the client.\n     */\n    clientActionKinds: string[];\n\n    /**\n     * Additional custom arguments.\n     */\n    args?: Args;\n}\n\nexport interface DisposeClientSessionParameters {\n    /**\n     * Unique identifier of the client session that should be disposed.\n     */\n    clientSessionId: string;\n\n    /**\n     * Additional custom arguments.\n     */\n    args?: Args;\n}\n","/********************************************************************************\n * Copyright (c) 2023-2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Container, ContainerModule } from 'inversify';\nimport { MaybeArray, asArray, distinctAdd, remove } from '../utils/array-util';\nimport { hasFunctionProp, hasNumberProp } from '../utils/type-util';\nimport { FeatureModule } from './feature-module';\n\n/**\n * Initializes a container with the given {@link ContainerConfiguration}. The container configuration\n * consists of the set of {@link ContainerModule}s that should be loaded in the container.\n * In addition, for more fine-grained control {@link ModuleConfiguration}s can be passed as part fo the container configuration\n * Module loading is distinct,this means each module will only get loaded once even if it is configured multiple times.\n  @param containerConfigurations\n *          Custom modules to be loaded in addition to the default modules and/or default modules that should be excluded.\n  @returns The initialized container.\n */\nexport function initializeContainer(container: Container, ...containerConfigurations: ContainerConfiguration): Container {\n    const modules = resolveContainerConfiguration(...containerConfigurations);\n    container.load(...modules);\n    return container;\n}\n\n/**\n * Processes the given container configurations and returns the corresponding set of {@link ContainerModule}s.\n * Container configurations are processed in the order they are passed. If a module is configured to be removed\n * it can be added again in a later configuration. This also means in case of `replace` configurations that affect the same feature id\n * the last configuration wins.\n * @param containerConfigurations The container configurations to resolve\n * @throws An error if featureModule ids are not unique in the resolved module array\n * @returns an Array of resolved container modules\n */\nexport function resolveContainerConfiguration(...containerConfigurations: ContainerConfiguration): ContainerModule[] {\n    const modules: ContainerModule[] = [];\n    containerConfigurations.forEach(config => {\n        if (isContainerModule(config)) {\n            distinctAdd(modules, config);\n        } else {\n            if (config.remove) {\n                remove(modules, ...asArray(config.remove));\n            }\n            if (config.add) {\n                distinctAdd(modules, ...asArray(config.add));\n            }\n            if (config.replace) {\n                asArray(config.replace).forEach(replace => {\n                    const existingIndex = modules.findIndex(m => m instanceof FeatureModule && m.featureId === replace.featureId);\n                    if (existingIndex >= 0) {\n                        modules[existingIndex] = replace;\n                    } else {\n                        console.warn(\n                            `Could not find module to replace with feature id ${replace.featureId.toString()}.` +\n                                'Adding replacement module to the end of the resolved configurations.'\n                        );\n                        distinctAdd(modules, replace);\n                    }\n                });\n            }\n        }\n    });\n\n    // Check for duplicate feature ids in resolved modules\n    const featureIds = new Set<symbol>();\n    const duplicates: FeatureModule[] = [];\n    modules.forEach(module => {\n        if (module instanceof FeatureModule) {\n            if (featureIds.has(module.featureId)) {\n                duplicates.push(module);\n            } else {\n                featureIds.add(module.featureId);\n            }\n        }\n    });\n    if (duplicates.length > 0) {\n        const culprits = duplicates.map(m => m.featureId.toString()).join(', ');\n        throw new Error(`Could not resolve container configuration. Non-unique feature ids found in container configuration: ${culprits}`);\n    }\n    return modules;\n}\n/**\n * The container modules might originate form different inversify contexts (e.g. `inversify` vs. `@theia/core/shared/inversify`).\n * If this is the case an instanceof check can return  false negative.\n * => use a simple typeguard instead.\n */\nfunction isContainerModule(config: ContainerModule | ModuleConfiguration): config is ContainerModule {\n    return hasNumberProp(config, 'id') && hasFunctionProp(config, 'registry');\n}\n\n/**\n * Union type for the set of {@link ContainerModule}s and addition {@link ModuleConfiguration}s\n * used to configure a DI container.\n */\nexport type ContainerConfiguration = Array<ContainerModule | ModuleConfiguration>;\n\n/**\n * Can be passed to create DI container utility functions to configure additional modules or\n * remove (i.e. not load) default modules.\n */\nexport interface ModuleConfiguration {\n    /** Set of modules that should be loaded into the container. */\n    add?: MaybeArray<ContainerModule>;\n    /** Set of modules that should be loaded into the container */\n    remove?: MaybeArray<ContainerModule>;\n    /**\n     * Set of feature modules that should be loaded into the container and\n     * replace potential already configured modules with the same feature id.\n     * When resolving the replacement module will be added at the index of the module it replaces.\n     * If there is no module to replace, the replacement module will be added to the end of the list (i.e. behaves like `add`).\n     */\n    replace?: MaybeArray<FeatureModule>;\n}\n","/********************************************************************************\n * Copyright (c) 2023-2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule, interfaces } from 'inversify';\nimport { MaybeArray, asArray } from '../utils/array-util';\nimport { BindingContext } from './inversify-util';\n\n/**\n * Optional constructor options for {@link FeatureModule}s.\n */\nexport interface FeatureModuleOptions {\n    /**\n     * The set of feature modules that is required in order for this module to load.\n     */\n    requires?: MaybeArray<FeatureModule>;\n    /**\n     * Optional `featureId` that should be used. If omitted an id will be autogenerated\n     */\n    featureId?: symbol;\n}\n\n/**\n * A `FeatureModule` is a specialized {@link ContainerModule} that can declare dependencies to other {@link FeatureModule}.\n * A feature module will only be loaded into a container if all of its required modules haven been loaded before. T\n * Each feature module binds its `featureId` be default. This enables querying of existing container to check wether a\n * feature module has been loaded into this container.\n */\n\nexport class FeatureModule extends ContainerModule {\n    /**\n     * Global flag to enable/disable additional debug log output when loading feature modules\n     * Default is `false`.\n     */\n    public static DEBUG_LOG_ENABLED = false;\n    readonly featureId: symbol;\n\n    readonly requires?: MaybeArray<FeatureModule>;\n\n    constructor(registry: interfaces.ContainerModuleCallBack, options: FeatureModuleOptions = {}) {\n        super((bind, unbind, isBound, ...rest) => {\n            if (this.configure(bind, isBound)) {\n                registry(bind, unbind, isBound, ...rest);\n                this.debugLog(`Loading of feature module with id '${this.featureId.toString()}' completed`);\n            }\n        });\n        this.featureId = options.featureId ?? this.createFeatureId();\n        this.requires = options.requires;\n    }\n\n    protected createFeatureId(): symbol {\n        return Symbol(this.id);\n    }\n\n    /**\n     * Configures the feature module i.e. checks if the requirements are met.\n     * If this is the case the {@link FeatureModule.featureId} will be bound and the module will be loaded\n     * @param bind container bind function\n     * @param isBound container isBound function\n     * @returns `true` if all requirements are met and the module is loaded. `false` otherwise\n     */\n    configure(bind: interfaces.Bind, isBound: interfaces.IsBound): boolean {\n        this.debugLog(`Trying to load feature module with id '${this.featureId.toString()}'`);\n        if (this.isLoaded({ isBound })) {\n            const message = `Could not load feature module. Another module with id '${this.featureId.toString()}' is already loaded`;\n            this.debugLog(message);\n            throw new Error(message);\n        }\n        if (this.checkRequirements(isBound)) {\n            this.debugLog(`Requirements are met, continue loading of feature module with id '${this.featureId.toString()}'`);\n            bind(this.featureId).toConstantValue(this.featureId);\n            return true;\n        }\n        return false;\n    }\n\n    protected debugLog(message?: any, ...optionalParams: any[]): void {\n        if (FeatureModule.DEBUG_LOG_ENABLED) {\n            console.log(message, ...optionalParams);\n        }\n    }\n\n    /**\n     * Checks if all required {@link FeatureModule}s are already loaded/bound in the container.\n     * @param isBound The `isBound` property of the module callback. Used to check the required modules.\n     * @returns `true` if all requirements are met, `false` otherwise\n     */\n    protected checkRequirements(isBound: interfaces.IsBound): boolean {\n        const requires = asArray(this.requires ?? []);\n        if (requires.length === 0) {\n            return true;\n        }\n        const missing = requires.filter(module => !module.isLoaded({ isBound }));\n        if (missing.length > 0) {\n            this.debugLog(\n                // eslint-disable-next-line max-len\n                `Could not load feature module. Required modules are not loaded. Feature ids: ${missing.map(m => m.featureId.toString()).join(', ')}`\n            );\n            return false;\n        }\n        return true;\n    }\n\n    isLoaded(context: Pick<BindingContext, 'isBound'>): boolean {\n        return context.isBound(this.featureId);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nexport * from './container-configuration';\nexport * from './feature-module';\nexport * from './inversify-util';\nexport * from './lazy-injector';\n","/********************************************************************************\n * Copyright (c) 2023-2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { interfaces } from 'inversify';\n\n/**\n * A wrapper interface to get access to the binding related functions\n * for an inversify container.\n */\nexport interface BindingContext {\n    bind: interfaces.Bind;\n    unbind: interfaces.Unbind;\n    isBound: interfaces.IsBound;\n    rebind: interfaces.Rebind;\n}\n\n/**\n * Checks wether the given service identifier is already bound in the given context\n * then either calls  the `bind` or `rebind` function respectively.\n *\n * As this is just a convenience function\n * ```ts\n * bindOrRebind({bind,isBound,rebind}, MyService).to(SomeOtherService);\n * ```\n * is equivalent to:\n * ```\n * if (isBound(MyService)) {\n *    rebind(MyService).to(SomeOtherService);\n * } else {\n *    bind(MyService).to(SomeOtherService);\n * }\n * ```\n * @param context The binding context\n * @param serviceIdentifier The service identifier\n * @returns The result of the `bind` or `rebind` function\n */\nexport function bindOrRebind<T>(\n    context: Omit<BindingContext, 'unbind'>,\n    serviceIdentifier: interfaces.ServiceIdentifier<T>\n): interfaces.BindingToSyntax<T> {\n    if (context.isBound(serviceIdentifier)) {\n        return context.rebind(serviceIdentifier);\n    }\n    return context.bind(serviceIdentifier);\n}\n\n/**\n * Only binds the given service identifier if it's not already bound in the given context.\n *\n * As this is just a convenience function\n * ```ts\n * lazyBind({bind,isBound}, MyService)?.to(SomeOtherService);\n * ```\n * is equivalent to:\n * ```\n * if (!isBound(MyService)) {\n *    bind(MyService).to(SomeOtherService);\n * }\n * ```\n * @param context The binding context\n * @param serviceIdentifier The service identifier\n * @returns The result of the `bind` function or `undefined` if the service was already bound\n */\nexport function lazyBind<T>(\n    context: Pick<BindingContext, 'bind' | 'isBound'>,\n    serviceIdentifier: interfaces.ServiceIdentifier<T>\n): interfaces.BindingToSyntax<T> | undefined {\n    if (context.isBound(serviceIdentifier)) {\n        return undefined;\n    }\n    return context.bind(serviceIdentifier);\n}\n\n/**\n * Binds the given service identifier to the given target service in the given context.\n * In addition, the target service is bound to itself in singleton scope. This ensures\n * that services can be rebound individually even if they are multi-injected.\n *\n * As this is just a convenience function\n * ```ts\n * bindAsService(bind,SomeOtherService,MyServiceImpl);\n * ```\n * is equivalent to:\n * ```ts\n * bind(MyServiceImpl).toSelf.inSingletonScope():\n * bind(SomeOtherService).toService(MyServiceImpl);\n * ```\n * @param serviceIdentifier\n * @param toServiceIdentifier\n */\nexport function bindAsService<S, T extends S>(\n    context: Pick<BindingContext, 'bind'> | interfaces.Bind,\n    serviceIdentifier: interfaces.ServiceIdentifier<S>,\n    targetService: interfaces.ServiceIdentifier<T>\n): void {\n    const bind = typeof context === 'object' ? context.bind.bind(context) : context;\n    bind(targetService).toSelf().inSingletonScope();\n    bind(serviceIdentifier).toService(targetService);\n}\n","/********************************************************************************\n * Copyright (c) 2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/********************************************************************************\n * Copyright (c) 2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { getServiceIdentifierAsString, interfaces } from 'inversify';\nimport { NOT_REGISTERED } from 'inversify/lib/constants/error_msgs';\nimport { MaybeArray } from '../utils/array-util';\nimport { AnyObject } from '../utils/type-util';\nimport { BindingContext } from './inversify-util';\n\n/**\n * The lazy injector can be used to retrieve services from the container in deferred fashion.\n * Instead of directly injecting the service, the service provider can be injected and used to retrieve the service\n * at a later point when it is actually needed. Services are cached after the first retrieval.\n *\n * The lazy injector bound in transient scope. This means each injecting class gets its own instance.\n *\n * This can be used in places where eager injection via decorator would lead to circular dependency issues.\n * For example if injecting the following service causes a circular dependency:\n * ```ts\n * @inject(TYPES.IActionDispatcher) protected actionDispatcher: IActionDispatcher;\n * ```\n * You can use the lazy injector to resolve the dependency issue as follows:\n *\n * ```ts\n * @inject(LazyInjector) protected lazyInjector: LazyInjector;\n * get actionDispatcher(): IActionDispatcher {\n *    return this.lazyInjector.get(TYPES.IActionDispatcher);\n * }\n * ```\n *\n * Use the lazy injector with caution. In general direct constructor or property injection is always preferred.\n * The lazy injector should only be used in cases where direct injection is not possible due to circular dependencies.\n * Also keep in mind that the lazy injector should not be accessed in the constructor or `@postConstruct` method of a class.\n * This would defeat the purpose of the lazy injector and lead to the same circular dependency issues.\n */\nexport interface LazyInjector {\n    /**\n     * Retrieves the service for the given identifier from the container.\n     * Use this method to retrieve services that you would annotate with `@inject(...)` when using normal eager injection.\n     * @throws An error if the service is not bound in or multiple services are bound to the identifier.\n     * @param serviceIdentifier The service identifier to retrieve the service for.\n     */\n    get<T extends AnyObject>(serviceIdentifier: interfaces.ServiceIdentifier<T>): T;\n    /**\n     * Retrieves the service for the given identifier from the container. If the service is not bound `undefined` will be returned\n     * Use this method to retrieve services that you would annotate with `@inject(...)@optional` when using normal eager injection.\n     * @throws An error if multiple services are bound to the identifier.\n     * @param serviceIdentifier The service identifier to retrieve the service for.\n     */\n    getOptional<T extends AnyObject>(serviceIdentifier: interfaces.ServiceIdentifier<T>): T | undefined;\n\n    /**\n     * Retrieves all services for the given service identifier from the container. If the service is not bound an empty array\n     * will be returned.\n     * Use this method to retrieve services that you would annotate with `@multiInject(...)@optional()` when using normal eager injection.\n     * @param serviceIdentifier The service identifier to retrieve the services for.\n     */\n    getAll<T extends AnyObject>(serviceIdentifier: interfaces.ServiceIdentifier<T>): T[];\n}\nexport const LazyInjector = Symbol('LazyInjector');\n\n/**\n * Default implementation of the {@link LazyInjector} interface. This implementation\n * will be bound when using the {@link bindLazyInjector} function.\n */\n\nexport class DefaultLazyInjector implements LazyInjector {\n    protected cache = new Map<interfaces.ServiceIdentifier<AnyObject>, MaybeArray<AnyObject> | undefined>();\n\n    constructor(protected readonly container: interfaces.Container) {}\n\n    get<T extends object>(serviceIdentifier: interfaces.ServiceIdentifier<T>): T {\n        const service = this.getOptional(serviceIdentifier);\n        if (service === undefined) {\n            throw new Error(NOT_REGISTERED + getServiceIdentifierAsString(serviceIdentifier));\n        }\n        return service;\n    }\n\n    getOptional<T extends object>(serviceIdentifier: interfaces.ServiceIdentifier<T>): T | undefined {\n        if (this.cache.has(serviceIdentifier)) {\n            return this.cache.get(serviceIdentifier) as T | undefined;\n        }\n\n        const service = this.container.isBound(serviceIdentifier) ? this.container.get<T>(serviceIdentifier) : undefined;\n        this.cache.set(serviceIdentifier, service);\n        return service;\n    }\n\n    getAll<T extends object>(serviceIdentifier: interfaces.ServiceIdentifier<T>): T[] {\n        if (this.cache.has(serviceIdentifier)) {\n            return this.cache.get(serviceIdentifier) as T[];\n        }\n        const services = this.container.isBound(serviceIdentifier) ? this.container.getAll<T>(serviceIdentifier) : [];\n        this.cache.set(serviceIdentifier, services);\n        return services;\n    }\n}\n\nexport function bindLazyInjector(context: Pick<BindingContext, 'bind'> | interfaces.Bind): void {\n    const bind = typeof context === 'object' ? context.bind.bind(context) : context;\n    bind(LazyInjector).toDynamicValue(ctx => new DefaultLazyInjector(ctx.container));\n}\n","/********************************************************************************\n * Copyright (c) 2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nexport * from './action-protocol/base-protocol';\nexport * from './action-protocol/client-notification';\nexport * from './action-protocol/clipboard';\nexport * from './action-protocol/contexts';\nexport * from './action-protocol/edge-modification';\nexport * from './action-protocol/element-creation';\nexport * from './action-protocol/element-hover';\nexport * from './action-protocol/element-navigation';\nexport * from './action-protocol/element-selection';\nexport * from './action-protocol/element-text-editing';\nexport * from './action-protocol/element-type-hints';\nexport * from './action-protocol/element-validation';\nexport * from './action-protocol/model-data';\nexport * from './action-protocol/model-edit-mode';\nexport * from './action-protocol/model-layout';\nexport * from './action-protocol/model-saving';\nexport * from './action-protocol/node-modification';\nexport * from './action-protocol/tool-palette';\nexport * from './action-protocol/types';\nexport * from './action-protocol/undo-redo';\nexport * from './action-protocol/viewport';\nexport * from './client-server-protocol/base-glsp-client';\nexport * from './client-server-protocol/glsp-client';\nexport * from './client-server-protocol/glsp-server';\nexport * from './client-server-protocol/jsonrpc/base-jsonrpc-glsp-client';\nexport * from './client-server-protocol/jsonrpc/glsp-jsonrpc-client';\nexport * from './client-server-protocol/jsonrpc/glsp-jsonrpc-server';\nexport * from './client-server-protocol/jsonrpc/websocket-connection';\nexport * from './client-server-protocol/jsonrpc/worker-connection-provider';\nexport * from './client-server-protocol/jsonrpc/ws-connection-provider';\nexport * from './client-server-protocol/types';\nexport * from './model/default-types';\nexport * from './model/model-schema';\nexport * from './re-exports';\nexport * from './sprotty-actions';\nexport * from './sprotty-geometry-bounds';\nexport * from './sprotty-geometry-dimension';\nexport * from './sprotty-geometry-point';\nexport * from './utils/array-util';\nexport * from './utils/disposable';\nexport * from './utils/event';\nexport * from './utils/geometry-movement';\nexport * from './utils/geometry-util';\nexport * from './utils/geometry-vector';\nexport * from './utils/math-util';\nexport * from './utils/type-util';\n","/********************************************************************************\n * Copyright (c) 2021-2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * The default types for graphical model elements available in GLSP.\n */\nexport namespace DefaultTypes {\n    // HTML elements\n    export const HTML = 'html';\n\n    // generic types\n    export const FOREIGN_OBJECT = 'foreign-object';\n    export const PRE_RENDERED = 'pre-rendered';\n    export const SHAPE_PRE_RENDERED = 'shape-pre-rendered';\n\n    // SVG elements\n    export const SVG = 'svg';\n\n    // graph types\n    export const GRAPH = 'graph';\n    export const NODE = 'node';\n    export const COMPARTMENT = 'comp';\n    export const COMPARTMENT_HEADER = 'comp:header';\n    export const EDGE = 'edge';\n    export const PORT = 'port';\n    export const ROUTING_POINT = 'routing-point';\n    export const VOLATILE_ROUTING_POINT = `volatile-${ROUTING_POINT}`;\n    export const LABEL = 'label';\n\n    // UI elements\n    export const BUTTON = 'button';\n    export const BUTTON_EXPAND = 'button:expand';\n    export const ISSUE_MARKER = 'marker';\n\n    // shapes\n    export const NODE_CIRCLE = 'node:circle';\n    export const NODE_RECTANGLE = 'node:rectangle';\n    export const NODE_DIAMOND = 'node:diamond';\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    SCompartment as GCompartmentSchema,\n    SEdge as GEdgeSchema,\n    ForeignObjectElement as GForeignObjectElementSchema,\n    SGraph as GGraphSchema,\n    HtmlRoot as GHtmlRootSchema,\n    SLabel as GLabelSchema,\n    SModelElement as GModelElementSchema,\n    SModelRoot as GModelRootSchema,\n    SNode as GNodeSchema,\n    SPort as GPortSchema,\n    PreRenderedElement as GPreRenderedElementSchema,\n    SShapeElement as GShapeElementSchema,\n    ShapedPreRenderedElement as GShapePreRenderedElementSchema,\n    ViewportRootElement as GViewPortRootElementSchema\n} from 'sprotty-protocol/lib/model';\nimport { hasStringProp } from '../utils/type-util';\n\n/** Serializable representation of GModel elements. This is the transfer format\n * used to exchange model information between client and server. Both the client and\n * server have a deserialization mechanism in place to convert a GModelElementSchema\n * into the corresponding class-based model (or EMF-based in case of the Java Server).\n *\n * To ensure sprotty compatibility all types are just aliases of the corresponding Sprotty SModel API element.\n */\n\nexport function isGModelElementSchema(object: any): object is GModelElementSchema {\n    return typeof object === 'object' && hasStringProp(object, 'type') && hasStringProp(object, 'id');\n}\n\nexport {\n    GCompartmentSchema,\n    GEdgeSchema,\n    GForeignObjectElementSchema,\n    GGraphSchema,\n    GHtmlRootSchema,\n    GLabelSchema,\n    GModelElementSchema,\n    GModelRootSchema,\n    GNodeSchema,\n    GPortSchema,\n    GPreRenderedElementSchema,\n    GShapeElementSchema,\n    GShapePreRenderedElementSchema,\n    GViewPortRootElementSchema\n};\n","/********************************************************************************\n * Copyright (c) 2023-2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nexport {\n    Alignable,\n    EdgeLayoutable,\n    EdgePlacement,\n    EdgeSide,\n    Expandable,\n    Fadeable,\n    SButton as GButtonSchema,\n    SCompartment as GCompartmentSchema,\n    SEdge as GEdgeSchema,\n    ForeignObjectElement as GForeignObjectElementSchema,\n    SGraph as GGraphSchema,\n    HtmlRoot as GHtmlRootSchema,\n    SIssue as GIssue,\n    SIssueMarker as GIssueMarkerSchema,\n    SIssueSeverity as GIssueSeverity,\n    SLabel as GLabelSchema,\n    SModelElement as GModelElementSchema,\n    SModelRoot as GModelRootSchema,\n    SNode as GNodeSchema,\n    SPort as GPortSchema,\n    PreRenderedElement as GPreRenderedElementSchema,\n    SShapeElement as GShapeElementSchema,\n    ShapedPreRenderedElement as GShapedPreRenderedElementSchema,\n    ViewportRootElement as GViewportRootElementSchema,\n    HAlignment,\n    Hoverable,\n    LayoutKind,\n    Locateable,\n    ModelLayoutOptions,\n    Projectable,\n    Scrollable,\n    Selectable,\n    VAlignment,\n    Viewport,\n    Zoomable,\n    isScrollable,\n    isZoomable\n} from 'sprotty-protocol/lib/model';\nexport * from 'sprotty-protocol/lib/utils/async';\nexport * from 'sprotty-protocol/lib/utils/geometry';\nexport * from 'sprotty-protocol/lib/utils/json';\nexport { applyBounds, cloneModel, findElement, getBasicType, getSubType } from 'sprotty-protocol/lib/utils/model-utils';\n","/********************************************************************************\n * Copyright (c) 2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/* eslint-disable @typescript-eslint/no-shadow */\n\nimport {\n    BringToFrontAction,\n    CollapseExpandAction,\n    CollapseExpandAllAction,\n    GetSelectionAction,\n    GetViewportAction,\n    HoverFeedbackAction,\n    MoveAction,\n    OpenAction,\n    SelectionResult,\n    SetBoundsAction,\n    SetViewportAction,\n    ViewportResult\n} from 'sprotty-protocol/lib/actions';\nimport { Action, RequestAction } from './action-protocol/base-protocol';\nimport { hasArrayProp, hasBooleanProp, hasObjectProp, hasStringProp } from './utils/type-util';\n\n/*\n * Subset of the actions defined in sprotty-protocol that are reused as is i.e. they don't have a dedicated\n * replacement in the GLSP action protocol.\n *\n * Module augmentation is used to provide utility functions (typeguards etc.) via corresponding namespace.\n */\n\ndeclare module 'sprotty-protocol/lib/actions' {\n    namespace BringToFrontAction {\n        function is(object: unknown): object is BringToFrontAction;\n    }\n    namespace CollapseExpandAction {\n        function is(object: unknown): object is CollapseExpandAction;\n    }\n    namespace CollapseExpandAllAction {\n        function is(object: unknown): object is CollapseExpandAllAction;\n    }\n    namespace GetSelectionAction {\n        function is(object: unknown): object is GetSelectionAction;\n    }\n    namespace GetViewportAction {\n        function is(object: unknown): object is GetViewportAction;\n    }\n    namespace HoverFeedbackAction {\n        function is(object: unknown): object is HoverFeedbackAction;\n    }\n    namespace MoveAction {\n        function is(object: unknown): object is MoveAction;\n    }\n    namespace OpenAction {\n        function is(object: unknown): object is OpenAction;\n    }\n    namespace SelectionResult {\n        function is(object: unknown): object is SelectionResult;\n    }\n    namespace SetBoundsAction {\n        function is(object: unknown): object is SetBoundsAction;\n    }\n    namespace SetViewportAction {\n        function is(object: unknown): object is SetViewportAction;\n    }\n    namespace ViewportResult {\n        function is(object: unknown): object is ViewportResult;\n    }\n}\n\nCollapseExpandAction.is = (object): object is CollapseExpandAction =>\n    Action.hasKind(object, CollapseExpandAction.KIND) && hasArrayProp(object, 'expandIds') && hasArrayProp(object, 'collapseIds');\n\nCollapseExpandAllAction.is = (object): object is CollapseExpandAllAction =>\n    Action.hasKind(object, CollapseExpandAllAction.KIND) && hasBooleanProp(object, 'expand');\n\nGetSelectionAction.is = (object): object is GetSelectionAction => RequestAction.hasKind(object, GetSelectionAction.KIND);\n\nGetViewportAction.is = (object): object is GetViewportAction => RequestAction.hasKind(object, GetViewportAction.KIND);\n\nHoverFeedbackAction.is = (object): object is HoverFeedbackAction =>\n    Action.hasKind(object, HoverFeedbackAction.KIND) && hasStringProp(object, 'mouseoverElement') && hasBooleanProp(object, 'mouseIsOver');\n\nMoveAction.is = (object): object is MoveAction =>\n    Action.hasKind(object, MoveAction.KIND) &&\n    hasArrayProp(object, 'moves') &&\n    hasBooleanProp(object, 'animate') &&\n    hasBooleanProp(object, 'finished');\n\nOpenAction.is = (object): object is OpenAction => Action.hasKind(object, OpenAction.KIND) && hasStringProp(object, 'elementId');\n\nSelectionResult.is = (object): object is SelectionResult =>\n    Action.hasKind(object, SelectionResult.KIND) && hasArrayProp(object, 'selectedElementsIDs');\n\nSetBoundsAction.is = (object): object is SetBoundsAction => Action.hasKind(object, SetBoundsAction.KIND) && hasObjectProp(object, 'bounds');\n\nSetViewportAction.is = (object): object is SetViewportAction =>\n    Action.hasKind(object, SetViewportAction.KIND) &&\n    hasStringProp(object, 'elementId') &&\n    hasObjectProp(object, 'newViewport') &&\n    hasBooleanProp(object, 'animate');\n\nViewportResult.is = (object): object is ViewportResult =>\n    Action.hasKind(object, ViewportResult.KIND) && hasObjectProp(object, 'viewport') && hasObjectProp(object, 'canvasBounds');\n\nexport {\n    BringToFrontAction,\n    CollapseExpandAction,\n    CollapseExpandAllAction,\n    GetSelectionAction,\n    GetViewportAction,\n    HoverFeedbackAction,\n    MoveAction,\n    OpenAction,\n    SelectionResult,\n    SetBoundsAction,\n    SetViewportAction,\n    ViewportResult\n};\n","/********************************************************************************\n * Copyright (c) 2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/* eslint-disable @typescript-eslint/no-shadow */\n\nimport { Bounds } from 'sprotty-protocol/lib/utils/geometry';\nimport { Dimension } from './sprotty-geometry-dimension';\nimport { Point } from './sprotty-geometry-point';\nimport { AnyObject, hasNumberProp } from './utils/type-util';\n\ndeclare module 'sprotty-protocol/lib/utils/geometry' {\n    namespace Bounds {\n        /**\n         * The empty bounds with valid dimensions. It has x, y, width, and height set to 0.\n         */\n        const ZERO: Bounds;\n\n        /**\n         * Type guard to check if the given object is a bound.\n         * @param bounds the object to be checked\n         */\n        function is(bounds: any): bounds is Bounds;\n\n        /**\n         * Type guard to check if a bound is valid. For a bound to be valid it needs to be defined and have valid\n         * coordinates and dimensions.\n         *\n         * @param bounds the bounds to be checked for validity\n         */\n        function isValid(bounds?: Bounds): bounds is Bounds;\n\n        /**\n         * Checks whether the inner bounds are compeletely encompassed by the outer bounds.\n         *\n         * @param outer outer bounds\n         * @param inner inner bounds\n         * @returns true if the outer bounds completely encompass the inner bounds\n         */\n        function encompasses(outer: Bounds, inner: Bounds): boolean;\n\n        /**\n         * Checks whether the two bounds overlap.\n         *\n         * @param left left bounds\n         * @param right right bounds\n         * @param touch if true the bounds are considered to overlap if they touch each other\n         * @returns true if the two bounds overlap\n         */\n        function overlap(left: Bounds, right: Bounds, touch?: boolean): boolean;\n\n        /**\n         * Checks whether the two bounds are equal.\n         * @param left left bounds\n         * @param right right bounds\n         * @param eps the epsilon for the comparison\n         * @returns true if the two bounds are equal\n         */\n        function equals(left: Bounds, right: Bounds, eps?: number): boolean;\n\n        /**\n         * Returns the x-coordinate of the left edge of the bounds.\n         * @param bounds the bounds\n         * @returns the x-coordinate of the left edge\n         */\n        function left(bounds: Bounds): number;\n\n        /**\n         * Returns the x-coordinate of the center of the bounds.\n         * @param bounds the bounds\n         * @returns the x-coordinate of the center\n         */\n        function centerX(bounds: Bounds): number;\n\n        /**\n         * Returns the x-coordinate of the right edge of the bounds.\n         * @param bounds the bounds\n         * @returns the x-coordinate of the right edge\n         */\n        function right(bounds: Bounds): number;\n\n        /**\n         * Returns the y-coordinate of the top edge of the bounds.\n         * @param bounds the bounds\n         * @returns the y-coordinate of the top edge\n         */\n        function top(bounds: Bounds): number;\n\n        /**\n         * Returns the y-coordinate of the middle of the bounds.\n         * @param bounds the bounds\n         * @returns the y-coordinate of the middle\n         */\n        function middle(bounds: Bounds): number;\n\n        /**\n         * Returns the y-coordinate of the center of the bounds.\n         * @param bounds the bounds\n         * @returns the y-coordinate of the center\n         */\n        function centerY(bounds: Bounds): number;\n\n        /**\n         * Returns the y-coordinate of the bottom edge of the bounds.\n         * @param bounds the bounds\n         * @returns the y-coordinate of the bottom edge\n         */\n        function bottom(bounds: Bounds): number;\n\n        /**\n         * Returns the top left corner of the bounds.\n         * @param bounds the bounds\n         * @returns the top left corner\n         */\n        function topLeft(bounds: Bounds): Point;\n\n        /**\n         * Returns the top center point of the bounds.\n         * @param bounds the bounds\n         * @returns the top center point\n         */\n        function topCenter(bounds: Bounds): Point;\n\n        /**\n         * Returns the top right corner of the bounds.\n         * @param bounds the bounds\n         * @returns the top right corner\n         */\n        function topRight(bounds: Bounds): Point;\n\n        /**\n         * Returns the middle left point of the bounds.\n         * @param bounds the bounds\n         * @returns the middle left point\n         */\n        function middleLeft(bounds: Bounds): Point;\n\n        /**\n         * Returns the middle center point of the bounds.\n         * @param bounds the bounds\n         * @returns the middle center point\n         */\n        function middleCenter(bounds: Bounds): Point;\n\n        /**\n         * Returns the middle right point of the bounds.\n         * @param bounds the bounds\n         * @returns the middle right point\n         */\n        function middleRight(bounds: Bounds): Point;\n\n        /**\n         * Returns the bottom left corner of the bounds.\n         * @param bounds the bounds\n         * @returns the bottom left corner\n         */\n        function bottomLeft(bounds: Bounds): Point;\n\n        /**\n         * Returns the bottom center point of the bounds.\n         * @param bounds the bounds\n         * @returns the bottom center point\n         */\n        function bottomCenter(bounds: Bounds): Point;\n\n        /**\n         * Returns the bottom right corner of the bounds.\n         * @param bounds the bounds\n         * @returns the bottom right corner\n         */\n        function bottomRight(bounds: Bounds): Point;\n\n        /**\n         * Checks if the left bounds are above the right bounds, i.e., the top edge of the left bounds is\n         * above the top edge of the right bounds.\n         * @param leftBounds the left bounds\n         * @param rightBounds the right bounds\n         * @returns true if the left bounds are above the right bounds\n         */\n        function isAbove(leftBounds: Bounds, rightBounds: Bounds): boolean;\n\n        /**\n         * Checks if the left bounds are below the right bounds, i.e., the top edge of the left bounds is\n         * below the top edge of the right bounds.\n         * @param leftBounds the left bounds\n         * @param rightBounds the right bounds\n         * @returns true if the left bounds are below the right bounds\n         */\n        function isBelow(leftBounds: Bounds, rightBounds: Bounds): boolean;\n\n        /**\n         * Checks if the left bounds are before the right bounds, i.e., the left edge of the left bounds is\n         * before the left edge of the right bounds.\n         * @param leftBounds the left bounds\n         * @param rightBounds the right bounds\n         * @returns true if the left bounds are before the right bounds\n         */\n        function isBefore(leftBounds: Bounds, rightBounds: Bounds): boolean;\n\n        /**\n         * Checks if the left bounds are after the right bounds, i.e., the left edge of the left bounds is\n         * after the left edge of the right bounds.\n         * @param leftBounds the left bounds\n         * @param rightBounds the right bounds\n         * @returns true if the left bounds are after the right bounds\n         */\n        function isAfter(leftBounds: Bounds, rightBounds: Bounds): boolean;\n\n        /**\n         * Creates a bounds from the given top left and bottom right points.\n         * @param topLeft top left point\n         * @param bottomRight bottom right point\n         * @returns the bounds\n         */\n        function from(topLeft: Point, bottomRight: Point): Bounds;\n\n        /**\n         * Creates a new point from the given bounds by removing the `width` and `height` of the bounds.\n         * This is the same as the top-left point but this method may carry more semantics.\n         * @param bounds the bounds\n         * @returns new point\n         */\n        function position(bounds: Bounds): Point;\n\n        /**\n         * Creates a new dimension from the given bounds by removing the `x` and `y` of the bounds.\n         * @param bounds the bounds\n         * @returns new dimension\n         */\n        function dimension(bounds: Bounds): Dimension;\n\n        /**\n         * Sorts the given bounds by the given rank function.\n         * @param rankFunc the rank function\n         * @param bounds the bounds to sort\n         * @returns the sorted bounds\n         */\n        function sortBy<T>(rankFunc: (elem: T) => number, ...bounds: T[]): T[];\n\n        /**\n         * Moves the bounds by the given delta.\n         * @param bounds the bounds to move\n         * @param delta the delta to move the bounds by\n         * @returns the moved bounds\n         */\n        function move(bounds: Bounds, delta: Point): Bounds;\n\n        /**\n         * Resizes the bounds by the given delta.\n         * @param bounds the bounds to resize\n         * @param delta the delta to resize the bounds by\n         * @returns the resized bounds\n         */\n        function resize(bounds: Bounds, delta: Dimension): Bounds;\n    }\n}\n\n(Bounds as any).ZERO = Object.freeze({\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n});\n\nBounds.is = (bounds: any): bounds is Bounds =>\n    AnyObject.is(bounds) &&\n    hasNumberProp(bounds, 'x') &&\n    hasNumberProp(bounds, 'y') &&\n    hasNumberProp(bounds, 'width') &&\n    hasNumberProp(bounds, 'height');\n\nBounds.isValid = (bounds?: Bounds): bounds is Bounds => bounds !== undefined && Dimension.isValid(bounds) && Point.isValid(bounds);\n\nBounds.encompasses = (outer: Bounds, inner: Bounds): boolean =>\n    Bounds.includes(outer, Bounds.topLeft(inner)) && Bounds.includes(outer, Bounds.bottomRight(inner));\n\nBounds.overlap = (one: Bounds, other: Bounds, touch?: boolean): boolean => {\n    const oneTopLeft: Point = Bounds.topLeft(one);\n    const oneBottomRight = Bounds.bottomRight(one);\n    const otherTopLeft: Point = Bounds.topLeft(other);\n    const otherBottomRight = Bounds.bottomRight(other);\n    return touch\n        ? oneTopLeft.x <= otherBottomRight.x &&\n              otherTopLeft.x <= oneBottomRight.x &&\n              oneBottomRight.y >= otherTopLeft.y &&\n              otherBottomRight.y >= oneTopLeft.y\n        : oneTopLeft.x < otherBottomRight.x &&\n              otherTopLeft.x < oneBottomRight.x &&\n              oneBottomRight.y > otherTopLeft.y &&\n              otherBottomRight.y > oneTopLeft.y;\n};\n\nBounds.equals = (left: Bounds, right: Bounds, eps?: number): boolean =>\n    Point.equals(left, right, eps) && Dimension.equals(left, right, eps);\n\nBounds.left = (bounds: Bounds): number => bounds.x;\n\nBounds.centerX = (bounds: Bounds): number => bounds.x + (bounds.width >= 0 ? bounds.width * 0.5 : 0);\n\nBounds.right = (bounds: Bounds): number => bounds.x + bounds.width;\n\nBounds.top = (bounds: Bounds): number => bounds.y;\n\nBounds.middle = (bounds: Bounds): number => bounds.y + (bounds.height >= 0 ? bounds.height * 0.5 : 0);\n\nBounds.centerY = Bounds.middle;\n\nBounds.bottom = (bounds: Bounds): number => bounds.y + bounds.height;\n\nBounds.topLeft = (bounds: Bounds): Point => ({ x: Bounds.left(bounds), y: Bounds.top(bounds) });\n\nBounds.topCenter = (bounds: Bounds): Point => ({ x: Bounds.centerX(bounds), y: Bounds.top(bounds) });\n\nBounds.topRight = (bounds: Bounds): Point => ({ x: Bounds.right(bounds), y: Bounds.top(bounds) });\n\nBounds.middleLeft = (bounds: Bounds): Point => ({ x: Bounds.left(bounds), y: Bounds.middle(bounds) });\n\nBounds.middleCenter = (bounds: Bounds): Point => ({ x: Bounds.centerX(bounds), y: Bounds.middle(bounds) });\n\nBounds.middleRight = (bounds: Bounds): Point => ({ x: Bounds.right(bounds), y: Bounds.middle(bounds) });\n\nBounds.bottomLeft = (bounds: Bounds): Point => ({ x: Bounds.left(bounds), y: Bounds.bottom(bounds) });\n\nBounds.bottomCenter = (bounds: Bounds): Point => ({ x: Bounds.centerX(bounds), y: Bounds.bottom(bounds) });\n\nBounds.bottomRight = (bounds: Bounds): Point => ({ x: Bounds.right(bounds), y: Bounds.bottom(bounds) });\n\nBounds.isAbove = (leftBounds: Bounds, rightBounds: Bounds): boolean => Bounds.top(leftBounds) <= Bounds.top(rightBounds);\n\nBounds.isBelow = (leftBounds: Bounds, rightBounds: Bounds): boolean => Bounds.top(leftBounds) >= Bounds.top(rightBounds);\n\nBounds.isBefore = (leftBounds: Bounds, rightBounds: Bounds): boolean => Bounds.left(leftBounds) < Bounds.left(rightBounds);\n\nBounds.isAfter = (leftBounds: Bounds, rightBounds: Bounds): boolean => Bounds.left(leftBounds) >= Bounds.left(rightBounds);\n\nBounds.sortBy = <T>(rankFunc: (elem: T) => number, ...bounds: T[]): T[] => bounds.sort((left, right) => rankFunc(left) - rankFunc(right));\n\nBounds.from = (topLeft: Point, bottomRight: Point): Bounds => ({\n    ...topLeft,\n    width: bottomRight.x - topLeft.x,\n    height: bottomRight.y - topLeft.y\n});\n\nBounds.position = Bounds.topLeft;\n\nBounds.dimension = (bounds: Bounds): Dimension => ({ width: bounds.width, height: bounds.height });\n\nBounds.move = Bounds.translate;\n\nBounds.resize = (bounds: Bounds, delta: Dimension): Bounds => ({\n    ...bounds,\n    width: bounds.width + delta.width,\n    height: bounds.height + delta.height\n});\n\nexport { Bounds };\n","/********************************************************************************\n * Copyright (c) 2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/* eslint-disable @typescript-eslint/no-shadow */\n\nimport { Dimension, Point } from 'sprotty-protocol/lib/utils/geometry';\nimport { equalUpTo } from './utils/math-util';\nimport { AnyObject, hasNumberProp } from './utils/type-util';\n\ndeclare module 'sprotty-protocol/lib/utils/geometry' {\n    namespace Dimension {\n        /**\n         * The smallest valid dimension with width, and height set to 0.\n         */\n        const ZERO: Dimension;\n\n        /**\n         * Type guard to check if the given object is a bound.\n         * @param dimension the object to be checked\n         */\n        function is(dimension: any): dimension is Dimension;\n\n        /**\n         * Applies the given function to the `width` and `height` of the given dimensional object to create a new dimensional object.\n         *\n         * @param dimension source dimension\n         * @param callbackfn function applied to `width` and `height` to create a new dimension\n         * @returns new dimension\n         */\n        function map<T extends Dimension>(dimension: T, callbackfn: (value: number, key: keyof Dimension) => number): T;\n\n        /**\n         * Returns the center point of the given dimension.\n         *\n         * @param dimension dimension\n         * @returns center point\n         */\n        function center(dimension: Dimension): Point;\n\n        /**\n         * Computes the sum of two dimensions. The result has the sum of the `width` and `height` of the two dimensions.\n         * @param dimension the first dimension\n         * @param add the second dimension\n         * @returns the sum of the two dimensions\n         */\n        function add(dimension: Dimension, add: Dimension): Dimension;\n\n        /**\n         * Computes the difference of two dimensions. The result has the difference of the `width` and `height` of the two dimensions.\n         * @param dimension the first dimension\n         * @param subtract the second dimension\n         * @returns the difference of the two dimensions\n         */\n        function subtract(dimension: Dimension, subtract: Dimension): Dimension;\n\n        /**\n         * Computes the product of a dimension and a measure.\n         * The result has the `width` and `height` of the dimension multiplied by the measure.\n         * @param dimension the dimension\n         * @param measure the measure\n         * @returns the product of the dimension and the measure\n         */\n        function multiplyMeasure(dimension: Dimension, measure: number): Dimension;\n\n        /**\n         * Computes the quotient of a dimension and a measure.\n         * @param dimension the dimension\n         * @param measure the measure\n         * @returns the quotient of the dimension and the measure\n         */\n        function divideMeasure(dimension: Dimension, measure: number): Dimension;\n\n        /**\n         * Checks if two dimensions are equal. Two dimensions are equal if their `width` and `height` are equal.\n         * @param left the left dimension\n         * @param right the right dimension\n         * @param eps @param eps the epsilon for the comparison\n         * @returns true if the dimensions are equal, false otherwise\n         */\n        function equals(left: Dimension, right: Dimension, eps?: number): boolean;\n\n        /**\n         * Creates a new dimension from the given point. The `width` and `height` of the new dimension are the `x` and `y` of the point.\n         * @param point the point\n         * @returns new dimension\n         */\n        function fromPoint(point: Point): Dimension;\n\n        /**\n         * Computes the area of the given dimension.\n         * @param dimension the dimension\n         * @returns the area of the dimension\n         */\n        function area(dimension: Dimension): number;\n    }\n}\n\n(Dimension as any).ZERO = Object.freeze({\n    width: 0,\n    height: 0\n});\n\nDimension.is = (dimension: any): dimension is Dimension =>\n    AnyObject.is(dimension) && hasNumberProp(dimension, 'width') && hasNumberProp(dimension, 'height');\nDimension.center = (d: Dimension): Point => ({ x: d.width * 0.5, y: d.height * 0.5 });\nDimension.add = (d: Dimension, a: Dimension): Dimension => ({ width: d.width + a.width, height: d.height + a.height });\nDimension.subtract = (d: Dimension, a: Dimension): Dimension => ({ width: d.width - a.width, height: d.height - a.height });\nDimension.multiplyMeasure = (d: Dimension, m: number): Dimension => ({ width: d.width * m, height: d.height * m });\nDimension.divideMeasure = (d: Dimension, m: number): Dimension => ({ width: d.width / m, height: d.height / m });\n\nDimension.map = <T extends Dimension>(dimension: T, callbackfn: (value: number, key: keyof Dimension) => number): T => ({\n    ...dimension,\n    width: callbackfn(dimension.width, 'width'),\n    height: callbackfn(dimension.height, 'height')\n});\nDimension.equals = (left: Dimension, right: Dimension, eps?: number): boolean =>\n    equalUpTo(left.width, right.width, eps) && equalUpTo(left.height, right.height, eps);\nDimension.fromPoint = (point: Point): Dimension => ({ width: point.x, height: point.y });\nDimension.area = (dimension: Dimension): number => dimension.width * dimension.height;\n\nexport { Dimension };\n","/********************************************************************************\n * Copyright (c) 2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/* eslint-disable @typescript-eslint/no-shadow */\n\nimport { Point } from 'sprotty-protocol/lib/utils/geometry';\nimport { Movement } from './utils/geometry-movement';\nimport { Vector } from './utils/geometry-vector';\nimport { equalUpTo } from './utils/math-util';\nimport { AnyObject, hasNumberProp } from './utils/type-util';\n\ndeclare module 'sprotty-protocol/lib/utils/geometry' {\n    namespace Point {\n        /**\n         * Type guard to check if the given object is a point.\n         * @param point the object to be checked\n         */\n        function is(point: any): point is Point;\n        /**\n         * The absolute variant of that point, i.e., each coordinate uses its absolute value.\n         *\n         * @param point the point\n         */\n        function isOrigin(point: Point): boolean;\n        /**\n         * Type guard to check if a point is valid. For a point to be valid it needs to be defined and have valid x and y coordinates.\n         *\n         * @param point the point to be checked for validity\n         */\n        function isValid(point?: Point): point is Point;\n\n        /**\n         * Checks whether the given points are equal up to a certain epsilon.\n         * @param one the first point\n         * @param other the second point\n         * @param eps @param eps the epsilon for the comparison\n         */\n        function equals(one: Point, other: Point, eps?: number): boolean;\n\n        /**\n         * The absolute variant of that point, i.e., each coordinate uses its absolute value.\n         *\n         * @param point the point\n         */\n        function abs(point: Point): Point;\n        /**\n         * Applys a uniform scaling on the given point with respect to the origin.\n         * Functionally, this divides both coordinates by the given scalar.\n         *\n         * @param point the point to be scaled\n         * @param scalar The factor by which the point schould be scaled\n         */\n        function divideScalar(point: Point, scalar: number): Point;\n\n        /**\n         * Applys a uniform scaling on the given point with respect to the origin.\n         * Functionally, this multiplies both coordinates by the given scalar.\n         *\n         * @param point the point to be scaled\n         * @param scalar The factor by which the point schould be scaled\n         */\n        function multiplyScalar(point: Point, scalar: number): Point;\n        /**\n         * Applies the given function to the `x` and `y` coordinate of the given point to create a new point.\n         *\n         * @param point source point\n         * @param callbackfn function applied to the `x` and `y` coordinate of the given point to create a new point\n         * @returns new point\n         */\n        function map<T extends Point>(point: T, callbackfn: (value: number, key: keyof Point) => number): T;\n        /**\n         * Snaps the given point to the nearest point on the given grid.\n         *\n         * @param point point to be snapped\n         * @param grid grid\n         * @param gridOrigin grid origin\n         * @returns a point on the given grid that is closest tot he given point\n         */\n        function snapToGrid(point: Point, grid: Point, gridOrigin?: Point): Point;\n\n        /**\n         * Computes a vector from the given `from` point to the `to` point.\n         * @param from the starting point\n         * @param to the end point\n         * @returns the vector from `from` to `to`\n         */\n        function vector(from: Point, to: Point): Vector;\n\n        /**\n         * Computes the movement from the given `from` point to the `to` point.\n         * @param from the starting point\n         * @param to the end point\n         * @returns the movement from `from` to `to`\n         */\n        function move(from: Point, to: Point): Movement;\n\n        /**\n         * Computes the movement from the given `from` point in the given `vector` direction.\n         * @param from the starting point\n         * @param vector the vector direction\n         * @returns the movement from `from` in the `vector` direction\n         */\n        function moveTowards(from: Point, vector: Vector): Movement;\n    }\n}\n\nPoint.is = (point: any): point is Point => AnyObject.is(point) && hasNumberProp(point, 'x') && hasNumberProp(point, 'y');\nPoint.isOrigin = (point: Point): boolean => Point.equals(point, Point.ORIGIN);\nPoint.isValid = (point?: Point): point is Point => point !== undefined && !isNaN(point.x) && !isNaN(point.y);\nPoint.abs = (point: Point): Point => Point.map(point, Math.abs);\nPoint.divideScalar = (point: Point, scalar: number): Point => Point.map(point, coordinate => coordinate / scalar);\nPoint.multiplyScalar = (point: Point, scalar: number): Point => Point.map(point, coordinate => coordinate * scalar);\nPoint.map = <T extends Point>(point: T, callbackfn: (value: number, key: keyof Point) => number): T => ({\n    ...point,\n    x: callbackfn(point.x, 'x'),\n    y: callbackfn(point.y, 'y')\n});\nPoint.snapToGrid = (point: Point, grid: Point, gridOrigin?: Point): Point => {\n    if (gridOrigin) {\n        // move point relative to grid origin and then restore after snapping\n        const relative = Point.subtract(point, gridOrigin);\n        const snapped = Point.snapToGrid(relative, grid);\n        return Point.add(gridOrigin, snapped);\n    } else {\n        return { x: Math.round(point.x / grid.x) * grid.x, y: Math.round(point.y / grid.y) * grid.y };\n    }\n};\nPoint.vector = (from: Point, to: Point): Vector => Point.subtract(to, from);\n\nPoint.move = (from: Point, to: Point): Movement => {\n    const vector = Point.vector(from, to);\n    const direction = Vector.direction(vector);\n    return { from, to, vector, direction };\n};\n\nPoint.moveTowards = (from: Point, vector: Vector): Movement => {\n    const to = Point.add(from, vector);\n    const dir = Vector.direction(vector);\n    return { from, to, vector, direction: dir };\n};\n\nPoint.equals = (one: Point, other: Point, eps?: number): boolean => equalUpTo(one.x, other.x, eps) && equalUpTo(one.y, other.y, eps);\n\nexport { Point };\n","/********************************************************************************\n * Copyright (c) 2019-2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Constructor, Primitive, TypeGuard } from './type-util';\n\n/**\n * A union type for for objects that can either be a single element or and array of elements.\n */\nexport type MaybeArray<T> = T | T[];\n\n/**\n * Returns the first element of the given array.\n * @param array the array.\n * @returns the element at index 0.\n */\nexport function first<T>(array: T[]): T;\n\n/**\n * Returns the first n elements of the given array.\n * @param array The array.\n * @param n The number of elements that should be returned\n * @returns The first n elements of the array\n */\nexport function first<T>(array: T[], n: number): T[];\nexport function first<T>(array: T[], n?: number): T[] | T {\n    if (n) {\n        return array.filter((_, index) => index < n);\n    }\n    return array[0];\n}\n\n/**\n * Returns the last element of the given array.\n * @param array The array.\n * @returns The last element in the array.\n */\nexport function last<T>(array: T[]): T;\n\n/**\n * Returns the last n elements of the given array.\n * @param array The array.\n * @param n The number of elements that should be returned\n * @returns The last n elements of the array\n */\nexport function last<T>(array: T[], n: number): T[];\nexport function last<T>(array: T[], n?: number): T[] | T {\n    if (n) {\n        return array.filter((_, index) => array.length - index <= n);\n    }\n    return array[array.length - 1];\n}\n\n/**\n * Plucks (i.e. extracts) the property value that corresponds to the given key from all objects of the array.\n * @param array The array which should be plucked.\n * @param key  The key of the property that should be extracted.\n * @returns A new array containing the plugged property for each element of the array.\n */\nexport function pluck<T, K extends keyof T>(array: T[], key: K): Array<T[K]> {\n    return array.map(element => element[key]);\n}\n\n/**\n * Removes the given values from the given array (if present).\n * @param array The array to execute the remove operation on.\n * @param values The values that should be removed from the array.\n */\nexport function remove<T>(array: T[], ...values: T[]): void {\n    values.forEach(value => {\n        const index = array.indexOf(value);\n        if (index >= 0) {\n            array.splice(index, 1);\n        }\n    });\n}\n\n/**\n * Push an array of values to the given array. The values can either be single objects of a concrete type `T`\n * or can also be nested arrays of T. If nested arrays are passed the they will be destructured (i.e. flattened)\n * so that they can be pushed to the given array.\n * @param array The array to push to.\n * @param toPush The values of {@link MaybeArray}s that should be pushed.\n */\nexport function flatPush<T>(array: T[], toPush: MaybeArray<T>[]): void {\n    toPush.forEach(value => (Array.isArray(value) ? array.push(...value) : array.push(value)));\n}\n\n/**\n * Helper function to convert a {@link MaybeArray} into an array.\n * @param maybe The MaybeArray to convert\n * @returns The corresponding array\n */\nexport function asArray<T>(maybe: MaybeArray<T>): T[] {\n    if (Array.isArray(maybe)) {\n        return maybe;\n    }\n    return [maybe];\n}\n/**\n * Adds the given values to the given array. The add operation is executed distinct meaning\n * a value will not be pushed to the array if its already present in the array.\n * @param array The array to push to.\n * @param values The values that should be added distinctively.\n */\nexport function distinctAdd<T>(array: T[], ...values: T[]): void {\n    values.forEach(value => {\n        if (!array.includes(value)) {\n            array.push(value);\n        }\n    });\n}\n\n/**\n * A typeguard function to check wether a given object is an array of a specific type `T`. As it checks the type of each individual\n * array element this guard check is expensive and should only be used in cases where complete type-safety is required.\n * @param object The object to check.\n * @param typeGuard A typeguard to check the type of the individual elements.\n * @param supportEmpty A flag to determine wether empty arrays should pass the typeguard check.\n * @returns A type predicate indicating wether the given object has passed the type guard check.\n */\nexport function isArrayOfType<T>(object: unknown, typeGuard: (elem: unknown) => elem is T, supportEmpty = false): object is T[] {\n    return isArrayMatching(object, element => typeGuard(element), supportEmpty);\n}\n\n/**\n * A typeguard function to check wether a given object is an array of a class`T`. As it checks the wether each individual element\n * is an instance of the given class this  guard check is expensive and should only be used in cases where complete type-safety is required.\n * @param object The object to check.\n * @param constructor The constructor for the class under test.\n * @param supportEmpty A flag to determine wether empty arrays should pass the typeguard check.\n * @returns A type predicate indicating wether the given object has passed the type guard check.\n */\nexport function isArrayOfClass<T>(object: unknown, constructor: Constructor<T>, supportEmpty = false): object is T[] {\n    return isArrayMatching(object, element => element instanceof constructor, supportEmpty);\n}\n\n/**\n * A typeguard function to check wether a given object is an array of a {@link PrimitiveType} `T. As it checks the type of each individual\n * array element this guard check is expensive and should only be used in cases where complete type-safety is required.\n * @param object The object to check.\n * @param primitiveType The expected primitive type of the elements.\n * @param supportEmpty A flag to determine wether empty arrays should pass the typeguard check.\n * @returns A type predicate indicating wether the given object has passed the type guard check.\n */\nexport function isArrayOfPrimitive<T>(object: unknown, primitiveType: Primitive, supportEmpty = false): object is T[] {\n    return isArrayMatching(object, element => typeof element === primitiveType, supportEmpty);\n}\n\n/**\n * A typeguard function to check wether a given object is an array of a strings. As it checks the type of each individual\n * array element this guard check is expensive and should only be used in cases where complete type-safety is required.\n * @param object The object to check.\n * @param supportEmpty A flag to determine wether empty arrays should pass the typeguard check.\n * @returns A type predicate indicating wether the given object has passed the type guard check.\n */\nexport function isStringArray(object: unknown, supportEmpty = false): object is string[] {\n    return isArrayOfPrimitive(object, 'string', supportEmpty);\n}\n\n/**\n * A typeguard function to check wether a given object is an array where each element matches the given predicate.\n * @param object The object to check.\n * @param predicate The predicate to test with.\n * @param supportEmpty A flag to determine wether empty arrays be matched by the predicate..\n * @returns `true` if the given object is an array and all elements match the given predicate. `false` otherwise.\n */\nexport function isArrayMatching(object: unknown, predicate: (elem: unknown) => boolean, supportEmpty = false): boolean {\n    return Array.isArray(object) && object.every(predicate) && (supportEmpty || object.length > 0);\n}\n\nexport function partition<T>(source: T[], matchGuard: TypeGuard<T>): { match: T[]; rest: T[] } {\n    const match: T[] = [];\n    const rest: T[] = [];\n    source.forEach(element => {\n        if (matchGuard(element)) {\n            match.push(element);\n        } else {\n            rest.push(element);\n        }\n    });\n    return { match, rest };\n}\n\n/**\n * Helper function to create an array of values without any undefined values.\n * @param values The values to create the array from.\n * @returns The array of values without any undefined values.\n */\nexport function arrayOf<T>(...values: (T | undefined)[]): T[] {\n    return values.filter(element => element !== undefined) as T[];\n}\n","/********************************************************************************\n * Copyright (c) 2023-2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as jsonrpc from 'vscode-jsonrpc';\nimport { isArrayOfType, remove } from '../utils/array-util';\nimport { AnyObject, hasFunctionProp } from '../utils/type-util';\n\n/**\n * Interface for objects that can or need to be disposed properly.\n */\nexport interface Disposable extends jsonrpc.Disposable {\n    /**\n     * Dispose this object.\n     */\n    dispose(): void;\n}\n\nexport namespace Disposable {\n    export function is(value: unknown): value is Disposable {\n        return AnyObject.is(value) && hasFunctionProp(value, 'dispose');\n    }\n\n    /**\n     * Creates a new empty i.e. no-op {@link Disposable}.\n     * @returns the newly created disposable\n     */\n    export function empty(): Disposable {\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\n        return { dispose: () => {} };\n    }\n\n    /**\n     * Creates a new {@link Disposable} that delegates to the given callback.\n     * @param cb The callback that should be invoked on dispose\n     * @returns the newly created disposable\n     */\n    export function create(cb: () => void): Disposable {\n        return { dispose: cb };\n    }\n}\n\n/**\n * Reusable base class to manage a collection of {@link Disposable}s.\n */\nexport class DisposableCollection implements Disposable {\n    protected readonly disposables: Disposable[] = [];\n    errorHandler?: (err: unknown) => void;\n\n    constructor(...toDispose: Disposable[]) {\n        toDispose.forEach(d => this.push(d));\n        this.errorHandler = err => console.error(err);\n    }\n\n    dispose(): void {\n        if (this.disposed) {\n            return;\n        }\n        try {\n            while (!this.disposed) {\n                this.disposables.pop()?.dispose();\n            }\n        } catch (err) {\n            this.errorHandler?.(err);\n        }\n    }\n\n    get disposed(): boolean {\n        return this.disposables.length === 0;\n    }\n\n    /**\n     * Pushes the given disposables to the collection.\n     * @param disposables The disposables that should be added\n     * @returns A disposable that removes the previously pushed values from the collection when invoked\n     */\n    push(...disposables: Disposable[]): Disposable;\n    push(...disposables: (() => void)[]): Disposable;\n    push(...disposables: (() => void)[] | Disposable[]): Disposable {\n        const toAdd = isArrayOfType(disposables, Disposable.is) ? disposables : disposables.map(Disposable.create);\n        this.disposables.push(...toAdd);\n        return Disposable.create(() => remove(this.disposables, ...toAdd));\n    }\n\n    get isDisposed(): boolean {\n        return this.disposed;\n    }\n\n    /**\n     * Removes all disposables in this collection WITHOUT triggering their disposal behavior.\n     */\n    clear(): void {\n        this.disposables.length = 0;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as jsonrpc from 'vscode-jsonrpc';\nimport { Disposable } from './disposable';\nimport { SafeFunction } from './type-util';\n\n/**\n * GLSP event/emitter API. Reuses the API provided by\n * `vscode-jsonrpc` and overrides certain type definitions to match the type\n * definitions provided by GLSP (Event, Disposable)\n */\n\n/**\n * Represents a typed event. Listener functions can subscribe for a event\n * and will be called when the event is fired. Typically events are provided by services via\n * public property. For example assume we have a service `myService` that exposes a\n * `onStartupComplete` event. Then a listener could be registered like this\n * ```ts\n *      const disposable= this.myService.onStartupComplete(event=> doSomething(event));\n *\n *     // If the listener should be unregistered again, simply call\n *      disposable.dispose()\n * ```\n */\nexport interface Event<T> extends jsonrpc.Event<T> {\n    /**\n     *\n     * @param listener The listener function will be called when the event happens.\n     * @param thisArgs The 'this' which will be used when calling the event listener.\n     * @param disposables An array to which the {@link Disposable} for removing the listener will be added.\n     * @returns a {@link Disposable} to remove the listener again.\n     */\n    (listener: (e: T) => unknown, thisArgs?: unknown, disposables?: Disposable[]): Disposable;\n}\n\n/**\n * Optional options that can be passed to the constructor\n * of an {@link Emitter}.\n */\nexport interface EmitterOptions {\n    /**\n     * Callback function that will be invoked after the first\n     * listener has been registered for the emitter\n     */\n    onFirstListenerAdd?: SafeFunction<void>;\n    /**\n     * Callback function that will be invoked after the last\n     * listener has been removed from the emitter\n     */\n    onLastListenerRemove?: SafeFunction<void>;\n}\n\nexport class Emitter<T> extends jsonrpc.Emitter<T> implements Disposable {\n    constructor(options: EmitterOptions = {}) {\n        super(options);\n    }\n\n    /**\n     * The even that is managed by this emitter.\n     * Intended for the public to allow to subscribe to the emitter`s events.\n     */\n    override get event(): Event<T> {\n        return super.event;\n    }\n\n    /**\n     * Fires and event and notifies all registered listeners\n     */\n    override fire(event: T): void {\n        super.fire(event);\n    }\n}\n\n/**\n * Common interface for events that are fired on a single value change\n */\nexport interface ValueChange<T> {\n    oldValue: T;\n    newValue: T;\n}\n","/********************************************************************************\n * Copyright (c) 2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Point } from '../sprotty-geometry-point';\nimport { Direction } from './geometry-util';\nimport { Vector } from './geometry-vector';\nimport { AnyObject, hasObjectProp } from './type-util';\n\n/**\n * A movement in 2D space. A movement is defined by a starting point, an end point, a vector that describes the direction and magnitude.\n */\nexport interface Movement {\n    /**\n     * The starting point of the movement.\n     */\n    from: Point;\n    /**\n     * The end point of the movement.\n     */\n    to: Point;\n    /**\n     * The vector that describes the direction and magnitude of the movement.\n     */\n    vector: Vector;\n    /**\n     * The directions that the movement is composed of, derived from the vector\n     */\n    direction: Direction[];\n}\n\n/**\n * A collection of utility functions for working with movements.\n\n */\nexport namespace Movement {\n    /**\n     * The zero movement. It has from and to set to the origin and the vector set to zero.\n     */\n    export const ZERO = Object.freeze<Movement>({\n        from: Point.ORIGIN,\n        to: Point.ORIGIN,\n        vector: Vector.ZERO,\n        direction: []\n    });\n\n    /**\n     * A type guard that checks if the given object is a movement.\n     * @param obj the object to check\n     * @returns true if the object is a movement, false otherwise\n     */\n    export function is(obj: any): obj is Movement {\n        return (\n            AnyObject.is(obj) &&\n            hasObjectProp(obj, 'from') &&\n            Point.is((obj as any).from) &&\n            hasObjectProp(obj, 'to') &&\n            Point.is((obj as any).to) &&\n            hasObjectProp(obj, 'vector') &&\n            Vector.is((obj as any).to) &&\n            hasObjectProp(obj, 'direction')\n        );\n    }\n\n    /**\n     * Checks if the given movement is stationary, i.e. the starting point and end point are equal and the vector is zero.\n     * @param movement the movement to check\n     * @returns true if the movement is stationary, false otherwise\n     */\n    export function isStationary(movement: Movement): boolean {\n        return Vector.isZero(movement.vector);\n    }\n\n    /**\n     * Checks if the given movement is zero, i.e., all values are zero.\n     * @param movement the movement to check\n     * @returns true if the movement is zero, false otherwise\n     */\n    export function isZero(movement: Movement): boolean {\n        return Movement.equals(movement, ZERO);\n    }\n\n    /**\n     * Checks if two movements are equal. Two movements are equal if their starting points, end points, and vectors are equal.\n     * @param left the left movement\n     * @param right the right movement\n     * @returns true if the movements are equal, false otherwise\n     */\n    export function equals(left: Movement, right: Movement): boolean {\n        return Point.equals(left.from, right.from) && Point.equals(left.to, right.to) && Vector.equals(left.vector, right.vector);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * A direction in 2D space.\n */\nexport const Direction = {\n    Left: 'left',\n    Right: 'right',\n    Up: 'up',\n    Down: 'down'\n} as const;\nexport type Direction = (typeof Direction)[keyof typeof Direction];\n","/********************************************************************************\n * Copyright (c) 2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Direction } from './geometry-util';\nimport { AnyObject, hasNumberProp } from './type-util';\n\n/**\n * A vector in two-dimensional space with an x and y component. A vector describes a direction and magnitued\n * epresented by coordinates that describe its endpoint relative to a starting point.\n */\nexport interface Vector {\n    x: number;\n    y: number;\n}\n\n/**\n * A collection of utility functions for working with vectors.\n */\nexport namespace Vector {\n    /**\n     * The zero vector. It has x and y set to 0.\n     */\n    export const ZERO: Vector = Object.freeze({\n        x: 0,\n        y: 0\n    });\n\n    /**\n     * Compute the absolute value of the vector.\n     * @param vector the vector to compute the absolute value of\n     * @returns the absolute value of the vector\n     */\n    export function abs(vector: Vector): Vector {\n        return { x: Math.abs(vector.x), y: Math.abs(vector.y) };\n    }\n\n    /**\n     * Computes the sum of two vectors.\n     * @param vector the vector to add to\n     * @param addend the vector to add\n     * @returns the sum of the two vectors\n     */\n    export function add(vector: Vector, addend: Vector): Vector {\n        return { x: vector.x + addend.x, y: vector.y + addend.y };\n    }\n\n    /**\n     * Check if two vectors are equal.\n     * @param left the left vector\n     * @param right the right vector\n     * @returns true if the vectors are equal, false otherwise\n     */\n    export function equals(left: Vector, right: Vector): boolean {\n        return left.x === right.x && left.y === right.y;\n    }\n\n    /**\n     * Check if a vector is valid. A vector is valid if it is not undefined and both x and y are numbers.\n     * @param vector the vector to check\n     * @returns true if the vector is valid, false otherwise\n     */\n    export function isValid(vector?: Vector): boolean {\n        return vector !== undefined && !isNaN(vector.x) && !isNaN(vector.y);\n    }\n\n    /**\n     * Computes the magnitude of a vector defined as the square root of the sum of the squares of the x and y components.\n     * @param point the vector to compute the magnitude of\n     * @returns the magnitude of the vector\n     */\n    export function magnitude(point: Vector): number {\n        return Math.sqrt(Math.pow(point.x, 2) + Math.pow(point.y, 2));\n    }\n\n    /**\n     * Maps each component of the vector to a new value given by the callback function.\n     * @param vector the vector to map\n     * @param callbackfn the function to map the components\n     * @returns the mapped vector\n     */\n    export function map(vector: Vector, callbackfn: (value: number, key: keyof Vector) => number): Vector {\n        return {\n            ...vector,\n            x: callbackfn(vector.x, 'x'),\n            y: callbackfn(vector.y, 'y')\n        };\n    }\n\n    /**\n     * Computes the normalized vector of a given vector.\n     * The normalized vector has the same direction as the original vector but a magnitude of 1.\n     *\n     * @param vector the vector to normalize\n     * @returns the normalized vector\n     */\n    export function normalize(vector: Vector): Vector {\n        const mag = magnitude(vector);\n        if (mag === 0 || mag === 1) {\n            return ZERO;\n        }\n        return {\n            x: vector.x / mag,\n            y: vector.y / mag\n        };\n    }\n\n    /**\n     * Check if a vector is the zero vector.\n     * @param vector the vector to check\n     * @returns true if the vector is the zero vector, false otherwise\n     */\n    export function isZero(vector: Vector): boolean {\n        return Vector.equals(vector, ZERO);\n    }\n\n    /**\n     * Type guard to check if a value is a vector.\n     * @param vector the value to check\n     * @returns true if the value is a vector, false otherwise\n     */\n    export function is(vector: any): vector is Vector {\n        return AnyObject.is(vector) && hasNumberProp(vector, 'x') && hasNumberProp(vector, 'y');\n    }\n\n    /**\n     * Divides each component of the vector by a scalar.\n     *\n     * @param vector the vector to divide\n     * @param scalar the scalar to divide by\n     * @returns the divided vector\n     */\n    export function divide(vector: Vector, scalar: number): Vector {\n        return Vector.map(vector, coordinate => coordinate / scalar);\n    }\n\n    /**\n     * Multiplies each component of the vector by a scalar.\n     *\n     * @param vector the vector to multiply\n     * @param scalar the scalar to multiply by\n     * @returns the multiplied vector\n     */\n    export function multiply(vector: Vector, scalar: number): Vector {\n        return Vector.map(vector, coordinate => coordinate * scalar);\n    }\n\n    /**\n     * Subtracts the subtrahend from the vector.\n     *\n     * @param vector the vector to subtract from\n     * @param subtrahend the vector to subtract\n     * @returns the subtracted vector\n     */\n    export function subtract(vector: Vector, subtrahend: Vector): Vector {\n        return { x: vector.x - subtrahend.x, y: vector.y - subtrahend.y };\n    }\n\n    /**\n     * Reverse the direction of a vector.\n     * @param vector the vector to reverse\n     * @returns the reversed vector\n     */\n    export function reverse(vector: Vector): Vector {\n        return { x: -vector.x, y: -vector.y };\n    }\n\n    /**\n     * Computes the direction of a vector\n     * @param vector the vector to compute the direction of\n     * @returns the direction of the vector\n     */\n    export function direction(vector: Vector): Direction[] {\n        const directions: Direction[] = [];\n        if (vector.x < 0) {\n            directions.push(Direction.Left);\n        } else if (vector.x > 0) {\n            directions.push(Direction.Right);\n        }\n        if (vector.y < 0) {\n            directions.push(Direction.Up);\n        } else if (vector.y > 0) {\n            directions.push(Direction.Down);\n        }\n        return directions;\n    }\n\n    /**\n     * Computes a vector that is the minimum of all given vectors.\n     * @returns the minimum vector\n     */\n    export function min(...vectors: Vector[]): Vector {\n        return {\n            x: Math.min(...vectors.map(vector => vector.x)),\n            y: Math.min(...vectors.map(vector => vector.y))\n        };\n    }\n\n    /**\n     * Computes a vector that is the maximum of all given vectors.\n     * @returns the maximum vector\n     */\n    export function max(...vectors: Vector[]): Vector {\n        return {\n            x: Math.max(...vectors.map(vector => vector.x)),\n            y: Math.max(...vectors.map(vector => vector.y))\n        };\n    }\n\n    /**\n     * Computes a vector that is the average of all given vectors.\n     * @returns the average vector\n     */\n    export function avg(...vectors: Vector[]): Vector {\n        if (vectors.length === 0) {\n            return Vector.ZERO;\n        }\n        return {\n            x: vectors.reduce((prev, cur) => prev + cur.x, 0) / vectors.length,\n            y: vectors.reduce((prev, cur) => prev + cur.y, 0) / vectors.length\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2024 Axon Ivy AG and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport function equalUpTo(one: number, other: number, epsilon: number = Number.EPSILON): boolean {\n    return Math.abs(one - other) <= epsilon;\n}\n","/********************************************************************************\n * Copyright (c) 2021-2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/** Helper type to describe any defined object*/\nexport type AnyObject = object;\n\nexport namespace AnyObject {\n    /**\n     * Type guard to check wether a given object is of type {@link AnyObject}.\n     * @param object The object to check.\n     * @returns The given object as {@link AnyObject} or `false`.\n     */\n    export function is(object: unknown): object is AnyObject {\n        // eslint-disable-next-line no-null/no-null\n        return object !== null && typeof object === 'object';\n    }\n}\n\n/**\n * Utility type to capture all primitive types.\n */\nexport type Primitive = string | number | boolean | bigint | symbol | undefined | null;\n\n/**\n * Utility type to describe objects that have a constructor function i.e. classes.\n */\nexport interface Constructor<T, A extends any[] = any[]> {\n    new (...args: A): T;\n}\n\n/**\n * Utility type to declare a given type `T` as writable. Essentially this removes\n * all readonly modifiers of the type`s properties. Please use with care and only in instances\n * where you know that overwriting a readonly property is safe and doesn't cause unknown unintended side effects.\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport type Writable<T> = { -readonly [P in keyof T]: Writable<T[P]> };\n\n/**\n * Utility type to extract all key of type `V` from a given type `T`.\n */\nexport type KeysOfType<T, V> = { [K in keyof T]: T[K] extends V ? K : never }[keyof T];\n\n/**\n * Utility type to extract all properties of type `V` from a given type `T`.\n */\nexport type PropertiesOfType<T, V> = Pick<T, KeysOfType<T, V>>;\n\n/**\n * Utility type to describe a value as might be provided as a promise.\n */\nexport type MaybePromise<T> = T | PromiseLike<T>;\n\n/**\n * Utility type to describe typeguard functions.\n */\nexport type TypeGuard<T> = (element: any) => element is T;\n\n/** Utility function to combine two type guards */\nexport function typeGuard<T, G>(one: TypeGuard<T>, other: TypeGuard<G>): TypeGuard<T & G> {\n    return (element: any): element is T & G => one(element) && other(element);\n}\n\n/** Utility function to combine two type guards with an OR */\nexport function typeGuardOr<T, G>(one: TypeGuard<T>, other: TypeGuard<G>): TypeGuard<T | G> {\n    return (element: any): element is T | G => one(element) || other(element);\n}\n\n/**\n * Utility function that create a typeguard function for a given class constructor.\n * Essentially this wraps an instance of check as typeguard function.\n * @param constructor The constructor of the class for which the typeguard should be created.\n * @returns The typeguard for this class.\n */\nexport function toTypeGuard<G>(constructor: Constructor<G>): TypeGuard<G> {\n    return (element: any): element is G => element instanceof constructor;\n}\n\n/**\n * Utility type that represents an arbitrary function. Should be used instead\n * of the default `Function` type which is considered to be unsafe.\n */\nexport type SafeFunction<T = any> = (...args: any[]) => T;\n\nexport type MaybeFunction<T = any> = T | SafeFunction<T>;\n\nexport function call<T>(maybeFun: MaybeFunction<T>, ...args: any[]): T {\n    return typeof maybeFun === 'function' ? (maybeFun as SafeFunction<T>)(...args) : maybeFun;\n}\n\n/**\n * Validates whether the given object has a property of type `string` with the given key.\n * @param object The object that should be validated\n * @param propertyKey The key of the property\n * @param optional Flag to indicate wether the property can be optional i.e. also return true if the given key is undefined\n * @returns `true` if the object has property with matching key of type `string`.\n */\nexport function hasStringProp(object: AnyObject, propertyKey: string, optional = false): boolean {\n    const property = (object as any)[propertyKey];\n    return property !== undefined ? typeof property === 'string' : optional;\n}\n\n/**\n * Validates whether the given object has a property of type `boolean` with the given key.\n * @param object The object that should be validated\n * @param propertyKey The key of the property\n * @param optional Flag to indicate wether the property can be optional i.e. also return true if the given key is undefined\n * @returns `true` if the object has property with matching key of type `boolean`.\n */\nexport function hasBooleanProp(object: AnyObject, propertyKey: string, optional = false): boolean {\n    const property = (object as any)[propertyKey];\n    return property !== undefined ? typeof property === 'boolean' : optional;\n}\n\n/**\n * Validates whether the given object has a property of type `number` with the given key.\n * @param object The object that should be validated\n * @param propertyKey The key of the property\n * @param optional Flag to indicate wether the property can be optional i.e. also return true if the given key is undefined\n * @returns `true` if the object has property with matching key of type `number`.\n */\nexport function hasNumberProp(object: AnyObject, propertyKey: string, optional = false): boolean {\n    const property = (object as any)[propertyKey];\n    return property !== undefined ? typeof property === 'number' : optional;\n}\n\n/**\n * Validates whether the given object has a property of type `object` with the given key.\n * @param object The object that should be validated\n * @param propertyKey The key of the property\n * @param optional Flag to indicate wether the property can be optional i.e. also return true if the given key is undefined\n * @returns `true` if the object has property with matching key of type `object`.\n */\nexport function hasObjectProp<T extends string>(object: AnyObject, propertyKey: T, optional = false): boolean {\n    const property = (object as any)[propertyKey];\n    return property !== undefined ? AnyObject.is(property) : optional;\n}\n\n/**\n * Validates whether the given object has a property of type `function` with the given key.\n * @param object The object that should be validated\n * @param propertyKey The key of the property\n * @param optional Flag to indicate wether the property can be optional i.e. also return true if the given key is undefined\n * @returns `true` if the object has property with matching key of type `function`.\n */\nexport function hasFunctionProp(object: AnyObject, propertyKey: string, optional = false): boolean {\n    const property = (object as any)[propertyKey];\n    return property !== undefined ? typeof property === 'function' : optional;\n}\n\n/**\n * Validates whether the given object has a property of type `Array` with the given key.\n * @param object The object that should be validated\n * @param propertyKey The key of the property\n * @param optional Flag to indicate wether the property can be optional i.e. also return true if the given key is undefined\n * @returns `true` if the object has property with matching key of type `Array`.\n */\nexport function hasArrayProp(object: AnyObject, propertyKey: string, optional = false): boolean {\n    const property = (object as any)[propertyKey];\n    return property !== undefined ? Array.isArray(property) : optional;\n}\n","export { default as MAX } from './max.js';\nexport { default as NIL } from './nil.js';\nexport { default as parse } from './parse.js';\nexport { default as stringify } from './stringify.js';\nexport { default as v1 } from './v1.js';\nexport { default as v1ToV6 } from './v1ToV6.js';\nexport { default as v3 } from './v3.js';\nexport { default as v4 } from './v4.js';\nexport { default as v5 } from './v5.js';\nexport { default as v6 } from './v6.js';\nexport { default as v6ToV1 } from './v6ToV1.js';\nexport { default as v7 } from './v7.js';\nexport { default as validate } from './validate.js';\nexport { default as version } from './version.js';","export default 'ffffffff-ffff-ffff-ffff-ffffffffffff';","import crypto from 'node:crypto';\nfunction md5(bytes) {\n  if (Array.isArray(bytes)) {\n    bytes = Buffer.from(bytes);\n  } else if (typeof bytes === 'string') {\n    bytes = Buffer.from(bytes, 'utf8');\n  }\n  return crypto.createHash('md5').update(bytes).digest();\n}\nexport default md5;","import crypto from 'node:crypto';\nexport default {\n  randomUUID: crypto.randomUUID\n};","export default '00000000-0000-0000-0000-000000000000';","import validate from './validate.js';\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n  let v;\n  const arr = new Uint8Array(16);\n\n  // Parse ########-....-....-....-............\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff;\n\n  // Parse ........-####-....-....-............\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff;\n\n  // Parse ........-....-####-....-............\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff;\n\n  // Parse ........-....-....-####-............\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff;\n\n  // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\nexport default parse;","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;","import crypto from 'node:crypto';\nconst rnds8Pool = new Uint8Array(256); // # of random values to pre-allocate\nlet poolPtr = rnds8Pool.length;\nexport default function rng() {\n  if (poolPtr > rnds8Pool.length - 16) {\n    crypto.randomFillSync(rnds8Pool);\n    poolPtr = 0;\n  }\n  return rnds8Pool.slice(poolPtr, poolPtr += 16);\n}","import crypto from 'node:crypto';\nfunction sha1(bytes) {\n  if (Array.isArray(bytes)) {\n    bytes = Buffer.from(bytes);\n  } else if (typeof bytes === 'string') {\n    bytes = Buffer.from(bytes, 'utf8');\n  }\n  return crypto.createHash('sha1').update(bytes).digest();\n}\nexport default sha1;","import validate from './validate.js';\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  //\n  // Note to future-self: No, you can't remove the `toLowerCase()` call.\n  // REF: https://github.com/uuidjs/uuid/pull/677#issuecomment-1757351351\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset);\n  // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n  return uuid;\n}\nexport default stringify;","import rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nlet _nodeId;\nlet _clockseq;\n\n// Previous uuid creation time\nlet _lastMSecs = 0;\nlet _lastNSecs = 0;\n\n// See https://github.com/uuidjs/uuid for API details\nfunction v1(options, buf, offset) {\n  let i = buf && offset || 0;\n  const b = buf || new Array(16);\n  options = options || {};\n  let node = options.node;\n  let clockseq = options.clockseq;\n\n  // v1 only: Use cached `node` and `clockseq` values\n  if (!options._v6) {\n    if (!node) {\n      node = _nodeId;\n    }\n    if (clockseq == null) {\n      clockseq = _clockseq;\n    }\n  }\n\n  // Handle cases where we need entropy.  We do this lazily to minimize issues\n  // related to insufficient system entropy.  See #189\n  if (node == null || clockseq == null) {\n    const seedBytes = options.random || (options.rng || rng)();\n\n    // Randomize node\n    if (node == null) {\n      node = [seedBytes[0], seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n\n      // v1 only: cache node value for reuse\n      if (!_nodeId && !options._v6) {\n        // per RFC4122 4.5: Set MAC multicast bit (v1 only)\n        node[0] |= 0x01; // Set multicast bit\n\n        _nodeId = node;\n      }\n    }\n\n    // Randomize clockseq\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n      if (_clockseq === undefined && !options._v6) {\n        _clockseq = clockseq;\n      }\n    }\n  }\n\n  // v1 & v6 timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so time is\n  // handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  let msecs = options.msecs !== undefined ? options.msecs : Date.now();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  let nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  const dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  const tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  const tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (let n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n  return buf || unsafeStringify(b);\n}\nexport default v1;","import parse from './parse.js';\nimport { unsafeStringify } from './stringify.js';\n\n/**\n * Convert a v1 UUID to a v6 UUID\n *\n * @param {string|Uint8Array} uuid - The v1 UUID to convert to v6\n * @returns {string|Uint8Array} The v6 UUID as the same type as the `uuid` arg\n * (string or Uint8Array)\n */\nexport default function v1ToV6(uuid) {\n  const v1Bytes = typeof uuid === 'string' ? parse(uuid) : uuid;\n  const v6Bytes = _v1ToV6(v1Bytes);\n  return typeof uuid === 'string' ? unsafeStringify(v6Bytes) : v6Bytes;\n}\n\n// Do the field transformation needed for v1 -> v6\nfunction _v1ToV6(v1Bytes, randomize = false) {\n  return Uint8Array.of((v1Bytes[6] & 0x0f) << 4 | v1Bytes[7] >> 4 & 0x0f, (v1Bytes[7] & 0x0f) << 4 | (v1Bytes[4] & 0xf0) >> 4, (v1Bytes[4] & 0x0f) << 4 | (v1Bytes[5] & 0xf0) >> 4, (v1Bytes[5] & 0x0f) << 4 | (v1Bytes[0] & 0xf0) >> 4, (v1Bytes[0] & 0x0f) << 4 | (v1Bytes[1] & 0xf0) >> 4, (v1Bytes[1] & 0x0f) << 4 | (v1Bytes[2] & 0xf0) >> 4, 0x60 | v1Bytes[2] & 0x0f, v1Bytes[3], v1Bytes[8], v1Bytes[9], v1Bytes[10], v1Bytes[11], v1Bytes[12], v1Bytes[13], v1Bytes[14], v1Bytes[15]);\n}","import v35 from './v35.js';\nimport md5 from './md5.js';\nconst v3 = v35('v3', 0x30, md5);\nexport default v3;","import { unsafeStringify } from './stringify.js';\nimport parse from './parse.js';\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  const bytes = [];\n  for (let i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n  return bytes;\n}\nexport const DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport const URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function v35(name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    var _namespace;\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n    if (((_namespace = namespace) === null || _namespace === void 0 ? void 0 : _namespace.length) !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    }\n\n    // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n    let bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n    if (buf) {\n      offset = offset || 0;\n      for (let i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n      return buf;\n    }\n    return unsafeStringify(bytes);\n  }\n\n  // Function#name is not settable on some platforms (#270)\n  try {\n    generateUUID.name = name;\n  } catch (err) {}\n\n  // For CommonJS default export support\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    offset = offset || 0;\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n    return buf;\n  }\n  return unsafeStringify(rnds);\n}\nexport default v4;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nconst v5 = v35('v5', 0x50, sha1);\nexport default v5;","import { unsafeStringify } from './stringify.js';\nimport v1 from './v1.js';\nimport v1ToV6 from './v1ToV6.js';\n\n/**\n *\n * @param {object} options\n * @param {Uint8Array=} buf\n * @param {number=} offset\n * @returns\n */\nexport default function v6(options = {}, buf, offset = 0) {\n  // v6 is v1 with different field layout, so we start with a v1 UUID, albeit\n  // with slightly different behavior around how the clock_seq and node fields\n  // are randomized, which is why we call v1 with _v6: true.\n  let bytes = v1({\n    ...options,\n    _v6: true\n  }, new Uint8Array(16));\n\n  // Reorder the fields to v6 layout.\n  bytes = v1ToV6(bytes);\n\n  // Return as a byte array if requested\n  if (buf) {\n    for (let i = 0; i < 16; i++) {\n      buf[offset + i] = bytes[i];\n    }\n    return buf;\n  }\n  return unsafeStringify(bytes);\n}","import parse from './parse.js';\nimport { unsafeStringify } from './stringify.js';\n\n/**\n * Convert a v6 UUID to a v1 UUID\n *\n * @param {string|Uint8Array} uuid - The v6 UUID to convert to v6\n * @returns {string|Uint8Array} The v1 UUID as the same type as the `uuid` arg\n * (string or Uint8Array)\n */\nexport default function v6ToV1(uuid) {\n  const v6Bytes = typeof uuid === 'string' ? parse(uuid) : uuid;\n  const v1Bytes = _v6ToV1(v6Bytes);\n  return typeof uuid === 'string' ? unsafeStringify(v1Bytes) : v1Bytes;\n}\n\n// Do the field transformation needed for v6 -> v1\nfunction _v6ToV1(v6Bytes) {\n  return Uint8Array.of((v6Bytes[3] & 0x0f) << 4 | v6Bytes[4] >> 4 & 0x0f, (v6Bytes[4] & 0x0f) << 4 | (v6Bytes[5] & 0xf0) >> 4, (v6Bytes[5] & 0x0f) << 4 | v6Bytes[6] & 0x0f, v6Bytes[7], (v6Bytes[1] & 0x0f) << 4 | (v6Bytes[2] & 0xf0) >> 4, (v6Bytes[2] & 0x0f) << 4 | (v6Bytes[3] & 0xf0) >> 4, 0x10 | (v6Bytes[0] & 0xf0) >> 4, (v6Bytes[0] & 0x0f) << 4 | (v6Bytes[1] & 0xf0) >> 4, v6Bytes[8], v6Bytes[9], v6Bytes[10], v6Bytes[11], v6Bytes[12], v6Bytes[13], v6Bytes[14], v6Bytes[15]);\n}","import rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\n/**\n * UUID V7 - Unix Epoch time-based UUID\n *\n * The IETF has published RFC9562, introducing 3 new UUID versions (6,7,8). This\n * implementation of V7 is based on the accepted, though not yet approved,\n * revisions.\n *\n * RFC 9562:https://www.rfc-editor.org/rfc/rfc9562.html Universally Unique\n * IDentifiers (UUIDs)\n\n *\n * Sample V7 value:\n * https://www.rfc-editor.org/rfc/rfc9562.html#name-example-of-a-uuidv7-value\n *\n * Monotonic Bit Layout: RFC rfc9562.6.2 Method 1, Dedicated Counter Bits ref:\n *     https://www.rfc-editor.org/rfc/rfc9562.html#section-6.2-5.1\n *\n *   0                   1                   2                   3 0 1 2 3 4 5 6\n *   7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n *  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n *  |                          unix_ts_ms                           |\n *  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n *  |          unix_ts_ms           |  ver  |        seq_hi         |\n *  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n *  |var|               seq_low               |        rand         |\n *  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n *  |                             rand                              |\n *  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n *\n * seq is a 31 bit serialized counter; comprised of 12 bit seq_hi and 19 bit\n * seq_low, and randomly initialized upon timestamp change. 31 bit counter size\n * was selected as any bitwise operations in node are done as _signed_ 32 bit\n * ints. we exclude the sign bit.\n */\n\nlet _seqLow = null;\nlet _seqHigh = null;\nlet _msecs = 0;\nfunction v7(options, buf, offset) {\n  options = options || {};\n\n  // initialize buffer and pointer\n  let i = buf && offset || 0;\n  const b = buf || new Uint8Array(16);\n\n  // rnds is Uint8Array(16) filled with random bytes\n  const rnds = options.random || (options.rng || rng)();\n\n  // milliseconds since unix epoch, 1970-01-01 00:00\n  const msecs = options.msecs !== undefined ? options.msecs : Date.now();\n\n  // seq is user provided 31 bit counter\n  let seq = options.seq !== undefined ? options.seq : null;\n\n  // initialize local seq high/low parts\n  let seqHigh = _seqHigh;\n  let seqLow = _seqLow;\n\n  // check if clock has advanced and user has not provided msecs\n  if (msecs > _msecs && options.msecs === undefined) {\n    _msecs = msecs;\n\n    // unless user provided seq, reset seq parts\n    if (seq !== null) {\n      seqHigh = null;\n      seqLow = null;\n    }\n  }\n\n  // if we have a user provided seq\n  if (seq !== null) {\n    // trim provided seq to 31 bits of value, avoiding overflow\n    if (seq > 0x7fffffff) {\n      seq = 0x7fffffff;\n    }\n\n    // split provided seq into high/low parts\n    seqHigh = seq >>> 19 & 0xfff;\n    seqLow = seq & 0x7ffff;\n  }\n\n  // randomly initialize seq\n  if (seqHigh === null || seqLow === null) {\n    seqHigh = rnds[6] & 0x7f;\n    seqHigh = seqHigh << 8 | rnds[7];\n    seqLow = rnds[8] & 0x3f; // pad for var\n    seqLow = seqLow << 8 | rnds[9];\n    seqLow = seqLow << 5 | rnds[10] >>> 3;\n  }\n\n  // increment seq if within msecs window\n  if (msecs + 10000 > _msecs && seq === null) {\n    if (++seqLow > 0x7ffff) {\n      seqLow = 0;\n      if (++seqHigh > 0xfff) {\n        seqHigh = 0;\n\n        // increment internal _msecs. this allows us to continue incrementing\n        // while staying monotonic. Note, once we hit 10k milliseconds beyond system\n        // clock, we will reset breaking monotonicity (after (2^31)*10000 generations)\n        _msecs++;\n      }\n    }\n  } else {\n    // resetting; we have advanced more than\n    // 10k milliseconds beyond system clock\n    _msecs = msecs;\n  }\n  _seqHigh = seqHigh;\n  _seqLow = seqLow;\n\n  // [bytes 0-5] 48 bits of local timestamp\n  b[i++] = _msecs / 0x10000000000 & 0xff;\n  b[i++] = _msecs / 0x100000000 & 0xff;\n  b[i++] = _msecs / 0x1000000 & 0xff;\n  b[i++] = _msecs / 0x10000 & 0xff;\n  b[i++] = _msecs / 0x100 & 0xff;\n  b[i++] = _msecs & 0xff;\n\n  // [byte 6] - set 4 bits of version (7) with first 4 bits seq_hi\n  b[i++] = seqHigh >>> 4 & 0x0f | 0x70;\n\n  // [byte 7] remaining 8 bits of seq_hi\n  b[i++] = seqHigh & 0xff;\n\n  // [byte 8] - variant (2 bits), first 6 bits seq_low\n  b[i++] = seqLow >>> 13 & 0x3f | 0x80;\n\n  // [byte 9] 8 bits seq_low\n  b[i++] = seqLow >>> 5 & 0xff;\n\n  // [byte 10] remaining 5 bits seq_low, 3 bits random\n  b[i++] = seqLow << 3 & 0xff | rnds[10] & 0x07;\n\n  // [bytes 11-15] always random\n  b[i++] = rnds[11];\n  b[i++] = rnds[12];\n  b[i++] = rnds[13];\n  b[i++] = rnds[14];\n  b[i++] = rnds[15];\n  return buf || unsafeStringify(b);\n}\nexport default v7;","import REGEX from './regex.js';\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\nexport default validate;","import validate from './validate.js';\nfunction version(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n  return parseInt(uuid.slice(14, 15), 16);\n}\nexport default version;","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    Action,\n    Disposable,\n    MaybeArray,\n    RequestAction,\n    ResponseAction,\n    SetModelAction,\n    UpdateModelAction,\n    flatPush\n} from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport { ClientId } from '../di/service-identifiers';\nimport { GLSPServerError } from '../utils/glsp-server-error';\nimport { Logger } from '../utils/logger';\nimport { PromiseQueue } from '../utils/promise-queue';\nimport { ActionHandler } from './action-handler';\nimport { ActionHandlerRegistry } from './action-handler-registry';\nimport { ClientActionForwarder } from './client-action-handler';\n\nexport const ActionDispatcher = Symbol('ActionDispatcher');\n\n/**\n * The central component that process all {@link Action}s by dispatching them to their designated\n * handlers.\n */\nexport interface ActionDispatcher {\n    /**\n     * Processes the given action by dispatching it to all registered handlers.\n     *\n     * @param action The action that should be dispatched.\n     * @returns A promise indicating when the action processing is complete.\n     */\n    dispatch(action: Action): Promise<void>;\n\n    /**\n     * Processes all given actions by dispatching to the corresponding handlers.\n     *\n     * @param actions Actions to dispatch\n     * @returns A promise indicating that all actions have been processed.\n     */\n    dispatchAll(actions: Action[]): Promise<void>;\n    dispatchAll(...actions: Action[]): Promise<void>;\n\n    /**\n     * Processes all given actions, by dispatching them to the corresponding handlers, after the next model update.\n     * The given actions are queued until the next model update cycle has been completed i.e. an\n     * `UpdateModelAction` has been dispatched and processed by this action dispatcher.\n     *\n     * @param actions The actions that should be dispatched after the next model update\n     */\n    dispatchAfterNextUpdate(actions: Action[]): void;\n    dispatchAfterNextUpdate(...actions: Action[]): void;\n}\n\n@injectable()\nexport class DefaultActionDispatcher implements ActionDispatcher, Disposable {\n    @inject(ActionHandlerRegistry)\n    protected actionHandlerRegistry: ActionHandlerRegistry;\n\n    @inject(ClientActionForwarder)\n    protected clientActionForwarder: ClientActionForwarder;\n\n    @inject(Logger)\n    protected logger: Logger;\n\n    @inject(ClientId)\n    protected clientId: string;\n\n    protected actionQueue = new PromiseQueue();\n    protected postUpdateQueue: Action[] = [];\n\n    dispatch(action: Action): Promise<void> {\n        // Dont queue actions that are just delegated to the client\n        if (this.clientActionForwarder.shouldForwardToClient(action)) {\n            return this.doDispatch(action);\n        }\n        return this.actionQueue.enqueue(() => this.doDispatch(action));\n    }\n\n    protected async doDispatch(action: Action): Promise<void> {\n        this.logger.debug('Dispatch action:', action.kind);\n        const handledOnClient = this.clientActionForwarder.handle(action);\n\n        const actionHandlers = this.actionHandlerRegistry.get(action.kind);\n        if (!handledOnClient && actionHandlers.length === 0) {\n            throw new GLSPServerError(`No handler registered for action kind: ${action.kind}`);\n        }\n\n        const responses: Action[] = [];\n        for (const handler of actionHandlers) {\n            const response = await this.executeHandler(handler, action);\n            responses.push(...response);\n        }\n\n        if (this.postUpdateQueue.length > 0 && (UpdateModelAction.is(action) || SetModelAction.is(action))) {\n            responses.push(...this.postUpdateQueue);\n            this.postUpdateQueue = [];\n        }\n\n        await this.dispatchResponses(responses);\n    }\n\n    protected async executeHandler(handler: ActionHandler, request: Action): Promise<Action[]> {\n        const responseActions = await handler.execute(request);\n        return responseActions.map(action => respond(request, action));\n    }\n\n    protected dispatchResponses(actions: Action[]): Promise<void> {\n        if (actions.length === 0) {\n            return Promise.resolve();\n        }\n        const responseQueue = new PromiseQueue();\n        const responses = actions.map(action => responseQueue.enqueue(() => this.doDispatch(action)));\n        return Promise.all(responses).then(() => Promise.resolve());\n    }\n\n    dispatchAll(...actions: MaybeArray<Action>[]): Promise<void> {\n        if (actions.length === 0) {\n            return Promise.resolve();\n        }\n        const flat: Action[] = [];\n        flatPush(flat, actions);\n        return Promise.all(flat.map(action => this.dispatch(action))).then(() => Promise.resolve());\n    }\n\n    dispatchAfterNextUpdate(...actions: MaybeArray<Action>[]): void {\n        if (actions.length !== 0) {\n            flatPush(this.postUpdateQueue, actions);\n        }\n    }\n\n    dispose(): void {\n        this.actionQueue.clear();\n    }\n}\n\n/**\n * Transfers the {@link RequestAction.requestId id} from request to response if applicable.\n *\n * @param request  potential {@link RequestAction}\n * @param response potential {@link ResponseAction}\n * @returns given response action with id set if applicable\n */\nexport function respond(request: Action, response: Action): Action {\n    if (RequestAction.is(request) && ResponseAction.is(response)) {\n        (response as any).responseId = request.requestId;\n    }\n    return response;\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Args } from '@eclipse-glsp/protocol';\nimport { inject, injectable, optional } from 'inversify';\nimport { ClientSessionInitializer } from '../session/client-session-initializer';\nimport { MultiRegistry } from '../utils/registry';\nimport { ActionHandler, ActionHandlerConstructor, ActionHandlerFactory } from './action-handler';\n\n/**\n * An action handler registry keeps track of registered action handlers for a certain action.\n */\n@injectable()\nexport class ActionHandlerRegistry extends MultiRegistry<string, ActionHandler> {\n    registerHandler(handler: ActionHandler): void {\n        return handler.actionKinds.forEach(kind => this.register(kind, handler));\n    }\n\n    /**\n     * Retrieve all registered {@link ActionHandler}s that can handle the given action.\n     * The resulting list is ordered descending using {@link ActionHandler.getPriority}.\n     *\n     * @param action The action\n     * @returns A list of all registered handlers that can handle the given action.\n     */\n    override get(key: string): ActionHandler[] {\n        const result = super.get(key);\n        return result.sort((a, b) => a.priority ?? 0 - (b.priority ?? 0));\n    }\n}\n\n@injectable()\nexport class ActionHandlerRegistryInitializer implements ClientSessionInitializer {\n    @inject(ActionHandlerFactory)\n    protected factory: ActionHandlerFactory;\n\n    @inject(ActionHandlerConstructor)\n    @optional()\n    protected handlerConstructors: ActionHandlerConstructor[] = [];\n\n    @inject(ActionHandlerRegistry)\n    protected registry: ActionHandlerRegistry;\n\n    initialize(_args?: Args): void {\n        const handlers = this.handlerConstructors.map(constructor => this.factory(constructor));\n        handlers.forEach(handler => this.registry.registerHandler(handler));\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Action, MaybePromise } from '@eclipse-glsp/protocol';\nimport { interfaces } from 'inversify';\n\nexport const ActionHandler = Symbol('ActionHandler');\n\n/**\n * An action handler can execute certain {@link Action} types that are dispatched by the\n * {@link ActionDispatcher}. The action handler processes the action in the {@link ActionHandler.execute()}\n * method and returns a list of response actions to be dispatched as a result of processing the original action.\n * One action handler can handle multiple different action types, see {@link ActionHandler.actionKinds}.\n */\nexport interface ActionHandler {\n    /**\n     * Returns the list of action kinds that can be handled by this action handler.\n     *\n     * @returns A list of action kind strings.\n     */\n    actionKinds: string[];\n\n    /**\n     * Executes the action handler for the given {@link Action} and returns a list of response actions that should be\n     * dispatched as a result of processing the original action. This list can be empty, if no more actions need to be\n     * executed.\n     *\n     * @param action The action that should be processed.\n     * @returns A list of response actions that should be dispatched.\n     */\n    execute(action: Action, ...args: unknown[]): MaybePromise<Action[]>;\n\n    /**\n     * Returns the priority of this action handler. The priority is used to derive the execution order if multiple\n     * action handlers should execute the same {@link Action}. The default priority is `0` and the priority is sorted\n     * descending. This means handlers with a priority &gt; 0 are executed before handlers with a default priority and\n     * handlers with a priority &lt; 0 are executed afterwards.\n     *\n     * @returns the priority as integer.\n     */\n    priority?: number;\n}\n\nexport const ActionHandlerConstructor = Symbol('ActionHandlerConstructor');\n\nexport type ActionHandlerConstructor = interfaces.Newable<ActionHandler>;\n\nexport const ActionHandlerFactory = Symbol('ActionHandlerFactory');\n\nexport type ActionHandlerFactory = (constructor: ActionHandlerConstructor) => ActionHandler;\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Action, ActionMessage, GLSPClientProxy, ResponseAction } from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport { ClientActionKinds, ClientId } from '../di/service-identifiers';\nimport { ClientAction } from '../protocol/client-action';\n\n/**\n * Component responsible for forwarding actions that are (also) handled by the\n * client\n */\n@injectable()\nexport class ClientActionForwarder {\n    @inject(GLSPClientProxy)\n    protected glspClient: GLSPClientProxy;\n\n    @inject(ClientId)\n    protected readonly clientId: string;\n\n    constructor(@inject(ClientActionKinds) public actionKinds: Set<string>) {}\n\n    /**\n     * Processes the given action and checks wether it is a\n     * `clientAction` i.e. an action that should be forwarded to\n     * the client to be handled there. If the check is successful\n     * the action is wrapped in an {@link ActionMessage} and sent to the client.\n     *\n     * @param action The action to check and forward\n     * @return `true` if the action was forwarded to the client, `false` otherwise\n     */\n    handle(action: Action): boolean {\n        if (this.shouldForwardToClient(action)) {\n            const message: ActionMessage = { action, clientId: this.clientId };\n            this.glspClient.process(message);\n            return true;\n        }\n        return false;\n    }\n\n    shouldForwardToClient(action: Action): boolean {\n        if (ClientAction.is(action)) {\n            return false;\n        }\n        return this.actionKinds.has(action.kind) || ResponseAction.is(action);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { distinctAdd } from '@eclipse-glsp/protocol';\nimport { Container, ContainerModule, inject, injectable } from 'inversify';\nimport { createClientSessionModule } from '../di/client-session-module';\nimport { DiagramModules, InjectionContainer } from '../di/service-identifiers';\nimport { ClientSessionInitializer } from '../session/client-session-initializer';\nimport { ActionHandlerRegistry } from './action-handler-registry';\n\nexport const GlobalActionProvider = Symbol('GlobalActionProvider');\n\n/**\n * Provides a map of handled action kinds grouped by `diagramType`\n */\nexport interface GlobalActionProvider {\n    readonly actionKinds: Map<string, string[]>;\n}\n\n@injectable()\nexport class DefaultGlobalActionProvider implements GlobalActionProvider {\n    public readonly actionKinds: Map<string, string[]>;\n\n    constructor(\n        @inject(InjectionContainer) serverContainer: Container,\n        @inject(DiagramModules) diagramModules: Map<string, ContainerModule[]>\n    ) {\n        this.actionKinds = new Map();\n        diagramModules.forEach((modules, diagramType) => {\n            const container = this.createDiagramContainer(serverContainer, modules);\n            const initializers = container.getAll<ClientSessionInitializer>(ClientSessionInitializer);\n            initializers.forEach(service => service.initialize());\n            this.loadActionKinds(diagramType, container);\n            container.unbindAll();\n        });\n    }\n\n    createDiagramContainer(serverContainer: Container, modules: ContainerModule[]): Container {\n        const container = serverContainer.createChild();\n        const clientSessionModule = createClientSessionModule({\n            clientId: 'tempId',\n            // eslint-disable-next-line @typescript-eslint/no-empty-function\n            glspClient: { process: () => {} },\n            clientActionKinds: []\n        });\n        container.load(...modules, clientSessionModule);\n        return container;\n    }\n\n    loadActionKinds(diagramType: string, diagramContainer: Container): void {\n        const handlerRegistry = diagramContainer.get<ActionHandlerRegistry>(ActionHandlerRegistry);\n        const diagramServerActions = this.actionKinds.get(diagramType) ?? [];\n        handlerRegistry.getAll().forEach(handler => distinctAdd(diagramServerActions, ...handler.actionKinds));\n        this.actionKinds.set(diagramType, diagramServerActions);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { MaybePromise } from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport { Logger } from '../utils/logger';\nimport { Command } from './command';\n\nexport const CommandStack = Symbol('CommandStack');\n\n/**\n * A command stack keeps track of {@link Command commands} that have been executed.\n * Executed commands can be undone in the reverse order of their original execution.\n * Unless a new command has been executed after an undo operation, commands can be\n * redone in the original order of their execution.\n *\n */\nexport interface CommandStack {\n    /**\n     * Clears any redoable commands not yet redone, adds the command to the stack and then invokes {@link Command.execute}.\n     * @param command the command to execute.\n     */\n    execute(command: Command): MaybePromise<void>;\n\n    /**\n     * Removes the topmost (i.e. last executed) command from the stack and invokes {@link Command.undo}.\n     */\n    undo(): MaybePromise<void>;\n\n    /**\n     * Returns `true` if the top command on the stack can be undone.\n     */\n    canUndo(): boolean;\n\n    /**\n     * Re-adds the last undo command on top of the stack and invokes {@link Command.redo}\n     */\n    redo(): MaybePromise<void>;\n\n    /**\n     * Returns `true` if there are  redoable commands in the stack.\n     */\n    canRedo(): boolean;\n\n    /**\n     * Called after a save has been successfully performed.\n     */\n    saveIsDone(): void;\n\n    /**\n     * Indicates wether the command stack has unsaved changes.\n     */\n    readonly isDirty: boolean;\n\n    /**\n     * Disposes all the commands in the stack.\n     */\n    flush(): void;\n}\n\n@injectable()\nexport class DefaultCommandStack implements CommandStack {\n    @inject(Logger)\n    protected logger: Logger;\n\n    protected commands: Command[] = [];\n\n    /**\n     * The current position within the command list from which the next execute, undo, or redo, will be performed.\n     */\n    protected top = -1;\n\n    /**\n     * The current position within the command list when {@link DefaultCommandStack.saveIsDone} is called.\n     */\n    protected saveIndex = -1;\n\n    async execute(command: Command): Promise<void> {\n        try {\n            await command.execute();\n        } catch (error) {\n            this.handleError(error);\n        }\n        // Clear the command list past the top (i.e. the old redo list)\n        this.commands = this.commands.slice(0, this.top + 1);\n        this.commands.push(command);\n        ++this.top;\n\n        // if the saveIndex points to the old redo list we can never reach a state again\n        // where save is not necessary. => ensure that `isDirty` always returns true\n        if (this.saveIndex >= this.top) {\n            this.saveIndex = -2;\n        }\n    }\n\n    async undo(): Promise<void> {\n        if (this.canUndo()) {\n            const command = this.commands[this.top--];\n            try {\n                await command.undo();\n            } catch (error) {\n                this.handleError(error);\n            }\n        }\n    }\n\n    canUndo(): boolean {\n        return this.top !== -1 //\n            ? Command.canUndo(this.commands[this.top])\n            : false;\n    }\n\n    async redo(): Promise<void> {\n        if (this.canRedo()) {\n            const command = this.commands[++this.top];\n            try {\n                await command.redo();\n            } catch (error) {\n                this.handleError(error);\n            }\n        }\n    }\n\n    canRedo(): boolean {\n        return this.top < this.commands.length - 1;\n    }\n\n    get isDirty(): boolean {\n        return this.saveIndex !== this.top;\n    }\n\n    saveIsDone(): void {\n        this.saveIndex = this.top;\n    }\n\n    flush(): void {\n        this.commands = [];\n        this.top = -1;\n        this.saveIndex = -1;\n    }\n\n    protected handleError(error: any): never {\n        // if an error occurred during the command execution the stack might be in an erroneous state => we have to flush the command stack\n        this.flush();\n        this.logger.error('An error occurred during command execution. CommandStack will be flushed!', error);\n        throw error;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { flatPush, MaybeArray, MaybePromise } from '@eclipse-glsp/protocol';\n\n/**\n * A command implements a specific modification of the source model, which can be applied by invoking `execute()`.\n * Commands may also provide implementations to `undo()` and `redo()` the effect they had.\n * To maintain an order in which commands can be undone and redone, they are managed in the context of a {@link CommandStack}.\n *\n * Each command is self contained and stores all the information it needs to execute, undo or redo itself.\n *\n * In theory commands can be used to execute arbitrary activities and not only modify the source model.\n * However, it is mostly used to record and manage changes made to the source model via GLSP operations.\n */\nexport interface Command {\n    /**\n     * Performs the command activity required for the effect (e.g. source model change).\n     */\n    execute(): MaybePromise<void>;\n\n    /**\n     * Performs the command activity required to `undo` the effects of a preceding `execute` (or `redo`).\n     * The effect, if any, of calling `undo` before `execute` or `redo` have been called, is undefined.\n     */\n    undo(): MaybePromise<void>;\n\n    /**\n     * Performs the command activity required to `redo` the effect after undoing the effect.\n     * The effect, if any, of calling `redo` before `undo` is called is undefined.\n     */\n    redo(): MaybePromise<void>;\n\n    /**\n     * Returns whether the command can be undone.\n     * This function is optional. If not implemented, it is assumed that the command can be undone.\n     * @returns whether the command can be undone\n     */\n    canUndo?(): boolean;\n}\n\nexport namespace Command {\n    export function canUndo(command: Command): boolean {\n        return command.canUndo?.() ?? true;\n    }\n}\n\n/**\n * A command that comprises a sequence of subcommands.\n */\nexport class CompoundCommand implements Command {\n    protected readonly commands: Command[];\n\n    constructor(commands: Command[]);\n    constructor(...commands: Command[]);\n    constructor(...commands: MaybeArray<Command>[]) {\n        this.commands = [];\n        flatPush(this.commands, commands);\n    }\n\n    async execute(): Promise<void> {\n        const alreadyExecuted: Command[] = [];\n\n        try {\n            for (const command of this.commands) {\n                await command.execute();\n                alreadyExecuted.unshift(command);\n            }\n        } catch (err) {\n            for (const command of alreadyExecuted) {\n                if (Command.canUndo(command)) {\n                    await command.undo();\n                } else {\n                    break;\n                }\n            }\n            throw err;\n        }\n    }\n\n    async undo(): Promise<void> {\n        const alreadyUndone: Command[] = [];\n        try {\n            for (const command of [...this.commands].reverse()) {\n                await command.undo();\n                alreadyUndone.unshift(command);\n            }\n        } catch (err) {\n            for (const command of alreadyUndone) {\n                await command.redo();\n            }\n            throw err;\n        }\n    }\n\n    async redo(): Promise<void> {\n        const alreadyRedone: Command[] = [];\n\n        try {\n            for (const command of this.commands) {\n                await command.redo();\n                alreadyRedone.unshift(command);\n            }\n        } catch (err) {\n            for (const command of alreadyRedone) {\n                await command.undo();\n            }\n            throw err;\n        }\n    }\n\n    canUndo(): boolean {\n        return this.commands.every(Command.canUndo);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023-2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { AnyObject, GModelElementSchema, GModelRootSchema, MaybePromise } from '@eclipse-glsp/protocol';\nimport * as jsonPatch from 'fast-json-patch';\nimport { GModelSerializer } from '../features/model/gmodel-serializer';\nimport { ModelState } from '../features/model/model-state';\nimport { Command } from './command';\n/**\n * An abstract implementation for {@link Command} that should records changes made to a JSON object during execution.\n * These changes are recorded in the form of json patches.\n */\nexport abstract class AbstractRecordingCommand<JsonObject extends AnyObject> implements Command {\n    protected undoPatch?: jsonPatch.Operation[];\n    protected redoPatch?: jsonPatch.Operation[];\n\n    async execute(): Promise<void> {\n        const beforeState = this.deepClone(await this.getJsonObject());\n        await this.doExecute();\n        const afterState = await this.getJsonObject();\n        this.undoPatch = jsonPatch.compare(afterState, beforeState);\n        this.redoPatch = jsonPatch.compare(beforeState, afterState);\n        await this.postChange?.(afterState);\n    }\n\n    /**\n     * Retrieves the current state of the JSON object. Is called right before and\n     * right after {@link AbstractRecordingCommand.doExecute} to derive the undo & redo patches.\n     * @returns The current state of the JSON object\n     */\n    protected abstract getJsonObject(): MaybePromise<JsonObject>;\n\n    /**\n     * The actual execution i.e. series of changes applied to the JSOn object that should be captured.\n     */\n    protected abstract doExecute(): MaybePromise<void>;\n\n    protected applyPatch(object: JsonObject, patch: jsonPatch.Operation[]): jsonPatch.PatchResult<JsonObject> {\n        return jsonPatch.applyPatch(object, patch, false, true);\n    }\n\n    /**\n     * Captures the original state of the JSON object before executing the command routine.\n     * This implementation cannot clone circular structures as it relies on `JSON.stringify`.\n     * @param object The object that should be cloned\n     * @returns A deep clone of the given object\n     */\n    protected deepClone(object: JsonObject): JsonObject {\n        return jsonPatch.deepClone(object);\n    }\n\n    async undo(): Promise<void> {\n        if (this.undoPatch) {\n            const result = this.applyPatch(await this.getJsonObject(), this.undoPatch);\n            await this.postChange?.(result.newDocument);\n        }\n    }\n\n    async redo(): Promise<void> {\n        if (this.redoPatch) {\n            const result = this.applyPatch(await this.getJsonObject(), this.redoPatch);\n            await this.postChange?.(result.newDocument);\n        }\n    }\n\n    canUndo(): boolean {\n        return !!this.undoPatch && !!this.redoPatch;\n    }\n\n    /**\n     * Optional hook that (if implemented) will be\n     * executed after every command-driven action that changed\n     * the underlying model i.e. command execute, undo and redo.\n     */\n    protected postChange?(newModel: JsonObject): MaybePromise<void>;\n}\n\n/**\n * Simple base implementation of {@link AbstractRecordingCommand} that allows recording of changes made\n * to the `GModelRoot` ({@link ModelState.root}) during the given `doExecute` function\n */\nexport class GModelRecordingCommand extends AbstractRecordingCommand<GModelRootSchema> {\n    constructor(\n        protected modelState: ModelState,\n        protected serializer: GModelSerializer,\n        protected doExecute: () => MaybePromise<void>\n    ) {\n        super();\n    }\n\n    protected getJsonObject(): MaybePromise<GModelRootSchema> {\n        return this.serializer.createSchema(this.modelState.root);\n    }\n\n    protected override postChange(newModel: GModelElementSchema): MaybePromise<void> {\n        const newRoot = this.serializer.createRoot(newModel);\n        this.modelState.updateRoot(newRoot);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Action, MaybePromise, RedoAction, UndoAction } from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport { ActionHandler } from '../actions/action-handler';\nimport { ModelSubmissionHandler } from '../features/model/model-submission-handler';\nimport { CommandStack } from './command-stack';\n\n@injectable()\nexport class UndoRedoActionHandler implements ActionHandler {\n    @inject(CommandStack)\n    protected commandStack: CommandStack;\n\n    @inject(ModelSubmissionHandler)\n    protected modelSubmissionHandler: ModelSubmissionHandler;\n\n    readonly actionKinds = [UndoAction.KIND, RedoAction.KIND];\n\n    execute(action: Action): MaybePromise<Action[]> {\n        if (UndoAction.is(action)) {\n            return this.undo();\n        } else if (RedoAction.is(action)) {\n            return this.redo();\n        }\n        return [];\n    }\n\n    protected async undo(): Promise<Action[]> {\n        if (this.commandStack.canUndo()) {\n            await this.commandStack.undo();\n            return this.modelSubmissionHandler.submitModel('undo');\n        }\n        return [];\n    }\n\n    protected async redo(): Promise<Action[]> {\n        if (this.commandStack.canRedo()) {\n            await this.commandStack.redo();\n            return this.modelSubmissionHandler.submitModel('redo');\n        }\n        return [];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { AnyObject, Constructor } from '@eclipse-glsp/protocol';\nimport { interfaces } from 'inversify';\n/**\n * Collection of utility types and functions to enable flexible service binding with dedicated\n * binding methods in the GLSP DI modules\n */\n\n/**\n * Binds the given service identifier to the given {@link BindingTarget}. If the service identifier is\n * a {@link Constructor} and the target is the same constructor the service identifier will be bound to itself.\n * @param bind The inversify bind function (typically provided from a GLSP DI module)\n * @param serviceIdentifier The service identifier that should be bound.\n * @param target The binding target.\n * @returns The corresponding {@link interfaces.BindingInWhenOnSyntax}.\n */\nexport function applyBindingTarget<T>(\n    context: { bind: interfaces.Bind; isBound: interfaces.IsBound },\n    serviceIdentifier: interfaces.ServiceIdentifier<T>,\n    target: BindingTarget<T>\n): interfaces.BindingInWhenOnSyntax<T> {\n    if (isConstructor(target)) {\n        // If service identifier and target are the same constructor => self binding\n        return serviceIdentifier === target //\n            ? context.bind(serviceIdentifier).toSelf()\n            : context.bind(serviceIdentifier).to(target);\n    } else if (ServiceTarget.is(target)) {\n        if (!context.isBound(target.service)) {\n            const autoBind = target.autoBind === undefined || target.autoBind === true;\n            if (autoBind && isConstructor(target.service)) {\n                context.bind(target.service).toSelf().inSingletonScope();\n            } else {\n                throw new Error(`The target service ${target.service.toString()} is not bound!. Cannot apply target binding`);\n            }\n        }\n        context.bind(serviceIdentifier).toService(target.service);\n        return NoOPSyntax.serviceSyntax(serviceIdentifier, target);\n    } else if (ConstantValueTarget.is(target)) {\n        const whenOnSyntax = context.bind(serviceIdentifier).toConstantValue(target.constantValue);\n        return NoOPSyntax.constantValueSyntax(serviceIdentifier, whenOnSyntax);\n    } else {\n        return context.bind(serviceIdentifier).toDynamicValue(_context => target.dynamicValue(_context));\n    }\n}\n\nexport function applyOptionalBindingTarget<T>(\n    context: { bind: interfaces.Bind; isBound: interfaces.IsBound },\n    serviceIdentifier: interfaces.ServiceIdentifier<T>,\n    target?: BindingTarget<T>\n): interfaces.BindingInWhenOnSyntax<T> | undefined {\n    if (target) {\n        return applyBindingTarget(context, serviceIdentifier, target);\n    }\n    return undefined;\n}\n\n/**\n * The different types of binding targets that can be returned by a dedicated binding method.\n */\nexport type BindingTarget<T> = Constructor<T> | DynamicValueTarget<T> | ConstantValueTarget<T> | ServiceTarget<T>;\n\n/**\n * Binding target for service identifiers that should be bound `toConstantValue`.\n */\nexport interface ConstantValueTarget<T> {\n    constantValue: T;\n}\n\nexport namespace ConstantValueTarget {\n    export function is(object: any): object is ConstantValueTarget<unknown> {\n        return AnyObject.is(object) && 'constantValue' in object;\n    }\n}\n\n/**\n * Binding target for service identifiers that should be bound `toService`.\n */\nexport interface ServiceTarget<T> {\n    service: interfaces.ServiceIdentifier<T>;\n    /**\n     * Boolean flag to configure how to handle unbound service identifiers.\n     * If `undefined` or `true` the {@link applyBindingTarget} function will attempt unbound constructor service identifiers\n     * to `self().inSingletonScope()`.\n     */\n    autoBind?: boolean;\n}\n\nexport namespace ServiceTarget {\n    export function is(object: any): object is ServiceTarget<unknown> {\n        return AnyObject.is(object) && 'service' in object;\n    }\n}\n\n/**\n * Binding target for service identifiers that should be bound `toDynamicValue`.\n */\nexport interface DynamicValueTarget<T> {\n    dynamicValue(context: interfaces.Context): T;\n}\n\n/**\n * No-op binding syntax definitions for `constantValue` and `toService` bindings.\n * Using this no-op syntaxes allows the {@link applyBindingTarget} function to return a {@link interfaces.BindingInWhenOnSyntax}\n * independently of the actual {@link BindingTarget}.\n */\nnamespace NoOPSyntax {\n    export function constantValueSyntax(\n        serviceIdentifier: interfaces.ServiceIdentifier<any>,\n        syntax: interfaces.BindingWhenOnSyntax<any>\n    ): interfaces.BindingInWhenOnSyntax<any> {\n        const noOpReturn = (scope: string): interfaces.BindingWhenOnSyntax<any> => {\n            console.warn(\n                `${serviceIdentifier.toString()} has been bound to 'constantValue'. Binding in ${scope} scope has no effect.` +\n                    'Constant value bindings are effectively Singleton bindings.'\n            );\n            return syntax;\n        };\n        return {\n            ...syntax,\n            inSingletonScope: () => noOpReturn('Singleton'),\n            inRequestScope: () => noOpReturn('Request'),\n            inTransientScope: () => noOpReturn('Transient')\n        };\n    }\n\n    export function serviceSyntax(\n        serviceIdentifier: interfaces.ServiceIdentifier<any>,\n        target: BindingTarget<any>\n    ): interfaces.BindingInWhenOnSyntax<any> {\n        const noOpReturn = (): interfaces.BindingInWhenOnSyntax<any> => {\n            const errorMsg =\n                `${serviceIdentifier.toString()} has been bound to 'service'.` +\n                \"Using 'in','when' or 'on' bindings after\" +\n                \"a 'toService' binding is not possible.\";\n            const error = new Error(errorMsg);\n            error.name = 'NoOpInvocation';\n            throw error;\n        };\n        const syntax = {\n            onActivation: noOpReturn,\n            onDeactivation: noOpReturn,\n            when: noOpReturn,\n            whenAnyAncestorIs: noOpReturn,\n            whenAnyAncestorMatches: noOpReturn,\n            whenAnyAncestorNamed: noOpReturn,\n            whenAnyAncestorTagged: noOpReturn,\n            whenInjectedInto: noOpReturn,\n            whenNoAncestorIs: noOpReturn,\n            whenNoAncestorMatches: noOpReturn,\n            whenNoAncestorNamed: noOpReturn,\n            whenNoAncestorTagged: noOpReturn,\n            whenParentNamed: noOpReturn,\n            whenParentTagged: noOpReturn,\n            whenTargetIsDefault: noOpReturn,\n            whenTargetNamed: noOpReturn,\n            whenTargetTagged: noOpReturn,\n            inRequestScope: noOpReturn,\n            inSingletonScope: () => {\n                if (ServiceTarget.is(target)) {\n                    // toService bindings are essentially singleTons.\n                    // We don't throw an error in this case.\n                    return syntax;\n                }\n                return noOpReturn();\n            },\n            inTransientScope: noOpReturn\n        };\n\n        return syntax;\n    }\n}\n\nexport function isConstructor(object: any): object is Constructor<unknown> {\n    return typeof object === 'function' && !!object.prototype && !!(object.prototype as any).constructor;\n}\n","/********************************************************************************\n * Copyright (c) 2022-2024 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { GLSPClientProxy } from '@eclipse-glsp/protocol';\nimport { bindOrRebind } from '@eclipse-glsp/protocol/lib/di';\nimport { ContainerModule } from 'inversify';\nimport { ClientActionKinds, ClientId } from './service-identifiers';\n\nexport interface ClientSessionModuleOptions {\n    clientId: string;\n    glspClient: GLSPClientProxy;\n    clientActionKinds: string[];\n}\n\n/**\n * Creates the DI module that binds client session specific configuration\n */\nexport function createClientSessionModule(options: ClientSessionModuleOptions): ContainerModule {\n    return new ContainerModule((bind, unbind, isBound, rebind) => {\n        const context = { bind, unbind, isBound, rebind };\n        bindOrRebind(context, ClientId).toConstantValue(options.clientId);\n        bind(GLSPClientProxy).toConstantValue(options.glspClient);\n        bind(ClientActionKinds).toConstantValue(new Set(options.clientActionKinds));\n    });\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { interfaces } from 'inversify';\nimport { ActionDispatcher, DefaultActionDispatcher } from '../actions/action-dispatcher';\nimport { ActionHandlerConstructor, ActionHandlerFactory } from '../actions/action-handler';\nimport { ActionHandlerRegistry, ActionHandlerRegistryInitializer } from '../actions/action-handler-registry';\nimport { ClientActionForwarder } from '../actions/client-action-handler';\nimport { CommandStack, DefaultCommandStack } from '../command/command-stack';\nimport { UndoRedoActionHandler } from '../command/undo-redo-action-handler';\nimport { DiagramConfiguration } from '../diagram/diagram-configuration';\nimport { CommandPaletteActionProvider } from '../features/contextactions/command-palette-action-provider';\nimport { ContextActionsProvider } from '../features/contextactions/context-actions-provider';\nimport { ContextActionsProviderRegistry } from '../features/contextactions/context-actions-provider-registry';\nimport { ContextMenuItemProvider } from '../features/contextactions/context-menu-item-provider';\nimport { RequestContextActionsHandler } from '../features/contextactions/request-context-actions-handler';\nimport { DefaultToolPaletteItemProvider, ToolPaletteItemProvider } from '../features/contextactions/tool-palette-item-provider';\nimport { ContextEditValidator } from '../features/directediting/context-edit-validator';\nimport {\n    ContextEditValidatorRegistry,\n    DefaultContextEditValidatorRegistry\n} from '../features/directediting/context-edit-validator-registry';\nimport { LabelEditValidator } from '../features/directediting/label-edit-validator';\nimport { RequestEditValidationHandler } from '../features/directediting/request-edit-validation-handler';\nimport { ComputedBoundsActionHandler } from '../features/layout/computed-bounds-action-handler';\nimport { LayoutEngine } from '../features/layout/layout-engine';\nimport { LayoutOperationHandler } from '../features/layout/layout-operation-handler';\nimport { GModelFactory } from '../features/model/gmodel-factory';\nimport { GModelIndex } from '../features/model/gmodel-index';\nimport { DefaultGModelSerializer, GModelSerializer } from '../features/model/gmodel-serializer';\nimport { ModelState } from '../features/model/model-state';\nimport { ModelSubmissionHandler } from '../features/model/model-submission-handler';\nimport { RequestModelActionHandler } from '../features/model/request-model-action-handler';\nimport { SaveModelActionHandler } from '../features/model/save-model-action-handler';\nimport { SourceModelStorage } from '../features/model/source-model-storage';\nimport { NavigationTargetProvider } from '../features/navigation/navigation-target-provider';\nimport {\n    DefaultNavigationTargetProviderRegistry,\n    NavigationTargetProviderRegistry\n} from '../features/navigation/navigation-target-provider-registry';\nimport { NavigationTargetResolver } from '../features/navigation/navigation-target-resolver';\nimport { RequestNavigationTargetsActionHandler } from '../features/navigation/request-navigation-targets-action-handler';\nimport { ResolveNavigationTargetsActionHandler } from '../features/navigation/resolve-navigation-targets-action-handler';\nimport { PopupModelFactory } from '../features/popup/popup-model-factory';\nimport { RequestPopupModelActionHandler } from '../features/popup/request-popup-model-action-handler';\nimport { DefaultProgressService, ProgressService } from '../features/progress/progress-service';\nimport { EdgeCreationChecker } from '../features/type-hints/edge-creation-checker';\nimport { RequestCheckEdgeActionHandler } from '../features/type-hints/request-check-edge-action-handler';\nimport { RequestTypeHintsActionHandler } from '../features/type-hints/request-type-hints-action-handler';\nimport { ModelValidator } from '../features/validation/model-validator';\nimport { RequestMarkersHandler } from '../features/validation/request-markers-handler';\nimport { CompoundOperationHandler } from '../operations/compound-operation-handler';\nimport { OperationActionHandler } from '../operations/operation-action-handler';\nimport { OperationHandlerConstructor, OperationHandlerFactory } from '../operations/operation-handler';\nimport { OperationHandlerRegistry, OperationHandlerRegistryInitializer } from '../operations/operation-handler-registry';\nimport { ClientSessionInitializer } from '../session/client-session-initializer';\nimport { BindingTarget, applyBindingTarget, applyOptionalBindingTarget } from './binding-target';\nimport { GLSPModule } from './glsp-module';\nimport { InstanceMultiBinding, MultiBinding } from './multi-binding';\nimport {\n    ClientId,\n    ContextActionsProviders,\n    ContextEditValidators,\n    DiagramType,\n    NavigationTargetProviders,\n    Operations\n} from './service-identifiers';\n\n/**\n * The diagram module is the central configuration artifact for configuring a client session specific injector. For each\n * session that is initialized by a {@link GLSPServer} a new client session injector is created. The diagram module\n * provides the base bindings necessary to provide diagram implementation (i.e. diagram language). In addition to the\n * diagram specific bindings, session specific bindings like the {@link ModelState} are configured\n *\n * Client session injectors are child injectors of a server injector and therefore inherit the bindings from\n * {@link ServerModule}.\n *\n * The following bindings are provided:\n * - {@link DiagramType}\n * - {@link ClientId}\n * - {@link DiagramConfiguration}\n * - {@link GModelSerializer}\n * - {@link ModelState}\n * - {@link GModelIndex}\n * - {@link SourceModelStorage}\n * - {@link GModelFactory}\n * - {@link ModelSubmissionHandler}\n * - {@link ModelValidator} as optional binding\n * - {@link LabelEditValidator} as optional binding\n * - {@link ToolPaletteItemProvider}as optional binding\n * - {@link CommandPaletteActionProvider}as optional binding\n * - {@link ContextMenuItemProvider} as optional binding\n * - {@link ContextActionsProviders} as {@link ClassMultiBinding<ContextActionsProvider>} (empty)\n * - {@link ContextActionsProviderRegistry}\n * - {@link ActionDispatcher}\n * - {@link ProgressService}\n * - {@link ClientActionKinds} as {@link InstanceMultiBinding<string>}\n * - {@link ActionHandler} as {@link InstanceMultiBinding<ActionHandlerConstructor>}\n * - {@link ActionHandlerFactory}\n * - {@link ActionHandlerRegistry}\n * - {@link OperationHandler} as {@link InstanceMultiBinding<OperationHandlerConstructor>}\n * - {@link OperationHandlerFactory}\n * - {@link OperationHandlerRegistry}\n * - {@link Operations}\n * - {@link CommandStack}\n * - {@link NavigationTargetResolver} as optional binding\n *   {@link NavigationTargetProvider} as {@link ClassMultiBinding<NavigationTargetProvider>} (empty)\n * - {@link NavigationTargetProviderRegistry}\n * - {@link ContextEditValidatorRegistry}\n * - {@link ContextEditValidators} as {@link ClassMultiBinding<ContextActionsProvider>} (empty)\n * - {@link ClientSessionInitializer} as {@link ClassMultiBinding<ClientSessionInitializer>}\n * - {@link PopupModelFactory}  as optional binding\n * - {@link LayoutEngine}  as optional binding\n * - {@link EdgeCreationChecker}  as optional binding\n */\n\nexport abstract class DiagramModule extends GLSPModule {\n    static readonly FALLBACK_CLIENT_ID = 'FallbackClientId';\n    abstract readonly diagramType: string;\n\n    protected configure(bind: interfaces.Bind, unbind: interfaces.Unbind, isBound: interfaces.IsBound, rebind: interfaces.Rebind): void {\n        const context = { bind, isBound };\n        // Configurations\n        applyBindingTarget(context, DiagramType, this.bindDiagramType());\n        applyBindingTarget(context, ClientId, this.bindClientId());\n        applyBindingTarget(context, DiagramConfiguration, this.bindDiagramConfiguration()).inSingletonScope();\n        applyBindingTarget(context, ClientActionForwarder, this.bindClientActionForwarder()).inSingletonScope();\n\n        // Model-related bindings\n        applyBindingTarget(context, GModelSerializer, this.bindGModelSerializer()).inSingletonScope();\n        applyBindingTarget(context, ModelState, this.bindModelState()).inSingletonScope();\n        applyBindingTarget(context, GModelIndex, this.bindGModelIndex()).inSingletonScope();\n        applyBindingTarget(context, SourceModelStorage, this.bindSourceModelStorage()).inSingletonScope();\n        applyBindingTarget(context, GModelFactory, this.bindGModelFactory());\n        applyBindingTarget(context, ModelSubmissionHandler, this.bindModelSubmissionHandler()).inSingletonScope();\n\n        // Model Validation\n        applyOptionalBindingTarget(context, ModelValidator, this.bindModelValidator());\n        applyOptionalBindingTarget(context, LabelEditValidator, this.bindLabelEditValidator());\n\n        // Context action providers\n        applyOptionalBindingTarget(context, ToolPaletteItemProvider, this.bindToolPaletteItemProvider());\n        applyOptionalBindingTarget(context, CommandPaletteActionProvider, this.bindCommandPaletteActionProvider());\n        applyOptionalBindingTarget(context, ContextMenuItemProvider, this.bindContextMenuItemProvider());\n        this.configureMultiBinding(new MultiBinding<ContextActionsProvider>(ContextActionsProviders), binding =>\n            this.configureContextActionProviders(binding)\n        );\n        applyBindingTarget(context, ContextActionsProviderRegistry, this.bindContextActionsProviderRegistry()).inSingletonScope();\n\n        // Action & operation related bindings\n        applyBindingTarget(context, ActionDispatcher, this.bindActionDispatcher()).inSingletonScope();\n        this.configureMultiBinding(new InstanceMultiBinding<ActionHandlerConstructor>(ActionHandlerConstructor), binding =>\n            this.configureActionHandlers(binding)\n        );\n        applyBindingTarget(context, ActionHandlerFactory, this.bindActionHandlerFactory());\n        applyBindingTarget(context, ActionHandlerRegistry, this.bindActionHandlerRegistry()).inSingletonScope();\n        this.configureMultiBinding(new InstanceMultiBinding<OperationHandlerConstructor>(OperationHandlerConstructor), binding =>\n            this.configureOperationHandlers(binding)\n        );\n        applyBindingTarget(context, OperationHandlerRegistry, this.bindOperationHandlerRegistry()).inSingletonScope();\n        applyBindingTarget(context, OperationHandlerFactory, this.bindOperationHandlerFactory());\n        applyBindingTarget(context, Operations, this.bindOperations()).inSingletonScope();\n        applyBindingTarget(context, CommandStack, this.bindCommandStack()).inSingletonScope();\n\n        // Navigation\n        applyOptionalBindingTarget(context, NavigationTargetResolver, this.bindNavigationTargetResolver())?.inSingletonScope();\n        this.configureMultiBinding(new MultiBinding<NavigationTargetProvider>(NavigationTargetProviders), binding =>\n            this.configureNavigationTargetProviders(binding)\n        );\n        applyBindingTarget(context, NavigationTargetProviderRegistry, this.bindNavigationTargetProviderRegistry()).inSingletonScope();\n\n        // Context edit\n        applyBindingTarget(context, ContextEditValidatorRegistry, this.bindContextEditValidatorRegistry()).inSingletonScope();\n        this.configureMultiBinding(new MultiBinding<ContextEditValidator>(ContextEditValidators), binding =>\n            this.configureContextEditValidators(binding)\n        );\n\n        // Misc\n        this.configureMultiBinding(new MultiBinding<ClientSessionInitializer>(ClientSessionInitializer), binding =>\n            this.configureClientSessionInitializers(binding)\n        );\n        applyBindingTarget(context, ProgressService, this.bindProgressService()).inSingletonScope();\n        applyOptionalBindingTarget(context, PopupModelFactory, this.bindPopupModelFactory())?.inSingletonScope();\n        applyOptionalBindingTarget(context, LayoutEngine, this.bindLayoutEngine())?.inSingletonScope();\n        applyOptionalBindingTarget(context, EdgeCreationChecker, this.bindEdgeCreationChecker())?.inSingletonScope();\n    }\n\n    configureClientSessionInitializers(binding: MultiBinding<ClientSessionInitializer>): void {\n        binding.add(ActionHandlerRegistryInitializer);\n        binding.add(OperationHandlerRegistryInitializer);\n    }\n\n    protected configureActionHandlers(binding: InstanceMultiBinding<ActionHandlerConstructor>): void {\n        binding.add(RequestModelActionHandler);\n        binding.add(RequestContextActionsHandler);\n        binding.add(RequestTypeHintsActionHandler);\n        binding.add(OperationActionHandler);\n        binding.add(RequestCheckEdgeActionHandler);\n        binding.add(RequestMarkersHandler);\n        binding.add(RequestPopupModelActionHandler);\n        binding.add(RequestEditValidationHandler);\n        binding.add(RequestNavigationTargetsActionHandler);\n        binding.add(ResolveNavigationTargetsActionHandler);\n        binding.add(SaveModelActionHandler);\n        binding.add(UndoRedoActionHandler);\n        binding.add(ComputedBoundsActionHandler);\n    }\n\n    protected bindDiagramType(): BindingTarget<string> {\n        return { constantValue: this.diagramType };\n    }\n\n    protected bindClientId(): BindingTarget<string> {\n        return { constantValue: DiagramModule.FALLBACK_CLIENT_ID };\n    }\n\n    protected bindGModelSerializer(): BindingTarget<GModelSerializer> {\n        return DefaultGModelSerializer;\n    }\n\n    protected bindClientActionForwarder(): BindingTarget<ClientActionForwarder> {\n        return ClientActionForwarder;\n    }\n\n    protected bindGModelIndex(): BindingTarget<GModelIndex> {\n        return GModelIndex;\n    }\n\n    protected bindActionDispatcher(): BindingTarget<ActionDispatcher> {\n        return DefaultActionDispatcher;\n    }\n\n    protected bindActionHandlerRegistry(): BindingTarget<ActionHandlerRegistry> {\n        return ActionHandlerRegistry;\n    }\n\n    protected bindOperationHandlerRegistry(): BindingTarget<OperationHandlerRegistry> {\n        return OperationHandlerRegistry;\n    }\n\n    protected bindModelSubmissionHandler(): BindingTarget<ModelSubmissionHandler> {\n        return ModelSubmissionHandler;\n    }\n\n    protected bindNavigationTargetProviderRegistry(): BindingTarget<NavigationTargetProviderRegistry> {\n        return DefaultNavigationTargetProviderRegistry;\n    }\n\n    protected bindContextEditValidatorRegistry(): BindingTarget<ContextEditValidatorRegistry> {\n        return DefaultContextEditValidatorRegistry;\n    }\n\n    protected bindActionHandlerFactory(): BindingTarget<ActionHandlerFactory> {\n        return { dynamicValue: ctx => constructor => ctx.container.resolve(constructor) };\n    }\n\n    protected bindOperationHandlerFactory(): BindingTarget<OperationHandlerFactory> {\n        return { dynamicValue: ctx => constructor => ctx.container.resolve(constructor) };\n    }\n\n    protected bindOperations(): BindingTarget<string[]> {\n        return {\n            dynamicValue: context =>\n                context.container\n                    .get<OperationHandlerConstructor[]>(OperationHandlerConstructor)\n                    .map(constructor => new constructor().operationType)\n        };\n    }\n\n    protected bindCommandStack(): BindingTarget<CommandStack> {\n        return DefaultCommandStack;\n    }\n\n    protected configureOperationHandlers(binding: InstanceMultiBinding<OperationHandlerConstructor>): void {\n        binding.add(CompoundOperationHandler);\n        binding.add(LayoutOperationHandler);\n    }\n\n    protected bindProgressService(): BindingTarget<ProgressService> {\n        return DefaultProgressService;\n    }\n\n    protected configureContextActionProviders(binding: MultiBinding<ContextActionsProvider>): void {\n        // empty as default\n    }\n\n    protected configureContextEditValidators(binding: MultiBinding<ContextEditValidator>): void {\n        // empty as default\n    }\n\n    protected configureNavigationTargetProviders(binding: MultiBinding<NavigationTargetProvider>): void {\n        // empty as default\n    }\n\n    protected bindContextActionsProviderRegistry(): BindingTarget<ContextActionsProviderRegistry> {\n        return ContextActionsProviderRegistry;\n    }\n\n    // Required abstract bindings\n\n    protected abstract bindSourceModelStorage(): BindingTarget<SourceModelStorage>;\n\n    /**\n     * Returns the {@link BindingTarget} for the {@link ModelState} interface.\n     * Typically a {@link ServiceTarget} is returned as this ensures that both\n     * `@inject(ModelState)` and `@inject(MyCustomModelState`) can be used and resolve\n     * to the same instance.\n     *\n     * Example:\n     * ```ts\n     *  protected override bindModelState():BindingTarget<ModelState> {\n     *     return { service: MyCustomModelState};\n     *  }\n     *```\n     */\n    protected abstract bindModelState(): BindingTarget<ModelState>;\n\n    protected abstract bindDiagramConfiguration(): BindingTarget<DiagramConfiguration>;\n\n    protected abstract bindGModelFactory(): BindingTarget<GModelFactory>;\n\n    // Optional bindings\n\n    protected bindModelValidator(): BindingTarget<ModelValidator> | undefined {\n        return undefined;\n    }\n\n    protected bindLabelEditValidator(): BindingTarget<LabelEditValidator> | undefined {\n        return undefined;\n    }\n\n    protected bindToolPaletteItemProvider(): BindingTarget<ToolPaletteItemProvider> | undefined {\n        return DefaultToolPaletteItemProvider;\n    }\n\n    protected bindCommandPaletteActionProvider(): BindingTarget<CommandPaletteActionProvider> | undefined {\n        return undefined;\n    }\n\n    protected bindContextMenuItemProvider(): BindingTarget<ContextMenuItemProvider> | undefined {\n        return undefined;\n    }\n\n    protected bindNavigationTargetResolver(): BindingTarget<NavigationTargetResolver> | undefined {\n        return undefined;\n    }\n\n    protected bindPopupModelFactory(): BindingTarget<PopupModelFactory> | undefined {\n        return undefined;\n    }\n\n    protected bindLayoutEngine(): BindingTarget<LayoutEngine> | undefined {\n        return undefined;\n    }\n\n    protected bindEdgeCreationChecker(): BindingTarget<EdgeCreationChecker> | undefined {\n        return undefined;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2024 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { BindingContext } from '@eclipse-glsp/protocol/lib/di';\nimport { ContainerModule, injectable, interfaces } from 'inversify';\nimport { AbstractMultiBinding } from './multi-binding';\n\n/**\n * A wrapper interface to get access to the binding related functions\n * for a inversify container.\n * @deprecated Use `BindingContext` from `@eclipse-glsp/protocol` instead\n */\nexport interface ModuleContext {\n    bind: interfaces.Bind;\n    unbind: interfaces.Unbind;\n    isBound: interfaces.IsBound;\n    rebind: interfaces.Rebind;\n}\n\n/**\n * Common super class for GLSP {@link ContainerModule}s.\n */\n@injectable()\nexport abstract class GLSPModule extends ContainerModule {\n    public static CLIENT_ACTIONS = 'ClientActions';\n\n    protected context: BindingContext;\n\n    constructor() {\n        super((bind, unbind, isBound, rebind) => {\n            this.context = { bind, unbind, isBound, rebind };\n            this.configure(bind, unbind, isBound, rebind);\n        });\n    }\n\n    protected abstract configure(\n        bind: interfaces.Bind,\n        unbind: interfaces.Unbind,\n        isBound: interfaces.IsBound,\n        rebind: interfaces.Rebind\n    ): void;\n\n    /**\n     * Configuration method for multibound values. The passed configurator is typically a submethod of this module. This\n     * means\n     * that subclasses can customize the {@link MultiBinding} object before the actual {@link MultiBinding} is created.\n     *\n     * @param <T>          Type of the {@link MultiBinding}\n     * @param binding      The multi binding configuration object\n     * @param configurator The consumer that should be used to configure the given {@link MultiBinding}\n     */\n    protected configureMultiBinding<T>(binding: AbstractMultiBinding<T>, configurator: (binding: AbstractMultiBinding<T>) => void): void {\n        configurator(binding);\n        binding.applyBindings(this.context);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2024 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { distinctAdd, flatPush, MaybeArray, remove } from '@eclipse-glsp/protocol';\nimport { BindingContext } from '@eclipse-glsp/protocol/lib/di';\nimport { applyBindingTarget, BindingTarget } from './binding-target';\n\n/**\n * A helper class used in `GLSPModules` to ease the configuration of multi-injected service identifiers.\n * Instead of directly binding to the service identifier a new multi binding object can be created. This object\n * should then be passed to a overridable configuration-function (i.e. configure(binding:V)=>void). This gives subclasses of the\n * `GLSPModule` the chance to manipulate the binding configuration using the provided manipulation methods (e.g. add,remove, rebind).\n * Once the configuration is finished the binding can be finalized using the {@link AbstractMultiBinding.applyBindings} method.\n */\nexport abstract class AbstractMultiBinding<T> {\n    protected bindings: T[] = [];\n\n    constructor(readonly identifier: string | symbol) {}\n\n    abstract applyBindings(context: BindingContext): void;\n\n    add(newBinding: T): void {\n        distinctAdd(this.bindings, newBinding);\n    }\n\n    addAll(newBindings: T[]): void;\n    addAll(...newBindings: T[]): void;\n    addAll(...newBindings: MaybeArray<T>[]): void {\n        const result: T[] = [];\n        flatPush(result, newBindings);\n        result.forEach(newBinding => this.add(newBinding));\n    }\n\n    remove(toRemove: T): void {\n        remove(this.bindings, toRemove);\n    }\n\n    removeAll(toRemove: T[]): void {\n        return toRemove.forEach(binding => this.remove(binding));\n    }\n\n    rebind(oldBinding: T, newBinding: T): void {\n        this.remove(oldBinding);\n        this.add(newBinding);\n    }\n\n    contains(binding: T): boolean {\n        return this.bindings.includes(binding);\n    }\n\n    getAll(): T[] {\n        return this.bindings;\n    }\n}\n\n/**\n * Implementation of {@link AbstractMultiBinding} for multi-injected values that using an arbitrary {@link BindingTarget}.\n *\n * @typeparam T the base type of {@link BindingTarget}.\n */\nexport class MultiBinding<T> extends AbstractMultiBinding<BindingTarget<T>> {\n    applyBindings(context: BindingContext): void {\n        this.bindings.forEach(binding => applyBindingTarget(context, this.identifier, binding));\n    }\n}\n\n/**\n * Implementation of {@link AbstractMultiBinding} for multi-injected values that should be bound to concrete instance using the\n * `bind(serviceIdentifier).toConstantValue(MyCustomBinding) syntax.\n *\n * * @typeparam T the type of the instances\n */\nexport class InstanceMultiBinding<T> extends AbstractMultiBinding<T> {\n    applyBindings(context: BindingContext): void {\n        context.bind(this.identifier).toConstantValue(this.bindings);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { GLSPServer, GLSPServerListener } from '@eclipse-glsp/protocol';\nimport { ContainerModule, interfaces } from 'inversify';\nimport { DefaultGlobalActionProvider, GlobalActionProvider } from '../actions/global-action-provider';\nimport { DefaultGLSPServer } from '../protocol/glsp-server';\nimport { ClientSessionFactory, DefaultClientSessionFactory } from '../session/client-session-factory';\nimport { ClientSessionManager, DefaultClientSessionManager } from '../session/client-session-manager';\nimport { BindingTarget, applyBindingTarget } from './binding-target';\nimport { DiagramModule } from './diagram-module';\nimport { GLSPModule } from './glsp-module';\nimport { MultiBinding } from './multi-binding';\nimport { DiagramModules, InjectionContainer } from './service-identifiers';\n\n/**\n * The server module is the central configuration artifact for configuring the server container (i.e. main container). For\n * each application connecting to the server process a new server container is created. The server module provides the\n * base bindings necessary for setting up the base {@link GLSPServer} infrastructure. In addition, it is used to\n * configure the set of {@link DiagramModule}s. Diagram modules are used to create the diagram-session-specific child\n * container when the\n * {@link GLSPServer.initializeClientSession()}\n * method is called.\n *\n * The following bindings are provided:\n *\n * * {@link Map<String, Module>} annotated with `@named(\"Diagram_Modules\")`\n * * {@link GLSPServer}\n * * {@link ClientSessionFactory}\n * * {@link ClientSessionManager}\n * * {@link GlobalActionProvider}\n *\n */\nexport class ServerModule extends GLSPModule {\n    public static DIAGRAM_MODULES = 'Diagram_Modules';\n    protected readonly diagramModules: Map<string, ContainerModule[]> = new Map();\n\n    /**\n     * Configure a new {@link DiagramModule} for this server. A diagram module represents the base configuration artifact\n     * for configuring a diagram-language-specific client session container. The diagram type provided\n     * {@link DiagramModule.diagramType} is used to retrieve the correct diagram module when the {@link GLSPServer}\n     * initializes a new client session.\n     *\n     * @param diagramModule The base diagram module\n     * @param additionalModules Additional modules\n     * @returns The server module itself. This enables a builder-pattern like chaining of multiple diagram configuration\n     *         calls.\n     */\n    configureDiagramModule(diagramModule: DiagramModule, ...additionalModules: ContainerModule[]): ServerModule {\n        const diagramType = diagramModule.diagramType;\n        if (this.diagramModules.has(diagramType)) {\n            throw new Error(`A module configuration is already present for diagram type: '${diagramType}'`);\n        }\n        this.diagramModules.set(diagramType, [diagramModule, ...additionalModules]);\n        return this;\n    }\n\n    configure(bind: interfaces.Bind, unbind: interfaces.Unbind, isBound: interfaces.IsBound, rebind: interfaces.Rebind): void {\n        const context = this.context;\n        applyBindingTarget(context, DiagramModules, this.bindDiagramModules());\n\n        applyBindingTarget(context, GLSPServer, this.bindGLSPServer()).inSingletonScope();\n        applyBindingTarget(context, ClientSessionFactory, this.bindClientSessionFactory()).inSingletonScope();\n        applyBindingTarget(context, ClientSessionManager, this.bindClientSessionManager()).inSingletonScope();\n        this.configureMultiBinding(new MultiBinding<GLSPServerListener>(GLSPServerListener), binding =>\n            this.configureGLSPServerListeners(binding)\n        );\n\n        applyBindingTarget(context, GlobalActionProvider, this.bindGlobalActionProvider()).inSingletonScope();\n\n        if (!isBound(InjectionContainer)) {\n            applyBindingTarget(context, InjectionContainer, this.bindInjectionContainer());\n        }\n    }\n\n    protected bindDiagramModules(): BindingTarget<Map<string, ContainerModule[]>> {\n        return { constantValue: this.diagramModules };\n    }\n\n    protected bindGLSPServer(): BindingTarget<GLSPServer> {\n        return DefaultGLSPServer;\n    }\n\n    protected bindClientSessionFactory(): BindingTarget<ClientSessionFactory> {\n        return DefaultClientSessionFactory;\n    }\n\n    protected bindClientSessionManager(): BindingTarget<ClientSessionManager> {\n        return DefaultClientSessionManager;\n    }\n\n    protected bindGlobalActionProvider(): BindingTarget<GlobalActionProvider> {\n        return DefaultGlobalActionProvider;\n    }\n\n    protected bindInjectionContainer(): BindingTarget<interfaces.Container> {\n        return { dynamicValue: context => context.container };\n    }\n\n    protected configureGLSPServerListeners(binding: MultiBinding<GLSPServerListener>): void {\n        binding.add({ service: ClientSessionManager });\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ValidateLabelEditAdapter } from '../features/directediting/context-edit-validator';\nimport { LabelEditValidator } from '../features/directediting/label-edit-validator';\n\nexport const DiagramType = Symbol('DiagramType');\n\nexport const ClientId = Symbol('ClientId');\n\nexport const DiagramModules = Symbol('DiagramModules');\n\nexport const InjectionContainer = Symbol('InjectionContainer');\n\nexport const ClientActionKinds = Symbol('ClientActionKinds');\n\nexport const ContextActionsProviders = Symbol('ContextActionsProviders');\n\nexport const ContextEditValidators = Symbol('ContextEditValidators');\n\nexport const ValidateLabelEditAdapterFactory = Symbol('ValidateLabelEditAdapterFactory');\n\nexport const NavigationTargetProviders = Symbol('NavigationTargetProviders');\n\nexport type ValidateLabelEditAdapterFactory = (validator: LabelEditValidator) => ValidateLabelEditAdapter;\n\nexport const Operations = Symbol('Operations');\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { GModelElementConstructor } from '@eclipse-glsp/graph';\nimport { EdgeTypeHint, ShapeTypeHint } from '@eclipse-glsp/protocol';\n\n/**\n * Used to configure whether and when a diagram server should auto-layout the graphical model.\n *\n * The layout is computed with the layout engine configured, so a value other\n * than <code>NONE</code> here makes sense only if such an engine is available.\n */\nexport enum ServerLayoutKind {\n    /**\n     * The server re-layouts the diagram on all changes automatically. Layout\n     * information stored in the model will be overwritten.\n     */\n    AUTOMATIC,\n\n    /**\n     * The server re-layouts the diagram only if manually triggered by a\n     * <code>LayoutAction</code>. The layout information must be stored in the model\n     * and will be overwritten on layout.\n     */\n    MANUAL,\n\n    /**\n     * The server never layouts the diagram. This requires that the layout\n     * information is stored in the model.\n     */\n    NONE\n}\n\nexport const DiagramConfiguration = Symbol('DiagramConfiguration');\n/**\n * Provides configuration constants for a specific diagram implementation (i.e. diagram language),\n * The corresponding configuration for a diagram implementation is identified via its diagram type.\n */\nexport interface DiagramConfiguration {\n    /**\n     * Returns the shape type hints for the diagram implementation. Shape type hints are sent to the client and used to\n     * validate whether certain operations for shapes/nodes are allowed without having to query the server again.\n     *\n     * @returns List of all shape type hints for the diagram implementation.\n     */\n    readonly shapeTypeHints: ShapeTypeHint[];\n\n    /**\n     * Returns the edge type hints for the diagram implementation. Edge type hints are sent to the client and used to\n     * validate whether certain operations for edges are allowed without having to query the server again.\n     *\n     * @returns List of all edge type hints for the diagram implementation.\n     */\n    readonly edgeTypeHints: EdgeTypeHint[];\n\n    /**\n     * Returns the supported layout kind for this diagram implementation.\n     *\n     * @returns The layout kind.\n     */\n    readonly layoutKind: ServerLayoutKind;\n\n    /**\n     * Boolean flag to specific whether the diagram implementation expects the client to provide layout information for\n     * certain diagram element. Default is 'true'.\n     *\n     * @returns Boolean flag to indicate whether the client needs to be involved in the layout process.\n     */\n    readonly needsClientLayout: boolean;\n\n    /**\n     * Boolean flag to tell the client whether changed caused by an update should be animated or not.\n     *\n     * @returns Boolean flag to indicate whether the client should animate update changes.\n     */\n    readonly animatedUpdate: boolean;\n\n    /**\n     * Returns the type mappings for the diagram implementation. Type mappings are used by GSON to construct the correct\n     * {@link EClass} based on the \"type\" property of the JSON object.\n     *\n     * @returns A complete map of all type mappings for the diagram implementation.\n     */\n    readonly typeMapping: Map<string, GModelElementConstructor>;\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    Action,\n    ClipboardData,\n    GModelElementSchema,\n    MaybePromise,\n    RequestClipboardDataAction,\n    SetClipboardDataAction\n} from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport { ActionHandler } from '../../actions/action-handler';\nimport { GModelSerializer } from '../model/gmodel-serializer';\nimport { ModelState } from '../model/model-state';\n\n@injectable()\nexport class RequestClipboardDataActionHandler implements ActionHandler {\n    actionKinds = [RequestClipboardDataAction.KIND];\n\n    @inject(ModelState)\n    protected modelState: ModelState;\n\n    @inject(GModelSerializer)\n    protected modelSerializer: GModelSerializer;\n\n    execute(action: RequestClipboardDataAction): MaybePromise<Action[]> {\n        const schemas: GModelElementSchema[] = [];\n        const index = this.modelState.index;\n        const selectedElements = index.getAll(action.editorContext.selectedElementIds);\n        const clipboardData: ClipboardData = { format: 'application/json' };\n        selectedElements.forEach(element => {\n            schemas.push(this.modelSerializer.createSchema(element));\n        });\n        // eslint-disable-next-line no-null/no-null\n        clipboardData['application/json'] = JSON.stringify(schemas, undefined, 2);\n        return [SetClipboardDataAction.create(clipboardData)];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { GModelElement } from '@eclipse-glsp/graph';\nimport { Args, EditorContext, LabeledAction, Point } from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport { ModelState } from '../model/model-state';\nimport { ContextActionsProvider } from './context-actions-provider';\n\n/**\n * A {@link ContextActionsProvider} for CommandPaletteActions.\n */\n@injectable()\nexport abstract class CommandPaletteActionProvider implements ContextActionsProvider {\n    @inject(ModelState)\n    protected modelState: ModelState;\n\n    readonly TEXT = 'text';\n    readonly INDEX = 'index';\n\n    /**\n     * Returns the context id of the provider.\n     */\n    get contextId(): string {\n        return 'command-palette';\n    }\n\n    /**\n     * Retrieves the value for the \"text\" key from the given arguments {@link Args}.\n     *\n     * @param args The given arguments.\n     * @returns The value associated with the \"text\" key.\n     */\n    getText(args: Args): string {\n        return args[this.TEXT] ? args[this.TEXT].toString() : '';\n    }\n\n    /**\n     * Returns the value of the \"index\" key from a given {@link Args}.\n     *\n     * @param args The given arguments.\n     * @returns The value associated with the \"index\" key.\n     */\n    getIndex(args: Args): number {\n        return args[this.INDEX] ? (args[this.INDEX] as number) : 0.0;\n    }\n\n    /**\n     * Returns a list of {@link LabeledAction}s for a given {@link EditorContext}.\n     *\n     * @param editorContext The editorContext for which the actions are returned.\n     * @returns A list of {@link LabeledAction}s for a given {@link EditorContext}.\n     */\n    getActions(editorContext: EditorContext): LabeledAction[] {\n        const actions: LabeledAction[] = [];\n        if (this.modelState.isReadonly) {\n            return actions;\n        }\n\n        const selectedIds = editorContext.selectedElementIds;\n        const position = editorContext.lastMousePosition ? editorContext.lastMousePosition : { x: 0, y: 0 };\n        const selectedElements = this.modelState.index.getAll(selectedIds);\n\n        return this.getPaletteActions(selectedIds, selectedElements, position, editorContext.args);\n    }\n\n    /**\n     * Returns a list of {@link LabeledAction}s for given selectedElements at a given mouse position.\n     *\n     * @param selectedElementIds The list of currently selected elementIds.\n     * @param selectedElements The list of currently selected elements.\n     * @param position The current mouse position.\n     * @param args Additional arguments.\n     * @returns A list of {@link LabeledAction}s.\n     */\n    abstract getPaletteActions(\n        selectedElementIds: string[],\n        selectedElements: GModelElement[],\n        position: Point,\n        args?: Args\n    ): LabeledAction[];\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable, multiInject, optional } from 'inversify';\nimport { ContextActionsProviders } from '../../di/service-identifiers';\nimport { Registry } from '../../utils/registry';\nimport { CommandPaletteActionProvider } from './command-palette-action-provider';\nimport { ContextActionsProvider } from './context-actions-provider';\nimport { ContextMenuItemProvider } from './context-menu-item-provider';\nimport { ToolPaletteItemProvider } from './tool-palette-item-provider';\n\n/**\n * A registry that keeps track of all registered {@link ContextActionsProvider}s.\n */\n@injectable()\nexport class ContextActionsProviderRegistry extends Registry<string, ContextActionsProvider> {\n    constructor(\n        @multiInject(ContextActionsProviders) @optional() contextActionsProvider: ContextActionsProvider[] = [],\n        @inject(ContextMenuItemProvider) @optional() contextMenuItemProvider?: ContextMenuItemProvider,\n        @inject(CommandPaletteActionProvider) @optional() commandPaletteActionProvider?: CommandPaletteActionProvider,\n        @inject(ToolPaletteItemProvider) @optional() toolPaletteItemProvider?: ToolPaletteItemProvider\n    ) {\n        super();\n        contextActionsProvider.forEach(provider => this.register(provider.contextId, provider));\n        if (contextMenuItemProvider) {\n            this.register(contextMenuItemProvider.contextId, contextMenuItemProvider);\n        }\n        if (commandPaletteActionProvider) {\n            this.register(commandPaletteActionProvider.contextId, commandPaletteActionProvider);\n        }\n        if (toolPaletteItemProvider) {\n            this.register(toolPaletteItemProvider.contextId, toolPaletteItemProvider);\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { EditorContext, LabeledAction, MaybePromise } from '@eclipse-glsp/protocol';\n\nexport const ContextActionsProvider = Symbol('ContextActionsProvider');\n\n/**\n * A provider for a certain contextId that provides {@link LabeledAction}s.\n */\nexport interface ContextActionsProvider {\n    /**\n     * The context id of the {@link ContextActionsProvider}.\n     */\n    contextId: string;\n\n    /**\n     * Returns a list of {@link LabeledAction}s for a given {@link EditorContext}.\n     *\n     * @param editorContext The editorContext for which the actions are returned.\n     * @returns A list of {@link LabeledAction}s for a given {@link EditorContext}.\n     */\n    getActions(editorContext: EditorContext): MaybePromise<LabeledAction[]>;\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Args, EditorContext, LabeledAction, MenuItem, Point } from '@eclipse-glsp/protocol';\nimport { injectable } from 'inversify';\nimport { ContextActionsProvider } from './context-actions-provider';\n\n/**\n * A {@link ContextActionsProvider} for {@link MenuItem}s.\n */\n@injectable()\nexport abstract class ContextMenuItemProvider implements ContextActionsProvider {\n    /**\n     * Returns the context id of the {@link ContextMenuItemProvider}.\n     */\n    get contextId(): string {\n        return 'context-menu';\n    }\n\n    /**\n     * Returns a list of {@link MenuItem}s for a given list of selected elements at a certain mouse position.\n     *\n     * @param selectedElementIds The list of currently selected elementIds.\n     * @param position           The current mouse position.\n     * @param args               Additional arguments.\n     * @returns A list of {@link MenuItem}s for a given list of selected elements at a certain mouse position.\n     */\n    abstract getItems(selectedElementIds: string[], position: Point, args?: Args): MenuItem[];\n\n    /**\n     * Returns a list of {@link LabeledAction}s for a given {@link EditorContext}.\n     *\n     * @param editorContext The editorContext for which the actions are returned.\n     * @returns A list of {@link LabeledAction}s for a given {@link EditorContext}.\n     */\n    getActions(editorContext: EditorContext): LabeledAction[] {\n        const position = editorContext.lastMousePosition ? editorContext.lastMousePosition : { x: 0, y: 0 };\n        return this.getItems(editorContext.selectedElementIds, position, editorContext.args);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Action, LabeledAction, RequestContextActions, SetContextActions } from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport { ActionHandler } from '../../actions/action-handler';\nimport { ContextActionsProviderRegistry } from './context-actions-provider-registry';\n\n@injectable()\nexport class RequestContextActionsHandler implements ActionHandler {\n    actionKinds = [RequestContextActions.KIND];\n\n    @inject(ContextActionsProviderRegistry)\n    protected contextActionsProviderRegistry: ContextActionsProviderRegistry;\n\n    async execute(action: RequestContextActions): Promise<Action[]> {\n        const editorContext = action.editorContext;\n        const actions: LabeledAction[] = [];\n        if (this.contextActionsProviderRegistry.get(action.contextId)) {\n            const provider = this.contextActionsProviderRegistry.get(action.contextId)!;\n            (await provider.getActions(editorContext)).forEach(returnAction => actions.push(returnAction));\n        }\n        return [SetContextActions.create(actions, { args: action.editorContext.args })];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    Args,\n    CreateEdgeOperation,\n    CreateNodeOperation,\n    EditorContext,\n    LabeledAction,\n    MaybePromise,\n    PaletteItem\n} from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport { CreateOperationHandler } from '../../operations/create-operation-handler';\nimport { OperationHandlerRegistry } from '../../operations/operation-handler-registry';\nimport { ContextActionsProvider } from './context-actions-provider';\n\n/**\n * A {@link ContextActionsProvider} for {@link PaletteItem}s.\n */\n@injectable()\nexport abstract class ToolPaletteItemProvider implements ContextActionsProvider {\n    /**\n     * Returns the context id of the provider.\n     */\n    get contextId(): string {\n        return 'tool-palette';\n    }\n\n    /**\n     * Returns a list of {@link LabeledAction}s for a given {@link EditorContext}.\n     *\n     * @param editorContext The editorContext for which the actions are returned.\n     * @returns A list of {@link LabeledAction}s for a given {@link EditorContext}.\n     */\n    async getActions(editorContext: EditorContext): Promise<LabeledAction[]> {\n        return this.getItems(editorContext.args);\n    }\n\n    /**\n     * Constructs a list of {@link PaletteItem}s for a given map of string arguments.\n     *\n     * @param args A map of string arguments.\n     * @returns A list of {@link PaletteItem}s for a given map of string arguments.\n     */\n    abstract getItems(args?: Args): MaybePromise<PaletteItem[]>;\n}\n\n@injectable()\nexport class DefaultToolPaletteItemProvider extends ToolPaletteItemProvider {\n    @inject(OperationHandlerRegistry) operationHandlerRegistry: OperationHandlerRegistry;\n    protected counter: number;\n\n    getItems(_args?: Args): PaletteItem[] {\n        const handlers = this.operationHandlerRegistry.getAll().filter(CreateOperationHandler.is) as CreateOperationHandler[];\n        this.counter = 0;\n        const nodes = this.createPaletteItem(handlers, CreateNodeOperation.KIND);\n        const edges = this.createPaletteItem(handlers, CreateEdgeOperation.KIND);\n        return [\n            { id: 'node-group', label: 'Nodes', actions: [], children: nodes, icon: 'symbol-property', sortString: 'A' },\n            { id: 'edge-group', label: 'Edges', actions: [], children: edges, icon: 'symbol-property', sortString: 'B' }\n        ];\n    }\n\n    createPaletteItem(handlers: CreateOperationHandler[], kind: string): PaletteItem[] {\n        return handlers\n            .filter(handler => handler.operationType === kind)\n            .map(handler => handler.getTriggerActions().map(action => this.create(action, handler.label)))\n            .reduce((accumulator, value) => accumulator.concat(value), [])\n            .sort((a, b) => a.sortString.localeCompare(b.sortString));\n    }\n\n    create(action: PaletteItem.TriggerElementCreationAction, label: string): PaletteItem {\n        return { id: `palette-item${this.counter}`, sortString: label.charAt(0), label, actions: [action] };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable, multiInject, optional } from 'inversify';\nimport { ContextEditValidators } from '../../di/service-identifiers';\nimport { Registry } from '../../utils/registry';\nimport { ModelState } from '../model/model-state';\nimport { ContextEditValidator, ValidateLabelEditAdapter } from './context-edit-validator';\nimport { LabelEditValidator } from './label-edit-validator';\n\nexport const ContextEditValidatorRegistry = Symbol.for('ContextEditValidatorRegistry');\n\n/**\n * A registry that keeps track of all registered {@link ContextEditValidator}s.\n */\nexport interface ContextEditValidatorRegistry extends Registry<string, ContextEditValidator> {}\n\n@injectable()\nexport class DefaultContextEditValidatorRegistry extends Registry<string, ContextEditValidator> implements ContextEditValidatorRegistry {\n    constructor(\n        @inject(ModelState) modelState: ModelState,\n        @multiInject(ContextEditValidators) @optional() contextEditValidators: ContextEditValidator[] = [],\n        @inject(LabelEditValidator) @optional() labelEditValidator?: LabelEditValidator\n    ) {\n        super();\n        contextEditValidators.forEach(provider => this.register(provider.contextId, provider));\n        if (labelEditValidator) {\n            this.register(LabelEditValidator.CONTEXT_ID, new ValidateLabelEditAdapter(modelState, labelEditValidator));\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2024 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { GModelElement } from '@eclipse-glsp/graph/lib/gmodel-element';\nimport { RequestEditValidationAction, ValidationStatus } from '@eclipse-glsp/protocol';\nimport { ModelState } from '../model/model-state';\nimport { LabelEditValidator } from './label-edit-validator';\n\nexport const ContextEditValidator = Symbol('ContextEditValidator');\n\nexport interface ContextEditValidator {\n    /**\n     * Returns the context id of the {@link ContextActionsProvider}.\n     */\n    contextId: string;\n\n    /**\n     * Returns the {@link ValidationStatus} for a given {@link RequestEditValidationAction}.\n     *\n     * @param action The RequestEditValidationAction to validate.\n     * @returns The {@link ValidationStatus} for a given {@link RequestEditValidationAction}.\n     */\n    validate(action: RequestEditValidationAction): ValidationStatus;\n}\n\nexport class ValidateLabelEditAdapter implements ContextEditValidator {\n    labelEditValidator: LabelEditValidator;\n    constructor(\n        readonly modelState: ModelState,\n        labelEditValidator: LabelEditValidator\n    ) {\n        this.labelEditValidator = labelEditValidator;\n    }\n\n    get contextId(): string {\n        return LabelEditValidator.CONTEXT_ID;\n    }\n\n    validate(action: RequestEditValidationAction): ValidationStatus {\n        const element = this.modelState.index.get(action.modelElementId);\n        if (element instanceof GModelElement) {\n            return this.labelEditValidator.validate(action.text, element);\n        }\n        return { severity: ValidationStatus.Severity.OK };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { GModelElement } from '@eclipse-glsp/graph';\nimport { ValidationStatus } from '@eclipse-glsp/protocol';\nimport { injectable } from 'inversify';\n\n/**\n * A validator that validates a new label for a given {@link GModelElement}.\n */\n@injectable()\nexport abstract class LabelEditValidator {\n    static readonly CONTEXT_ID = 'label-edit';\n\n    /**\n     * Returns the {@link ValidationStatus} for a given edited label of a {@link GModelElement}.\n     *\n     * @param label   The edited label to validate.\n     * @param element The element for which the label is going to be edited.\n     * @returns The {@link ValidationStatus} of the label.\n     */\n    abstract validate(label: string, element: GModelElement): ValidationStatus;\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Action, MaybePromise, RequestEditValidationAction, SetEditValidationResultAction, ValidationStatus } from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport { ActionHandler } from '../../actions/action-handler';\nimport { Logger } from '../../utils/logger';\nimport { ContextEditValidatorRegistry } from './context-edit-validator-registry';\n\n@injectable()\nexport class RequestEditValidationHandler implements ActionHandler {\n    actionKinds = [RequestEditValidationAction.KIND];\n\n    @inject(Logger)\n    protected logger: Logger;\n\n    @inject(ContextEditValidatorRegistry)\n    contextEditValidatorRegistry: ContextEditValidatorRegistry;\n\n    execute(action: RequestEditValidationAction): MaybePromise<Action[]> {\n        const validator = this.contextEditValidatorRegistry.get(action.contextId);\n        if (validator) {\n            const validationStatus = validator.validate(action);\n            return [SetEditValidationResultAction.create(validationStatus)];\n        } else {\n            const message = `No validator registered for the context '${action.contextId}'`;\n            this.logger.warn(message);\n            return [SetEditValidationResultAction.create({ severity: ValidationStatus.Severity.WARNING, message: message })];\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { GModelRoot } from '@eclipse-glsp/graph';\nimport { Action, ComputedBoundsAction, MaybePromise } from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport { ActionHandler } from '../../actions/action-handler';\nimport { applyAlignment, applyElementAndBounds, applyRoute } from '../../utils/layout-util';\nimport { ModelState } from '../model/model-state';\nimport { ModelSubmissionHandler } from '../model/model-submission-handler';\n\n/**\n * Syncs the bounds computed by the client (i.e. the actual bounds after applying CSS styles) back to the `GModel`.\n * In this default implementation the updated bounds are stored transient. This means they are applied to the graphical model but\n * are not persisted to the source model.\n */\n@injectable()\nexport class ComputedBoundsActionHandler implements ActionHandler {\n    @inject(ModelSubmissionHandler)\n    protected submissionHandler: ModelSubmissionHandler;\n\n    @inject(ModelState)\n    protected modelState: ModelState;\n\n    actionKinds = [ComputedBoundsAction.KIND];\n    execute(action: ComputedBoundsAction): MaybePromise<Action[]> {\n        const model = this.modelState.root;\n        if (action.revision === model.revision) {\n            this.applyBounds(model, action);\n            return this.submissionHandler.submitModelDirectly();\n        }\n\n        return [];\n    }\n\n    protected applyBounds(root: GModelRoot, action: ComputedBoundsAction): void {\n        const index = this.modelState.index;\n        action.bounds.forEach(bounds => applyElementAndBounds(bounds, index));\n        (action.alignments ?? []).forEach(alignment => applyAlignment(alignment, index));\n        (action.routes ?? []).forEach(route => applyRoute(route, index));\n    }\n\n    priority?: number | undefined;\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { GModelRoot } from '@eclipse-glsp/graph';\nimport { MaybePromise } from '@eclipse-glsp/protocol';\n\n/**\n * A layout engine is able to compute layout information for a model.\n */\nexport interface LayoutEngine {\n    /**\n     * Computes a layout for the model state and modify the model accordingly.\n     * @returns the layouted {@link GModelRoot}.\n     */\n    layout(): MaybePromise<GModelRoot>;\n}\n\nexport const LayoutEngine = Symbol('LayoutEngine');\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { LayoutOperation, MaybePromise, Operation } from '@eclipse-glsp/protocol';\nimport { inject, injectable, optional } from 'inversify';\nimport { Command } from '../../command/command';\nimport { GModelRecordingCommand } from '../../command/recording-command';\nimport { DiagramConfiguration, ServerLayoutKind } from '../../diagram/diagram-configuration';\nimport { OperationHandler } from '../../operations/operation-handler';\nimport { Logger } from '../../utils/logger';\nimport { GModelSerializer } from '../model/gmodel-serializer';\nimport { LayoutEngine } from './layout-engine';\n\n/**\n * The default handler for `{@link LayoutOperation}s. Does invoke the (optional) layout engine\n * if the server is configured for manual layouting. Changes are stored transient in the graphical model and are not\n * persisted in the source model.\n */\n@injectable()\nexport class LayoutOperationHandler extends OperationHandler {\n    @inject(Logger)\n    protected logger: Logger;\n\n    @inject(LayoutEngine)\n    @optional()\n    protected layoutEngine?: LayoutEngine;\n\n    @inject(DiagramConfiguration)\n    protected diagramConfiguration: DiagramConfiguration;\n\n    @inject(GModelSerializer)\n    protected serializer: GModelSerializer;\n\n    readonly operationType = LayoutOperation.KIND;\n\n    createCommand(operation: LayoutOperation): MaybePromise<Command | undefined> {\n        if (this.diagramConfiguration.layoutKind !== ServerLayoutKind.MANUAL) {\n            return undefined;\n        }\n        if (!this.layoutEngine) {\n            this.logger.warn('Could not execute layout operation. No `LayoutEngine` is bound!');\n            return undefined;\n        }\n        return new GModelRecordingCommand(this.modelState, this.serializer, () => this.executeOperation(operation));\n    }\n\n    protected async executeOperation(_operation: Operation): Promise<void> {\n        await this.layoutEngine?.layout();\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\n\nexport const GModelFactory = Symbol('GModelFactory');\n\n/**\n * A graph model factory produces a graph model from the model state; typically its contained source model.\n *\n * The responsibility of a {@link GModelFactory} implementation is to define how a {@link ModelState} is to be\n * translated into a {@link GModelRoot} that is sent to the client for rendering. Before a {@link GModelFactory}\n * is invoked, the {@link SourceModelStorage} has already been executed for loading the source model into the\n * {@link ModelState}. The {@link GModelFactory} then produces the {@link GModelRoot} from the source model in the\n * {@link ModelState}. Implementations of {@link GModelFactory} are usually specific to the type of source model, as\n * they need to understand the source model in order to translate it into a graph model.\n *\n * The graph model factory is invoked after initial load of the source model and after each operation that is applied\n * to the source model by an {@link OperationHandler} in order to update the graph model before sending it to the client\n * for rendering.\n *\n * If an index is needed for mapping between the graph model and the source model, as is typically the case for\n * {@link ActionHandler action handlers} and {@link OperationHandler operation handlers}, it is the responsibility of\n * the graph model factory to create such an index while producing the graph model from the source model. The index\n * shall be put into the model state too. Typically the {@link GModelIndex} is extended for a particular model source\n * type as well.\n *\n * @see SourceModelStorage\n * @see GModelIndex\n */\nexport interface GModelFactory {\n    /**\n     * Create a {@link GModelRoot} from the specified <code>modelState</code> and puts it into the\n     * <code>modelState</code>. Optionally, this step also produces and sets a {@link GModelIndex} in the model state\n     * that allows mapping from graph model elements to source model elements and vice versa.\n     */\n    createModel(): void;\n}\n\n/**\n * GModelFactory to be used if the graph model is already available from the model source.\n */\n@injectable()\nexport class GModelFactoryNullImpl implements GModelFactory {\n    createModel(): void {\n        // no-op\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { GEdge, GModelElement, GModelElementConstructor, GModelRoot } from '@eclipse-glsp/graph';\nimport { TypeGuard } from '@eclipse-glsp/protocol';\nimport { injectable } from 'inversify';\nimport { GLSPServerError, getOrThrow } from '../../utils/glsp-server-error';\n\n/**\n * Is used to index all child elements of a {@link GModelRoot} by their id. Offers a set\n * of query methods to retrieve indexed elements.\n */\n@injectable()\nexport class GModelIndex {\n    protected idToElement: Map<string, GModelElement>;\n    protected typeToElements: Map<string, GModelElement[]>;\n\n    constructor() {\n        this.idToElement = new Map();\n        this.typeToElements = new Map();\n    }\n\n    clear(): void {\n        this.idToElement.clear();\n        this.typeToElements.clear();\n    }\n\n    indexRoot(root: GModelRoot): void {\n        this.clear();\n        this.doIndex(root);\n    }\n\n    protected doIndex(element: GModelElement): void {\n        if (this.idToElement.has(element.id)) {\n            throw new GLSPServerError('Duplicate ID in model: ' + element.id);\n        }\n        this.idToElement.set(element.id, element);\n        const typeSet = this.typeToElements.get(element.type) ?? [];\n        typeSet.push(element);\n        this.typeToElements.set(element.type, typeSet);\n        (element.children ?? []).forEach(child => {\n            this.doIndex(child);\n            // Double check wether the parent reference of the child is set correctly\n            if (!child.parent) {\n                child.parent = element;\n            }\n        });\n    }\n\n    find(elementId: string, predicate?: (test: GModelElement) => boolean): GModelElement | undefined {\n        const element = this.idToElement.get(elementId);\n        if (element && predicate ? predicate(element) : true) {\n            return element;\n        }\n        return undefined;\n    }\n\n    findByClass<G extends GModelElement>(elementTypeId: string, constructor: GModelElementConstructor<G>): G | undefined {\n        const element = this.find(elementTypeId);\n        if (element && element instanceof constructor) {\n            return element;\n        }\n        return undefined;\n    }\n\n    /**\n     * Returns an optional {@link GModelElement} by its elementId.\n     *\n     * @param elementId The id of the requested {@link GModelElement}.\n     * @returns An optional instance of the {@link GModelElement}.\n     */\n    get(elementId: string): GModelElement {\n        return getOrThrow(this.find(elementId), `Could not retrieve element with id: '${elementId}'`);\n    }\n\n    /**\n     * Returns a set of {@link GModelElement} instances by a Collection of elementIds.\n     *\n     * @param elementIds The ids to request the {@link GModelElement} from an array of elementIds.\n     * @returns A set of {@link GModelElement}s.\n     */\n    getAll(elementIds: string[]): GModelElement[] {\n        return elementIds.map(id => this.idToElement.get(id)).filter(element => element) as GModelElement[];\n    }\n\n    /**\n     * Returns all elements of the type constructor contained in the {@link GModelRoot}.\n     *\n     * @type Type of the elements to be returned.\n     * @param constructor The class of which the returned elements should be instances.\n     * @returns A set containing the elements of type constructor.\n     */\n    getAllByClass<G extends GModelElement>(constructor: GModelElementConstructor<G>): G[] {\n        return Array.from(this.idToElement.values()).filter(element => element instanceof constructor) as G[];\n    }\n\n    /**\n     * Returns a list of all {@link GModelElement} ids contained in this instance of the GModelIndex.\n     *\n     * @returns A list of elementIds.\n     */\n    allIds(): string[] {\n        return Array.from(this.idToElement.keys());\n    }\n\n    /**\n     * Returns all elements of a type {@link GModelRoot}.\n     *\n     * @param type   Type of the elements to be returned.\n     * @returns A set containing the elements of the given type.\n     */\n    getElements(type: string): GModelElement[] {\n        return this.typeToElements.get(type) ?? [];\n    }\n\n    /**\n     * Returns the current amount of type occurrences in this instance of the GModelIndex.\n     *\n     * @param eClass The EClass to be counted in this instance of the GModelIndex.\n     *\n     * @returns The amount of type occurrences.\n     */\n    typeCount(type: string): number {\n        return this.getElements(type).length;\n    }\n\n    /**\n     * Returns all incoming edges for a node (or port).\n     *\n     * @param node The node (or port) where the edges are connected.\n     *\n     * @returns All incoming edges.\n     */\n    getIncomingEdges(node: GModelElement): GEdge[] {\n        return this.getAllEdges().filter(edge => edge.targetId === node.id);\n    }\n\n    /**\n     * Returns all outgoing edges for a node (or port).\n     *\n     * @param node The node (or port) where the edges are connected.\n     *\n     * @returns All outgoing edges.\n     */\n    getOutgoingEdges(node: GModelElement): GEdge[] {\n        return this.getAllEdges().filter(edge => edge.sourceId === node.id);\n    }\n\n    /**\n     * Returns all edges in the index.\n     *\n     * @returns All edges in the index.\n     */\n    getAllEdges(): GEdge[] {\n        return this.getAllByClass(GEdge);\n    }\n\n    /**\n     * Returns the first element matching the given {@link TypeGuard} starting element with the\n     * given id and walking up the parent hierarchy.\n     *\n     * @param elementId The element to start the search from\n     * @param guard The typeguard which the element should match\n     * @return The first matching element or `undefined`.\n     */\n    findParentElement<T extends GModelElement>(elementId: string, guard: TypeGuard<T>): T | undefined {\n        const element = this.get(elementId);\n        return element ? this._findElement(element, guard) : undefined;\n    }\n\n    protected _findElement<T>(element: GModelElement, guard: TypeGuard<T>): T | undefined {\n        if (!element) {\n            return undefined;\n        }\n        if (guard(element)) {\n            return element;\n        }\n        if (element instanceof GModelRoot) {\n            return undefined;\n        }\n        return this._findElement(element.parent, guard);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2023 TypeFox and other\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/* Derived from sprotty (https://github.com/eclipse/sprotty/blob/master/packages/sprotty/src/base/model/smodel-factory.ts) */\nimport { GModelElement, GModelElementConstructor, GModelRoot } from '@eclipse-glsp/graph';\nimport { GModelElementSchema, GModelRootSchema } from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport { DiagramConfiguration } from '../../diagram/diagram-configuration';\nimport { GLSPServerError } from '../../utils/glsp-server-error';\n\nexport const GModelSerializer = Symbol('GModelSerializer');\n\n/**\n * The `GModelSerializer` is used to transform a graphical model received as serializable JSON schema into the ES6-class based\n * model representation and vice versa. It has to be invoked for whenever a graphical model is received in JSON format\n * (i.e. by the GLSP client) to derive the corresponding class based model which is used internally by the GLSP server. In addition,\n * it has to be invoked before the graphical model is sent based to the client. This is necessary to resolve the parent-child cycles\n * inside of the graphical model which ensures that the model is serializable.\n */\nexport interface GModelSerializer {\n    /**\n     * Transform the given {@link GModelRootSchema} into its {@link GModelRoot} representation.\n     * @throws An error if the received element cannot be transformed into a {@link GModelRoot}.\n     * @param schema The root schema that should be transformed.\n     * @returns The transformed {@link GModelRoot}.\n     */\n    createRoot(schema: GModelRootSchema): GModelRoot;\n\n    /**\n     * Transform the given {@link GModelRootSchema} into its {@link GModelElement} representation.\n     * @throws An error if the received element cannot be transformed into a {@link GModelElement}.\n     * @param schema The element schema that should be transformed.\n     * @returns The transformed {@link GModelElement}.\n     */\n    createElement(schema: GModelElementSchema, parent?: GModelElement): GModelElement;\n\n    /**\n     * Transforms the given {@link GModelElement} into its serializable {@link GModelElementSchema} representation.\n     * @param element The element that should be serialized.\n     * @returns The transformed {@link GModelElementSchema}.\n     */\n    createSchema(element: GModelElement): GModelElementSchema;\n\n    /**\n     * The set of reserved property keys that should be excluded from serialization. Typically\n     * this set contains at least the `children` and `parent` keys to avoid parent-child cycles.\n     */\n    reservedKeys: string[];\n}\n\n@injectable()\nexport class DefaultGModelSerializer implements GModelSerializer {\n    @inject(DiagramConfiguration) protected diagramConfiguration: DiagramConfiguration;\n\n    reservedKeys = ['children', 'parent', 'index', 'source', 'target'];\n    createRoot(schema: GModelElementSchema): GModelRoot {\n        const constructor = this.getConfiguredConstructor(schema);\n        if (constructor) {\n            const element = new constructor();\n            if (!(element instanceof GModelRoot)) {\n                throw new GLSPServerError(`Element with type '${schema.type}' is expected to be a GModelRoot!`);\n            }\n            return this.initializeRoot(element, schema);\n        }\n        throw new GLSPServerError(`No constructor is configured in DiagramConfiguration for type ${schema.type}`);\n    }\n\n    getConfiguredConstructor(schema: GModelElementSchema): GModelElementConstructor | undefined {\n        let key = schema.type;\n        while (!this.diagramConfiguration.typeMapping.has(key)) {\n            const i = key.lastIndexOf(':');\n            if (i > 0) {\n                key = key.substring(0, i);\n            } else {\n                return undefined;\n            }\n        }\n\n        const constructor = this.diagramConfiguration.typeMapping.get(key)!;\n        if (key !== schema.type) {\n            this.diagramConfiguration.typeMapping.set(key, constructor);\n        }\n        return constructor;\n    }\n\n    createElement(schema: GModelElementSchema, parent?: GModelElement): GModelElement {\n        const constructor = this.getConfiguredConstructor(schema);\n        if (constructor) {\n            const element = new constructor();\n            if (element instanceof GModelRoot) {\n                throw new GLSPServerError(\n                    `Element with type '${schema.type}' is a GModelRoot! 'createElement()' is expected to only create child elements!`\n                );\n            }\n            return this.initializeChild(element, schema, parent);\n        }\n        throw new GLSPServerError(`No constructor is configured in DiagramConfiguration for type ${schema.type}`);\n    }\n\n    createSchema(element: GModelElement): GModelElementSchema {\n        const schema = {};\n        for (const key in element) {\n            if (!this.isReserved(element, key)) {\n                const value: any = (element as any)[key];\n                if (typeof value !== 'function') {\n                    (schema as any)[key] = value;\n                }\n            }\n        }\n        (schema as any)['children'] = (element.children ?? []).map(child => this.createSchema(child));\n\n        return schema as GModelElementSchema;\n    }\n\n    protected initializeRoot(root: GModelRoot, schema: GModelRootSchema): GModelRoot {\n        this.initializeParent(root, schema);\n        return root;\n    }\n\n    protected initializeElement(element: GModelElement, schema: GModelRootSchema): GModelElement {\n        for (const key in schema) {\n            if (!this.isReserved(element, key)) {\n                const value = (schema as any)[key];\n                if (typeof value !== 'function') {\n                    (element as any)[key] = value;\n                }\n            }\n        }\n        return element;\n    }\n\n    protected initializeChild(child: GModelElement, schema: GModelElementSchema, parent?: GModelElement): GModelElement {\n        this.initializeParent(child, schema);\n        if (parent) {\n            child.parent = parent;\n        }\n        return child;\n    }\n\n    protected initializeParent(parent: GModelElement, schema: GModelElementSchema): GModelElement {\n        this.initializeElement(parent, schema);\n        if (schema.children) {\n            parent.children = schema.children.map(childSchema => this.createElement(childSchema, parent));\n        }\n\n        return parent;\n    }\n\n    protected isReserved(element: GModelElement, propertyName: string): boolean {\n        if (this.reservedKeys.indexOf(propertyName) >= 0) {\n            return true;\n        }\n        let obj = element;\n        do {\n            const descriptor = Object.getOwnPropertyDescriptor(obj, propertyName);\n            if (descriptor !== undefined) {\n                return descriptor.get !== undefined;\n            }\n            obj = Object.getPrototypeOf(obj);\n        } while (obj);\n        return false;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { GModelRoot } from '@eclipse-glsp/graph';\nimport { EditMode } from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport { ClientId } from '../../di/service-identifiers';\nimport { GModelIndex } from './gmodel-index';\nimport { GModelSerializer } from './gmodel-serializer';\n\nexport const ModelState = Symbol('ModelState');\n\nexport interface ModelState {\n    set<P>(key: string, property: P): void;\n    setAll(properties: Record<string, unknown>): void;\n    get<P>(key: string, guard?: (object: unknown) => object is P): P | undefined;\n    clear(key: string): void;\n    readonly root: GModelRoot;\n    updateRoot(newRoot: GModelRoot): void;\n    editMode: string;\n    sourceUri?: string;\n    clientId: string;\n    readonly isReadonly: boolean;\n    readonly index: GModelIndex;\n}\n\nexport const SOURCE_URI_ARG = 'sourceUri';\n\n@injectable()\nexport class DefaultModelState implements ModelState {\n    @inject(GModelIndex)\n    readonly index: GModelIndex;\n\n    @inject(GModelSerializer)\n    protected serializer: GModelSerializer;\n\n    @inject(ClientId)\n    readonly clientId: string;\n\n    protected properties = new Map<string, any>();\n\n    protected _root: GModelRoot;\n\n    editMode = EditMode.EDITABLE;\n\n    set<P>(key: string, property: P): void {\n        this.properties.set(key, property);\n    }\n\n    setAll(properties: Record<string, unknown>): void {\n        Object.keys(properties).forEach(key => this.properties.set(key, properties[key]));\n    }\n\n    get<P>(key: string, guard?: (object: unknown) => object is P): P | undefined {\n        const result = this.properties.get(key);\n        if (!guard) {\n            return result as P;\n        }\n        return guard(result) ? result : undefined;\n    }\n\n    get sourceUri(): string | undefined {\n        return this.get(SOURCE_URI_ARG);\n    }\n\n    clear(key: string): void {\n        this.properties.delete(key);\n    }\n\n    get isReadonly(): boolean {\n        return this.editMode === EditMode.READONLY;\n    }\n\n    public get root(): GModelRoot {\n        return this._root;\n    }\n\n    protected set root(root: GModelRoot) {\n        this._root = root;\n    }\n\n    updateRoot(newRoot: GModelRoot): void {\n        if (!newRoot.revision && this.root) {\n            newRoot.revision = this.root.revision;\n        }\n        this.root = newRoot;\n        this.index.indexRoot(newRoot);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2024 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    Action,\n    DirtyStateChangeReason,\n    GModelRootSchema,\n    MarkersReason,\n    MaybePromise,\n    RequestBoundsAction,\n    RequestModelAction,\n    SetDirtyStateAction,\n    SetMarkersAction,\n    SetModelAction,\n    UpdateModelAction\n} from '@eclipse-glsp/protocol';\n\nimport { inject, injectable, optional } from 'inversify';\nimport { CommandStack } from '../../command/command-stack';\nimport { DiagramConfiguration, ServerLayoutKind } from '../../diagram/diagram-configuration';\nimport { LayoutEngine } from '../layout/layout-engine';\nimport { ModelValidator } from '../validation/model-validator';\nimport { GModelFactory } from './gmodel-factory';\nimport { GModelSerializer } from './gmodel-serializer';\nimport { ModelState } from './model-state';\n\n/**\n * Helper class that provides utility methods to handle model updates i.e.\n * submit a new model to the client. In addition, to the core model update action this class\n * also takes care of related behavior like dirty state handling, validation and client/server side layouting.\n * Note that the submissions handler is only responsible for deriving the set of actions that comprise a model update\n * but does not actually dispatch them. The returned actions should be either manually dispatched\n * to the `ActionDispatcher`, or simply returned as the result of an\n * `ActionHandler.execute` method.\n */\n@injectable()\nexport class ModelSubmissionHandler {\n    @inject(DiagramConfiguration)\n    protected diagramConfiguration: DiagramConfiguration;\n\n    @inject(GModelSerializer)\n    protected serializer: GModelSerializer;\n\n    @inject(GModelFactory)\n    protected modelFactory: GModelFactory;\n\n    @inject(ModelState)\n    protected modelState: ModelState;\n\n    @inject(LayoutEngine)\n    @optional()\n    protected layoutEngine: LayoutEngine;\n\n    @inject(CommandStack)\n    protected commandStack: CommandStack;\n\n    @inject(ModelValidator)\n    @optional()\n    protected validator?: ModelValidator;\n\n    protected requestModelAction?: RequestModelAction;\n\n    /**\n     * Returns a list of actions to submit the initial revision of the client-side model, based on the injected\n     * {@link ModelState}. Typically this method is invoked by the {@link RequestModelActionHandler} when the diagram\n     * is (re)loaded.\n     * <p>\n     * These actions are not processed by this {@link ModelSubmissionHandler}, but should be either manually dispatched\n     * to the {@link ActionDispatcher}, or simply returned as the result of an\n     * {@link ActionHandler#execute(Action)} method.\n     * </p>\n     *\n     * @param requestAction The {@link RequestModelAction} that triggere the initial model update\n     * @return A list of actions to be processed in order to submit the intial model.\n     *\n     */\n    submitInitialModel(requestAction: RequestModelAction): MaybePromise<Action[]> {\n        /*\n         * In the default update action flow a `RequestModelAction` does not directly trigger a `SetModelAction` response\n         * (RequestModelAction (C) -> RequestBoundsAction (S) -> ComputedBoundsAction (C) -> SetModelACtion (S)\n         * Therefore we temporarily store the action later retrival\n         */\n        this.requestModelAction = requestAction;\n        return this.submitModel();\n    }\n\n    /**\n     * Returns a list of actions to update the client-side model, based on the injected {@link ModelState}\n     *\n     * These actions are not processed by this {@link ModelSubmissionHandler}, but should be either manually dispatched\n     * to the `ActionDispatcher`, or simply returned as the result of an `ActionHandler.execute()` method.\n     *\n     * @param reason The optional reason that caused the model update.\n     * @returns A list of actions to be processed in order to submit the model.\n     */\n    submitModel(reason?: DirtyStateChangeReason): MaybePromise<Action[]> {\n        this.modelFactory.createModel();\n\n        const revision = this.requestModelAction ? 0 : this.modelState.root.revision! + 1;\n        this.modelState.root.revision = revision;\n\n        if (this.diagramConfiguration.needsClientLayout) {\n            const root = this.serializeGModel();\n            return [RequestBoundsAction.create(root), SetDirtyStateAction.create(this.commandStack.isDirty, { reason })];\n        }\n        return this.submitModelDirectly(reason);\n    }\n\n    /**\n     * Returns a list of actions to directly update the client-side model without any server- or client-side layouting.\n     *\n     * Typically `ActionHandler`s don't invoke this method but use {@link submitModel()}\n     * instead, as this is only used to eventually submit the model on the client directly after all layouting is already\n     * performed before. The only foreseen caller of this method is `ComputedBoundsActionHandler`.\n     *\n     * These actions are not processed by this {@link ModelSubmissionHandler}, but should be either manually dispatched\n     * to the `ActionDispatcher`, or simply returned as the result of an\n     * `ActionHandler.execute()` method.\n     *\n     * @param reason The optional reason that caused the model update.\n     * @returns A list of actions to be processed in order to submit the model.\n     */\n    async submitModelDirectly(reason?: DirtyStateChangeReason): Promise<Action[]> {\n        if (this.diagramConfiguration.layoutKind === ServerLayoutKind.AUTOMATIC && this.layoutEngine) {\n            await this.layoutEngine.layout();\n        }\n\n        const root = this.serializeGModel();\n\n        const result: Action[] = [];\n        result.push(\n            this.requestModelAction\n                ? this.createSetModeAction(root)\n                : UpdateModelAction.create(root, { animate: this.diagramConfiguration.animatedUpdate })\n        );\n        if (!this.diagramConfiguration.needsClientLayout) {\n            result.push(SetDirtyStateAction.create(this.commandStack.isDirty, { reason }));\n        }\n        if (this.validator) {\n            const markers = await this.validator.validate([this.modelState.root], MarkersReason.LIVE);\n            result.push(SetMarkersAction.create(markers, { reason: MarkersReason.LIVE }));\n        }\n        return result;\n    }\n\n    protected createSetModeAction(newRoot: GModelRootSchema): SetModelAction {\n        const responseId = this.requestModelAction?.requestId ?? '';\n        const response = SetModelAction.create(newRoot, { responseId });\n        this.requestModelAction = undefined;\n        return response;\n    }\n\n    protected serializeGModel(): GModelRootSchema {\n        return this.serializer.createSchema(this.modelState.root);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Action, RequestModelAction, StatusAction } from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport { ActionDispatcher } from '../../actions/action-dispatcher';\nimport { ActionHandler } from '../../actions/action-handler';\nimport { ClientOptionsUtil } from '../../utils/client-options-util';\nimport { Logger } from '../../utils/logger';\nimport { ProgressMonitor, ProgressService } from '../progress/progress-service';\nimport { ModelState } from './model-state';\nimport { ModelSubmissionHandler } from './model-submission-handler';\nimport { SourceModelStorage } from './source-model-storage';\n\n@injectable()\nexport class RequestModelActionHandler implements ActionHandler {\n    actionKinds = [RequestModelAction.KIND];\n\n    @inject(Logger)\n    protected logger: Logger;\n\n    @inject(SourceModelStorage)\n    protected sourceModelStorage: SourceModelStorage;\n\n    @inject(ActionDispatcher)\n    protected actionDispatcher: ActionDispatcher;\n\n    @inject(ModelState)\n    protected modelState: ModelState;\n\n    @inject(ModelSubmissionHandler)\n    protected submissionHandler: ModelSubmissionHandler;\n\n    @inject(ProgressService)\n    protected progressService: ProgressService;\n\n    async execute(action: RequestModelAction): Promise<Action[]> {\n        this.logger.debug('Execute RequestModelAction:', action);\n        this.modelState.setAll(action.options ?? {});\n\n        const isReconnecting = ClientOptionsUtil.isReconnecting(action.options);\n\n        const progress = this.reportModelLoading('Model loading in progress');\n\n        if (isReconnecting) {\n            await this.handleReconnect(action);\n        } else {\n            await this.sourceModelStorage.loadSourceModel(action);\n        }\n        this.reportModelLoadingFinished(progress);\n\n        return this.submissionHandler.submitInitialModel(action);\n    }\n\n    protected async handleReconnect(action: RequestModelAction): Promise<void> {\n        const oldModelRoot = this.modelState.root;\n        if (oldModelRoot) {\n            // decrease revision by one, as each submit will increase it by one;\n            // the next save would produce warning that source model was changed otherwise\n            this.modelState.root.revision = (this.modelState.root.revision ?? 0) - 1;\n        } else {\n            await this.sourceModelStorage.loadSourceModel(action);\n        }\n    }\n\n    protected reportModelLoading(message: string): ProgressMonitor {\n        this.actionDispatcher.dispatch(StatusAction.create(message, { severity: 'INFO' }));\n        return this.progressService.start(message);\n    }\n\n    protected reportModelLoadingFinished(monitor: ProgressMonitor): void {\n        this.actionDispatcher.dispatch(StatusAction.create('', { severity: 'NONE' }));\n        monitor.end();\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Action, SaveModelAction, SetDirtyStateAction } from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport { ActionHandler } from '../../actions/action-handler';\nimport { CommandStack } from '../../command/command-stack';\nimport { SourceModelStorage } from './source-model-storage';\n\n@injectable()\nexport class SaveModelActionHandler implements ActionHandler {\n    actionKinds = [SaveModelAction.KIND];\n\n    @inject(CommandStack)\n    protected commandStack: CommandStack;\n\n    @inject(SourceModelStorage)\n    protected sourceModelStorage: SourceModelStorage;\n\n    async execute(action: SaveModelAction): Promise<Action[]> {\n        await this.sourceModelStorage.saveSourceModel(action);\n        this.commandStack.saveIsDone();\n        return [SetDirtyStateAction.create(this.commandStack.isDirty, { reason: 'save' })];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { MaybePromise, RequestModelAction, SaveModelAction } from '@eclipse-glsp/protocol';\n\nexport const SourceModelStorage = Symbol('SourceModelStorage');\n\n/**\n * A source model storage handles the persistence of source models, i.e. loading and saving it from/into the model state.\n *\n * A `source model` is an arbitrary model from which the graph model of the diagram is to be created.\n * Implementations of source model loaders are specific to the type of source model or persistence format that is used\n * for a type of source model. A source model loader obtains the information on which source model shall loaded from a\n * {@link RequestModelAction}; typically its client options. Once the source model is loaded, a model loader is expected\n * to put the loaded source model into the model state for further processing, such as transforming the loaded model\n * into a graph model (see GModelFactory).\n * On `saveSourceModel(SaveModelAction)`, the source model storage persists the source model from the model state.\n *\n * @see ClientOptionsUtil\n * @see GModelFactory\n */\nexport interface SourceModelStorage {\n    /**\n     * Loads a source model into the `modelState`.\n     *\n     * @param action Action sent by the client to specifying the information needed to load the source model.\n     */\n    loadSourceModel(action: RequestModelAction): MaybePromise<void>;\n\n    /**\n     * Saves the source model from the `modelState`.\n     * Implementations are expected to throw an error if the save didn't work.\n     *\n     * @param action Action sent by the client to specifying the information needed to save the source model.\n     */\n    saveSourceModel(action: SaveModelAction): MaybePromise<void>;\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nexport class JsonOpenerOptions {\n    selection: TextSelection;\n\n    constructor(selection?: TextSelection) {\n        if (selection) {\n            this.selection = selection;\n        }\n    }\n\n    public toString(): string {\n        return `JsonOpenerOptions [selection=${this.selection}]`;\n    }\n\n    public toJson(): string {\n        return JsonOpenerOptions.toJson(this);\n    }\n\n    public static toJson(options: JsonOpenerOptions): string {\n        return JSON.stringify(options);\n    }\n\n    public static fromJson(options: string): JsonOpenerOptions | undefined {\n        const parsed = JSON.parse(options);\n        return parsed instanceof JsonOpenerOptions ? parsed : undefined;\n    }\n}\n\nexport class TextSelection {\n    start: LinePosition;\n    end: LinePosition;\n\n    constructor(start: LinePosition, end: LinePosition) {\n        this.start = start;\n        this.end = end;\n    }\n\n    public toString(): string {\n        return `TextSelection [start=${this.start}, end=${this.end}]`;\n    }\n}\n\nexport class LinePosition {\n    line: number;\n    character: number;\n\n    constructor(line: number, character: number) {\n        this.line = line;\n        this.character = character;\n    }\n\n    public toString(): string {\n        return `LinePosition [line=${this.line}, character=${this.character}]`;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { multiInject, optional } from 'inversify';\nimport { NavigationTargetProviders } from '../../di/service-identifiers';\nimport { Registry } from '../../utils/registry';\nimport { NavigationTargetProvider } from './navigation-target-provider';\n\nexport const NavigationTargetProviderRegistry = Symbol('NavigationTargetProviderRegistry');\n\n/**\n * This registry keeps track of registered {@link NavigationTargetProvider} for a certain target types.\n */\nexport interface NavigationTargetProviderRegistry extends Registry<string, NavigationTargetProvider> {}\n\nexport class DefaultNavigationTargetProviderRegistry\n    extends Registry<string, NavigationTargetProvider>\n    implements NavigationTargetProviderRegistry\n{\n    constructor(@multiInject(NavigationTargetProviders) @optional() navigationTargetProviders: NavigationTargetProvider[] = []) {\n        super();\n        navigationTargetProviders.forEach(provider => this.register(provider.targetTypeId, provider));\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { EditorContext, NavigationTarget } from '@eclipse-glsp/protocol';\n\nexport const NavigationTargetProvider = Symbol('NavigationTargetProviders');\n\n/**\n * This provider retrieves navigation targets for its target type from a given {@link EditorContext}.\n */\nexport interface NavigationTargetProvider {\n    /**\n     * Specifies the navigation targets for the given target type.\n     *\n     * If the `args` of a returned {@link NavigationTarget} contain a\n     * {@link NavigationTarget.ELEMENT_IDS_SEPARATOR}, GLSP diagram clients should navigate to\n     * the model elements with the specified ID within the current diagram. Multiple element\n     * IDs can be concatenated with {@link NavigationTarget.ELEMENT_IDS_SEPARATOR}.\n     *\n     * If the `args` of a returned {@link NavigationTarget} contain a property\n     * `JSON_OPENER_OPTIONS` and its uri is outside of the current diagram, the string\n     * value of the `JSON_OPENER_OPTIONS` property will be parsed as JSON\n     * and merged into the opener options by the Theia integration of the GLSP client.\n     * This allows GLSP servers to pass additional opener options, such as a selection, etc.\n     * Other clients (non-Theia clients) should behave the same way.\n     *\n     * @param editorContext The editor context\n     * @returns the list of navigation targets\n     */\n    getTargets(editorContext: EditorContext): NavigationTarget[];\n\n    /**\n     * Returns the targetTypeId of the provider.\n     *\n     * @returns The targetTypeId of the provider.\n     */\n    targetTypeId: string;\n}\n","/********************************************************************************\n * Copyright (c) 2022-2024 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Args } from '@eclipse-glsp/protocol';\n\nexport class NavigationTargetResolution {\n    static readonly EMPTY = new NavigationTargetResolution([]);\n\n    constructor(\n        readonly elementIds: string[],\n        readonly args?: Args\n    ) {}\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Args, MaybePromise, NavigationTarget } from '@eclipse-glsp/protocol';\nimport { injectable } from 'inversify';\nimport { NavigationTargetResolution } from './navigation-target-resolution';\n\n@injectable()\nexport abstract class NavigationTargetResolver {\n    readonly INFO = 'info';\n    readonly WARNING = 'warning';\n    readonly ERROR = 'error';\n\n    abstract resolve(navigationTarget: NavigationTarget): MaybePromise<NavigationTargetResolution>;\n\n    createArgs(): Args {\n        return {};\n    }\n\n    createArgsWithInfo(message: string): Args {\n        const args = this.createArgs();\n        this.addInfo(message, args);\n        return args;\n    }\n\n    createArgsWithWarning(message: string): Args {\n        const args = this.createArgs();\n        this.addWarning(message, args);\n        return args;\n    }\n\n    createArgsWithError(message: string): Args {\n        const args = this.createArgs();\n        this.addError(message, args);\n        return args;\n    }\n\n    addInfo(message: string, args: Args): void {\n        args[this.INFO] = message;\n    }\n\n    addWarning(message: string, args: Args): void {\n        args[this.WARNING] = message;\n    }\n\n    addError(message: string, args: Args): void {\n        args[this.ERROR] = message;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Action, MaybePromise, NavigationTarget, RequestNavigationTargetsAction, SetNavigationTargetsAction } from '@eclipse-glsp/protocol';\nimport { injectable } from 'inversify';\nimport { inject } from 'inversify/lib/annotation/inject';\nimport { ActionHandler } from '../../actions/action-handler';\nimport { NavigationTargetProviderRegistry } from './navigation-target-provider-registry';\n\n@injectable()\nexport class RequestNavigationTargetsActionHandler implements ActionHandler {\n    actionKinds = [RequestNavigationTargetsAction.KIND];\n\n    @inject(NavigationTargetProviderRegistry)\n    protected navigationTargetProviderRegistry: NavigationTargetProviderRegistry;\n\n    execute(action: RequestNavigationTargetsAction): MaybePromise<Action[]> {\n        const editorContext = action.editorContext;\n        const allTargets: NavigationTarget[] = [];\n        const provider = this.navigationTargetProviderRegistry.get(action.targetTypeId);\n        if (provider) {\n            const targets = provider.getTargets(editorContext);\n            targets.forEach(target => allTargets.push(target));\n        }\n        return [SetNavigationTargetsAction.create(allTargets, { args: editorContext.args })];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Action, ResolveNavigationTargetAction, SetResolvedNavigationTargetAction } from '@eclipse-glsp/protocol';\nimport { inject, injectable, optional } from 'inversify';\nimport { ActionHandler } from '../../actions/action-handler';\nimport { Logger } from '../../utils/logger';\nimport { NavigationTargetResolver } from './navigation-target-resolver';\n\n@injectable()\nexport class ResolveNavigationTargetsActionHandler implements ActionHandler {\n    actionKinds = [ResolveNavigationTargetAction.KIND];\n\n    @inject(Logger)\n    protected logger: Logger;\n\n    @inject(NavigationTargetResolver)\n    @optional()\n    protected readonly navigationTargetResolver: NavigationTargetResolver;\n\n    async execute(action: ResolveNavigationTargetAction): Promise<Action[]> {\n        if (!this.navigationTargetResolver) {\n            this.logger.warn('Could not resolve navigation target. No implementation for: NavigationTargetResolver has been bound');\n            return [];\n        }\n        const target = action.navigationTarget;\n        const resolution = await this.navigationTargetResolver.resolve(target);\n        return [SetResolvedNavigationTargetAction.create(resolution.elementIds, { args: resolution.args })];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { GModelElement, GModelRoot } from '@eclipse-glsp/graph';\nimport { RequestPopupModelAction } from '@eclipse-glsp/protocol';\n\nexport const PopupModelFactory = Symbol('PopupModelFactory');\n\n/**\n * A PopupModelFactory creates a popup model for the given element.\n * A popup model is a {@link GHtmlRoot} that is self contained and not part of the diagram model.\n * In contrast to diagram elements popup models typically don't contain dynamically rendered {@link GModelElement}s and\n * use{@link GPreRenderedElement}s that contain server-side computed html or svg code instead.\n */\nexport interface PopupModelFactory {\n    /**\n     * Returns an {@link GModelRoot} for a given {@link GModelElement} triggered by a\n     * {@link RequestPopupModelAction}.\n     *\n     * @param element The element to create the popup model for.\n     * @param action  The {@link RequestPopupModelAction} that triggered this popup model creation.\n     * @returns An optional {@link GHtmlRoot} for a given {@link GModelElement}.\n     */\n    createPopupModel(element: GModelElement, action: RequestPopupModelAction): GModelRoot | undefined;\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Action, MaybePromise, RequestPopupModelAction, SetPopupModelAction } from '@eclipse-glsp/protocol';\nimport { inject, injectable, optional } from 'inversify';\nimport { ActionHandler } from '../../actions/action-handler';\nimport { GLSPServerError } from '../../utils/glsp-server-error';\nimport { Logger } from '../../utils/logger';\nimport { GModelSerializer } from '../model/gmodel-serializer';\nimport { ModelState } from '../model/model-state';\nimport { PopupModelFactory } from './popup-model-factory';\n\n@injectable()\nexport class RequestPopupModelActionHandler implements ActionHandler {\n    @inject(Logger)\n    protected logger: Logger;\n\n    @inject(PopupModelFactory)\n    @optional()\n    protected popupModelFactory?: PopupModelFactory;\n\n    @inject(ModelState)\n    protected modelState: ModelState;\n\n    @inject(GModelSerializer)\n    protected modelSerializer: GModelSerializer;\n\n    actionKinds = [RequestPopupModelAction.KIND];\n\n    execute(action: RequestPopupModelAction): MaybePromise<Action[]> {\n        if (this.popupModelFactory) {\n            const hoverElement = this.modelState.index.find(action.elementId);\n            if (hoverElement) {\n                const popupModel = this.popupModelFactory.createPopupModel(hoverElement, action);\n                if (popupModel) {\n                    const modelSchema = this.modelSerializer.createSchema(popupModel);\n                    return [SetPopupModelAction.create(modelSchema)];\n                }\n                return [];\n            }\n            throw new GLSPServerError(`Could not process 'RequestPopupModelAction'. Hover element with id ${action.elementId} not found`);\n        }\n        this.logger.warn('Could not process `RequestPopupModelAction`. No `PopupModelFactory` is bound');\n        return [];\n    }\n\n    priority?: number | undefined;\n}\n","/********************************************************************************\n * Copyright (c) 2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { EndProgressAction, StartProgressAction, UpdateProgressAction } from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport * as uuid from 'uuid';\nimport { ActionDispatcher } from '../../actions/action-dispatcher';\n\nexport const ProgressService = Symbol('ProgressService');\n\n/**\n * Service for starting and monitoring progress reporting to the client.\n */\nexport interface ProgressService {\n    /**\n     * Start a progress reporting.\n     * @param title The title shown in the UI for the progress reporting.\n     * @param options Additional optional options for the progress reporting.\n     * @returns a monitor to update and end the progress reporting later.\n     */\n    start(title: string, options?: ProgressOptions): ProgressMonitor;\n}\n\n/**\n * Optional progress reporting options.\n */\nexport interface ProgressOptions {\n    /** A message shown in the UI. */\n    message?: string;\n    /* The percentage (value range: 0 to 100) to show in the progress reporting. */\n    percentage?: number;\n}\n\n/**\n * The monitor of a progress reporting, which can be used to update and end the reporting.\n */\nexport interface ProgressMonitor {\n    /**\n     * Updates an ongoing progress reporting.\n     * @param options Updated message and/or percentage (value range: 0 to 100).\n     */\n    update(options: { message?: string; percentage?: number }): void;\n    /**\n     * Ends an ongoing progress reporting.\n     */\n    end(): void;\n}\n\n@injectable()\nexport class DefaultProgressService implements ProgressService {\n    @inject(ActionDispatcher)\n    protected actionDispatcher: ActionDispatcher;\n\n    start(title: string, options?: ProgressOptions): ProgressMonitor {\n        const progressId = uuid.v4();\n        this.actionDispatcher.dispatch(StartProgressAction.create({ progressId, title, ...options }));\n        return {\n            update: updateOptions => this.actionDispatcher.dispatch(UpdateProgressAction.create(progressId, updateOptions)),\n            end: () => this.actionDispatcher.dispatch(EndProgressAction.create(progressId))\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { GModelElement } from '@eclipse-glsp/graph';\n\n/**\n * Optional service used to check the validity of an edge being created. Used in combination with `dynamic`\n * `EdgeTypeHints`.\n * A dynamic edge type hint is used for cases where a plain list of allowed source and target element ids is not enough\n * to determine wether an edge being created is valid. In this cases the client will query the server to determine wether the edge\n * is valid. The `EdgeCreationChecker` then checks the given edge information and returns wether the edge being created is\n * valid.\n */\nexport interface EdgeCreationChecker {\n    /**\n     * Checks wether the given source element for an edge being created is valid i.e. if the\n     * given source is and allowed source element for the given edge type.\n     *\n     * @returns `true` if the edge source is valid, `false` otherwise\n     */\n    isValidSource(edgeType: string, sourceElement: GModelElement): boolean;\n\n    /**\n     * Checks wether the given information for an edge being created is valid i.e. if the\n     * given target is an allowed target for the given source and edge type.\n     *\n     * @return `true` if the edge target is valid, `false` otherwise\n     */\n    isValidTarget(edgeType: string, sourceElement: GModelElement, targetElement: GModelElement): boolean;\n}\nexport const EdgeCreationChecker = Symbol('EdgeCreationChecker');\n","/********************************************************************************\n * Copyright (c) 2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Action, CheckEdgeResultAction, MaybePromise, RequestCheckEdgeAction } from '@eclipse-glsp/protocol';\nimport { inject, injectable, optional } from 'inversify';\nimport { ActionHandler } from '../../actions/action-handler';\nimport { DiagramConfiguration } from '../../diagram/diagram-configuration';\nimport { GLSPServerError, getOrThrow } from '../../utils/glsp-server-error';\nimport { ModelState } from '../model/model-state';\nimport { EdgeCreationChecker } from './edge-creation-checker';\n\n@injectable()\nexport class RequestCheckEdgeActionHandler implements ActionHandler {\n    @inject(ModelState)\n    protected modelState: ModelState;\n\n    @inject(DiagramConfiguration)\n    protected diagramConfiguration: DiagramConfiguration;\n\n    @inject(EdgeCreationChecker)\n    @optional()\n    protected edgeCreationChecker?: EdgeCreationChecker;\n\n    readonly actionKinds: string[] = [RequestCheckEdgeAction.KIND];\n\n    execute(action: RequestCheckEdgeAction): MaybePromise<Action[]> {\n        const hasDynamicHint = this.diagramConfiguration.edgeTypeHints.some(hint => hint.elementTypeId === action.edgeType && hint.dynamic);\n        const { edgeType, sourceElementId, targetElementId } = action;\n        const isValid = this.edgeCreationChecker && hasDynamicHint ? this.validate(action) : true;\n\n        return [CheckEdgeResultAction.create({ edgeType, isValid, sourceElementId, targetElementId })];\n    }\n\n    protected validate(action: RequestCheckEdgeAction): boolean {\n        const sourceElement = getOrThrow(\n            this.modelState.index.get(action.sourceElementId),\n            'Invalid `RequestCheckEdgeTargetAction`!. Could not find a source element with id: ' + action.sourceElementId\n        );\n        const targetElement = action.targetElementId ? this.modelState.index.get(action.targetElementId) : undefined;\n\n        if (action.targetElementId && !targetElement) {\n            throw new GLSPServerError(\n                'Invalid `RequestCheckEdgeTargetAction`! Could not find a target element with id: ' + action.targetElementId\n            );\n        }\n        return targetElement\n            ? this.edgeCreationChecker!.isValidTarget(action.edgeType, sourceElement, targetElement)\n            : this.edgeCreationChecker!.isValidSource(action.edgeType, sourceElement);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Action, MaybePromise, RequestTypeHintsAction, SetTypeHintsAction } from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport { ActionHandler } from '../../actions/action-handler';\nimport { DiagramConfiguration } from '../../diagram/diagram-configuration';\n\n@injectable()\nexport class RequestTypeHintsActionHandler implements ActionHandler {\n    @inject(DiagramConfiguration) protected diagramConfiguration: DiagramConfiguration;\n\n    execute(action: RequestTypeHintsAction): MaybePromise<Action[]> {\n        return [\n            SetTypeHintsAction.create({\n                shapeHints: this.diagramConfiguration.shapeTypeHints,\n                edgeHints: this.diagramConfiguration.edgeTypeHints\n            })\n        ];\n    }\n\n    readonly actionKinds = [RequestTypeHintsAction.KIND];\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { GModelElement } from '@eclipse-glsp/graph';\nimport { Marker, MarkersReason, MaybePromise } from '@eclipse-glsp/protocol';\nimport { injectable } from 'inversify';\n\nexport const ModelValidator = Symbol('ModelValidator');\n\n/**\n * Validates a list of {@link GModelElement}s based on a set of validation rules and returns corresponding issue\n * {@link Marker}s.\n * An issue marker is a serializable description of the validation violation that can be visualized by the GLSP client.\n */\nexport interface ModelValidator {\n    /**\n     * Validates the given list of {@link GModelElement}s and returns a list of {@link Marker}s.\n     *\n     * @param elements The list of {@link GModelElement} to validate.\n     * @param reason The reason for a validation request, such as \"batch\" or \"live\" validation.\n     * @return A list of {@link Marker}s for the validated {@link GModelElement}s.\n     */\n    validate(elements: GModelElement[], reason?: string): MaybePromise<Marker[]>;\n}\n\n@injectable()\nexport abstract class AbstractModelValidator implements ModelValidator {\n    validate(elements: GModelElement[], reason: string): Marker[] {\n        const markers: Marker[] = [];\n        for (const element of elements) {\n            if (MarkersReason.LIVE === reason) {\n                markers.push(...this.doLiveValidation(element));\n            } else if (MarkersReason.BATCH === reason) {\n                markers.push(...this.doBatchValidation(element));\n            } else {\n                markers.push(...this.doValidationForCustomReason(element));\n            }\n            if (element.children) {\n                markers.push(...this.validate(element.children, reason));\n            }\n        }\n        return markers;\n    }\n\n    /**\n     * Perform the live validation rules for the given <code>element</code>.\n     *\n     * This will be invoked on start and after each operation for all elements.\n     * Thus, the validation should be rather inexpensive.\n     * There is no need to traverse through the children in this method as {@link #validate(List, String)} will invoke\n     * this method for all children anyway.\n     *\n     * @param element The element to validate.\n     * @return A list of {@link Marker}s for the validated {@link GModelElement}.\n     */\n    doLiveValidation(element: GModelElement): Marker[] {\n        return [];\n    }\n\n    /**\n     * Perform the batch validation rules for the given <code>element</code>.\n     *\n     * <p>\n     * This will be invoked on demand by the client.\n     * Thus, the validation can include more expensive validation rules.\n     * There is no need to traverse through the children in this method as {@link #validate(List, String)} will invoke\n     * this method for all children anyway.\n     * </p>\n     *\n     * @param element The element to validate.\n     * @return A list of {@link Marker}s for the validated {@link GModelElement}.\n     */\n    doBatchValidation(element: GModelElement): Marker[] {\n        return [];\n    }\n\n    /**\n     * Perform a validation for a custom <code>reason</code> with the given <code>element</code>.\n     *\n     * <p>\n     * GLSP editors may add custom reasons for triggering a validation, other than <code>live</code> and\n     * <code>batch</code>.\n     * Validation requests that are not live or batch validations will be handled by this method.\n     * There is no need to traverse through the children in this method as {@link #validate(List, String)} will invoke\n     * this method for all children anyway.\n     * </p>\n     *\n     * @param element The element to validate.\n     * @return A list of {@link Marker}s for the validated {@link GModelElement}.\n     */\n    doValidationForCustomReason(element: GModelElement): Marker[] {\n        return [];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Action, MarkersReason, RequestMarkersAction, SetMarkersAction } from '@eclipse-glsp/protocol';\nimport { inject, injectable, optional } from 'inversify';\nimport { ActionHandler } from '../../actions/action-handler';\nimport { GLSPServerError } from '../../utils/glsp-server-error';\nimport { ModelState } from '../model/model-state';\nimport { ModelValidator } from './model-validator';\n\n@injectable()\nexport class RequestMarkersHandler implements ActionHandler {\n    actionKinds = [RequestMarkersAction.KIND];\n\n    @inject(ModelValidator) @optional() validator: ModelValidator;\n    @inject(ModelState) modelState: ModelState;\n\n    async execute(action: RequestMarkersAction): Promise<Action[]> {\n        let elementIDs = action.elementsIDs;\n        if (!this.validator) {\n            throw new GLSPServerError('Cannot compute markers! No implementation for ModelValidator has been bound');\n        }\n\n        if (!elementIDs || elementIDs.length === 0 || (elementIDs.length === 1 && elementIDs[0] === 'EMPTY')) {\n            elementIDs = [this.modelState.root.id];\n        }\n\n        const modelElements = this.modelState.index.getAll(elementIDs);\n        const markers = await this.validator.validate(modelElements, action.reason ?? MarkersReason.BATCH);\n\n        return [SetMarkersAction.create(markers)];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { GLabel } from '@eclipse-glsp/graph';\nimport { ApplyLabelEditOperation, MaybePromise } from '@eclipse-glsp/protocol';\nimport { injectable } from 'inversify';\nimport { Command } from '../command/command';\nimport { getOrThrow } from '../utils/glsp-server-error';\nimport { GModelOperationHandler } from './gmodel-operation-handler';\n\n@injectable()\nexport class GModelApplyLabelEditOperationHandler extends GModelOperationHandler {\n    readonly operationType = ApplyLabelEditOperation.KIND;\n\n    createCommand(operation: ApplyLabelEditOperation): MaybePromise<Command | undefined> {\n        const label = getOrThrow(\n            this.modelState.index.findByClass(operation.labelId, GLabel),\n            'Element with provided ID cannot be found or is not a GLabel'\n        );\n        return label.text !== operation.text //\n            ? this.commandOf(() => (label.text = operation.text))\n            : undefined;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { GModelRoot, GNode } from '@eclipse-glsp/graph';\nimport { ChangeBoundsOperation, Dimension, MaybePromise, Point } from '@eclipse-glsp/protocol';\nimport { injectable } from 'inversify';\nimport { Command } from '../command/command';\nimport { GModelOperationHandler } from './gmodel-operation-handler';\n\n/**\n * Applies {@link ChangeBoundsOperation} directly to the GModel.\n */\n@injectable()\nexport class GModelChangeBoundsOperationHandler extends GModelOperationHandler {\n    operationType = ChangeBoundsOperation.KIND;\n\n    createCommand(operation: ChangeBoundsOperation): MaybePromise<Command | undefined> {\n        return this.commandOf(() => this.executeChangeBounds(operation));\n    }\n\n    protected executeChangeBounds(operation: ChangeBoundsOperation): void {\n        for (const element of operation.newBounds) {\n            this.changeElementBounds(element.elementId, element.newSize, element.newPosition);\n        }\n    }\n\n    protected changeElementBounds(elementId: string, newSize: Dimension, newPosition: Point | undefined): void {\n        const index = this.modelState.index;\n        const nodeToUpdate = index.findByClass(elementId, GNode);\n        if (!nodeToUpdate) {\n            return;\n        }\n\n        const parent = nodeToUpdate.parent;\n        let positionToSet = { x: 0, y: 0 };\n        if (newPosition) {\n            positionToSet = parent instanceof GModelRoot ? newPosition : { x: Math.max(0, newPosition.x), y: Math.max(0, newPosition.y) };\n        }\n        if (nodeToUpdate.layout) {\n            if (!nodeToUpdate.layoutOptions) {\n                nodeToUpdate.layoutOptions = {};\n            }\n            nodeToUpdate.layoutOptions['prefWidth'] = newSize.width;\n            nodeToUpdate.layoutOptions['prefHeight'] = newSize.height;\n        }\n\n        nodeToUpdate.size = newSize;\n        nodeToUpdate.position = positionToSet;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ChangeRoutingPointsOperation, MaybePromise } from '@eclipse-glsp/protocol';\nimport { injectable } from 'inversify';\nimport { Command } from '../command/command';\nimport { GLSPServerError } from '../utils/glsp-server-error';\nimport { applyRoutingPoints } from '../utils/layout-util';\nimport { GModelOperationHandler } from './gmodel-operation-handler';\n\n@injectable()\nexport class GModelChangeRoutingPointsOperationHandler extends GModelOperationHandler {\n    operationType = ChangeRoutingPointsOperation.KIND;\n\n    createCommand(operation: ChangeRoutingPointsOperation): MaybePromise<Command | undefined> {\n        return this.commandOf(() => this.executeChangeRoutingPoints(operation));\n    }\n\n    executeChangeRoutingPoints(operation: ChangeRoutingPointsOperation): MaybePromise<void> {\n        if (!operation.newRoutingPoints) {\n            throw new GLSPServerError('Incomplete change routingPoints  action');\n        }\n\n        const index = this.modelState.index;\n        operation.newRoutingPoints.forEach(routingPoints => applyRoutingPoints(routingPoints, index));\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { CutOperation, DeleteElementOperation, MaybePromise } from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport { ActionDispatcher } from '../actions/action-dispatcher';\nimport { Command } from '../command/command';\nimport { GModelOperationHandler } from './gmodel-operation-handler';\n\n@injectable()\nexport class GModelCutOperationHandler extends GModelOperationHandler {\n    readonly operationType = CutOperation.KIND;\n\n    @inject(ActionDispatcher)\n    protected actionDispatcher: ActionDispatcher;\n\n    createCommand(operation: CutOperation): MaybePromise<Command | undefined> {\n        const cuttableElementIds = this.getElementToCut(operation);\n        // If we have cuttable elements we dispatch a DeleteElementOperation otherwise do nothing\n        if (cuttableElementIds.length > 0) {\n            this.actionDispatcher.dispatch(DeleteElementOperation.create(cuttableElementIds));\n        }\n        return undefined;\n    }\n\n    protected getElementToCut(cutOperation: CutOperation): string[] {\n        return cutOperation.editorContext.selectedElementIds;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { GModelElement, GNode, GPort } from '@eclipse-glsp/graph';\nimport { DeleteElementOperation, MaybePromise } from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport { Command } from '../command/command';\nimport { GModelIndex } from '../features/model/gmodel-index';\nimport { Logger } from '../utils/logger';\nimport { GModelOperationHandler } from './gmodel-operation-handler';\n\n@injectable()\nexport class GModelDeleteOperationHandler extends GModelOperationHandler {\n    @inject(Logger)\n    protected logger: Logger;\n\n    protected allDependentsIds: Set<string>;\n\n    get operationType(): string {\n        return DeleteElementOperation.KIND;\n    }\n\n    createCommand(operation: DeleteElementOperation): MaybePromise<Command | undefined> {\n        const elementIds = operation.elementIds;\n        if (!elementIds || elementIds.length === 0) {\n            this.logger.warn('Elements to delete are not specified');\n            return undefined;\n        }\n        return this.commandOf(() => this.deleteElements(elementIds));\n    }\n\n    deleteElements(elementIds: string[]): MaybePromise<void> {\n        if (!elementIds || elementIds.length === 0) {\n            this.logger.warn('Elements to delete are not specified');\n            return;\n        }\n        const index = this.modelState.index;\n        this.allDependentsIds = new Set<string>();\n        const success = elementIds.every(eId => this.delete(eId, index));\n        if (!success) {\n            this.logger.warn('Could not delete all elements as requested (see messages above to find out why)');\n        }\n    }\n\n    protected delete(elementId: string, index: GModelIndex): boolean {\n        if (this.allDependentsIds.has(elementId)) {\n            return true;\n        }\n\n        const element = index.find(elementId);\n        if (!element) {\n            this.logger.warn('Element not found: ' + elementId);\n            return false;\n        }\n\n        if (!element.parent) {\n            this.logger.warn(\"The requested element doesn't have a parent; it can't be deleted\");\n            return false;\n        }\n\n        const dependents = new Set<GModelElement>();\n        this.collectDependents(dependents, element, false);\n\n        dependents.forEach(dependant => {\n            const index = dependant.parent.children.findIndex(element => element === dependant);\n            if (index > -1) {\n                dependant.parent.children.splice(index, 1);\n            }\n            this.allDependentsIds.add(dependant.id);\n        });\n\n        return true;\n    }\n\n    protected collectDependents(dependents: Set<GModelElement>, elementToDelete: GModelElement, isChild: boolean): void {\n        if (dependents.has(elementToDelete)) {\n            return;\n        }\n\n        if (elementToDelete.children.length > 0) {\n            elementToDelete.children.forEach(child => this.collectDependents(dependents, child, true));\n        }\n\n        if (elementToDelete instanceof GNode || elementToDelete instanceof GPort) {\n            const index = this.modelState.index;\n\n            index.getIncomingEdges(elementToDelete).forEach(incoming => {\n                dependents.add(incoming);\n            });\n            index.getOutgoingEdges(elementToDelete).forEach(outgoing => {\n                dependents.add(outgoing);\n            });\n        }\n        if (!isChild) {\n            dependents.add(elementToDelete);\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { GEdge, GModelElement, GPort } from '@eclipse-glsp/graph';\nimport { GNode } from '@eclipse-glsp/graph/lib/gnode';\nimport { CreateEdgeOperation, MaybePromise, TriggerEdgeCreationAction } from '@eclipse-glsp/protocol';\nimport { injectable } from 'inversify';\nimport { Command } from '../command/command';\nimport { CreateEdgeOperationHandler } from '../operations/create-operation-handler';\nimport { GModelOperationHandler } from './gmodel-operation-handler';\n\n/**\n * An abstract base implementation of {@link CreateEdgeOperation} handlers for diagram implementations\n * where the graphical model is also directly used as source model.\n * (i.e. all operation handlers directly modify the graphical model).\n */\n@injectable()\nexport abstract class GModelCreateEdgeOperationHandler extends GModelOperationHandler implements CreateEdgeOperationHandler {\n    override readonly operationType = CreateEdgeOperation.KIND;\n    abstract override label: string;\n    abstract elementTypeIds: string[];\n\n    override createCommand(operation: CreateEdgeOperation): MaybePromise<Command | undefined> {\n        return this.commandOf(() => this.executeCreation(operation));\n    }\n\n    getTriggerActions(): TriggerEdgeCreationAction[] {\n        return this.elementTypeIds.map(typeId => TriggerEdgeCreationAction.create(typeId));\n    }\n\n    executeCreation(operation: CreateEdgeOperation): void {\n        const index = this.modelState.index;\n\n        const source = index.find(operation.sourceElementId, element => element instanceof GNode || element instanceof GPort);\n        const target = index.find(operation.targetElementId, element => element instanceof GNode || element instanceof GPort);\n\n        if (!source || !target) {\n            throw new Error(\n                `Invalid source or target for source ID ${operation.sourceElementId} and target ID ${operation.targetElementId}`\n            );\n        }\n\n        const connection = this.createEdge(source, target);\n        if (connection) {\n            const currentModel = this.modelState.root;\n            currentModel.children.push(connection);\n        }\n    }\n\n    abstract createEdge(source: GModelElement, target: GModelElement): GEdge | undefined;\n}\n","/********************************************************************************\n * Copyright (c) 2022-2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { GModelElement, GNode } from '@eclipse-glsp/graph';\nimport {\n    Args,\n    CreateNodeOperation,\n    GhostElement,\n    MaybePromise,\n    Point,\n    SelectAction,\n    TriggerNodeCreationAction\n} from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport { ActionDispatcher } from '../actions/action-dispatcher';\nimport { Command } from '../command/command';\nimport { CreateNodeOperationHandler } from '../operations/create-operation-handler';\nimport { getRelativeLocation } from '../utils/layout-util';\nimport { GModelOperationHandler } from './gmodel-operation-handler';\n\n/**\n * An abstract base implementation of {@link CreateNodeOperationHandler} for diagram implementations\n * where the graphical model is also directly used as source model.\n * (i.e. all operation handlers directly modify the graphical model).\n */\n@injectable()\nexport abstract class GModelCreateNodeOperationHandler extends GModelOperationHandler implements CreateNodeOperationHandler {\n    @inject(ActionDispatcher)\n    protected actionDispatcher: ActionDispatcher;\n\n    abstract elementTypeIds: string[];\n\n    abstract override label: string;\n\n    override readonly operationType = CreateNodeOperation.KIND;\n\n    override createCommand(operation: CreateNodeOperation): MaybePromise<Command | undefined> {\n        return this.commandOf(() => this.executeCreation(operation));\n    }\n\n    executeCreation(operation: CreateNodeOperation): void {\n        const container = this.getContainer(operation) ?? this.modelState.root;\n        const relativeLocation = this.getRelativeLocation(operation);\n        const element = this.createNode(operation, relativeLocation);\n        if (element) {\n            container.children.push(element);\n            element.parent = container;\n            this.actionDispatcher.dispatchAfterNextUpdate(SelectAction.create({ selectedElementsIDs: [element.id] }));\n        }\n    }\n\n    getTriggerActions(): TriggerNodeCreationAction[] {\n        return this.elementTypeIds.map(elementTypeId => this.createTriggerNodeCreationAction(elementTypeId));\n    }\n\n    protected createTriggerNodeCreationAction(elementTypeId: string): TriggerNodeCreationAction {\n        return TriggerNodeCreationAction.create(elementTypeId, {\n            ghostElement: this.createTriggerGhostElement(elementTypeId),\n            args: this.createTriggerArgs(elementTypeId)\n        });\n    }\n\n    protected createTriggerGhostElement(elementTypeId: string): GhostElement | undefined {\n        return undefined;\n    }\n\n    protected createTriggerArgs(elementTypeId: string): Args | undefined {\n        return undefined;\n    }\n\n    /**\n     * Return the GModelElement that will contain the newly created node. It is usually\n     * the target element ({@link CreateNodeOperation.containerId}), but could also\n     * be e.g. an intermediate compartment, or even a different Node.\n     *\n     * @param operation\n     * @return the GModelElement that will contain the newly created node.\n     */\n    getContainer(operation: CreateNodeOperation): GModelElement | undefined {\n        const index = this.modelState.index;\n        return operation.containerId ? index.get(operation.containerId) : undefined;\n    }\n\n    getLocation(operation: CreateNodeOperation): Point | undefined {\n        return operation.location;\n    }\n\n    /**\n     * Retrieves the diagram absolute location and the target container from the given {@link CreateNodeOperation}\n     * and converts the absolute location to coordinates relative to the given container.\n     *  Relative coordinates can only be retrieved if the given container element is part of\n     * a hierarchy of {@link GBoundsAware} elements. This means each (recursive) parent element need to\n     * implement {@link GBoundsAware}. If that is not the case this method returns `undefined`.\n     * @param absoluteLocation The diagram absolute position.\n     * @param container The container element.\n     * @returns The relative position or `undefined`.\n     */\n    getRelativeLocation(operation: CreateNodeOperation): Point | undefined {\n        const container = this.getContainer(operation) ?? this.modelState.root;\n        const absoluteLocation = this.getLocation(operation) ?? Point.ORIGIN;\n        return getRelativeLocation(absoluteLocation, container);\n    }\n\n    abstract createNode(operation: CreateNodeOperation, relativeLocation?: Point): GNode | undefined;\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport { ActionHandlerConstructor } from '../actions/action-handler';\nimport { BindingTarget } from '../di/binding-target';\nimport { DiagramModule } from '../di/diagram-module';\nimport { InstanceMultiBinding } from '../di/multi-binding';\nimport { RequestClipboardDataActionHandler } from '../features/clipboard/request-clipboard-data-action-handler';\nimport { GModelFactory, GModelFactoryNullImpl } from '../features/model/gmodel-factory';\nimport { DefaultModelState, ModelState } from '../features/model/model-state';\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { OperationHandler, OperationHandlerConstructor } from '../operations/operation-handler';\nimport { GModelApplyLabelEditOperationHandler } from './apply-label-edit-operation-handler';\nimport { GModelChangeBoundsOperationHandler } from './change-bounds-operation-handler';\nimport { GModelChangeRoutingPointsOperationHandler } from './change-routing-points-operation-handler';\nimport { GModelCutOperationHandler } from './cut-operation-handler';\nimport { GModelDeleteOperationHandler } from './delete-operation-handler';\nimport { GModelPasteOperationHandler } from './paste-operation-handler';\nimport { GModelReconnectEdgeOperationHandler } from './reconnect-edge-operation-handler';\n\n/**\n * Extension of the {@link DiagramModule} to provide GModel integration.\n *\n * Contains all bindings of {@link DiagramModule}.\n *\n * Additionally binds:\n * - {@link GModelFactory} to {@link GModelFactoryNullImpl}\n * - {@link RequestClipboardDataActionHandler} to {@link ActionHandler}\n * - {@link GModelApplyLabelEditOperationHandler} to {@link OperationHandler}\n * - {@link GModelChangeBoundsOperationHandler} to {@link OperationHandler}\n * - {@link GModelCutOperationHandler} to {@link OperationHandler}\n * - {@link GModelDeleteOperationHandler} to {@link OperationHandler}\n * - {@link GModelPasteOperationHandler} to {@link OperationHandler}\n * - {@link GModelReconnectEdgeOperationHandler} to {@link OperationHandler}\n * - {@link GModelChangeRoutingPointsOperationHandler} to {@link OperationHandler}\n\n */\n@injectable()\nexport abstract class GModelDiagramModule extends DiagramModule {\n    protected override bindGModelFactory(): BindingTarget<GModelFactory> {\n        return GModelFactoryNullImpl;\n    }\n\n    protected bindModelState(): BindingTarget<ModelState> {\n        return DefaultModelState;\n    }\n\n    protected override configureActionHandlers(binding: InstanceMultiBinding<ActionHandlerConstructor>): void {\n        super.configureActionHandlers(binding);\n        binding.add(RequestClipboardDataActionHandler);\n    }\n\n    protected override configureOperationHandlers(binding: InstanceMultiBinding<OperationHandlerConstructor>): void {\n        super.configureOperationHandlers(binding);\n        binding.add(GModelApplyLabelEditOperationHandler);\n        binding.add(GModelChangeBoundsOperationHandler);\n        binding.add(GModelCutOperationHandler);\n        binding.add(GModelDeleteOperationHandler);\n        binding.add(GModelPasteOperationHandler);\n        binding.add(GModelReconnectEdgeOperationHandler);\n        binding.add(GModelChangeRoutingPointsOperationHandler);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { Command } from '../command/command';\nimport { GModelRecordingCommand } from '../command/recording-command';\nimport { GModelSerializer } from '../features/model/gmodel-serializer';\nimport { OperationHandler } from '../operations/operation-handler';\n\ninjectable();\nexport abstract class GModelOperationHandler extends OperationHandler {\n    @inject(GModelSerializer)\n    protected serializer: GModelSerializer;\n\n    protected commandOf(runnable: () => void): Command {\n        return new GModelRecordingCommand(this.modelState, this.serializer, runnable);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { GBoundsAware, GEdge, GModelElement, isGBoundsAware } from '@eclipse-glsp/graph';\nimport { EditorContext, GModelElementSchema, MaybePromise, PasteOperation, Point } from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport * as uuid from 'uuid';\nimport { Command } from '../command/command';\nimport { GModelSerializer } from '../features/model/gmodel-serializer';\nimport { GModelOperationHandler } from './gmodel-operation-handler';\n\n@injectable()\nexport class GModelPasteOperationHandler extends GModelOperationHandler {\n    operationType = PasteOperation.KIND;\n\n    protected readonly DEFAULT_OFFSET = 20;\n\n    @inject(GModelSerializer)\n    protected modelSerializer: GModelSerializer;\n\n    createCommand(operation: PasteOperation): MaybePromise<Command | undefined> {\n        const elements = this.getCopiedElements(operation.clipboardData['application/json']);\n        return elements.length > 0 //\n            ? this.commandOf(() => this.executePaste(elements, operation.editorContext))\n            : undefined;\n    }\n\n    protected getCopiedElements(jsonString: string): GModelElement[] {\n        const schemas: GModelElementSchema[] = JSON.parse(jsonString);\n        return schemas.map(schema => this.modelSerializer.createElement(schema, this.modelState.root));\n    }\n\n    protected executePaste(elements: GModelElement[], context: EditorContext): MaybePromise<void> {\n        shift(elements, this.computeOffset(elements, context.lastMousePosition));\n\n        const idMap = this.reassignIds(elements);\n        this.filterElements(elements, idMap);\n        this.rewireEdges(elements, idMap);\n\n        this.modelState.root.children.push(...elements);\n    }\n\n    protected computeOffset(elements: GModelElement[], lastMousePosition?: Point): Point {\n        const offset = { x: this.DEFAULT_OFFSET, y: this.DEFAULT_OFFSET };\n        if (lastMousePosition) {\n            const referenceElement = this.getReferenceElementForPasteOffset(elements);\n            if (referenceElement) {\n                const position = referenceElement.position ?? Point.ORIGIN;\n                offset.x = lastMousePosition.x - position.x;\n                offset.y = lastMousePosition.y - position.y;\n            }\n        }\n        return offset;\n    }\n\n    protected getReferenceElementForPasteOffset(elements: GModelElement[]): GBoundsAware | undefined {\n        let minY = Number.MAX_VALUE;\n        for (const element of elements) {\n            if (isGBoundsAware(element)) {\n                const position = element.position ?? Point.ORIGIN;\n                if (minY > position.y) {\n                    minY = position.y;\n                    return element;\n                }\n            }\n        }\n        return undefined;\n    }\n\n    protected reassignIds(elements: GModelElement[]): Map<string, string> {\n        const idMap = new Map<string, string>();\n        elements.forEach(element => {\n            const newId = uuid.v4();\n            idMap.set(element.id, newId);\n            element.id = newId;\n            const childMap = this.reassignIds(element.children);\n            childMap.forEach((value, key) => {\n                idMap.set(key, value);\n            });\n        });\n        return idMap;\n    }\n\n    protected filterElements(elements: GModelElement[], idMap: Map<string, string>): void {\n        elements.filter(e => !this.shouldExcludeElement(e, idMap));\n    }\n\n    protected shouldExcludeElement(element: GModelElement, idMap: Map<string, string>): boolean {\n        return false;\n    }\n\n    protected rewireEdges(elements: GModelElement[], idMap: Map<string, string>): void {\n        const edges = elements.filter(element => element instanceof GEdge) as GEdge[];\n        edges.forEach(edge => {\n            const sourceId = idMap.get(edge.sourceId);\n            if (sourceId) {\n                edge.sourceId = sourceId;\n            }\n            const targetId = idMap.get(edge.targetId);\n            if (targetId) {\n                edge.targetId = targetId;\n            }\n        });\n    }\n}\n\nexport function shift(elements: GModelElement[], offset: Point): void {\n    elements\n        .filter(element => isGBoundsAware(element))\n        .map(element => element as unknown as GBoundsAware)\n        .forEach(gBoundsAware => {\n            const position = gBoundsAware.position ?? Point.ORIGIN;\n            gBoundsAware.position = { x: position.x + offset.x, y: position.y + offset.y };\n        });\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { GEdge, GNode, GPort } from '@eclipse-glsp/graph';\nimport { MaybePromise, ReconnectEdgeOperation } from '@eclipse-glsp/protocol';\nimport { injectable } from 'inversify';\nimport { Command } from '../command/command';\nimport { GLSPServerError } from '../utils/glsp-server-error';\nimport { GModelOperationHandler } from './gmodel-operation-handler';\n\n@injectable()\nexport class GModelReconnectEdgeOperationHandler extends GModelOperationHandler {\n    operationType = ReconnectEdgeOperation.KIND;\n\n    createCommand(operation: ReconnectEdgeOperation): MaybePromise<Command | undefined> {\n        return this.commandOf(() => this.executeReconnect(operation));\n    }\n\n    executeReconnect(operation: ReconnectEdgeOperation): MaybePromise<void> {\n        if (!operation.edgeElementId || !operation.sourceElementId || !operation.targetElementId) {\n            throw new GLSPServerError('Incomplete reconnect connection action');\n        }\n\n        const index = this.modelState.index;\n\n        const edge = index.findByClass(operation.edgeElementId, GEdge);\n        const source = index.findByClass(operation.sourceElementId, GNode || GPort);\n        const target = index.findByClass(operation.targetElementId, GNode || GPort);\n\n        if (!edge) {\n            throw new Error(`Invalid edge: edge ID ${operation.edgeElementId}`);\n        }\n        if (!source) {\n            throw new Error(`Invalid source: source ID ${operation.sourceElementId}`);\n        }\n        if (!target) {\n            throw new Error(`Invalid target: target ID ${operation.targetElementId}`);\n        }\n\n        edge.sourceId = source.id;\n        edge.targetId = target.id;\n        edge.routingPoints = [];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2024 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './actions/action-dispatcher';\nexport * from './actions/action-handler';\nexport * from './actions/action-handler-registry';\nexport * from './actions/client-action-handler';\nexport * from './actions/global-action-provider';\nexport * from './command/command';\nexport * from './command/command-stack';\nexport * from './command/recording-command';\nexport * from './command/undo-redo-action-handler';\nexport * from './di/binding-target';\nexport * from './di/client-session-module';\nexport * from './di/diagram-module';\nexport * from './di/glsp-module';\nexport * from './di/multi-binding';\nexport * from './di/server-module';\nexport * from './di/service-identifiers';\nexport * from './diagram/diagram-configuration';\nexport * from './features/clipboard/request-clipboard-data-action-handler';\nexport * from './features/contextactions/command-palette-action-provider';\nexport * from './features/contextactions/context-actions-provider';\nexport * from './features/contextactions/context-actions-provider-registry';\nexport * from './features/contextactions/context-menu-item-provider';\nexport * from './features/contextactions/request-context-actions-handler';\nexport * from './features/contextactions/tool-palette-item-provider';\nexport * from './features/directediting/context-edit-validator';\nexport * from './features/directediting/context-edit-validator-registry';\nexport * from './features/directediting/label-edit-validator';\nexport * from './features/directediting/request-edit-validation-handler';\nexport * from './features/layout/computed-bounds-action-handler';\nexport * from './features/layout/layout-engine';\nexport * from './features/layout/layout-operation-handler';\nexport * from './features/model/gmodel-factory';\nexport * from './features/model/gmodel-index';\nexport * from './features/model/gmodel-serializer';\nexport * from './features/model/model-state';\nexport * from './features/model/model-submission-handler';\nexport * from './features/model/request-model-action-handler';\nexport * from './features/model/save-model-action-handler';\nexport * from './features/model/source-model-storage';\nexport * from './features/navigation/json-opener-options';\nexport * from './features/navigation/navigation-target-provider';\nexport * from './features/navigation/navigation-target-provider-registry';\nexport * from './features/navigation/navigation-target-resolution';\nexport * from './features/navigation/navigation-target-resolver';\nexport * from './features/navigation/request-navigation-targets-action-handler';\nexport * from './features/navigation/resolve-navigation-targets-action-handler';\nexport * from './features/popup/popup-model-factory';\nexport * from './features/popup/request-popup-model-action-handler';\nexport * from './features/progress/progress-service';\nexport * from './features/type-hints/edge-creation-checker';\nexport * from './features/type-hints/request-check-edge-action-handler';\nexport * from './features/type-hints/request-type-hints-action-handler';\nexport * from './features/validation/model-validator';\nexport * from './features/validation/request-markers-handler';\nexport * from './gmodel/apply-label-edit-operation-handler';\nexport * from './gmodel/change-bounds-operation-handler';\nexport * from './gmodel/change-routing-points-operation-handler';\nexport * from './gmodel/cut-operation-handler';\nexport * from './gmodel/delete-operation-handler';\nexport * from './gmodel/gmodel-create-edge-operation-handler';\nexport * from './gmodel/gmodel-create-node-operation-handler';\nexport * from './gmodel/gmodel-diagram-module';\nexport * from './gmodel/gmodel-operation-handler';\nexport * from './gmodel/paste-operation-handler';\nexport * from './gmodel/reconnect-edge-operation-handler';\nexport * from './launch/glsp-server-launcher';\nexport * from './launch/jsonrpc-server-launcher';\nexport * from './operations/compound-operation-handler';\nexport * from './operations/create-operation-handler';\nexport * from './operations/json-operation-handler';\nexport * from './operations/operation-action-handler';\nexport * from './operations/operation-handler';\nexport * from './operations/operation-handler-registry';\nexport * from './protocol/client-action';\nexport * from './protocol/glsp-server';\nexport * from './reexport';\nexport * from './session/client-session';\nexport * from './session/client-session-factory';\nexport * from './session/client-session-initializer';\nexport * from './session/client-session-listener';\nexport * from './session/client-session-manager';\nexport * from './utils/args-util';\nexport * from './utils/client-options-util';\nexport * from './utils/console-logger';\nexport * from './utils/glsp-server-error';\nexport * from './utils/layout-util';\nexport * from './utils/logger';\nexport * from './utils/promise-queue';\nexport * from './utils/registry';\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Disposable, DisposableCollection, MaybePromise } from '@eclipse-glsp/protocol';\nimport { Container, ContainerModule, inject, injectable, optional } from 'inversify';\nimport { ServerModule } from '../di/server-module';\nimport { InjectionContainer } from '../di/service-identifiers';\nimport { Logger } from '../utils/logger';\n\n@injectable()\nexport abstract class GLSPServerLauncher<T> implements Disposable {\n    @inject(Logger) protected logger: Logger;\n\n    protected _modules: ContainerModule[] = [];\n    protected running: boolean;\n    protected toDispose = new DisposableCollection();\n\n    @inject(InjectionContainer) @optional() protected parentContainer?: Container;\n\n    configure(serverModule: ServerModule, ...additionalModules: ContainerModule[]): void {\n        this._modules.push(serverModule, ...additionalModules);\n    }\n\n    createContainer(...additionalModules: ContainerModule[]): Container {\n        const container = this.parentContainer ? this.parentContainer.createChild() : new Container();\n        container.load(...this._modules, ...additionalModules);\n        return container;\n    }\n\n    start(startParams: T): MaybePromise<void> {\n        if (!this.running) {\n            this.running = true;\n            return this.run(startParams);\n        }\n        this.logger.warn('Could not start launcher. Launcher is already running!');\n    }\n\n    protected abstract run(startParams: T): MaybePromise<void>;\n\n    shutdown(): MaybePromise<void> {\n        if (this.running) {\n            this.logger.info('Shutdown GLSPServerLauncher');\n            const result = this.stop();\n            this.running = false;\n            return result;\n        }\n        this.logger.warn('Could not stop launcher. Launcher is not running!');\n    }\n\n    protected stop(): MaybePromise<void> {\n        this.dispose();\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    get modules(): ContainerModule[] {\n        if (!this._modules) {\n            throw new Error('The GLSPServerLauncher has not been configured yet');\n        }\n        return this._modules;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {\n    Disposable,\n    GLSPClientProxy,\n    GLSPServer,\n    JsonrpcClientProxy,\n    JsonrpcGLSPClient,\n    configureClientConnection\n} from '@eclipse-glsp/protocol';\nimport { Container, ContainerModule, inject, injectable } from 'inversify';\nimport * as jsonrpc from 'vscode-jsonrpc';\nimport { Logger } from '../utils/logger';\nimport { GLSPServerLauncher } from './glsp-server-launcher';\n\nexport const START_UP_COMPLETE_MSG = '[GLSP-Server]:Startup completed. Accepting requests on port:';\n\nexport interface JsonRpcServerInstance {\n    server: GLSPServer;\n    clientConnection: jsonrpc.MessageConnection;\n    container: Container;\n}\n\n@injectable()\nexport abstract class JsonRpcGLSPServerLauncher<T> extends GLSPServerLauncher<T> {\n    @inject(Logger)\n    protected override logger: Logger;\n\n    protected serverInstances = new Map<jsonrpc.MessageConnection, JsonRpcServerInstance>();\n    protected startupCompleteMessage = START_UP_COMPLETE_MSG;\n\n    constructor() {\n        super();\n        this.toDispose.push(\n            Disposable.create(() => {\n                this.serverInstances.forEach(instance => this.disposeServerInstance(instance));\n            })\n        );\n    }\n\n    protected disposeServerInstance(instance: JsonRpcServerInstance): void {\n        this.serverInstances.delete(instance.clientConnection);\n        instance.server.shutdown();\n        instance.container.unbindAll();\n        instance.clientConnection.dispose();\n    }\n\n    protected createServerInstance(clientConnection: jsonrpc.MessageConnection): void {\n        const container = this.createContainer(this.createJsonRpcModule(clientConnection));\n        const server = container.get<GLSPServer>(GLSPServer);\n        const instance = { container, clientConnection, server };\n        this.serverInstances.set(clientConnection, instance);\n        this.configureClientConnection(instance);\n    }\n\n    protected createJsonRpcModule(clientConnection: jsonrpc.MessageConnection): ContainerModule {\n        return new ContainerModule(bind => {\n            bind(GLSPClientProxy).toDynamicValue(ctx => {\n                const proxy = ctx.container.resolve(JsonrpcClientProxy);\n                proxy.initialize(clientConnection);\n                return proxy;\n            });\n        });\n    }\n\n    protected configureClientConnection(serverInstance: JsonRpcServerInstance): void {\n        configureClientConnection(serverInstance.clientConnection, serverInstance.server);\n\n        serverInstance.clientConnection.onNotification(JsonrpcGLSPClient.ShutdownNotification, () =>\n            this.disposeServerInstance(serverInstance)\n        );\n\n        this.logger.info('Starting GLSP server connection');\n    }\n\n    protected createClientProxy(serverInstance: JsonRpcServerInstance): GLSPClientProxy {\n        const proxy = serverInstance.container.resolve(JsonrpcClientProxy);\n        proxy.initialize(serverInstance.clientConnection);\n        return proxy;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { CompoundOperation } from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport { Command, CompoundCommand } from '../command/command';\nimport { OperationHandler } from './operation-handler';\nimport { OperationHandlerRegistry } from './operation-handler-registry';\n\n/**\n * Generic {@link OperationHandler} from {@link CompoundOperations}.\n * Retrieves the corresponding execution commands for the list of (sub) operations\n * and constructs a {@link CompoundCommand} for them.\n */\n@injectable()\nexport class CompoundOperationHandler extends OperationHandler {\n    @inject(OperationHandlerRegistry)\n    protected operationHandlerRegistry: OperationHandlerRegistry;\n\n    operationType = CompoundOperation.KIND;\n\n    async createCommand(operation: CompoundOperation): Promise<Command | undefined> {\n        const maybeCommands = operation.operationList.map(op => this.operationHandlerRegistry.getOperationHandler(op)?.execute(op));\n        const commands: Command[] = [];\n\n        for await (const command of maybeCommands) {\n            if (command) {\n                commands.push(command);\n            }\n        }\n        return new CompoundCommand(commands);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    CreateEdgeOperation,\n    CreateNodeOperation,\n    hasArrayProp,\n    hasFunctionProp,\n    hasStringProp,\n    MaybePromise,\n    TriggerEdgeCreationAction,\n    TriggerNodeCreationAction\n} from '@eclipse-glsp/protocol';\nimport { Command } from '../command/command';\nimport { OperationHandler } from './operation-handler';\n\n/**\n * A special {@link OperationHandler} that is responsible for the handling of (a subset of) {@link CreateEdgeOperation}s. Depending on its\n * operation type the triggered actions are {@link TriggerNodeCreationAction} or {@link TriggerEdgeCreationAction}s.\n */\nexport interface CreateEdgeOperationHandler extends OperationHandler {\n    label: string;\n    elementTypeIds: string[];\n    operationType: typeof CreateEdgeOperation.KIND;\n    getTriggerActions(): TriggerEdgeCreationAction[];\n    createCommand(operation: CreateEdgeOperation): MaybePromise<Command | undefined>;\n}\n\nexport interface CreateNodeOperationHandler extends OperationHandler {\n    readonly label: string;\n    elementTypeIds: string[];\n    operationType: typeof CreateNodeOperation.KIND;\n    getTriggerActions(): TriggerNodeCreationAction[];\n    createCommand(operation: CreateNodeOperation): MaybePromise<Command | undefined>;\n}\n/**\n * A special {@link OperationHandler} that is responsible for the handling of a node or edge creation operation. Depending on its\n * operation type the triggered actions are {@link TriggerNodeCreationAction} or {@link TriggerEdgeCreationAction}s.\n */\nexport type CreateOperationHandler = CreateNodeOperationHandler | CreateEdgeOperationHandler;\n\nexport type CreateOperationKind = typeof CreateNodeOperation.KIND | typeof CreateEdgeOperation.KIND;\n\nexport namespace CreateOperationHandler {\n    export function is(object: unknown): object is CreateOperationHandler {\n        return (\n            object instanceof OperationHandler &&\n            hasStringProp(object, 'operationType') &&\n            hasStringProp(object, 'label') &&\n            hasArrayProp(object, 'elementTypeIds') &&\n            hasFunctionProp(object, 'getTriggerActions', true)\n        );\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { GModelElement } from '@eclipse-glsp/graph';\nimport {\n    AnyObject,\n    Args,\n    CreateEdgeOperation,\n    CreateNodeOperation,\n    GhostElement,\n    MaybePromise,\n    Point,\n    TriggerEdgeCreationAction,\n    TriggerNodeCreationAction,\n    hasFunctionProp,\n    hasObjectProp\n} from '@eclipse-glsp/protocol';\nimport { injectable } from 'inversify';\nimport { Command } from '../command/command';\nimport { AbstractRecordingCommand } from '../command/recording-command';\nimport { ModelState } from '../features/model/model-state';\nimport { getRelativeLocation } from '../utils/layout-util';\nimport { CreateEdgeOperationHandler, CreateNodeOperationHandler } from './create-operation-handler';\nimport { OperationHandler } from './operation-handler';\n\n/**\n * Helper interface for {@link ModelState} implementations of diagram languages that use a (serializable) JSON-based source model.\n * Has to be implemented in order to reuse the {@link JsonOperationHandler} API.\n */\nexport interface JsonModelState<JsonObject extends AnyObject = AnyObject> extends ModelState {\n    readonly sourceModel: MaybePromise<JsonObject>;\n    updateSourceModel(sourceModel: JsonObject): MaybePromise<void>;\n}\n\nexport namespace JsonModelState {\n    export function is(modelState: ModelState): modelState is JsonModelState {\n        return hasObjectProp(modelState, 'sourceModel') && hasFunctionProp(modelState, 'updateSourceModel');\n    }\n}\n\n/**\n * Simple base implementation of {@link AbstractRecordingCommand} that allows recording of changes made\n * to the `sourceModel` of the given {@link JsonModelState} during the given `doExecute` function\n */\nexport class JsonRecordingCommand<JsonObject extends AnyObject = AnyObject> extends AbstractRecordingCommand<JsonObject> {\n    constructor(\n        protected modelState: JsonModelState<JsonObject>,\n        protected doExecute: () => MaybePromise<void>\n    ) {\n        super();\n    }\n\n    protected override getJsonObject(): MaybePromise<JsonObject> {\n        return this.modelState.sourceModel;\n    }\n\n    protected override postChange(newModel: JsonObject): MaybePromise<void> {\n        return this.modelState.updateSourceModel(newModel);\n    }\n}\n\n/**\n * Reusable {@link OperationHandler} base implementation for diagram languages that use a (serializable) JSON-based source model.\n * To use this class (or its subclasses) the injected {@link ModelState} has to implement the {@link JsonModelState} interface.\n *\n */\n@injectable()\nexport abstract class JsonOperationHandler extends OperationHandler {\n    protected commandOf(runnable: () => MaybePromise<void>): Command {\n        if (!JsonModelState.is(this.modelState)) {\n            throw new Error('Cannot create command. The underlying model state does not implement the `JsonModelState` interface');\n        }\n        return new JsonRecordingCommand(this.modelState, runnable);\n    }\n}\n\n/**\n * Reusable {@link CreateNodeOperationHandler} base implementation for diagram languages that use a (serializable) JSON-based source model.\n */\n@injectable()\nexport abstract class JsonCreateNodeOperationHandler extends JsonOperationHandler implements CreateNodeOperationHandler {\n    abstract elementTypeIds: string[];\n    abstract override label: string;\n    override readonly operationType = CreateNodeOperation.KIND;\n\n    abstract override createCommand(operation: CreateNodeOperation): MaybePromise<Command | undefined>;\n\n    getTriggerActions(): TriggerNodeCreationAction[] {\n        return this.elementTypeIds.map(elementTypeId => this.createTriggerNodeCreationAction(elementTypeId));\n    }\n\n    protected createTriggerNodeCreationAction(elementTypeId: string): TriggerNodeCreationAction {\n        return TriggerNodeCreationAction.create(elementTypeId, {\n            ghostElement: this.createTriggerGhostElement(elementTypeId),\n            args: this.createTriggerArgs(elementTypeId)\n        });\n    }\n\n    protected createTriggerGhostElement(elementTypeId: string): GhostElement | undefined {\n        return undefined;\n    }\n\n    protected createTriggerArgs(elementTypeId: string): Args | undefined {\n        return undefined;\n    }\n\n    /**\n     * Return the GModelElement that will contain the newly created node. It is usually\n     * the target element ({@link CreateNodeOperation.containerId}), but could also\n     * be e.g. an intermediate compartment, or even a different Node.\n     *\n     * @param operation\n     * @return the GModelElement that will contain the newly created node.\n     */\n    getContainer(operation: CreateNodeOperation): GModelElement | undefined {\n        const index = this.modelState.index;\n        return operation.containerId ? index.get(operation.containerId) : undefined;\n    }\n\n    getLocation(operation: CreateNodeOperation): Point | undefined {\n        return operation.location;\n    }\n\n    /**\n     * Retrieves the diagram absolute location and the target container from the given {@link CreateNodeOperation}\n     * and converts the absolute location to coordinates relative to the given container.\n     *  Relative coordinates can only be retrieved if the given container element is part of\n     * a hierarchy of {@link GBoundsAware} elements. This means each (recursive) parent element need to\n     * implement {@link GBoundsAware}. If that is not the case this method returns `undefined`.\n     * @param absoluteLocation The diagram absolute position.\n     * @param container The container element.\n     * @returns The relative position or `undefined`.\n     */\n    getRelativeLocation(operation: CreateNodeOperation): Point | undefined {\n        const container = this.getContainer(operation) ?? this.modelState.root;\n        const absoluteLocation = this.getLocation(operation) ?? Point.ORIGIN;\n        return getRelativeLocation(absoluteLocation, container);\n    }\n}\n\n/**\n * Reusable {@link CreateEdgeOperationHandler} base implementation for diagram languages that use a (serializable) JSON-based source model.\n */\n@injectable()\nexport abstract class JsonCreateEdgeOperationHandler extends JsonOperationHandler implements CreateEdgeOperationHandler {\n    abstract elementTypeIds: string[];\n    abstract override label: string;\n    override readonly operationType = CreateEdgeOperation.KIND;\n\n    abstract override createCommand(operation: CreateEdgeOperation): MaybePromise<Command | undefined>;\n\n    getTriggerActions(): TriggerEdgeCreationAction[] {\n        return this.elementTypeIds.map(typeId => TriggerEdgeCreationAction.create(typeId));\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Action, MaybePromise, MessageAction, Operation } from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport { ActionHandler } from '../actions/action-handler';\nimport { Command } from '../command/command';\nimport { CommandStack } from '../command/command-stack';\nimport { Operations } from '../di/service-identifiers';\nimport { ModelState } from '../features/model/model-state';\nimport { ModelSubmissionHandler } from '../features/model/model-submission-handler';\nimport { GLSPServerError } from '../utils/glsp-server-error';\nimport { OperationHandler } from './operation-handler';\nimport { OperationHandlerRegistry } from './operation-handler-registry';\n\n@injectable()\nexport class OperationActionHandler implements ActionHandler {\n    @inject(OperationHandlerRegistry)\n    protected operationHandlerRegistry: OperationHandlerRegistry;\n\n    @inject(ModelSubmissionHandler)\n    protected modelSubmissionHandler: ModelSubmissionHandler;\n\n    @inject(ModelState)\n    protected modelState: ModelState;\n\n    @inject(CommandStack)\n    protected commandStack: CommandStack;\n\n    constructor(@inject(Operations) readonly actionKinds: string[]) {}\n\n    execute(action: Operation): MaybePromise<Action[]> {\n        if (!this.handles(action)) {\n            throw new GLSPServerError(`Unhandled operation kind: ${action.kind}`);\n        }\n        if (this.modelState.isReadonly) {\n            return [\n                MessageAction.create(`Server is in readonly-mode! Could not execute operation: ${action.kind}`, {\n                    severity: 'WARNING'\n                })\n            ];\n        }\n        return this.executeOperation(action);\n    }\n\n    protected executeOperation(operation: Operation): MaybePromise<Action[]> {\n        const operationHandler = OperationActionHandler.getOperationHandler(operation, this.operationHandlerRegistry);\n        if (operationHandler) {\n            return this.executeHandler(operation, operationHandler);\n        }\n        return [];\n    }\n\n    protected async executeHandler(operation: Operation, handler: OperationHandler): Promise<Action[]> {\n        const command = await handler.execute(operation);\n        if (command) {\n            await this.executeCommand(command);\n        }\n        return this.modelSubmissionHandler.submitModel('operation');\n    }\n\n    protected async executeCommand(command: Command): Promise<void> {\n        return this.commandStack.execute(command);\n    }\n\n    protected submitModel(): MaybePromise<Action[]> {\n        return this.modelSubmissionHandler.submitModel('operation');\n    }\n\n    handles(action: Action): boolean {\n        return this.actionKinds.includes(action.kind);\n    }\n\n    /**\n     *  @Deprecated Use {@link OperationHandlerRegistry#getOperationHandler(Operation) instead}.\n     */\n\n    static getOperationHandler(operation: Operation, registry: OperationHandlerRegistry): OperationHandler | undefined {\n        return registry.getOperationHandler(operation);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Args, CreateOperation, Operation } from '@eclipse-glsp/protocol';\nimport { inject, injectable, optional } from 'inversify';\nimport { ClientSessionInitializer } from '../session/client-session-initializer';\nimport { Registry } from '../utils/registry';\nimport { CreateOperationHandler } from './create-operation-handler';\nimport { OperationHandler, OperationHandlerConstructor, OperationHandlerFactory } from './operation-handler';\n\n@injectable()\nexport class OperationHandlerRegistry extends Registry<string, OperationHandler> {\n    registerHandler(handler: OperationHandler): boolean {\n        if (CreateOperationHandler.is(handler)) {\n            handler.elementTypeIds.forEach(typeId => this.register(`${handler.operationType}_${typeId}`, handler));\n            return true;\n        } else {\n            return this.register(handler.operationType, handler);\n        }\n    }\n\n    getOperationHandler(operation: Operation): OperationHandler | undefined {\n        return CreateOperation.is(operation) ? this.get(`${operation.kind}_${operation.elementTypeId}`) : this.get(operation.kind);\n    }\n}\n\n@injectable()\nexport class OperationHandlerRegistryInitializer implements ClientSessionInitializer {\n    @inject(OperationHandlerFactory)\n    protected factory: OperationHandlerFactory;\n\n    @inject(OperationHandlerConstructor)\n    @optional()\n    protected handlerConstructors: OperationHandlerConstructor[] = [];\n\n    @inject(OperationHandlerRegistry)\n    protected registry: OperationHandlerRegistry;\n\n    initialize(_args?: Args): void {\n        const handlers = this.handlerConstructors.map(constructor => this.factory(constructor));\n        handlers.forEach(handler => this.registry.registerHandler(handler));\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { MaybePromise, Operation } from '@eclipse-glsp/protocol';\nimport { inject, injectable, interfaces } from 'inversify';\nimport { Command } from '../command/command';\nimport { ModelState } from '../features/model/model-state';\n\n/**\n * An operation handler can execute {@link Operation}s of a certain type (subclass).\n * The operation handler processes the operation in the {@link OperationHandler.execute()} method. The result\n * of the execution is a {@link Command} that captures the corresponding source model changes.\n * This command can be applied on the `CommandStack` and is reversible (undo) and can be reapplied (redo).\n *\n * The `OperationActionHandler` is responsible for retrieving all available (valid) operation handlers for an\n * operation that is dispatched via `ActionDispatcher`.\n */\n@injectable()\nexport abstract class OperationHandler {\n    @inject(ModelState)\n    protected modelState: ModelState;\n\n    /**\n     * Returns the operation type that can be handled by this operation handler.\n     *\n     * @returns the operation type that can be handled.\n     */\n    abstract readonly operationType: string;\n\n    readonly label?: string;\n\n    /**\n     * Creates a command that performs the operation in the source model(s). If `undefined` is  returned, no update\n     * is performed on the model(s).\n     *\n     * @param operation The operation to process.\n     * @return The created command to be executed on the command stack or `undefined` if nothing should be done.\n     */\n    abstract createCommand(operation: Operation): MaybePromise<Command | undefined>;\n\n    /**\n     * Executes the operation handler for the given {@link Operation} and returns the corresponding {@link Command}.\n     * If the given operation cannot be handled by this handler or the handler execution did not result in any changes\n     * `undefined` is returned.\n     *\n     * @param operation The operation that should be executed or empty if nothing should be done.\n     * @returns The command capturing the execution changes or `undefined`\n     */\n    execute(operation: Operation): MaybePromise<Command | undefined> {\n        return this.handles(operation) ? this.createCommand(operation) : undefined;\n    }\n\n    /**\n     * Validates whether the given {@link Operation} can be handled by this operation handler.\n     *\n     * @param operation The operation that should be validated.\n     * @returns `true` if the given operation can be handled, `false` otherwise.\n     */\n    handles(operation: Operation): boolean {\n        return this.modelState.root && operation.kind === this.operationType;\n    }\n}\n\nexport const OperationHandlerConstructor = Symbol('OperationHandlerConstructor');\n\nexport type OperationHandlerConstructor = interfaces.Newable<OperationHandler>;\n\nexport const OperationHandlerFactory = Symbol('OperationHandlerFactory');\n\nexport type OperationHandlerFactory = (constructor: OperationHandlerConstructor) => OperationHandler;\n","/********************************************************************************\n * Copyright (c) 2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Action } from '@eclipse-glsp/protocol';\n\n/**\n * A helper interface that allows the server to mark actions that have been received from the client.\n */\nexport interface ClientAction extends Action {\n    __receivedFromClient: true;\n}\n\nexport namespace ClientAction {\n    export function is(object: unknown): object is ClientAction {\n        return Action.is(object) && '__receivedFromClient' in object && object.__receivedFromClient === true;\n    }\n\n    /**\n     * Mark the given action as {@link ClientAction} by attaching the \"__receivedFromClient\" property\n     * @param action The action that should be marked as client action\n     */\n    export function mark(action: Action): void {\n        (action as ClientAction).__receivedFromClient = true;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    ActionMessage,\n    Args,\n    DisposeClientSessionParameters,\n    GLSPClientProxy,\n    GLSPServer,\n    GLSPServerListener,\n    InitializeClientSessionParameters,\n    InitializeParameters,\n    InitializeResult,\n    MaybePromise,\n    MessageAction,\n    ServerActions,\n    distinctAdd,\n    remove\n} from '@eclipse-glsp/protocol';\nimport { inject, injectable, multiInject, optional } from 'inversify';\nimport { GlobalActionProvider } from '../actions/global-action-provider';\nimport { ClientSession } from '../session/client-session';\nimport { ClientSessionManager } from '../session/client-session-manager';\nimport { GLSPServerError } from '../utils/glsp-server-error';\nimport { Logger } from '../utils/logger';\nimport { ClientAction } from './client-action';\n\n@injectable()\nexport class DefaultGLSPServer implements GLSPServer {\n    public static readonly PROTOCOL_VERSION = '1.0.0';\n\n    @inject(Logger)\n    protected logger: Logger;\n\n    @inject(ClientSessionManager)\n    protected sessionManager: ClientSessionManager;\n\n    @inject(GlobalActionProvider)\n    protected actionProvider: GlobalActionProvider;\n\n    @inject(GLSPClientProxy)\n    protected glspClientProxy: GLSPClientProxy;\n\n    protected initializeResult?: InitializeResult;\n\n    protected applicationId: string;\n\n    protected clientSessions: Map<string, ClientSession>;\n    protected serverListeners: GLSPServerListener[] = [];\n\n    constructor(@multiInject(GLSPServerListener) @optional() serverListeners: GLSPServerListener[] = []) {\n        this.clientSessions = new Map<string, ClientSession>();\n        serverListeners.forEach(listener => this.addListener(listener));\n    }\n\n    protected validateProtocolVersion(params: InitializeParameters): void {\n        if (params.protocolVersion !== DefaultGLSPServer.PROTOCOL_VERSION) {\n            throw new Error(\n                // eslint-disable-next-line max-len\n                `Protocol version mismatch! The client protocol version ${params.protocolVersion} is not compatible with the server protocol version ${DefaultGLSPServer.PROTOCOL_VERSION}!`\n            );\n        }\n    }\n\n    protected validateServerInitialized(): void {\n        if (!this.isInitialized()) {\n            throw new Error('This GLSP server has not been initialized.');\n        }\n    }\n\n    public async initialize(params: InitializeParameters): Promise<InitializeResult> {\n        this.logger.info(`Initializing server with: applicationId: ${params.applicationId}, protocolVersion: ${params.protocolVersion}`);\n        this.validateProtocolVersion(params);\n\n        if (this.isInitialized()) {\n            if (params.applicationId !== this.applicationId) {\n                throw new Error(`Could not initialize GLSP server for application ${params.applicationId}. \n                    Server has already been initialized for different application with id ${this.applicationId}`);\n            }\n            if (this.initializeResult) {\n                return this.initializeResult;\n            }\n        }\n\n        this.applicationId = params.applicationId;\n        const serverActions: ServerActions = {};\n\n        this.actionProvider.actionKinds.forEach((kinds, diagramType) => (serverActions[diagramType] = kinds));\n\n        let result = { protocolVersion: DefaultGLSPServer.PROTOCOL_VERSION, serverActions };\n\n        result = await this.handleInitializeArgs(result, params.args);\n        this.getListenersToNotify('serverInitialized').forEach((listener: GLSPServerListener) => listener.serverInitialized!(this));\n        this.initializeResult = result;\n        return result;\n    }\n\n    protected handleInitializeArgs(result: InitializeResult, args: Args | undefined): MaybePromise<InitializeResult> {\n        return result;\n    }\n\n    public async initializeClientSession(params: InitializeClientSessionParameters): Promise<void> {\n        this.logger.info(\n            `Initializing client session with: clientSessionId: '${params.clientSessionId}', diagramType: '${params.diagramType}'`\n        );\n        this.validateServerInitialized();\n\n        const session = this.sessionManager.getOrCreateClientSession(params);\n\n        this.clientSessions.set(params.clientSessionId, session);\n        return this.handleInitializeClientSessionArgs(params.args);\n    }\n\n    protected handleInitializeClientSessionArgs(args: Args | undefined): MaybePromise<void> {\n        return;\n    }\n\n    public async disposeClientSession(params: DisposeClientSessionParameters): Promise<void> {\n        this.logger.debug('Dispose client session with:', params);\n        this.validateServerInitialized();\n        if (this.sessionManager.disposeClientSession(params.clientSessionId)) {\n            this.clientSessions.delete(params.clientSessionId);\n            return this.handleDisposeClientSessionArgs(params.args);\n        }\n        return;\n    }\n\n    protected async handleDisposeClientSessionArgs(args: Args | undefined): Promise<void> {\n        return;\n    }\n\n    process(message: ActionMessage): void {\n        this.validateServerInitialized();\n        this.logger.info(`process [action=${message.action.kind}, clientId=${message.clientId}]`);\n        const clientSessionId = message.clientId;\n        const clientSession = this.clientSessions.get(clientSessionId);\n        if (!clientSession) {\n            throw new Error(`No client session has been initialized for client id: ${clientSessionId}`);\n        }\n        const action = message.action;\n        ClientAction.mark(action);\n        clientSession.actionDispatcher.dispatch(action).catch(error => this.handleProcessError(message, error));\n    }\n\n    protected handleProcessError(message: ActionMessage, reason: any): void | PromiseLike<void> {\n        let errorMsg = `Could not process action: '${message.action.kind}`;\n        this.logger.error(errorMsg);\n        this.logger.error(reason);\n        let details: string | undefined = reason?.toString?.();\n        if (reason instanceof GLSPServerError) {\n            details = reason.cause?.toString?.();\n            errorMsg = reason.message;\n        }\n        const errorAction = MessageAction.create(errorMsg, { severity: 'ERROR', details });\n        this.sendToClient({ clientId: message.clientId, action: errorAction });\n    }\n\n    protected sendToClient(message: ActionMessage): void {\n        this.glspClientProxy.process(message);\n    }\n\n    getClientSession(sessionId: string): ClientSession | undefined {\n        return this.clientSessions.get(sessionId);\n    }\n\n    public shutdown(): void {\n        this.logger.info('Shutdown GLSP Server');\n        this.getListenersToNotify('serverShutDown').forEach(listener => listener.serverShutDown!(this));\n        this.clientSessions.clear();\n        this.initializeResult = undefined;\n    }\n\n    protected isInitialized(): boolean {\n        return this.initializeResult !== undefined;\n    }\n\n    addListener(listener: GLSPServerListener): boolean {\n        distinctAdd(this.serverListeners, listener);\n        return true;\n    }\n\n    removeListener(listener: GLSPServerListener): boolean {\n        remove(this.serverListeners, listener);\n        return true;\n    }\n\n    protected getListenersToNotify(method: keyof GLSPServerListener): GLSPServerListener[] {\n        return this.serverListeners.filter(listener => listener[method]);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from '@eclipse-glsp/graph';\nexport * from '@eclipse-glsp/protocol';\nexport * from '@eclipse-glsp/protocol/lib/di';\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { GLSPClientProxy, InitializeClientSessionParameters } from '@eclipse-glsp/protocol';\nimport { Container, ContainerModule, inject, injectable } from 'inversify';\nimport { ActionDispatcher } from '../actions/action-dispatcher';\nimport { createClientSessionModule } from '../di/client-session-module';\nimport { DiagramModules, InjectionContainer } from '../di/service-identifiers';\nimport { GLSPServerError } from '../utils/glsp-server-error';\nimport { ClientSession, DefaultClientSession } from './client-session';\nimport { ClientSessionInitializer } from './client-session-initializer';\n\nexport const ClientSessionFactory = Symbol('ClientSessionFactory');\n\n/**\n * Handles the construction of new {@link ClientSession}. A client session factory has to know\n * how to derive the client session specific injector and its entrypoint (i.e. the {@link ActionDispatcher}\n * from a given client session id and a given diagram type.\n */\nexport interface ClientSessionFactory {\n    /**\n     * Create a new {@link ClientSession} based on the given client session id and diagram type.\n     *\n     * @param clientSessionId The client session id.\n     * @param diagramType     The diagram type.\n     * @returns A new instance of {@link ClientSession} that correlates to the given input parameters.\n     */\n    create(params: InitializeClientSessionParameters): ClientSession;\n}\n\n@injectable()\nexport class DefaultClientSessionFactory implements ClientSessionFactory {\n    @inject(InjectionContainer)\n    protected serverContainer: Container;\n\n    @inject(DiagramModules)\n    protected diagramModules: Map<string, ContainerModule[]>;\n\n    @inject(GLSPClientProxy)\n    protected glspClient: GLSPClientProxy;\n\n    create(params: InitializeClientSessionParameters): ClientSession {\n        const { clientSessionId: clientId, diagramType, clientActionKinds, args } = params;\n        const diagramModules = this.diagramModules.get(diagramType);\n        if (!diagramModules || diagramModules.length === 0) {\n            throw new GLSPServerError(`Could not retrieve diagram module configuration for diagram type: '${diagramType}''`);\n        }\n\n        const sessionModule = createClientSessionModule({ clientId, glspClient: this.glspClient, clientActionKinds });\n        const sessionContainer = this.serverContainer.createChild();\n        sessionContainer.load(...diagramModules, sessionModule);\n        const initializers = sessionContainer.getAll<ClientSessionInitializer>(ClientSessionInitializer);\n        initializers.forEach(service => service.initialize(args));\n        const actionDispatcher = sessionContainer.get<ActionDispatcher>(ActionDispatcher);\n        return new DefaultClientSession(clientId, diagramType, actionDispatcher, sessionContainer);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Args } from '@eclipse-glsp/protocol';\n\nexport const ClientSessionInitializer = Symbol('ClientSessionInitializer');\n\n/**\n * Client session initializers are services the are used to configure the client session container after its initialization.\n * The {@link ClientSessionFactory} is expected to retrieve and invoke all client session listeners from the container in the\n *  {@link ClientSessionFactory.create} method.\n */\nexport interface ClientSessionInitializer {\n    initialize(args?: Args): void;\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ClientSession } from './client-session';\n\n/**\n * A listener that gets notified on certain client session lifecycle events.<br>\n * Life cycle events:\n * * Session creation\n * * Session disposal\n *\n * The scope of relevant client session ids can be restricted when registering the listener with\n * `ClientSessionManager.addListener()`\n */\nexport interface ClientSessionListener {\n    /**\n     * Is invoked after a new {@link ClientSession} has been created by the `ClientSessionManager`.\n     *\n     * @param clientSession The newly created client session.\n     */\n    sessionCreated?(clientSession: ClientSession): void;\n\n    /**\n     * Is invoked after a {@link ClientSession} has been disposed by the `ClientSessionManager`.\n     *\n     * @param clientSession The client session that was disposed.\n     */\n    sessionDisposed?(clientSession: ClientSession): void;\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { GLSPServer, GLSPServerListener, InitializeClientSessionParameters, remove } from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport { GLSPServerError } from '../utils/glsp-server-error';\nimport { ClientSession } from './client-session';\nimport { ClientSessionFactory } from './client-session-factory';\nimport { ClientSessionListener } from './client-session-listener';\n\nexport const ClientSessionManager = Symbol('ClientSessionManager');\n\n/**\n * The central component that manages the lifecycle of client sessions.\n */\nexport interface ClientSessionManager {\n    /**\n     * Retries an existing (or created a new) {@link ClientSession} for the given id and diagram type.\n     * If a new session has been created all {@link ClientSessionListener}s are notified via the\n     * {@link ClientSessionListener.sessionCreated} method.\n     *\n     * @param clientSessionId The client session id (i.e. clientId).\n     * @param diagramType     The diagram type.\n     * @returns The existing or newly constructed {@link ClientSession}.\n     *\n     * @throws {@link GLSPServerError} if another session with matching client id but different diagram type already exists.\n     */\n    getOrCreateClientSession(params: InitializeClientSessionParameters): ClientSession;\n\n    /**\n     * Retrieve an existing (i.e. currently active) {@link ClientSession} for the given client session id.\n     *\n     * @param clientSessionId The client session id.\n     * @returns The client session for the given id o `undefined` if no session is present with the given id.\n     */\n    getSession(clientSessionId: string): ClientSession | undefined;\n\n    /**\n     * Return all currently active {@link ClientSession}s for the given diagram type.\n     *\n     * @param diagramType The diagram type.\n     * @returns An array of all currently active {@link ClientSession}s.\n     */\n    getSessionsByType(diagramType: string): Array<ClientSession>;\n\n    /**\n     * Dispose the active client session with the given id. This marks the end of the lifecylce of a client session.\n     * After successfully disposal all {@link ClientSessionListener}s are notified via the\n     * {@link ClientSessionListener.sessionDisposed} method.\n     *\n     * @param clientSessionId The id of the client session which should be disposed.\n     * @returns `true` if a session with the given id was active and successfully disposed, `false` otherwise.\n     */\n    disposeClientSession(clientSessionId: string): boolean;\n\n    /**\n     * Register a new {@link ClientSessionListener}. Optionally the scope of the listener can be restricted to a set\n     * of client session ids. If no client session ids are passed, the listener will be registered globally and trigger\n     * for all client sessions.\n     *\n     * @param listener         The listener that should be registered.\n     * @param clientSessionIds Scope of client ids\n     * @returns `true` if the listener was registered successfully, `false` otherwise\n     */\n    addListener(listener: ClientSessionListener, ...clientSessionIds: string[]): boolean;\n\n    /**\n     * Unregister a given {@link ClientSessionListener} from this client session manager.\n     *\n     * @param listener The listener that should be removed.\n     * @returns `false` if the listener is not registered, `true` if it was successfully unregistered.\n     */\n    removeListener(listener: ClientSessionListener): boolean;\n\n    /**\n     * Unregister all {@link ClientSessionListener} that haven been registered for the given scope of client session ids.\n     * If not client session ids are passed all listeners will be removed.\n     *\n     * @param clientSessionIds Scope (i.e. set) of client session ids.\n     */\n    removeListeners(...clientSessionIds: string[]): void;\n}\n\nconst ALL_CLIENT_IDS_KEY = '*';\n\n@injectable()\nexport class DefaultClientSessionManager implements ClientSessionManager, GLSPServerListener {\n    @inject(ClientSessionFactory) sessionFactory: ClientSessionFactory;\n\n    protected clientSessions: Map<string, ClientSession> = new Map<string, ClientSession>();\n    protected listeners: Map<string, ClientSessionListener[]> = new Map<string, ClientSessionListener[]>();\n\n    protected getListenersToNotify(clientSession: ClientSession, method: keyof ClientSessionListener): ClientSessionListener[] {\n        const globalListeners = this.listeners.get(ALL_CLIENT_IDS_KEY)?.filter(listener => listener[method]) ?? [];\n        const sessionListeners = this.listeners.get(clientSession.id)?.filter(listener => listener[method]) ?? [];\n        return [...globalListeners, ...sessionListeners];\n    }\n\n    getOrCreateClientSession(params: InitializeClientSessionParameters): ClientSession {\n        const { clientSessionId, diagramType } = params;\n        const session = this.clientSessions.get(clientSessionId);\n        if (session) {\n            if (session.diagramType !== diagramType) {\n                throw new GLSPServerError(`Could not initialize new session for diagram type '${diagramType}'\n                Another session with the same id for the diagram type ${session.diagramType} already exists`);\n            }\n            return session;\n        }\n\n        const newSession = this.sessionFactory.create(params);\n        this.clientSessions.set(clientSessionId, newSession);\n        this.getListenersToNotify(newSession, 'sessionCreated').forEach(listener => listener.sessionCreated!(newSession));\n        return newSession;\n    }\n\n    getSession(clientSessionId: string): ClientSession | undefined {\n        return this.clientSessions.get(clientSessionId);\n    }\n\n    getSessionsByType(diagramType: string): ClientSession[] {\n        return Array.from(this.clientSessions.values()).filter(session => session.diagramType === diagramType);\n    }\n\n    disposeClientSession(clientSessionId: string): boolean {\n        const session = this.clientSessions.get(clientSessionId);\n        if (session) {\n            session.dispose();\n            this.getListenersToNotify(session, 'sessionDisposed').forEach(listener => listener.sessionDisposed!(session));\n            this.clientSessions.delete(clientSessionId);\n            this.listeners.delete(clientSessionId);\n            return true;\n        }\n        return false;\n    }\n\n    addListener(listener: ClientSessionListener, ...clientSessionIds: string[]): boolean {\n        if (clientSessionIds.length === 0) {\n            this.addSingleListener(ALL_CLIENT_IDS_KEY, listener);\n        }\n        return clientSessionIds.map(clientId => this.addSingleListener(clientId, listener)).every(added => added);\n    }\n\n    protected addSingleListener(clientSessionId: string, listener: ClientSessionListener): boolean {\n        const listeners = this.listeners.get(clientSessionId) ?? [];\n        listeners.push(listener);\n        this.listeners.set(clientSessionId, listeners);\n        return true;\n    }\n\n    removeListener(listener: ClientSessionListener): boolean {\n        return Array.from(this.listeners.values())\n            .map(listeners => remove(listeners, listener))\n            .every(removed => removed);\n    }\n\n    removeListeners(...clientSessionIds: string[]): void {\n        if (clientSessionIds.length === 0) {\n            this.listeners.clear();\n        } else {\n            clientSessionIds.forEach(id => this.listeners.delete(id));\n        }\n    }\n\n    serverShutDown(server: GLSPServer): void {\n        Array.from(this.clientSessions.keys()).forEach(id => this.disposeClientSession(id));\n        this.listeners.clear();\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Disposable } from '@eclipse-glsp/protocol';\nimport { Container } from 'inversify';\nimport { ActionDispatcher } from '../actions/action-dispatcher';\n\n/**\n * Stores the core information that the `GLSPServer` needs to know about a client session.\n * When handling session specific requests (i.e. `ActionMessage`s the server retrieves the corresponding\n * client session from the `ClientSessionManager` and delegates the action message to its\n * {@link ActionDispatcher};\n */\nexport interface ClientSession extends Disposable {\n    /**\n     * The id of the client session.\n     */\n    readonly id: string;\n\n    /**\n     * The diagram type of the client session.\n     */\n    readonly diagramType: string;\n\n    /**\n     * The action dispatcher of this diagram type. The action dispatcher is typically created by the session\n     * specific injector and is basically the entrypoint to the session specific injection context.\n     */\n    readonly actionDispatcher: ActionDispatcher;\n\n    /**\n     * The session specific {@link Container}.\n     */\n    readonly container: Container;\n}\n\nexport class DefaultClientSession implements ClientSession {\n    constructor(\n        readonly id: string,\n        readonly diagramType: string,\n        readonly actionDispatcher: ActionDispatcher,\n        readonly container: Container\n    ) {}\n\n    dispose(): void {\n        if (Disposable.is(this.actionDispatcher)) {\n            this.actionDispatcher.dispose();\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Args, Point } from '@eclipse-glsp/protocol';\n\nexport namespace ArgsUtil {\n    export const KEY_EDGE_PADDING = 'edgePadding';\n    export const KEY_EDGE_SOURCE_POINT_X = 'edgeSourcePointX';\n    export const KEY_EDGE_SOURCE_POINT_Y = 'edgeSourcePointY';\n    export const KEY_EDGE_TARGET_POINT_X = 'edgeTargetPointX';\n    export const KEY_EDGE_TARGET_POINT_Y = 'edgeTargetPointY';\n\n    export const KEY_RADIUS_TOP_LEFT = 'radiusTopLeft';\n    export const KEY_RADIUS_TOP_RIGHT = 'radiusTopRight';\n    export const KEY_RADIUS_BOTTOM_RIGHT = 'radiusBottomRight';\n    export const KEY_RADIUS_BOTTOM_LEFT = 'radiusBottomLeft';\n\n    export function cornerRadius(radius: number): Args;\n    export function cornerRadius(topLeftBottomRight: number, topRightBottomLeft: number): Args;\n    export function cornerRadius(topLeft: number, topRight: number, bottomRight: number, bottomLeft: number): Args;\n    export function cornerRadius(radiusOrTopLeft: number, topRightOpt?: number, bottomRightOpt?: number, bottomLeftOpt?: number): Args {\n        const topLeft = radiusOrTopLeft;\n        let topRight = radiusOrTopLeft;\n        let bottomLeft = radiusOrTopLeft;\n        let bottomRight = radiusOrTopLeft;\n\n        if (topRightOpt) {\n            topRight = topRightOpt;\n            if (bottomRightOpt && bottomLeftOpt) {\n                bottomLeft = bottomLeftOpt;\n                bottomRight = bottomRightOpt;\n            } else {\n                bottomRight = radiusOrTopLeft;\n                bottomLeft = topRight;\n            }\n        }\n\n        return {\n            [KEY_RADIUS_TOP_LEFT]: topLeft,\n            [KEY_RADIUS_BOTTOM_LEFT]: bottomLeft,\n            [KEY_RADIUS_BOTTOM_RIGHT]: bottomRight,\n            [KEY_RADIUS_TOP_RIGHT]: topRight\n        };\n    }\n\n    export function edgePadding(edgePadding: number): Args {\n        return { [KEY_EDGE_PADDING]: edgePadding };\n    }\n\n    export function getEdgePadding(args: Args): number | undefined {\n        return getNumber(args, KEY_EDGE_PADDING);\n    }\n\n    export function getEdgeSourcePoint(args: Args = {}): Point | undefined {\n        const x = getNumber(args, KEY_EDGE_SOURCE_POINT_X);\n        const y = getNumber(args, KEY_EDGE_SOURCE_POINT_Y);\n        if (x && y) {\n            return { x, y };\n        }\n        return undefined;\n    }\n\n    export function getEdgeTargetPoint(args: Args = {}): Point | undefined {\n        const x = getNumber(args, KEY_EDGE_TARGET_POINT_X);\n        const y = getNumber(args, KEY_EDGE_TARGET_POINT_Y);\n        if (x && y) {\n            return { x, y };\n        }\n        return undefined;\n    }\n\n    export function get(args: Args = {}, key: string): string | undefined {\n        const value = args[key];\n        return value && typeof value === 'string' ? value : undefined;\n    }\n\n    export function getNumber(args: Args = {}, key: string): number | undefined {\n        const value = args[key];\n        return value && typeof value === 'number' ? value : undefined;\n    }\n\n    export function getBoolean(args: Args = {}, key: string): boolean {\n        const value = args[key];\n        return value && typeof value === 'boolean' ? value : false;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Args } from '@eclipse-glsp/protocol';\nimport { ArgsUtil } from './args-util';\n\nexport class ClientOptionsUtil {\n    public static FILE_PREFIX = 'file://';\n    public static IS_RECONNECTING = 'isReconnecting';\n\n    public static adaptUri(uri: string): string {\n        return uri.replace(this.FILE_PREFIX, '');\n    }\n\n    public static isReconnecting(options?: Args): boolean {\n        return ArgsUtil.getBoolean(options, ClientOptionsUtil.IS_RECONNECTING);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { BindingContext } from '@eclipse-glsp/protocol/lib/di';\nimport { injectable } from 'inversify';\nimport { LogLevel, Logger, LoggerConfigOptions, LoggerFactory, NullLogger, getRequestParentName } from './logger';\n\n/**\n *  Simple logger implementation that forwards logging calls to the `console` and\n *  can be used in both the browser and node context.\n */\n@injectable()\nexport class ConsoleLogger extends Logger {\n    constructor(\n        public logLevel: LogLevel = LogLevel.none,\n        public caller?: string\n    ) {\n        super();\n    }\n\n    info(message: string, ...params: any[]): void {\n        if (LogLevel.info <= this.logLevel) {\n            console.info(this.logMessage(message, params));\n        }\n    }\n\n    warn(message: string, ...params: any[]): void {\n        if (LogLevel.warn <= this.logLevel) {\n            console.warn(this.logMessage(message, params));\n        }\n    }\n\n    error(message: string, ...params: any[]): void {\n        if (LogLevel.error <= this.logLevel) {\n            console.error(this.logMessage(message, params));\n        }\n    }\n\n    debug(message: string, ...params: any[]): void {\n        if (LogLevel.debug <= this.logLevel) {\n            console.debug(this.logMessage(message, params));\n        }\n    }\n\n    logMessage(message: string, ...params: any[]): string {\n        const timestamp = new Date().toLocaleTimeString();\n        const caller = this.caller ? `[${this.caller}]` : '';\n        const additional = this.logAdditionals(...params);\n        return `${timestamp} ${this.logLevel} - ${caller} ${message} ${additional}`;\n    }\n\n    logAdditionals(...params: any[]): string {\n        if (!params || params.length === 0) {\n            return '';\n        }\n        return params.map(param => this.stringify(param)).join(',\\n');\n    }\n\n    stringify(param: unknown): string {\n        if (param instanceof Error) {\n            return `${param.message}\n            ${param.stack || ''}`;\n        }\n        return JSON.stringify(param, undefined, 4);\n    }\n}\n\nexport function configureConsoleLogger<T extends LoggerConfigOptions>(context: BindingContext, options: T): void {\n    if (!options.consoleLog) {\n        context.bind(Logger).to(NullLogger).inSingletonScope();\n    } else {\n        context.bind(Logger).toDynamicValue(ctx => new ConsoleLogger(options.logLevel, getRequestParentName(ctx)));\n    }\n    context.bind(LoggerFactory).toFactory(dynamicContext => (caller: string) => {\n        const logger = dynamicContext.container.get(Logger);\n        logger.caller = caller;\n        return logger;\n    });\n}\n","/********************************************************************************\n * Copyright (c) 2022-2024 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nexport class GLSPServerError extends Error {\n    constructor(\n        message: string,\n        readonly cause?: unknown\n    ) {\n        super(message);\n    }\n}\n\nexport function getOrThrow<T>(optional: undefined | T, errorMsg: string): T {\n    if (optional !== undefined) {\n        return optional;\n    }\n    throw new GLSPServerError(errorMsg);\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { GAlignable, GBoundsAware, GEdge, GGraph, GModelElement, GModelRoot, isGAlignable, isGBoundsAware } from '@eclipse-glsp/graph';\nimport { ElementAndAlignment, ElementAndBounds, ElementAndRoutingPoints, Point } from '@eclipse-glsp/protocol';\nimport { GModelIndex } from '../features/model/gmodel-index';\nimport { ArgsUtil } from './args-util';\nimport { getOrThrow, GLSPServerError } from './glsp-server-error';\n\n/**\n * Applies the new bounds to the model.\n *\n * @param bounds The new bounds.\n * @param index  The model index.\n * @returns The changed element.\n */\nexport function applyElementAndBounds(bounds: ElementAndBounds, index: GModelIndex): GBoundsAware | undefined {\n    const element = getOrThrow(index.get(bounds.elementId), 'Model element not found! ID: ' + bounds.elementId);\n    if (isGBoundsAware(element)) {\n        if (bounds.newPosition !== undefined) {\n            element.position = bounds.newPosition;\n        }\n        element.size = bounds.newSize;\n        return element;\n    }\n    return undefined;\n}\n\n/**\n * Applies the new alignment to the model.\n *\n * @param alignment The new alignment.\n * @param index     The model index.\n * @returns The changed element.\n */\nexport function applyAlignment(alignment: ElementAndAlignment, index: GModelIndex): GAlignable | undefined {\n    const element = getOrThrow(index.get(alignment.elementId), 'Model element not found! ID: ' + alignment.elementId);\n    if (isGAlignable(element)) {\n        element.alignment = alignment.newAlignment;\n        return element;\n    }\n    return undefined;\n}\n\n/**\n * Applies the new route to the model.\n *\n * @param route The new route.\n * @param index The model index.\n * @returns The changed element.\n */\nexport function applyRoute(route: ElementAndRoutingPoints, index: GModelIndex): GEdge {\n    const routingPoints = route.newRoutingPoints ?? [];\n    if (routingPoints.length < 2) {\n        throw new GLSPServerError('Invalid Route!');\n    }\n    // first and last point mark the source and target point\n    const edge = applyRoutingPoints(route, index);\n    const edgeRoutingPoints = edge.routingPoints;\n\n    const args = edge.args ?? {};\n    const source = edgeRoutingPoints.shift()!;\n    const target = edgeRoutingPoints.pop()!;\n    args[ArgsUtil.KEY_EDGE_SOURCE_POINT_X] = source.x;\n    args[ArgsUtil.KEY_EDGE_SOURCE_POINT_Y] = source.y;\n    args[ArgsUtil.KEY_EDGE_TARGET_POINT_X] = target.x;\n    args[ArgsUtil.KEY_EDGE_TARGET_POINT_Y] = target.y;\n    return edge;\n}\n\n/**\n * Returns the complete route of the given edge. The route, as opposed to the routing points, also contain the source\n * and target point.\n *\n * @param edge The edge from which we get the route\n * @returns complete edge route\n */\nexport function getRoute(edge: GEdge): ElementAndRoutingPoints {\n    const sourcePoint = ArgsUtil.getEdgeSourcePoint(edge.args);\n    if (!sourcePoint) {\n        throw new GLSPServerError('Cannot get route without source point!');\n    }\n    const targetPoint = ArgsUtil.getEdgeTargetPoint(edge.args);\n    if (!targetPoint) {\n        throw new GLSPServerError('Cannot get route without target point!');\n    }\n    const route: Point[] = [];\n    route.push(sourcePoint);\n    route.push(...edge.routingPoints);\n    route.push(targetPoint);\n    return { elementId: edge.id, newRoutingPoints: route };\n}\n\nexport function applyRoutingPoints(routingPoints: ElementAndRoutingPoints, index: GModelIndex): GEdge {\n    const edge = getOrThrow(index.findByClass(routingPoints.elementId, GEdge), 'Model element not found! ID: ' + routingPoints.elementId);\n    edge.routingPoints = routingPoints.newRoutingPoints ?? [];\n    return edge;\n}\n/**\n * Returns the relative location of the given absolute location within the container.\n *\n * @param absoluteLocation absolute location\n * @param container        container\n * @return relative location if it can be determined, absolute location in case of error and null if the container\n *         cannot contain any location.\n */\nexport function getRelativeLocation(absoluteLocation: Point, container: GModelElement): Point | undefined {\n    const allowNegativeCoordinates = container instanceof GGraph;\n    if (isGBoundsAware(container)) {\n        const relativePosition = absoluteToRelative(absoluteLocation, container);\n        const relativeLocation = allowNegativeCoordinates\n            ? relativePosition\n            : { x: Math.max(0, relativePosition.x), y: Math.max(0, relativePosition.y) };\n        return relativeLocation;\n    }\n    return undefined;\n}\n\n/**\n * Convert a point in absolute coordinates to a point relative to the specified GBoundsAware.\n * Note: this method only works if the specified {@link GBoundsAware} is part of a\n * hierarchy of {@link GBoundsAware}. If any of its parents (recursively) does not implement\n * {@link GBoundsAware}, this method will throw an exception.\n *\n * @param absolutePoint\n * @param modelElement\n * @returns\n *         A new point, relative to the coordinates space of the specified {@link GBoundsAware}\n * @throws Error if the modelElement is not part of a {@link GBoundsAware} hierarchy\n */\nexport function absoluteToRelative(absolutePoint: Point, modelElement: GModelElement & GBoundsAware): Point {\n    let parentElement;\n    if (!(modelElement instanceof GModelRoot)) {\n        parentElement = modelElement.parent;\n    }\n\n    let relativeToParent: Point;\n    if (!parentElement) {\n        relativeToParent = { x: absolutePoint.x, y: absolutePoint.y };\n    } else {\n        if (!isGBoundsAware(parentElement)) {\n            throw new Error(`The element is not part of a GBoundsAware hierarchy: ${modelElement}`);\n        }\n        relativeToParent = absoluteToRelative(absolutePoint, parentElement);\n    }\n\n    const x = modelElement.position?.x ?? 0;\n    const y = modelElement.position?.y ?? 0;\n\n    return { x: relativeToParent.x - x, y: relativeToParent.y - y };\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable, interfaces } from 'inversify';\n\n@injectable()\nexport abstract class Logger {\n    abstract logLevel: LogLevel;\n\n    abstract caller?: string;\n\n    abstract info(message: string, ...params: any[]): void;\n\n    abstract warn(message: string, ...params: any[]): void;\n\n    abstract error(message: string, ...params: any[]): void;\n\n    abstract debug(message: string, ...params: any[]): void;\n}\n\nexport class NullLogger extends Logger {\n    logLevel: LogLevel;\n    caller?: string | undefined;\n    info(message: string, ...params: any[]): void {\n        // no-op\n    }\n    warn(message: string, ...params: any[]): void {\n        // no-op\n    }\n    error(message: string, ...params: any[]): void {\n        // no-op\n    }\n    debug(message: string, ...params: any[]): void {\n        // no-op\n    }\n}\n\nexport const LoggerFactory = Symbol('LoggerFactory');\n\nexport type LoggerFactory = (caller: string) => Logger;\n\nexport enum LogLevel {\n    none = 0,\n    error = 1,\n    warn = 2,\n    info = 3,\n    debug = 4\n}\n\nexport function asLogLevel(level: string | number): LogLevel | undefined {\n    let levelKey = level;\n    if (typeof levelKey === 'string') {\n        levelKey = levelKey.toLowerCase();\n    }\n\n    if (levelKey in LogLevel) {\n        return (LogLevel as any)[level];\n    }\n    return undefined;\n}\n\nexport interface LoggerConfigOptions {\n    consoleLog?: boolean;\n    logLevel?: LogLevel;\n}\n\nexport function getRequestParentName(context: interfaces.Context): string | undefined {\n    if (context.currentRequest.parentRequest) {\n        const bindings = context.currentRequest.parentRequest.bindings;\n        if (bindings.length > 0) {\n            const binding = bindings[0] as interfaces.Binding<{ name?: string }>;\n            return binding.implementationType?.name;\n        }\n    }\n    return undefined;\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * Description for promises that are put into a queue and\n * resolved once dequeued.\n */\nexport interface PromiseQueueElement<T = void> {\n    promise: () => Promise<T>;\n    resolve: (value: T) => void;\n    reject: (reason?: any) => void;\n}\n\n/**\n * A data structure that enables controlled,sequential resolving\n * of promises. Promises that are put in this queue are processed one by one.\n * i.e. After the first promise in the queue is resolved, it will be removed from the queue and the resolving of the\n * the next promise (if present) will start. The queue can only resolve one promise at a given time.\n */\nexport class PromiseQueue<T = void> {\n    protected queue: PromiseQueueElement<T>[] = [];\n    protected busy = false;\n\n    /**\n     * Add a {@link PromiseQueueElement} to the queue\n     * @param promise The element that should be queued\n     * @param atStart if `true` the element is added to the start of queue, otherwise it's added at queue end.\n     * @returns A promise of the queued promise that resolves once dequeued.\n     */\n    enqueue(promise: () => Promise<T>): Promise<T> {\n        return new Promise((resolve, reject) => {\n            const element = {\n                promise,\n                resolve,\n                reject\n            };\n            this.queue.push(element);\n            this.dequeue();\n        });\n    }\n\n    protected dequeue(): boolean {\n        if (this.busy) {\n            return false;\n        }\n\n        const element = this.queue.shift();\n        if (!element) {\n            return false;\n        }\n\n        this.busy = true;\n        this.resolveQueuedPromise(element).catch(error => {\n            element.reject(error);\n            this.busy = false;\n            this.dequeue();\n        });\n\n        return true;\n    }\n\n    protected async resolveQueuedPromise(element: PromiseQueueElement<T>): Promise<void> {\n        try {\n            const value = await element.promise();\n            return element.resolve(value);\n        } catch (error) {\n            element.reject(error);\n        } finally {\n            this.busy = false;\n            this.dequeue();\n        }\n    }\n\n    get isBusy(): boolean {\n        return this.busy;\n    }\n\n    get size(): number {\n        return this.queue.length;\n    }\n\n    get isEmpty(): boolean {\n        return this.queue.length === 0;\n    }\n\n    clear(): void {\n        this.queue = [];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { remove } from '@eclipse-glsp/protocol/lib/utils/array-util';\nimport { inject, injectable } from 'inversify';\nimport { Logger } from './logger';\n\n/**\n * A registry manages a set of key-value pairs and provides query functionality. In GLSP this is typically used to\n * provide a convenience API for working with multi-injected instances e.g. action handlers or\n * operation handlers.\n *\n * @typeParam K Key type\n * @param V Value type\n */\n\n@injectable()\nexport class Registry<K, V> {\n    @inject(Logger)\n    protected logger: Logger;\n\n    protected elements: Map<K, V> = new Map();\n    /**\n     * Registers a new key-value pair.\n     *\n     * @param key     The key object.\n     * @param element The value object.\n     * @returns `true` if the pair was registered successfully, `false` if another pair with the same key is already\n     *         registered.\n     */\n    register(key: K, value: V): boolean {\n        if (!this.hasKey(key)) {\n            this.elements.set(key, value);\n            return true;\n        }\n        this.logger.warn('Could not register key-value pair. Key is already registered', { key, value });\n        return false;\n    }\n\n    /**\n     * Removes the value with the given key from the registry.\n     *\n     * @param key The key of the value which should be removed.\n     * @returns `true` if the value was removed successfully, `false` if no value was registered for the given key.\n     */\n    deregister(key: K): boolean {\n        return this.elements.delete(key);\n    }\n\n    /**\n     * Queries the registry to check whether a value for the given key is registered.\n     *\n     * @param key The key which should be checked.\n     * @returns `true` if a key-value pair is registered for the given key, `false` otherwise.\n     */\n    hasKey(key: K): boolean {\n        return this.elements.has(key);\n    }\n\n    /**\n     * Retrieve the value for the given key.\n     *\n     * @param key The key whose value should be retrieved.\n     * @returns The registered value or `undefined`. Is `undefined` if no value was registered for the given key.\n     */\n    get(key: K): V | undefined {\n        return this.elements.get(key);\n    }\n\n    /**\n     * Retrieve all registered values from the registry.\n     *\n     * @returns An array of all registered keys.\n     */\n\n    getAll(): V[] {\n        return [...new Set(this.elements.values())];\n    }\n\n    /**\n     * Retrieve all registered keys from the registry.\n     *\n     * @returns An array of all registered keys.\n     */\n    keys(): K[] {\n        return [...new Set(this.elements.keys())];\n    }\n}\n\n/**\n * A multi registry is used to manage a set of key-value pairs. The main difference to {@link Registry} is that\n * a multi registry doesn't enforce a 1-1 relation between key and value(s).\n * One key can be associated with multiple values.\n *\n *\n * @typeParam K  Type of the key\n * @param V Type of the values\n */\n@injectable()\nexport class MultiRegistry<K, V> {\n    protected elements: Map<K, V[]> = new Map();\n\n    register(key: K, instance: V): void {\n        const instances = this.elements.get(key);\n        if (instances) {\n            instances.push(instance);\n        } else {\n            this.elements.set(key, [instance]);\n        }\n    }\n\n    deregister(key: K, element: V): boolean {\n        const instances = this.elements.get(key);\n        if (instances) {\n            remove(instances, element);\n            return true;\n        }\n        return false;\n    }\n\n    deregisterAll(key: K): boolean {\n        return this.elements.delete(key);\n    }\n\n    get(key: K): V[] {\n        const existingInstances = this.elements.get(key);\n        if (existingInstances) {\n            return [...new Set(existingInstances)];\n        } else {\n            return [];\n        }\n    }\n\n    hasKey(key: K): boolean {\n        return this.elements.has(key);\n    }\n\n    getAll(): V[] {\n        const values: V[] = [];\n        Array.from(this.elements.values()).forEach(instances => values.push(...instances));\n        return [...new Set(values)];\n    }\n\n    keys(): K[] {\n        return [...new Set(this.elements.keys())];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { MaybePromise, RequestModelAction, SaveModelAction, TypeGuard } from '@eclipse-glsp/protocol';\nimport * as fs from 'fs';\nimport { inject, injectable } from 'inversify';\nimport * as os from 'os';\nimport { fileURLToPath } from 'url';\nimport { ModelState, SOURCE_URI_ARG } from '../common/features/model/model-state';\nimport { SourceModelStorage } from '../common/features/model/source-model-storage';\nimport { GLSPServerError } from '../common/utils/glsp-server-error';\n\n/**\n * An abstract implementation of {@link SourceModelStorage} that provides utility methods for loading and saving JSON source models\n * from/into a file.\n */\n@injectable()\nexport abstract class AbstractJsonModelStorage implements SourceModelStorage {\n    @inject(ModelState)\n    protected modelState: ModelState;\n\n    abstract loadSourceModel(action: RequestModelAction): MaybePromise<void>;\n\n    abstract saveSourceModel(action: SaveModelAction): MaybePromise<void>;\n\n    protected getSourceUri(action: RequestModelAction): string {\n        const sourceUri = action.options?.[SOURCE_URI_ARG];\n        if (typeof sourceUri !== 'string') {\n            throw new GLSPServerError(`Invalid RequestModelAction! Missing argument with key '${SOURCE_URI_ARG}'`);\n        }\n        return sourceUri;\n    }\n\n    protected loadFromFile(sourceUri: string): unknown;\n    protected loadFromFile<T>(sourceUri: string, guard: TypeGuard<T>): T;\n    protected loadFromFile<T>(sourceUri: string, guard?: TypeGuard<T>): T | unknown {\n        try {\n            const path = this.toPath(sourceUri);\n            let fileContent = this.readFile(path);\n            if (!fileContent) {\n                fileContent = this.createModelForEmptyFile(path);\n                if (!fileContent) {\n                    throw new GLSPServerError(`Could not load the source model. The file '${path}' is empty!.`);\n                }\n            }\n            if (guard && !guard(fileContent)) {\n                throw new Error('The loaded root object is not of the expected type!');\n            }\n            return fileContent;\n        } catch (error) {\n            throw new GLSPServerError(`Could not load model from file: ${sourceUri}`, error);\n        }\n    }\n\n    /**\n     * Can be overwritten to customize the behavior if the given file path points to an empty file.\n     * The default implementation returns undefined, concrete subclasses can customize this behavior and\n     * return new source model object instead.\n     * @param path The path of the empty file.\n     * @returns The new model or `undefined`\n     */\n    protected createModelForEmptyFile(path: string): unknown | undefined {\n        return undefined;\n    }\n\n    protected readFile(path: string): unknown | undefined {\n        try {\n            const data = fs.readFileSync(path, { encoding: 'utf8' });\n            if (!data || data.length === 0) {\n                return undefined;\n            }\n            return this.toJson(data);\n        } catch (error) {\n            throw new GLSPServerError(`Could not read & parse file contents of '${path}' as json`, error);\n        }\n    }\n\n    protected toJson(fileContent: string): unknown {\n        return JSON.parse(fileContent);\n    }\n\n    protected toPath(sourceUri: string): string {\n        let path = sourceUri.startsWith('file://') ? fileURLToPath(sourceUri) : sourceUri;\n        if (os.platform() === 'win32') {\n            // Remove the leading slash if it exists (Windows paths don't have it)\n            path = path.replace(/^\\//, '');\n        }\n        return path;\n    }\n\n    protected getFileUri(action: SaveModelAction): string {\n        const uri = action.fileUri ?? this.modelState.get(SOURCE_URI_ARG);\n        if (!uri) {\n            throw new GLSPServerError('Could not derive fileUri for saving the current source model');\n        }\n        return uri;\n    }\n\n    protected writeFile(fileUri: string, model: unknown): void {\n        const path = this.toPath(fileUri);\n        const content = this.toString(model);\n        fs.writeFileSync(path, content);\n    }\n\n    protected toString(model: unknown): string {\n        return JSON.stringify(model, undefined, 2);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2024 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { BindingContext } from '@eclipse-glsp/protocol/lib/di';\nimport { ContainerModule } from 'inversify';\nimport * as winston from 'winston';\nimport { InjectionContainer, LogLevel, Logger, LoggerFactory, getRequestParentName } from '../../common';\nimport { LaunchOptions } from '../launch/cli-parser';\nimport { WinstonLogger } from './winston-logger';\n\nexport function createAppModule(options: LaunchOptions): ContainerModule {\n    return new ContainerModule((bind, unbind, isBound, rebind) => {\n        bind(InjectionContainer).toDynamicValue(dynamicContext => dynamicContext.container);\n        const context = { bind, unbind, isBound, rebind };\n        configureWinstonLogger(context, options);\n    });\n}\n\n/**\n * Creates the global {@link winston.Logger} instance is used internally by all instances of {@link WinstonLogger}. Can be configured with\n * the given {@link LaunchOptions}.\n * @param options The {@link LaunchOptions}\n * @returns the configured winston instance.\n */\nexport function createWinstonInstance<T extends LaunchOptions>(options: T): winston.Logger {\n    const level = LogLevel[options.logLevel];\n    const transports: winston.transport[] = [];\n\n    const printf = winston.format.printf(({ level, message, timestamp }) => `${timestamp} ${level} -  ${message}`);\n    const timestamp = winston.format.timestamp({ format: () => new Date().toLocaleTimeString() });\n\n    const consoleLogFormat = winston.format.combine(winston.format.colorize(), timestamp, printf);\n    const fileLogFormat = winston.format.combine(timestamp, printf);\n\n    if (options.consoleLog) {\n        transports.push(new winston.transports.Console({ format: consoleLogFormat }));\n    }\n\n    if (options.fileLog) {\n        const date = new Date();\n        const dateString = `${date.getDate()}-${\n            date.getMonth() + 1\n        }-${date.getFullYear()}_${date.getHours()}-${date.getMinutes()}-${date.getSeconds()}`;\n\n        const filename = `GLSP-Server_${dateString}.log`;\n        transports.push(new winston.transports.File({ dirname: options.logDir, filename, format: fileLogFormat }));\n    }\n\n    return winston.createLogger({ level, transports });\n}\n\n/**\n * Configures the binding for {@link WinstonLogger} in the given {@link ModuleContext} with the given {@link LaunchOptions}.\n * @param context The module context.\n * @param options The launch options.\n * @param rebind Flag to determine wether an existing {@link Logger} binding in the context should be rebound. Default is `true`.\n * @param baseLoggerCreator The underling global {@link winston.Logger} instance.\n */\nexport function configureWinstonLogger<T extends LaunchOptions>(\n    context: BindingContext,\n    options: T,\n    rebind = true,\n    baseLoggerCreator: (launchOptions: T) => winston.Logger = createWinstonInstance\n): void {\n    const baseLogger = baseLoggerCreator(options);\n    if (rebind) {\n        if (context.isBound(Logger)) {\n            context.unbind(Logger);\n        }\n        if (context.isBound(LoggerFactory)) {\n            context.unbind(LoggerFactory);\n        }\n    }\n\n    context.bind(Logger).toDynamicValue(dynamicContext => new WinstonLogger(baseLogger, getRequestParentName(dynamicContext)));\n    context.bind(LoggerFactory).toFactory(dynamicContext => (caller: string) => {\n        const logger = dynamicContext.container.get(Logger);\n        logger.caller = caller;\n        return logger;\n    });\n}\n","/********************************************************************************\n * Copyright (c) 2022-2024 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as winston from 'winston';\nimport { asLogLevel, Logger, LogLevel } from '../../common/utils/logger';\n\nexport class WinstonLogger extends Logger {\n    constructor(\n        protected baseLogger: winston.Logger,\n        public caller?: string\n    ) {\n        super();\n    }\n\n    info(message: string, ...params: any): void {\n        if (this.logLevel !== LogLevel.none) {\n            this.baseLogger.info(this.combinedMessage(message, ...params));\n        }\n    }\n\n    warn(message: string, ...params: any[]): void {\n        if (this.logLevel !== LogLevel.none) {\n            this.baseLogger.warn(this.combinedMessage(message, ...params));\n        }\n    }\n\n    error(message: string, ...params: any[]): void {\n        if (this.logLevel !== LogLevel.none) {\n            this.baseLogger.error(this.combinedMessage(message, ...params));\n        }\n    }\n\n    debug(message: string, ...params: any[]): void {\n        if (this.logLevel !== LogLevel.none) {\n            this.baseLogger.debug(this.combinedMessage(message, ...params));\n        }\n    }\n\n    get logLevel(): LogLevel {\n        return asLogLevel(this.baseLogger.level) || LogLevel.none;\n    }\n\n    set logLevel(level: LogLevel) {\n        this.baseLogger.level = LogLevel[level];\n    }\n\n    combinedMessage(message: string, ...params: any[]): string {\n        const caller = this.caller ? `[${this.caller}]` : '';\n        const additional = this.logAdditionals(...params);\n        return `${caller} ${message} ${additional}`;\n    }\n\n    logAdditionals(...params: any[]): string {\n        if (!params || params.length === 0) {\n            return '';\n        }\n        return params.map(param => this.toString(param)).join(',\\n');\n    }\n\n    override toString(param: unknown): string {\n        if (param instanceof Error) {\n            return `${param.message}\n            ${param.stack || ''}`;\n        }\n        try {\n            return JSON.stringify(param, undefined, 4);\n        } catch (_) {\n            return '';\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { GGraph } from '@eclipse-glsp/graph';\nimport { MaybePromise, RequestModelAction, SaveModelAction, isGModelElementSchema } from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport { GModelSerializer } from '../../common/features/model/gmodel-serializer';\nimport { ModelState } from '../../common/features/model/model-state';\nimport { Logger } from '../../common/utils/logger';\nimport { AbstractJsonModelStorage } from '../abstract-json-model-storage';\n\nexport const EMPTY_ROOT = GGraph.builder().id('empty').build();\n\n/**\n * A {@link SourceModelStorage} that reads and writes the graph model directly from / into\n * a JSON file and uses it as source model.\n */\n@injectable()\nexport class GModelStorage extends AbstractJsonModelStorage {\n    @inject(Logger)\n    protected logger: Logger;\n\n    @inject(GModelSerializer)\n    protected modelSerializer: GModelSerializer;\n\n    @inject(ModelState)\n    protected override modelState: ModelState;\n\n    loadSourceModel(action: RequestModelAction): MaybePromise<void> {\n        const sourceUri = this.getSourceUri(action);\n        const rootSchema = this.loadFromFile(sourceUri, isGModelElementSchema);\n        const root = this.modelSerializer.createRoot(rootSchema);\n        this.modelState.updateRoot(root);\n    }\n\n    saveSourceModel(action: SaveModelAction): MaybePromise<void> {\n        const fileUri = this.getFileUri(action);\n        const schema = this.modelSerializer.createSchema(this.modelState.root);\n        this.writeFile(fileUri, schema);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nexport * from './abstract-json-model-storage';\nexport * from './di/app-module';\nexport * from './di/winston-logger';\nexport * from './gmodel/gmodel-storage';\nexport * from './launch/cli-parser';\nexport * from './launch/socket-cli-parser';\nexport * from './launch/socket-server-launcher';\nexport * from './launch/websocket-server-launcher';\nexport * from './reexport';\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as cmd from 'commander';\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport { LogLevel, LoggerConfigOptions, asLogLevel } from '../../common/utils/logger';\n\nexport interface LaunchOptions extends LoggerConfigOptions {\n    logLevel: LogLevel;\n    logDir?: string;\n    fileLog: boolean;\n}\n\nexport interface CliParser<O extends LaunchOptions = LaunchOptions> {\n    command: cmd.Command;\n    parse(argv?: string[]): O;\n}\n\nexport const defaultLaunchOptions: Required<LaunchOptions> = {\n    logLevel: LogLevel.info,\n    logDir: '.config',\n    consoleLog: true,\n    fileLog: false\n};\n\nexport function createCliParser<O extends LaunchOptions = LaunchOptions>(options: LaunchOptions = defaultLaunchOptions): CliParser<O> {\n    const command = new cmd.Command()\n        .version('1.0.0')\n        .description('GLSP server')\n        .showHelpAfterError(true)\n        .name('Launch a GLSP server')\n        .option('-l , --logLevel <logLevel>', `Set the log level. [default='${options.logLevel}']`, processLogLevel, options.logLevel)\n        .option(\n            '-d , --logDir <logDir>',\n            `Set the directory for log files (when file logging is enabled) [default=${options.logDir}]`,\n            processLogDir,\n            options.logDir\n        )\n        .addHelpText('afterAll', '\\n Copyright (c) 2022-2023 Eclipse GLSP');\n\n    return { command, parse: argv => parse<O>(command, options as Partial<O>, argv) };\n}\n\nexport function parse<T extends cmd.OptionValues>(command: cmd.Command, defaultOptions: Partial<T>, argv?: string[]): T {\n    command.parse(argv);\n    return { ...defaultOptions, ...command.opts<T>() };\n}\n\nexport function processLogLevel(value: string): LogLevel {\n    const level = asLogLevel(value);\n    if (!level) {\n        throw new cmd.InvalidArgumentError(\"Argument has to be 'none'|'error'|'warn'|'info'|'debug'!\");\n    }\n    return level;\n}\n\nexport function processLogDir(value: string): string {\n    const logDir = path.resolve(value);\n    if (path.extname(logDir).length !== 0 || !isDirectory(path.dirname(logDir))) {\n        throw new cmd.InvalidArgumentError('Argument is not a valid directory!');\n    }\n\n    return logDir;\n}\n\nexport function isDirectory(value: string): boolean {\n    try {\n        return fs.statSync(value).isDirectory();\n    } catch (error) {\n        return false;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as cmd from 'commander';\nimport { CliParser, createCliParser, defaultLaunchOptions, LaunchOptions } from './cli-parser';\n\nexport interface SocketLaunchOptions extends LaunchOptions {\n    port: number;\n    host: string;\n}\n\nexport const defaultSocketLaunchOptions: Required<SocketLaunchOptions> = {\n    ...defaultLaunchOptions,\n    port: 0,\n    host: '127.0.0.1'\n};\n\nexport function createSocketCliParser<O extends SocketLaunchOptions = SocketLaunchOptions>(\n    defaultOptions: SocketLaunchOptions = defaultSocketLaunchOptions\n): CliParser<O> {\n    const parser = createCliParser<O>(defaultOptions);\n    parser.command\n        .option('-p , --port <port>', `Set server port [default= ${defaultOptions.port}]`, processPort, defaultOptions.port)\n        .option('--host <host>', `Set host name [default= ${defaultOptions.host}`, defaultOptions.host)\n        .option('--no-consoleLog', 'Disable console logging')\n        .option('--fileLog', 'Enable file logging', defaultOptions.fileLog);\n    return parser;\n}\n\nexport function processPort(value: string): number {\n    const port = Number.parseInt(value, 10);\n    if (isNaN(port)) {\n        throw new cmd.InvalidArgumentError('Port is not a number!');\n    }\n    if (port < 0 || port > 65535) {\n        throw new cmd.InvalidArgumentError('Port has to be between in range (0,65535)!');\n    }\n\n    return port;\n}\n","/********************************************************************************\n * Copyright (c) 2022-2024 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Disposable } from '@eclipse-glsp/protocol';\nimport { inject, injectable } from 'inversify';\nimport * as net from 'net';\nimport * as jsonrpc from 'vscode-jsonrpc/node';\nimport { JsonRpcGLSPServerLauncher } from '../../common/launch/jsonrpc-server-launcher';\nimport { Logger } from '../../common/utils/logger';\n\n@injectable()\nexport class SocketServerLauncher extends JsonRpcGLSPServerLauncher<net.TcpSocketConnectOpts> {\n    @inject(Logger) protected override logger: Logger;\n\n    protected netServer: net.Server;\n\n    constructor() {\n        super();\n        this.toDispose.push(\n            Disposable.create(() => {\n                this.netServer.close();\n            })\n        );\n    }\n\n    protected run(opts: net.TcpSocketConnectOpts): Promise<void> {\n        this.netServer = net.createServer(socket => {\n            const connection = this.createConnection(socket);\n            this.createServerInstance(connection);\n        });\n\n        this.netServer.listen(opts.port, opts.host);\n        this.netServer.on('listening', () => {\n            const addressInfo = this.netServer.address();\n            if (!addressInfo) {\n                this.logger.error('Could not resolve GLSP Server address info. Shutting down.');\n                this.shutdown();\n                return;\n            } else if (typeof addressInfo === 'string') {\n                this.logger.error(`GLSP Server is unexpectedly listening to pipe or domain socket \"${addressInfo}\". Shutting down.`);\n                this.shutdown();\n                return;\n            }\n            const currentPort = addressInfo.port;\n            this.logger.info(`The GLSP server is ready to accept new client requests on port: ${currentPort}`);\n            // Print a message to the output stream that indicates that the start is completed.\n            // This indicates to the client that the server process is ready (in an embedded scenario).\n            console.log(this.startupCompleteMessage.concat(currentPort.toString()));\n        });\n        this.netServer.on('error', () => this.shutdown());\n        return new Promise((resolve, reject) => {\n            this.netServer.on('close', () => resolve(undefined));\n            this.netServer.on('error', error => reject(error));\n        });\n    }\n\n    protected createConnection(socket: net.Socket): jsonrpc.MessageConnection {\n        return jsonrpc.createMessageConnection(new jsonrpc.SocketMessageReader(socket), new jsonrpc.SocketMessageWriter(socket), console);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { createWebSocketConnection, Disposable, MaybePromise, WebSocketWrapper } from '@eclipse-glsp/protocol';\nimport * as http from 'http';\nimport { inject, injectable } from 'inversify';\nimport * as net from 'net';\nimport * as jsonrpc from 'vscode-jsonrpc';\nimport { Server, WebSocket } from 'ws';\nimport { JsonRpcGLSPServerLauncher } from '../../common/launch/jsonrpc-server-launcher';\nimport { Logger } from '../../common/utils/logger';\n\nexport interface WebSocketServerOptions {\n    host?: string;\n    port?: number;\n    path: string;\n}\n\nexport interface ResolvedWebSocketServerOptions {\n    host?: string;\n    port: number;\n    path: string;\n    server: http.Server;\n}\n\nexport interface WebsocketConnectionData {\n    socket: WebSocket;\n    connection: jsonrpc.MessageConnection;\n}\n\nconst STATUS_UPGRADE_REQUIRED = 426;\n\n@injectable()\nexport class WebSocketServerLauncher extends JsonRpcGLSPServerLauncher<WebSocketServerOptions> {\n    @inject(Logger)\n    protected override logger: Logger;\n\n    protected server: Server;\n\n    constructor() {\n        super();\n        this.toDispose.push(\n            Disposable.create(() => {\n                this.server.close();\n            })\n        );\n    }\n\n    protected async run(options: WebSocketServerOptions): Promise<void> {\n        const resolvedOptions = await this.resolveOptions(options);\n        this.server = new Server({ server: resolvedOptions.server, path: resolvedOptions.path });\n        const endpoint = `ws://${resolvedOptions.host}:${resolvedOptions.port}:${resolvedOptions.path}`;\n        this.logger.info(`The GLSP Websocket launcher is ready to accept new client requests on endpoint '${endpoint}'`);\n        console.log(this.startupCompleteMessage.concat(resolvedOptions.port.toString()));\n\n        this.server.on('connection', (ws, req) => {\n            const connection = this.createConnection(ws);\n            this.createServerInstance(connection);\n        });\n\n        return new Promise((resolve, reject) => {\n            this.server.on('close', () => resolve(undefined));\n            this.server.on('error', error => reject(error));\n        });\n    }\n\n    protected createConnection(socket: WebSocket): jsonrpc.MessageConnection {\n        return createWebSocketConnection(wrapWebSocket(socket));\n    }\n\n    protected async resolveOptions(options: WebSocketServerOptions): Promise<ResolvedWebSocketServerOptions> {\n        const port = !options.port || options.port === 0 ? await getFreePort() : options.port;\n        const path = options.path.startsWith('/') ? options.path : `/${options.path}`;\n        const server = this.createHttpServer(port, options.host);\n\n        return { ...options, port, path, server };\n    }\n\n    protected createHttpServer(port: number, host?: string): http.Server {\n        const server = http.createServer((req, res) => {\n            const body = http.STATUS_CODES[STATUS_UPGRADE_REQUIRED];\n\n            res.writeHead(426, {\n                'Content-Length': body?.length,\n                'Content-Type': 'text/plain'\n            });\n            res.end(body);\n        });\n        server.listen(port, host);\n        // Set server timeout to infinite\n        server.setTimeout(0);\n        return server;\n    }\n\n    override start(options: WebSocketServerOptions): MaybePromise<void> {\n        super.start(options);\n    }\n}\n\nasync function getFreePort(): Promise<number> {\n    return new Promise((resolve, reject) => {\n        const srv = net.createServer();\n        srv.listen(0, () => {\n            const address = srv.address();\n            if (!address || typeof address === 'string') {\n                reject(new Error('Could not address to compute a free port'));\n                return;\n            }\n            srv.close(() => resolve(address.port));\n        });\n    });\n}\n/**\n * Creates a {@link WebSocketWrapper} for the given plain WebSocket\n * @param socket The socket to wrap\n */\nexport function wrapWebSocket(socket: WebSocket): WebSocketWrapper {\n    return {\n        send: content => socket.send(content),\n        onMessage: cb => socket.on('message', cb),\n        onClose: cb => socket.on('close', cb),\n        onError: cb => socket.on('error', cb),\n        dispose: () => socket.close()\n    };\n}\n","/********************************************************************************\n * Copyright (c) 2024 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nexport * from '../common';\n","/********************************************************************************\n * Copyright (c) 2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n'use strict';\n\nmodule.exports = require('./lib/node/index');\n","'use strict';\n\nconst WebSocket = require('./lib/websocket');\n\nWebSocket.createWebSocketStream = require('./lib/stream');\nWebSocket.Server = require('./lib/websocket-server');\nWebSocket.Receiver = require('./lib/receiver');\nWebSocket.Sender = require('./lib/sender');\n\nWebSocket.WebSocket = WebSocket;\nWebSocket.WebSocketServer = WebSocket.Server;\n\nmodule.exports = WebSocket;\n","'use strict';\n\nconst { EMPTY_BUFFER } = require('./constants');\n\nconst FastBuffer = Buffer[Symbol.species];\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nfunction concat(list, totalLength) {\n  if (list.length === 0) return EMPTY_BUFFER;\n  if (list.length === 1) return list[0];\n\n  const target = Buffer.allocUnsafe(totalLength);\n  let offset = 0;\n\n  for (let i = 0; i < list.length; i++) {\n    const buf = list[i];\n    target.set(buf, offset);\n    offset += buf.length;\n  }\n\n  if (offset < totalLength) {\n    return new FastBuffer(target.buffer, target.byteOffset, offset);\n  }\n\n  return target;\n}\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nfunction _mask(source, mask, output, offset, length) {\n  for (let i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n}\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nfunction _unmask(buffer, mask) {\n  for (let i = 0; i < buffer.length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} buf The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n * @public\n */\nfunction toArrayBuffer(buf) {\n  if (buf.length === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.length);\n}\n\n/**\n * Converts `data` to a `Buffer`.\n *\n * @param {*} data The data to convert\n * @return {Buffer} The buffer\n * @throws {TypeError}\n * @public\n */\nfunction toBuffer(data) {\n  toBuffer.readOnly = true;\n\n  if (Buffer.isBuffer(data)) return data;\n\n  let buf;\n\n  if (data instanceof ArrayBuffer) {\n    buf = new FastBuffer(data);\n  } else if (ArrayBuffer.isView(data)) {\n    buf = new FastBuffer(data.buffer, data.byteOffset, data.byteLength);\n  } else {\n    buf = Buffer.from(data);\n    toBuffer.readOnly = false;\n  }\n\n  return buf;\n}\n\nmodule.exports = {\n  concat,\n  mask: _mask,\n  toArrayBuffer,\n  toBuffer,\n  unmask: _unmask\n};\n\n/* istanbul ignore else  */\nif (!process.env.WS_NO_BUFFER_UTIL) {\n  try {\n    const bufferUtil = require('bufferutil');\n\n    module.exports.mask = function (source, mask, output, offset, length) {\n      if (length < 48) _mask(source, mask, output, offset, length);\n      else bufferUtil.mask(source, mask, output, offset, length);\n    };\n\n    module.exports.unmask = function (buffer, mask) {\n      if (buffer.length < 32) _unmask(buffer, mask);\n      else bufferUtil.unmask(buffer, mask);\n    };\n  } catch (e) {\n    // Continue regardless of the error.\n  }\n}\n","'use strict';\n\nconst BINARY_TYPES = ['nodebuffer', 'arraybuffer', 'fragments'];\nconst hasBlob = typeof Blob !== 'undefined';\n\nif (hasBlob) BINARY_TYPES.push('blob');\n\nmodule.exports = {\n  BINARY_TYPES,\n  EMPTY_BUFFER: Buffer.alloc(0),\n  GUID: '258EAFA5-E914-47DA-95CA-C5AB0DC85B11',\n  hasBlob,\n  kForOnEventAttribute: Symbol('kIsForOnEventAttribute'),\n  kListener: Symbol('kListener'),\n  kStatusCode: Symbol('status-code'),\n  kWebSocket: Symbol('websocket'),\n  NOOP: () => {}\n};\n","'use strict';\n\nconst { kForOnEventAttribute, kListener } = require('./constants');\n\nconst kCode = Symbol('kCode');\nconst kData = Symbol('kData');\nconst kError = Symbol('kError');\nconst kMessage = Symbol('kMessage');\nconst kReason = Symbol('kReason');\nconst kTarget = Symbol('kTarget');\nconst kType = Symbol('kType');\nconst kWasClean = Symbol('kWasClean');\n\n/**\n * Class representing an event.\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @throws {TypeError} If the `type` argument is not specified\n   */\n  constructor(type) {\n    this[kTarget] = null;\n    this[kType] = type;\n  }\n\n  /**\n   * @type {*}\n   */\n  get target() {\n    return this[kTarget];\n  }\n\n  /**\n   * @type {String}\n   */\n  get type() {\n    return this[kType];\n  }\n}\n\nObject.defineProperty(Event.prototype, 'target', { enumerable: true });\nObject.defineProperty(Event.prototype, 'type', { enumerable: true });\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {Number} [options.code=0] The status code explaining why the\n   *     connection was closed\n   * @param {String} [options.reason=''] A human-readable string explaining why\n   *     the connection was closed\n   * @param {Boolean} [options.wasClean=false] Indicates whether or not the\n   *     connection was cleanly closed\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kCode] = options.code === undefined ? 0 : options.code;\n    this[kReason] = options.reason === undefined ? '' : options.reason;\n    this[kWasClean] = options.wasClean === undefined ? false : options.wasClean;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get code() {\n    return this[kCode];\n  }\n\n  /**\n   * @type {String}\n   */\n  get reason() {\n    return this[kReason];\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get wasClean() {\n    return this[kWasClean];\n  }\n}\n\nObject.defineProperty(CloseEvent.prototype, 'code', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'reason', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'wasClean', { enumerable: true });\n\n/**\n * Class representing an error event.\n *\n * @extends Event\n */\nclass ErrorEvent extends Event {\n  /**\n   * Create a new `ErrorEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.error=null] The error that generated this event\n   * @param {String} [options.message=''] The error message\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kError] = options.error === undefined ? null : options.error;\n    this[kMessage] = options.message === undefined ? '' : options.message;\n  }\n\n  /**\n   * @type {*}\n   */\n  get error() {\n    return this[kError];\n  }\n\n  /**\n   * @type {String}\n   */\n  get message() {\n    return this[kMessage];\n  }\n}\n\nObject.defineProperty(ErrorEvent.prototype, 'error', { enumerable: true });\nObject.defineProperty(ErrorEvent.prototype, 'message', { enumerable: true });\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.data=null] The message content\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kData] = options.data === undefined ? null : options.data;\n  }\n\n  /**\n   * @type {*}\n   */\n  get data() {\n    return this[kData];\n  }\n}\n\nObject.defineProperty(MessageEvent.prototype, 'data', { enumerable: true });\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} type A string representing the event type to listen for\n   * @param {(Function|Object)} handler The listener to add\n   * @param {Object} [options] An options object specifies characteristics about\n   *     the event listener\n   * @param {Boolean} [options.once=false] A `Boolean` indicating that the\n   *     listener should be invoked at most once after being added. If `true`,\n   *     the listener would be automatically removed when invoked.\n   * @public\n   */\n  addEventListener(type, handler, options = {}) {\n    for (const listener of this.listeners(type)) {\n      if (\n        !options[kForOnEventAttribute] &&\n        listener[kListener] === handler &&\n        !listener[kForOnEventAttribute]\n      ) {\n        return;\n      }\n    }\n\n    let wrapper;\n\n    if (type === 'message') {\n      wrapper = function onMessage(data, isBinary) {\n        const event = new MessageEvent('message', {\n          data: isBinary ? data : data.toString()\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'close') {\n      wrapper = function onClose(code, message) {\n        const event = new CloseEvent('close', {\n          code,\n          reason: message.toString(),\n          wasClean: this._closeFrameReceived && this._closeFrameSent\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'error') {\n      wrapper = function onError(error) {\n        const event = new ErrorEvent('error', {\n          error,\n          message: error.message\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'open') {\n      wrapper = function onOpen() {\n        const event = new Event('open');\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else {\n      return;\n    }\n\n    wrapper[kForOnEventAttribute] = !!options[kForOnEventAttribute];\n    wrapper[kListener] = handler;\n\n    if (options.once) {\n      this.once(type, wrapper);\n    } else {\n      this.on(type, wrapper);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} type A string representing the event type to remove\n   * @param {(Function|Object)} handler The listener to remove\n   * @public\n   */\n  removeEventListener(type, handler) {\n    for (const listener of this.listeners(type)) {\n      if (listener[kListener] === handler && !listener[kForOnEventAttribute]) {\n        this.removeListener(type, listener);\n        break;\n      }\n    }\n  }\n};\n\nmodule.exports = {\n  CloseEvent,\n  ErrorEvent,\n  Event,\n  EventTarget,\n  MessageEvent\n};\n\n/**\n * Call an event listener\n *\n * @param {(Function|Object)} listener The listener to call\n * @param {*} thisArg The value to use as `this`` when calling the listener\n * @param {Event} event The event to pass to the listener\n * @private\n */\nfunction callListener(listener, thisArg, event) {\n  if (typeof listener === 'object' && listener.handleEvent) {\n    listener.handleEvent.call(listener, event);\n  } else {\n    listener.call(thisArg, event);\n  }\n}\n","'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push(dest, name, elem) {\n  if (dest[name] === undefined) dest[name] = [elem];\n  else dest[name].push(elem);\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse(header) {\n  const offers = Object.create(null);\n  let params = Object.create(null);\n  let mustUnescape = false;\n  let isEscaping = false;\n  let inQuotes = false;\n  let extensionName;\n  let paramName;\n  let start = -1;\n  let code = -1;\n  let end = -1;\n  let i = 0;\n\n  for (; i < header.length; i++) {\n    code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (\n        i !== 0 &&\n        (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n      ) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b /* ';' */ || code === 0x2c /* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = Object.create(null);\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d /* '=' */ && start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22 /* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c /* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        let value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes || code === 0x20 || code === 0x09) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, params);\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format(extensions) {\n  return Object.keys(extensions)\n    .map((extension) => {\n      let configurations = extensions[extension];\n      if (!Array.isArray(configurations)) configurations = [configurations];\n      return configurations\n        .map((params) => {\n          return [extension]\n            .concat(\n              Object.keys(params).map((k) => {\n                let values = params[k];\n                if (!Array.isArray(values)) values = [values];\n                return values\n                  .map((v) => (v === true ? k : `${k}=${v}`))\n                  .join('; ');\n              })\n            )\n            .join('; ');\n        })\n        .join(', ');\n    })\n    .join(', ');\n}\n\nmodule.exports = { format, parse };\n","'use strict';\n\nconst kDone = Symbol('kDone');\nconst kRun = Symbol('kRun');\n\n/**\n * A very simple job queue with adjustable concurrency. Adapted from\n * https://github.com/STRML/async-limiter\n */\nclass Limiter {\n  /**\n   * Creates a new `Limiter`.\n   *\n   * @param {Number} [concurrency=Infinity] The maximum number of jobs allowed\n   *     to run concurrently\n   */\n  constructor(concurrency) {\n    this[kDone] = () => {\n      this.pending--;\n      this[kRun]();\n    };\n    this.concurrency = concurrency || Infinity;\n    this.jobs = [];\n    this.pending = 0;\n  }\n\n  /**\n   * Adds a job to the queue.\n   *\n   * @param {Function} job The job to run\n   * @public\n   */\n  add(job) {\n    this.jobs.push(job);\n    this[kRun]();\n  }\n\n  /**\n   * Removes a job from the queue and runs it if possible.\n   *\n   * @private\n   */\n  [kRun]() {\n    if (this.pending === this.concurrency) return;\n\n    if (this.jobs.length) {\n      const job = this.jobs.shift();\n\n      this.pending++;\n      job(this[kDone]);\n    }\n  }\n}\n\nmodule.exports = Limiter;\n","'use strict';\n\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./buffer-util');\nconst Limiter = require('./limiter');\nconst { kStatusCode } = require('./constants');\n\nconst FastBuffer = Buffer[Symbol.species];\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst kPerMessageDeflate = Symbol('permessage-deflate');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} [options] Configuration options\n   * @param {(Boolean|Number)} [options.clientMaxWindowBits] Advertise support\n   *     for, or request, a custom client window size\n   * @param {Boolean} [options.clientNoContextTakeover=false] Advertise/\n   *     acknowledge disabling of client context takeover\n   * @param {Number} [options.concurrencyLimit=10] The number of concurrent\n   *     calls to zlib\n   * @param {(Boolean|Number)} [options.serverMaxWindowBits] Request/confirm the\n   *     use of a custom server window size\n   * @param {Boolean} [options.serverNoContextTakeover=false] Request/accept\n   *     disabling of server context takeover\n   * @param {Number} [options.threshold=1024] Size (in bytes) below which\n   *     messages should not be compressed if context takeover is disabled\n   * @param {Object} [options.zlibDeflateOptions] Options to pass to zlib on\n   *     deflate\n   * @param {Object} [options.zlibInflateOptions] Options to pass to zlib on\n   *     inflate\n   * @param {Boolean} [isServer=false] Create the instance in either server or\n   *     client mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold =\n      this._options.threshold !== undefined ? this._options.threshold : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency =\n        this._options.concurrencyLimit !== undefined\n          ? this._options.concurrencyLimit\n          : 10;\n      zlibLimiter = new Limiter(concurrency);\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName() {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create an extension negotiation offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer() {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept an extension negotiation offer/response.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept(configurations) {\n    configurations = this.normalizeParams(configurations);\n\n    this.params = this._isServer\n      ? this.acceptAsServer(configurations)\n      : this.acceptAsClient(configurations);\n\n    return this.params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup() {\n    if (this._inflate) {\n      this._inflate.close();\n      this._inflate = null;\n    }\n\n    if (this._deflate) {\n      const callback = this._deflate[kCallback];\n\n      this._deflate.close();\n      this._deflate = null;\n\n      if (callback) {\n        callback(\n          new Error(\n            'The deflate stream was closed while data was being processed'\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   *  Accept an extension negotiation offer.\n   *\n   * @param {Array} offers The extension negotiation offers\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer(offers) {\n    const opts = this._options;\n    const accepted = offers.find((params) => {\n      if (\n        (opts.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (params.server_max_window_bits &&\n          (opts.serverMaxWindowBits === false ||\n            (typeof opts.serverMaxWindowBits === 'number' &&\n              opts.serverMaxWindowBits > params.server_max_window_bits))) ||\n        (typeof opts.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    if (!accepted) {\n      throw new Error('None of the extension offers can be accepted');\n    }\n\n    if (opts.serverNoContextTakeover) {\n      accepted.server_no_context_takeover = true;\n    }\n    if (opts.clientNoContextTakeover) {\n      accepted.client_no_context_takeover = true;\n    }\n    if (typeof opts.serverMaxWindowBits === 'number') {\n      accepted.server_max_window_bits = opts.serverMaxWindowBits;\n    }\n    if (typeof opts.clientMaxWindowBits === 'number') {\n      accepted.client_max_window_bits = opts.clientMaxWindowBits;\n    } else if (\n      accepted.client_max_window_bits === true ||\n      opts.clientMaxWindowBits === false\n    ) {\n      delete accepted.client_max_window_bits;\n    }\n\n    return accepted;\n  }\n\n  /**\n   * Accept the extension negotiation response.\n   *\n   * @param {Array} response The extension negotiation response\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient(response) {\n    const params = response[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n    }\n\n    if (!params.client_max_window_bits) {\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        params.client_max_window_bits = this._options.clientMaxWindowBits;\n      }\n    } else if (\n      this._options.clientMaxWindowBits === false ||\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        params.client_max_window_bits > this._options.clientMaxWindowBits)\n    ) {\n      throw new Error(\n        'Unexpected or invalid parameter \"client_max_window_bits\"'\n      );\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize parameters.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Array} The offers/response with normalized parameters\n   * @private\n   */\n  normalizeParams(configurations) {\n    configurations.forEach((params) => {\n      Object.keys(params).forEach((key) => {\n        let value = params[key];\n\n        if (value.length > 1) {\n          throw new Error(`Parameter \"${key}\" must have only a single value`);\n        }\n\n        value = value[0];\n\n        if (key === 'client_max_window_bits') {\n          if (value !== true) {\n            const num = +value;\n            if (!Number.isInteger(num) || num < 8 || num > 15) {\n              throw new TypeError(\n                `Invalid value for parameter \"${key}\": ${value}`\n              );\n            }\n            value = num;\n          } else if (!this._isServer) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else if (key === 'server_max_window_bits') {\n          const num = +value;\n          if (!Number.isInteger(num) || num < 8 || num > 15) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n          value = num;\n        } else if (\n          key === 'client_no_context_takeover' ||\n          key === 'server_no_context_takeover'\n        ) {\n          if (value !== true) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else {\n          throw new Error(`Unknown parameter \"${key}\"`);\n        }\n\n        params[key] = value;\n      });\n    });\n\n    return configurations;\n  }\n\n  /**\n   * Decompress data. Concurrency limited.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress(data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._inflate = zlib.createInflateRaw({\n        ...this._options.zlibInflateOptions,\n        windowBits\n      });\n      this._inflate[kPerMessageDeflate] = this;\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (this._inflate._readableState.endEmitted) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n\n        if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n          this._inflate.reset();\n        }\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress(data, fin, callback) {\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw({\n        ...this._options.zlibDeflateOptions,\n        windowBits\n      });\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kCallback] = callback;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      if (!this._deflate) {\n        //\n        // The deflate stream was closed while data was being processed.\n        //\n        return;\n      }\n\n      let data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) {\n        data = new FastBuffer(data.buffer, data.byteOffset, data.length - 4);\n      }\n\n      //\n      // Ensure that the callback will not be called again in\n      // `PerMessageDeflate#cleanup()`.\n      //\n      this._deflate[kCallback] = null;\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n        this._deflate.reset();\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData(chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData(chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kPerMessageDeflate]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new RangeError('Max payload size exceeded');\n  this[kError].code = 'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH';\n  this[kError][kStatusCode] = 1009;\n  this.removeListener('data', inflateOnData);\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError(err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kPerMessageDeflate]._inflate = null;\n  err[kStatusCode] = 1007;\n  this[kCallback](err);\n}\n","'use strict';\n\nconst { Writable } = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  kStatusCode,\n  kWebSocket\n} = require('./constants');\nconst { concat, toArrayBuffer, unmask } = require('./buffer-util');\nconst { isValidStatusCode, isValidUTF8 } = require('./validation');\n\nconst FastBuffer = Buffer[Symbol.species];\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\nconst DEFER_EVENT = 6;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends Writable\n */\nclass Receiver extends Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {String} [options.binaryType=nodebuffer] The type for binary data\n   * @param {Object} [options.extensions] An object containing the negotiated\n   *     extensions\n   * @param {Boolean} [options.isServer=false] Specifies whether to operate in\n   *     client or server mode\n   * @param {Number} [options.maxPayload=0] The maximum allowed message length\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   */\n  constructor(options = {}) {\n    super();\n\n    this._allowSynchronousEvents =\n      options.allowSynchronousEvents !== undefined\n        ? options.allowSynchronousEvents\n        : true;\n    this._binaryType = options.binaryType || BINARY_TYPES[0];\n    this._extensions = options.extensions || {};\n    this._isServer = !!options.isServer;\n    this._maxPayload = options.maxPayload | 0;\n    this._skipUTF8Validation = !!options.skipUTF8Validation;\n    this[kWebSocket] = undefined;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._errored = false;\n    this._loop = false;\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   * @private\n   */\n  _write(chunk, encoding, cb) {\n    if (this._opcode === 0x08 && this._state == GET_INFO) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume(n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = new FastBuffer(\n        buf.buffer,\n        buf.byteOffset + n,\n        buf.length - n\n      );\n\n      return new FastBuffer(buf.buffer, buf.byteOffset, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n      const offset = dst.length - n;\n\n      if (n >= buf.length) {\n        dst.set(this._buffers.shift(), offset);\n      } else {\n        dst.set(new Uint8Array(buf.buffer, buf.byteOffset, n), offset);\n        this._buffers[0] = new FastBuffer(\n          buf.buffer,\n          buf.byteOffset + n,\n          buf.length - n\n        );\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop(cb) {\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          this.getInfo(cb);\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          this.getPayloadLength16(cb);\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          this.getPayloadLength64(cb);\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          this.getData(cb);\n          break;\n        case INFLATING:\n        case DEFER_EVENT:\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    if (!this._errored) cb();\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getInfo(cb) {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      const error = this.createError(\n        RangeError,\n        'RSV2 and RSV3 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_2_3'\n      );\n\n      cb(error);\n      return;\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      const error = this.createError(\n        RangeError,\n        'RSV1 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_1'\n      );\n\n      cb(error);\n      return;\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        const error = this.createError(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (!this._fragmented) {\n        const error = this.createError(\n          RangeError,\n          'invalid opcode 0',\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n\n        cb(error);\n        return;\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        const error = this.createError(\n          RangeError,\n          `invalid opcode ${this._opcode}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n\n        cb(error);\n        return;\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        const error = this.createError(\n          RangeError,\n          'FIN must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_FIN'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (compressed) {\n        const error = this.createError(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (\n        this._payloadLength > 0x7d ||\n        (this._opcode === 0x08 && this._payloadLength === 1)\n      ) {\n        const error = this.createError(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n\n        cb(error);\n        return;\n      }\n    } else {\n      const error = this.createError(\n        RangeError,\n        `invalid opcode ${this._opcode}`,\n        true,\n        1002,\n        'WS_ERR_INVALID_OPCODE'\n      );\n\n      cb(error);\n      return;\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._isServer) {\n      if (!this._masked) {\n        const error = this.createError(\n          RangeError,\n          'MASK must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_MASK'\n        );\n\n        cb(error);\n        return;\n      }\n    } else if (this._masked) {\n      const error = this.createError(\n        RangeError,\n        'MASK must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_MASK'\n      );\n\n      cb(error);\n      return;\n    }\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else this.haveLength(cb);\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getPayloadLength16(cb) {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    this.haveLength(cb);\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getPayloadLength64(cb) {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      const error = this.createError(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009,\n        'WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH'\n      );\n\n      cb(error);\n      return;\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    this.haveLength(cb);\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  haveLength(cb) {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        const error = this.createError(\n          RangeError,\n          'Max payload size exceeded',\n          false,\n          1009,\n          'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n        );\n\n        cb(error);\n        return;\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask() {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getData(cb) {\n    let data = EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n\n      if (\n        this._masked &&\n        (this._mask[0] | this._mask[1] | this._mask[2] | this._mask[3]) !== 0\n      ) {\n        unmask(data, this._mask);\n      }\n    }\n\n    if (this._opcode > 0x07) {\n      this.controlMessage(data, cb);\n      return;\n    }\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its length is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    this.dataMessage(cb);\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress(data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          const error = this.createError(\n            RangeError,\n            'Max payload size exceeded',\n            false,\n            1009,\n            'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n          );\n\n          cb(error);\n          return;\n        }\n\n        this._fragments.push(buf);\n      }\n\n      this.dataMessage(cb);\n      if (this._state === GET_INFO) this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  dataMessage(cb) {\n    if (!this._fin) {\n      this._state = GET_INFO;\n      return;\n    }\n\n    const messageLength = this._messageLength;\n    const fragments = this._fragments;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragmented = 0;\n    this._fragments = [];\n\n    if (this._opcode === 2) {\n      let data;\n\n      if (this._binaryType === 'nodebuffer') {\n        data = concat(fragments, messageLength);\n      } else if (this._binaryType === 'arraybuffer') {\n        data = toArrayBuffer(concat(fragments, messageLength));\n      } else if (this._binaryType === 'blob') {\n        data = new Blob(fragments);\n      } else {\n        data = fragments;\n      }\n\n      if (this._allowSynchronousEvents) {\n        this.emit('message', data, true);\n        this._state = GET_INFO;\n      } else {\n        this._state = DEFER_EVENT;\n        setImmediate(() => {\n          this.emit('message', data, true);\n          this._state = GET_INFO;\n          this.startLoop(cb);\n        });\n      }\n    } else {\n      const buf = concat(fragments, messageLength);\n\n      if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n        const error = this.createError(\n          Error,\n          'invalid UTF-8 sequence',\n          true,\n          1007,\n          'WS_ERR_INVALID_UTF8'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (this._state === INFLATING || this._allowSynchronousEvents) {\n        this.emit('message', buf, false);\n        this._state = GET_INFO;\n      } else {\n        this._state = DEFER_EVENT;\n        setImmediate(() => {\n          this.emit('message', buf, false);\n          this._state = GET_INFO;\n          this.startLoop(cb);\n        });\n      }\n    }\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage(data, cb) {\n    if (this._opcode === 0x08) {\n      if (data.length === 0) {\n        this._loop = false;\n        this.emit('conclude', 1005, EMPTY_BUFFER);\n        this.end();\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!isValidStatusCode(code)) {\n          const error = this.createError(\n            RangeError,\n            `invalid status code ${code}`,\n            true,\n            1002,\n            'WS_ERR_INVALID_CLOSE_CODE'\n          );\n\n          cb(error);\n          return;\n        }\n\n        const buf = new FastBuffer(\n          data.buffer,\n          data.byteOffset + 2,\n          data.length - 2\n        );\n\n        if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n          const error = this.createError(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n\n          cb(error);\n          return;\n        }\n\n        this._loop = false;\n        this.emit('conclude', code, buf);\n        this.end();\n      }\n\n      this._state = GET_INFO;\n      return;\n    }\n\n    if (this._allowSynchronousEvents) {\n      this.emit(this._opcode === 0x09 ? 'ping' : 'pong', data);\n      this._state = GET_INFO;\n    } else {\n      this._state = DEFER_EVENT;\n      setImmediate(() => {\n        this.emit(this._opcode === 0x09 ? 'ping' : 'pong', data);\n        this._state = GET_INFO;\n        this.startLoop(cb);\n      });\n    }\n  }\n\n  /**\n   * Builds an error object.\n   *\n   * @param {function(new:Error|RangeError)} ErrorCtor The error constructor\n   * @param {String} message The error message\n   * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n   *     `message`\n   * @param {Number} statusCode The status code\n   * @param {String} errorCode The exposed error code\n   * @return {(Error|RangeError)} The error\n   * @private\n   */\n  createError(ErrorCtor, message, prefix, statusCode, errorCode) {\n    this._loop = false;\n    this._errored = true;\n\n    const err = new ErrorCtor(\n      prefix ? `Invalid WebSocket frame: ${message}` : message\n    );\n\n    Error.captureStackTrace(err, this.createError);\n    err.code = errorCode;\n    err[kStatusCode] = statusCode;\n    return err;\n  }\n}\n\nmodule.exports = Receiver;\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex\" }] */\n\n'use strict';\n\nconst { Duplex } = require('stream');\nconst { randomFillSync } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst { EMPTY_BUFFER, kWebSocket, NOOP } = require('./constants');\nconst { isBlob, isValidStatusCode } = require('./validation');\nconst { mask: applyMask, toBuffer } = require('./buffer-util');\n\nconst kByteLength = Symbol('kByteLength');\nconst maskBuffer = Buffer.alloc(4);\nconst RANDOM_POOL_SIZE = 8 * 1024;\nlet randomPool;\nlet randomPoolPointer = RANDOM_POOL_SIZE;\n\nconst DEFAULT = 0;\nconst DEFLATING = 1;\nconst GET_BLOB_DATA = 2;\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {Duplex} socket The connection socket\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   * @param {Function} [generateMask] The function used to generate the masking\n   *     key\n   */\n  constructor(socket, extensions, generateMask) {\n    this._extensions = extensions || {};\n\n    if (generateMask) {\n      this._generateMask = generateMask;\n      this._maskBuffer = Buffer.alloc(4);\n    }\n\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._queue = [];\n    this._state = DEFAULT;\n    this.onerror = NOOP;\n    this[kWebSocket] = undefined;\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {(Buffer|String)} data The data to frame\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @return {(Buffer|String)[]} The framed data\n   * @public\n   */\n  static frame(data, options) {\n    let mask;\n    let merge = false;\n    let offset = 2;\n    let skipMasking = false;\n\n    if (options.mask) {\n      mask = options.maskBuffer || maskBuffer;\n\n      if (options.generateMask) {\n        options.generateMask(mask);\n      } else {\n        if (randomPoolPointer === RANDOM_POOL_SIZE) {\n          /* istanbul ignore else  */\n          if (randomPool === undefined) {\n            //\n            // This is lazily initialized because server-sent frames must not\n            // be masked so it may never be used.\n            //\n            randomPool = Buffer.alloc(RANDOM_POOL_SIZE);\n          }\n\n          randomFillSync(randomPool, 0, RANDOM_POOL_SIZE);\n          randomPoolPointer = 0;\n        }\n\n        mask[0] = randomPool[randomPoolPointer++];\n        mask[1] = randomPool[randomPoolPointer++];\n        mask[2] = randomPool[randomPoolPointer++];\n        mask[3] = randomPool[randomPoolPointer++];\n      }\n\n      skipMasking = (mask[0] | mask[1] | mask[2] | mask[3]) === 0;\n      offset = 6;\n    }\n\n    let dataLength;\n\n    if (typeof data === 'string') {\n      if (\n        (!options.mask || skipMasking) &&\n        options[kByteLength] !== undefined\n      ) {\n        dataLength = options[kByteLength];\n      } else {\n        data = Buffer.from(data);\n        dataLength = data.length;\n      }\n    } else {\n      dataLength = data.length;\n      merge = options.mask && options.readOnly && !skipMasking;\n    }\n\n    let payloadLength = dataLength;\n\n    if (dataLength >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (dataLength > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? dataLength + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    target[1] = payloadLength;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(dataLength, 2);\n    } else if (payloadLength === 127) {\n      target[2] = target[3] = 0;\n      target.writeUIntBE(dataLength, 4, 6);\n    }\n\n    if (!options.mask) return [target, data];\n\n    target[1] |= 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (skipMasking) return [target, data];\n\n    if (merge) {\n      applyMask(data, mask, target, offset, dataLength);\n      return [target];\n    }\n\n    applyMask(data, mask, data, 0, dataLength);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {Number} [code] The status code component of the body\n   * @param {(String|Buffer)} [data] The message component of the body\n   * @param {Boolean} [mask=false] Specifies whether or not to mask the message\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(code, data, mask, cb) {\n    let buf;\n\n    if (code === undefined) {\n      buf = EMPTY_BUFFER;\n    } else if (typeof code !== 'number' || !isValidStatusCode(code)) {\n      throw new TypeError('First argument must be a valid error code number');\n    } else if (data === undefined || !data.length) {\n      buf = Buffer.allocUnsafe(2);\n      buf.writeUInt16BE(code, 0);\n    } else {\n      const length = Buffer.byteLength(data);\n\n      if (length > 123) {\n        throw new RangeError('The message must not be greater than 123 bytes');\n      }\n\n      buf = Buffer.allocUnsafe(2 + length);\n      buf.writeUInt16BE(code, 0);\n\n      if (typeof data === 'string') {\n        buf.write(data, 2);\n      } else {\n        buf.set(data, 2);\n      }\n    }\n\n    const options = {\n      [kByteLength]: buf.length,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x08,\n      readOnly: false,\n      rsv1: false\n    };\n\n    if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, buf, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(buf, options), cb);\n    }\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  ping(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x09,\n      readOnly,\n      rsv1: false\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, false, options, cb]);\n      } else {\n        this.getBlobData(data, false, options, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  pong(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x0a,\n      readOnly,\n      rsv1: false\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, false, options, cb]);\n      } else {\n        this.getBlobData(data, false, options, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} [options.binary=false] Specifies whether `data` is binary\n   *     or text\n   * @param {Boolean} [options.compress=false] Specifies whether or not to\n   *     compress `data`\n   * @param {Boolean} [options.fin=false] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  send(data, options, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n    let opcode = options.binary ? 2 : 1;\n    let rsv1 = options.compress;\n\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (\n        rsv1 &&\n        perMessageDeflate &&\n        perMessageDeflate.params[\n          perMessageDeflate._isServer\n            ? 'server_no_context_takeover'\n            : 'client_no_context_takeover'\n        ]\n      ) {\n        rsv1 = byteLength >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    const opts = {\n      [kByteLength]: byteLength,\n      fin: options.fin,\n      generateMask: this._generateMask,\n      mask: options.mask,\n      maskBuffer: this._maskBuffer,\n      opcode,\n      readOnly,\n      rsv1\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, this._compress, opts, cb]);\n      } else {\n        this.getBlobData(data, this._compress, opts, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, this._compress, opts, cb]);\n    } else {\n      this.dispatch(data, this._compress, opts, cb);\n    }\n  }\n\n  /**\n   * Gets the contents of a blob as binary data.\n   *\n   * @param {Blob} blob The blob\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     the data\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  getBlobData(blob, compress, options, cb) {\n    this._bufferedBytes += options[kByteLength];\n    this._state = GET_BLOB_DATA;\n\n    blob\n      .arrayBuffer()\n      .then((arrayBuffer) => {\n        if (this._socket.destroyed) {\n          const err = new Error(\n            'The socket was closed while the blob was being read'\n          );\n\n          //\n          // `callCallbacks` is called in the next tick to ensure that errors\n          // that might be thrown in the callbacks behave like errors thrown\n          // outside the promise chain.\n          //\n          process.nextTick(callCallbacks, this, err, cb);\n          return;\n        }\n\n        this._bufferedBytes -= options[kByteLength];\n        const data = toBuffer(arrayBuffer);\n\n        if (!compress) {\n          this._state = DEFAULT;\n          this.sendFrame(Sender.frame(data, options), cb);\n          this.dequeue();\n        } else {\n          this.dispatch(data, compress, options, cb);\n        }\n      })\n      .catch((err) => {\n        //\n        // `onError` is called in the next tick for the same reason that\n        // `callCallbacks` above is.\n        //\n        process.nextTick(onError, this, err, cb);\n      });\n  }\n\n  /**\n   * Dispatches a message.\n   *\n   * @param {(Buffer|String)} data The message to send\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     `data`\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  dispatch(data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._bufferedBytes += options[kByteLength];\n    this._state = DEFLATING;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      if (this._socket.destroyed) {\n        const err = new Error(\n          'The socket was closed while data was being compressed'\n        );\n\n        callCallbacks(this, err, cb);\n        return;\n      }\n\n      this._bufferedBytes -= options[kByteLength];\n      this._state = DEFAULT;\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue() {\n    while (this._state === DEFAULT && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[3][kByteLength];\n      Reflect.apply(params[0], this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue(params) {\n    this._bufferedBytes += params[3][kByteLength];\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {Buffer[]} list The frame to send\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  sendFrame(list, cb) {\n    if (list.length === 2) {\n      this._socket.cork();\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n      this._socket.uncork();\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n\n/**\n * Calls queued callbacks with an error.\n *\n * @param {Sender} sender The `Sender` instance\n * @param {Error} err The error to call the callbacks with\n * @param {Function} [cb] The first callback\n * @private\n */\nfunction callCallbacks(sender, err, cb) {\n  if (typeof cb === 'function') cb(err);\n\n  for (let i = 0; i < sender._queue.length; i++) {\n    const params = sender._queue[i];\n    const callback = params[params.length - 1];\n\n    if (typeof callback === 'function') callback(err);\n  }\n}\n\n/**\n * Handles a `Sender` error.\n *\n * @param {Sender} sender The `Sender` instance\n * @param {Error} err The error\n * @param {Function} [cb] The first pending callback\n * @private\n */\nfunction onError(sender, err, cb) {\n  callCallbacks(sender, err, cb);\n  sender.onerror(err);\n}\n","'use strict';\n\nconst { Duplex } = require('stream');\n\n/**\n * Emits the `'close'` event on a stream.\n *\n * @param {Duplex} stream The stream.\n * @private\n */\nfunction emitClose(stream) {\n  stream.emit('close');\n}\n\n/**\n * The listener of the `'end'` event.\n *\n * @private\n */\nfunction duplexOnEnd() {\n  if (!this.destroyed && this._writableState.finished) {\n    this.destroy();\n  }\n}\n\n/**\n * The listener of the `'error'` event.\n *\n * @param {Error} err The error\n * @private\n */\nfunction duplexOnError(err) {\n  this.removeListener('error', duplexOnError);\n  this.destroy();\n  if (this.listenerCount('error') === 0) {\n    // Do not suppress the throwing behavior.\n    this.emit('error', err);\n  }\n}\n\n/**\n * Wraps a `WebSocket` in a duplex stream.\n *\n * @param {WebSocket} ws The `WebSocket` to wrap\n * @param {Object} [options] The options for the `Duplex` constructor\n * @return {Duplex} The duplex stream\n * @public\n */\nfunction createWebSocketStream(ws, options) {\n  let terminateOnDestroy = true;\n\n  const duplex = new Duplex({\n    ...options,\n    autoDestroy: false,\n    emitClose: false,\n    objectMode: false,\n    writableObjectMode: false\n  });\n\n  ws.on('message', function message(msg, isBinary) {\n    const data =\n      !isBinary && duplex._readableState.objectMode ? msg.toString() : msg;\n\n    if (!duplex.push(data)) ws.pause();\n  });\n\n  ws.once('error', function error(err) {\n    if (duplex.destroyed) return;\n\n    // Prevent `ws.terminate()` from being called by `duplex._destroy()`.\n    //\n    // - If the `'error'` event is emitted before the `'open'` event, then\n    //   `ws.terminate()` is a noop as no socket is assigned.\n    // - Otherwise, the error is re-emitted by the listener of the `'error'`\n    //   event of the `Receiver` object. The listener already closes the\n    //   connection by calling `ws.close()`. This allows a close frame to be\n    //   sent to the other peer. If `ws.terminate()` is called right after this,\n    //   then the close frame might not be sent.\n    terminateOnDestroy = false;\n    duplex.destroy(err);\n  });\n\n  ws.once('close', function close() {\n    if (duplex.destroyed) return;\n\n    duplex.push(null);\n  });\n\n  duplex._destroy = function (err, callback) {\n    if (ws.readyState === ws.CLOSED) {\n      callback(err);\n      process.nextTick(emitClose, duplex);\n      return;\n    }\n\n    let called = false;\n\n    ws.once('error', function error(err) {\n      called = true;\n      callback(err);\n    });\n\n    ws.once('close', function close() {\n      if (!called) callback(err);\n      process.nextTick(emitClose, duplex);\n    });\n\n    if (terminateOnDestroy) ws.terminate();\n  };\n\n  duplex._final = function (callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._final(callback);\n      });\n      return;\n    }\n\n    // If the value of the `_socket` property is `null` it means that `ws` is a\n    // client websocket and the handshake failed. In fact, when this happens, a\n    // socket is never assigned to the websocket. Wait for the `'error'` event\n    // that will be emitted by the websocket.\n    if (ws._socket === null) return;\n\n    if (ws._socket._writableState.finished) {\n      callback();\n      if (duplex._readableState.endEmitted) duplex.destroy();\n    } else {\n      ws._socket.once('finish', function finish() {\n        // `duplex` is not destroyed here because the `'end'` event will be\n        // emitted on `duplex` after this `'finish'` event. The EOF signaling\n        // `null` chunk is, in fact, pushed when the websocket emits `'close'`.\n        callback();\n      });\n      ws.close();\n    }\n  };\n\n  duplex._read = function () {\n    if (ws.isPaused) ws.resume();\n  };\n\n  duplex._write = function (chunk, encoding, callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._write(chunk, encoding, callback);\n      });\n      return;\n    }\n\n    ws.send(chunk, callback);\n  };\n\n  duplex.on('end', duplexOnEnd);\n  duplex.on('error', duplexOnError);\n  return duplex;\n}\n\nmodule.exports = createWebSocketStream;\n","'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Parses the `Sec-WebSocket-Protocol` header into a set of subprotocol names.\n *\n * @param {String} header The field value of the header\n * @return {Set} The subprotocol names\n * @public\n */\nfunction parse(header) {\n  const protocols = new Set();\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (i; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (end === -1 && tokenChars[code] === 1) {\n      if (start === -1) start = i;\n    } else if (\n      i !== 0 &&\n      (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n    ) {\n      if (end === -1 && start !== -1) end = i;\n    } else if (code === 0x2c /* ',' */) {\n      if (start === -1) {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n\n      if (end === -1) end = i;\n\n      const protocol = header.slice(start, end);\n\n      if (protocols.has(protocol)) {\n        throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n      }\n\n      protocols.add(protocol);\n      start = end = -1;\n    } else {\n      throw new SyntaxError(`Unexpected character at index ${i}`);\n    }\n  }\n\n  if (start === -1 || end !== -1) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  const protocol = header.slice(start, i);\n\n  if (protocols.has(protocol)) {\n    throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n  }\n\n  protocols.add(protocol);\n  return protocols;\n}\n\nmodule.exports = { parse };\n","'use strict';\n\nconst { isUtf8 } = require('buffer');\n\nconst { hasBlob } = require('./constants');\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\n// prettier-ignore\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Checks if a status code is allowed in a close frame.\n *\n * @param {Number} code The status code\n * @return {Boolean} `true` if the status code is valid, else `false`\n * @public\n */\nfunction isValidStatusCode(code) {\n  return (\n    (code >= 1000 &&\n      code <= 1014 &&\n      code !== 1004 &&\n      code !== 1005 &&\n      code !== 1006) ||\n    (code >= 3000 && code <= 4999)\n  );\n}\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction _isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0) {\n      // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {\n      // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0 // Overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {\n      // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80) || // Overlong\n        (buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0) // Surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {\n      // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80) || // Overlong\n        (buf[i] === 0xf4 && buf[i + 1] > 0x8f) ||\n        buf[i] > 0xf4 // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Determines whether a value is a `Blob`.\n *\n * @param {*} value The value to be tested\n * @return {Boolean} `true` if `value` is a `Blob`, else `false`\n * @private\n */\nfunction isBlob(value) {\n  return (\n    hasBlob &&\n    typeof value === 'object' &&\n    typeof value.arrayBuffer === 'function' &&\n    typeof value.type === 'string' &&\n    typeof value.stream === 'function' &&\n    (value[Symbol.toStringTag] === 'Blob' ||\n      value[Symbol.toStringTag] === 'File')\n  );\n}\n\nmodule.exports = {\n  isBlob,\n  isValidStatusCode,\n  isValidUTF8: _isValidUTF8,\n  tokenChars\n};\n\nif (isUtf8) {\n  module.exports.isValidUTF8 = function (buf) {\n    return buf.length < 24 ? _isValidUTF8(buf) : isUtf8(buf);\n  };\n} /* istanbul ignore else  */ else if (!process.env.WS_NO_UTF_8_VALIDATE) {\n  try {\n    const isValidUTF8 = require('utf-8-validate');\n\n    module.exports.isValidUTF8 = function (buf) {\n      return buf.length < 32 ? _isValidUTF8(buf) : isValidUTF8(buf);\n    };\n  } catch (e) {\n    // Continue regardless of the error.\n  }\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex$\", \"caughtErrors\": \"none\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst http = require('http');\nconst { Duplex } = require('stream');\nconst { createHash } = require('crypto');\n\nconst extension = require('./extension');\nconst PerMessageDeflate = require('./permessage-deflate');\nconst subprotocol = require('./subprotocol');\nconst WebSocket = require('./websocket');\nconst { GUID, kWebSocket } = require('./constants');\n\nconst keyRegex = /^[+/0-9A-Za-z]{22}==$/;\n\nconst RUNNING = 0;\nconst CLOSING = 1;\nconst CLOSED = 2;\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {Boolean} [options.autoPong=true] Specifies whether or not to\n   *     automatically send a pong in response to a ping\n   * @param {Number} [options.backlog=511] The maximum length of the queue of\n   *     pending connections\n   * @param {Boolean} [options.clientTracking=true] Specifies whether or not to\n   *     track clients\n   * @param {Function} [options.handleProtocols] A hook to handle protocols\n   * @param {String} [options.host] The hostname where to bind the server\n   * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n   *     size\n   * @param {Boolean} [options.noServer=false] Enable no server mode\n   * @param {String} [options.path] Accept only connections matching this path\n   * @param {(Boolean|Object)} [options.perMessageDeflate=false] Enable/disable\n   *     permessage-deflate\n   * @param {Number} [options.port] The port where to bind the server\n   * @param {(http.Server|https.Server)} [options.server] A pre-created HTTP/S\n   *     server to use\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @param {Function} [options.verifyClient] A hook to reject connections\n   * @param {Function} [options.WebSocket=WebSocket] Specifies the `WebSocket`\n   *     class to use. It must be the `WebSocket` class or class that extends it\n   * @param {Function} [callback] A listener for the `listening` event\n   */\n  constructor(options, callback) {\n    super();\n\n    options = {\n      allowSynchronousEvents: true,\n      autoPong: true,\n      maxPayload: 100 * 1024 * 1024,\n      skipUTF8Validation: false,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null,\n      WebSocket,\n      ...options\n    };\n\n    if (\n      (options.port == null && !options.server && !options.noServer) ||\n      (options.port != null && (options.server || options.noServer)) ||\n      (options.server && options.noServer)\n    ) {\n      throw new TypeError(\n        'One and only one of the \"port\", \"server\", or \"noServer\" options ' +\n          'must be specified'\n      );\n    }\n\n    if (options.port != null) {\n      this._server = http.createServer((req, res) => {\n        const body = http.STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(\n        options.port,\n        options.host,\n        options.backlog,\n        callback\n      );\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      const emitConnection = this.emit.bind(this, 'connection');\n\n      this._removeListeners = addListeners(this._server, {\n        listening: this.emit.bind(this, 'listening'),\n        error: this.emit.bind(this, 'error'),\n        upgrade: (req, socket, head) => {\n          this.handleUpgrade(req, socket, head, emitConnection);\n        }\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) {\n      this.clients = new Set();\n      this._shouldEmitClose = false;\n    }\n\n    this.options = options;\n    this._state = RUNNING;\n  }\n\n  /**\n   * Returns the bound address, the address family name, and port of the server\n   * as reported by the operating system if listening on an IP socket.\n   * If the server is listening on a pipe or UNIX domain socket, the name is\n   * returned as a string.\n   *\n   * @return {(Object|String|null)} The address of the server\n   * @public\n   */\n  address() {\n    if (this.options.noServer) {\n      throw new Error('The server is operating in \"noServer\" mode');\n    }\n\n    if (!this._server) return null;\n    return this._server.address();\n  }\n\n  /**\n   * Stop the server from accepting new connections and emit the `'close'` event\n   * when all existing connections are closed.\n   *\n   * @param {Function} [cb] A one-time listener for the `'close'` event\n   * @public\n   */\n  close(cb) {\n    if (this._state === CLOSED) {\n      if (cb) {\n        this.once('close', () => {\n          cb(new Error('The server is not running'));\n        });\n      }\n\n      process.nextTick(emitClose, this);\n      return;\n    }\n\n    if (cb) this.once('close', cb);\n\n    if (this._state === CLOSING) return;\n    this._state = CLOSING;\n\n    if (this.options.noServer || this.options.server) {\n      if (this._server) {\n        this._removeListeners();\n        this._removeListeners = this._server = null;\n      }\n\n      if (this.clients) {\n        if (!this.clients.size) {\n          process.nextTick(emitClose, this);\n        } else {\n          this._shouldEmitClose = true;\n        }\n      } else {\n        process.nextTick(emitClose, this);\n      }\n    } else {\n      const server = this._server;\n\n      this._removeListeners();\n      this._removeListeners = this._server = null;\n\n      //\n      // The HTTP/S server was created internally. Close it, and rely on its\n      // `'close'` event.\n      //\n      server.close(() => {\n        emitClose(this);\n      });\n    }\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle(req) {\n    if (this.options.path) {\n      const index = req.url.indexOf('?');\n      const pathname = index !== -1 ? req.url.slice(0, index) : req.url;\n\n      if (pathname !== this.options.path) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade(req, socket, head, cb) {\n    socket.on('error', socketOnError);\n\n    const key = req.headers['sec-websocket-key'];\n    const upgrade = req.headers.upgrade;\n    const version = +req.headers['sec-websocket-version'];\n\n    if (req.method !== 'GET') {\n      const message = 'Invalid HTTP method';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 405, message);\n      return;\n    }\n\n    if (upgrade === undefined || upgrade.toLowerCase() !== 'websocket') {\n      const message = 'Invalid Upgrade header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (key === undefined || !keyRegex.test(key)) {\n      const message = 'Missing or invalid Sec-WebSocket-Key header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (version !== 8 && version !== 13) {\n      const message = 'Missing or invalid Sec-WebSocket-Version header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (!this.shouldHandle(req)) {\n      abortHandshake(socket, 400);\n      return;\n    }\n\n    const secWebSocketProtocol = req.headers['sec-websocket-protocol'];\n    let protocols = new Set();\n\n    if (secWebSocketProtocol !== undefined) {\n      try {\n        protocols = subprotocol.parse(secWebSocketProtocol);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Protocol header';\n        abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n        return;\n      }\n    }\n\n    const secWebSocketExtensions = req.headers['sec-websocket-extensions'];\n    const extensions = {};\n\n    if (\n      this.options.perMessageDeflate &&\n      secWebSocketExtensions !== undefined\n    ) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = extension.parse(secWebSocketExtensions);\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        const message =\n          'Invalid or unacceptable Sec-WebSocket-Extensions header';\n        abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n        return;\n      }\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin:\n          req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.socket.authorized || req.socket.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message, headers) => {\n          if (!verified) {\n            return abortHandshake(socket, code || 401, message, headers);\n          }\n\n          this.completeUpgrade(\n            extensions,\n            key,\n            protocols,\n            req,\n            socket,\n            head,\n            cb\n          );\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n    }\n\n    this.completeUpgrade(extensions, key, protocols, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {Object} extensions The accepted extensions\n   * @param {String} key The value of the `Sec-WebSocket-Key` header\n   * @param {Set} protocols The subprotocols\n   * @param {http.IncomingMessage} req The request object\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @throws {Error} If called more than once with the same socket\n   * @private\n   */\n  completeUpgrade(extensions, key, protocols, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    if (socket[kWebSocket]) {\n      throw new Error(\n        'server.handleUpgrade() was called more than once with the same ' +\n          'socket, possibly due to a misconfiguration'\n      );\n    }\n\n    if (this._state > RUNNING) return abortHandshake(socket, 503);\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${digest}`\n    ];\n\n    const ws = new this.options.WebSocket(null, undefined, this.options);\n\n    if (protocols.size) {\n      //\n      // Optionally call external protocol selection handler.\n      //\n      const protocol = this.options.handleProtocols\n        ? this.options.handleProtocols(protocols, req)\n        : protocols.values().next().value;\n\n      if (protocol) {\n        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n        ws._protocol = protocol;\n      }\n    }\n\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = extension.format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n      ws._extensions = extensions;\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n    socket.removeListener('error', socketOnError);\n\n    ws.setSocket(socket, head, {\n      allowSynchronousEvents: this.options.allowSynchronousEvents,\n      maxPayload: this.options.maxPayload,\n      skipUTF8Validation: this.options.skipUTF8Validation\n    });\n\n    if (this.clients) {\n      this.clients.add(ws);\n      ws.on('close', () => {\n        this.clients.delete(ws);\n\n        if (this._shouldEmitClose && !this.clients.size) {\n          process.nextTick(emitClose, this);\n        }\n      });\n    }\n\n    cb(ws, req);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Add event listeners on an `EventEmitter` using a map of <event, listener>\n * pairs.\n *\n * @param {EventEmitter} server The event emitter\n * @param {Object.<String, Function>} map The listeners to add\n * @return {Function} A function that will remove the added listeners when\n *     called\n * @private\n */\nfunction addListeners(server, map) {\n  for (const event of Object.keys(map)) server.on(event, map[event]);\n\n  return function removeListeners() {\n    for (const event of Object.keys(map)) {\n      server.removeListener(event, map[event]);\n    }\n  };\n}\n\n/**\n * Emit a `'close'` event on an `EventEmitter`.\n *\n * @param {EventEmitter} server The event emitter\n * @private\n */\nfunction emitClose(server) {\n  server._state = CLOSED;\n  server.emit('close');\n}\n\n/**\n * Handle socket errors.\n *\n * @private\n */\nfunction socketOnError() {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {Duplex} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @param {Object} [headers] Additional HTTP response headers\n * @private\n */\nfunction abortHandshake(socket, code, message, headers) {\n  //\n  // The socket is writable unless the user destroyed or ended it before calling\n  // `server.handleUpgrade()` or in the `verifyClient` function, which is a user\n  // error. Handling this does not make much sense as the worst that can happen\n  // is that some of the data written by the user might be discarded due to the\n  // call to `socket.end()` below, which triggers an `'error'` event that in\n  // turn causes the socket to be destroyed.\n  //\n  message = message || http.STATUS_CODES[code];\n  headers = {\n    Connection: 'close',\n    'Content-Type': 'text/html',\n    'Content-Length': Buffer.byteLength(message),\n    ...headers\n  };\n\n  socket.once('finish', socket.destroy);\n\n  socket.end(\n    `HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\\r\\n` +\n      Object.keys(headers)\n        .map((h) => `${h}: ${headers[h]}`)\n        .join('\\r\\n') +\n      '\\r\\n\\r\\n' +\n      message\n  );\n}\n\n/**\n * Emit a `'wsClientError'` event on a `WebSocketServer` if there is at least\n * one listener for it, otherwise call `abortHandshake()`.\n *\n * @param {WebSocketServer} server The WebSocket server\n * @param {http.IncomingMessage} req The request object\n * @param {Duplex} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} message The HTTP response body\n * @private\n */\nfunction abortHandshakeOrEmitwsClientError(server, req, socket, code, message) {\n  if (server.listenerCount('wsClientError')) {\n    const err = new Error(message);\n    Error.captureStackTrace(err, abortHandshakeOrEmitwsClientError);\n\n    server.emit('wsClientError', err, socket, req);\n  } else {\n    abortHandshake(socket, code, message);\n  }\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex|Readable$\", \"caughtErrors\": \"none\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst { randomBytes, createHash } = require('crypto');\nconst { Duplex, Readable } = require('stream');\nconst { URL } = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\nconst { isBlob } = require('./validation');\n\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  GUID,\n  kForOnEventAttribute,\n  kListener,\n  kStatusCode,\n  kWebSocket,\n  NOOP\n} = require('./constants');\nconst {\n  EventTarget: { addEventListener, removeEventListener }\n} = require('./event-target');\nconst { format, parse } = require('./extension');\nconst { toBuffer } = require('./buffer-util');\n\nconst closeTimeout = 30 * 1000;\nconst kAborted = Symbol('kAborted');\nconst protocolVersions = [8, 13];\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst subprotocolRegex = /^[!#$%&'*+\\-.0-9A-Z^_`|a-z~]+$/;\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|URL)} address The URL to which to connect\n   * @param {(String|String[])} [protocols] The subprotocols\n   * @param {Object} [options] Connection options\n   */\n  constructor(address, protocols, options) {\n    super();\n\n    this._binaryType = BINARY_TYPES[0];\n    this._closeCode = 1006;\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = EMPTY_BUFFER;\n    this._closeTimer = null;\n    this._errorEmitted = false;\n    this._extensions = {};\n    this._paused = false;\n    this._protocol = '';\n    this._readyState = WebSocket.CONNECTING;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      this._bufferedAmount = 0;\n      this._isServer = false;\n      this._redirects = 0;\n\n      if (protocols === undefined) {\n        protocols = [];\n      } else if (!Array.isArray(protocols)) {\n        if (typeof protocols === 'object' && protocols !== null) {\n          options = protocols;\n          protocols = [];\n        } else {\n          protocols = [protocols];\n        }\n      }\n\n      initAsClient(this, address, protocols, options);\n    } else {\n      this._autoPong = options.autoPong;\n      this._isServer = true;\n    }\n  }\n\n  /**\n   * For historical reasons, the custom \"nodebuffer\" type is used by the default\n   * instead of \"blob\".\n   *\n   * @type {String}\n   */\n  get binaryType() {\n    return this._binaryType;\n  }\n\n  set binaryType(type) {\n    if (!BINARY_TYPES.includes(type)) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount() {\n    if (!this._socket) return this._bufferedAmount;\n\n    return this._socket._writableState.length + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions() {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get isPaused() {\n    return this._paused;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onclose() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onerror() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onopen() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onmessage() {\n    return null;\n  }\n\n  /**\n   * @type {String}\n   */\n  get protocol() {\n    return this._protocol;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get readyState() {\n    return this._readyState;\n  }\n\n  /**\n   * @type {String}\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Object} options Options object\n   * @param {Boolean} [options.allowSynchronousEvents=false] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Number} [options.maxPayload=0] The maximum allowed message size\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @private\n   */\n  setSocket(socket, head, options) {\n    const receiver = new Receiver({\n      allowSynchronousEvents: options.allowSynchronousEvents,\n      binaryType: this.binaryType,\n      extensions: this._extensions,\n      isServer: this._isServer,\n      maxPayload: options.maxPayload,\n      skipUTF8Validation: options.skipUTF8Validation\n    });\n\n    const sender = new Sender(socket, this._extensions, options.generateMask);\n\n    this._receiver = receiver;\n    this._sender = sender;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    sender[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    sender.onerror = senderOnError;\n\n    //\n    // These methods may not be available if `socket` is just a `Duplex`.\n    //\n    if (socket.setTimeout) socket.setTimeout(0);\n    if (socket.setNoDelay) socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this._readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose() {\n    if (!this._socket) {\n      this._readyState = WebSocket.CLOSED;\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this._readyState = WebSocket.CLOSED;\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+-->|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} [code] Status code explaining why the connection is closing\n   * @param {(String|Buffer)} [data] The reason why the connection is\n   *     closing\n   * @public\n   */\n  close(code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      abortHandshake(this, this._req, msg);\n      return;\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (\n        this._closeFrameSent &&\n        (this._closeFrameReceived || this._receiver._writableState.errorEmitted)\n      ) {\n        this._socket.end();\n      }\n\n      return;\n    }\n\n    this._readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (\n        this._closeFrameReceived ||\n        this._receiver._writableState.errorEmitted\n      ) {\n        this._socket.end();\n      }\n    });\n\n    setCloseTimer(this);\n  }\n\n  /**\n   * Pause the socket.\n   *\n   * @public\n   */\n  pause() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = true;\n    this._socket.pause();\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the ping is sent\n   * @public\n   */\n  ping(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the pong is sent\n   * @public\n   */\n  pong(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Resume the socket.\n   *\n   * @public\n   */\n  resume() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = false;\n    if (!this._receiver._writableState.needDrain) this._socket.resume();\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.binary] Specifies whether `data` is binary or\n   *     text\n   * @param {Boolean} [options.compress] Specifies whether or not to compress\n   *     `data`\n   * @param {Boolean} [options.fin=true] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when data is written out\n   * @public\n   */\n  send(data, options, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    const opts = {\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true,\n      ...options\n    };\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate() {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      abortHandshake(this, this._req, msg);\n      return;\n    }\n\n    if (this._socket) {\n      this._readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n[\n  'binaryType',\n  'bufferedAmount',\n  'extensions',\n  'isPaused',\n  'protocol',\n  'readyState',\n  'url'\n].forEach((property) => {\n  Object.defineProperty(WebSocket.prototype, property, { enumerable: true });\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    enumerable: true,\n    get() {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) return listener[kListener];\n      }\n\n      return null;\n    },\n    set(handler) {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) {\n          this.removeListener(method, listener);\n          break;\n        }\n      }\n\n      if (typeof handler !== 'function') return;\n\n      this.addEventListener(method, handler, {\n        [kForOnEventAttribute]: true\n      });\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = addEventListener;\nWebSocket.prototype.removeEventListener = removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {WebSocket} websocket The client to initialize\n * @param {(String|URL)} address The URL to which to connect\n * @param {Array} protocols The subprotocols\n * @param {Object} [options] Connection options\n * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether any\n *     of the `'message'`, `'ping'`, and `'pong'` events can be emitted multiple\n *     times in the same tick\n * @param {Boolean} [options.autoPong=true] Specifies whether or not to\n *     automatically send a pong in response to a ping\n * @param {Function} [options.finishRequest] A function which can be used to\n *     customize the headers of each http request before it is sent\n * @param {Boolean} [options.followRedirects=false] Whether or not to follow\n *     redirects\n * @param {Function} [options.generateMask] The function used to generate the\n *     masking key\n * @param {Number} [options.handshakeTimeout] Timeout in milliseconds for the\n *     handshake request\n * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n *     size\n * @param {Number} [options.maxRedirects=10] The maximum number of redirects\n *     allowed\n * @param {String} [options.origin] Value of the `Origin` or\n *     `Sec-WebSocket-Origin` header\n * @param {(Boolean|Object)} [options.perMessageDeflate=true] Enable/disable\n *     permessage-deflate\n * @param {Number} [options.protocolVersion=13] Value of the\n *     `Sec-WebSocket-Version` header\n * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n *     not to skip UTF-8 validation for text and close messages\n * @private\n */\nfunction initAsClient(websocket, address, protocols, options) {\n  const opts = {\n    allowSynchronousEvents: true,\n    autoPong: true,\n    protocolVersion: protocolVersions[1],\n    maxPayload: 100 * 1024 * 1024,\n    skipUTF8Validation: false,\n    perMessageDeflate: true,\n    followRedirects: false,\n    maxRedirects: 10,\n    ...options,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: 'GET',\n    host: undefined,\n    path: undefined,\n    port: undefined\n  };\n\n  websocket._autoPong = opts.autoPong;\n\n  if (!protocolVersions.includes(opts.protocolVersion)) {\n    throw new RangeError(\n      `Unsupported protocol version: ${opts.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  let parsedUrl;\n\n  if (address instanceof URL) {\n    parsedUrl = address;\n  } else {\n    try {\n      parsedUrl = new URL(address);\n    } catch (e) {\n      throw new SyntaxError(`Invalid URL: ${address}`);\n    }\n  }\n\n  if (parsedUrl.protocol === 'http:') {\n    parsedUrl.protocol = 'ws:';\n  } else if (parsedUrl.protocol === 'https:') {\n    parsedUrl.protocol = 'wss:';\n  }\n\n  websocket._url = parsedUrl.href;\n\n  const isSecure = parsedUrl.protocol === 'wss:';\n  const isIpcUrl = parsedUrl.protocol === 'ws+unix:';\n  let invalidUrlMessage;\n\n  if (parsedUrl.protocol !== 'ws:' && !isSecure && !isIpcUrl) {\n    invalidUrlMessage =\n      'The URL\\'s protocol must be one of \"ws:\", \"wss:\", ' +\n      '\"http:\", \"https\", or \"ws+unix:\"';\n  } else if (isIpcUrl && !parsedUrl.pathname) {\n    invalidUrlMessage = \"The URL's pathname is empty\";\n  } else if (parsedUrl.hash) {\n    invalidUrlMessage = 'The URL contains a fragment identifier';\n  }\n\n  if (invalidUrlMessage) {\n    const err = new SyntaxError(invalidUrlMessage);\n\n    if (websocket._redirects === 0) {\n      throw err;\n    } else {\n      emitErrorAndClose(websocket, err);\n      return;\n    }\n  }\n\n  const defaultPort = isSecure ? 443 : 80;\n  const key = randomBytes(16).toString('base64');\n  const request = isSecure ? https.request : http.request;\n  const protocolSet = new Set();\n  let perMessageDeflate;\n\n  opts.createConnection =\n    opts.createConnection || (isSecure ? tlsConnect : netConnect);\n  opts.defaultPort = opts.defaultPort || defaultPort;\n  opts.port = parsedUrl.port || defaultPort;\n  opts.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  opts.headers = {\n    ...opts.headers,\n    'Sec-WebSocket-Version': opts.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    Connection: 'Upgrade',\n    Upgrade: 'websocket'\n  };\n  opts.path = parsedUrl.pathname + parsedUrl.search;\n  opts.timeout = opts.handshakeTimeout;\n\n  if (opts.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      opts.perMessageDeflate !== true ? opts.perMessageDeflate : {},\n      false,\n      opts.maxPayload\n    );\n    opts.headers['Sec-WebSocket-Extensions'] = format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols.length) {\n    for (const protocol of protocols) {\n      if (\n        typeof protocol !== 'string' ||\n        !subprotocolRegex.test(protocol) ||\n        protocolSet.has(protocol)\n      ) {\n        throw new SyntaxError(\n          'An invalid or duplicated subprotocol was specified'\n        );\n      }\n\n      protocolSet.add(protocol);\n    }\n\n    opts.headers['Sec-WebSocket-Protocol'] = protocols.join(',');\n  }\n  if (opts.origin) {\n    if (opts.protocolVersion < 13) {\n      opts.headers['Sec-WebSocket-Origin'] = opts.origin;\n    } else {\n      opts.headers.Origin = opts.origin;\n    }\n  }\n  if (parsedUrl.username || parsedUrl.password) {\n    opts.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isIpcUrl) {\n    const parts = opts.path.split(':');\n\n    opts.socketPath = parts[0];\n    opts.path = parts[1];\n  }\n\n  let req;\n\n  if (opts.followRedirects) {\n    if (websocket._redirects === 0) {\n      websocket._originalIpc = isIpcUrl;\n      websocket._originalSecure = isSecure;\n      websocket._originalHostOrSocketPath = isIpcUrl\n        ? opts.socketPath\n        : parsedUrl.host;\n\n      const headers = options && options.headers;\n\n      //\n      // Shallow copy the user provided options so that headers can be changed\n      // without mutating the original object.\n      //\n      options = { ...options, headers: {} };\n\n      if (headers) {\n        for (const [key, value] of Object.entries(headers)) {\n          options.headers[key.toLowerCase()] = value;\n        }\n      }\n    } else if (websocket.listenerCount('redirect') === 0) {\n      const isSameHost = isIpcUrl\n        ? websocket._originalIpc\n          ? opts.socketPath === websocket._originalHostOrSocketPath\n          : false\n        : websocket._originalIpc\n          ? false\n          : parsedUrl.host === websocket._originalHostOrSocketPath;\n\n      if (!isSameHost || (websocket._originalSecure && !isSecure)) {\n        //\n        // Match curl 7.77.0 behavior and drop the following headers. These\n        // headers are also dropped when following a redirect to a subdomain.\n        //\n        delete opts.headers.authorization;\n        delete opts.headers.cookie;\n\n        if (!isSameHost) delete opts.headers.host;\n\n        opts.auth = undefined;\n      }\n    }\n\n    //\n    // Match curl 7.77.0 behavior and make the first `Authorization` header win.\n    // If the `Authorization` header is set, then there is nothing to do as it\n    // will take precedence.\n    //\n    if (opts.auth && !options.headers.authorization) {\n      options.headers.authorization =\n        'Basic ' + Buffer.from(opts.auth).toString('base64');\n    }\n\n    req = websocket._req = request(opts);\n\n    if (websocket._redirects) {\n      //\n      // Unlike what is done for the `'upgrade'` event, no early exit is\n      // triggered here if the user calls `websocket.close()` or\n      // `websocket.terminate()` from a listener of the `'redirect'` event. This\n      // is because the user can also call `request.destroy()` with an error\n      // before calling `websocket.close()` or `websocket.terminate()` and this\n      // would result in an error being emitted on the `request` object with no\n      // `'error'` event listeners attached.\n      //\n      websocket.emit('redirect', websocket.url, req);\n    }\n  } else {\n    req = websocket._req = request(opts);\n  }\n\n  if (opts.timeout) {\n    req.on('timeout', () => {\n      abortHandshake(websocket, req, 'Opening handshake has timed out');\n    });\n  }\n\n  req.on('error', (err) => {\n    if (req === null || req[kAborted]) return;\n\n    req = websocket._req = null;\n    emitErrorAndClose(websocket, err);\n  });\n\n  req.on('response', (res) => {\n    const location = res.headers.location;\n    const statusCode = res.statusCode;\n\n    if (\n      location &&\n      opts.followRedirects &&\n      statusCode >= 300 &&\n      statusCode < 400\n    ) {\n      if (++websocket._redirects > opts.maxRedirects) {\n        abortHandshake(websocket, req, 'Maximum redirects exceeded');\n        return;\n      }\n\n      req.abort();\n\n      let addr;\n\n      try {\n        addr = new URL(location, address);\n      } catch (e) {\n        const err = new SyntaxError(`Invalid URL: ${location}`);\n        emitErrorAndClose(websocket, err);\n        return;\n      }\n\n      initAsClient(websocket, addr, protocols, options);\n    } else if (!websocket.emit('unexpected-response', req, res)) {\n      abortHandshake(\n        websocket,\n        req,\n        `Unexpected server response: ${res.statusCode}`\n      );\n    }\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    websocket.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the\n    // `'upgrade'` event.\n    //\n    if (websocket.readyState !== WebSocket.CONNECTING) return;\n\n    req = websocket._req = null;\n\n    const upgrade = res.headers.upgrade;\n\n    if (upgrade === undefined || upgrade.toLowerCase() !== 'websocket') {\n      abortHandshake(websocket, socket, 'Invalid Upgrade header');\n      return;\n    }\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(websocket, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    let protError;\n\n    if (serverProt !== undefined) {\n      if (!protocolSet.size) {\n        protError = 'Server sent a subprotocol but none was requested';\n      } else if (!protocolSet.has(serverProt)) {\n        protError = 'Server sent an invalid subprotocol';\n      }\n    } else if (protocolSet.size) {\n      protError = 'Server sent no subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(websocket, socket, protError);\n      return;\n    }\n\n    if (serverProt) websocket._protocol = serverProt;\n\n    const secWebSocketExtensions = res.headers['sec-websocket-extensions'];\n\n    if (secWebSocketExtensions !== undefined) {\n      if (!perMessageDeflate) {\n        const message =\n          'Server sent a Sec-WebSocket-Extensions header but no extension ' +\n          'was requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      let extensions;\n\n      try {\n        extensions = parse(secWebSocketExtensions);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      const extensionNames = Object.keys(extensions);\n\n      if (\n        extensionNames.length !== 1 ||\n        extensionNames[0] !== PerMessageDeflate.extensionName\n      ) {\n        const message = 'Server indicated an extension that was not requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      try {\n        perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      websocket._extensions[PerMessageDeflate.extensionName] =\n        perMessageDeflate;\n    }\n\n    websocket.setSocket(socket, head, {\n      allowSynchronousEvents: opts.allowSynchronousEvents,\n      generateMask: opts.generateMask,\n      maxPayload: opts.maxPayload,\n      skipUTF8Validation: opts.skipUTF8Validation\n    });\n  });\n\n  if (opts.finishRequest) {\n    opts.finishRequest(req, websocket);\n  } else {\n    req.end();\n  }\n}\n\n/**\n * Emit the `'error'` and `'close'` events.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {Error} The error to emit\n * @private\n */\nfunction emitErrorAndClose(websocket, err) {\n  websocket._readyState = WebSocket.CLOSING;\n  //\n  // The following assignment is practically useless and is done only for\n  // consistency.\n  //\n  websocket._errorEmitted = true;\n  websocket.emit('error', err);\n  websocket.emitClose();\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect(options) {\n  options.path = options.socketPath;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect(options) {\n  options.path = undefined;\n\n  if (!options.servername && options.servername !== '') {\n    options.servername = net.isIP(options.host) ? '' : options.host;\n  }\n\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket|tls.Socket)} stream The request to\n *     abort or the socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake(websocket, stream, message) {\n  websocket._readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream[kAborted] = true;\n    stream.abort();\n\n    if (stream.socket && !stream.socket.destroyed) {\n      //\n      // On Node.js >= 14.3.0 `request.abort()` does not destroy the socket if\n      // called after the request completed. See\n      // https://github.com/websockets/ws/issues/1869.\n      //\n      stream.socket.destroy();\n    }\n\n    process.nextTick(emitErrorAndClose, websocket, err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * Handle cases where the `ping()`, `pong()`, or `send()` methods are called\n * when the `readyState` attribute is `CLOSING` or `CLOSED`.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {*} [data] The data to send\n * @param {Function} [cb] Callback\n * @private\n */\nfunction sendAfterClose(websocket, data, cb) {\n  if (data) {\n    const length = isBlob(data) ? data.size : toBuffer(data).length;\n\n    //\n    // The `_bufferedAmount` property is used only when the peer is a client and\n    // the opening handshake fails. Under these circumstances, in fact, the\n    // `setSocket()` method is not called, so the `_socket` and `_sender`\n    // properties are set to `null`.\n    //\n    if (websocket._socket) websocket._sender._bufferedBytes += length;\n    else websocket._bufferedAmount += length;\n  }\n\n  if (cb) {\n    const err = new Error(\n      `WebSocket is not open: readyState ${websocket.readyState} ` +\n        `(${readyStates[websocket.readyState]})`\n    );\n    process.nextTick(cb, err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {Buffer} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude(code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (websocket._socket[kWebSocket] === undefined) return;\n\n  websocket._socket.removeListener('data', socketOnData);\n  process.nextTick(resume, websocket._socket);\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain() {\n  const websocket = this[kWebSocket];\n\n  if (!websocket.isPaused) websocket._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._socket[kWebSocket] !== undefined) {\n    websocket._socket.removeListener('data', socketOnData);\n\n    //\n    // On Node.js < 14.0.0 the `'error'` event is emitted synchronously. See\n    // https://github.com/websockets/ws/issues/1940.\n    //\n    process.nextTick(resume, websocket._socket);\n\n    websocket.close(err[kStatusCode]);\n  }\n\n  if (!websocket._errorEmitted) {\n    websocket._errorEmitted = true;\n    websocket.emit('error', err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish() {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {Buffer|ArrayBuffer|Buffer[])} data The message\n * @param {Boolean} isBinary Specifies whether the message is binary or not\n * @private\n */\nfunction receiverOnMessage(data, isBinary) {\n  this[kWebSocket].emit('message', data, isBinary);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing(data) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._autoPong) websocket.pong(data, !this._isServer, NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong(data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * Resume a readable stream\n *\n * @param {Readable} stream The readable stream\n * @private\n */\nfunction resume(stream) {\n  stream.resume();\n}\n\n/**\n * The `Sender` error event handler.\n *\n * @param {Error} The error\n * @private\n */\nfunction senderOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket.readyState === WebSocket.CLOSED) return;\n  if (websocket.readyState === WebSocket.OPEN) {\n    websocket._readyState = WebSocket.CLOSING;\n    setCloseTimer(websocket);\n  }\n\n  //\n  // `socket.end()` is used instead of `socket.destroy()` to allow the other\n  // peer to finish sending queued data. There is no need to set a timer here\n  // because `CLOSING` means that it is already set or not needed.\n  //\n  this._socket.end();\n\n  if (!websocket._errorEmitted) {\n    websocket._errorEmitted = true;\n    websocket.emit('error', err);\n  }\n}\n\n/**\n * Set a timer to destroy the underlying raw socket of a WebSocket.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @private\n */\nfunction setCloseTimer(websocket) {\n  websocket._closeTimer = setTimeout(\n    websocket._socket.destroy.bind(websocket._socket),\n    closeTimeout\n  );\n}\n\n/**\n * The listener of the socket `'close'` event.\n *\n * @private\n */\nfunction socketOnClose() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('data', socketOnData);\n  this.removeListener('end', socketOnEnd);\n\n  websocket._readyState = WebSocket.CLOSING;\n\n  let chunk;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written and `readable.read()`\n  // will return `null`. If instead, the socket is paused, any possible buffered\n  // data will be read as a single chunk.\n  //\n  if (\n    !this._readableState.endEmitted &&\n    !websocket._closeFrameReceived &&\n    !websocket._receiver._writableState.errorEmitted &&\n    (chunk = websocket._socket.read()) !== null\n  ) {\n    websocket._receiver.write(chunk);\n  }\n\n  websocket._receiver.end();\n\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the socket `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData(chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the socket `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd() {\n  const websocket = this[kWebSocket];\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the socket `'error'` event.\n *\n * @private\n */\nfunction socketOnError() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', NOOP);\n\n  if (websocket) {\n    websocket._readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n","import {\n    // Event,\n    EventTarget,\n    // Type,\n    defineEventAttribute,\n} from \"event-target-shim\"\n\n// Known Limitation\n//   Use `any` because the type of `AbortSignal` in `lib.dom.d.ts` is wrong and\n//   to make assignable our `AbortSignal` into that.\n//   https://github.com/Microsoft/TSJS-lib-generator/pull/623\ntype Events = {\n    abort: any // Event & Type<\"abort\">\n}\ntype EventAttributes = {\n    onabort: any // Event & Type<\"abort\">\n}\n\n/**\n * The signal class.\n * @see https://dom.spec.whatwg.org/#abortsignal\n */\nexport default class AbortSignal extends EventTarget<Events, EventAttributes> {\n    /**\n     * AbortSignal cannot be constructed directly.\n     */\n    public constructor() {\n        super()\n        throw new TypeError(\"AbortSignal cannot be constructed directly\")\n    }\n\n    /**\n     * Returns `true` if this `AbortSignal`'s `AbortController` has signaled to abort, and `false` otherwise.\n     */\n    public get aborted(): boolean {\n        const aborted = abortedFlags.get(this)\n        if (typeof aborted !== \"boolean\") {\n            throw new TypeError(\n                `Expected 'this' to be an 'AbortSignal' object, but got ${\n                    this === null ? \"null\" : typeof this\n                }`,\n            )\n        }\n        return aborted\n    }\n}\ndefineEventAttribute(AbortSignal.prototype, \"abort\")\n\n/**\n * Create an AbortSignal object.\n */\nexport function createAbortSignal(): AbortSignal {\n    const signal = Object.create(AbortSignal.prototype)\n    EventTarget.call(signal)\n    abortedFlags.set(signal, false)\n    return signal\n}\n\n/**\n * Abort a given signal.\n */\nexport function abortSignal(signal: AbortSignal): void {\n    if (abortedFlags.get(signal) !== false) {\n        return\n    }\n\n    abortedFlags.set(signal, true)\n    signal.dispatchEvent<\"abort\">({ type: \"abort\" })\n}\n\n/**\n * Aborted flag for each instances.\n */\nconst abortedFlags = new WeakMap<AbortSignal, boolean>()\n\n// Properties should be enumerable.\nObject.defineProperties(AbortSignal.prototype, {\n    aborted: { enumerable: true },\n})\n\n// `toString()` should return `\"[object AbortSignal]\"`\nif (typeof Symbol === \"function\" && typeof Symbol.toStringTag === \"symbol\") {\n    Object.defineProperty(AbortSignal.prototype, Symbol.toStringTag, {\n        configurable: true,\n        value: \"AbortSignal\",\n    })\n}\n","import AbortSignal, { abortSignal, createAbortSignal } from \"./abort-signal\"\n\n/**\n * The AbortController.\n * @see https://dom.spec.whatwg.org/#abortcontroller\n */\nexport default class AbortController {\n    /**\n     * Initialize this controller.\n     */\n    public constructor() {\n        signals.set(this, createAbortSignal())\n    }\n\n    /**\n     * Returns the `AbortSignal` object associated with this object.\n     */\n    public get signal(): AbortSignal {\n        return getSignal(this)\n    }\n\n    /**\n     * Abort and signal to any observers that the associated activity is to be aborted.\n     */\n    public abort(): void {\n        abortSignal(getSignal(this))\n    }\n}\n\n/**\n * Associated signals.\n */\nconst signals = new WeakMap<AbortController, AbortSignal>()\n\n/**\n * Get the associated signal of a given controller.\n */\nfunction getSignal(controller: AbortController): AbortSignal {\n    const signal = signals.get(controller)\n    if (signal == null) {\n        throw new TypeError(\n            `Expected 'this' to be an 'AbortController' object, but got ${\n                controller === null ? \"null\" : typeof controller\n            }`,\n        )\n    }\n    return signal\n}\n\n// Properties should be enumerable.\nObject.defineProperties(AbortController.prototype, {\n    signal: { enumerable: true },\n    abort: { enumerable: true },\n})\n\nif (typeof Symbol === \"function\" && typeof Symbol.toStringTag === \"symbol\") {\n    Object.defineProperty(AbortController.prototype, Symbol.toStringTag, {\n        configurable: true,\n        value: \"AbortController\",\n    })\n}\n\nexport { AbortController, AbortSignal }\n","/* MIT license */\nvar cssKeywords = require('color-name');\n\n// NOTE: conversions should only return primitive values (i.e. arrays, or\n//       values that give correct `typeof` results).\n//       do not use box values types (i.e. Number(), String(), etc.)\n\nvar reverseKeywords = {};\nfor (var key in cssKeywords) {\n\tif (cssKeywords.hasOwnProperty(key)) {\n\t\treverseKeywords[cssKeywords[key]] = key;\n\t}\n}\n\nvar convert = module.exports = {\n\trgb: {channels: 3, labels: 'rgb'},\n\thsl: {channels: 3, labels: 'hsl'},\n\thsv: {channels: 3, labels: 'hsv'},\n\thwb: {channels: 3, labels: 'hwb'},\n\tcmyk: {channels: 4, labels: 'cmyk'},\n\txyz: {channels: 3, labels: 'xyz'},\n\tlab: {channels: 3, labels: 'lab'},\n\tlch: {channels: 3, labels: 'lch'},\n\thex: {channels: 1, labels: ['hex']},\n\tkeyword: {channels: 1, labels: ['keyword']},\n\tansi16: {channels: 1, labels: ['ansi16']},\n\tansi256: {channels: 1, labels: ['ansi256']},\n\thcg: {channels: 3, labels: ['h', 'c', 'g']},\n\tapple: {channels: 3, labels: ['r16', 'g16', 'b16']},\n\tgray: {channels: 1, labels: ['gray']}\n};\n\n// hide .channels and .labels properties\nfor (var model in convert) {\n\tif (convert.hasOwnProperty(model)) {\n\t\tif (!('channels' in convert[model])) {\n\t\t\tthrow new Error('missing channels property: ' + model);\n\t\t}\n\n\t\tif (!('labels' in convert[model])) {\n\t\t\tthrow new Error('missing channel labels property: ' + model);\n\t\t}\n\n\t\tif (convert[model].labels.length !== convert[model].channels) {\n\t\t\tthrow new Error('channel and label counts mismatch: ' + model);\n\t\t}\n\n\t\tvar channels = convert[model].channels;\n\t\tvar labels = convert[model].labels;\n\t\tdelete convert[model].channels;\n\t\tdelete convert[model].labels;\n\t\tObject.defineProperty(convert[model], 'channels', {value: channels});\n\t\tObject.defineProperty(convert[model], 'labels', {value: labels});\n\t}\n}\n\nconvert.rgb.hsl = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar min = Math.min(r, g, b);\n\tvar max = Math.max(r, g, b);\n\tvar delta = max - min;\n\tvar h;\n\tvar s;\n\tvar l;\n\n\tif (max === min) {\n\t\th = 0;\n\t} else if (r === max) {\n\t\th = (g - b) / delta;\n\t} else if (g === max) {\n\t\th = 2 + (b - r) / delta;\n\t} else if (b === max) {\n\t\th = 4 + (r - g) / delta;\n\t}\n\n\th = Math.min(h * 60, 360);\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tl = (min + max) / 2;\n\n\tif (max === min) {\n\t\ts = 0;\n\t} else if (l <= 0.5) {\n\t\ts = delta / (max + min);\n\t} else {\n\t\ts = delta / (2 - max - min);\n\t}\n\n\treturn [h, s * 100, l * 100];\n};\n\nconvert.rgb.hsv = function (rgb) {\n\tvar rdif;\n\tvar gdif;\n\tvar bdif;\n\tvar h;\n\tvar s;\n\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar v = Math.max(r, g, b);\n\tvar diff = v - Math.min(r, g, b);\n\tvar diffc = function (c) {\n\t\treturn (v - c) / 6 / diff + 1 / 2;\n\t};\n\n\tif (diff === 0) {\n\t\th = s = 0;\n\t} else {\n\t\ts = diff / v;\n\t\trdif = diffc(r);\n\t\tgdif = diffc(g);\n\t\tbdif = diffc(b);\n\n\t\tif (r === v) {\n\t\t\th = bdif - gdif;\n\t\t} else if (g === v) {\n\t\t\th = (1 / 3) + rdif - bdif;\n\t\t} else if (b === v) {\n\t\t\th = (2 / 3) + gdif - rdif;\n\t\t}\n\t\tif (h < 0) {\n\t\t\th += 1;\n\t\t} else if (h > 1) {\n\t\t\th -= 1;\n\t\t}\n\t}\n\n\treturn [\n\t\th * 360,\n\t\ts * 100,\n\t\tv * 100\n\t];\n};\n\nconvert.rgb.hwb = function (rgb) {\n\tvar r = rgb[0];\n\tvar g = rgb[1];\n\tvar b = rgb[2];\n\tvar h = convert.rgb.hsl(rgb)[0];\n\tvar w = 1 / 255 * Math.min(r, Math.min(g, b));\n\n\tb = 1 - 1 / 255 * Math.max(r, Math.max(g, b));\n\n\treturn [h, w * 100, b * 100];\n};\n\nconvert.rgb.cmyk = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar c;\n\tvar m;\n\tvar y;\n\tvar k;\n\n\tk = Math.min(1 - r, 1 - g, 1 - b);\n\tc = (1 - r - k) / (1 - k) || 0;\n\tm = (1 - g - k) / (1 - k) || 0;\n\ty = (1 - b - k) / (1 - k) || 0;\n\n\treturn [c * 100, m * 100, y * 100, k * 100];\n};\n\n/**\n * See https://en.m.wikipedia.org/wiki/Euclidean_distance#Squared_Euclidean_distance\n * */\nfunction comparativeDistance(x, y) {\n\treturn (\n\t\tMath.pow(x[0] - y[0], 2) +\n\t\tMath.pow(x[1] - y[1], 2) +\n\t\tMath.pow(x[2] - y[2], 2)\n\t);\n}\n\nconvert.rgb.keyword = function (rgb) {\n\tvar reversed = reverseKeywords[rgb];\n\tif (reversed) {\n\t\treturn reversed;\n\t}\n\n\tvar currentClosestDistance = Infinity;\n\tvar currentClosestKeyword;\n\n\tfor (var keyword in cssKeywords) {\n\t\tif (cssKeywords.hasOwnProperty(keyword)) {\n\t\t\tvar value = cssKeywords[keyword];\n\n\t\t\t// Compute comparative distance\n\t\t\tvar distance = comparativeDistance(rgb, value);\n\n\t\t\t// Check if its less, if so set as closest\n\t\t\tif (distance < currentClosestDistance) {\n\t\t\t\tcurrentClosestDistance = distance;\n\t\t\t\tcurrentClosestKeyword = keyword;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn currentClosestKeyword;\n};\n\nconvert.keyword.rgb = function (keyword) {\n\treturn cssKeywords[keyword];\n};\n\nconvert.rgb.xyz = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\n\t// assume sRGB\n\tr = r > 0.04045 ? Math.pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);\n\tg = g > 0.04045 ? Math.pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);\n\tb = b > 0.04045 ? Math.pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);\n\n\tvar x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);\n\tvar y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);\n\tvar z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);\n\n\treturn [x * 100, y * 100, z * 100];\n};\n\nconvert.rgb.lab = function (rgb) {\n\tvar xyz = convert.rgb.xyz(rgb);\n\tvar x = xyz[0];\n\tvar y = xyz[1];\n\tvar z = xyz[2];\n\tvar l;\n\tvar a;\n\tvar b;\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? Math.pow(x, 1 / 3) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? Math.pow(y, 1 / 3) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? Math.pow(z, 1 / 3) : (7.787 * z) + (16 / 116);\n\n\tl = (116 * y) - 16;\n\ta = 500 * (x - y);\n\tb = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.hsl.rgb = function (hsl) {\n\tvar h = hsl[0] / 360;\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar t1;\n\tvar t2;\n\tvar t3;\n\tvar rgb;\n\tvar val;\n\n\tif (s === 0) {\n\t\tval = l * 255;\n\t\treturn [val, val, val];\n\t}\n\n\tif (l < 0.5) {\n\t\tt2 = l * (1 + s);\n\t} else {\n\t\tt2 = l + s - l * s;\n\t}\n\n\tt1 = 2 * l - t2;\n\n\trgb = [0, 0, 0];\n\tfor (var i = 0; i < 3; i++) {\n\t\tt3 = h + 1 / 3 * -(i - 1);\n\t\tif (t3 < 0) {\n\t\t\tt3++;\n\t\t}\n\t\tif (t3 > 1) {\n\t\t\tt3--;\n\t\t}\n\n\t\tif (6 * t3 < 1) {\n\t\t\tval = t1 + (t2 - t1) * 6 * t3;\n\t\t} else if (2 * t3 < 1) {\n\t\t\tval = t2;\n\t\t} else if (3 * t3 < 2) {\n\t\t\tval = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n\t\t} else {\n\t\t\tval = t1;\n\t\t}\n\n\t\trgb[i] = val * 255;\n\t}\n\n\treturn rgb;\n};\n\nconvert.hsl.hsv = function (hsl) {\n\tvar h = hsl[0];\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar smin = s;\n\tvar lmin = Math.max(l, 0.01);\n\tvar sv;\n\tvar v;\n\n\tl *= 2;\n\ts *= (l <= 1) ? l : 2 - l;\n\tsmin *= lmin <= 1 ? lmin : 2 - lmin;\n\tv = (l + s) / 2;\n\tsv = l === 0 ? (2 * smin) / (lmin + smin) : (2 * s) / (l + s);\n\n\treturn [h, sv * 100, v * 100];\n};\n\nconvert.hsv.rgb = function (hsv) {\n\tvar h = hsv[0] / 60;\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\tvar hi = Math.floor(h) % 6;\n\n\tvar f = h - Math.floor(h);\n\tvar p = 255 * v * (1 - s);\n\tvar q = 255 * v * (1 - (s * f));\n\tvar t = 255 * v * (1 - (s * (1 - f)));\n\tv *= 255;\n\n\tswitch (hi) {\n\t\tcase 0:\n\t\t\treturn [v, t, p];\n\t\tcase 1:\n\t\t\treturn [q, v, p];\n\t\tcase 2:\n\t\t\treturn [p, v, t];\n\t\tcase 3:\n\t\t\treturn [p, q, v];\n\t\tcase 4:\n\t\t\treturn [t, p, v];\n\t\tcase 5:\n\t\t\treturn [v, p, q];\n\t}\n};\n\nconvert.hsv.hsl = function (hsv) {\n\tvar h = hsv[0];\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\tvar vmin = Math.max(v, 0.01);\n\tvar lmin;\n\tvar sl;\n\tvar l;\n\n\tl = (2 - s) * v;\n\tlmin = (2 - s) * vmin;\n\tsl = s * vmin;\n\tsl /= (lmin <= 1) ? lmin : 2 - lmin;\n\tsl = sl || 0;\n\tl /= 2;\n\n\treturn [h, sl * 100, l * 100];\n};\n\n// http://dev.w3.org/csswg/css-color/#hwb-to-rgb\nconvert.hwb.rgb = function (hwb) {\n\tvar h = hwb[0] / 360;\n\tvar wh = hwb[1] / 100;\n\tvar bl = hwb[2] / 100;\n\tvar ratio = wh + bl;\n\tvar i;\n\tvar v;\n\tvar f;\n\tvar n;\n\n\t// wh + bl cant be > 1\n\tif (ratio > 1) {\n\t\twh /= ratio;\n\t\tbl /= ratio;\n\t}\n\n\ti = Math.floor(6 * h);\n\tv = 1 - bl;\n\tf = 6 * h - i;\n\n\tif ((i & 0x01) !== 0) {\n\t\tf = 1 - f;\n\t}\n\n\tn = wh + f * (v - wh); // linear interpolation\n\n\tvar r;\n\tvar g;\n\tvar b;\n\tswitch (i) {\n\t\tdefault:\n\t\tcase 6:\n\t\tcase 0: r = v; g = n; b = wh; break;\n\t\tcase 1: r = n; g = v; b = wh; break;\n\t\tcase 2: r = wh; g = v; b = n; break;\n\t\tcase 3: r = wh; g = n; b = v; break;\n\t\tcase 4: r = n; g = wh; b = v; break;\n\t\tcase 5: r = v; g = wh; b = n; break;\n\t}\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.cmyk.rgb = function (cmyk) {\n\tvar c = cmyk[0] / 100;\n\tvar m = cmyk[1] / 100;\n\tvar y = cmyk[2] / 100;\n\tvar k = cmyk[3] / 100;\n\tvar r;\n\tvar g;\n\tvar b;\n\n\tr = 1 - Math.min(1, c * (1 - k) + k);\n\tg = 1 - Math.min(1, m * (1 - k) + k);\n\tb = 1 - Math.min(1, y * (1 - k) + k);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.rgb = function (xyz) {\n\tvar x = xyz[0] / 100;\n\tvar y = xyz[1] / 100;\n\tvar z = xyz[2] / 100;\n\tvar r;\n\tvar g;\n\tvar b;\n\n\tr = (x * 3.2406) + (y * -1.5372) + (z * -0.4986);\n\tg = (x * -0.9689) + (y * 1.8758) + (z * 0.0415);\n\tb = (x * 0.0557) + (y * -0.2040) + (z * 1.0570);\n\n\t// assume sRGB\n\tr = r > 0.0031308\n\t\t? ((1.055 * Math.pow(r, 1.0 / 2.4)) - 0.055)\n\t\t: r * 12.92;\n\n\tg = g > 0.0031308\n\t\t? ((1.055 * Math.pow(g, 1.0 / 2.4)) - 0.055)\n\t\t: g * 12.92;\n\n\tb = b > 0.0031308\n\t\t? ((1.055 * Math.pow(b, 1.0 / 2.4)) - 0.055)\n\t\t: b * 12.92;\n\n\tr = Math.min(Math.max(0, r), 1);\n\tg = Math.min(Math.max(0, g), 1);\n\tb = Math.min(Math.max(0, b), 1);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.lab = function (xyz) {\n\tvar x = xyz[0];\n\tvar y = xyz[1];\n\tvar z = xyz[2];\n\tvar l;\n\tvar a;\n\tvar b;\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? Math.pow(x, 1 / 3) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? Math.pow(y, 1 / 3) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? Math.pow(z, 1 / 3) : (7.787 * z) + (16 / 116);\n\n\tl = (116 * y) - 16;\n\ta = 500 * (x - y);\n\tb = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.lab.xyz = function (lab) {\n\tvar l = lab[0];\n\tvar a = lab[1];\n\tvar b = lab[2];\n\tvar x;\n\tvar y;\n\tvar z;\n\n\ty = (l + 16) / 116;\n\tx = a / 500 + y;\n\tz = y - b / 200;\n\n\tvar y2 = Math.pow(y, 3);\n\tvar x2 = Math.pow(x, 3);\n\tvar z2 = Math.pow(z, 3);\n\ty = y2 > 0.008856 ? y2 : (y - 16 / 116) / 7.787;\n\tx = x2 > 0.008856 ? x2 : (x - 16 / 116) / 7.787;\n\tz = z2 > 0.008856 ? z2 : (z - 16 / 116) / 7.787;\n\n\tx *= 95.047;\n\ty *= 100;\n\tz *= 108.883;\n\n\treturn [x, y, z];\n};\n\nconvert.lab.lch = function (lab) {\n\tvar l = lab[0];\n\tvar a = lab[1];\n\tvar b = lab[2];\n\tvar hr;\n\tvar h;\n\tvar c;\n\n\thr = Math.atan2(b, a);\n\th = hr * 360 / 2 / Math.PI;\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tc = Math.sqrt(a * a + b * b);\n\n\treturn [l, c, h];\n};\n\nconvert.lch.lab = function (lch) {\n\tvar l = lch[0];\n\tvar c = lch[1];\n\tvar h = lch[2];\n\tvar a;\n\tvar b;\n\tvar hr;\n\n\thr = h / 360 * 2 * Math.PI;\n\ta = c * Math.cos(hr);\n\tb = c * Math.sin(hr);\n\n\treturn [l, a, b];\n};\n\nconvert.rgb.ansi16 = function (args) {\n\tvar r = args[0];\n\tvar g = args[1];\n\tvar b = args[2];\n\tvar value = 1 in arguments ? arguments[1] : convert.rgb.hsv(args)[2]; // hsv -> ansi16 optimization\n\n\tvalue = Math.round(value / 50);\n\n\tif (value === 0) {\n\t\treturn 30;\n\t}\n\n\tvar ansi = 30\n\t\t+ ((Math.round(b / 255) << 2)\n\t\t| (Math.round(g / 255) << 1)\n\t\t| Math.round(r / 255));\n\n\tif (value === 2) {\n\t\tansi += 60;\n\t}\n\n\treturn ansi;\n};\n\nconvert.hsv.ansi16 = function (args) {\n\t// optimization here; we already know the value and don't need to get\n\t// it converted for us.\n\treturn convert.rgb.ansi16(convert.hsv.rgb(args), args[2]);\n};\n\nconvert.rgb.ansi256 = function (args) {\n\tvar r = args[0];\n\tvar g = args[1];\n\tvar b = args[2];\n\n\t// we use the extended greyscale palette here, with the exception of\n\t// black and white. normal palette only has 4 greyscale shades.\n\tif (r === g && g === b) {\n\t\tif (r < 8) {\n\t\t\treturn 16;\n\t\t}\n\n\t\tif (r > 248) {\n\t\t\treturn 231;\n\t\t}\n\n\t\treturn Math.round(((r - 8) / 247) * 24) + 232;\n\t}\n\n\tvar ansi = 16\n\t\t+ (36 * Math.round(r / 255 * 5))\n\t\t+ (6 * Math.round(g / 255 * 5))\n\t\t+ Math.round(b / 255 * 5);\n\n\treturn ansi;\n};\n\nconvert.ansi16.rgb = function (args) {\n\tvar color = args % 10;\n\n\t// handle greyscale\n\tif (color === 0 || color === 7) {\n\t\tif (args > 50) {\n\t\t\tcolor += 3.5;\n\t\t}\n\n\t\tcolor = color / 10.5 * 255;\n\n\t\treturn [color, color, color];\n\t}\n\n\tvar mult = (~~(args > 50) + 1) * 0.5;\n\tvar r = ((color & 1) * mult) * 255;\n\tvar g = (((color >> 1) & 1) * mult) * 255;\n\tvar b = (((color >> 2) & 1) * mult) * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.ansi256.rgb = function (args) {\n\t// handle greyscale\n\tif (args >= 232) {\n\t\tvar c = (args - 232) * 10 + 8;\n\t\treturn [c, c, c];\n\t}\n\n\targs -= 16;\n\n\tvar rem;\n\tvar r = Math.floor(args / 36) / 5 * 255;\n\tvar g = Math.floor((rem = args % 36) / 6) / 5 * 255;\n\tvar b = (rem % 6) / 5 * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hex = function (args) {\n\tvar integer = ((Math.round(args[0]) & 0xFF) << 16)\n\t\t+ ((Math.round(args[1]) & 0xFF) << 8)\n\t\t+ (Math.round(args[2]) & 0xFF);\n\n\tvar string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.hex.rgb = function (args) {\n\tvar match = args.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);\n\tif (!match) {\n\t\treturn [0, 0, 0];\n\t}\n\n\tvar colorString = match[0];\n\n\tif (match[0].length === 3) {\n\t\tcolorString = colorString.split('').map(function (char) {\n\t\t\treturn char + char;\n\t\t}).join('');\n\t}\n\n\tvar integer = parseInt(colorString, 16);\n\tvar r = (integer >> 16) & 0xFF;\n\tvar g = (integer >> 8) & 0xFF;\n\tvar b = integer & 0xFF;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hcg = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar max = Math.max(Math.max(r, g), b);\n\tvar min = Math.min(Math.min(r, g), b);\n\tvar chroma = (max - min);\n\tvar grayscale;\n\tvar hue;\n\n\tif (chroma < 1) {\n\t\tgrayscale = min / (1 - chroma);\n\t} else {\n\t\tgrayscale = 0;\n\t}\n\n\tif (chroma <= 0) {\n\t\thue = 0;\n\t} else\n\tif (max === r) {\n\t\thue = ((g - b) / chroma) % 6;\n\t} else\n\tif (max === g) {\n\t\thue = 2 + (b - r) / chroma;\n\t} else {\n\t\thue = 4 + (r - g) / chroma + 4;\n\t}\n\n\thue /= 6;\n\thue %= 1;\n\n\treturn [hue * 360, chroma * 100, grayscale * 100];\n};\n\nconvert.hsl.hcg = function (hsl) {\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar c = 1;\n\tvar f = 0;\n\n\tif (l < 0.5) {\n\t\tc = 2.0 * s * l;\n\t} else {\n\t\tc = 2.0 * s * (1.0 - l);\n\t}\n\n\tif (c < 1.0) {\n\t\tf = (l - 0.5 * c) / (1.0 - c);\n\t}\n\n\treturn [hsl[0], c * 100, f * 100];\n};\n\nconvert.hsv.hcg = function (hsv) {\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\n\tvar c = s * v;\n\tvar f = 0;\n\n\tif (c < 1.0) {\n\t\tf = (v - c) / (1 - c);\n\t}\n\n\treturn [hsv[0], c * 100, f * 100];\n};\n\nconvert.hcg.rgb = function (hcg) {\n\tvar h = hcg[0] / 360;\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tif (c === 0.0) {\n\t\treturn [g * 255, g * 255, g * 255];\n\t}\n\n\tvar pure = [0, 0, 0];\n\tvar hi = (h % 1) * 6;\n\tvar v = hi % 1;\n\tvar w = 1 - v;\n\tvar mg = 0;\n\n\tswitch (Math.floor(hi)) {\n\t\tcase 0:\n\t\t\tpure[0] = 1; pure[1] = v; pure[2] = 0; break;\n\t\tcase 1:\n\t\t\tpure[0] = w; pure[1] = 1; pure[2] = 0; break;\n\t\tcase 2:\n\t\t\tpure[0] = 0; pure[1] = 1; pure[2] = v; break;\n\t\tcase 3:\n\t\t\tpure[0] = 0; pure[1] = w; pure[2] = 1; break;\n\t\tcase 4:\n\t\t\tpure[0] = v; pure[1] = 0; pure[2] = 1; break;\n\t\tdefault:\n\t\t\tpure[0] = 1; pure[1] = 0; pure[2] = w;\n\t}\n\n\tmg = (1.0 - c) * g;\n\n\treturn [\n\t\t(c * pure[0] + mg) * 255,\n\t\t(c * pure[1] + mg) * 255,\n\t\t(c * pure[2] + mg) * 255\n\t];\n};\n\nconvert.hcg.hsv = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tvar v = c + g * (1.0 - c);\n\tvar f = 0;\n\n\tif (v > 0.0) {\n\t\tf = c / v;\n\t}\n\n\treturn [hcg[0], f * 100, v * 100];\n};\n\nconvert.hcg.hsl = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tvar l = g * (1.0 - c) + 0.5 * c;\n\tvar s = 0;\n\n\tif (l > 0.0 && l < 0.5) {\n\t\ts = c / (2 * l);\n\t} else\n\tif (l >= 0.5 && l < 1.0) {\n\t\ts = c / (2 * (1 - l));\n\t}\n\n\treturn [hcg[0], s * 100, l * 100];\n};\n\nconvert.hcg.hwb = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\tvar v = c + g * (1.0 - c);\n\treturn [hcg[0], (v - c) * 100, (1 - v) * 100];\n};\n\nconvert.hwb.hcg = function (hwb) {\n\tvar w = hwb[1] / 100;\n\tvar b = hwb[2] / 100;\n\tvar v = 1 - b;\n\tvar c = v - w;\n\tvar g = 0;\n\n\tif (c < 1) {\n\t\tg = (v - c) / (1 - c);\n\t}\n\n\treturn [hwb[0], c * 100, g * 100];\n};\n\nconvert.apple.rgb = function (apple) {\n\treturn [(apple[0] / 65535) * 255, (apple[1] / 65535) * 255, (apple[2] / 65535) * 255];\n};\n\nconvert.rgb.apple = function (rgb) {\n\treturn [(rgb[0] / 255) * 65535, (rgb[1] / 255) * 65535, (rgb[2] / 255) * 65535];\n};\n\nconvert.gray.rgb = function (args) {\n\treturn [args[0] / 100 * 255, args[0] / 100 * 255, args[0] / 100 * 255];\n};\n\nconvert.gray.hsl = convert.gray.hsv = function (args) {\n\treturn [0, 0, args[0]];\n};\n\nconvert.gray.hwb = function (gray) {\n\treturn [0, 100, gray[0]];\n};\n\nconvert.gray.cmyk = function (gray) {\n\treturn [0, 0, 0, gray[0]];\n};\n\nconvert.gray.lab = function (gray) {\n\treturn [gray[0], 0, 0];\n};\n\nconvert.gray.hex = function (gray) {\n\tvar val = Math.round(gray[0] / 100 * 255) & 0xFF;\n\tvar integer = (val << 16) + (val << 8) + val;\n\n\tvar string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.rgb.gray = function (rgb) {\n\tvar val = (rgb[0] + rgb[1] + rgb[2]) / 3;\n\treturn [val / 255 * 100];\n};\n","var conversions = require('./conversions');\nvar route = require('./route');\n\nvar convert = {};\n\nvar models = Object.keys(conversions);\n\nfunction wrapRaw(fn) {\n\tvar wrappedFn = function (args) {\n\t\tif (args === undefined || args === null) {\n\t\t\treturn args;\n\t\t}\n\n\t\tif (arguments.length > 1) {\n\t\t\targs = Array.prototype.slice.call(arguments);\n\t\t}\n\n\t\treturn fn(args);\n\t};\n\n\t// preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nfunction wrapRounded(fn) {\n\tvar wrappedFn = function (args) {\n\t\tif (args === undefined || args === null) {\n\t\t\treturn args;\n\t\t}\n\n\t\tif (arguments.length > 1) {\n\t\t\targs = Array.prototype.slice.call(arguments);\n\t\t}\n\n\t\tvar result = fn(args);\n\n\t\t// we're assuming the result is an array here.\n\t\t// see notice in conversions.js; don't use box types\n\t\t// in conversion functions.\n\t\tif (typeof result === 'object') {\n\t\t\tfor (var len = result.length, i = 0; i < len; i++) {\n\t\t\t\tresult[i] = Math.round(result[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\n\t// preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nmodels.forEach(function (fromModel) {\n\tconvert[fromModel] = {};\n\n\tObject.defineProperty(convert[fromModel], 'channels', {value: conversions[fromModel].channels});\n\tObject.defineProperty(convert[fromModel], 'labels', {value: conversions[fromModel].labels});\n\n\tvar routes = route(fromModel);\n\tvar routeModels = Object.keys(routes);\n\n\trouteModels.forEach(function (toModel) {\n\t\tvar fn = routes[toModel];\n\n\t\tconvert[fromModel][toModel] = wrapRounded(fn);\n\t\tconvert[fromModel][toModel].raw = wrapRaw(fn);\n\t});\n});\n\nmodule.exports = convert;\n","'use strict'\r\n\r\nmodule.exports = {\r\n\t\"aliceblue\": [240, 248, 255],\r\n\t\"antiquewhite\": [250, 235, 215],\r\n\t\"aqua\": [0, 255, 255],\r\n\t\"aquamarine\": [127, 255, 212],\r\n\t\"azure\": [240, 255, 255],\r\n\t\"beige\": [245, 245, 220],\r\n\t\"bisque\": [255, 228, 196],\r\n\t\"black\": [0, 0, 0],\r\n\t\"blanchedalmond\": [255, 235, 205],\r\n\t\"blue\": [0, 0, 255],\r\n\t\"blueviolet\": [138, 43, 226],\r\n\t\"brown\": [165, 42, 42],\r\n\t\"burlywood\": [222, 184, 135],\r\n\t\"cadetblue\": [95, 158, 160],\r\n\t\"chartreuse\": [127, 255, 0],\r\n\t\"chocolate\": [210, 105, 30],\r\n\t\"coral\": [255, 127, 80],\r\n\t\"cornflowerblue\": [100, 149, 237],\r\n\t\"cornsilk\": [255, 248, 220],\r\n\t\"crimson\": [220, 20, 60],\r\n\t\"cyan\": [0, 255, 255],\r\n\t\"darkblue\": [0, 0, 139],\r\n\t\"darkcyan\": [0, 139, 139],\r\n\t\"darkgoldenrod\": [184, 134, 11],\r\n\t\"darkgray\": [169, 169, 169],\r\n\t\"darkgreen\": [0, 100, 0],\r\n\t\"darkgrey\": [169, 169, 169],\r\n\t\"darkkhaki\": [189, 183, 107],\r\n\t\"darkmagenta\": [139, 0, 139],\r\n\t\"darkolivegreen\": [85, 107, 47],\r\n\t\"darkorange\": [255, 140, 0],\r\n\t\"darkorchid\": [153, 50, 204],\r\n\t\"darkred\": [139, 0, 0],\r\n\t\"darksalmon\": [233, 150, 122],\r\n\t\"darkseagreen\": [143, 188, 143],\r\n\t\"darkslateblue\": [72, 61, 139],\r\n\t\"darkslategray\": [47, 79, 79],\r\n\t\"darkslategrey\": [47, 79, 79],\r\n\t\"darkturquoise\": [0, 206, 209],\r\n\t\"darkviolet\": [148, 0, 211],\r\n\t\"deeppink\": [255, 20, 147],\r\n\t\"deepskyblue\": [0, 191, 255],\r\n\t\"dimgray\": [105, 105, 105],\r\n\t\"dimgrey\": [105, 105, 105],\r\n\t\"dodgerblue\": [30, 144, 255],\r\n\t\"firebrick\": [178, 34, 34],\r\n\t\"floralwhite\": [255, 250, 240],\r\n\t\"forestgreen\": [34, 139, 34],\r\n\t\"fuchsia\": [255, 0, 255],\r\n\t\"gainsboro\": [220, 220, 220],\r\n\t\"ghostwhite\": [248, 248, 255],\r\n\t\"gold\": [255, 215, 0],\r\n\t\"goldenrod\": [218, 165, 32],\r\n\t\"gray\": [128, 128, 128],\r\n\t\"green\": [0, 128, 0],\r\n\t\"greenyellow\": [173, 255, 47],\r\n\t\"grey\": [128, 128, 128],\r\n\t\"honeydew\": [240, 255, 240],\r\n\t\"hotpink\": [255, 105, 180],\r\n\t\"indianred\": [205, 92, 92],\r\n\t\"indigo\": [75, 0, 130],\r\n\t\"ivory\": [255, 255, 240],\r\n\t\"khaki\": [240, 230, 140],\r\n\t\"lavender\": [230, 230, 250],\r\n\t\"lavenderblush\": [255, 240, 245],\r\n\t\"lawngreen\": [124, 252, 0],\r\n\t\"lemonchiffon\": [255, 250, 205],\r\n\t\"lightblue\": [173, 216, 230],\r\n\t\"lightcoral\": [240, 128, 128],\r\n\t\"lightcyan\": [224, 255, 255],\r\n\t\"lightgoldenrodyellow\": [250, 250, 210],\r\n\t\"lightgray\": [211, 211, 211],\r\n\t\"lightgreen\": [144, 238, 144],\r\n\t\"lightgrey\": [211, 211, 211],\r\n\t\"lightpink\": [255, 182, 193],\r\n\t\"lightsalmon\": [255, 160, 122],\r\n\t\"lightseagreen\": [32, 178, 170],\r\n\t\"lightskyblue\": [135, 206, 250],\r\n\t\"lightslategray\": [119, 136, 153],\r\n\t\"lightslategrey\": [119, 136, 153],\r\n\t\"lightsteelblue\": [176, 196, 222],\r\n\t\"lightyellow\": [255, 255, 224],\r\n\t\"lime\": [0, 255, 0],\r\n\t\"limegreen\": [50, 205, 50],\r\n\t\"linen\": [250, 240, 230],\r\n\t\"magenta\": [255, 0, 255],\r\n\t\"maroon\": [128, 0, 0],\r\n\t\"mediumaquamarine\": [102, 205, 170],\r\n\t\"mediumblue\": [0, 0, 205],\r\n\t\"mediumorchid\": [186, 85, 211],\r\n\t\"mediumpurple\": [147, 112, 219],\r\n\t\"mediumseagreen\": [60, 179, 113],\r\n\t\"mediumslateblue\": [123, 104, 238],\r\n\t\"mediumspringgreen\": [0, 250, 154],\r\n\t\"mediumturquoise\": [72, 209, 204],\r\n\t\"mediumvioletred\": [199, 21, 133],\r\n\t\"midnightblue\": [25, 25, 112],\r\n\t\"mintcream\": [245, 255, 250],\r\n\t\"mistyrose\": [255, 228, 225],\r\n\t\"moccasin\": [255, 228, 181],\r\n\t\"navajowhite\": [255, 222, 173],\r\n\t\"navy\": [0, 0, 128],\r\n\t\"oldlace\": [253, 245, 230],\r\n\t\"olive\": [128, 128, 0],\r\n\t\"olivedrab\": [107, 142, 35],\r\n\t\"orange\": [255, 165, 0],\r\n\t\"orangered\": [255, 69, 0],\r\n\t\"orchid\": [218, 112, 214],\r\n\t\"palegoldenrod\": [238, 232, 170],\r\n\t\"palegreen\": [152, 251, 152],\r\n\t\"paleturquoise\": [175, 238, 238],\r\n\t\"palevioletred\": [219, 112, 147],\r\n\t\"papayawhip\": [255, 239, 213],\r\n\t\"peachpuff\": [255, 218, 185],\r\n\t\"peru\": [205, 133, 63],\r\n\t\"pink\": [255, 192, 203],\r\n\t\"plum\": [221, 160, 221],\r\n\t\"powderblue\": [176, 224, 230],\r\n\t\"purple\": [128, 0, 128],\r\n\t\"rebeccapurple\": [102, 51, 153],\r\n\t\"red\": [255, 0, 0],\r\n\t\"rosybrown\": [188, 143, 143],\r\n\t\"royalblue\": [65, 105, 225],\r\n\t\"saddlebrown\": [139, 69, 19],\r\n\t\"salmon\": [250, 128, 114],\r\n\t\"sandybrown\": [244, 164, 96],\r\n\t\"seagreen\": [46, 139, 87],\r\n\t\"seashell\": [255, 245, 238],\r\n\t\"sienna\": [160, 82, 45],\r\n\t\"silver\": [192, 192, 192],\r\n\t\"skyblue\": [135, 206, 235],\r\n\t\"slateblue\": [106, 90, 205],\r\n\t\"slategray\": [112, 128, 144],\r\n\t\"slategrey\": [112, 128, 144],\r\n\t\"snow\": [255, 250, 250],\r\n\t\"springgreen\": [0, 255, 127],\r\n\t\"steelblue\": [70, 130, 180],\r\n\t\"tan\": [210, 180, 140],\r\n\t\"teal\": [0, 128, 128],\r\n\t\"thistle\": [216, 191, 216],\r\n\t\"tomato\": [255, 99, 71],\r\n\t\"turquoise\": [64, 224, 208],\r\n\t\"violet\": [238, 130, 238],\r\n\t\"wheat\": [245, 222, 179],\r\n\t\"white\": [255, 255, 255],\r\n\t\"whitesmoke\": [245, 245, 245],\r\n\t\"yellow\": [255, 255, 0],\r\n\t\"yellowgreen\": [154, 205, 50]\r\n};\r\n","var conversions = require('./conversions');\n\n/*\n\tthis function routes a model to all other models.\n\n\tall functions that are routed have a property `.conversion` attached\n\tto the returned synthetic function. This property is an array\n\tof strings, each with the steps in between the 'from' and 'to'\n\tcolor models (inclusive).\n\n\tconversions that are not possible simply are not included.\n*/\n\nfunction buildGraph() {\n\tvar graph = {};\n\t// https://jsperf.com/object-keys-vs-for-in-with-closure/3\n\tvar models = Object.keys(conversions);\n\n\tfor (var len = models.length, i = 0; i < len; i++) {\n\t\tgraph[models[i]] = {\n\t\t\t// http://jsperf.com/1-vs-infinity\n\t\t\t// micro-opt, but this is simple.\n\t\t\tdistance: -1,\n\t\t\tparent: null\n\t\t};\n\t}\n\n\treturn graph;\n}\n\n// https://en.wikipedia.org/wiki/Breadth-first_search\nfunction deriveBFS(fromModel) {\n\tvar graph = buildGraph();\n\tvar queue = [fromModel]; // unshift -> queue -> pop\n\n\tgraph[fromModel].distance = 0;\n\n\twhile (queue.length) {\n\t\tvar current = queue.pop();\n\t\tvar adjacents = Object.keys(conversions[current]);\n\n\t\tfor (var len = adjacents.length, i = 0; i < len; i++) {\n\t\t\tvar adjacent = adjacents[i];\n\t\t\tvar node = graph[adjacent];\n\n\t\t\tif (node.distance === -1) {\n\t\t\t\tnode.distance = graph[current].distance + 1;\n\t\t\t\tnode.parent = current;\n\t\t\t\tqueue.unshift(adjacent);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn graph;\n}\n\nfunction link(from, to) {\n\treturn function (args) {\n\t\treturn to(from(args));\n\t};\n}\n\nfunction wrapConversion(toModel, graph) {\n\tvar path = [graph[toModel].parent, toModel];\n\tvar fn = conversions[graph[toModel].parent][toModel];\n\n\tvar cur = graph[toModel].parent;\n\twhile (graph[cur].parent) {\n\t\tpath.unshift(graph[cur].parent);\n\t\tfn = link(conversions[graph[cur].parent][cur], fn);\n\t\tcur = graph[cur].parent;\n\t}\n\n\tfn.conversion = path;\n\treturn fn;\n}\n\nmodule.exports = function (fromModel) {\n\tvar graph = deriveBFS(fromModel);\n\tvar conversion = {};\n\n\tvar models = Object.keys(graph);\n\tfor (var len = models.length, i = 0; i < len; i++) {\n\t\tvar toModel = models[i];\n\t\tvar node = graph[toModel];\n\n\t\tif (node.parent === null) {\n\t\t\t// no possible conversion, or this node is the source model.\n\t\t\tcontinue;\n\t\t}\n\n\t\tconversion[toModel] = wrapConversion(toModel, graph);\n\t}\n\n\treturn conversion;\n};\n\n","'use strict'\r\n\r\nmodule.exports = {\r\n\t\"aliceblue\": [240, 248, 255],\r\n\t\"antiquewhite\": [250, 235, 215],\r\n\t\"aqua\": [0, 255, 255],\r\n\t\"aquamarine\": [127, 255, 212],\r\n\t\"azure\": [240, 255, 255],\r\n\t\"beige\": [245, 245, 220],\r\n\t\"bisque\": [255, 228, 196],\r\n\t\"black\": [0, 0, 0],\r\n\t\"blanchedalmond\": [255, 235, 205],\r\n\t\"blue\": [0, 0, 255],\r\n\t\"blueviolet\": [138, 43, 226],\r\n\t\"brown\": [165, 42, 42],\r\n\t\"burlywood\": [222, 184, 135],\r\n\t\"cadetblue\": [95, 158, 160],\r\n\t\"chartreuse\": [127, 255, 0],\r\n\t\"chocolate\": [210, 105, 30],\r\n\t\"coral\": [255, 127, 80],\r\n\t\"cornflowerblue\": [100, 149, 237],\r\n\t\"cornsilk\": [255, 248, 220],\r\n\t\"crimson\": [220, 20, 60],\r\n\t\"cyan\": [0, 255, 255],\r\n\t\"darkblue\": [0, 0, 139],\r\n\t\"darkcyan\": [0, 139, 139],\r\n\t\"darkgoldenrod\": [184, 134, 11],\r\n\t\"darkgray\": [169, 169, 169],\r\n\t\"darkgreen\": [0, 100, 0],\r\n\t\"darkgrey\": [169, 169, 169],\r\n\t\"darkkhaki\": [189, 183, 107],\r\n\t\"darkmagenta\": [139, 0, 139],\r\n\t\"darkolivegreen\": [85, 107, 47],\r\n\t\"darkorange\": [255, 140, 0],\r\n\t\"darkorchid\": [153, 50, 204],\r\n\t\"darkred\": [139, 0, 0],\r\n\t\"darksalmon\": [233, 150, 122],\r\n\t\"darkseagreen\": [143, 188, 143],\r\n\t\"darkslateblue\": [72, 61, 139],\r\n\t\"darkslategray\": [47, 79, 79],\r\n\t\"darkslategrey\": [47, 79, 79],\r\n\t\"darkturquoise\": [0, 206, 209],\r\n\t\"darkviolet\": [148, 0, 211],\r\n\t\"deeppink\": [255, 20, 147],\r\n\t\"deepskyblue\": [0, 191, 255],\r\n\t\"dimgray\": [105, 105, 105],\r\n\t\"dimgrey\": [105, 105, 105],\r\n\t\"dodgerblue\": [30, 144, 255],\r\n\t\"firebrick\": [178, 34, 34],\r\n\t\"floralwhite\": [255, 250, 240],\r\n\t\"forestgreen\": [34, 139, 34],\r\n\t\"fuchsia\": [255, 0, 255],\r\n\t\"gainsboro\": [220, 220, 220],\r\n\t\"ghostwhite\": [248, 248, 255],\r\n\t\"gold\": [255, 215, 0],\r\n\t\"goldenrod\": [218, 165, 32],\r\n\t\"gray\": [128, 128, 128],\r\n\t\"green\": [0, 128, 0],\r\n\t\"greenyellow\": [173, 255, 47],\r\n\t\"grey\": [128, 128, 128],\r\n\t\"honeydew\": [240, 255, 240],\r\n\t\"hotpink\": [255, 105, 180],\r\n\t\"indianred\": [205, 92, 92],\r\n\t\"indigo\": [75, 0, 130],\r\n\t\"ivory\": [255, 255, 240],\r\n\t\"khaki\": [240, 230, 140],\r\n\t\"lavender\": [230, 230, 250],\r\n\t\"lavenderblush\": [255, 240, 245],\r\n\t\"lawngreen\": [124, 252, 0],\r\n\t\"lemonchiffon\": [255, 250, 205],\r\n\t\"lightblue\": [173, 216, 230],\r\n\t\"lightcoral\": [240, 128, 128],\r\n\t\"lightcyan\": [224, 255, 255],\r\n\t\"lightgoldenrodyellow\": [250, 250, 210],\r\n\t\"lightgray\": [211, 211, 211],\r\n\t\"lightgreen\": [144, 238, 144],\r\n\t\"lightgrey\": [211, 211, 211],\r\n\t\"lightpink\": [255, 182, 193],\r\n\t\"lightsalmon\": [255, 160, 122],\r\n\t\"lightseagreen\": [32, 178, 170],\r\n\t\"lightskyblue\": [135, 206, 250],\r\n\t\"lightslategray\": [119, 136, 153],\r\n\t\"lightslategrey\": [119, 136, 153],\r\n\t\"lightsteelblue\": [176, 196, 222],\r\n\t\"lightyellow\": [255, 255, 224],\r\n\t\"lime\": [0, 255, 0],\r\n\t\"limegreen\": [50, 205, 50],\r\n\t\"linen\": [250, 240, 230],\r\n\t\"magenta\": [255, 0, 255],\r\n\t\"maroon\": [128, 0, 0],\r\n\t\"mediumaquamarine\": [102, 205, 170],\r\n\t\"mediumblue\": [0, 0, 205],\r\n\t\"mediumorchid\": [186, 85, 211],\r\n\t\"mediumpurple\": [147, 112, 219],\r\n\t\"mediumseagreen\": [60, 179, 113],\r\n\t\"mediumslateblue\": [123, 104, 238],\r\n\t\"mediumspringgreen\": [0, 250, 154],\r\n\t\"mediumturquoise\": [72, 209, 204],\r\n\t\"mediumvioletred\": [199, 21, 133],\r\n\t\"midnightblue\": [25, 25, 112],\r\n\t\"mintcream\": [245, 255, 250],\r\n\t\"mistyrose\": [255, 228, 225],\r\n\t\"moccasin\": [255, 228, 181],\r\n\t\"navajowhite\": [255, 222, 173],\r\n\t\"navy\": [0, 0, 128],\r\n\t\"oldlace\": [253, 245, 230],\r\n\t\"olive\": [128, 128, 0],\r\n\t\"olivedrab\": [107, 142, 35],\r\n\t\"orange\": [255, 165, 0],\r\n\t\"orangered\": [255, 69, 0],\r\n\t\"orchid\": [218, 112, 214],\r\n\t\"palegoldenrod\": [238, 232, 170],\r\n\t\"palegreen\": [152, 251, 152],\r\n\t\"paleturquoise\": [175, 238, 238],\r\n\t\"palevioletred\": [219, 112, 147],\r\n\t\"papayawhip\": [255, 239, 213],\r\n\t\"peachpuff\": [255, 218, 185],\r\n\t\"peru\": [205, 133, 63],\r\n\t\"pink\": [255, 192, 203],\r\n\t\"plum\": [221, 160, 221],\r\n\t\"powderblue\": [176, 224, 230],\r\n\t\"purple\": [128, 0, 128],\r\n\t\"rebeccapurple\": [102, 51, 153],\r\n\t\"red\": [255, 0, 0],\r\n\t\"rosybrown\": [188, 143, 143],\r\n\t\"royalblue\": [65, 105, 225],\r\n\t\"saddlebrown\": [139, 69, 19],\r\n\t\"salmon\": [250, 128, 114],\r\n\t\"sandybrown\": [244, 164, 96],\r\n\t\"seagreen\": [46, 139, 87],\r\n\t\"seashell\": [255, 245, 238],\r\n\t\"sienna\": [160, 82, 45],\r\n\t\"silver\": [192, 192, 192],\r\n\t\"skyblue\": [135, 206, 235],\r\n\t\"slateblue\": [106, 90, 205],\r\n\t\"slategray\": [112, 128, 144],\r\n\t\"slategrey\": [112, 128, 144],\r\n\t\"snow\": [255, 250, 250],\r\n\t\"springgreen\": [0, 255, 127],\r\n\t\"steelblue\": [70, 130, 180],\r\n\t\"tan\": [210, 180, 140],\r\n\t\"teal\": [0, 128, 128],\r\n\t\"thistle\": [216, 191, 216],\r\n\t\"tomato\": [255, 99, 71],\r\n\t\"turquoise\": [64, 224, 208],\r\n\t\"violet\": [238, 130, 238],\r\n\t\"wheat\": [245, 222, 179],\r\n\t\"white\": [255, 255, 255],\r\n\t\"whitesmoke\": [245, 245, 245],\r\n\t\"yellow\": [255, 255, 0],\r\n\t\"yellowgreen\": [154, 205, 50]\r\n};\r\n","/* MIT license */\nvar colorNames = require('color-name');\nvar swizzle = require('simple-swizzle');\nvar hasOwnProperty = Object.hasOwnProperty;\n\nvar reverseNames = Object.create(null);\n\n// create a list of reverse color names\nfor (var name in colorNames) {\n\tif (hasOwnProperty.call(colorNames, name)) {\n\t\treverseNames[colorNames[name]] = name;\n\t}\n}\n\nvar cs = module.exports = {\n\tto: {},\n\tget: {}\n};\n\ncs.get = function (string) {\n\tvar prefix = string.substring(0, 3).toLowerCase();\n\tvar val;\n\tvar model;\n\tswitch (prefix) {\n\t\tcase 'hsl':\n\t\t\tval = cs.get.hsl(string);\n\t\t\tmodel = 'hsl';\n\t\t\tbreak;\n\t\tcase 'hwb':\n\t\t\tval = cs.get.hwb(string);\n\t\t\tmodel = 'hwb';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tval = cs.get.rgb(string);\n\t\t\tmodel = 'rgb';\n\t\t\tbreak;\n\t}\n\n\tif (!val) {\n\t\treturn null;\n\t}\n\n\treturn {model: model, value: val};\n};\n\ncs.get.rgb = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar abbr = /^#([a-f0-9]{3,4})$/i;\n\tvar hex = /^#([a-f0-9]{6})([a-f0-9]{2})?$/i;\n\tvar rgba = /^rgba?\\(\\s*([+-]?\\d+)(?=[\\s,])\\s*(?:,\\s*)?([+-]?\\d+)(?=[\\s,])\\s*(?:,\\s*)?([+-]?\\d+)\\s*(?:[,|\\/]\\s*([+-]?[\\d\\.]+)(%?)\\s*)?\\)$/;\n\tvar per = /^rgba?\\(\\s*([+-]?[\\d\\.]+)\\%\\s*,?\\s*([+-]?[\\d\\.]+)\\%\\s*,?\\s*([+-]?[\\d\\.]+)\\%\\s*(?:[,|\\/]\\s*([+-]?[\\d\\.]+)(%?)\\s*)?\\)$/;\n\tvar keyword = /^(\\w+)$/;\n\n\tvar rgb = [0, 0, 0, 1];\n\tvar match;\n\tvar i;\n\tvar hexAlpha;\n\n\tif (match = string.match(hex)) {\n\t\thexAlpha = match[2];\n\t\tmatch = match[1];\n\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\t// https://jsperf.com/slice-vs-substr-vs-substring-methods-long-string/19\n\t\t\tvar i2 = i * 2;\n\t\t\trgb[i] = parseInt(match.slice(i2, i2 + 2), 16);\n\t\t}\n\n\t\tif (hexAlpha) {\n\t\t\trgb[3] = parseInt(hexAlpha, 16) / 255;\n\t\t}\n\t} else if (match = string.match(abbr)) {\n\t\tmatch = match[1];\n\t\thexAlpha = match[3];\n\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = parseInt(match[i] + match[i], 16);\n\t\t}\n\n\t\tif (hexAlpha) {\n\t\t\trgb[3] = parseInt(hexAlpha + hexAlpha, 16) / 255;\n\t\t}\n\t} else if (match = string.match(rgba)) {\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = parseInt(match[i + 1], 0);\n\t\t}\n\n\t\tif (match[4]) {\n\t\t\tif (match[5]) {\n\t\t\t\trgb[3] = parseFloat(match[4]) * 0.01;\n\t\t\t} else {\n\t\t\t\trgb[3] = parseFloat(match[4]);\n\t\t\t}\n\t\t}\n\t} else if (match = string.match(per)) {\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = Math.round(parseFloat(match[i + 1]) * 2.55);\n\t\t}\n\n\t\tif (match[4]) {\n\t\t\tif (match[5]) {\n\t\t\t\trgb[3] = parseFloat(match[4]) * 0.01;\n\t\t\t} else {\n\t\t\t\trgb[3] = parseFloat(match[4]);\n\t\t\t}\n\t\t}\n\t} else if (match = string.match(keyword)) {\n\t\tif (match[1] === 'transparent') {\n\t\t\treturn [0, 0, 0, 0];\n\t\t}\n\n\t\tif (!hasOwnProperty.call(colorNames, match[1])) {\n\t\t\treturn null;\n\t\t}\n\n\t\trgb = colorNames[match[1]];\n\t\trgb[3] = 1;\n\n\t\treturn rgb;\n\t} else {\n\t\treturn null;\n\t}\n\n\tfor (i = 0; i < 3; i++) {\n\t\trgb[i] = clamp(rgb[i], 0, 255);\n\t}\n\trgb[3] = clamp(rgb[3], 0, 1);\n\n\treturn rgb;\n};\n\ncs.get.hsl = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar hsl = /^hsla?\\(\\s*([+-]?(?:\\d{0,3}\\.)?\\d+)(?:deg)?\\s*,?\\s*([+-]?[\\d\\.]+)%\\s*,?\\s*([+-]?[\\d\\.]+)%\\s*(?:[,|\\/]\\s*([+-]?(?=\\.\\d|\\d)(?:0|[1-9]\\d*)?(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)\\s*)?\\)$/;\n\tvar match = string.match(hsl);\n\n\tif (match) {\n\t\tvar alpha = parseFloat(match[4]);\n\t\tvar h = ((parseFloat(match[1]) % 360) + 360) % 360;\n\t\tvar s = clamp(parseFloat(match[2]), 0, 100);\n\t\tvar l = clamp(parseFloat(match[3]), 0, 100);\n\t\tvar a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n\n\t\treturn [h, s, l, a];\n\t}\n\n\treturn null;\n};\n\ncs.get.hwb = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar hwb = /^hwb\\(\\s*([+-]?\\d{0,3}(?:\\.\\d+)?)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?(?=\\.\\d|\\d)(?:0|[1-9]\\d*)?(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)\\s*)?\\)$/;\n\tvar match = string.match(hwb);\n\n\tif (match) {\n\t\tvar alpha = parseFloat(match[4]);\n\t\tvar h = ((parseFloat(match[1]) % 360) + 360) % 360;\n\t\tvar w = clamp(parseFloat(match[2]), 0, 100);\n\t\tvar b = clamp(parseFloat(match[3]), 0, 100);\n\t\tvar a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n\t\treturn [h, w, b, a];\n\t}\n\n\treturn null;\n};\n\ncs.to.hex = function () {\n\tvar rgba = swizzle(arguments);\n\n\treturn (\n\t\t'#' +\n\t\thexDouble(rgba[0]) +\n\t\thexDouble(rgba[1]) +\n\t\thexDouble(rgba[2]) +\n\t\t(rgba[3] < 1\n\t\t\t? (hexDouble(Math.round(rgba[3] * 255)))\n\t\t\t: '')\n\t);\n};\n\ncs.to.rgb = function () {\n\tvar rgba = swizzle(arguments);\n\n\treturn rgba.length < 4 || rgba[3] === 1\n\t\t? 'rgb(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ')'\n\t\t: 'rgba(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ', ' + rgba[3] + ')';\n};\n\ncs.to.rgb.percent = function () {\n\tvar rgba = swizzle(arguments);\n\n\tvar r = Math.round(rgba[0] / 255 * 100);\n\tvar g = Math.round(rgba[1] / 255 * 100);\n\tvar b = Math.round(rgba[2] / 255 * 100);\n\n\treturn rgba.length < 4 || rgba[3] === 1\n\t\t? 'rgb(' + r + '%, ' + g + '%, ' + b + '%)'\n\t\t: 'rgba(' + r + '%, ' + g + '%, ' + b + '%, ' + rgba[3] + ')';\n};\n\ncs.to.hsl = function () {\n\tvar hsla = swizzle(arguments);\n\treturn hsla.length < 4 || hsla[3] === 1\n\t\t? 'hsl(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%)'\n\t\t: 'hsla(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%, ' + hsla[3] + ')';\n};\n\n// hwb is a bit different than rgb(a) & hsl(a) since there is no alpha specific syntax\n// (hwb have alpha optional & 1 is default value)\ncs.to.hwb = function () {\n\tvar hwba = swizzle(arguments);\n\n\tvar a = '';\n\tif (hwba.length >= 4 && hwba[3] !== 1) {\n\t\ta = ', ' + hwba[3];\n\t}\n\n\treturn 'hwb(' + hwba[0] + ', ' + hwba[1] + '%, ' + hwba[2] + '%' + a + ')';\n};\n\ncs.to.keyword = function (rgb) {\n\treturn reverseNames[rgb.slice(0, 3)];\n};\n\n// helpers\nfunction clamp(num, min, max) {\n\treturn Math.min(Math.max(min, num), max);\n}\n\nfunction hexDouble(num) {\n\tvar str = Math.round(num).toString(16).toUpperCase();\n\treturn (str.length < 2) ? '0' + str : str;\n}\n","'use strict';\n\nvar colorString = require('color-string');\nvar convert = require('color-convert');\n\nvar _slice = [].slice;\n\nvar skippedModels = [\n\t// to be honest, I don't really feel like keyword belongs in color convert, but eh.\n\t'keyword',\n\n\t// gray conflicts with some method names, and has its own method defined.\n\t'gray',\n\n\t// shouldn't really be in color-convert either...\n\t'hex'\n];\n\nvar hashedModelKeys = {};\nObject.keys(convert).forEach(function (model) {\n\thashedModelKeys[_slice.call(convert[model].labels).sort().join('')] = model;\n});\n\nvar limiters = {};\n\nfunction Color(obj, model) {\n\tif (!(this instanceof Color)) {\n\t\treturn new Color(obj, model);\n\t}\n\n\tif (model && model in skippedModels) {\n\t\tmodel = null;\n\t}\n\n\tif (model && !(model in convert)) {\n\t\tthrow new Error('Unknown model: ' + model);\n\t}\n\n\tvar i;\n\tvar channels;\n\n\tif (obj == null) { // eslint-disable-line no-eq-null,eqeqeq\n\t\tthis.model = 'rgb';\n\t\tthis.color = [0, 0, 0];\n\t\tthis.valpha = 1;\n\t} else if (obj instanceof Color) {\n\t\tthis.model = obj.model;\n\t\tthis.color = obj.color.slice();\n\t\tthis.valpha = obj.valpha;\n\t} else if (typeof obj === 'string') {\n\t\tvar result = colorString.get(obj);\n\t\tif (result === null) {\n\t\t\tthrow new Error('Unable to parse color from string: ' + obj);\n\t\t}\n\n\t\tthis.model = result.model;\n\t\tchannels = convert[this.model].channels;\n\t\tthis.color = result.value.slice(0, channels);\n\t\tthis.valpha = typeof result.value[channels] === 'number' ? result.value[channels] : 1;\n\t} else if (obj.length) {\n\t\tthis.model = model || 'rgb';\n\t\tchannels = convert[this.model].channels;\n\t\tvar newArr = _slice.call(obj, 0, channels);\n\t\tthis.color = zeroArray(newArr, channels);\n\t\tthis.valpha = typeof obj[channels] === 'number' ? obj[channels] : 1;\n\t} else if (typeof obj === 'number') {\n\t\t// this is always RGB - can be converted later on.\n\t\tobj &= 0xFFFFFF;\n\t\tthis.model = 'rgb';\n\t\tthis.color = [\n\t\t\t(obj >> 16) & 0xFF,\n\t\t\t(obj >> 8) & 0xFF,\n\t\t\tobj & 0xFF\n\t\t];\n\t\tthis.valpha = 1;\n\t} else {\n\t\tthis.valpha = 1;\n\n\t\tvar keys = Object.keys(obj);\n\t\tif ('alpha' in obj) {\n\t\t\tkeys.splice(keys.indexOf('alpha'), 1);\n\t\t\tthis.valpha = typeof obj.alpha === 'number' ? obj.alpha : 0;\n\t\t}\n\n\t\tvar hashedKeys = keys.sort().join('');\n\t\tif (!(hashedKeys in hashedModelKeys)) {\n\t\t\tthrow new Error('Unable to parse color from object: ' + JSON.stringify(obj));\n\t\t}\n\n\t\tthis.model = hashedModelKeys[hashedKeys];\n\n\t\tvar labels = convert[this.model].labels;\n\t\tvar color = [];\n\t\tfor (i = 0; i < labels.length; i++) {\n\t\t\tcolor.push(obj[labels[i]]);\n\t\t}\n\n\t\tthis.color = zeroArray(color);\n\t}\n\n\t// perform limitations (clamping, etc.)\n\tif (limiters[this.model]) {\n\t\tchannels = convert[this.model].channels;\n\t\tfor (i = 0; i < channels; i++) {\n\t\t\tvar limit = limiters[this.model][i];\n\t\t\tif (limit) {\n\t\t\t\tthis.color[i] = limit(this.color[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.valpha = Math.max(0, Math.min(1, this.valpha));\n\n\tif (Object.freeze) {\n\t\tObject.freeze(this);\n\t}\n}\n\nColor.prototype = {\n\ttoString: function () {\n\t\treturn this.string();\n\t},\n\n\ttoJSON: function () {\n\t\treturn this[this.model]();\n\t},\n\n\tstring: function (places) {\n\t\tvar self = this.model in colorString.to ? this : this.rgb();\n\t\tself = self.round(typeof places === 'number' ? places : 1);\n\t\tvar args = self.valpha === 1 ? self.color : self.color.concat(this.valpha);\n\t\treturn colorString.to[self.model](args);\n\t},\n\n\tpercentString: function (places) {\n\t\tvar self = this.rgb().round(typeof places === 'number' ? places : 1);\n\t\tvar args = self.valpha === 1 ? self.color : self.color.concat(this.valpha);\n\t\treturn colorString.to.rgb.percent(args);\n\t},\n\n\tarray: function () {\n\t\treturn this.valpha === 1 ? this.color.slice() : this.color.concat(this.valpha);\n\t},\n\n\tobject: function () {\n\t\tvar result = {};\n\t\tvar channels = convert[this.model].channels;\n\t\tvar labels = convert[this.model].labels;\n\n\t\tfor (var i = 0; i < channels; i++) {\n\t\t\tresult[labels[i]] = this.color[i];\n\t\t}\n\n\t\tif (this.valpha !== 1) {\n\t\t\tresult.alpha = this.valpha;\n\t\t}\n\n\t\treturn result;\n\t},\n\n\tunitArray: function () {\n\t\tvar rgb = this.rgb().color;\n\t\trgb[0] /= 255;\n\t\trgb[1] /= 255;\n\t\trgb[2] /= 255;\n\n\t\tif (this.valpha !== 1) {\n\t\t\trgb.push(this.valpha);\n\t\t}\n\n\t\treturn rgb;\n\t},\n\n\tunitObject: function () {\n\t\tvar rgb = this.rgb().object();\n\t\trgb.r /= 255;\n\t\trgb.g /= 255;\n\t\trgb.b /= 255;\n\n\t\tif (this.valpha !== 1) {\n\t\t\trgb.alpha = this.valpha;\n\t\t}\n\n\t\treturn rgb;\n\t},\n\n\tround: function (places) {\n\t\tplaces = Math.max(places || 0, 0);\n\t\treturn new Color(this.color.map(roundToPlace(places)).concat(this.valpha), this.model);\n\t},\n\n\talpha: function (val) {\n\t\tif (arguments.length) {\n\t\t\treturn new Color(this.color.concat(Math.max(0, Math.min(1, val))), this.model);\n\t\t}\n\n\t\treturn this.valpha;\n\t},\n\n\t// rgb\n\tred: getset('rgb', 0, maxfn(255)),\n\tgreen: getset('rgb', 1, maxfn(255)),\n\tblue: getset('rgb', 2, maxfn(255)),\n\n\thue: getset(['hsl', 'hsv', 'hsl', 'hwb', 'hcg'], 0, function (val) { return ((val % 360) + 360) % 360; }), // eslint-disable-line brace-style\n\n\tsaturationl: getset('hsl', 1, maxfn(100)),\n\tlightness: getset('hsl', 2, maxfn(100)),\n\n\tsaturationv: getset('hsv', 1, maxfn(100)),\n\tvalue: getset('hsv', 2, maxfn(100)),\n\n\tchroma: getset('hcg', 1, maxfn(100)),\n\tgray: getset('hcg', 2, maxfn(100)),\n\n\twhite: getset('hwb', 1, maxfn(100)),\n\twblack: getset('hwb', 2, maxfn(100)),\n\n\tcyan: getset('cmyk', 0, maxfn(100)),\n\tmagenta: getset('cmyk', 1, maxfn(100)),\n\tyellow: getset('cmyk', 2, maxfn(100)),\n\tblack: getset('cmyk', 3, maxfn(100)),\n\n\tx: getset('xyz', 0, maxfn(100)),\n\ty: getset('xyz', 1, maxfn(100)),\n\tz: getset('xyz', 2, maxfn(100)),\n\n\tl: getset('lab', 0, maxfn(100)),\n\ta: getset('lab', 1),\n\tb: getset('lab', 2),\n\n\tkeyword: function (val) {\n\t\tif (arguments.length) {\n\t\t\treturn new Color(val);\n\t\t}\n\n\t\treturn convert[this.model].keyword(this.color);\n\t},\n\n\thex: function (val) {\n\t\tif (arguments.length) {\n\t\t\treturn new Color(val);\n\t\t}\n\n\t\treturn colorString.to.hex(this.rgb().round().color);\n\t},\n\n\trgbNumber: function () {\n\t\tvar rgb = this.rgb().color;\n\t\treturn ((rgb[0] & 0xFF) << 16) | ((rgb[1] & 0xFF) << 8) | (rgb[2] & 0xFF);\n\t},\n\n\tluminosity: function () {\n\t\t// http://www.w3.org/TR/WCAG20/#relativeluminancedef\n\t\tvar rgb = this.rgb().color;\n\n\t\tvar lum = [];\n\t\tfor (var i = 0; i < rgb.length; i++) {\n\t\t\tvar chan = rgb[i] / 255;\n\t\t\tlum[i] = (chan <= 0.03928) ? chan / 12.92 : Math.pow(((chan + 0.055) / 1.055), 2.4);\n\t\t}\n\n\t\treturn 0.2126 * lum[0] + 0.7152 * lum[1] + 0.0722 * lum[2];\n\t},\n\n\tcontrast: function (color2) {\n\t\t// http://www.w3.org/TR/WCAG20/#contrast-ratiodef\n\t\tvar lum1 = this.luminosity();\n\t\tvar lum2 = color2.luminosity();\n\n\t\tif (lum1 > lum2) {\n\t\t\treturn (lum1 + 0.05) / (lum2 + 0.05);\n\t\t}\n\n\t\treturn (lum2 + 0.05) / (lum1 + 0.05);\n\t},\n\n\tlevel: function (color2) {\n\t\tvar contrastRatio = this.contrast(color2);\n\t\tif (contrastRatio >= 7.1) {\n\t\t\treturn 'AAA';\n\t\t}\n\n\t\treturn (contrastRatio >= 4.5) ? 'AA' : '';\n\t},\n\n\tisDark: function () {\n\t\t// YIQ equation from http://24ways.org/2010/calculating-color-contrast\n\t\tvar rgb = this.rgb().color;\n\t\tvar yiq = (rgb[0] * 299 + rgb[1] * 587 + rgb[2] * 114) / 1000;\n\t\treturn yiq < 128;\n\t},\n\n\tisLight: function () {\n\t\treturn !this.isDark();\n\t},\n\n\tnegate: function () {\n\t\tvar rgb = this.rgb();\n\t\tfor (var i = 0; i < 3; i++) {\n\t\t\trgb.color[i] = 255 - rgb.color[i];\n\t\t}\n\t\treturn rgb;\n\t},\n\n\tlighten: function (ratio) {\n\t\tvar hsl = this.hsl();\n\t\thsl.color[2] += hsl.color[2] * ratio;\n\t\treturn hsl;\n\t},\n\n\tdarken: function (ratio) {\n\t\tvar hsl = this.hsl();\n\t\thsl.color[2] -= hsl.color[2] * ratio;\n\t\treturn hsl;\n\t},\n\n\tsaturate: function (ratio) {\n\t\tvar hsl = this.hsl();\n\t\thsl.color[1] += hsl.color[1] * ratio;\n\t\treturn hsl;\n\t},\n\n\tdesaturate: function (ratio) {\n\t\tvar hsl = this.hsl();\n\t\thsl.color[1] -= hsl.color[1] * ratio;\n\t\treturn hsl;\n\t},\n\n\twhiten: function (ratio) {\n\t\tvar hwb = this.hwb();\n\t\thwb.color[1] += hwb.color[1] * ratio;\n\t\treturn hwb;\n\t},\n\n\tblacken: function (ratio) {\n\t\tvar hwb = this.hwb();\n\t\thwb.color[2] += hwb.color[2] * ratio;\n\t\treturn hwb;\n\t},\n\n\tgrayscale: function () {\n\t\t// http://en.wikipedia.org/wiki/Grayscale#Converting_color_to_grayscale\n\t\tvar rgb = this.rgb().color;\n\t\tvar val = rgb[0] * 0.3 + rgb[1] * 0.59 + rgb[2] * 0.11;\n\t\treturn Color.rgb(val, val, val);\n\t},\n\n\tfade: function (ratio) {\n\t\treturn this.alpha(this.valpha - (this.valpha * ratio));\n\t},\n\n\topaquer: function (ratio) {\n\t\treturn this.alpha(this.valpha + (this.valpha * ratio));\n\t},\n\n\trotate: function (degrees) {\n\t\tvar hsl = this.hsl();\n\t\tvar hue = hsl.color[0];\n\t\thue = (hue + degrees) % 360;\n\t\thue = hue < 0 ? 360 + hue : hue;\n\t\thsl.color[0] = hue;\n\t\treturn hsl;\n\t},\n\n\tmix: function (mixinColor, weight) {\n\t\t// ported from sass implementation in C\n\t\t// https://github.com/sass/libsass/blob/0e6b4a2850092356aa3ece07c6b249f0221caced/functions.cpp#L209\n\t\tif (!mixinColor || !mixinColor.rgb) {\n\t\t\tthrow new Error('Argument to \"mix\" was not a Color instance, but rather an instance of ' + typeof mixinColor);\n\t\t}\n\t\tvar color1 = mixinColor.rgb();\n\t\tvar color2 = this.rgb();\n\t\tvar p = weight === undefined ? 0.5 : weight;\n\n\t\tvar w = 2 * p - 1;\n\t\tvar a = color1.alpha() - color2.alpha();\n\n\t\tvar w1 = (((w * a === -1) ? w : (w + a) / (1 + w * a)) + 1) / 2.0;\n\t\tvar w2 = 1 - w1;\n\n\t\treturn Color.rgb(\n\t\t\t\tw1 * color1.red() + w2 * color2.red(),\n\t\t\t\tw1 * color1.green() + w2 * color2.green(),\n\t\t\t\tw1 * color1.blue() + w2 * color2.blue(),\n\t\t\t\tcolor1.alpha() * p + color2.alpha() * (1 - p));\n\t}\n};\n\n// model conversion methods and static constructors\nObject.keys(convert).forEach(function (model) {\n\tif (skippedModels.indexOf(model) !== -1) {\n\t\treturn;\n\t}\n\n\tvar channels = convert[model].channels;\n\n\t// conversion methods\n\tColor.prototype[model] = function () {\n\t\tif (this.model === model) {\n\t\t\treturn new Color(this);\n\t\t}\n\n\t\tif (arguments.length) {\n\t\t\treturn new Color(arguments, model);\n\t\t}\n\n\t\tvar newAlpha = typeof arguments[channels] === 'number' ? channels : this.valpha;\n\t\treturn new Color(assertArray(convert[this.model][model].raw(this.color)).concat(newAlpha), model);\n\t};\n\n\t// 'static' construction methods\n\tColor[model] = function (color) {\n\t\tif (typeof color === 'number') {\n\t\t\tcolor = zeroArray(_slice.call(arguments), channels);\n\t\t}\n\t\treturn new Color(color, model);\n\t};\n});\n\nfunction roundTo(num, places) {\n\treturn Number(num.toFixed(places));\n}\n\nfunction roundToPlace(places) {\n\treturn function (num) {\n\t\treturn roundTo(num, places);\n\t};\n}\n\nfunction getset(model, channel, modifier) {\n\tmodel = Array.isArray(model) ? model : [model];\n\n\tmodel.forEach(function (m) {\n\t\t(limiters[m] || (limiters[m] = []))[channel] = modifier;\n\t});\n\n\tmodel = model[0];\n\n\treturn function (val) {\n\t\tvar result;\n\n\t\tif (arguments.length) {\n\t\t\tif (modifier) {\n\t\t\t\tval = modifier(val);\n\t\t\t}\n\n\t\t\tresult = this[model]();\n\t\t\tresult.color[channel] = val;\n\t\t\treturn result;\n\t\t}\n\n\t\tresult = this[model]().color[channel];\n\t\tif (modifier) {\n\t\t\tresult = modifier(result);\n\t\t}\n\n\t\treturn result;\n\t};\n}\n\nfunction maxfn(max) {\n\treturn function (v) {\n\t\treturn Math.max(0, Math.min(max, v));\n\t};\n}\n\nfunction assertArray(val) {\n\treturn Array.isArray(val) ? val : [val];\n}\n\nfunction zeroArray(arr, length) {\n\tfor (var i = 0; i < length; i++) {\n\t\tif (typeof arr[i] !== 'number') {\n\t\t\tarr[i] = 0;\n\t\t}\n\t}\n\n\treturn arr;\n}\n\nmodule.exports = Color;\n","'use strict';\n\nvar color = require('color')\n  , hex = require('text-hex');\n\n/**\n * Generate a color for a given name. But be reasonably smart about it by\n * understanding name spaces and coloring each namespace a bit lighter so they\n * still have the same base color as the root.\n *\n * @param {string} namespace The namespace\n * @param {string} [delimiter] The delimiter\n * @returns {string} color\n */\nmodule.exports = function colorspace(namespace, delimiter) {\n  var split = namespace.split(delimiter || ':');\n  var base = hex(split[0]);\n\n  if (!split.length) return base;\n\n  for (var i = 0, l = split.length - 1; i < l; i++) {\n    base = color(base)\n    .mix(color(hex(split[i + 1])))\n    .saturate(1)\n    .hex();\n  }\n\n  return base;\n};\n","'use strict';\n\n/**\n * Checks if a given namespace is allowed by the given variable.\n *\n * @param {String} name namespace that should be included.\n * @param {String} variable Value that needs to be tested.\n * @returns {Boolean} Indication if namespace is enabled.\n * @public\n */\nmodule.exports = function enabled(name, variable) {\n  if (!variable) return false;\n\n  var variables = variable.split(/[\\s,]+/)\n    , i = 0;\n\n  for (; i < variables.length; i++) {\n    variable = variables[i].replace('*', '.*?');\n\n    if ('-' === variable.charAt(0)) {\n      if ((new RegExp('^'+ variable.substr(1) +'$')).test(name)) {\n        return false;\n      }\n\n      continue;\n    }\n\n    if ((new RegExp('^'+ variable +'$')).test(name)) {\n      return true;\n    }\n  }\n\n  return false;\n};\n","/**\n * @typedef {object} PrivateData\n * @property {EventTarget} eventTarget The event target.\n * @property {{type:string}} event The original event object.\n * @property {number} eventPhase The current event phase.\n * @property {EventTarget|null} currentTarget The current event target.\n * @property {boolean} canceled The flag to prevent default.\n * @property {boolean} stopped The flag to stop propagation.\n * @property {boolean} immediateStopped The flag to stop propagation immediately.\n * @property {Function|null} passiveListener The listener if the current listener is passive. Otherwise this is null.\n * @property {number} timeStamp The unix time.\n * @private\n */\n\n/**\n * Private data for event wrappers.\n * @type {WeakMap<Event, PrivateData>}\n * @private\n */\nconst privateData = new WeakMap()\n\n/**\n * Cache for wrapper classes.\n * @type {WeakMap<Object, Function>}\n * @private\n */\nconst wrappers = new WeakMap()\n\n/**\n * Get private data.\n * @param {Event} event The event object to get private data.\n * @returns {PrivateData} The private data of the event.\n * @private\n */\nfunction pd(event) {\n    const retv = privateData.get(event)\n    console.assert(\n        retv != null,\n        \"'this' is expected an Event object, but got\",\n        event\n    )\n    return retv\n}\n\n/**\n * https://dom.spec.whatwg.org/#set-the-canceled-flag\n * @param data {PrivateData} private data.\n */\nfunction setCancelFlag(data) {\n    if (data.passiveListener != null) {\n        if (\n            typeof console !== \"undefined\" &&\n            typeof console.error === \"function\"\n        ) {\n            console.error(\n                \"Unable to preventDefault inside passive event listener invocation.\",\n                data.passiveListener\n            )\n        }\n        return\n    }\n    if (!data.event.cancelable) {\n        return\n    }\n\n    data.canceled = true\n    if (typeof data.event.preventDefault === \"function\") {\n        data.event.preventDefault()\n    }\n}\n\n/**\n * @see https://dom.spec.whatwg.org/#interface-event\n * @private\n */\n/**\n * The event wrapper.\n * @constructor\n * @param {EventTarget} eventTarget The event target of this dispatching.\n * @param {Event|{type:string}} event The original event to wrap.\n */\nfunction Event(eventTarget, event) {\n    privateData.set(this, {\n        eventTarget,\n        event,\n        eventPhase: 2,\n        currentTarget: eventTarget,\n        canceled: false,\n        stopped: false,\n        immediateStopped: false,\n        passiveListener: null,\n        timeStamp: event.timeStamp || Date.now(),\n    })\n\n    // https://heycam.github.io/webidl/#Unforgeable\n    Object.defineProperty(this, \"isTrusted\", { value: false, enumerable: true })\n\n    // Define accessors\n    const keys = Object.keys(event)\n    for (let i = 0; i < keys.length; ++i) {\n        const key = keys[i]\n        if (!(key in this)) {\n            Object.defineProperty(this, key, defineRedirectDescriptor(key))\n        }\n    }\n}\n\n// Should be enumerable, but class methods are not enumerable.\nEvent.prototype = {\n    /**\n     * The type of this event.\n     * @type {string}\n     */\n    get type() {\n        return pd(this).event.type\n    },\n\n    /**\n     * The target of this event.\n     * @type {EventTarget}\n     */\n    get target() {\n        return pd(this).eventTarget\n    },\n\n    /**\n     * The target of this event.\n     * @type {EventTarget}\n     */\n    get currentTarget() {\n        return pd(this).currentTarget\n    },\n\n    /**\n     * @returns {EventTarget[]} The composed path of this event.\n     */\n    composedPath() {\n        const currentTarget = pd(this).currentTarget\n        if (currentTarget == null) {\n            return []\n        }\n        return [currentTarget]\n    },\n\n    /**\n     * Constant of NONE.\n     * @type {number}\n     */\n    get NONE() {\n        return 0\n    },\n\n    /**\n     * Constant of CAPTURING_PHASE.\n     * @type {number}\n     */\n    get CAPTURING_PHASE() {\n        return 1\n    },\n\n    /**\n     * Constant of AT_TARGET.\n     * @type {number}\n     */\n    get AT_TARGET() {\n        return 2\n    },\n\n    /**\n     * Constant of BUBBLING_PHASE.\n     * @type {number}\n     */\n    get BUBBLING_PHASE() {\n        return 3\n    },\n\n    /**\n     * The target of this event.\n     * @type {number}\n     */\n    get eventPhase() {\n        return pd(this).eventPhase\n    },\n\n    /**\n     * Stop event bubbling.\n     * @returns {void}\n     */\n    stopPropagation() {\n        const data = pd(this)\n\n        data.stopped = true\n        if (typeof data.event.stopPropagation === \"function\") {\n            data.event.stopPropagation()\n        }\n    },\n\n    /**\n     * Stop event bubbling.\n     * @returns {void}\n     */\n    stopImmediatePropagation() {\n        const data = pd(this)\n\n        data.stopped = true\n        data.immediateStopped = true\n        if (typeof data.event.stopImmediatePropagation === \"function\") {\n            data.event.stopImmediatePropagation()\n        }\n    },\n\n    /**\n     * The flag to be bubbling.\n     * @type {boolean}\n     */\n    get bubbles() {\n        return Boolean(pd(this).event.bubbles)\n    },\n\n    /**\n     * The flag to be cancelable.\n     * @type {boolean}\n     */\n    get cancelable() {\n        return Boolean(pd(this).event.cancelable)\n    },\n\n    /**\n     * Cancel this event.\n     * @returns {void}\n     */\n    preventDefault() {\n        setCancelFlag(pd(this))\n    },\n\n    /**\n     * The flag to indicate cancellation state.\n     * @type {boolean}\n     */\n    get defaultPrevented() {\n        return pd(this).canceled\n    },\n\n    /**\n     * The flag to be composed.\n     * @type {boolean}\n     */\n    get composed() {\n        return Boolean(pd(this).event.composed)\n    },\n\n    /**\n     * The unix time of this event.\n     * @type {number}\n     */\n    get timeStamp() {\n        return pd(this).timeStamp\n    },\n\n    /**\n     * The target of this event.\n     * @type {EventTarget}\n     * @deprecated\n     */\n    get srcElement() {\n        return pd(this).eventTarget\n    },\n\n    /**\n     * The flag to stop event bubbling.\n     * @type {boolean}\n     * @deprecated\n     */\n    get cancelBubble() {\n        return pd(this).stopped\n    },\n    set cancelBubble(value) {\n        if (!value) {\n            return\n        }\n        const data = pd(this)\n\n        data.stopped = true\n        if (typeof data.event.cancelBubble === \"boolean\") {\n            data.event.cancelBubble = true\n        }\n    },\n\n    /**\n     * The flag to indicate cancellation state.\n     * @type {boolean}\n     * @deprecated\n     */\n    get returnValue() {\n        return !pd(this).canceled\n    },\n    set returnValue(value) {\n        if (!value) {\n            setCancelFlag(pd(this))\n        }\n    },\n\n    /**\n     * Initialize this event object. But do nothing under event dispatching.\n     * @param {string} type The event type.\n     * @param {boolean} [bubbles=false] The flag to be possible to bubble up.\n     * @param {boolean} [cancelable=false] The flag to be possible to cancel.\n     * @deprecated\n     */\n    initEvent() {\n        // Do nothing.\n    },\n}\n\n// `constructor` is not enumerable.\nObject.defineProperty(Event.prototype, \"constructor\", {\n    value: Event,\n    configurable: true,\n    writable: true,\n})\n\n// Ensure `event instanceof window.Event` is `true`.\nif (typeof window !== \"undefined\" && typeof window.Event !== \"undefined\") {\n    Object.setPrototypeOf(Event.prototype, window.Event.prototype)\n\n    // Make association for wrappers.\n    wrappers.set(window.Event.prototype, Event)\n}\n\n/**\n * Get the property descriptor to redirect a given property.\n * @param {string} key Property name to define property descriptor.\n * @returns {PropertyDescriptor} The property descriptor to redirect the property.\n * @private\n */\nfunction defineRedirectDescriptor(key) {\n    return {\n        get() {\n            return pd(this).event[key]\n        },\n        set(value) {\n            pd(this).event[key] = value\n        },\n        configurable: true,\n        enumerable: true,\n    }\n}\n\n/**\n * Get the property descriptor to call a given method property.\n * @param {string} key Property name to define property descriptor.\n * @returns {PropertyDescriptor} The property descriptor to call the method property.\n * @private\n */\nfunction defineCallDescriptor(key) {\n    return {\n        value() {\n            const event = pd(this).event\n            return event[key].apply(event, arguments)\n        },\n        configurable: true,\n        enumerable: true,\n    }\n}\n\n/**\n * Define new wrapper class.\n * @param {Function} BaseEvent The base wrapper class.\n * @param {Object} proto The prototype of the original event.\n * @returns {Function} The defined wrapper class.\n * @private\n */\nfunction defineWrapper(BaseEvent, proto) {\n    const keys = Object.keys(proto)\n    if (keys.length === 0) {\n        return BaseEvent\n    }\n\n    /** CustomEvent */\n    function CustomEvent(eventTarget, event) {\n        BaseEvent.call(this, eventTarget, event)\n    }\n\n    CustomEvent.prototype = Object.create(BaseEvent.prototype, {\n        constructor: { value: CustomEvent, configurable: true, writable: true },\n    })\n\n    // Define accessors.\n    for (let i = 0; i < keys.length; ++i) {\n        const key = keys[i]\n        if (!(key in BaseEvent.prototype)) {\n            const descriptor = Object.getOwnPropertyDescriptor(proto, key)\n            const isFunc = typeof descriptor.value === \"function\"\n            Object.defineProperty(\n                CustomEvent.prototype,\n                key,\n                isFunc\n                    ? defineCallDescriptor(key)\n                    : defineRedirectDescriptor(key)\n            )\n        }\n    }\n\n    return CustomEvent\n}\n\n/**\n * Get the wrapper class of a given prototype.\n * @param {Object} proto The prototype of the original event to get its wrapper.\n * @returns {Function} The wrapper class.\n * @private\n */\nfunction getWrapper(proto) {\n    if (proto == null || proto === Object.prototype) {\n        return Event\n    }\n\n    let wrapper = wrappers.get(proto)\n    if (wrapper == null) {\n        wrapper = defineWrapper(getWrapper(Object.getPrototypeOf(proto)), proto)\n        wrappers.set(proto, wrapper)\n    }\n    return wrapper\n}\n\n/**\n * Wrap a given event to management a dispatching.\n * @param {EventTarget} eventTarget The event target of this dispatching.\n * @param {Object} event The event to wrap.\n * @returns {Event} The wrapper instance.\n * @private\n */\nexport function wrapEvent(eventTarget, event) {\n    const Wrapper = getWrapper(Object.getPrototypeOf(event))\n    return new Wrapper(eventTarget, event)\n}\n\n/**\n * Get the immediateStopped flag of a given event.\n * @param {Event} event The event to get.\n * @returns {boolean} The flag to stop propagation immediately.\n * @private\n */\nexport function isStopped(event) {\n    return pd(event).immediateStopped\n}\n\n/**\n * Set the current event phase of a given event.\n * @param {Event} event The event to set current target.\n * @param {number} eventPhase New event phase.\n * @returns {void}\n * @private\n */\nexport function setEventPhase(event, eventPhase) {\n    pd(event).eventPhase = eventPhase\n}\n\n/**\n * Set the current target of a given event.\n * @param {Event} event The event to set current target.\n * @param {EventTarget|null} currentTarget New current target.\n * @returns {void}\n * @private\n */\nexport function setCurrentTarget(event, currentTarget) {\n    pd(event).currentTarget = currentTarget\n}\n\n/**\n * Set a passive listener of a given event.\n * @param {Event} event The event to set current target.\n * @param {Function|null} passiveListener New passive listener.\n * @returns {void}\n * @private\n */\nexport function setPassiveListener(event, passiveListener) {\n    pd(event).passiveListener = passiveListener\n}\n","import {\n    isStopped,\n    setCurrentTarget,\n    setEventPhase,\n    setPassiveListener,\n    wrapEvent,\n} from \"./event.mjs\"\n\n/**\n * @typedef {object} ListenerNode\n * @property {Function} listener\n * @property {1|2|3} listenerType\n * @property {boolean} passive\n * @property {boolean} once\n * @property {ListenerNode|null} next\n * @private\n */\n\n/**\n * @type {WeakMap<object, Map<string, ListenerNode>>}\n * @private\n */\nconst listenersMap = new WeakMap()\n\n// Listener types\nconst CAPTURE = 1\nconst BUBBLE = 2\nconst ATTRIBUTE = 3\n\n/**\n * Check whether a given value is an object or not.\n * @param {any} x The value to check.\n * @returns {boolean} `true` if the value is an object.\n */\nfunction isObject(x) {\n    return x !== null && typeof x === \"object\" //eslint-disable-line no-restricted-syntax\n}\n\n/**\n * Get listeners.\n * @param {EventTarget} eventTarget The event target to get.\n * @returns {Map<string, ListenerNode>} The listeners.\n * @private\n */\nfunction getListeners(eventTarget) {\n    const listeners = listenersMap.get(eventTarget)\n    if (listeners == null) {\n        throw new TypeError(\n            \"'this' is expected an EventTarget object, but got another value.\"\n        )\n    }\n    return listeners\n}\n\n/**\n * Get the property descriptor for the event attribute of a given event.\n * @param {string} eventName The event name to get property descriptor.\n * @returns {PropertyDescriptor} The property descriptor.\n * @private\n */\nfunction defineEventAttributeDescriptor(eventName) {\n    return {\n        get() {\n            const listeners = getListeners(this)\n            let node = listeners.get(eventName)\n            while (node != null) {\n                if (node.listenerType === ATTRIBUTE) {\n                    return node.listener\n                }\n                node = node.next\n            }\n            return null\n        },\n\n        set(listener) {\n            if (typeof listener !== \"function\" && !isObject(listener)) {\n                listener = null // eslint-disable-line no-param-reassign\n            }\n            const listeners = getListeners(this)\n\n            // Traverse to the tail while removing old value.\n            let prev = null\n            let node = listeners.get(eventName)\n            while (node != null) {\n                if (node.listenerType === ATTRIBUTE) {\n                    // Remove old value.\n                    if (prev !== null) {\n                        prev.next = node.next\n                    } else if (node.next !== null) {\n                        listeners.set(eventName, node.next)\n                    } else {\n                        listeners.delete(eventName)\n                    }\n                } else {\n                    prev = node\n                }\n\n                node = node.next\n            }\n\n            // Add new value.\n            if (listener !== null) {\n                const newNode = {\n                    listener,\n                    listenerType: ATTRIBUTE,\n                    passive: false,\n                    once: false,\n                    next: null,\n                }\n                if (prev === null) {\n                    listeners.set(eventName, newNode)\n                } else {\n                    prev.next = newNode\n                }\n            }\n        },\n        configurable: true,\n        enumerable: true,\n    }\n}\n\n/**\n * Define an event attribute (e.g. `eventTarget.onclick`).\n * @param {Object} eventTargetPrototype The event target prototype to define an event attrbite.\n * @param {string} eventName The event name to define.\n * @returns {void}\n */\nfunction defineEventAttribute(eventTargetPrototype, eventName) {\n    Object.defineProperty(\n        eventTargetPrototype,\n        `on${eventName}`,\n        defineEventAttributeDescriptor(eventName)\n    )\n}\n\n/**\n * Define a custom EventTarget with event attributes.\n * @param {string[]} eventNames Event names for event attributes.\n * @returns {EventTarget} The custom EventTarget.\n * @private\n */\nfunction defineCustomEventTarget(eventNames) {\n    /** CustomEventTarget */\n    function CustomEventTarget() {\n        EventTarget.call(this)\n    }\n\n    CustomEventTarget.prototype = Object.create(EventTarget.prototype, {\n        constructor: {\n            value: CustomEventTarget,\n            configurable: true,\n            writable: true,\n        },\n    })\n\n    for (let i = 0; i < eventNames.length; ++i) {\n        defineEventAttribute(CustomEventTarget.prototype, eventNames[i])\n    }\n\n    return CustomEventTarget\n}\n\n/**\n * EventTarget.\n *\n * - This is constructor if no arguments.\n * - This is a function which returns a CustomEventTarget constructor if there are arguments.\n *\n * For example:\n *\n *     class A extends EventTarget {}\n *     class B extends EventTarget(\"message\") {}\n *     class C extends EventTarget(\"message\", \"error\") {}\n *     class D extends EventTarget([\"message\", \"error\"]) {}\n */\nfunction EventTarget() {\n    /*eslint-disable consistent-return */\n    if (this instanceof EventTarget) {\n        listenersMap.set(this, new Map())\n        return\n    }\n    if (arguments.length === 1 && Array.isArray(arguments[0])) {\n        return defineCustomEventTarget(arguments[0])\n    }\n    if (arguments.length > 0) {\n        const types = new Array(arguments.length)\n        for (let i = 0; i < arguments.length; ++i) {\n            types[i] = arguments[i]\n        }\n        return defineCustomEventTarget(types)\n    }\n    throw new TypeError(\"Cannot call a class as a function\")\n    /*eslint-enable consistent-return */\n}\n\n// Should be enumerable, but class methods are not enumerable.\nEventTarget.prototype = {\n    /**\n     * Add a given listener to this event target.\n     * @param {string} eventName The event name to add.\n     * @param {Function} listener The listener to add.\n     * @param {boolean|{capture?:boolean,passive?:boolean,once?:boolean}} [options] The options for this listener.\n     * @returns {void}\n     */\n    addEventListener(eventName, listener, options) {\n        if (listener == null) {\n            return\n        }\n        if (typeof listener !== \"function\" && !isObject(listener)) {\n            throw new TypeError(\"'listener' should be a function or an object.\")\n        }\n\n        const listeners = getListeners(this)\n        const optionsIsObj = isObject(options)\n        const capture = optionsIsObj\n            ? Boolean(options.capture)\n            : Boolean(options)\n        const listenerType = capture ? CAPTURE : BUBBLE\n        const newNode = {\n            listener,\n            listenerType,\n            passive: optionsIsObj && Boolean(options.passive),\n            once: optionsIsObj && Boolean(options.once),\n            next: null,\n        }\n\n        // Set it as the first node if the first node is null.\n        let node = listeners.get(eventName)\n        if (node === undefined) {\n            listeners.set(eventName, newNode)\n            return\n        }\n\n        // Traverse to the tail while checking duplication..\n        let prev = null\n        while (node != null) {\n            if (\n                node.listener === listener &&\n                node.listenerType === listenerType\n            ) {\n                // Should ignore duplication.\n                return\n            }\n            prev = node\n            node = node.next\n        }\n\n        // Add it.\n        prev.next = newNode\n    },\n\n    /**\n     * Remove a given listener from this event target.\n     * @param {string} eventName The event name to remove.\n     * @param {Function} listener The listener to remove.\n     * @param {boolean|{capture?:boolean,passive?:boolean,once?:boolean}} [options] The options for this listener.\n     * @returns {void}\n     */\n    removeEventListener(eventName, listener, options) {\n        if (listener == null) {\n            return\n        }\n\n        const listeners = getListeners(this)\n        const capture = isObject(options)\n            ? Boolean(options.capture)\n            : Boolean(options)\n        const listenerType = capture ? CAPTURE : BUBBLE\n\n        let prev = null\n        let node = listeners.get(eventName)\n        while (node != null) {\n            if (\n                node.listener === listener &&\n                node.listenerType === listenerType\n            ) {\n                if (prev !== null) {\n                    prev.next = node.next\n                } else if (node.next !== null) {\n                    listeners.set(eventName, node.next)\n                } else {\n                    listeners.delete(eventName)\n                }\n                return\n            }\n\n            prev = node\n            node = node.next\n        }\n    },\n\n    /**\n     * Dispatch a given event.\n     * @param {Event|{type:string}} event The event to dispatch.\n     * @returns {boolean} `false` if canceled.\n     */\n    dispatchEvent(event) {\n        if (event == null || typeof event.type !== \"string\") {\n            throw new TypeError('\"event.type\" should be a string.')\n        }\n\n        // If listeners aren't registered, terminate.\n        const listeners = getListeners(this)\n        const eventName = event.type\n        let node = listeners.get(eventName)\n        if (node == null) {\n            return true\n        }\n\n        // Since we cannot rewrite several properties, so wrap object.\n        const wrappedEvent = wrapEvent(this, event)\n\n        // This doesn't process capturing phase and bubbling phase.\n        // This isn't participating in a tree.\n        let prev = null\n        while (node != null) {\n            // Remove this listener if it's once\n            if (node.once) {\n                if (prev !== null) {\n                    prev.next = node.next\n                } else if (node.next !== null) {\n                    listeners.set(eventName, node.next)\n                } else {\n                    listeners.delete(eventName)\n                }\n            } else {\n                prev = node\n            }\n\n            // Call this listener\n            setPassiveListener(\n                wrappedEvent,\n                node.passive ? node.listener : null\n            )\n            if (typeof node.listener === \"function\") {\n                try {\n                    node.listener.call(this, wrappedEvent)\n                } catch (err) {\n                    if (\n                        typeof console !== \"undefined\" &&\n                        typeof console.error === \"function\"\n                    ) {\n                        console.error(err)\n                    }\n                }\n            } else if (\n                node.listenerType !== ATTRIBUTE &&\n                typeof node.listener.handleEvent === \"function\"\n            ) {\n                node.listener.handleEvent(wrappedEvent)\n            }\n\n            // Break if `event.stopImmediatePropagation` was called.\n            if (isStopped(wrappedEvent)) {\n                break\n            }\n\n            node = node.next\n        }\n        setPassiveListener(wrappedEvent, null)\n        setEventPhase(wrappedEvent, 0)\n        setCurrentTarget(wrappedEvent, null)\n\n        return !wrappedEvent.defaultPrevented\n    },\n}\n\n// `constructor` is not enumerable.\nObject.defineProperty(EventTarget.prototype, \"constructor\", {\n    value: EventTarget,\n    configurable: true,\n    writable: true,\n})\n\n// Ensure `eventTarget instanceof window.EventTarget` is `true`.\nif (\n    typeof window !== \"undefined\" &&\n    typeof window.EventTarget !== \"undefined\"\n) {\n    Object.setPrototypeOf(EventTarget.prototype, window.EventTarget.prototype)\n}\n\nexport { defineEventAttribute, EventTarget }\nexport default EventTarget\n","const token = /d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\\1?|[aA]|\"[^\"]*\"|'[^']*'/g;\nconst twoDigitsOptional = \"\\\\d\\\\d?\";\nconst twoDigits = \"\\\\d\\\\d\";\nconst threeDigits = \"\\\\d{3}\";\nconst fourDigits = \"\\\\d{4}\";\nconst word = \"[^\\\\s]+\";\nconst literal = /\\[([^]*?)\\]/gm;\n\ntype DateInfo = {\n  year: number;\n  month: number;\n  day: number;\n  hour: number;\n  minute: number;\n  second: number;\n  millisecond: number;\n  isPm: number | null;\n  timezoneOffset: number | null;\n};\n\nexport type I18nSettings = {\n  amPm: [string, string];\n  dayNames: Days;\n  dayNamesShort: Days;\n  monthNames: Months;\n  monthNamesShort: Months;\n  DoFn(dayOfMonth: number): string;\n};\n\nexport type I18nSettingsOptional = Partial<I18nSettings>;\n\nexport type Days = [string, string, string, string, string, string, string];\nexport type Months = [\n  string,\n  string,\n  string,\n  string,\n  string,\n  string,\n  string,\n  string,\n  string,\n  string,\n  string,\n  string\n];\n\nfunction shorten<T extends string[]>(arr: T, sLen: number): string[] {\n  const newArr: string[] = [];\n  for (let i = 0, len = arr.length; i < len; i++) {\n    newArr.push(arr[i].substr(0, sLen));\n  }\n  return newArr;\n}\n\nconst monthUpdate = (\n  arrName: \"monthNames\" | \"monthNamesShort\" | \"dayNames\" | \"dayNamesShort\"\n) => (v: string, i18n: I18nSettings): number | null => {\n  const lowerCaseArr = i18n[arrName].map(v => v.toLowerCase());\n  const index = lowerCaseArr.indexOf(v.toLowerCase());\n  if (index > -1) {\n    return index;\n  }\n  return null;\n};\n\nexport function assign<A>(a: A): A;\nexport function assign<A, B>(a: A, b: B): A & B;\nexport function assign<A, B, C>(a: A, b: B, c: C): A & B & C;\nexport function assign<A, B, C, D>(a: A, b: B, c: C, d: D): A & B & C & D;\nexport function assign(origObj: any, ...args: any[]): any {\n  for (const obj of args) {\n    for (const key in obj) {\n      // @ts-ignore ex\n      origObj[key] = obj[key];\n    }\n  }\n  return origObj;\n}\n\nconst dayNames: Days = [\n  \"Sunday\",\n  \"Monday\",\n  \"Tuesday\",\n  \"Wednesday\",\n  \"Thursday\",\n  \"Friday\",\n  \"Saturday\"\n];\nconst monthNames: Months = [\n  \"January\",\n  \"February\",\n  \"March\",\n  \"April\",\n  \"May\",\n  \"June\",\n  \"July\",\n  \"August\",\n  \"September\",\n  \"October\",\n  \"November\",\n  \"December\"\n];\n\nconst monthNamesShort: Months = shorten(monthNames, 3) as Months;\nconst dayNamesShort: Days = shorten(dayNames, 3) as Days;\n\nconst defaultI18n: I18nSettings = {\n  dayNamesShort,\n  dayNames,\n  monthNamesShort,\n  monthNames,\n  amPm: [\"am\", \"pm\"],\n  DoFn(dayOfMonth: number) {\n    return (\n      dayOfMonth +\n      [\"th\", \"st\", \"nd\", \"rd\"][\n        dayOfMonth % 10 > 3\n          ? 0\n          : ((dayOfMonth - (dayOfMonth % 10) !== 10 ? 1 : 0) * dayOfMonth) % 10\n      ]\n    );\n  }\n};\nlet globalI18n = assign({}, defaultI18n);\nconst setGlobalDateI18n = (i18n: I18nSettingsOptional): I18nSettings =>\n  (globalI18n = assign(globalI18n, i18n));\n\nconst regexEscape = (str: string): string =>\n  str.replace(/[|\\\\{()[^$+*?.-]/g, \"\\\\$&\");\n\nconst pad = (val: string | number, len = 2): string => {\n  val = String(val);\n  while (val.length < len) {\n    val = \"0\" + val;\n  }\n  return val;\n};\n\nconst formatFlags: Record<\n  string,\n  (dateObj: Date, i18n: I18nSettings) => string\n> = {\n  D: (dateObj: Date): string => String(dateObj.getDate()),\n  DD: (dateObj: Date): string => pad(dateObj.getDate()),\n  Do: (dateObj: Date, i18n: I18nSettings): string =>\n    i18n.DoFn(dateObj.getDate()),\n  d: (dateObj: Date): string => String(dateObj.getDay()),\n  dd: (dateObj: Date): string => pad(dateObj.getDay()),\n  ddd: (dateObj: Date, i18n: I18nSettings): string =>\n    i18n.dayNamesShort[dateObj.getDay()],\n  dddd: (dateObj: Date, i18n: I18nSettings): string =>\n    i18n.dayNames[dateObj.getDay()],\n  M: (dateObj: Date): string => String(dateObj.getMonth() + 1),\n  MM: (dateObj: Date): string => pad(dateObj.getMonth() + 1),\n  MMM: (dateObj: Date, i18n: I18nSettings): string =>\n    i18n.monthNamesShort[dateObj.getMonth()],\n  MMMM: (dateObj: Date, i18n: I18nSettings): string =>\n    i18n.monthNames[dateObj.getMonth()],\n  YY: (dateObj: Date): string =>\n    pad(String(dateObj.getFullYear()), 4).substr(2),\n  YYYY: (dateObj: Date): string => pad(dateObj.getFullYear(), 4),\n  h: (dateObj: Date): string => String(dateObj.getHours() % 12 || 12),\n  hh: (dateObj: Date): string => pad(dateObj.getHours() % 12 || 12),\n  H: (dateObj: Date): string => String(dateObj.getHours()),\n  HH: (dateObj: Date): string => pad(dateObj.getHours()),\n  m: (dateObj: Date): string => String(dateObj.getMinutes()),\n  mm: (dateObj: Date): string => pad(dateObj.getMinutes()),\n  s: (dateObj: Date): string => String(dateObj.getSeconds()),\n  ss: (dateObj: Date): string => pad(dateObj.getSeconds()),\n  S: (dateObj: Date): string =>\n    String(Math.round(dateObj.getMilliseconds() / 100)),\n  SS: (dateObj: Date): string =>\n    pad(Math.round(dateObj.getMilliseconds() / 10), 2),\n  SSS: (dateObj: Date): string => pad(dateObj.getMilliseconds(), 3),\n  a: (dateObj: Date, i18n: I18nSettings): string =>\n    dateObj.getHours() < 12 ? i18n.amPm[0] : i18n.amPm[1],\n  A: (dateObj: Date, i18n: I18nSettings): string =>\n    dateObj.getHours() < 12\n      ? i18n.amPm[0].toUpperCase()\n      : i18n.amPm[1].toUpperCase(),\n  ZZ(dateObj: Date): string {\n    const offset = dateObj.getTimezoneOffset();\n    return (\n      (offset > 0 ? \"-\" : \"+\") +\n      pad(Math.floor(Math.abs(offset) / 60) * 100 + (Math.abs(offset) % 60), 4)\n    );\n  },\n  Z(dateObj: Date): string {\n    const offset = dateObj.getTimezoneOffset();\n    return (\n      (offset > 0 ? \"-\" : \"+\") +\n      pad(Math.floor(Math.abs(offset) / 60), 2) +\n      \":\" +\n      pad(Math.abs(offset) % 60, 2)\n    );\n  }\n};\n\ntype ParseInfo = [\n  keyof DateInfo,\n  string,\n  ((v: string, i18n: I18nSettings) => number | null)?,\n  string?\n];\nconst monthParse = (v: string): number => +v - 1;\nconst emptyDigits: ParseInfo = [null, twoDigitsOptional];\nconst emptyWord: ParseInfo = [null, word];\nconst amPm: ParseInfo = [\n  \"isPm\",\n  word,\n  (v: string, i18n: I18nSettings): number | null => {\n    const val = v.toLowerCase();\n    if (val === i18n.amPm[0]) {\n      return 0;\n    } else if (val === i18n.amPm[1]) {\n      return 1;\n    }\n    return null;\n  }\n];\nconst timezoneOffset: ParseInfo = [\n  \"timezoneOffset\",\n  \"[^\\\\s]*?[\\\\+\\\\-]\\\\d\\\\d:?\\\\d\\\\d|[^\\\\s]*?Z?\",\n  (v: string): number | null => {\n    const parts = (v + \"\").match(/([+-]|\\d\\d)/gi);\n\n    if (parts) {\n      const minutes = +parts[1] * 60 + parseInt(parts[2], 10);\n      return parts[0] === \"+\" ? minutes : -minutes;\n    }\n\n    return 0;\n  }\n];\nconst parseFlags: Record<string, ParseInfo> = {\n  D: [\"day\", twoDigitsOptional],\n  DD: [\"day\", twoDigits],\n  Do: [\"day\", twoDigitsOptional + word, (v: string): number => parseInt(v, 10)],\n  M: [\"month\", twoDigitsOptional, monthParse],\n  MM: [\"month\", twoDigits, monthParse],\n  YY: [\n    \"year\",\n    twoDigits,\n    (v: string): number => {\n      const now = new Date();\n      const cent = +(\"\" + now.getFullYear()).substr(0, 2);\n      return +(\"\" + (+v > 68 ? cent - 1 : cent) + v);\n    }\n  ],\n  h: [\"hour\", twoDigitsOptional, undefined, \"isPm\"],\n  hh: [\"hour\", twoDigits, undefined, \"isPm\"],\n  H: [\"hour\", twoDigitsOptional],\n  HH: [\"hour\", twoDigits],\n  m: [\"minute\", twoDigitsOptional],\n  mm: [\"minute\", twoDigits],\n  s: [\"second\", twoDigitsOptional],\n  ss: [\"second\", twoDigits],\n  YYYY: [\"year\", fourDigits],\n  S: [\"millisecond\", \"\\\\d\", (v: string): number => +v * 100],\n  SS: [\"millisecond\", twoDigits, (v: string): number => +v * 10],\n  SSS: [\"millisecond\", threeDigits],\n  d: emptyDigits,\n  dd: emptyDigits,\n  ddd: emptyWord,\n  dddd: emptyWord,\n  MMM: [\"month\", word, monthUpdate(\"monthNamesShort\")],\n  MMMM: [\"month\", word, monthUpdate(\"monthNames\")],\n  a: amPm,\n  A: amPm,\n  ZZ: timezoneOffset,\n  Z: timezoneOffset\n};\n\n// Some common format strings\nconst globalMasks: { [key: string]: string } = {\n  default: \"ddd MMM DD YYYY HH:mm:ss\",\n  shortDate: \"M/D/YY\",\n  mediumDate: \"MMM D, YYYY\",\n  longDate: \"MMMM D, YYYY\",\n  fullDate: \"dddd, MMMM D, YYYY\",\n  isoDate: \"YYYY-MM-DD\",\n  isoDateTime: \"YYYY-MM-DDTHH:mm:ssZ\",\n  shortTime: \"HH:mm\",\n  mediumTime: \"HH:mm:ss\",\n  longTime: \"HH:mm:ss.SSS\"\n};\nconst setGlobalDateMasks = (masks: {\n  [key: string]: string;\n}): { [key: string]: string } => assign(globalMasks, masks);\n\n/***\n * Format a date\n * @method format\n * @param {Date|number} dateObj\n * @param {string} mask Format of the date, i.e. 'mm-dd-yy' or 'shortDate'\n * @returns {string} Formatted date string\n */\nconst format = (\n  dateObj: Date,\n  mask: string = globalMasks[\"default\"],\n  i18n: I18nSettingsOptional = {}\n): string => {\n  if (typeof dateObj === \"number\") {\n    dateObj = new Date(dateObj);\n  }\n\n  if (\n    Object.prototype.toString.call(dateObj) !== \"[object Date]\" ||\n    isNaN(dateObj.getTime())\n  ) {\n    throw new Error(\"Invalid Date pass to format\");\n  }\n\n  mask = globalMasks[mask] || mask;\n\n  const literals: string[] = [];\n\n  // Make literals inactive by replacing them with @@@\n  mask = mask.replace(literal, function($0, $1) {\n    literals.push($1);\n    return \"@@@\";\n  });\n\n  const combinedI18nSettings: I18nSettings = assign(\n    assign({}, globalI18n),\n    i18n\n  );\n  // Apply formatting rules\n  mask = mask.replace(token, $0 =>\n    formatFlags[$0](dateObj, combinedI18nSettings)\n  );\n  // Inline literal values back into the formatted value\n  return mask.replace(/@@@/g, () => literals.shift());\n};\n\n/**\n * Parse a date string into a Javascript Date object /\n * @method parse\n * @param {string} dateStr Date string\n * @param {string} format Date parse format\n * @param {i18n} I18nSettingsOptional Full or subset of I18N settings\n * @returns {Date|null} Returns Date object. Returns null what date string is invalid or doesn't match format\n */\nfunction parse(\n  dateStr: string,\n  format: string,\n  i18n: I18nSettingsOptional = {}\n): Date | null {\n  if (typeof format !== \"string\") {\n    throw new Error(\"Invalid format in fecha parse\");\n  }\n\n  // Check to see if the format is actually a mask\n  format = globalMasks[format] || format;\n\n  // Avoid regular expression denial of service, fail early for really long strings\n  // https://www.owasp.org/index.php/Regular_expression_Denial_of_Service_-_ReDoS\n  if (dateStr.length > 1000) {\n    return null;\n  }\n\n  // Default to the beginning of the year.\n  const today = new Date();\n  const dateInfo: DateInfo = {\n    year: today.getFullYear(),\n    month: 0,\n    day: 1,\n    hour: 0,\n    minute: 0,\n    second: 0,\n    millisecond: 0,\n    isPm: null,\n    timezoneOffset: null\n  };\n  const parseInfo: ParseInfo[] = [];\n  const literals: string[] = [];\n\n  // Replace all the literals with @@@. Hopefully a string that won't exist in the format\n  let newFormat = format.replace(literal, ($0, $1) => {\n    literals.push(regexEscape($1));\n    return \"@@@\";\n  });\n  const specifiedFields: { [field: string]: boolean } = {};\n  const requiredFields: { [field: string]: boolean } = {};\n\n  // Change every token that we find into the correct regex\n  newFormat = regexEscape(newFormat).replace(token, $0 => {\n    const info = parseFlags[$0];\n    const [field, regex, , requiredField] = info;\n\n    // Check if the person has specified the same field twice. This will lead to confusing results.\n    if (specifiedFields[field]) {\n      throw new Error(`Invalid format. ${field} specified twice in format`);\n    }\n\n    specifiedFields[field] = true;\n\n    // Check if there are any required fields. For instance, 12 hour time requires AM/PM specified\n    if (requiredField) {\n      requiredFields[requiredField] = true;\n    }\n\n    parseInfo.push(info);\n    return \"(\" + regex + \")\";\n  });\n\n  // Check all the required fields are present\n  Object.keys(requiredFields).forEach(field => {\n    if (!specifiedFields[field]) {\n      throw new Error(\n        `Invalid format. ${field} is required in specified format`\n      );\n    }\n  });\n\n  // Add back all the literals after\n  newFormat = newFormat.replace(/@@@/g, () => literals.shift());\n\n  // Check if the date string matches the format. If it doesn't return null\n  const matches = dateStr.match(new RegExp(newFormat, \"i\"));\n  if (!matches) {\n    return null;\n  }\n\n  const combinedI18nSettings: I18nSettings = assign(\n    assign({}, globalI18n),\n    i18n\n  );\n\n  // For each match, call the parser function for that date part\n  for (let i = 1; i < matches.length; i++) {\n    const [field, , parser] = parseInfo[i - 1];\n    const value = parser\n      ? parser(matches[i], combinedI18nSettings)\n      : +matches[i];\n\n    // If the parser can't make sense of the value, return null\n    if (value == null) {\n      return null;\n    }\n\n    dateInfo[field] = value;\n  }\n\n  if (dateInfo.isPm === 1 && dateInfo.hour != null && +dateInfo.hour !== 12) {\n    dateInfo.hour = +dateInfo.hour + 12;\n  } else if (dateInfo.isPm === 0 && +dateInfo.hour === 12) {\n    dateInfo.hour = 0;\n  }\n\n  let dateTZ: Date;\n  if (dateInfo.timezoneOffset == null) {\n    dateTZ = new Date(\n      dateInfo.year,\n      dateInfo.month,\n      dateInfo.day,\n      dateInfo.hour,\n      dateInfo.minute,\n      dateInfo.second,\n      dateInfo.millisecond\n    );\n    const validateFields: [\n      \"month\" | \"day\" | \"hour\" | \"minute\" | \"second\",\n      \"getMonth\" | \"getDate\" | \"getHours\" | \"getMinutes\" | \"getSeconds\"\n    ][] = [\n      [\"month\", \"getMonth\"],\n      [\"day\", \"getDate\"],\n      [\"hour\", \"getHours\"],\n      [\"minute\", \"getMinutes\"],\n      [\"second\", \"getSeconds\"]\n    ];\n    for (let i = 0, len = validateFields.length; i < len; i++) {\n      // Check to make sure the date field is within the allowed range. Javascript dates allows values\n      // outside the allowed range. If the values don't match the value was invalid\n      if (\n        specifiedFields[validateFields[i][0]] &&\n        dateInfo[validateFields[i][0]] !== dateTZ[validateFields[i][1]]()\n      ) {\n        return null;\n      }\n    }\n  } else {\n    dateTZ = new Date(\n      Date.UTC(\n        dateInfo.year,\n        dateInfo.month,\n        dateInfo.day,\n        dateInfo.hour,\n        dateInfo.minute - dateInfo.timezoneOffset,\n        dateInfo.second,\n        dateInfo.millisecond\n      )\n    );\n\n    // We can't validate dates in another timezone unfortunately. Do a basic check instead\n    if (\n      dateInfo.month > 11 ||\n      dateInfo.month < 0 ||\n      dateInfo.day > 31 ||\n      dateInfo.day < 1 ||\n      dateInfo.hour > 23 ||\n      dateInfo.hour < 0 ||\n      dateInfo.minute > 59 ||\n      dateInfo.minute < 0 ||\n      dateInfo.second > 59 ||\n      dateInfo.second < 0\n    ) {\n      return null;\n    }\n  }\n\n  // Don't allow invalid dates\n\n  return dateTZ;\n}\nexport default {\n  format,\n  parse,\n  defaultI18n,\n  setGlobalDateI18n,\n  setGlobalDateMasks\n};\nexport { format, parse, defaultI18n, setGlobalDateI18n, setGlobalDateMasks };\n","'use strict';\n\nvar toString = Object.prototype.toString;\n\n/**\n * Extract names from functions.\n *\n * @param {Function} fn The function who's name we need to extract.\n * @returns {String} The name of the function.\n * @public\n */\nmodule.exports = function name(fn) {\n  if ('string' === typeof fn.displayName && fn.constructor.name) {\n    return fn.displayName;\n  } else if ('string' === typeof fn.name && fn.name) {\n    return fn.name;\n  }\n\n  //\n  // Check to see if the constructor has a name.\n  //\n  if (\n       'object' === typeof fn\n    && fn.constructor\n    && 'string' === typeof fn.constructor.name\n  ) return fn.constructor.name;\n\n  //\n  // toString the given function and attempt to parse it out of it, or determine\n  // the class.\n  //\n  var named = fn.toString()\n    , type = toString.call(fn).slice(8, -1);\n\n  if ('Function' === type) {\n    named = named.substring(named.indexOf('(') + 1, named.indexOf(')'));\n  } else {\n    named = type;\n  }\n\n  return named || 'anonymous';\n};\n","try {\n  var util = require('util');\n  /* istanbul ignore next */\n  if (typeof util.inherits !== 'function') throw '';\n  module.exports = util.inherits;\n} catch (e) {\n  /* istanbul ignore next */\n  module.exports = require('./inherits_browser.js');\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","import * as ERROR_MSGS from '../constants/error_msgs';\r\nimport * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { getFirstArrayDuplicate } from '../utils/js';\r\nfunction targetIsConstructorFunction(target) {\r\n    return target.prototype !== undefined;\r\n}\r\nfunction _throwIfMethodParameter(parameterName) {\r\n    if (parameterName !== undefined) {\r\n        throw new Error(ERROR_MSGS.INVALID_DECORATOR_OPERATION);\r\n    }\r\n}\r\nfunction tagParameter(annotationTarget, parameterName, parameterIndex, metadata) {\r\n    _throwIfMethodParameter(parameterName);\r\n    _tagParameterOrProperty(METADATA_KEY.TAGGED, annotationTarget, parameterIndex.toString(), metadata);\r\n}\r\nfunction tagProperty(annotationTarget, propertyName, metadata) {\r\n    if (targetIsConstructorFunction(annotationTarget)) {\r\n        throw new Error(ERROR_MSGS.INVALID_DECORATOR_OPERATION);\r\n    }\r\n    _tagParameterOrProperty(METADATA_KEY.TAGGED_PROP, annotationTarget.constructor, propertyName, metadata);\r\n}\r\nfunction _ensureNoMetadataKeyDuplicates(metadata) {\r\n    var metadatas = [];\r\n    if (Array.isArray(metadata)) {\r\n        metadatas = metadata;\r\n        var duplicate = getFirstArrayDuplicate(metadatas.map(function (md) { return md.key; }));\r\n        if (duplicate !== undefined) {\r\n            throw new Error(ERROR_MSGS.DUPLICATED_METADATA + \" \" + duplicate.toString());\r\n        }\r\n    }\r\n    else {\r\n        metadatas = [metadata];\r\n    }\r\n    return metadatas;\r\n}\r\nfunction _tagParameterOrProperty(metadataKey, annotationTarget, key, metadata) {\r\n    var metadatas = _ensureNoMetadataKeyDuplicates(metadata);\r\n    var paramsOrPropertiesMetadata = {};\r\n    if (Reflect.hasOwnMetadata(metadataKey, annotationTarget)) {\r\n        paramsOrPropertiesMetadata = Reflect.getMetadata(metadataKey, annotationTarget);\r\n    }\r\n    var paramOrPropertyMetadata = paramsOrPropertiesMetadata[key];\r\n    if (paramOrPropertyMetadata === undefined) {\r\n        paramOrPropertyMetadata = [];\r\n    }\r\n    else {\r\n        var _loop_1 = function (m) {\r\n            if (metadatas.some(function (md) { return md.key === m.key; })) {\r\n                throw new Error(ERROR_MSGS.DUPLICATED_METADATA + \" \" + m.key.toString());\r\n            }\r\n        };\r\n        for (var _i = 0, paramOrPropertyMetadata_1 = paramOrPropertyMetadata; _i < paramOrPropertyMetadata_1.length; _i++) {\r\n            var m = paramOrPropertyMetadata_1[_i];\r\n            _loop_1(m);\r\n        }\r\n    }\r\n    paramOrPropertyMetadata.push.apply(paramOrPropertyMetadata, metadatas);\r\n    paramsOrPropertiesMetadata[key] = paramOrPropertyMetadata;\r\n    Reflect.defineMetadata(metadataKey, paramsOrPropertiesMetadata, annotationTarget);\r\n}\r\nfunction createTaggedDecorator(metadata) {\r\n    return function (target, targetKey, indexOrPropertyDescriptor) {\r\n        if (typeof indexOrPropertyDescriptor === 'number') {\r\n            tagParameter(target, targetKey, indexOrPropertyDescriptor, metadata);\r\n        }\r\n        else {\r\n            tagProperty(target, targetKey, metadata);\r\n        }\r\n    };\r\n}\r\nfunction _decorate(decorators, target) {\r\n    Reflect.decorate(decorators, target);\r\n}\r\nfunction _param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); };\r\n}\r\nfunction decorate(decorator, target, parameterIndexOrProperty) {\r\n    if (typeof parameterIndexOrProperty === 'number') {\r\n        _decorate([_param(parameterIndexOrProperty, decorator)], target);\r\n    }\r\n    else if (typeof parameterIndexOrProperty === 'string') {\r\n        Reflect.decorate([decorator], target, parameterIndexOrProperty);\r\n    }\r\n    else {\r\n        _decorate([decorator], target);\r\n    }\r\n}\r\nexport { decorate, tagParameter, tagProperty, createTaggedDecorator };\r\n","import * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { injectBase } from './inject_base';\r\nvar inject = injectBase(METADATA_KEY.INJECT_TAG);\r\nexport { inject };\r\n","import { UNDEFINED_INJECT_ANNOTATION } from '../constants/error_msgs';\r\nimport { Metadata } from '../planning/metadata';\r\nimport { createTaggedDecorator } from './decorator_utils';\r\nexport function injectBase(metadataKey) {\r\n    return function (serviceIdentifier) {\r\n        return function (target, targetKey, indexOrPropertyDescriptor) {\r\n            if (serviceIdentifier === undefined) {\r\n                var className = typeof target === 'function' ? target.name : target.constructor.name;\r\n                throw new Error(UNDEFINED_INJECT_ANNOTATION(className));\r\n            }\r\n            return createTaggedDecorator(new Metadata(metadataKey, serviceIdentifier))(target, targetKey, indexOrPropertyDescriptor);\r\n        };\r\n    };\r\n}\r\n","import * as ERRORS_MSGS from '../constants/error_msgs';\r\nimport * as METADATA_KEY from '../constants/metadata_keys';\r\nfunction injectable() {\r\n    return function (target) {\r\n        if (Reflect.hasOwnMetadata(METADATA_KEY.PARAM_TYPES, target)) {\r\n            throw new Error(ERRORS_MSGS.DUPLICATED_INJECTABLE_DECORATOR);\r\n        }\r\n        var types = Reflect.getMetadata(METADATA_KEY.DESIGN_PARAM_TYPES, target) || [];\r\n        Reflect.defineMetadata(METADATA_KEY.PARAM_TYPES, types, target);\r\n        return target;\r\n    };\r\n}\r\nexport { injectable };\r\n","var LazyServiceIdentifier = (function () {\r\n    function LazyServiceIdentifier(cb) {\r\n        this._cb = cb;\r\n    }\r\n    LazyServiceIdentifier.prototype.unwrap = function () {\r\n        return this._cb();\r\n    };\r\n    return LazyServiceIdentifier;\r\n}());\r\nexport { LazyServiceIdentifier };\r\n","import * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { injectBase } from './inject_base';\r\nvar multiInject = injectBase(METADATA_KEY.MULTI_INJECT_TAG);\r\nexport { multiInject };\r\n","import * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { Metadata } from '../planning/metadata';\r\nimport { createTaggedDecorator } from './decorator_utils';\r\nfunction named(name) {\r\n    return createTaggedDecorator(new Metadata(METADATA_KEY.NAMED_TAG, name));\r\n}\r\nexport { named };\r\n","import * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { Metadata } from '../planning/metadata';\r\nimport { createTaggedDecorator } from './decorator_utils';\r\nfunction optional() {\r\n    return createTaggedDecorator(new Metadata(METADATA_KEY.OPTIONAL_TAG, true));\r\n}\r\nexport { optional };\r\n","import * as ERRORS_MSGS from '../constants/error_msgs';\r\nimport * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { propertyEventDecorator } from './property_event_decorator';\r\nvar postConstruct = propertyEventDecorator(METADATA_KEY.POST_CONSTRUCT, ERRORS_MSGS.MULTIPLE_POST_CONSTRUCT_METHODS);\r\nexport { postConstruct };\r\n","import * as ERRORS_MSGS from '../constants/error_msgs';\r\nimport * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { propertyEventDecorator } from './property_event_decorator';\r\nvar preDestroy = propertyEventDecorator(METADATA_KEY.PRE_DESTROY, ERRORS_MSGS.MULTIPLE_PRE_DESTROY_METHODS);\r\nexport { preDestroy };\r\n","import { Metadata } from '../planning/metadata';\r\nfunction propertyEventDecorator(eventKey, errorMessage) {\r\n    return function () {\r\n        return function (target, propertyKey) {\r\n            var metadata = new Metadata(eventKey, propertyKey);\r\n            if (Reflect.hasOwnMetadata(eventKey, target.constructor)) {\r\n                throw new Error(errorMessage);\r\n            }\r\n            Reflect.defineMetadata(eventKey, metadata, target.constructor);\r\n        };\r\n    };\r\n}\r\nexport { propertyEventDecorator };\r\n","import { Metadata } from '../planning/metadata';\r\nimport { createTaggedDecorator } from './decorator_utils';\r\nfunction tagged(metadataKey, metadataValue) {\r\n    return createTaggedDecorator(new Metadata(metadataKey, metadataValue));\r\n}\r\nexport { tagged };\r\n","import * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { Metadata } from '../planning/metadata';\r\nimport { tagParameter } from './decorator_utils';\r\nfunction targetName(name) {\r\n    return function (target, targetKey, index) {\r\n        var metadata = new Metadata(METADATA_KEY.NAME_TAG, name);\r\n        tagParameter(target, targetKey, index, metadata);\r\n    };\r\n}\r\nexport { targetName };\r\n","import * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { Metadata } from '../planning/metadata';\r\nimport { tagParameter } from './decorator_utils';\r\nfunction unmanaged() {\r\n    return function (target, targetKey, index) {\r\n        var metadata = new Metadata(METADATA_KEY.UNMANAGED_TAG, true);\r\n        tagParameter(target, targetKey, index, metadata);\r\n    };\r\n}\r\nexport { unmanaged };\r\n","import { BindingScopeEnum, BindingTypeEnum } from '../constants/literal_types';\r\nimport { id } from '../utils/id';\r\nvar Binding = (function () {\r\n    function Binding(serviceIdentifier, scope) {\r\n        this.id = id();\r\n        this.activated = false;\r\n        this.serviceIdentifier = serviceIdentifier;\r\n        this.scope = scope;\r\n        this.type = BindingTypeEnum.Invalid;\r\n        this.constraint = function (request) { return true; };\r\n        this.implementationType = null;\r\n        this.cache = null;\r\n        this.factory = null;\r\n        this.provider = null;\r\n        this.onActivation = null;\r\n        this.onDeactivation = null;\r\n        this.dynamicValue = null;\r\n    }\r\n    Binding.prototype.clone = function () {\r\n        var clone = new Binding(this.serviceIdentifier, this.scope);\r\n        clone.activated = (clone.scope === BindingScopeEnum.Singleton) ? this.activated : false;\r\n        clone.implementationType = this.implementationType;\r\n        clone.dynamicValue = this.dynamicValue;\r\n        clone.scope = this.scope;\r\n        clone.type = this.type;\r\n        clone.factory = this.factory;\r\n        clone.provider = this.provider;\r\n        clone.constraint = this.constraint;\r\n        clone.onActivation = this.onActivation;\r\n        clone.onDeactivation = this.onDeactivation;\r\n        clone.cache = this.cache;\r\n        return clone;\r\n    };\r\n    return Binding;\r\n}());\r\nexport { Binding };\r\n","export var BindingCount = {\r\n    MultipleBindingsAvailable: 2,\r\n    NoBindingsAvailable: 0,\r\n    OnlyOneBindingAvailable: 1\r\n};\r\n","export var DUPLICATED_INJECTABLE_DECORATOR = 'Cannot apply @injectable decorator multiple times.';\r\nexport var DUPLICATED_METADATA = 'Metadata key was used more than once in a parameter:';\r\nexport var NULL_ARGUMENT = 'NULL argument';\r\nexport var KEY_NOT_FOUND = 'Key Not Found';\r\nexport var AMBIGUOUS_MATCH = 'Ambiguous match found for serviceIdentifier:';\r\nexport var CANNOT_UNBIND = 'Could not unbind serviceIdentifier:';\r\nexport var NOT_REGISTERED = 'No matching bindings found for serviceIdentifier:';\r\nexport var MISSING_INJECTABLE_ANNOTATION = 'Missing required @injectable annotation in:';\r\nexport var MISSING_INJECT_ANNOTATION = 'Missing required @inject or @multiInject annotation in:';\r\nexport var UNDEFINED_INJECT_ANNOTATION = function (name) {\r\n    return \"@inject called with undefined this could mean that the class \" + name + \" has \" +\r\n        'a circular dependency problem. You can use a LazyServiceIdentifier to  ' +\r\n        'overcome this limitation.';\r\n};\r\nexport var CIRCULAR_DEPENDENCY = 'Circular dependency found:';\r\nexport var NOT_IMPLEMENTED = 'Sorry, this feature is not fully implemented yet.';\r\nexport var INVALID_BINDING_TYPE = 'Invalid binding type:';\r\nexport var NO_MORE_SNAPSHOTS_AVAILABLE = 'No snapshot available to restore.';\r\nexport var INVALID_MIDDLEWARE_RETURN = 'Invalid return type in middleware. Middleware must return!';\r\nexport var INVALID_FUNCTION_BINDING = 'Value provided to function binding must be a function!';\r\nexport var LAZY_IN_SYNC = function (key) { return \"You are attempting to construct '\" + key + \"' in a synchronous way\\n but it has asynchronous dependencies.\"; };\r\nexport var INVALID_TO_SELF_VALUE = 'The toSelf function can only be applied when a constructor is ' +\r\n    'used as service identifier';\r\nexport var INVALID_DECORATOR_OPERATION = 'The @inject @multiInject @tagged and @named decorators ' +\r\n    'must be applied to the parameters of a class constructor or a class property.';\r\nexport var ARGUMENTS_LENGTH_MISMATCH = function () {\r\n    var values = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        values[_i] = arguments[_i];\r\n    }\r\n    return 'The number of constructor arguments in the derived class ' +\r\n        (values[0] + \" must be >= than the number of constructor arguments of its base class.\");\r\n};\r\nexport var CONTAINER_OPTIONS_MUST_BE_AN_OBJECT = 'Invalid Container constructor argument. Container options ' +\r\n    'must be an object.';\r\nexport var CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE = 'Invalid Container option. Default scope must ' +\r\n    'be a string (\"singleton\" or \"transient\").';\r\nexport var CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE = 'Invalid Container option. Auto bind injectable must ' +\r\n    'be a boolean';\r\nexport var CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK = 'Invalid Container option. Skip base check must ' +\r\n    'be a boolean';\r\nexport var MULTIPLE_PRE_DESTROY_METHODS = 'Cannot apply @preDestroy decorator multiple times in the same class';\r\nexport var MULTIPLE_POST_CONSTRUCT_METHODS = 'Cannot apply @postConstruct decorator multiple times in the same class';\r\nexport var ASYNC_UNBIND_REQUIRED = 'Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)';\r\nexport var POST_CONSTRUCT_ERROR = function (clazz, errorMessage) { return \"@postConstruct error in class \" + clazz + \": \" + errorMessage; };\r\nexport var PRE_DESTROY_ERROR = function (clazz, errorMessage) { return \"@preDestroy error in class \" + clazz + \": \" + errorMessage; };\r\nexport var ON_DEACTIVATION_ERROR = function (clazz, errorMessage) { return \"onDeactivation() error in class \" + clazz + \": \" + errorMessage; };\r\nexport var CIRCULAR_DEPENDENCY_IN_FACTORY = function (factoryType, serviceIdentifier) {\r\n    return \"It looks like there is a circular dependency in one of the '\" + factoryType + \"' bindings. Please investigate bindings with \" +\r\n        (\"service identifier '\" + serviceIdentifier + \"'.\");\r\n};\r\nexport var STACK_OVERFLOW = 'Maximum call stack size exceeded';\r\n","var BindingScopeEnum = {\r\n    Request: 'Request',\r\n    Singleton: 'Singleton',\r\n    Transient: 'Transient'\r\n};\r\nvar BindingTypeEnum = {\r\n    ConstantValue: 'ConstantValue',\r\n    Constructor: 'Constructor',\r\n    DynamicValue: 'DynamicValue',\r\n    Factory: 'Factory',\r\n    Function: 'Function',\r\n    Instance: 'Instance',\r\n    Invalid: 'Invalid',\r\n    Provider: 'Provider'\r\n};\r\nvar TargetTypeEnum = {\r\n    ClassProperty: 'ClassProperty',\r\n    ConstructorArgument: 'ConstructorArgument',\r\n    Variable: 'Variable'\r\n};\r\nexport { BindingScopeEnum, BindingTypeEnum, TargetTypeEnum };\r\n","export var NAMED_TAG = 'named';\r\nexport var NAME_TAG = 'name';\r\nexport var UNMANAGED_TAG = 'unmanaged';\r\nexport var OPTIONAL_TAG = 'optional';\r\nexport var INJECT_TAG = 'inject';\r\nexport var MULTI_INJECT_TAG = 'multi_inject';\r\nexport var TAGGED = 'inversify:tagged';\r\nexport var TAGGED_PROP = 'inversify:tagged_props';\r\nexport var PARAM_TYPES = 'inversify:paramtypes';\r\nexport var DESIGN_PARAM_TYPES = 'design:paramtypes';\r\nexport var POST_CONSTRUCT = 'post_construct';\r\nexport var PRE_DESTROY = 'pre_destroy';\r\nfunction getNonCustomTagKeys() {\r\n    return [\r\n        INJECT_TAG,\r\n        MULTI_INJECT_TAG,\r\n        NAME_TAG,\r\n        UNMANAGED_TAG,\r\n        NAMED_TAG,\r\n        OPTIONAL_TAG,\r\n    ];\r\n}\r\nexport var NON_CUSTOM_TAG_KEYS = getNonCustomTagKeys();\r\n","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nimport { Binding } from '../bindings/binding';\r\nimport * as ERROR_MSGS from '../constants/error_msgs';\r\nimport { BindingScopeEnum, TargetTypeEnum } from '../constants/literal_types';\r\nimport * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { MetadataReader } from '../planning/metadata_reader';\r\nimport { createMockRequest, getBindingDictionary, plan } from '../planning/planner';\r\nimport { resolve } from '../resolution/resolver';\r\nimport { BindingToSyntax } from '../syntax/binding_to_syntax';\r\nimport { isPromise, isPromiseOrContainsPromise } from '../utils/async';\r\nimport { id } from '../utils/id';\r\nimport { getServiceIdentifierAsString } from '../utils/serialization';\r\nimport { ContainerSnapshot } from './container_snapshot';\r\nimport { Lookup } from './lookup';\r\nimport { ModuleActivationStore } from './module_activation_store';\r\nvar Container = (function () {\r\n    function Container(containerOptions) {\r\n        var options = containerOptions || {};\r\n        if (typeof options !== 'object') {\r\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);\r\n        }\r\n        if (options.defaultScope === undefined) {\r\n            options.defaultScope = BindingScopeEnum.Transient;\r\n        }\r\n        else if (options.defaultScope !== BindingScopeEnum.Singleton &&\r\n            options.defaultScope !== BindingScopeEnum.Transient &&\r\n            options.defaultScope !== BindingScopeEnum.Request) {\r\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);\r\n        }\r\n        if (options.autoBindInjectable === undefined) {\r\n            options.autoBindInjectable = false;\r\n        }\r\n        else if (typeof options.autoBindInjectable !== 'boolean') {\r\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);\r\n        }\r\n        if (options.skipBaseClassChecks === undefined) {\r\n            options.skipBaseClassChecks = false;\r\n        }\r\n        else if (typeof options.skipBaseClassChecks !== 'boolean') {\r\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);\r\n        }\r\n        this.options = {\r\n            autoBindInjectable: options.autoBindInjectable,\r\n            defaultScope: options.defaultScope,\r\n            skipBaseClassChecks: options.skipBaseClassChecks\r\n        };\r\n        this.id = id();\r\n        this._bindingDictionary = new Lookup();\r\n        this._snapshots = [];\r\n        this._middleware = null;\r\n        this._activations = new Lookup();\r\n        this._deactivations = new Lookup();\r\n        this.parent = null;\r\n        this._metadataReader = new MetadataReader();\r\n        this._moduleActivationStore = new ModuleActivationStore();\r\n    }\r\n    Container.merge = function (container1, container2) {\r\n        var containers = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            containers[_i - 2] = arguments[_i];\r\n        }\r\n        var container = new Container();\r\n        var targetContainers = __spreadArray([container1, container2], containers, true).map(function (targetContainer) { return getBindingDictionary(targetContainer); });\r\n        var bindingDictionary = getBindingDictionary(container);\r\n        function copyDictionary(origin, destination) {\r\n            origin.traverse(function (_key, value) {\r\n                value.forEach(function (binding) {\r\n                    destination.add(binding.serviceIdentifier, binding.clone());\r\n                });\r\n            });\r\n        }\r\n        targetContainers.forEach(function (targetBindingDictionary) {\r\n            copyDictionary(targetBindingDictionary, bindingDictionary);\r\n        });\r\n        return container;\r\n    };\r\n    Container.prototype.load = function () {\r\n        var modules = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            modules[_i] = arguments[_i];\r\n        }\r\n        var getHelpers = this._getContainerModuleHelpersFactory();\r\n        for (var _a = 0, modules_1 = modules; _a < modules_1.length; _a++) {\r\n            var currentModule = modules_1[_a];\r\n            var containerModuleHelpers = getHelpers(currentModule.id);\r\n            currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction, containerModuleHelpers.unbindAsyncFunction, containerModuleHelpers.onActivationFunction, containerModuleHelpers.onDeactivationFunction);\r\n        }\r\n    };\r\n    Container.prototype.loadAsync = function () {\r\n        var modules = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            modules[_i] = arguments[_i];\r\n        }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var getHelpers, _a, modules_2, currentModule, containerModuleHelpers;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        getHelpers = this._getContainerModuleHelpersFactory();\r\n                        _a = 0, modules_2 = modules;\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        if (!(_a < modules_2.length)) return [3, 4];\r\n                        currentModule = modules_2[_a];\r\n                        containerModuleHelpers = getHelpers(currentModule.id);\r\n                        return [4, currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction, containerModuleHelpers.unbindAsyncFunction, containerModuleHelpers.onActivationFunction, containerModuleHelpers.onDeactivationFunction)];\r\n                    case 2:\r\n                        _b.sent();\r\n                        _b.label = 3;\r\n                    case 3:\r\n                        _a++;\r\n                        return [3, 1];\r\n                    case 4: return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Container.prototype.unload = function () {\r\n        var _this = this;\r\n        var modules = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            modules[_i] = arguments[_i];\r\n        }\r\n        modules.forEach(function (module) {\r\n            var deactivations = _this._removeModuleBindings(module.id);\r\n            _this._deactivateSingletons(deactivations);\r\n            _this._removeModuleHandlers(module.id);\r\n        });\r\n    };\r\n    Container.prototype.unloadAsync = function () {\r\n        var modules = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            modules[_i] = arguments[_i];\r\n        }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, modules_3, module_1, deactivations;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = 0, modules_3 = modules;\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        if (!(_a < modules_3.length)) return [3, 4];\r\n                        module_1 = modules_3[_a];\r\n                        deactivations = this._removeModuleBindings(module_1.id);\r\n                        return [4, this._deactivateSingletonsAsync(deactivations)];\r\n                    case 2:\r\n                        _b.sent();\r\n                        this._removeModuleHandlers(module_1.id);\r\n                        _b.label = 3;\r\n                    case 3:\r\n                        _a++;\r\n                        return [3, 1];\r\n                    case 4: return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Container.prototype.bind = function (serviceIdentifier) {\r\n        var scope = this.options.defaultScope || BindingScopeEnum.Transient;\r\n        var binding = new Binding(serviceIdentifier, scope);\r\n        this._bindingDictionary.add(serviceIdentifier, binding);\r\n        return new BindingToSyntax(binding);\r\n    };\r\n    Container.prototype.rebind = function (serviceIdentifier) {\r\n        this.unbind(serviceIdentifier);\r\n        return this.bind(serviceIdentifier);\r\n    };\r\n    Container.prototype.rebindAsync = function (serviceIdentifier) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4, this.unbindAsync(serviceIdentifier)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2, this.bind(serviceIdentifier)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Container.prototype.unbind = function (serviceIdentifier) {\r\n        if (this._bindingDictionary.hasKey(serviceIdentifier)) {\r\n            var bindings = this._bindingDictionary.get(serviceIdentifier);\r\n            this._deactivateSingletons(bindings);\r\n        }\r\n        this._removeServiceFromDictionary(serviceIdentifier);\r\n    };\r\n    Container.prototype.unbindAsync = function (serviceIdentifier) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var bindings;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this._bindingDictionary.hasKey(serviceIdentifier)) return [3, 2];\r\n                        bindings = this._bindingDictionary.get(serviceIdentifier);\r\n                        return [4, this._deactivateSingletonsAsync(bindings)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        this._removeServiceFromDictionary(serviceIdentifier);\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Container.prototype.unbindAll = function () {\r\n        var _this = this;\r\n        this._bindingDictionary.traverse(function (_key, value) {\r\n            _this._deactivateSingletons(value);\r\n        });\r\n        this._bindingDictionary = new Lookup();\r\n    };\r\n    Container.prototype.unbindAllAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var promises;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        promises = [];\r\n                        this._bindingDictionary.traverse(function (_key, value) {\r\n                            promises.push(_this._deactivateSingletonsAsync(value));\r\n                        });\r\n                        return [4, Promise.all(promises)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        this._bindingDictionary = new Lookup();\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Container.prototype.onActivation = function (serviceIdentifier, onActivation) {\r\n        this._activations.add(serviceIdentifier, onActivation);\r\n    };\r\n    Container.prototype.onDeactivation = function (serviceIdentifier, onDeactivation) {\r\n        this._deactivations.add(serviceIdentifier, onDeactivation);\r\n    };\r\n    Container.prototype.isBound = function (serviceIdentifier) {\r\n        var bound = this._bindingDictionary.hasKey(serviceIdentifier);\r\n        if (!bound && this.parent) {\r\n            bound = this.parent.isBound(serviceIdentifier);\r\n        }\r\n        return bound;\r\n    };\r\n    Container.prototype.isCurrentBound = function (serviceIdentifier) {\r\n        return this._bindingDictionary.hasKey(serviceIdentifier);\r\n    };\r\n    Container.prototype.isBoundNamed = function (serviceIdentifier, named) {\r\n        return this.isBoundTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\r\n    };\r\n    Container.prototype.isBoundTagged = function (serviceIdentifier, key, value) {\r\n        var bound = false;\r\n        if (this._bindingDictionary.hasKey(serviceIdentifier)) {\r\n            var bindings = this._bindingDictionary.get(serviceIdentifier);\r\n            var request_1 = createMockRequest(this, serviceIdentifier, key, value);\r\n            bound = bindings.some(function (b) { return b.constraint(request_1); });\r\n        }\r\n        if (!bound && this.parent) {\r\n            bound = this.parent.isBoundTagged(serviceIdentifier, key, value);\r\n        }\r\n        return bound;\r\n    };\r\n    Container.prototype.snapshot = function () {\r\n        this._snapshots.push(ContainerSnapshot.of(this._bindingDictionary.clone(), this._middleware, this._activations.clone(), this._deactivations.clone(), this._moduleActivationStore.clone()));\r\n    };\r\n    Container.prototype.restore = function () {\r\n        var snapshot = this._snapshots.pop();\r\n        if (snapshot === undefined) {\r\n            throw new Error(ERROR_MSGS.NO_MORE_SNAPSHOTS_AVAILABLE);\r\n        }\r\n        this._bindingDictionary = snapshot.bindings;\r\n        this._activations = snapshot.activations;\r\n        this._deactivations = snapshot.deactivations;\r\n        this._middleware = snapshot.middleware;\r\n        this._moduleActivationStore = snapshot.moduleActivationStore;\r\n    };\r\n    Container.prototype.createChild = function (containerOptions) {\r\n        var child = new Container(containerOptions || this.options);\r\n        child.parent = this;\r\n        return child;\r\n    };\r\n    Container.prototype.applyMiddleware = function () {\r\n        var middlewares = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            middlewares[_i] = arguments[_i];\r\n        }\r\n        var initial = (this._middleware) ? this._middleware : this._planAndResolve();\r\n        this._middleware = middlewares.reduce(function (prev, curr) { return curr(prev); }, initial);\r\n    };\r\n    Container.prototype.applyCustomMetadataReader = function (metadataReader) {\r\n        this._metadataReader = metadataReader;\r\n    };\r\n    Container.prototype.get = function (serviceIdentifier) {\r\n        var getArgs = this._getNotAllArgs(serviceIdentifier, false);\r\n        return this._getButThrowIfAsync(getArgs);\r\n    };\r\n    Container.prototype.getAsync = function (serviceIdentifier) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var getArgs;\r\n            return __generator(this, function (_a) {\r\n                getArgs = this._getNotAllArgs(serviceIdentifier, false);\r\n                return [2, this._get(getArgs)];\r\n            });\r\n        });\r\n    };\r\n    Container.prototype.getTagged = function (serviceIdentifier, key, value) {\r\n        var getArgs = this._getNotAllArgs(serviceIdentifier, false, key, value);\r\n        return this._getButThrowIfAsync(getArgs);\r\n    };\r\n    Container.prototype.getTaggedAsync = function (serviceIdentifier, key, value) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var getArgs;\r\n            return __generator(this, function (_a) {\r\n                getArgs = this._getNotAllArgs(serviceIdentifier, false, key, value);\r\n                return [2, this._get(getArgs)];\r\n            });\r\n        });\r\n    };\r\n    Container.prototype.getNamed = function (serviceIdentifier, named) {\r\n        return this.getTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\r\n    };\r\n    Container.prototype.getNamedAsync = function (serviceIdentifier, named) {\r\n        return this.getTaggedAsync(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\r\n    };\r\n    Container.prototype.getAll = function (serviceIdentifier) {\r\n        var getArgs = this._getAllArgs(serviceIdentifier);\r\n        return this._getButThrowIfAsync(getArgs);\r\n    };\r\n    Container.prototype.getAllAsync = function (serviceIdentifier) {\r\n        var getArgs = this._getAllArgs(serviceIdentifier);\r\n        return this._getAll(getArgs);\r\n    };\r\n    Container.prototype.getAllTagged = function (serviceIdentifier, key, value) {\r\n        var getArgs = this._getNotAllArgs(serviceIdentifier, true, key, value);\r\n        return this._getButThrowIfAsync(getArgs);\r\n    };\r\n    Container.prototype.getAllTaggedAsync = function (serviceIdentifier, key, value) {\r\n        var getArgs = this._getNotAllArgs(serviceIdentifier, true, key, value);\r\n        return this._getAll(getArgs);\r\n    };\r\n    Container.prototype.getAllNamed = function (serviceIdentifier, named) {\r\n        return this.getAllTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\r\n    };\r\n    Container.prototype.getAllNamedAsync = function (serviceIdentifier, named) {\r\n        return this.getAllTaggedAsync(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\r\n    };\r\n    Container.prototype.resolve = function (constructorFunction) {\r\n        var isBound = this.isBound(constructorFunction);\r\n        if (!isBound) {\r\n            this.bind(constructorFunction).toSelf();\r\n        }\r\n        var resolved = this.get(constructorFunction);\r\n        if (!isBound) {\r\n            this.unbind(constructorFunction);\r\n        }\r\n        return resolved;\r\n    };\r\n    Container.prototype._preDestroy = function (constructor, instance) {\r\n        var _a, _b;\r\n        if (Reflect.hasMetadata(METADATA_KEY.PRE_DESTROY, constructor)) {\r\n            var data = Reflect.getMetadata(METADATA_KEY.PRE_DESTROY, constructor);\r\n            return (_b = (_a = instance)[data.value]) === null || _b === void 0 ? void 0 : _b.call(_a);\r\n        }\r\n    };\r\n    Container.prototype._removeModuleHandlers = function (moduleId) {\r\n        var moduleActivationsHandlers = this._moduleActivationStore.remove(moduleId);\r\n        this._activations.removeIntersection(moduleActivationsHandlers.onActivations);\r\n        this._deactivations.removeIntersection(moduleActivationsHandlers.onDeactivations);\r\n    };\r\n    Container.prototype._removeModuleBindings = function (moduleId) {\r\n        return this._bindingDictionary.removeByCondition(function (binding) { return binding.moduleId === moduleId; });\r\n    };\r\n    Container.prototype._deactivate = function (binding, instance) {\r\n        var _this = this;\r\n        var constructor = Object.getPrototypeOf(instance).constructor;\r\n        try {\r\n            if (this._deactivations.hasKey(binding.serviceIdentifier)) {\r\n                var result = this._deactivateContainer(instance, this._deactivations.get(binding.serviceIdentifier).values());\r\n                if (isPromise(result)) {\r\n                    return this._handleDeactivationError(result.then(function () { return _this._propagateContainerDeactivationThenBindingAndPreDestroyAsync(binding, instance, constructor); }), constructor);\r\n                }\r\n            }\r\n            var propagateDeactivationResult = this._propagateContainerDeactivationThenBindingAndPreDestroy(binding, instance, constructor);\r\n            if (isPromise(propagateDeactivationResult)) {\r\n                return this._handleDeactivationError(propagateDeactivationResult, constructor);\r\n            }\r\n        }\r\n        catch (ex) {\r\n            if (ex instanceof Error) {\r\n                throw new Error(ERROR_MSGS.ON_DEACTIVATION_ERROR(constructor.name, ex.message));\r\n            }\r\n        }\r\n    };\r\n    Container.prototype._handleDeactivationError = function (asyncResult, constructor) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var ex_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 2, , 3]);\r\n                        return [4, asyncResult];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [3, 3];\r\n                    case 2:\r\n                        ex_1 = _a.sent();\r\n                        if (ex_1 instanceof Error) {\r\n                            throw new Error(ERROR_MSGS.ON_DEACTIVATION_ERROR(constructor.name, ex_1.message));\r\n                        }\r\n                        return [3, 3];\r\n                    case 3: return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Container.prototype._deactivateContainer = function (instance, deactivationsIterator) {\r\n        var _this = this;\r\n        var deactivation = deactivationsIterator.next();\r\n        while (deactivation.value) {\r\n            var result = deactivation.value(instance);\r\n            if (isPromise(result)) {\r\n                return result.then(function () {\r\n                    return _this._deactivateContainerAsync(instance, deactivationsIterator);\r\n                });\r\n            }\r\n            deactivation = deactivationsIterator.next();\r\n        }\r\n    };\r\n    Container.prototype._deactivateContainerAsync = function (instance, deactivationsIterator) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var deactivation;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        deactivation = deactivationsIterator.next();\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        if (!deactivation.value) return [3, 3];\r\n                        return [4, deactivation.value(instance)];\r\n                    case 2:\r\n                        _a.sent();\r\n                        deactivation = deactivationsIterator.next();\r\n                        return [3, 1];\r\n                    case 3: return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Container.prototype._getContainerModuleHelpersFactory = function () {\r\n        var _this = this;\r\n        var setModuleId = function (bindingToSyntax, moduleId) {\r\n            bindingToSyntax._binding.moduleId = moduleId;\r\n        };\r\n        var getBindFunction = function (moduleId) {\r\n            return function (serviceIdentifier) {\r\n                var bindingToSyntax = _this.bind(serviceIdentifier);\r\n                setModuleId(bindingToSyntax, moduleId);\r\n                return bindingToSyntax;\r\n            };\r\n        };\r\n        var getUnbindFunction = function () {\r\n            return function (serviceIdentifier) {\r\n                return _this.unbind(serviceIdentifier);\r\n            };\r\n        };\r\n        var getUnbindAsyncFunction = function () {\r\n            return function (serviceIdentifier) {\r\n                return _this.unbindAsync(serviceIdentifier);\r\n            };\r\n        };\r\n        var getIsboundFunction = function () {\r\n            return function (serviceIdentifier) {\r\n                return _this.isBound(serviceIdentifier);\r\n            };\r\n        };\r\n        var getRebindFunction = function (moduleId) {\r\n            return function (serviceIdentifier) {\r\n                var bindingToSyntax = _this.rebind(serviceIdentifier);\r\n                setModuleId(bindingToSyntax, moduleId);\r\n                return bindingToSyntax;\r\n            };\r\n        };\r\n        var getOnActivationFunction = function (moduleId) {\r\n            return function (serviceIdentifier, onActivation) {\r\n                _this._moduleActivationStore.addActivation(moduleId, serviceIdentifier, onActivation);\r\n                _this.onActivation(serviceIdentifier, onActivation);\r\n            };\r\n        };\r\n        var getOnDeactivationFunction = function (moduleId) {\r\n            return function (serviceIdentifier, onDeactivation) {\r\n                _this._moduleActivationStore.addDeactivation(moduleId, serviceIdentifier, onDeactivation);\r\n                _this.onDeactivation(serviceIdentifier, onDeactivation);\r\n            };\r\n        };\r\n        return function (mId) { return ({\r\n            bindFunction: getBindFunction(mId),\r\n            isboundFunction: getIsboundFunction(),\r\n            onActivationFunction: getOnActivationFunction(mId),\r\n            onDeactivationFunction: getOnDeactivationFunction(mId),\r\n            rebindFunction: getRebindFunction(mId),\r\n            unbindFunction: getUnbindFunction(),\r\n            unbindAsyncFunction: getUnbindAsyncFunction()\r\n        }); };\r\n    };\r\n    Container.prototype._getAll = function (getArgs) {\r\n        return Promise.all(this._get(getArgs));\r\n    };\r\n    Container.prototype._get = function (getArgs) {\r\n        var planAndResolveArgs = __assign(__assign({}, getArgs), { contextInterceptor: function (context) { return context; }, targetType: TargetTypeEnum.Variable });\r\n        if (this._middleware) {\r\n            var middlewareResult = this._middleware(planAndResolveArgs);\r\n            if (middlewareResult === undefined || middlewareResult === null) {\r\n                throw new Error(ERROR_MSGS.INVALID_MIDDLEWARE_RETURN);\r\n            }\r\n            return middlewareResult;\r\n        }\r\n        return this._planAndResolve()(planAndResolveArgs);\r\n    };\r\n    Container.prototype._getButThrowIfAsync = function (getArgs) {\r\n        var result = this._get(getArgs);\r\n        if (isPromiseOrContainsPromise(result)) {\r\n            throw new Error(ERROR_MSGS.LAZY_IN_SYNC(getArgs.serviceIdentifier));\r\n        }\r\n        return result;\r\n    };\r\n    Container.prototype._getAllArgs = function (serviceIdentifier) {\r\n        var getAllArgs = {\r\n            avoidConstraints: true,\r\n            isMultiInject: true,\r\n            serviceIdentifier: serviceIdentifier,\r\n        };\r\n        return getAllArgs;\r\n    };\r\n    Container.prototype._getNotAllArgs = function (serviceIdentifier, isMultiInject, key, value) {\r\n        var getNotAllArgs = {\r\n            avoidConstraints: false,\r\n            isMultiInject: isMultiInject,\r\n            serviceIdentifier: serviceIdentifier,\r\n            key: key,\r\n            value: value,\r\n        };\r\n        return getNotAllArgs;\r\n    };\r\n    Container.prototype._planAndResolve = function () {\r\n        var _this = this;\r\n        return function (args) {\r\n            var context = plan(_this._metadataReader, _this, args.isMultiInject, args.targetType, args.serviceIdentifier, args.key, args.value, args.avoidConstraints);\r\n            context = args.contextInterceptor(context);\r\n            var result = resolve(context);\r\n            return result;\r\n        };\r\n    };\r\n    Container.prototype._deactivateIfSingleton = function (binding) {\r\n        var _this = this;\r\n        if (!binding.activated) {\r\n            return;\r\n        }\r\n        if (isPromise(binding.cache)) {\r\n            return binding.cache.then(function (resolved) { return _this._deactivate(binding, resolved); });\r\n        }\r\n        return this._deactivate(binding, binding.cache);\r\n    };\r\n    Container.prototype._deactivateSingletons = function (bindings) {\r\n        for (var _i = 0, bindings_1 = bindings; _i < bindings_1.length; _i++) {\r\n            var binding = bindings_1[_i];\r\n            var result = this._deactivateIfSingleton(binding);\r\n            if (isPromise(result)) {\r\n                throw new Error(ERROR_MSGS.ASYNC_UNBIND_REQUIRED);\r\n            }\r\n        }\r\n    };\r\n    Container.prototype._deactivateSingletonsAsync = function (bindings) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4, Promise.all(bindings.map(function (b) { return _this._deactivateIfSingleton(b); }))];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Container.prototype._propagateContainerDeactivationThenBindingAndPreDestroy = function (binding, instance, constructor) {\r\n        if (this.parent) {\r\n            return this._deactivate.bind(this.parent)(binding, instance);\r\n        }\r\n        else {\r\n            return this._bindingDeactivationAndPreDestroy(binding, instance, constructor);\r\n        }\r\n    };\r\n    Container.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync = function (binding, instance, constructor) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this.parent) return [3, 2];\r\n                        return [4, this._deactivate.bind(this.parent)(binding, instance)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [3, 4];\r\n                    case 2: return [4, this._bindingDeactivationAndPreDestroyAsync(binding, instance, constructor)];\r\n                    case 3:\r\n                        _a.sent();\r\n                        _a.label = 4;\r\n                    case 4: return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Container.prototype._removeServiceFromDictionary = function (serviceIdentifier) {\r\n        try {\r\n            this._bindingDictionary.remove(serviceIdentifier);\r\n        }\r\n        catch (e) {\r\n            throw new Error(ERROR_MSGS.CANNOT_UNBIND + \" \" + getServiceIdentifierAsString(serviceIdentifier));\r\n        }\r\n    };\r\n    Container.prototype._bindingDeactivationAndPreDestroy = function (binding, instance, constructor) {\r\n        var _this = this;\r\n        if (typeof binding.onDeactivation === 'function') {\r\n            var result = binding.onDeactivation(instance);\r\n            if (isPromise(result)) {\r\n                return result.then(function () { return _this._preDestroy(constructor, instance); });\r\n            }\r\n        }\r\n        return this._preDestroy(constructor, instance);\r\n    };\r\n    Container.prototype._bindingDeactivationAndPreDestroyAsync = function (binding, instance, constructor) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!(typeof binding.onDeactivation === 'function')) return [3, 2];\r\n                        return [4, binding.onDeactivation(instance)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2: return [4, this._preDestroy(constructor, instance)];\r\n                    case 3:\r\n                        _a.sent();\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return Container;\r\n}());\r\nexport { Container };\r\n","import { id } from '../utils/id';\r\nvar ContainerModule = (function () {\r\n    function ContainerModule(registry) {\r\n        this.id = id();\r\n        this.registry = registry;\r\n    }\r\n    return ContainerModule;\r\n}());\r\nexport { ContainerModule };\r\nvar AsyncContainerModule = (function () {\r\n    function AsyncContainerModule(registry) {\r\n        this.id = id();\r\n        this.registry = registry;\r\n    }\r\n    return AsyncContainerModule;\r\n}());\r\nexport { AsyncContainerModule };\r\n","var ContainerSnapshot = (function () {\r\n    function ContainerSnapshot() {\r\n    }\r\n    ContainerSnapshot.of = function (bindings, middleware, activations, deactivations, moduleActivationStore) {\r\n        var snapshot = new ContainerSnapshot();\r\n        snapshot.bindings = bindings;\r\n        snapshot.middleware = middleware;\r\n        snapshot.deactivations = deactivations;\r\n        snapshot.activations = activations;\r\n        snapshot.moduleActivationStore = moduleActivationStore;\r\n        return snapshot;\r\n    };\r\n    return ContainerSnapshot;\r\n}());\r\nexport { ContainerSnapshot };\r\n","import * as ERROR_MSGS from '../constants/error_msgs';\r\nimport { isClonable } from '../utils/clonable';\r\nvar Lookup = (function () {\r\n    function Lookup() {\r\n        this._map = new Map();\r\n    }\r\n    Lookup.prototype.getMap = function () {\r\n        return this._map;\r\n    };\r\n    Lookup.prototype.add = function (serviceIdentifier, value) {\r\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\r\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\r\n        }\r\n        if (value === null || value === undefined) {\r\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\r\n        }\r\n        var entry = this._map.get(serviceIdentifier);\r\n        if (entry !== undefined) {\r\n            entry.push(value);\r\n        }\r\n        else {\r\n            this._map.set(serviceIdentifier, [value]);\r\n        }\r\n    };\r\n    Lookup.prototype.get = function (serviceIdentifier) {\r\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\r\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\r\n        }\r\n        var entry = this._map.get(serviceIdentifier);\r\n        if (entry !== undefined) {\r\n            return entry;\r\n        }\r\n        else {\r\n            throw new Error(ERROR_MSGS.KEY_NOT_FOUND);\r\n        }\r\n    };\r\n    Lookup.prototype.remove = function (serviceIdentifier) {\r\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\r\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\r\n        }\r\n        if (!this._map.delete(serviceIdentifier)) {\r\n            throw new Error(ERROR_MSGS.KEY_NOT_FOUND);\r\n        }\r\n    };\r\n    Lookup.prototype.removeIntersection = function (lookup) {\r\n        var _this = this;\r\n        this.traverse(function (serviceIdentifier, value) {\r\n            var lookupActivations = lookup.hasKey(serviceIdentifier) ? lookup.get(serviceIdentifier) : undefined;\r\n            if (lookupActivations !== undefined) {\r\n                var filteredValues = value.filter(function (lookupValue) {\r\n                    return !lookupActivations.some(function (moduleActivation) { return lookupValue === moduleActivation; });\r\n                });\r\n                _this._setValue(serviceIdentifier, filteredValues);\r\n            }\r\n        });\r\n    };\r\n    Lookup.prototype.removeByCondition = function (condition) {\r\n        var _this = this;\r\n        var removals = [];\r\n        this._map.forEach(function (entries, key) {\r\n            var updatedEntries = [];\r\n            for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\r\n                var entry = entries_1[_i];\r\n                var remove = condition(entry);\r\n                if (remove) {\r\n                    removals.push(entry);\r\n                }\r\n                else {\r\n                    updatedEntries.push(entry);\r\n                }\r\n            }\r\n            _this._setValue(key, updatedEntries);\r\n        });\r\n        return removals;\r\n    };\r\n    Lookup.prototype.hasKey = function (serviceIdentifier) {\r\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\r\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\r\n        }\r\n        return this._map.has(serviceIdentifier);\r\n    };\r\n    Lookup.prototype.clone = function () {\r\n        var copy = new Lookup();\r\n        this._map.forEach(function (value, key) {\r\n            value.forEach(function (b) { return copy.add(key, isClonable(b) ? b.clone() : b); });\r\n        });\r\n        return copy;\r\n    };\r\n    Lookup.prototype.traverse = function (func) {\r\n        this._map.forEach(function (value, key) {\r\n            func(key, value);\r\n        });\r\n    };\r\n    Lookup.prototype._setValue = function (serviceIdentifier, value) {\r\n        if (value.length > 0) {\r\n            this._map.set(serviceIdentifier, value);\r\n        }\r\n        else {\r\n            this._map.delete(serviceIdentifier);\r\n        }\r\n    };\r\n    return Lookup;\r\n}());\r\nexport { Lookup };\r\n","import { Lookup } from './lookup';\r\nvar ModuleActivationStore = (function () {\r\n    function ModuleActivationStore() {\r\n        this._map = new Map();\r\n    }\r\n    ModuleActivationStore.prototype.remove = function (moduleId) {\r\n        if (this._map.has(moduleId)) {\r\n            var handlers = this._map.get(moduleId);\r\n            this._map.delete(moduleId);\r\n            return handlers;\r\n        }\r\n        return this._getEmptyHandlersStore();\r\n    };\r\n    ModuleActivationStore.prototype.addDeactivation = function (moduleId, serviceIdentifier, onDeactivation) {\r\n        this._getModuleActivationHandlers(moduleId)\r\n            .onDeactivations.add(serviceIdentifier, onDeactivation);\r\n    };\r\n    ModuleActivationStore.prototype.addActivation = function (moduleId, serviceIdentifier, onActivation) {\r\n        this._getModuleActivationHandlers(moduleId)\r\n            .onActivations.add(serviceIdentifier, onActivation);\r\n    };\r\n    ModuleActivationStore.prototype.clone = function () {\r\n        var clone = new ModuleActivationStore();\r\n        this._map.forEach(function (handlersStore, moduleId) {\r\n            clone._map.set(moduleId, {\r\n                onActivations: handlersStore.onActivations.clone(),\r\n                onDeactivations: handlersStore.onDeactivations.clone(),\r\n            });\r\n        });\r\n        return clone;\r\n    };\r\n    ModuleActivationStore.prototype._getModuleActivationHandlers = function (moduleId) {\r\n        var moduleActivationHandlers = this._map.get(moduleId);\r\n        if (moduleActivationHandlers === undefined) {\r\n            moduleActivationHandlers = this._getEmptyHandlersStore();\r\n            this._map.set(moduleId, moduleActivationHandlers);\r\n        }\r\n        return moduleActivationHandlers;\r\n    };\r\n    ModuleActivationStore.prototype._getEmptyHandlersStore = function () {\r\n        var handlersStore = {\r\n            onActivations: new Lookup(),\r\n            onDeactivations: new Lookup()\r\n        };\r\n        return handlersStore;\r\n    };\r\n    return ModuleActivationStore;\r\n}());\r\nexport { ModuleActivationStore };\r\n","var interfaces;\r\n(function (interfaces) {\r\n    ;\r\n})(interfaces || (interfaces = {}));\r\nexport { interfaces };\r\n","import * as keys from './constants/metadata_keys';\r\nexport var METADATA_KEY = keys;\r\nexport { Container } from './container/container';\r\nexport { BindingScopeEnum, BindingTypeEnum, TargetTypeEnum } from './constants/literal_types';\r\nexport { AsyncContainerModule, ContainerModule } from './container/container_module';\r\nexport { createTaggedDecorator } from './annotation/decorator_utils';\r\nexport { injectable } from './annotation/injectable';\r\nexport { tagged } from './annotation/tagged';\r\nexport { named } from './annotation/named';\r\nexport { inject } from './annotation/inject';\r\nexport { LazyServiceIdentifier } from './annotation/lazy_service_identifier';\r\nexport { LazyServiceIdentifier as LazyServiceIdentifer } from './annotation/lazy_service_identifier';\r\nexport { optional } from './annotation/optional';\r\nexport { unmanaged } from './annotation/unmanaged';\r\nexport { multiInject } from './annotation/multi_inject';\r\nexport { targetName } from './annotation/target_name';\r\nexport { postConstruct } from './annotation/post_construct';\r\nexport { preDestroy } from './annotation/pre_destroy';\r\nexport { MetadataReader } from './planning/metadata_reader';\r\nexport { id } from './utils/id';\r\nexport { interfaces } from './interfaces/interfaces';\r\nexport { decorate } from './annotation/decorator_utils';\r\nexport { traverseAncerstors, taggedConstraint, namedConstraint, typeConstraint } from './syntax/constraint_helpers';\r\nexport { getServiceIdentifierAsString } from './utils/serialization';\r\nexport { multiBindToService } from './utils/binding_utils';\r\n","import { id } from '../utils/id';\r\nvar Context = (function () {\r\n    function Context(container) {\r\n        this.id = id();\r\n        this.container = container;\r\n    }\r\n    Context.prototype.addPlan = function (plan) {\r\n        this.plan = plan;\r\n    };\r\n    Context.prototype.setCurrentRequest = function (currentRequest) {\r\n        this.currentRequest = currentRequest;\r\n    };\r\n    return Context;\r\n}());\r\nexport { Context };\r\n","import * as METADATA_KEY from '../constants/metadata_keys';\r\nvar Metadata = (function () {\r\n    function Metadata(key, value) {\r\n        this.key = key;\r\n        this.value = value;\r\n    }\r\n    Metadata.prototype.toString = function () {\r\n        if (this.key === METADATA_KEY.NAMED_TAG) {\r\n            return \"named: \" + String(this.value).toString() + \" \";\r\n        }\r\n        else {\r\n            return \"tagged: { key:\" + this.key.toString() + \", value: \" + String(this.value) + \" }\";\r\n        }\r\n    };\r\n    return Metadata;\r\n}());\r\nexport { Metadata };\r\n","import * as METADATA_KEY from '../constants/metadata_keys';\r\nvar MetadataReader = (function () {\r\n    function MetadataReader() {\r\n    }\r\n    MetadataReader.prototype.getConstructorMetadata = function (constructorFunc) {\r\n        var compilerGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.PARAM_TYPES, constructorFunc);\r\n        var userGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.TAGGED, constructorFunc);\r\n        return {\r\n            compilerGeneratedMetadata: compilerGeneratedMetadata,\r\n            userGeneratedMetadata: userGeneratedMetadata || {}\r\n        };\r\n    };\r\n    MetadataReader.prototype.getPropertiesMetadata = function (constructorFunc) {\r\n        var userGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.TAGGED_PROP, constructorFunc) || [];\r\n        return userGeneratedMetadata;\r\n    };\r\n    return MetadataReader;\r\n}());\r\nexport { MetadataReader };\r\n","var Plan = (function () {\r\n    function Plan(parentContext, rootRequest) {\r\n        this.parentContext = parentContext;\r\n        this.rootRequest = rootRequest;\r\n    }\r\n    return Plan;\r\n}());\r\nexport { Plan };\r\n","import { BindingCount } from '../bindings/binding_count';\r\nimport * as ERROR_MSGS from '../constants/error_msgs';\r\nimport { BindingTypeEnum, TargetTypeEnum } from '../constants/literal_types';\r\nimport * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { isStackOverflowExeption } from '../utils/exceptions';\r\nimport { circularDependencyToException, getServiceIdentifierAsString, listMetadataForTarget, listRegisteredBindingsForServiceIdentifier } from '../utils/serialization';\r\nimport { Context } from './context';\r\nimport { Metadata } from './metadata';\r\nimport { Plan } from './plan';\r\nimport { getBaseClassDependencyCount, getDependencies, getFunctionName } from './reflection_utils';\r\nimport { Request } from './request';\r\nimport { Target } from './target';\r\nfunction getBindingDictionary(cntnr) {\r\n    return cntnr._bindingDictionary;\r\n}\r\nfunction _createTarget(isMultiInject, targetType, serviceIdentifier, name, key, value) {\r\n    var metadataKey = isMultiInject ? METADATA_KEY.MULTI_INJECT_TAG : METADATA_KEY.INJECT_TAG;\r\n    var injectMetadata = new Metadata(metadataKey, serviceIdentifier);\r\n    var target = new Target(targetType, name, serviceIdentifier, injectMetadata);\r\n    if (key !== undefined) {\r\n        var tagMetadata = new Metadata(key, value);\r\n        target.metadata.push(tagMetadata);\r\n    }\r\n    return target;\r\n}\r\nfunction _getActiveBindings(metadataReader, avoidConstraints, context, parentRequest, target) {\r\n    var bindings = getBindings(context.container, target.serviceIdentifier);\r\n    var activeBindings = [];\r\n    if (bindings.length === BindingCount.NoBindingsAvailable &&\r\n        context.container.options.autoBindInjectable &&\r\n        typeof target.serviceIdentifier === 'function' &&\r\n        metadataReader.getConstructorMetadata(target.serviceIdentifier).compilerGeneratedMetadata) {\r\n        context.container.bind(target.serviceIdentifier).toSelf();\r\n        bindings = getBindings(context.container, target.serviceIdentifier);\r\n    }\r\n    if (!avoidConstraints) {\r\n        activeBindings = bindings.filter(function (binding) {\r\n            var request = new Request(binding.serviceIdentifier, context, parentRequest, binding, target);\r\n            return binding.constraint(request);\r\n        });\r\n    }\r\n    else {\r\n        activeBindings = bindings;\r\n    }\r\n    _validateActiveBindingCount(target.serviceIdentifier, activeBindings, target, context.container);\r\n    return activeBindings;\r\n}\r\nfunction _validateActiveBindingCount(serviceIdentifier, bindings, target, container) {\r\n    switch (bindings.length) {\r\n        case BindingCount.NoBindingsAvailable:\r\n            if (target.isOptional()) {\r\n                return bindings;\r\n            }\r\n            else {\r\n                var serviceIdentifierString = getServiceIdentifierAsString(serviceIdentifier);\r\n                var msg = ERROR_MSGS.NOT_REGISTERED;\r\n                msg += listMetadataForTarget(serviceIdentifierString, target);\r\n                msg += listRegisteredBindingsForServiceIdentifier(container, serviceIdentifierString, getBindings);\r\n                throw new Error(msg);\r\n            }\r\n        case BindingCount.OnlyOneBindingAvailable:\r\n            return bindings;\r\n        case BindingCount.MultipleBindingsAvailable:\r\n        default:\r\n            if (!target.isArray()) {\r\n                var serviceIdentifierString = getServiceIdentifierAsString(serviceIdentifier);\r\n                var msg = ERROR_MSGS.AMBIGUOUS_MATCH + \" \" + serviceIdentifierString;\r\n                msg += listRegisteredBindingsForServiceIdentifier(container, serviceIdentifierString, getBindings);\r\n                throw new Error(msg);\r\n            }\r\n            else {\r\n                return bindings;\r\n            }\r\n    }\r\n}\r\nfunction _createSubRequests(metadataReader, avoidConstraints, serviceIdentifier, context, parentRequest, target) {\r\n    var activeBindings;\r\n    var childRequest;\r\n    if (parentRequest === null) {\r\n        activeBindings = _getActiveBindings(metadataReader, avoidConstraints, context, null, target);\r\n        childRequest = new Request(serviceIdentifier, context, null, activeBindings, target);\r\n        var thePlan = new Plan(context, childRequest);\r\n        context.addPlan(thePlan);\r\n    }\r\n    else {\r\n        activeBindings = _getActiveBindings(metadataReader, avoidConstraints, context, parentRequest, target);\r\n        childRequest = parentRequest.addChildRequest(target.serviceIdentifier, activeBindings, target);\r\n    }\r\n    activeBindings.forEach(function (binding) {\r\n        var subChildRequest = null;\r\n        if (target.isArray()) {\r\n            subChildRequest = childRequest.addChildRequest(binding.serviceIdentifier, binding, target);\r\n        }\r\n        else {\r\n            if (binding.cache) {\r\n                return;\r\n            }\r\n            subChildRequest = childRequest;\r\n        }\r\n        if (binding.type === BindingTypeEnum.Instance && binding.implementationType !== null) {\r\n            var dependencies = getDependencies(metadataReader, binding.implementationType);\r\n            if (!context.container.options.skipBaseClassChecks) {\r\n                var baseClassDependencyCount = getBaseClassDependencyCount(metadataReader, binding.implementationType);\r\n                if (dependencies.length < baseClassDependencyCount) {\r\n                    var error = ERROR_MSGS.ARGUMENTS_LENGTH_MISMATCH(getFunctionName(binding.implementationType));\r\n                    throw new Error(error);\r\n                }\r\n            }\r\n            dependencies.forEach(function (dependency) {\r\n                _createSubRequests(metadataReader, false, dependency.serviceIdentifier, context, subChildRequest, dependency);\r\n            });\r\n        }\r\n    });\r\n}\r\nfunction getBindings(container, serviceIdentifier) {\r\n    var bindings = [];\r\n    var bindingDictionary = getBindingDictionary(container);\r\n    if (bindingDictionary.hasKey(serviceIdentifier)) {\r\n        bindings = bindingDictionary.get(serviceIdentifier);\r\n    }\r\n    else if (container.parent !== null) {\r\n        bindings = getBindings(container.parent, serviceIdentifier);\r\n    }\r\n    return bindings;\r\n}\r\nfunction plan(metadataReader, container, isMultiInject, targetType, serviceIdentifier, key, value, avoidConstraints) {\r\n    if (avoidConstraints === void 0) { avoidConstraints = false; }\r\n    var context = new Context(container);\r\n    var target = _createTarget(isMultiInject, targetType, serviceIdentifier, '', key, value);\r\n    try {\r\n        _createSubRequests(metadataReader, avoidConstraints, serviceIdentifier, context, null, target);\r\n        return context;\r\n    }\r\n    catch (error) {\r\n        if (isStackOverflowExeption(error)) {\r\n            circularDependencyToException(context.plan.rootRequest);\r\n        }\r\n        throw error;\r\n    }\r\n}\r\nfunction createMockRequest(container, serviceIdentifier, key, value) {\r\n    var target = new Target(TargetTypeEnum.Variable, '', serviceIdentifier, new Metadata(key, value));\r\n    var context = new Context(container);\r\n    var request = new Request(serviceIdentifier, context, null, [], target);\r\n    return request;\r\n}\r\nexport { plan, createMockRequest, getBindingDictionary };\r\n","var QueryableString = (function () {\r\n    function QueryableString(str) {\r\n        this.str = str;\r\n    }\r\n    QueryableString.prototype.startsWith = function (searchString) {\r\n        return this.str.indexOf(searchString) === 0;\r\n    };\r\n    QueryableString.prototype.endsWith = function (searchString) {\r\n        var reverseString = '';\r\n        var reverseSearchString = searchString.split('').reverse().join('');\r\n        reverseString = this.str.split('').reverse().join('');\r\n        return this.startsWith.call({ str: reverseString }, reverseSearchString);\r\n    };\r\n    QueryableString.prototype.contains = function (searchString) {\r\n        return (this.str.indexOf(searchString) !== -1);\r\n    };\r\n    QueryableString.prototype.equals = function (compareString) {\r\n        return this.str === compareString;\r\n    };\r\n    QueryableString.prototype.value = function () {\r\n        return this.str;\r\n    };\r\n    return QueryableString;\r\n}());\r\nexport { QueryableString };\r\n","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nimport { LazyServiceIdentifier } from '../annotation/lazy_service_identifier';\r\nimport * as ERROR_MSGS from '../constants/error_msgs';\r\nimport { TargetTypeEnum } from '../constants/literal_types';\r\nimport * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { getFunctionName } from '../utils/serialization';\r\nimport { Target } from './target';\r\nfunction getDependencies(metadataReader, func) {\r\n    var constructorName = getFunctionName(func);\r\n    return getTargets(metadataReader, constructorName, func, false);\r\n}\r\nfunction getTargets(metadataReader, constructorName, func, isBaseClass) {\r\n    var metadata = metadataReader.getConstructorMetadata(func);\r\n    var serviceIdentifiers = metadata.compilerGeneratedMetadata;\r\n    if (serviceIdentifiers === undefined) {\r\n        var msg = ERROR_MSGS.MISSING_INJECTABLE_ANNOTATION + \" \" + constructorName + \".\";\r\n        throw new Error(msg);\r\n    }\r\n    var constructorArgsMetadata = metadata.userGeneratedMetadata;\r\n    var keys = Object.keys(constructorArgsMetadata);\r\n    var hasUserDeclaredUnknownInjections = (func.length === 0 && keys.length > 0);\r\n    var hasOptionalParameters = keys.length > func.length;\r\n    var iterations = (hasUserDeclaredUnknownInjections || hasOptionalParameters) ? keys.length : func.length;\r\n    var constructorTargets = getConstructorArgsAsTargets(isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata, iterations);\r\n    var propertyTargets = getClassPropsAsTargets(metadataReader, func, constructorName);\r\n    var targets = __spreadArray(__spreadArray([], constructorTargets, true), propertyTargets, true);\r\n    return targets;\r\n}\r\nfunction getConstructorArgsAsTarget(index, isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata) {\r\n    var targetMetadata = constructorArgsMetadata[index.toString()] || [];\r\n    var metadata = formatTargetMetadata(targetMetadata);\r\n    var isManaged = metadata.unmanaged !== true;\r\n    var serviceIdentifier = serviceIdentifiers[index];\r\n    var injectIdentifier = metadata.inject || metadata.multiInject;\r\n    serviceIdentifier = (injectIdentifier ? injectIdentifier : serviceIdentifier);\r\n    if (serviceIdentifier instanceof LazyServiceIdentifier) {\r\n        serviceIdentifier = serviceIdentifier.unwrap();\r\n    }\r\n    if (isManaged) {\r\n        var isObject = serviceIdentifier === Object;\r\n        var isFunction = serviceIdentifier === Function;\r\n        var isUndefined = serviceIdentifier === undefined;\r\n        var isUnknownType = isObject || isFunction || isUndefined;\r\n        if (!isBaseClass && isUnknownType) {\r\n            var msg = ERROR_MSGS.MISSING_INJECT_ANNOTATION + \" argument \" + index + \" in class \" + constructorName + \".\";\r\n            throw new Error(msg);\r\n        }\r\n        var target = new Target(TargetTypeEnum.ConstructorArgument, metadata.targetName, serviceIdentifier);\r\n        target.metadata = targetMetadata;\r\n        return target;\r\n    }\r\n    return null;\r\n}\r\nfunction getConstructorArgsAsTargets(isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata, iterations) {\r\n    var targets = [];\r\n    for (var i = 0; i < iterations; i++) {\r\n        var index = i;\r\n        var target = getConstructorArgsAsTarget(index, isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata);\r\n        if (target !== null) {\r\n            targets.push(target);\r\n        }\r\n    }\r\n    return targets;\r\n}\r\nfunction _getServiceIdentifierForProperty(inject, multiInject, propertyName, className) {\r\n    var serviceIdentifier = (inject || multiInject);\r\n    if (serviceIdentifier === undefined) {\r\n        var msg = ERROR_MSGS.MISSING_INJECTABLE_ANNOTATION + \" for property \" + String(propertyName) + \" in class \" + className + \".\";\r\n        throw new Error(msg);\r\n    }\r\n    return serviceIdentifier;\r\n}\r\nfunction getClassPropsAsTargets(metadataReader, constructorFunc, constructorName) {\r\n    var classPropsMetadata = metadataReader.getPropertiesMetadata(constructorFunc);\r\n    var targets = [];\r\n    var symbolKeys = Object.getOwnPropertySymbols(classPropsMetadata);\r\n    var stringKeys = Object.keys(classPropsMetadata);\r\n    var keys = stringKeys.concat(symbolKeys);\r\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\r\n        var key = keys_1[_i];\r\n        var targetMetadata = classPropsMetadata[key];\r\n        var metadata = formatTargetMetadata(targetMetadata);\r\n        var identifier = metadata.targetName || key;\r\n        var serviceIdentifier = _getServiceIdentifierForProperty(metadata.inject, metadata.multiInject, key, constructorName);\r\n        var target = new Target(TargetTypeEnum.ClassProperty, identifier, serviceIdentifier);\r\n        target.metadata = targetMetadata;\r\n        targets.push(target);\r\n    }\r\n    var baseConstructor = Object.getPrototypeOf(constructorFunc.prototype).constructor;\r\n    if (baseConstructor !== Object) {\r\n        var baseTargets = getClassPropsAsTargets(metadataReader, baseConstructor, constructorName);\r\n        targets = __spreadArray(__spreadArray([], targets, true), baseTargets, true);\r\n    }\r\n    return targets;\r\n}\r\nfunction getBaseClassDependencyCount(metadataReader, func) {\r\n    var baseConstructor = Object.getPrototypeOf(func.prototype).constructor;\r\n    if (baseConstructor !== Object) {\r\n        var baseConstructorName = getFunctionName(baseConstructor);\r\n        var targets = getTargets(metadataReader, baseConstructorName, baseConstructor, true);\r\n        var metadata = targets.map(function (t) { return t.metadata.filter(function (m) { return m.key === METADATA_KEY.UNMANAGED_TAG; }); });\r\n        var unmanagedCount = [].concat.apply([], metadata).length;\r\n        var dependencyCount = targets.length - unmanagedCount;\r\n        if (dependencyCount > 0) {\r\n            return dependencyCount;\r\n        }\r\n        else {\r\n            return getBaseClassDependencyCount(metadataReader, baseConstructor);\r\n        }\r\n    }\r\n    else {\r\n        return 0;\r\n    }\r\n}\r\nfunction formatTargetMetadata(targetMetadata) {\r\n    var targetMetadataMap = {};\r\n    targetMetadata.forEach(function (m) {\r\n        targetMetadataMap[m.key.toString()] = m.value;\r\n    });\r\n    return {\r\n        inject: targetMetadataMap[METADATA_KEY.INJECT_TAG],\r\n        multiInject: targetMetadataMap[METADATA_KEY.MULTI_INJECT_TAG],\r\n        targetName: targetMetadataMap[METADATA_KEY.NAME_TAG],\r\n        unmanaged: targetMetadataMap[METADATA_KEY.UNMANAGED_TAG]\r\n    };\r\n}\r\nexport { getDependencies, getBaseClassDependencyCount, getFunctionName };\r\n","import { id } from '../utils/id';\r\nvar Request = (function () {\r\n    function Request(serviceIdentifier, parentContext, parentRequest, bindings, target) {\r\n        this.id = id();\r\n        this.serviceIdentifier = serviceIdentifier;\r\n        this.parentContext = parentContext;\r\n        this.parentRequest = parentRequest;\r\n        this.target = target;\r\n        this.childRequests = [];\r\n        this.bindings = (Array.isArray(bindings) ? bindings : [bindings]);\r\n        this.requestScope = parentRequest === null\r\n            ? new Map()\r\n            : null;\r\n    }\r\n    Request.prototype.addChildRequest = function (serviceIdentifier, bindings, target) {\r\n        var child = new Request(serviceIdentifier, this.parentContext, this, bindings, target);\r\n        this.childRequests.push(child);\r\n        return child;\r\n    };\r\n    return Request;\r\n}());\r\nexport { Request };\r\n","import * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { id } from '../utils/id';\r\nimport { getSymbolDescription } from '../utils/serialization';\r\nimport { Metadata } from './metadata';\r\nimport { QueryableString } from './queryable_string';\r\nvar Target = (function () {\r\n    function Target(type, identifier, serviceIdentifier, namedOrTagged) {\r\n        this.id = id();\r\n        this.type = type;\r\n        this.serviceIdentifier = serviceIdentifier;\r\n        var queryableName = typeof identifier === 'symbol' ? getSymbolDescription(identifier) : identifier;\r\n        this.name = new QueryableString(queryableName || '');\r\n        this.identifier = identifier;\r\n        this.metadata = new Array();\r\n        var metadataItem = null;\r\n        if (typeof namedOrTagged === 'string') {\r\n            metadataItem = new Metadata(METADATA_KEY.NAMED_TAG, namedOrTagged);\r\n        }\r\n        else if (namedOrTagged instanceof Metadata) {\r\n            metadataItem = namedOrTagged;\r\n        }\r\n        if (metadataItem !== null) {\r\n            this.metadata.push(metadataItem);\r\n        }\r\n    }\r\n    Target.prototype.hasTag = function (key) {\r\n        for (var _i = 0, _a = this.metadata; _i < _a.length; _i++) {\r\n            var m = _a[_i];\r\n            if (m.key === key) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    Target.prototype.isArray = function () {\r\n        return this.hasTag(METADATA_KEY.MULTI_INJECT_TAG);\r\n    };\r\n    Target.prototype.matchesArray = function (name) {\r\n        return this.matchesTag(METADATA_KEY.MULTI_INJECT_TAG)(name);\r\n    };\r\n    Target.prototype.isNamed = function () {\r\n        return this.hasTag(METADATA_KEY.NAMED_TAG);\r\n    };\r\n    Target.prototype.isTagged = function () {\r\n        return this.metadata.some(function (metadata) { return METADATA_KEY.NON_CUSTOM_TAG_KEYS.every(function (key) { return metadata.key !== key; }); });\r\n    };\r\n    Target.prototype.isOptional = function () {\r\n        return this.matchesTag(METADATA_KEY.OPTIONAL_TAG)(true);\r\n    };\r\n    Target.prototype.getNamedTag = function () {\r\n        if (this.isNamed()) {\r\n            return this.metadata.filter(function (m) { return m.key === METADATA_KEY.NAMED_TAG; })[0];\r\n        }\r\n        return null;\r\n    };\r\n    Target.prototype.getCustomTags = function () {\r\n        if (this.isTagged()) {\r\n            return this.metadata.filter(function (metadata) { return METADATA_KEY.NON_CUSTOM_TAG_KEYS.every(function (key) { return metadata.key !== key; }); });\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    Target.prototype.matchesNamedTag = function (name) {\r\n        return this.matchesTag(METADATA_KEY.NAMED_TAG)(name);\r\n    };\r\n    Target.prototype.matchesTag = function (key) {\r\n        var _this = this;\r\n        return function (value) {\r\n            for (var _i = 0, _a = _this.metadata; _i < _a.length; _i++) {\r\n                var m = _a[_i];\r\n                if (m.key === key && m.value === value) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n    };\r\n    return Target;\r\n}());\r\nexport { Target };\r\n","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nimport { ON_DEACTIVATION_ERROR, POST_CONSTRUCT_ERROR, PRE_DESTROY_ERROR } from '../constants/error_msgs';\r\nimport { BindingScopeEnum, TargetTypeEnum } from '../constants/literal_types';\r\nimport * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { isPromise, isPromiseOrContainsPromise } from '../utils/async';\r\nfunction _resolveRequests(childRequests, resolveRequest) {\r\n    return childRequests.reduce(function (resolvedRequests, childRequest) {\r\n        var injection = resolveRequest(childRequest);\r\n        var targetType = childRequest.target.type;\r\n        if (targetType === TargetTypeEnum.ConstructorArgument) {\r\n            resolvedRequests.constructorInjections.push(injection);\r\n        }\r\n        else {\r\n            resolvedRequests.propertyRequests.push(childRequest);\r\n            resolvedRequests.propertyInjections.push(injection);\r\n        }\r\n        if (!resolvedRequests.isAsync) {\r\n            resolvedRequests.isAsync = isPromiseOrContainsPromise(injection);\r\n        }\r\n        return resolvedRequests;\r\n    }, { constructorInjections: [], propertyInjections: [], propertyRequests: [], isAsync: false });\r\n}\r\nfunction _createInstance(constr, childRequests, resolveRequest) {\r\n    var result;\r\n    if (childRequests.length > 0) {\r\n        var resolved = _resolveRequests(childRequests, resolveRequest);\r\n        var createInstanceWithInjectionsArg = __assign(__assign({}, resolved), { constr: constr });\r\n        if (resolved.isAsync) {\r\n            result = createInstanceWithInjectionsAsync(createInstanceWithInjectionsArg);\r\n        }\r\n        else {\r\n            result = createInstanceWithInjections(createInstanceWithInjectionsArg);\r\n        }\r\n    }\r\n    else {\r\n        result = new constr();\r\n    }\r\n    return result;\r\n}\r\nfunction createInstanceWithInjections(args) {\r\n    var _a;\r\n    var instance = new ((_a = args.constr).bind.apply(_a, __spreadArray([void 0], args.constructorInjections, false)))();\r\n    args.propertyRequests.forEach(function (r, index) {\r\n        var property = r.target.identifier;\r\n        var injection = args.propertyInjections[index];\r\n        if (!r.target.isOptional() || injection !== undefined) {\r\n            instance[property] = injection;\r\n        }\r\n    });\r\n    return instance;\r\n}\r\nfunction createInstanceWithInjectionsAsync(args) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var constructorInjections, propertyInjections;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4, possiblyWaitInjections(args.constructorInjections)];\r\n                case 1:\r\n                    constructorInjections = _a.sent();\r\n                    return [4, possiblyWaitInjections(args.propertyInjections)];\r\n                case 2:\r\n                    propertyInjections = _a.sent();\r\n                    return [2, createInstanceWithInjections(__assign(__assign({}, args), { constructorInjections: constructorInjections, propertyInjections: propertyInjections }))];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction possiblyWaitInjections(possiblePromiseinjections) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var injections, _i, possiblePromiseinjections_1, injection;\r\n        return __generator(this, function (_a) {\r\n            injections = [];\r\n            for (_i = 0, possiblePromiseinjections_1 = possiblePromiseinjections; _i < possiblePromiseinjections_1.length; _i++) {\r\n                injection = possiblePromiseinjections_1[_i];\r\n                if (Array.isArray(injection)) {\r\n                    injections.push(Promise.all(injection));\r\n                }\r\n                else {\r\n                    injections.push(injection);\r\n                }\r\n            }\r\n            return [2, Promise.all(injections)];\r\n        });\r\n    });\r\n}\r\nfunction _getInstanceAfterPostConstruct(constr, result) {\r\n    var postConstructResult = _postConstruct(constr, result);\r\n    if (isPromise(postConstructResult)) {\r\n        return postConstructResult.then(function () { return result; });\r\n    }\r\n    else {\r\n        return result;\r\n    }\r\n}\r\nfunction _postConstruct(constr, instance) {\r\n    var _a, _b;\r\n    if (Reflect.hasMetadata(METADATA_KEY.POST_CONSTRUCT, constr)) {\r\n        var data = Reflect.getMetadata(METADATA_KEY.POST_CONSTRUCT, constr);\r\n        try {\r\n            return (_b = (_a = instance)[data.value]) === null || _b === void 0 ? void 0 : _b.call(_a);\r\n        }\r\n        catch (e) {\r\n            if (e instanceof Error) {\r\n                throw new Error(POST_CONSTRUCT_ERROR(constr.name, e.message));\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction _validateInstanceResolution(binding, constr) {\r\n    if (binding.scope !== BindingScopeEnum.Singleton) {\r\n        _throwIfHandlingDeactivation(binding, constr);\r\n    }\r\n}\r\nfunction _throwIfHandlingDeactivation(binding, constr) {\r\n    var scopeErrorMessage = \"Class cannot be instantiated in \" + (binding.scope === BindingScopeEnum.Request ?\r\n        'request' :\r\n        'transient') + \" scope.\";\r\n    if (typeof binding.onDeactivation === 'function') {\r\n        throw new Error(ON_DEACTIVATION_ERROR(constr.name, scopeErrorMessage));\r\n    }\r\n    if (Reflect.hasMetadata(METADATA_KEY.PRE_DESTROY, constr)) {\r\n        throw new Error(PRE_DESTROY_ERROR(constr.name, scopeErrorMessage));\r\n    }\r\n}\r\nfunction resolveInstance(binding, constr, childRequests, resolveRequest) {\r\n    _validateInstanceResolution(binding, constr);\r\n    var result = _createInstance(constr, childRequests, resolveRequest);\r\n    if (isPromise(result)) {\r\n        return result.then(function (resolvedResult) { return _getInstanceAfterPostConstruct(constr, resolvedResult); });\r\n    }\r\n    else {\r\n        return _getInstanceAfterPostConstruct(constr, result);\r\n    }\r\n}\r\nexport { resolveInstance };\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport * as ERROR_MSGS from '../constants/error_msgs';\r\nimport { BindingTypeEnum } from '../constants/literal_types';\r\nimport { getBindingDictionary } from '../planning/planner';\r\nimport { saveToScope, tryGetFromScope } from '../scope/scope';\r\nimport { isPromise } from '../utils/async';\r\nimport { getFactoryDetails, ensureFullyBound } from '../utils/binding_utils';\r\nimport { tryAndThrowErrorIfStackOverflow } from '../utils/exceptions';\r\nimport { resolveInstance } from './instantiation';\r\nvar _resolveRequest = function (requestScope) {\r\n    return function (request) {\r\n        request.parentContext.setCurrentRequest(request);\r\n        var bindings = request.bindings;\r\n        var childRequests = request.childRequests;\r\n        var targetIsAnArray = request.target && request.target.isArray();\r\n        var targetParentIsNotAnArray = !request.parentRequest ||\r\n            !request.parentRequest.target ||\r\n            !request.target ||\r\n            !request.parentRequest.target.matchesArray(request.target.serviceIdentifier);\r\n        if (targetIsAnArray && targetParentIsNotAnArray) {\r\n            return childRequests.map(function (childRequest) {\r\n                var _f = _resolveRequest(requestScope);\r\n                return _f(childRequest);\r\n            });\r\n        }\r\n        else {\r\n            if (request.target.isOptional() && bindings.length === 0) {\r\n                return undefined;\r\n            }\r\n            var binding = bindings[0];\r\n            return _resolveBinding(requestScope, request, binding);\r\n        }\r\n    };\r\n};\r\nvar _resolveFactoryFromBinding = function (binding, context) {\r\n    var factoryDetails = getFactoryDetails(binding);\r\n    return tryAndThrowErrorIfStackOverflow(function () { return factoryDetails.factory.bind(binding)(context); }, function () { return new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY_IN_FACTORY(factoryDetails.factoryType, context.currentRequest.serviceIdentifier.toString())); });\r\n};\r\nvar _getResolvedFromBinding = function (requestScope, request, binding) {\r\n    var result;\r\n    var childRequests = request.childRequests;\r\n    ensureFullyBound(binding);\r\n    switch (binding.type) {\r\n        case BindingTypeEnum.ConstantValue:\r\n        case BindingTypeEnum.Function:\r\n            result = binding.cache;\r\n            break;\r\n        case BindingTypeEnum.Constructor:\r\n            result = binding.implementationType;\r\n            break;\r\n        case BindingTypeEnum.Instance:\r\n            result = resolveInstance(binding, binding.implementationType, childRequests, _resolveRequest(requestScope));\r\n            break;\r\n        default:\r\n            result = _resolveFactoryFromBinding(binding, request.parentContext);\r\n    }\r\n    return result;\r\n};\r\nvar _resolveInScope = function (requestScope, binding, resolveFromBinding) {\r\n    var result = tryGetFromScope(requestScope, binding);\r\n    if (result !== null) {\r\n        return result;\r\n    }\r\n    result = resolveFromBinding();\r\n    saveToScope(requestScope, binding, result);\r\n    return result;\r\n};\r\nvar _resolveBinding = function (requestScope, request, binding) {\r\n    return _resolveInScope(requestScope, binding, function () {\r\n        var result = _getResolvedFromBinding(requestScope, request, binding);\r\n        if (isPromise(result)) {\r\n            result = result.then(function (resolved) { return _onActivation(request, binding, resolved); });\r\n        }\r\n        else {\r\n            result = _onActivation(request, binding, result);\r\n        }\r\n        return result;\r\n    });\r\n};\r\nfunction _onActivation(request, binding, resolved) {\r\n    var result = _bindingActivation(request.parentContext, binding, resolved);\r\n    var containersIterator = _getContainersIterator(request.parentContext.container);\r\n    var container;\r\n    var containersIteratorResult = containersIterator.next();\r\n    do {\r\n        container = containersIteratorResult.value;\r\n        var context_1 = request.parentContext;\r\n        var serviceIdentifier = request.serviceIdentifier;\r\n        var activationsIterator = _getContainerActivationsForService(container, serviceIdentifier);\r\n        if (isPromise(result)) {\r\n            result = _activateContainerAsync(activationsIterator, context_1, result);\r\n        }\r\n        else {\r\n            result = _activateContainer(activationsIterator, context_1, result);\r\n        }\r\n        containersIteratorResult = containersIterator.next();\r\n    } while (containersIteratorResult.done !== true && !getBindingDictionary(container).hasKey(request.serviceIdentifier));\r\n    return result;\r\n}\r\nvar _bindingActivation = function (context, binding, previousResult) {\r\n    var result;\r\n    if (typeof binding.onActivation === 'function') {\r\n        result = binding.onActivation(context, previousResult);\r\n    }\r\n    else {\r\n        result = previousResult;\r\n    }\r\n    return result;\r\n};\r\nvar _activateContainer = function (activationsIterator, context, result) {\r\n    var activation = activationsIterator.next();\r\n    while (!activation.done) {\r\n        result = activation.value(context, result);\r\n        if (isPromise(result)) {\r\n            return _activateContainerAsync(activationsIterator, context, result);\r\n        }\r\n        activation = activationsIterator.next();\r\n    }\r\n    return result;\r\n};\r\nvar _activateContainerAsync = function (activationsIterator, context, resultPromise) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var result, activation;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0: return [4, resultPromise];\r\n            case 1:\r\n                result = _a.sent();\r\n                activation = activationsIterator.next();\r\n                _a.label = 2;\r\n            case 2:\r\n                if (!!activation.done) return [3, 4];\r\n                return [4, activation.value(context, result)];\r\n            case 3:\r\n                result = _a.sent();\r\n                activation = activationsIterator.next();\r\n                return [3, 2];\r\n            case 4: return [2, result];\r\n        }\r\n    });\r\n}); };\r\nvar _getContainerActivationsForService = function (container, serviceIdentifier) {\r\n    var activations = container._activations;\r\n    return activations.hasKey(serviceIdentifier) ? activations.get(serviceIdentifier).values() : [].values();\r\n};\r\nvar _getContainersIterator = function (container) {\r\n    var containersStack = [container];\r\n    var parent = container.parent;\r\n    while (parent !== null) {\r\n        containersStack.push(parent);\r\n        parent = parent.parent;\r\n    }\r\n    var getNextContainer = function () {\r\n        var nextContainer = containersStack.pop();\r\n        if (nextContainer !== undefined) {\r\n            return { done: false, value: nextContainer };\r\n        }\r\n        else {\r\n            return { done: true, value: undefined };\r\n        }\r\n    };\r\n    var containersIterator = {\r\n        next: getNextContainer,\r\n    };\r\n    return containersIterator;\r\n};\r\nfunction resolve(context) {\r\n    var _f = _resolveRequest(context.plan.rootRequest.requestScope);\r\n    return _f(context.plan.rootRequest);\r\n}\r\nexport { resolve };\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { BindingScopeEnum } from '../constants/literal_types';\r\nimport { isPromise } from '../utils/async';\r\nexport var tryGetFromScope = function (requestScope, binding) {\r\n    if ((binding.scope === BindingScopeEnum.Singleton) && binding.activated) {\r\n        return binding.cache;\r\n    }\r\n    if (binding.scope === BindingScopeEnum.Request &&\r\n        requestScope.has(binding.id)) {\r\n        return requestScope.get(binding.id);\r\n    }\r\n    return null;\r\n};\r\nexport var saveToScope = function (requestScope, binding, result) {\r\n    if (binding.scope === BindingScopeEnum.Singleton) {\r\n        _saveToSingletonScope(binding, result);\r\n    }\r\n    if (binding.scope === BindingScopeEnum.Request) {\r\n        _saveToRequestScope(requestScope, binding, result);\r\n    }\r\n};\r\nvar _saveToRequestScope = function (requestScope, binding, result) {\r\n    if (!requestScope.has(binding.id)) {\r\n        requestScope.set(binding.id, result);\r\n    }\r\n};\r\nvar _saveToSingletonScope = function (binding, result) {\r\n    binding.cache = result;\r\n    binding.activated = true;\r\n    if (isPromise(result)) {\r\n        void _saveAsyncResultToSingletonScope(binding, result);\r\n    }\r\n};\r\nvar _saveAsyncResultToSingletonScope = function (binding, asyncResult) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var result, ex_1;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                _a.trys.push([0, 2, , 3]);\r\n                return [4, asyncResult];\r\n            case 1:\r\n                result = _a.sent();\r\n                binding.cache = result;\r\n                return [3, 3];\r\n            case 2:\r\n                ex_1 = _a.sent();\r\n                binding.cache = null;\r\n                binding.activated = false;\r\n                throw ex_1;\r\n            case 3: return [2];\r\n        }\r\n    });\r\n}); };\r\n","import { BindingScopeEnum } from '../constants/literal_types';\r\nimport { BindingWhenOnSyntax } from './binding_when_on_syntax';\r\nvar BindingInSyntax = (function () {\r\n    function BindingInSyntax(binding) {\r\n        this._binding = binding;\r\n    }\r\n    BindingInSyntax.prototype.inRequestScope = function () {\r\n        this._binding.scope = BindingScopeEnum.Request;\r\n        return new BindingWhenOnSyntax(this._binding);\r\n    };\r\n    BindingInSyntax.prototype.inSingletonScope = function () {\r\n        this._binding.scope = BindingScopeEnum.Singleton;\r\n        return new BindingWhenOnSyntax(this._binding);\r\n    };\r\n    BindingInSyntax.prototype.inTransientScope = function () {\r\n        this._binding.scope = BindingScopeEnum.Transient;\r\n        return new BindingWhenOnSyntax(this._binding);\r\n    };\r\n    return BindingInSyntax;\r\n}());\r\nexport { BindingInSyntax };\r\n","import { BindingInSyntax } from './binding_in_syntax';\r\nimport { BindingOnSyntax } from './binding_on_syntax';\r\nimport { BindingWhenSyntax } from './binding_when_syntax';\r\nvar BindingInWhenOnSyntax = (function () {\r\n    function BindingInWhenOnSyntax(binding) {\r\n        this._binding = binding;\r\n        this._bindingWhenSyntax = new BindingWhenSyntax(this._binding);\r\n        this._bindingOnSyntax = new BindingOnSyntax(this._binding);\r\n        this._bindingInSyntax = new BindingInSyntax(binding);\r\n    }\r\n    BindingInWhenOnSyntax.prototype.inRequestScope = function () {\r\n        return this._bindingInSyntax.inRequestScope();\r\n    };\r\n    BindingInWhenOnSyntax.prototype.inSingletonScope = function () {\r\n        return this._bindingInSyntax.inSingletonScope();\r\n    };\r\n    BindingInWhenOnSyntax.prototype.inTransientScope = function () {\r\n        return this._bindingInSyntax.inTransientScope();\r\n    };\r\n    BindingInWhenOnSyntax.prototype.when = function (constraint) {\r\n        return this._bindingWhenSyntax.when(constraint);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenTargetNamed = function (name) {\r\n        return this._bindingWhenSyntax.whenTargetNamed(name);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenTargetIsDefault = function () {\r\n        return this._bindingWhenSyntax.whenTargetIsDefault();\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenTargetTagged = function (tag, value) {\r\n        return this._bindingWhenSyntax.whenTargetTagged(tag, value);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenInjectedInto = function (parent) {\r\n        return this._bindingWhenSyntax.whenInjectedInto(parent);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenParentNamed = function (name) {\r\n        return this._bindingWhenSyntax.whenParentNamed(name);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenParentTagged = function (tag, value) {\r\n        return this._bindingWhenSyntax.whenParentTagged(tag, value);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\r\n        return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenNoAncestorIs = function (ancestor) {\r\n        return this._bindingWhenSyntax.whenNoAncestorIs(ancestor);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorNamed = function (name) {\r\n        return this._bindingWhenSyntax.whenAnyAncestorNamed(name);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\r\n        return this._bindingWhenSyntax.whenAnyAncestorTagged(tag, value);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenNoAncestorNamed = function (name) {\r\n        return this._bindingWhenSyntax.whenNoAncestorNamed(name);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\r\n        return this._bindingWhenSyntax.whenNoAncestorTagged(tag, value);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\r\n        return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenNoAncestorMatches = function (constraint) {\r\n        return this._bindingWhenSyntax.whenNoAncestorMatches(constraint);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.onActivation = function (handler) {\r\n        return this._bindingOnSyntax.onActivation(handler);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.onDeactivation = function (handler) {\r\n        return this._bindingOnSyntax.onDeactivation(handler);\r\n    };\r\n    return BindingInWhenOnSyntax;\r\n}());\r\nexport { BindingInWhenOnSyntax };\r\n","import { BindingWhenSyntax } from './binding_when_syntax';\r\nvar BindingOnSyntax = (function () {\r\n    function BindingOnSyntax(binding) {\r\n        this._binding = binding;\r\n    }\r\n    BindingOnSyntax.prototype.onActivation = function (handler) {\r\n        this._binding.onActivation = handler;\r\n        return new BindingWhenSyntax(this._binding);\r\n    };\r\n    BindingOnSyntax.prototype.onDeactivation = function (handler) {\r\n        this._binding.onDeactivation = handler;\r\n        return new BindingWhenSyntax(this._binding);\r\n    };\r\n    return BindingOnSyntax;\r\n}());\r\nexport { BindingOnSyntax };\r\n","import * as ERROR_MSGS from \"../constants/error_msgs\";\r\nimport { BindingScopeEnum, BindingTypeEnum } from \"../constants/literal_types\";\r\nimport { BindingInWhenOnSyntax } from \"./binding_in_when_on_syntax\";\r\nimport { BindingWhenOnSyntax } from \"./binding_when_on_syntax\";\r\nvar BindingToSyntax = (function () {\r\n    function BindingToSyntax(binding) {\r\n        this._binding = binding;\r\n    }\r\n    BindingToSyntax.prototype.to = function (constructor) {\r\n        this._binding.type = BindingTypeEnum.Instance;\r\n        this._binding.implementationType = constructor;\r\n        return new BindingInWhenOnSyntax(this._binding);\r\n    };\r\n    BindingToSyntax.prototype.toSelf = function () {\r\n        if (typeof this._binding.serviceIdentifier !== \"function\") {\r\n            throw new Error(\"\" + ERROR_MSGS.INVALID_TO_SELF_VALUE);\r\n        }\r\n        var self = this._binding.serviceIdentifier;\r\n        return this.to(self);\r\n    };\r\n    BindingToSyntax.prototype.toConstantValue = function (value) {\r\n        this._binding.type = BindingTypeEnum.ConstantValue;\r\n        this._binding.cache = value;\r\n        this._binding.dynamicValue = null;\r\n        this._binding.implementationType = null;\r\n        this._binding.scope = BindingScopeEnum.Singleton;\r\n        return new BindingWhenOnSyntax(this._binding);\r\n    };\r\n    BindingToSyntax.prototype.toDynamicValue = function (func) {\r\n        this._binding.type = BindingTypeEnum.DynamicValue;\r\n        this._binding.cache = null;\r\n        this._binding.dynamicValue = func;\r\n        this._binding.implementationType = null;\r\n        return new BindingInWhenOnSyntax(this._binding);\r\n    };\r\n    BindingToSyntax.prototype.toConstructor = function (constructor) {\r\n        this._binding.type = BindingTypeEnum.Constructor;\r\n        this._binding.implementationType = constructor;\r\n        this._binding.scope = BindingScopeEnum.Singleton;\r\n        return new BindingWhenOnSyntax(this._binding);\r\n    };\r\n    BindingToSyntax.prototype.toFactory = function (factory) {\r\n        this._binding.type = BindingTypeEnum.Factory;\r\n        this._binding.factory = factory;\r\n        this._binding.scope = BindingScopeEnum.Singleton;\r\n        return new BindingWhenOnSyntax(this._binding);\r\n    };\r\n    BindingToSyntax.prototype.toFunction = function (func) {\r\n        if (typeof func !== \"function\") {\r\n            throw new Error(ERROR_MSGS.INVALID_FUNCTION_BINDING);\r\n        }\r\n        var bindingWhenOnSyntax = this.toConstantValue(func);\r\n        this._binding.type = BindingTypeEnum.Function;\r\n        this._binding.scope = BindingScopeEnum.Singleton;\r\n        return bindingWhenOnSyntax;\r\n    };\r\n    BindingToSyntax.prototype.toAutoFactory = function (serviceIdentifier) {\r\n        this._binding.type = BindingTypeEnum.Factory;\r\n        this._binding.factory = function (context) {\r\n            var autofactory = function () { return context.container.get(serviceIdentifier); };\r\n            return autofactory;\r\n        };\r\n        this._binding.scope = BindingScopeEnum.Singleton;\r\n        return new BindingWhenOnSyntax(this._binding);\r\n    };\r\n    BindingToSyntax.prototype.toAutoNamedFactory = function (serviceIdentifier) {\r\n        this._binding.type = BindingTypeEnum.Factory;\r\n        this._binding.factory = function (context) {\r\n            return function (named) { return context.container.getNamed(serviceIdentifier, named); };\r\n        };\r\n        return new BindingWhenOnSyntax(this._binding);\r\n    };\r\n    BindingToSyntax.prototype.toProvider = function (provider) {\r\n        this._binding.type = BindingTypeEnum.Provider;\r\n        this._binding.provider = provider;\r\n        this._binding.scope = BindingScopeEnum.Singleton;\r\n        return new BindingWhenOnSyntax(this._binding);\r\n    };\r\n    BindingToSyntax.prototype.toService = function (service) {\r\n        this.toDynamicValue(function (context) { return context.container.get(service); });\r\n    };\r\n    return BindingToSyntax;\r\n}());\r\nexport { BindingToSyntax };\r\n","import { BindingOnSyntax } from './binding_on_syntax';\r\nimport { BindingWhenSyntax } from './binding_when_syntax';\r\nvar BindingWhenOnSyntax = (function () {\r\n    function BindingWhenOnSyntax(binding) {\r\n        this._binding = binding;\r\n        this._bindingWhenSyntax = new BindingWhenSyntax(this._binding);\r\n        this._bindingOnSyntax = new BindingOnSyntax(this._binding);\r\n    }\r\n    BindingWhenOnSyntax.prototype.when = function (constraint) {\r\n        return this._bindingWhenSyntax.when(constraint);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenTargetNamed = function (name) {\r\n        return this._bindingWhenSyntax.whenTargetNamed(name);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenTargetIsDefault = function () {\r\n        return this._bindingWhenSyntax.whenTargetIsDefault();\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenTargetTagged = function (tag, value) {\r\n        return this._bindingWhenSyntax.whenTargetTagged(tag, value);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenInjectedInto = function (parent) {\r\n        return this._bindingWhenSyntax.whenInjectedInto(parent);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenParentNamed = function (name) {\r\n        return this._bindingWhenSyntax.whenParentNamed(name);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenParentTagged = function (tag, value) {\r\n        return this._bindingWhenSyntax.whenParentTagged(tag, value);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\r\n        return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenNoAncestorIs = function (ancestor) {\r\n        return this._bindingWhenSyntax.whenNoAncestorIs(ancestor);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenAnyAncestorNamed = function (name) {\r\n        return this._bindingWhenSyntax.whenAnyAncestorNamed(name);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\r\n        return this._bindingWhenSyntax.whenAnyAncestorTagged(tag, value);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenNoAncestorNamed = function (name) {\r\n        return this._bindingWhenSyntax.whenNoAncestorNamed(name);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\r\n        return this._bindingWhenSyntax.whenNoAncestorTagged(tag, value);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\r\n        return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenNoAncestorMatches = function (constraint) {\r\n        return this._bindingWhenSyntax.whenNoAncestorMatches(constraint);\r\n    };\r\n    BindingWhenOnSyntax.prototype.onActivation = function (handler) {\r\n        return this._bindingOnSyntax.onActivation(handler);\r\n    };\r\n    BindingWhenOnSyntax.prototype.onDeactivation = function (handler) {\r\n        return this._bindingOnSyntax.onDeactivation(handler);\r\n    };\r\n    return BindingWhenOnSyntax;\r\n}());\r\nexport { BindingWhenOnSyntax };\r\n","import { BindingOnSyntax } from './binding_on_syntax';\r\nimport { namedConstraint, taggedConstraint, traverseAncerstors, typeConstraint } from './constraint_helpers';\r\nvar BindingWhenSyntax = (function () {\r\n    function BindingWhenSyntax(binding) {\r\n        this._binding = binding;\r\n    }\r\n    BindingWhenSyntax.prototype.when = function (constraint) {\r\n        this._binding.constraint = constraint;\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenTargetNamed = function (name) {\r\n        this._binding.constraint = namedConstraint(name);\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenTargetIsDefault = function () {\r\n        this._binding.constraint = function (request) {\r\n            if (request === null) {\r\n                return false;\r\n            }\r\n            var targetIsDefault = (request.target !== null) &&\r\n                (!request.target.isNamed()) &&\r\n                (!request.target.isTagged());\r\n            return targetIsDefault;\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenTargetTagged = function (tag, value) {\r\n        this._binding.constraint = taggedConstraint(tag)(value);\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenInjectedInto = function (parent) {\r\n        this._binding.constraint = function (request) {\r\n            return request !== null && typeConstraint(parent)(request.parentRequest);\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenParentNamed = function (name) {\r\n        this._binding.constraint = function (request) {\r\n            return request !== null && namedConstraint(name)(request.parentRequest);\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenParentTagged = function (tag, value) {\r\n        this._binding.constraint = function (request) {\r\n            return request !== null && taggedConstraint(tag)(value)(request.parentRequest);\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\r\n        this._binding.constraint = function (request) {\r\n            return request !== null && traverseAncerstors(request, typeConstraint(ancestor));\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenNoAncestorIs = function (ancestor) {\r\n        this._binding.constraint = function (request) {\r\n            return request !== null && !traverseAncerstors(request, typeConstraint(ancestor));\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenAnyAncestorNamed = function (name) {\r\n        this._binding.constraint = function (request) {\r\n            return request !== null && traverseAncerstors(request, namedConstraint(name));\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenNoAncestorNamed = function (name) {\r\n        this._binding.constraint = function (request) {\r\n            return request !== null && !traverseAncerstors(request, namedConstraint(name));\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\r\n        this._binding.constraint = function (request) {\r\n            return request !== null && traverseAncerstors(request, taggedConstraint(tag)(value));\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\r\n        this._binding.constraint = function (request) {\r\n            return request !== null && !traverseAncerstors(request, taggedConstraint(tag)(value));\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\r\n        this._binding.constraint = function (request) {\r\n            return request !== null && traverseAncerstors(request, constraint);\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenNoAncestorMatches = function (constraint) {\r\n        this._binding.constraint = function (request) {\r\n            return request !== null && !traverseAncerstors(request, constraint);\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    return BindingWhenSyntax;\r\n}());\r\nexport { BindingWhenSyntax };\r\n","import * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { Metadata } from '../planning/metadata';\r\nvar traverseAncerstors = function (request, constraint) {\r\n    var parent = request.parentRequest;\r\n    if (parent !== null) {\r\n        return constraint(parent) ? true : traverseAncerstors(parent, constraint);\r\n    }\r\n    else {\r\n        return false;\r\n    }\r\n};\r\nvar taggedConstraint = function (key) { return function (value) {\r\n    var constraint = function (request) {\r\n        return request !== null && request.target !== null && request.target.matchesTag(key)(value);\r\n    };\r\n    constraint.metaData = new Metadata(key, value);\r\n    return constraint;\r\n}; };\r\nvar namedConstraint = taggedConstraint(METADATA_KEY.NAMED_TAG);\r\nvar typeConstraint = function (type) { return function (request) {\r\n    var binding = null;\r\n    if (request !== null) {\r\n        binding = request.bindings[0];\r\n        if (typeof type === 'string') {\r\n            var serviceIdentifier = binding.serviceIdentifier;\r\n            return serviceIdentifier === type;\r\n        }\r\n        else {\r\n            var constructor = request.bindings[0].implementationType;\r\n            return type === constructor;\r\n        }\r\n    }\r\n    return false;\r\n}; };\r\nexport { traverseAncerstors, taggedConstraint, namedConstraint, typeConstraint };\r\n","function isPromise(object) {\r\n    var isObjectOrFunction = (typeof object === 'object' && object !== null) || typeof object === 'function';\r\n    return isObjectOrFunction && typeof object.then === \"function\";\r\n}\r\nfunction isPromiseOrContainsPromise(object) {\r\n    if (isPromise(object)) {\r\n        return true;\r\n    }\r\n    return Array.isArray(object) && object.some(isPromise);\r\n}\r\nexport { isPromise, isPromiseOrContainsPromise };\r\n","import { getServiceIdentifierAsString } from '../utils/serialization';\r\nimport * as ERROR_MSGS from '../constants/error_msgs';\r\nimport { BindingTypeEnum } from '../constants/literal_types';\r\nimport { FactoryType } from './factory_type';\r\nexport var multiBindToService = function (container) {\r\n    return function (service) {\r\n        return function () {\r\n            var types = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                types[_i] = arguments[_i];\r\n            }\r\n            return types.forEach(function (t) { return container.bind(t).toService(service); });\r\n        };\r\n    };\r\n};\r\nexport var ensureFullyBound = function (binding) {\r\n    var boundValue = null;\r\n    switch (binding.type) {\r\n        case BindingTypeEnum.ConstantValue:\r\n        case BindingTypeEnum.Function:\r\n            boundValue = binding.cache;\r\n            break;\r\n        case BindingTypeEnum.Constructor:\r\n        case BindingTypeEnum.Instance:\r\n            boundValue = binding.implementationType;\r\n            break;\r\n        case BindingTypeEnum.DynamicValue:\r\n            boundValue = binding.dynamicValue;\r\n            break;\r\n        case BindingTypeEnum.Provider:\r\n            boundValue = binding.provider;\r\n            break;\r\n        case BindingTypeEnum.Factory:\r\n            boundValue = binding.factory;\r\n            break;\r\n    }\r\n    if (boundValue === null) {\r\n        var serviceIdentifierAsString = getServiceIdentifierAsString(binding.serviceIdentifier);\r\n        throw new Error(ERROR_MSGS.INVALID_BINDING_TYPE + \" \" + serviceIdentifierAsString);\r\n    }\r\n};\r\nexport var getFactoryDetails = function (binding) {\r\n    switch (binding.type) {\r\n        case BindingTypeEnum.Factory:\r\n            return { factory: binding.factory, factoryType: FactoryType.Factory };\r\n        case BindingTypeEnum.Provider:\r\n            return { factory: binding.provider, factoryType: FactoryType.Provider };\r\n        case BindingTypeEnum.DynamicValue:\r\n            return { factory: binding.dynamicValue, factoryType: FactoryType.DynamicValue };\r\n        default:\r\n            throw new Error(\"Unexpected factory type \" + binding.type);\r\n    }\r\n};\r\n","function isClonable(obj) {\r\n    return (typeof obj === 'object')\r\n        && (obj !== null)\r\n        && ('clone' in obj)\r\n        && typeof obj.clone === 'function';\r\n}\r\nexport { isClonable };\r\n","import * as ERROR_MSGS from '../constants/error_msgs';\r\nexport function isStackOverflowExeption(error) {\r\n    return (error instanceof RangeError ||\r\n        error.message === ERROR_MSGS.STACK_OVERFLOW);\r\n}\r\nexport var tryAndThrowErrorIfStackOverflow = function (fn, errorCallback) {\r\n    try {\r\n        return fn();\r\n    }\r\n    catch (error) {\r\n        if (isStackOverflowExeption(error)) {\r\n            error = errorCallback();\r\n        }\r\n        throw error;\r\n    }\r\n};\r\n","export var FactoryType;\r\n(function (FactoryType) {\r\n    FactoryType[\"DynamicValue\"] = \"toDynamicValue\";\r\n    FactoryType[\"Factory\"] = \"toFactory\";\r\n    FactoryType[\"Provider\"] = \"toProvider\";\r\n})(FactoryType || (FactoryType = {}));\r\n","var idCounter = 0;\r\nfunction id() {\r\n    return idCounter++;\r\n}\r\nexport { id };\r\n","export function getFirstArrayDuplicate(array) {\r\n    var seenValues = new Set();\r\n    for (var _i = 0, array_1 = array; _i < array_1.length; _i++) {\r\n        var entry = array_1[_i];\r\n        if (seenValues.has(entry)) {\r\n            return entry;\r\n        }\r\n        else {\r\n            seenValues.add(entry);\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\n","import * as ERROR_MSGS from '../constants/error_msgs';\r\nfunction getServiceIdentifierAsString(serviceIdentifier) {\r\n    if (typeof serviceIdentifier === 'function') {\r\n        var _serviceIdentifier = serviceIdentifier;\r\n        return _serviceIdentifier.name;\r\n    }\r\n    else if (typeof serviceIdentifier === 'symbol') {\r\n        return serviceIdentifier.toString();\r\n    }\r\n    else {\r\n        var _serviceIdentifier = serviceIdentifier;\r\n        return _serviceIdentifier;\r\n    }\r\n}\r\nfunction listRegisteredBindingsForServiceIdentifier(container, serviceIdentifier, getBindings) {\r\n    var registeredBindingsList = '';\r\n    var registeredBindings = getBindings(container, serviceIdentifier);\r\n    if (registeredBindings.length !== 0) {\r\n        registeredBindingsList = '\\nRegistered bindings:';\r\n        registeredBindings.forEach(function (binding) {\r\n            var name = 'Object';\r\n            if (binding.implementationType !== null) {\r\n                name = getFunctionName(binding.implementationType);\r\n            }\r\n            registeredBindingsList = registeredBindingsList + \"\\n \" + name;\r\n            if (binding.constraint.metaData) {\r\n                registeredBindingsList = registeredBindingsList + \" - \" + binding.constraint.metaData;\r\n            }\r\n        });\r\n    }\r\n    return registeredBindingsList;\r\n}\r\nfunction alreadyDependencyChain(request, serviceIdentifier) {\r\n    if (request.parentRequest === null) {\r\n        return false;\r\n    }\r\n    else if (request.parentRequest.serviceIdentifier === serviceIdentifier) {\r\n        return true;\r\n    }\r\n    else {\r\n        return alreadyDependencyChain(request.parentRequest, serviceIdentifier);\r\n    }\r\n}\r\nfunction dependencyChainToString(request) {\r\n    function _createStringArr(req, result) {\r\n        if (result === void 0) { result = []; }\r\n        var serviceIdentifier = getServiceIdentifierAsString(req.serviceIdentifier);\r\n        result.push(serviceIdentifier);\r\n        if (req.parentRequest !== null) {\r\n            return _createStringArr(req.parentRequest, result);\r\n        }\r\n        return result;\r\n    }\r\n    var stringArr = _createStringArr(request);\r\n    return stringArr.reverse().join(' --> ');\r\n}\r\nfunction circularDependencyToException(request) {\r\n    request.childRequests.forEach(function (childRequest) {\r\n        if (alreadyDependencyChain(childRequest, childRequest.serviceIdentifier)) {\r\n            var services = dependencyChainToString(childRequest);\r\n            throw new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY + \" \" + services);\r\n        }\r\n        else {\r\n            circularDependencyToException(childRequest);\r\n        }\r\n    });\r\n}\r\nfunction listMetadataForTarget(serviceIdentifierString, target) {\r\n    if (target.isTagged() || target.isNamed()) {\r\n        var m_1 = '';\r\n        var namedTag = target.getNamedTag();\r\n        var otherTags = target.getCustomTags();\r\n        if (namedTag !== null) {\r\n            m_1 += namedTag.toString() + '\\n';\r\n        }\r\n        if (otherTags !== null) {\r\n            otherTags.forEach(function (tag) {\r\n                m_1 += tag.toString() + '\\n';\r\n            });\r\n        }\r\n        return \" \" + serviceIdentifierString + \"\\n \" + serviceIdentifierString + \" - \" + m_1;\r\n    }\r\n    else {\r\n        return \" \" + serviceIdentifierString;\r\n    }\r\n}\r\nfunction getFunctionName(func) {\r\n    if (func.name) {\r\n        return func.name;\r\n    }\r\n    else {\r\n        var name_1 = func.toString();\r\n        var match = name_1.match(/^function\\s*([^\\s(]+)/);\r\n        return match ? match[1] : \"Anonymous function: \" + name_1;\r\n    }\r\n}\r\nfunction getSymbolDescription(symbol) {\r\n    return symbol.toString().slice(7, -1);\r\n}\r\nexport { getFunctionName, getServiceIdentifierAsString, listRegisteredBindingsForServiceIdentifier, listMetadataForTarget, circularDependencyToException, getSymbolDescription };\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.createTaggedDecorator = exports.tagProperty = exports.tagParameter = exports.decorate = void 0;\r\nvar ERROR_MSGS = __importStar(require(\"../constants/error_msgs\"));\r\nvar METADATA_KEY = __importStar(require(\"../constants/metadata_keys\"));\r\nvar js_1 = require(\"../utils/js\");\r\nfunction targetIsConstructorFunction(target) {\r\n    return target.prototype !== undefined;\r\n}\r\nfunction _throwIfMethodParameter(parameterName) {\r\n    if (parameterName !== undefined) {\r\n        throw new Error(ERROR_MSGS.INVALID_DECORATOR_OPERATION);\r\n    }\r\n}\r\nfunction tagParameter(annotationTarget, parameterName, parameterIndex, metadata) {\r\n    _throwIfMethodParameter(parameterName);\r\n    _tagParameterOrProperty(METADATA_KEY.TAGGED, annotationTarget, parameterIndex.toString(), metadata);\r\n}\r\nexports.tagParameter = tagParameter;\r\nfunction tagProperty(annotationTarget, propertyName, metadata) {\r\n    if (targetIsConstructorFunction(annotationTarget)) {\r\n        throw new Error(ERROR_MSGS.INVALID_DECORATOR_OPERATION);\r\n    }\r\n    _tagParameterOrProperty(METADATA_KEY.TAGGED_PROP, annotationTarget.constructor, propertyName, metadata);\r\n}\r\nexports.tagProperty = tagProperty;\r\nfunction _ensureNoMetadataKeyDuplicates(metadata) {\r\n    var metadatas = [];\r\n    if (Array.isArray(metadata)) {\r\n        metadatas = metadata;\r\n        var duplicate = (0, js_1.getFirstArrayDuplicate)(metadatas.map(function (md) { return md.key; }));\r\n        if (duplicate !== undefined) {\r\n            throw new Error(ERROR_MSGS.DUPLICATED_METADATA + \" \" + duplicate.toString());\r\n        }\r\n    }\r\n    else {\r\n        metadatas = [metadata];\r\n    }\r\n    return metadatas;\r\n}\r\nfunction _tagParameterOrProperty(metadataKey, annotationTarget, key, metadata) {\r\n    var metadatas = _ensureNoMetadataKeyDuplicates(metadata);\r\n    var paramsOrPropertiesMetadata = {};\r\n    if (Reflect.hasOwnMetadata(metadataKey, annotationTarget)) {\r\n        paramsOrPropertiesMetadata = Reflect.getMetadata(metadataKey, annotationTarget);\r\n    }\r\n    var paramOrPropertyMetadata = paramsOrPropertiesMetadata[key];\r\n    if (paramOrPropertyMetadata === undefined) {\r\n        paramOrPropertyMetadata = [];\r\n    }\r\n    else {\r\n        var _loop_1 = function (m) {\r\n            if (metadatas.some(function (md) { return md.key === m.key; })) {\r\n                throw new Error(ERROR_MSGS.DUPLICATED_METADATA + \" \" + m.key.toString());\r\n            }\r\n        };\r\n        for (var _i = 0, paramOrPropertyMetadata_1 = paramOrPropertyMetadata; _i < paramOrPropertyMetadata_1.length; _i++) {\r\n            var m = paramOrPropertyMetadata_1[_i];\r\n            _loop_1(m);\r\n        }\r\n    }\r\n    paramOrPropertyMetadata.push.apply(paramOrPropertyMetadata, metadatas);\r\n    paramsOrPropertiesMetadata[key] = paramOrPropertyMetadata;\r\n    Reflect.defineMetadata(metadataKey, paramsOrPropertiesMetadata, annotationTarget);\r\n}\r\nfunction createTaggedDecorator(metadata) {\r\n    return function (target, targetKey, indexOrPropertyDescriptor) {\r\n        if (typeof indexOrPropertyDescriptor === 'number') {\r\n            tagParameter(target, targetKey, indexOrPropertyDescriptor, metadata);\r\n        }\r\n        else {\r\n            tagProperty(target, targetKey, metadata);\r\n        }\r\n    };\r\n}\r\nexports.createTaggedDecorator = createTaggedDecorator;\r\nfunction _decorate(decorators, target) {\r\n    Reflect.decorate(decorators, target);\r\n}\r\nfunction _param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); };\r\n}\r\nfunction decorate(decorator, target, parameterIndexOrProperty) {\r\n    if (typeof parameterIndexOrProperty === 'number') {\r\n        _decorate([_param(parameterIndexOrProperty, decorator)], target);\r\n    }\r\n    else if (typeof parameterIndexOrProperty === 'string') {\r\n        Reflect.decorate([decorator], target, parameterIndexOrProperty);\r\n    }\r\n    else {\r\n        _decorate([decorator], target);\r\n    }\r\n}\r\nexports.decorate = decorate;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.inject = void 0;\r\nvar METADATA_KEY = __importStar(require(\"../constants/metadata_keys\"));\r\nvar inject_base_1 = require(\"./inject_base\");\r\nvar inject = (0, inject_base_1.injectBase)(METADATA_KEY.INJECT_TAG);\r\nexports.inject = inject;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.injectBase = void 0;\r\nvar error_msgs_1 = require(\"../constants/error_msgs\");\r\nvar metadata_1 = require(\"../planning/metadata\");\r\nvar decorator_utils_1 = require(\"./decorator_utils\");\r\nfunction injectBase(metadataKey) {\r\n    return function (serviceIdentifier) {\r\n        return function (target, targetKey, indexOrPropertyDescriptor) {\r\n            if (serviceIdentifier === undefined) {\r\n                var className = typeof target === 'function' ? target.name : target.constructor.name;\r\n                throw new Error((0, error_msgs_1.UNDEFINED_INJECT_ANNOTATION)(className));\r\n            }\r\n            return (0, decorator_utils_1.createTaggedDecorator)(new metadata_1.Metadata(metadataKey, serviceIdentifier))(target, targetKey, indexOrPropertyDescriptor);\r\n        };\r\n    };\r\n}\r\nexports.injectBase = injectBase;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.STACK_OVERFLOW = exports.CIRCULAR_DEPENDENCY_IN_FACTORY = exports.ON_DEACTIVATION_ERROR = exports.PRE_DESTROY_ERROR = exports.POST_CONSTRUCT_ERROR = exports.ASYNC_UNBIND_REQUIRED = exports.MULTIPLE_POST_CONSTRUCT_METHODS = exports.MULTIPLE_PRE_DESTROY_METHODS = exports.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK = exports.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE = exports.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE = exports.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT = exports.ARGUMENTS_LENGTH_MISMATCH = exports.INVALID_DECORATOR_OPERATION = exports.INVALID_TO_SELF_VALUE = exports.LAZY_IN_SYNC = exports.INVALID_FUNCTION_BINDING = exports.INVALID_MIDDLEWARE_RETURN = exports.NO_MORE_SNAPSHOTS_AVAILABLE = exports.INVALID_BINDING_TYPE = exports.NOT_IMPLEMENTED = exports.CIRCULAR_DEPENDENCY = exports.UNDEFINED_INJECT_ANNOTATION = exports.MISSING_INJECT_ANNOTATION = exports.MISSING_INJECTABLE_ANNOTATION = exports.NOT_REGISTERED = exports.CANNOT_UNBIND = exports.AMBIGUOUS_MATCH = exports.KEY_NOT_FOUND = exports.NULL_ARGUMENT = exports.DUPLICATED_METADATA = exports.DUPLICATED_INJECTABLE_DECORATOR = void 0;\r\nexports.DUPLICATED_INJECTABLE_DECORATOR = 'Cannot apply @injectable decorator multiple times.';\r\nexports.DUPLICATED_METADATA = 'Metadata key was used more than once in a parameter:';\r\nexports.NULL_ARGUMENT = 'NULL argument';\r\nexports.KEY_NOT_FOUND = 'Key Not Found';\r\nexports.AMBIGUOUS_MATCH = 'Ambiguous match found for serviceIdentifier:';\r\nexports.CANNOT_UNBIND = 'Could not unbind serviceIdentifier:';\r\nexports.NOT_REGISTERED = 'No matching bindings found for serviceIdentifier:';\r\nexports.MISSING_INJECTABLE_ANNOTATION = 'Missing required @injectable annotation in:';\r\nexports.MISSING_INJECT_ANNOTATION = 'Missing required @inject or @multiInject annotation in:';\r\nvar UNDEFINED_INJECT_ANNOTATION = function (name) {\r\n    return \"@inject called with undefined this could mean that the class \" + name + \" has \" +\r\n        'a circular dependency problem. You can use a LazyServiceIdentifier to  ' +\r\n        'overcome this limitation.';\r\n};\r\nexports.UNDEFINED_INJECT_ANNOTATION = UNDEFINED_INJECT_ANNOTATION;\r\nexports.CIRCULAR_DEPENDENCY = 'Circular dependency found:';\r\nexports.NOT_IMPLEMENTED = 'Sorry, this feature is not fully implemented yet.';\r\nexports.INVALID_BINDING_TYPE = 'Invalid binding type:';\r\nexports.NO_MORE_SNAPSHOTS_AVAILABLE = 'No snapshot available to restore.';\r\nexports.INVALID_MIDDLEWARE_RETURN = 'Invalid return type in middleware. Middleware must return!';\r\nexports.INVALID_FUNCTION_BINDING = 'Value provided to function binding must be a function!';\r\nvar LAZY_IN_SYNC = function (key) { return \"You are attempting to construct '\" + key + \"' in a synchronous way\\n but it has asynchronous dependencies.\"; };\r\nexports.LAZY_IN_SYNC = LAZY_IN_SYNC;\r\nexports.INVALID_TO_SELF_VALUE = 'The toSelf function can only be applied when a constructor is ' +\r\n    'used as service identifier';\r\nexports.INVALID_DECORATOR_OPERATION = 'The @inject @multiInject @tagged and @named decorators ' +\r\n    'must be applied to the parameters of a class constructor or a class property.';\r\nvar ARGUMENTS_LENGTH_MISMATCH = function () {\r\n    var values = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        values[_i] = arguments[_i];\r\n    }\r\n    return 'The number of constructor arguments in the derived class ' +\r\n        (values[0] + \" must be >= than the number of constructor arguments of its base class.\");\r\n};\r\nexports.ARGUMENTS_LENGTH_MISMATCH = ARGUMENTS_LENGTH_MISMATCH;\r\nexports.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT = 'Invalid Container constructor argument. Container options ' +\r\n    'must be an object.';\r\nexports.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE = 'Invalid Container option. Default scope must ' +\r\n    'be a string (\"singleton\" or \"transient\").';\r\nexports.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE = 'Invalid Container option. Auto bind injectable must ' +\r\n    'be a boolean';\r\nexports.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK = 'Invalid Container option. Skip base check must ' +\r\n    'be a boolean';\r\nexports.MULTIPLE_PRE_DESTROY_METHODS = 'Cannot apply @preDestroy decorator multiple times in the same class';\r\nexports.MULTIPLE_POST_CONSTRUCT_METHODS = 'Cannot apply @postConstruct decorator multiple times in the same class';\r\nexports.ASYNC_UNBIND_REQUIRED = 'Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)';\r\nvar POST_CONSTRUCT_ERROR = function (clazz, errorMessage) { return \"@postConstruct error in class \" + clazz + \": \" + errorMessage; };\r\nexports.POST_CONSTRUCT_ERROR = POST_CONSTRUCT_ERROR;\r\nvar PRE_DESTROY_ERROR = function (clazz, errorMessage) { return \"@preDestroy error in class \" + clazz + \": \" + errorMessage; };\r\nexports.PRE_DESTROY_ERROR = PRE_DESTROY_ERROR;\r\nvar ON_DEACTIVATION_ERROR = function (clazz, errorMessage) { return \"onDeactivation() error in class \" + clazz + \": \" + errorMessage; };\r\nexports.ON_DEACTIVATION_ERROR = ON_DEACTIVATION_ERROR;\r\nvar CIRCULAR_DEPENDENCY_IN_FACTORY = function (factoryType, serviceIdentifier) {\r\n    return \"It looks like there is a circular dependency in one of the '\" + factoryType + \"' bindings. Please investigate bindings with \" +\r\n        (\"service identifier '\" + serviceIdentifier + \"'.\");\r\n};\r\nexports.CIRCULAR_DEPENDENCY_IN_FACTORY = CIRCULAR_DEPENDENCY_IN_FACTORY;\r\nexports.STACK_OVERFLOW = 'Maximum call stack size exceeded';\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NON_CUSTOM_TAG_KEYS = exports.PRE_DESTROY = exports.POST_CONSTRUCT = exports.DESIGN_PARAM_TYPES = exports.PARAM_TYPES = exports.TAGGED_PROP = exports.TAGGED = exports.MULTI_INJECT_TAG = exports.INJECT_TAG = exports.OPTIONAL_TAG = exports.UNMANAGED_TAG = exports.NAME_TAG = exports.NAMED_TAG = void 0;\r\nexports.NAMED_TAG = 'named';\r\nexports.NAME_TAG = 'name';\r\nexports.UNMANAGED_TAG = 'unmanaged';\r\nexports.OPTIONAL_TAG = 'optional';\r\nexports.INJECT_TAG = 'inject';\r\nexports.MULTI_INJECT_TAG = 'multi_inject';\r\nexports.TAGGED = 'inversify:tagged';\r\nexports.TAGGED_PROP = 'inversify:tagged_props';\r\nexports.PARAM_TYPES = 'inversify:paramtypes';\r\nexports.DESIGN_PARAM_TYPES = 'design:paramtypes';\r\nexports.POST_CONSTRUCT = 'post_construct';\r\nexports.PRE_DESTROY = 'pre_destroy';\r\nfunction getNonCustomTagKeys() {\r\n    return [\r\n        exports.INJECT_TAG,\r\n        exports.MULTI_INJECT_TAG,\r\n        exports.NAME_TAG,\r\n        exports.UNMANAGED_TAG,\r\n        exports.NAMED_TAG,\r\n        exports.OPTIONAL_TAG,\r\n    ];\r\n}\r\nexports.NON_CUSTOM_TAG_KEYS = getNonCustomTagKeys();\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Metadata = void 0;\r\nvar METADATA_KEY = __importStar(require(\"../constants/metadata_keys\"));\r\nvar Metadata = (function () {\r\n    function Metadata(key, value) {\r\n        this.key = key;\r\n        this.value = value;\r\n    }\r\n    Metadata.prototype.toString = function () {\r\n        if (this.key === METADATA_KEY.NAMED_TAG) {\r\n            return \"named: \" + String(this.value).toString() + \" \";\r\n        }\r\n        else {\r\n            return \"tagged: { key:\" + this.key.toString() + \", value: \" + String(this.value) + \" }\";\r\n        }\r\n    };\r\n    return Metadata;\r\n}());\r\nexports.Metadata = Metadata;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getFirstArrayDuplicate = void 0;\r\nfunction getFirstArrayDuplicate(array) {\r\n    var seenValues = new Set();\r\n    for (var _i = 0, array_1 = array; _i < array_1.length; _i++) {\r\n        var entry = array_1[_i];\r\n        if (seenValues.has(entry)) {\r\n            return entry;\r\n        }\r\n        else {\r\n            seenValues.add(entry);\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexports.getFirstArrayDuplicate = getFirstArrayDuplicate;\r\n","'use strict';\n\n/**\n * Kuler: Color text using CSS colors\n *\n * @constructor\n * @param {String} text The text that needs to be styled\n * @param {String} color Optional color for alternate API.\n * @api public\n */\nfunction Kuler(text, color) {\n  if (color) return (new Kuler(text)).style(color);\n  if (!(this instanceof Kuler)) return new Kuler(text);\n\n  this.text = text;\n}\n\n/**\n * ANSI color codes.\n *\n * @type {String}\n * @private\n */\nKuler.prototype.prefix = '\\x1b[';\nKuler.prototype.suffix = 'm';\n\n/**\n * Parse a hex color string and parse it to it's RGB equiv.\n *\n * @param {String} color\n * @returns {Array}\n * @api private\n */\nKuler.prototype.hex = function hex(color) {\n  color = color[0] === '#' ? color.substring(1) : color;\n\n  //\n  // Pre-parse for shorthand hex colors.\n  //\n  if (color.length === 3) {\n    color = color.split('');\n\n    color[5] = color[2]; // F60##0\n    color[4] = color[2]; // F60#00\n    color[3] = color[1]; // F60600\n    color[2] = color[1]; // F66600\n    color[1] = color[0]; // FF6600\n\n    color = color.join('');\n  }\n\n  var r = color.substring(0, 2)\n    , g = color.substring(2, 4)\n    , b = color.substring(4, 6);\n\n  return [ parseInt(r, 16), parseInt(g, 16), parseInt(b, 16) ];\n};\n\n/**\n * Transform a 255 RGB value to an RGV code.\n *\n * @param {Number} r Red color channel.\n * @param {Number} g Green color channel.\n * @param {Number} b Blue color channel.\n * @returns {String}\n * @api public\n */\nKuler.prototype.rgb = function rgb(r, g, b) {\n  var red = r / 255 * 5\n    , green = g / 255 * 5\n    , blue = b / 255 * 5;\n\n  return this.ansi(red, green, blue);\n};\n\n/**\n * Turns RGB 0-5 values into a single ANSI code.\n *\n * @param {Number} r Red color channel.\n * @param {Number} g Green color channel.\n * @param {Number} b Blue color channel.\n * @returns {String}\n * @api public\n */\nKuler.prototype.ansi = function ansi(r, g, b) {\n  var red = Math.round(r)\n    , green = Math.round(g)\n    , blue = Math.round(b);\n\n  return 16 + (red * 36) + (green * 6) + blue;\n};\n\n/**\n * Marks an end of color sequence.\n *\n * @returns {String} Reset sequence.\n * @api public\n */\nKuler.prototype.reset = function reset() {\n  return this.prefix +'39;49'+ this.suffix;\n};\n\n/**\n * Colour the terminal using CSS.\n *\n * @param {String} color The HEX color code.\n * @returns {String} the escape code.\n * @api public\n */\nKuler.prototype.style = function style(color) {\n  return this.prefix +'38;5;'+ this.rgb.apply(this, this.hex(color)) + this.suffix + this.text + this.reset();\n};\n\n\n//\n// Expose the actual interface.\n//\nmodule.exports = Kuler;\n","'use strict';\n\nconst format = require('./format');\n\n/*\n * function align (info)\n * Returns a new instance of the align Format which adds a `\\t`\n * delimiter before the message to properly align it in the same place.\n * It was previously { align: true } in winston < 3.0.0\n */\nmodule.exports = format(info => {\n  info.message = `\\t${info.message}`;\n  return info;\n});\n","'use strict';\n\nconst { Colorizer } = require('./colorize');\nconst { Padder } = require('./pad-levels');\nconst { configs, MESSAGE } = require('triple-beam');\n\n\n/**\n * Cli format class that handles initial state for a a separate\n * Colorizer and Padder instance.\n */\nclass CliFormat {\n  constructor(opts = {}) {\n    if (!opts.levels) {\n      opts.levels = configs.cli.levels;\n    }\n\n    this.colorizer = new Colorizer(opts);\n    this.padder = new Padder(opts);\n    this.options = opts;\n  }\n\n  /*\n   * function transform (info, opts)\n   * Attempts to both:\n   * 1. Pad the { level }\n   * 2. Colorize the { level, message }\n   * of the given `logform` info object depending on the `opts`.\n   */\n  transform(info, opts) {\n    this.colorizer.transform(\n      this.padder.transform(info, opts),\n      opts\n    );\n\n    info[MESSAGE] = `${info.level}:${info.message}`;\n    return info;\n  }\n}\n\n/*\n * function cli (opts)\n * Returns a new instance of the CLI format that turns a log\n * `info` object into the same format previously available\n * in `winston.cli()` in `winston < 3.0.0`.\n */\nmodule.exports = opts => new CliFormat(opts);\n\n//\n// Attach the CliFormat for registration purposes\n//\nmodule.exports.Format = CliFormat;\n","'use strict';\n\nconst colors = require('@colors/colors/safe');\nconst { LEVEL, MESSAGE } = require('triple-beam');\n\n//\n// Fix colors not appearing in non-tty environments\n//\ncolors.enabled = true;\n\n/**\n * @property {RegExp} hasSpace\n * Simple regex to check for presence of spaces.\n */\nconst hasSpace = /\\s+/;\n\n/*\n * Colorizer format. Wraps the `level` and/or `message` properties\n * of the `info` objects with ANSI color codes based on a few options.\n */\nclass Colorizer {\n  constructor(opts = {}) {\n    if (opts.colors) {\n      this.addColors(opts.colors);\n    }\n\n    this.options = opts;\n  }\n\n  /*\n   * Adds the colors Object to the set of allColors\n   * known by the Colorizer\n   *\n   * @param {Object} colors Set of color mappings to add.\n   */\n  static addColors(clrs) {\n    const nextColors = Object.keys(clrs).reduce((acc, level) => {\n      acc[level] = hasSpace.test(clrs[level])\n        ? clrs[level].split(hasSpace)\n        : clrs[level];\n\n      return acc;\n    }, {});\n\n    Colorizer.allColors = Object.assign({}, Colorizer.allColors || {}, nextColors);\n    return Colorizer.allColors;\n  }\n\n  /*\n   * Adds the colors Object to the set of allColors\n   * known by the Colorizer\n   *\n   * @param {Object} colors Set of color mappings to add.\n   */\n  addColors(clrs) {\n    return Colorizer.addColors(clrs);\n  }\n\n  /*\n   * function colorize (lookup, level, message)\n   * Performs multi-step colorization using @colors/colors/safe\n   */\n  colorize(lookup, level, message) {\n    if (typeof message === 'undefined') {\n      message = level;\n    }\n\n    //\n    // If the color for the level is just a string\n    // then attempt to colorize the message with it.\n    //\n    if (!Array.isArray(Colorizer.allColors[lookup])) {\n      return colors[Colorizer.allColors[lookup]](message);\n    }\n\n    //\n    // If it is an Array then iterate over that Array, applying\n    // the colors function for each item.\n    //\n    for (let i = 0, len = Colorizer.allColors[lookup].length; i < len; i++) {\n      message = colors[Colorizer.allColors[lookup][i]](message);\n    }\n\n    return message;\n  }\n\n  /*\n   * function transform (info, opts)\n   * Attempts to colorize the { level, message } of the given\n   * `logform` info object.\n   */\n  transform(info, opts) {\n    if (opts.all && typeof info[MESSAGE] === 'string') {\n      info[MESSAGE] = this.colorize(info[LEVEL], info.level, info[MESSAGE]);\n    }\n\n    if (opts.level || opts.all || !opts.message) {\n      info.level = this.colorize(info[LEVEL], info.level);\n    }\n\n    if (opts.all || opts.message) {\n      info.message = this.colorize(info[LEVEL], info.level, info.message);\n    }\n\n    return info;\n  }\n}\n\n/*\n * function colorize (info)\n * Returns a new instance of the colorize Format that applies\n * level colors to `info` objects. This was previously exposed\n * as { colorize: true } to transports in `winston < 3.0.0`.\n */\nmodule.exports = opts => new Colorizer(opts);\n\n//\n// Attach the Colorizer for registration purposes\n//\nmodule.exports.Colorizer\n  = module.exports.Format\n  = Colorizer;\n","'use strict';\n\nconst format = require('./format');\n\n/*\n * function cascade(formats)\n * Returns a function that invokes the `._format` function in-order\n * for the specified set of `formats`. In this manner we say that Formats\n * are \"pipe-like\", but not a pure pumpify implementation. Since there is no back\n * pressure we can remove all of the \"readable\" plumbing in Node streams.\n */\nfunction cascade(formats) {\n  if (!formats.every(isValidFormat)) {\n    return;\n  }\n\n  return info => {\n    let obj = info;\n    for (let i = 0; i < formats.length; i++) {\n      obj = formats[i].transform(obj, formats[i].options);\n      if (!obj) {\n        return false;\n      }\n    }\n\n    return obj;\n  };\n}\n\n/*\n * function isValidFormat(format)\n * If the format does not define a `transform` function throw an error\n * with more detailed usage.\n */\nfunction isValidFormat(fmt) {\n  if (typeof fmt.transform !== 'function') {\n    throw new Error([\n      'No transform function found on format. Did you create a format instance?',\n      'const myFormat = format(formatFn);',\n      'const instance = myFormat();'\n    ].join('\\n'));\n  }\n\n  return true;\n}\n\n/*\n * function combine (info)\n * Returns a new instance of the combine Format which combines the specified\n * formats into a new format. This is similar to a pipe-chain in transform streams.\n * We choose to combine the prototypes this way because there is no back pressure in\n * an in-memory transform chain.\n */\nmodule.exports = (...formats) => {\n  const combinedFormat = format(cascade(formats));\n  const instance = combinedFormat();\n  instance.Format = combinedFormat.Format;\n  return instance;\n};\n\n//\n// Export the cascade method for use in cli and other\n// combined formats that should not be assumed to be\n// singletons.\n//\nmodule.exports.cascade = cascade;\n","/* eslint no-undefined: 0 */\n'use strict';\n\nconst format = require('./format');\nconst { LEVEL, MESSAGE } = require('triple-beam');\n\n/*\n * function errors (info)\n * If the `message` property of the `info` object is an instance of `Error`,\n * replace the `Error` object its own `message` property.\n *\n * Optionally, the Error's `stack` and/or `cause` properties can also be appended to the `info` object.\n */\nmodule.exports = format((einfo, { stack, cause }) => {\n  if (einfo instanceof Error) {\n    const info = Object.assign({}, einfo, {\n      level: einfo.level,\n      [LEVEL]: einfo[LEVEL] || einfo.level,\n      message: einfo.message,\n      [MESSAGE]: einfo[MESSAGE] || einfo.message\n    });\n\n    if (stack) info.stack = einfo.stack;\n    if (cause) info.cause = einfo.cause;\n    return info;\n  }\n\n  if (!(einfo.message instanceof Error)) return einfo;\n\n  // Assign all enumerable properties and the\n  // message property from the error provided.\n  const err = einfo.message;\n  Object.assign(einfo, err);\n  einfo.message = err.message;\n  einfo[MESSAGE] = err.message;\n\n  // Assign the stack and/or cause if requested.\n  if (stack) einfo.stack = err.stack;\n  if (cause) einfo.cause = err.cause;\n  return einfo;\n});\n","'use strict';\n\n/*\n * Displays a helpful message and the source of\n * the format when it is invalid.\n */\nclass InvalidFormatError extends Error {\n  constructor(formatFn) {\n    super(`Format functions must be synchronous taking a two arguments: (info, opts)\nFound: ${formatFn.toString().split('\\n')[0]}\\n`);\n\n    Error.captureStackTrace(this, InvalidFormatError);\n  }\n}\n\n/*\n * function format (formatFn)\n * Returns a create function for the `formatFn`.\n */\nmodule.exports = formatFn => {\n  if (formatFn.length > 2) {\n    throw new InvalidFormatError(formatFn);\n  }\n\n  /*\n   * function Format (options)\n   * Base prototype which calls a `_format`\n   * function and pushes the result.\n   */\n  function Format(options = {}) {\n    this.options = options;\n  }\n\n  Format.prototype.transform = formatFn;\n\n  //\n  // Create a function which returns new instances of\n  // FormatWrap for simple syntax like:\n  //\n  // require('winston').formats.json();\n  //\n  function createFormatWrap(opts) {\n    return new Format(opts);\n  }\n\n  //\n  // Expose the FormatWrap through the create function\n  // for testability.\n  //\n  createFormatWrap.Format = Format;\n  return createFormatWrap;\n};\n","'use strict';\n\n/*\n * @api public\n * @property {function} format\n * Both the construction method and set of exposed\n * formats.\n */\nconst format = exports.format = require('./format');\n\n/*\n * @api public\n * @method {function} levels\n * Registers the specified levels with logform.\n */\nexports.levels = require('./levels');\n\n/*\n * @api private\n * method {function} exposeFormat\n * Exposes a sub-format on the main format object\n * as a lazy-loaded getter.\n */\nfunction exposeFormat(name, requireFormat) {\n  Object.defineProperty(format, name, {\n    get() {\n      return requireFormat();\n    },\n    configurable: true\n  });\n}\n\n//\n// Setup all transports as lazy-loaded getters.\n//\nexposeFormat('align', function () { return require('./align'); });\nexposeFormat('errors', function () { return require('./errors'); });\nexposeFormat('cli', function () { return require('./cli'); });\nexposeFormat('combine', function () { return require('./combine'); });\nexposeFormat('colorize', function () { return require('./colorize'); });\nexposeFormat('json', function () { return require('./json'); });\nexposeFormat('label', function () { return require('./label'); });\nexposeFormat('logstash', function () { return require('./logstash'); });\nexposeFormat('metadata', function () { return require('./metadata'); });\nexposeFormat('ms', function () { return require('./ms'); });\nexposeFormat('padLevels', function () { return require('./pad-levels'); });\nexposeFormat('prettyPrint', function () { return require('./pretty-print'); });\nexposeFormat('printf', function () { return require('./printf'); });\nexposeFormat('simple', function () { return require('./simple'); });\nexposeFormat('splat', function () { return require('./splat'); });\nexposeFormat('timestamp', function () { return require('./timestamp'); });\nexposeFormat('uncolorize', function () { return require('./uncolorize'); });\n","'use strict';\n\nconst format = require('./format');\nconst { MESSAGE } = require('triple-beam');\nconst stringify = require('safe-stable-stringify');\n\n/*\n * function replacer (key, value)\n * Handles proper stringification of Buffer and bigint output.\n */\nfunction replacer(key, value) {\n  // safe-stable-stringify does support BigInt, however, it doesn't wrap the value in quotes.\n  // Leading to a loss in fidelity if the resulting string is parsed.\n  // It would also be a breaking change for logform.\n  if (typeof value === 'bigint')\n    return value.toString();\n  return value;\n}\n\n/*\n * function json (info)\n * Returns a new instance of the JSON format that turns a log `info`\n * object into pure JSON. This was previously exposed as { json: true }\n * to transports in `winston < 3.0.0`.\n */\nmodule.exports = format((info, opts) => {\n  const jsonStringify = stringify.configure(opts);\n  info[MESSAGE] = jsonStringify(info, opts.replacer || replacer, opts.space);\n  return info;\n});\n","'use strict';\n\nconst format = require('./format');\n\n/*\n * function label (info)\n * Returns a new instance of the label Format which adds the specified\n * `opts.label` before the message. This was previously exposed as\n * { label: 'my label' } to transports in `winston < 3.0.0`.\n */\nmodule.exports = format((info, opts) => {\n  if (opts.message) {\n    info.message = `[${opts.label}] ${info.message}`;\n    return info;\n  }\n\n  info.label = opts.label;\n  return info;\n});\n","'use strict';\n\nconst { Colorizer } = require('./colorize');\n\n/*\n * Simple method to register colors with a simpler require\n * path within the module.\n */\nmodule.exports = config => {\n  Colorizer.addColors(config.colors || config);\n  return config;\n};\n","'use strict';\n\nconst format = require('./format');\nconst { MESSAGE } = require('triple-beam');\nconst jsonStringify = require('safe-stable-stringify');\n\n/*\n * function logstash (info)\n * Returns a new instance of the LogStash Format that turns a\n * log `info` object into pure JSON with the appropriate logstash\n * options. This was previously exposed as { logstash: true }\n * to transports in `winston < 3.0.0`.\n */\nmodule.exports = format(info => {\n  const logstash = {};\n  if (info.message) {\n    logstash['@message'] = info.message;\n    delete info.message;\n  }\n\n  if (info.timestamp) {\n    logstash['@timestamp'] = info.timestamp;\n    delete info.timestamp;\n  }\n\n  logstash['@fields'] = info;\n  info[MESSAGE] = jsonStringify(logstash);\n  return info;\n});\n","'use strict';\n\nconst format = require('./format');\n\nfunction fillExcept(info, fillExceptKeys, metadataKey) {\n  const savedKeys = fillExceptKeys.reduce((acc, key) => {\n    acc[key] = info[key];\n    delete info[key];\n    return acc;\n  }, {});\n  const metadata = Object.keys(info).reduce((acc, key) => {\n    acc[key] = info[key];\n    delete info[key];\n    return acc;\n  }, {});\n\n  Object.assign(info, savedKeys, {\n    [metadataKey]: metadata\n  });\n  return info;\n}\n\nfunction fillWith(info, fillWithKeys, metadataKey) {\n  info[metadataKey] = fillWithKeys.reduce((acc, key) => {\n    acc[key] = info[key];\n    delete info[key];\n    return acc;\n  }, {});\n  return info;\n}\n\n/**\n * Adds in a \"metadata\" object to collect extraneous data, similar to the metadata\n * object in winston 2.x.\n */\nmodule.exports = format((info, opts = {}) => {\n  let metadataKey = 'metadata';\n  if (opts.key) {\n    metadataKey = opts.key;\n  }\n\n  let fillExceptKeys = [];\n  if (!opts.fillExcept && !opts.fillWith) {\n    fillExceptKeys.push('level');\n    fillExceptKeys.push('message');\n  }\n\n  if (opts.fillExcept) {\n    fillExceptKeys = opts.fillExcept;\n  }\n\n  if (fillExceptKeys.length > 0) {\n    return fillExcept(info, fillExceptKeys, metadataKey);\n  }\n\n  if (opts.fillWith) {\n    return fillWith(info, opts.fillWith, metadataKey);\n  }\n\n  return info;\n});\n","'use strict';\n\nconst format = require('./format');\nconst ms = require('ms');\n\n/*\n * function ms (info)\n * Returns an `info` with a `ms` property. The `ms` property holds the Value\n * of the time difference between two calls in milliseconds.\n */\nmodule.exports = format(info => {\n  const curr = +new Date();\n  this.diff = curr - (this.prevTime || curr);\n  this.prevTime = curr;\n  info.ms = `+${ms(this.diff)}`;\n\n  return info;\n});\n","/* eslint no-unused-vars: 0 */\n'use strict';\n\nconst { configs, LEVEL, MESSAGE } = require('triple-beam');\n\nclass Padder {\n  constructor(opts = { levels: configs.npm.levels }) {\n    this.paddings = Padder.paddingForLevels(opts.levels, opts.filler);\n    this.options = opts;\n  }\n\n  /**\n   * Returns the maximum length of keys in the specified `levels` Object.\n   * @param  {Object} levels Set of all levels to calculate longest level against.\n   * @returns {Number} Maximum length of the longest level string.\n   */\n  static getLongestLevel(levels) {\n    const lvls = Object.keys(levels).map(level => level.length);\n    return Math.max(...lvls);\n  }\n\n  /**\n   * Returns the padding for the specified `level` assuming that the\n   * maximum length of all levels it's associated with is `maxLength`.\n   * @param  {String} level Level to calculate padding for.\n   * @param  {String} filler Repeatable text to use for padding.\n   * @param  {Number} maxLength Length of the longest level\n   * @returns {String} Padding string for the `level`\n   */\n  static paddingForLevel(level, filler, maxLength) {\n    const targetLen = maxLength + 1 - level.length;\n    const rep = Math.floor(targetLen / filler.length);\n    const padding = `${filler}${filler.repeat(rep)}`;\n    return padding.slice(0, targetLen);\n  }\n\n  /**\n   * Returns an object with the string paddings for the given `levels`\n   * using the specified `filler`.\n   * @param  {Object} levels Set of all levels to calculate padding for.\n   * @param  {String} filler Repeatable text to use for padding.\n   * @returns {Object} Mapping of level to desired padding.\n   */\n  static paddingForLevels(levels, filler = ' ') {\n    const maxLength = Padder.getLongestLevel(levels);\n    return Object.keys(levels).reduce((acc, level) => {\n      acc[level] = Padder.paddingForLevel(level, filler, maxLength);\n      return acc;\n    }, {});\n  }\n\n  /**\n   * Prepends the padding onto the `message` based on the `LEVEL` of\n   * the `info`. This is based on the behavior of `winston@2` which also\n   * prepended the level onto the message.\n   *\n   * See: https://github.com/winstonjs/winston/blob/2.x/lib/winston/logger.js#L198-L201\n   *\n   * @param  {Info} info Logform info object\n   * @param  {Object} opts Options passed along to this instance.\n   * @returns {Info} Modified logform info object.\n   */\n  transform(info, opts) {\n    info.message = `${this.paddings[info[LEVEL]]}${info.message}`;\n    if (info[MESSAGE]) {\n      info[MESSAGE] = `${this.paddings[info[LEVEL]]}${info[MESSAGE]}`;\n    }\n\n    return info;\n  }\n}\n\n/*\n * function padLevels (info)\n * Returns a new instance of the padLevels Format which pads\n * levels to be the same length. This was previously exposed as\n * { padLevels: true } to transports in `winston < 3.0.0`.\n */\nmodule.exports = opts => new Padder(opts);\n\nmodule.exports.Padder\n  = module.exports.Format\n  = Padder;\n","'use strict';\n\nconst inspect = require('util').inspect;\nconst format = require('./format');\nconst { LEVEL, MESSAGE, SPLAT } = require('triple-beam');\n\n/*\n * function prettyPrint (info)\n * Returns a new instance of the prettyPrint Format that \"prettyPrint\"\n * serializes `info` objects. This was previously exposed as\n * { prettyPrint: true } to transports in `winston < 3.0.0`.\n */\nmodule.exports = format((info, opts = {}) => {\n  //\n  // info[{LEVEL, MESSAGE, SPLAT}] are enumerable here. Since they\n  // are internal, we remove them before util.inspect so they\n  // are not printed.\n  //\n  const stripped = Object.assign({}, info);\n\n  // Remark (indexzero): update this technique in April 2019\n  // when node@6 is EOL\n  delete stripped[LEVEL];\n  delete stripped[MESSAGE];\n  delete stripped[SPLAT];\n\n  info[MESSAGE] = inspect(stripped, false, opts.depth || null, opts.colorize);\n  return info;\n});\n","'use strict';\n\nconst { MESSAGE } = require('triple-beam');\n\nclass Printf {\n  constructor(templateFn) {\n    this.template = templateFn;\n  }\n\n  transform(info) {\n    info[MESSAGE] = this.template(info);\n    return info;\n  }\n}\n\n/*\n * function printf (templateFn)\n * Returns a new instance of the printf Format that creates an\n * intermediate prototype to store the template string-based formatter\n * function.\n */\nmodule.exports = opts => new Printf(opts);\n\nmodule.exports.Printf\n  = module.exports.Format\n  = Printf;\n","/* eslint no-undefined: 0 */\n'use strict';\n\nconst format = require('./format');\nconst { MESSAGE } = require('triple-beam');\nconst jsonStringify = require('safe-stable-stringify');\n\n/*\n * function simple (info)\n * Returns a new instance of the simple format TransformStream\n * which writes a simple representation of logs.\n *\n *    const { level, message, splat, ...rest } = info;\n *\n *    ${level}: ${message}                            if rest is empty\n *    ${level}: ${message} ${JSON.stringify(rest)}    otherwise\n */\nmodule.exports = format(info => {\n  const stringifiedRest = jsonStringify(Object.assign({}, info, {\n    level: undefined,\n    message: undefined,\n    splat: undefined\n  }));\n\n  const padding = info.padding && info.padding[info.level] || '';\n  if (stringifiedRest !== '{}') {\n    info[MESSAGE] = `${info.level}:${padding} ${info.message} ${stringifiedRest}`;\n  } else {\n    info[MESSAGE] = `${info.level}:${padding} ${info.message}`;\n  }\n\n  return info;\n});\n","'use strict';\n\nconst util = require('util');\nconst { SPLAT } = require('triple-beam');\n\n/**\n * Captures the number of format (i.e. %s strings) in a given string.\n * Based on `util.format`, see Node.js source:\n * https://github.com/nodejs/node/blob/b1c8f15c5f169e021f7c46eb7b219de95fe97603/lib/util.js#L201-L230\n * @type {RegExp}\n */\nconst formatRegExp = /%[scdjifoO%]/g;\n\n/**\n * Captures the number of escaped % signs in a format string (i.e. %s strings).\n * @type {RegExp}\n */\nconst escapedPercent = /%%/g;\n\nclass Splatter {\n  constructor(opts) {\n    this.options = opts;\n  }\n\n  /**\n     * Check to see if tokens <= splat.length, assign { splat, meta } into the\n     * `info` accordingly, and write to this instance.\n     *\n     * @param  {Info} info Logform info message.\n     * @param  {String[]} tokens Set of string interpolation tokens.\n     * @returns {Info} Modified info message\n     * @private\n     */\n  _splat(info, tokens) {\n    const msg = info.message;\n    const splat = info[SPLAT] || info.splat || [];\n    const percents = msg.match(escapedPercent);\n    const escapes = percents && percents.length || 0;\n\n    // The expected splat is the number of tokens minus the number of escapes\n    // e.g.\n    // - { expectedSplat: 3 } '%d %s %j'\n    // - { expectedSplat: 5 } '[%s] %d%% %d%% %s %j'\n    //\n    // Any \"meta\" will be arugments in addition to the expected splat size\n    // regardless of type. e.g.\n    //\n    // logger.log('info', '%d%% %s %j', 100, 'wow', { such: 'js' }, { thisIsMeta: true });\n    // would result in splat of four (4), but only three (3) are expected. Therefore:\n    //\n    // extraSplat = 3 - 4 = -1\n    // metas = [100, 'wow', { such: 'js' }, { thisIsMeta: true }].splice(-1, -1 * -1);\n    // splat = [100, 'wow', { such: 'js' }]\n    const expectedSplat = tokens.length - escapes;\n    const extraSplat = expectedSplat - splat.length;\n    const metas = extraSplat < 0\n      ? splat.splice(extraSplat, -1 * extraSplat)\n      : [];\n\n    // Now that { splat } has been separated from any potential { meta }. we\n    // can assign this to the `info` object and write it to our format stream.\n    // If the additional metas are **NOT** objects or **LACK** enumerable properties\n    // you are going to have a bad time.\n    const metalen = metas.length;\n    if (metalen) {\n      for (let i = 0; i < metalen; i++) {\n        Object.assign(info, metas[i]);\n      }\n    }\n\n    info.message = util.format(msg, ...splat);\n    return info;\n  }\n\n  /**\n    * Transforms the `info` message by using `util.format` to complete\n    * any `info.message` provided it has string interpolation tokens.\n    * If no tokens exist then `info` is immutable.\n    *\n    * @param  {Info} info Logform info message.\n    * @param  {Object} opts Options for this instance.\n    * @returns {Info} Modified info message\n    */\n  transform(info) {\n    const msg = info.message;\n    const splat = info[SPLAT] || info.splat;\n\n    // No need to process anything if splat is undefined\n    if (!splat || !splat.length) {\n      return info;\n    }\n\n    // Extract tokens, if none available default to empty array to\n    // ensure consistancy in expected results\n    const tokens = msg && msg.match && msg.match(formatRegExp);\n\n    // This condition will take care of inputs with info[SPLAT]\n    // but no tokens present\n    if (!tokens && (splat || splat.length)) {\n      const metas = splat.length > 1\n        ? splat.splice(0)\n        : splat;\n\n      // Now that { splat } has been separated from any potential { meta }. we\n      // can assign this to the `info` object and write it to our format stream.\n      // If the additional metas are **NOT** objects or **LACK** enumerable properties\n      // you are going to have a bad time.\n      const metalen = metas.length;\n      if (metalen) {\n        for (let i = 0; i < metalen; i++) {\n          Object.assign(info, metas[i]);\n        }\n      }\n\n      return info;\n    }\n\n    if (tokens) {\n      return this._splat(info, tokens);\n    }\n\n    return info;\n  }\n}\n\n/*\n * function splat (info)\n * Returns a new instance of the splat format TransformStream\n * which performs string interpolation from `info` objects. This was\n * previously exposed implicitly in `winston < 3.0.0`.\n */\nmodule.exports = opts => new Splatter(opts);\n","'use strict';\n\nconst fecha = require('fecha');\nconst format = require('./format');\n\n/*\n * function timestamp (info)\n * Returns a new instance of the timestamp Format which adds a timestamp\n * to the info. It was previously available in winston < 3.0.0 as:\n *\n * - { timestamp: true }             // `new Date.toISOString()`\n * - { timestamp: function:String }  // Value returned by `timestamp()`\n */\nmodule.exports = format((info, opts = {}) => {\n  if (opts.format) {\n    info.timestamp = typeof opts.format === 'function'\n      ? opts.format()\n      : fecha.format(new Date(), opts.format);\n  }\n\n  if (!info.timestamp) {\n    info.timestamp = new Date().toISOString();\n  }\n\n  if (opts.alias) {\n    info[opts.alias] = info.timestamp;\n  }\n\n  return info;\n});\n","'use strict';\n\nconst colors = require('@colors/colors/safe');\nconst format = require('./format');\nconst { MESSAGE } = require('triple-beam');\n\n/*\n * function uncolorize (info)\n * Returns a new instance of the uncolorize Format that strips colors\n * from `info` objects. This was previously exposed as { stripColors: true }\n * to transports in `winston < 3.0.0`.\n */\nmodule.exports = format((info, opts) => {\n  if (opts.level !== false) {\n    info.level = colors.strip(info.level);\n  }\n\n  if (opts.message !== false) {\n    info.message = colors.strip(String(info.message));\n  }\n\n  if (opts.raw !== false && info[MESSAGE]) {\n    info[MESSAGE] = colors.strip(String(info[MESSAGE]));\n  }\n\n  return info;\n});\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function (val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","'use strict';\n\nvar name = require('fn.name');\n\n/**\n * Wrap callbacks to prevent double execution.\n *\n * @param {Function} fn Function that should only be called once.\n * @returns {Function} A wrapped callback which prevents multiple executions.\n * @public\n */\nmodule.exports = function one(fn) {\n  var called = 0\n    , value;\n\n  /**\n   * The function that prevents double execution.\n   *\n   * @private\n   */\n  function onetime() {\n    if (called) return value;\n\n    called = 1;\n    value = fn.apply(this, arguments);\n    fn = null;\n\n    return value;\n  }\n\n  //\n  // To make debugging more easy we want to use the name of the supplied\n  // function. So when you look at the functions that are assigned to event\n  // listeners you don't see a load of `onetime` functions but actually the\n  // names of the functions that this module will call.\n  //\n  // NOTE: We cannot override the `name` property, as that is `readOnly`\n  // property, so displayName will have to do.\n  //\n  onetime.displayName = name(fn);\n  return onetime;\n};\n","// for now just expose the builtin process global from node.js\nmodule.exports = global.process;\n","/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof global === \"object\" ? global :\n            typeof self === \"object\" ? self :\n                typeof this === \"object\" ? this :\n                    Function(\"return this;\")();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        else {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter);\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                if (typeof target[key] !== \"function\") {\n                    Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                }\n                if (previous)\n                    previous(key, value);\n            };\n        }\n    })(function (exporter) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var usePolyfill = typeof process === \"object\" && process[\"env\" + \"\"] && process[\"env\" + \"\"][\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\n        var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        // [[Metadata]] internal slot\n        // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n        var Metadata = new _WeakMap();\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            if (!metadataMap.delete(metadataKey))\n                return false;\n            if (metadataMap.size > 0)\n                return true;\n            var targetMetadata = Metadata.get(target);\n            targetMetadata.delete(propertyKey);\n            if (targetMetadata.size > 0)\n                return true;\n            Metadata.delete(target);\n            return true;\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        function GetOrCreateMetadataMap(O, P, Create) {\n            var targetMetadata = Metadata.get(O);\n            if (IsUndefined(targetMetadata)) {\n                if (!Create)\n                    return undefined;\n                targetMetadata = new _Map();\n                Metadata.set(O, targetMetadata);\n            }\n            var metadataMap = targetMetadata.get(P);\n            if (IsUndefined(metadataMap)) {\n                if (!Create)\n                    return undefined;\n                metadataMap = new _Map();\n                targetMetadata.set(P, metadataMap);\n            }\n            return metadataMap;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            return ToBoolean(metadataMap.has(MetadataKey));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return undefined;\n            return metadataMap.get(MetadataKey);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n            metadataMap.set(MetadataKey, MetadataValue);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var keys = [];\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return keys;\n            var keysObj = metadataMap.keys();\n            var iterator = GetIterator(keysObj);\n            var k = 0;\n            while (true) {\n                var next = IteratorStep(iterator);\n                if (!next) {\n                    keys.length = k;\n                    return keys;\n                }\n                var nextValue = IteratorValue(next);\n                try {\n                    keys[k] = nextValue;\n                }\n                catch (e) {\n                    try {\n                        IteratorClose(iterator);\n                    }\n                    finally {\n                        throw e;\n                    }\n                }\n                k++;\n            }\n        }\n        // 6 ECMAScript Data Typ0es and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            return /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (key === this._cacheKey) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (this._cacheKey !== key) {\n                        this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            return /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.values(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    if (typeof crypto !== \"undefined\")\n                        return crypto.getRandomValues(new Uint8Array(size));\n                    if (typeof msCrypto !== \"undefined\")\n                        return msCrypto.getRandomValues(new Uint8Array(size));\n                    return FillRandomBytes(new Uint8Array(size), size);\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122 § 4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n","/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","'use strict'\n\nconst { hasOwnProperty } = Object.prototype\n\nconst stringify = configure()\n\n// @ts-expect-error\nstringify.configure = configure\n// @ts-expect-error\nstringify.stringify = stringify\n\n// @ts-expect-error\nstringify.default = stringify\n\n// @ts-expect-error used for named export\nexports.stringify = stringify\n// @ts-expect-error used for named export\nexports.configure = configure\n\nmodule.exports = stringify\n\n// eslint-disable-next-line no-control-regex\nconst strEscapeSequencesRegExp = /[\\u0000-\\u001f\\u0022\\u005c\\ud800-\\udfff]/\n\n// Escape C0 control characters, double quotes, the backslash and every code\n// unit with a numeric value in the inclusive range 0xD800 to 0xDFFF.\nfunction strEscape (str) {\n  // Some magic numbers that worked out fine while benchmarking with v8 8.0\n  if (str.length < 5000 && !strEscapeSequencesRegExp.test(str)) {\n    return `\"${str}\"`\n  }\n  return JSON.stringify(str)\n}\n\nfunction sort (array, comparator) {\n  // Insertion sort is very efficient for small input sizes, but it has a bad\n  // worst case complexity. Thus, use native array sort for bigger values.\n  if (array.length > 2e2 || comparator) {\n    return array.sort(comparator)\n  }\n  for (let i = 1; i < array.length; i++) {\n    const currentValue = array[i]\n    let position = i\n    while (position !== 0 && array[position - 1] > currentValue) {\n      array[position] = array[position - 1]\n      position--\n    }\n    array[position] = currentValue\n  }\n  return array\n}\n\nconst typedArrayPrototypeGetSymbolToStringTag =\n  Object.getOwnPropertyDescriptor(\n    Object.getPrototypeOf(\n      Object.getPrototypeOf(\n        new Int8Array()\n      )\n    ),\n    Symbol.toStringTag\n  ).get\n\nfunction isTypedArrayWithEntries (value) {\n  return typedArrayPrototypeGetSymbolToStringTag.call(value) !== undefined && value.length !== 0\n}\n\nfunction stringifyTypedArray (array, separator, maximumBreadth) {\n  if (array.length < maximumBreadth) {\n    maximumBreadth = array.length\n  }\n  const whitespace = separator === ',' ? '' : ' '\n  let res = `\"0\":${whitespace}${array[0]}`\n  for (let i = 1; i < maximumBreadth; i++) {\n    res += `${separator}\"${i}\":${whitespace}${array[i]}`\n  }\n  return res\n}\n\nfunction getCircularValueOption (options) {\n  if (hasOwnProperty.call(options, 'circularValue')) {\n    const circularValue = options.circularValue\n    if (typeof circularValue === 'string') {\n      return `\"${circularValue}\"`\n    }\n    if (circularValue == null) {\n      return circularValue\n    }\n    if (circularValue === Error || circularValue === TypeError) {\n      return {\n        toString () {\n          throw new TypeError('Converting circular structure to JSON')\n        }\n      }\n    }\n    throw new TypeError('The \"circularValue\" argument must be of type string or the value null or undefined')\n  }\n  return '\"[Circular]\"'\n}\n\nfunction getDeterministicOption (options) {\n  let value\n  if (hasOwnProperty.call(options, 'deterministic')) {\n    value = options.deterministic\n    if (typeof value !== 'boolean' && typeof value !== 'function') {\n      throw new TypeError('The \"deterministic\" argument must be of type boolean or comparator function')\n    }\n  }\n  return value === undefined ? true : value\n}\n\nfunction getBooleanOption (options, key) {\n  let value\n  if (hasOwnProperty.call(options, key)) {\n    value = options[key]\n    if (typeof value !== 'boolean') {\n      throw new TypeError(`The \"${key}\" argument must be of type boolean`)\n    }\n  }\n  return value === undefined ? true : value\n}\n\nfunction getPositiveIntegerOption (options, key) {\n  let value\n  if (hasOwnProperty.call(options, key)) {\n    value = options[key]\n    if (typeof value !== 'number') {\n      throw new TypeError(`The \"${key}\" argument must be of type number`)\n    }\n    if (!Number.isInteger(value)) {\n      throw new TypeError(`The \"${key}\" argument must be an integer`)\n    }\n    if (value < 1) {\n      throw new RangeError(`The \"${key}\" argument must be >= 1`)\n    }\n  }\n  return value === undefined ? Infinity : value\n}\n\nfunction getItemCount (number) {\n  if (number === 1) {\n    return '1 item'\n  }\n  return `${number} items`\n}\n\nfunction getUniqueReplacerSet (replacerArray) {\n  const replacerSet = new Set()\n  for (const value of replacerArray) {\n    if (typeof value === 'string' || typeof value === 'number') {\n      replacerSet.add(String(value))\n    }\n  }\n  return replacerSet\n}\n\nfunction getStrictOption (options) {\n  if (hasOwnProperty.call(options, 'strict')) {\n    const value = options.strict\n    if (typeof value !== 'boolean') {\n      throw new TypeError('The \"strict\" argument must be of type boolean')\n    }\n    if (value) {\n      return (value) => {\n        let message = `Object can not safely be stringified. Received type ${typeof value}`\n        if (typeof value !== 'function') message += ` (${value.toString()})`\n        throw new Error(message)\n      }\n    }\n  }\n}\n\nfunction configure (options) {\n  options = { ...options }\n  const fail = getStrictOption(options)\n  if (fail) {\n    if (options.bigint === undefined) {\n      options.bigint = false\n    }\n    if (!('circularValue' in options)) {\n      options.circularValue = Error\n    }\n  }\n  const circularValue = getCircularValueOption(options)\n  const bigint = getBooleanOption(options, 'bigint')\n  const deterministic = getDeterministicOption(options)\n  const comparator = typeof deterministic === 'function' ? deterministic : undefined\n  const maximumDepth = getPositiveIntegerOption(options, 'maximumDepth')\n  const maximumBreadth = getPositiveIntegerOption(options, 'maximumBreadth')\n\n  function stringifyFnReplacer (key, parent, stack, replacer, spacer, indentation) {\n    let value = parent[key]\n\n    if (typeof value === 'object' && value !== null && typeof value.toJSON === 'function') {\n      value = value.toJSON(key)\n    }\n    value = replacer.call(parent, key, value)\n\n    switch (typeof value) {\n      case 'string':\n        return strEscape(value)\n      case 'object': {\n        if (value === null) {\n          return 'null'\n        }\n        if (stack.indexOf(value) !== -1) {\n          return circularValue\n        }\n\n        let res = ''\n        let join = ','\n        const originalIndentation = indentation\n\n        if (Array.isArray(value)) {\n          if (value.length === 0) {\n            return '[]'\n          }\n          if (maximumDepth < stack.length + 1) {\n            return '\"[Array]\"'\n          }\n          stack.push(value)\n          if (spacer !== '') {\n            indentation += spacer\n            res += `\\n${indentation}`\n            join = `,\\n${indentation}`\n          }\n          const maximumValuesToStringify = Math.min(value.length, maximumBreadth)\n          let i = 0\n          for (; i < maximumValuesToStringify - 1; i++) {\n            const tmp = stringifyFnReplacer(String(i), value, stack, replacer, spacer, indentation)\n            res += tmp !== undefined ? tmp : 'null'\n            res += join\n          }\n          const tmp = stringifyFnReplacer(String(i), value, stack, replacer, spacer, indentation)\n          res += tmp !== undefined ? tmp : 'null'\n          if (value.length - 1 > maximumBreadth) {\n            const removedKeys = value.length - maximumBreadth - 1\n            res += `${join}\"... ${getItemCount(removedKeys)} not stringified\"`\n          }\n          if (spacer !== '') {\n            res += `\\n${originalIndentation}`\n          }\n          stack.pop()\n          return `[${res}]`\n        }\n\n        let keys = Object.keys(value)\n        const keyLength = keys.length\n        if (keyLength === 0) {\n          return '{}'\n        }\n        if (maximumDepth < stack.length + 1) {\n          return '\"[Object]\"'\n        }\n        let whitespace = ''\n        let separator = ''\n        if (spacer !== '') {\n          indentation += spacer\n          join = `,\\n${indentation}`\n          whitespace = ' '\n        }\n        const maximumPropertiesToStringify = Math.min(keyLength, maximumBreadth)\n        if (deterministic && !isTypedArrayWithEntries(value)) {\n          keys = sort(keys, comparator)\n        }\n        stack.push(value)\n        for (let i = 0; i < maximumPropertiesToStringify; i++) {\n          const key = keys[i]\n          const tmp = stringifyFnReplacer(key, value, stack, replacer, spacer, indentation)\n          if (tmp !== undefined) {\n            res += `${separator}${strEscape(key)}:${whitespace}${tmp}`\n            separator = join\n          }\n        }\n        if (keyLength > maximumBreadth) {\n          const removedKeys = keyLength - maximumBreadth\n          res += `${separator}\"...\":${whitespace}\"${getItemCount(removedKeys)} not stringified\"`\n          separator = join\n        }\n        if (spacer !== '' && separator.length > 1) {\n          res = `\\n${indentation}${res}\\n${originalIndentation}`\n        }\n        stack.pop()\n        return `{${res}}`\n      }\n      case 'number':\n        return isFinite(value) ? String(value) : fail ? fail(value) : 'null'\n      case 'boolean':\n        return value === true ? 'true' : 'false'\n      case 'undefined':\n        return undefined\n      case 'bigint':\n        if (bigint) {\n          return String(value)\n        }\n        // fallthrough\n      default:\n        return fail ? fail(value) : undefined\n    }\n  }\n\n  function stringifyArrayReplacer (key, value, stack, replacer, spacer, indentation) {\n    if (typeof value === 'object' && value !== null && typeof value.toJSON === 'function') {\n      value = value.toJSON(key)\n    }\n\n    switch (typeof value) {\n      case 'string':\n        return strEscape(value)\n      case 'object': {\n        if (value === null) {\n          return 'null'\n        }\n        if (stack.indexOf(value) !== -1) {\n          return circularValue\n        }\n\n        const originalIndentation = indentation\n        let res = ''\n        let join = ','\n\n        if (Array.isArray(value)) {\n          if (value.length === 0) {\n            return '[]'\n          }\n          if (maximumDepth < stack.length + 1) {\n            return '\"[Array]\"'\n          }\n          stack.push(value)\n          if (spacer !== '') {\n            indentation += spacer\n            res += `\\n${indentation}`\n            join = `,\\n${indentation}`\n          }\n          const maximumValuesToStringify = Math.min(value.length, maximumBreadth)\n          let i = 0\n          for (; i < maximumValuesToStringify - 1; i++) {\n            const tmp = stringifyArrayReplacer(String(i), value[i], stack, replacer, spacer, indentation)\n            res += tmp !== undefined ? tmp : 'null'\n            res += join\n          }\n          const tmp = stringifyArrayReplacer(String(i), value[i], stack, replacer, spacer, indentation)\n          res += tmp !== undefined ? tmp : 'null'\n          if (value.length - 1 > maximumBreadth) {\n            const removedKeys = value.length - maximumBreadth - 1\n            res += `${join}\"... ${getItemCount(removedKeys)} not stringified\"`\n          }\n          if (spacer !== '') {\n            res += `\\n${originalIndentation}`\n          }\n          stack.pop()\n          return `[${res}]`\n        }\n        stack.push(value)\n        let whitespace = ''\n        if (spacer !== '') {\n          indentation += spacer\n          join = `,\\n${indentation}`\n          whitespace = ' '\n        }\n        let separator = ''\n        for (const key of replacer) {\n          const tmp = stringifyArrayReplacer(key, value[key], stack, replacer, spacer, indentation)\n          if (tmp !== undefined) {\n            res += `${separator}${strEscape(key)}:${whitespace}${tmp}`\n            separator = join\n          }\n        }\n        if (spacer !== '' && separator.length > 1) {\n          res = `\\n${indentation}${res}\\n${originalIndentation}`\n        }\n        stack.pop()\n        return `{${res}}`\n      }\n      case 'number':\n        return isFinite(value) ? String(value) : fail ? fail(value) : 'null'\n      case 'boolean':\n        return value === true ? 'true' : 'false'\n      case 'undefined':\n        return undefined\n      case 'bigint':\n        if (bigint) {\n          return String(value)\n        }\n        // fallthrough\n      default:\n        return fail ? fail(value) : undefined\n    }\n  }\n\n  function stringifyIndent (key, value, stack, spacer, indentation) {\n    switch (typeof value) {\n      case 'string':\n        return strEscape(value)\n      case 'object': {\n        if (value === null) {\n          return 'null'\n        }\n        if (typeof value.toJSON === 'function') {\n          value = value.toJSON(key)\n          // Prevent calling `toJSON` again.\n          if (typeof value !== 'object') {\n            return stringifyIndent(key, value, stack, spacer, indentation)\n          }\n          if (value === null) {\n            return 'null'\n          }\n        }\n        if (stack.indexOf(value) !== -1) {\n          return circularValue\n        }\n        const originalIndentation = indentation\n\n        if (Array.isArray(value)) {\n          if (value.length === 0) {\n            return '[]'\n          }\n          if (maximumDepth < stack.length + 1) {\n            return '\"[Array]\"'\n          }\n          stack.push(value)\n          indentation += spacer\n          let res = `\\n${indentation}`\n          const join = `,\\n${indentation}`\n          const maximumValuesToStringify = Math.min(value.length, maximumBreadth)\n          let i = 0\n          for (; i < maximumValuesToStringify - 1; i++) {\n            const tmp = stringifyIndent(String(i), value[i], stack, spacer, indentation)\n            res += tmp !== undefined ? tmp : 'null'\n            res += join\n          }\n          const tmp = stringifyIndent(String(i), value[i], stack, spacer, indentation)\n          res += tmp !== undefined ? tmp : 'null'\n          if (value.length - 1 > maximumBreadth) {\n            const removedKeys = value.length - maximumBreadth - 1\n            res += `${join}\"... ${getItemCount(removedKeys)} not stringified\"`\n          }\n          res += `\\n${originalIndentation}`\n          stack.pop()\n          return `[${res}]`\n        }\n\n        let keys = Object.keys(value)\n        const keyLength = keys.length\n        if (keyLength === 0) {\n          return '{}'\n        }\n        if (maximumDepth < stack.length + 1) {\n          return '\"[Object]\"'\n        }\n        indentation += spacer\n        const join = `,\\n${indentation}`\n        let res = ''\n        let separator = ''\n        let maximumPropertiesToStringify = Math.min(keyLength, maximumBreadth)\n        if (isTypedArrayWithEntries(value)) {\n          res += stringifyTypedArray(value, join, maximumBreadth)\n          keys = keys.slice(value.length)\n          maximumPropertiesToStringify -= value.length\n          separator = join\n        }\n        if (deterministic) {\n          keys = sort(keys, comparator)\n        }\n        stack.push(value)\n        for (let i = 0; i < maximumPropertiesToStringify; i++) {\n          const key = keys[i]\n          const tmp = stringifyIndent(key, value[key], stack, spacer, indentation)\n          if (tmp !== undefined) {\n            res += `${separator}${strEscape(key)}: ${tmp}`\n            separator = join\n          }\n        }\n        if (keyLength > maximumBreadth) {\n          const removedKeys = keyLength - maximumBreadth\n          res += `${separator}\"...\": \"${getItemCount(removedKeys)} not stringified\"`\n          separator = join\n        }\n        if (separator !== '') {\n          res = `\\n${indentation}${res}\\n${originalIndentation}`\n        }\n        stack.pop()\n        return `{${res}}`\n      }\n      case 'number':\n        return isFinite(value) ? String(value) : fail ? fail(value) : 'null'\n      case 'boolean':\n        return value === true ? 'true' : 'false'\n      case 'undefined':\n        return undefined\n      case 'bigint':\n        if (bigint) {\n          return String(value)\n        }\n        // fallthrough\n      default:\n        return fail ? fail(value) : undefined\n    }\n  }\n\n  function stringifySimple (key, value, stack) {\n    switch (typeof value) {\n      case 'string':\n        return strEscape(value)\n      case 'object': {\n        if (value === null) {\n          return 'null'\n        }\n        if (typeof value.toJSON === 'function') {\n          value = value.toJSON(key)\n          // Prevent calling `toJSON` again\n          if (typeof value !== 'object') {\n            return stringifySimple(key, value, stack)\n          }\n          if (value === null) {\n            return 'null'\n          }\n        }\n        if (stack.indexOf(value) !== -1) {\n          return circularValue\n        }\n\n        let res = ''\n\n        const hasLength = value.length !== undefined\n        if (hasLength && Array.isArray(value)) {\n          if (value.length === 0) {\n            return '[]'\n          }\n          if (maximumDepth < stack.length + 1) {\n            return '\"[Array]\"'\n          }\n          stack.push(value)\n          const maximumValuesToStringify = Math.min(value.length, maximumBreadth)\n          let i = 0\n          for (; i < maximumValuesToStringify - 1; i++) {\n            const tmp = stringifySimple(String(i), value[i], stack)\n            res += tmp !== undefined ? tmp : 'null'\n            res += ','\n          }\n          const tmp = stringifySimple(String(i), value[i], stack)\n          res += tmp !== undefined ? tmp : 'null'\n          if (value.length - 1 > maximumBreadth) {\n            const removedKeys = value.length - maximumBreadth - 1\n            res += `,\"... ${getItemCount(removedKeys)} not stringified\"`\n          }\n          stack.pop()\n          return `[${res}]`\n        }\n\n        let keys = Object.keys(value)\n        const keyLength = keys.length\n        if (keyLength === 0) {\n          return '{}'\n        }\n        if (maximumDepth < stack.length + 1) {\n          return '\"[Object]\"'\n        }\n        let separator = ''\n        let maximumPropertiesToStringify = Math.min(keyLength, maximumBreadth)\n        if (hasLength && isTypedArrayWithEntries(value)) {\n          res += stringifyTypedArray(value, ',', maximumBreadth)\n          keys = keys.slice(value.length)\n          maximumPropertiesToStringify -= value.length\n          separator = ','\n        }\n        if (deterministic) {\n          keys = sort(keys, comparator)\n        }\n        stack.push(value)\n        for (let i = 0; i < maximumPropertiesToStringify; i++) {\n          const key = keys[i]\n          const tmp = stringifySimple(key, value[key], stack)\n          if (tmp !== undefined) {\n            res += `${separator}${strEscape(key)}:${tmp}`\n            separator = ','\n          }\n        }\n        if (keyLength > maximumBreadth) {\n          const removedKeys = keyLength - maximumBreadth\n          res += `${separator}\"...\":\"${getItemCount(removedKeys)} not stringified\"`\n        }\n        stack.pop()\n        return `{${res}}`\n      }\n      case 'number':\n        return isFinite(value) ? String(value) : fail ? fail(value) : 'null'\n      case 'boolean':\n        return value === true ? 'true' : 'false'\n      case 'undefined':\n        return undefined\n      case 'bigint':\n        if (bigint) {\n          return String(value)\n        }\n        // fallthrough\n      default:\n        return fail ? fail(value) : undefined\n    }\n  }\n\n  function stringify (value, replacer, space) {\n    if (arguments.length > 1) {\n      let spacer = ''\n      if (typeof space === 'number') {\n        spacer = ' '.repeat(Math.min(space, 10))\n      } else if (typeof space === 'string') {\n        spacer = space.slice(0, 10)\n      }\n      if (replacer != null) {\n        if (typeof replacer === 'function') {\n          return stringifyFnReplacer('', { '': value }, [], replacer, spacer, '')\n        }\n        if (Array.isArray(replacer)) {\n          return stringifyArrayReplacer('', value, [], getUniqueReplacerSet(replacer), spacer, '')\n        }\n      }\n      if (spacer.length !== 0) {\n        return stringifyIndent('', value, [], spacer, '')\n      }\n    }\n    return stringifySimple('', value, [])\n  }\n\n  return stringify\n}\n","'use strict';\n\nvar isArrayish = require('is-arrayish');\n\nvar concat = Array.prototype.concat;\nvar slice = Array.prototype.slice;\n\nvar swizzle = module.exports = function swizzle(args) {\n\tvar results = [];\n\n\tfor (var i = 0, len = args.length; i < len; i++) {\n\t\tvar arg = args[i];\n\n\t\tif (isArrayish(arg)) {\n\t\t\t// http://jsperf.com/javascript-array-concat-vs-push/98\n\t\t\tresults = concat.call(results, slice.call(arg));\n\t\t} else {\n\t\t\tresults.push(arg);\n\t\t}\n\t}\n\n\treturn results;\n};\n\nswizzle.wrap = function (fn) {\n\treturn function () {\n\t\treturn fn(swizzle(arguments));\n\t};\n};\n","module.exports = function isArrayish(obj) {\n\tif (!obj || typeof obj === 'string') {\n\t\treturn false;\n\t}\n\n\treturn obj instanceof Array || Array.isArray(obj) ||\n\t\t(obj.length >= 0 && (obj.splice instanceof Function ||\n\t\t\t(Object.getOwnPropertyDescriptor(obj, (obj.length - 1)) && obj.constructor.name !== 'String')));\n};\n","/********************************************************************************\n * Copyright (c) 2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Action } from './actions';\nimport { DiagramServer } from './diagram-server';\nimport { DiagramState } from './diagram-services';\n\nexport type ServerActionHandler<A extends Action = Action> = (action: A, state: DiagramState, server: DiagramServer) => void | Promise<void>;\n\n/**\n * Use this service to register handlers to specific actions. The `DiagramServer` queries this registry\n * when an action is received from the client, and falls back to the built-in behavior if no handlers\n * are found.\n */\nexport class ServerActionHandlerRegistry {\n\n    protected readonly handlers = new Map<string, ServerActionHandler[]>();\n\n    /**\n     * Returns the action handlers for the given action kind, or `undefined` if there are none.\n     */\n    getHandler(kind: string): ServerActionHandler[] | undefined {\n        return this.handlers.get(kind);\n    }\n\n    /**\n     * Add an action handler to be called when an action of the specified kind is received.\n     */\n    onAction<A extends Action>(kind: string, handler: ServerActionHandler<A>) {\n        if (this.handlers.has(kind)) {\n            this.handlers.get(kind)!.push(handler);\n        } else {\n            this.handlers.set(kind, [handler]);\n        }\n    }\n\n    /**\n     * Remove an action handler that was previously added with `onAction`.\n     */\n    removeActionHandler<A extends Action>(kind: string, handler: ServerActionHandler<A>) {\n        const list = this.handlers.get(kind);\n        if (list) {\n            const index = list.indexOf(handler);\n            if (index >= 0) {\n                list.splice(index, 1);\n            }\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (c) 2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { SModelRoot, SModelElement, Viewport } from './model';\nimport { Bounds, Point, Dimension } from './utils/geometry';\nimport { JsonAny, JsonMap } from './utils/json';\nimport { hasOwnProperty } from './utils/object';\n\n/**\n * Wrapper for actions when transferring them between client and server.\n * The `clientId` is used to identify the specific diagram instance in the client.\n */\nexport interface ActionMessage {\n    clientId: string\n    action: Action\n}\n\nexport function isActionMessage(object: unknown): object is ActionMessage {\n    return hasOwnProperty(object, 'action');\n}\n\n/**\n * An action describes a change to the model declaratively.\n * It is a plain data structure, and as such transferable between server and client.\n */\nexport interface Action {\n    kind: string;\n}\n\nexport function isAction(object?: unknown): object is Action {\n    return hasOwnProperty<string, string>(object, 'kind', 'string');\n}\n\n/**\n * A request action is tied to the expectation of receiving a corresponding response action.\n * The `requestId` property is used to match the received response with the original request.\n */\nexport interface RequestAction<Res extends ResponseAction> extends Action {\n    requestId: string\n\n    /**\n     * Used to ensure correct typing. Clients must not use this property\n     */\n    readonly _?: Res;\n}\n\nexport function isRequestAction(object?: Action): object is RequestAction<ResponseAction> {\n    return hasOwnProperty<string, string>(object, 'requestId', 'string');\n}\n\nlet requestContext = '';\nlet nextRequestId = 1;\n/**\n * Generate a unique `requestId` for a request action.\n */\nexport function generateRequestId(): string {\n    return `${requestContext}_${nextRequestId++}`;\n}\n\n/**\n * Configure the context in which request actions are created. This is typically either\n * 'client' or 'server' to avoid collisions of request IDs.\n */\nexport function setRequestContext(context: string): void {\n    requestContext = context;\n}\n\n/**\n * A response action is sent to respond to a request action. The `responseId` must match\n * the `requestId` of the preceding request. In case the `responseId` is empty or undefined,\n * the action is handled as standalone, i.e. it was fired without a preceding request.\n */\nexport interface ResponseAction extends Action {\n    responseId: string;\n}\n\n/**\n * A response action is sent to respond to a request action. The `responseId` must match\n * the `requestId` of the preceding request. In case the `responseId` is empty or undefined,\n * the action is handled as standalone, i.e. it was fired without a preceding request.\n */\n\nexport function isResponseAction(object?: Action): object is ResponseAction {\n    return hasOwnProperty<string, string>(object, 'responseId', 'string') && object.responseId !== '';\n}\n\n/**\n * A reject action is fired to indicate that a request must be rejected.\n */\nexport interface RejectAction extends ResponseAction {\n    kind: typeof RejectAction.KIND\n    message: string\n    detail?: JsonAny\n}\nexport namespace RejectAction {\n    export const KIND = 'rejectRequest';\n\n    export function create(options: { message: string, detail?: JsonAny, requestId: string }): RejectAction {\n        return {\n            kind: KIND,\n            message: options.message,\n            detail: options.detail,\n            responseId: options.requestId\n        };\n    }\n}\n\n/**\n * Sent from the client to the model source (e.g. a DiagramServer) in order to request a model. Usually this\n * is the first message that is sent to the source, so it is also used to initiate the communication.\n * The response is a SetModelAction or an UpdateModelAction.\n */\nexport interface RequestModelAction extends RequestAction<SetModelAction> {\n    kind: typeof RequestModelAction.KIND\n    options?: JsonMap\n}\nexport namespace RequestModelAction {\n    export const KIND = 'requestModel';\n\n    export function create(options?: JsonMap): RequestModelAction {\n        return {\n            kind: KIND,\n            options,\n            requestId: generateRequestId()\n        };\n    }\n}\n\n/**\n * Sent from the model source to the client in order to set the model. If a model is already present, it is replaced.\n */\nexport interface SetModelAction extends ResponseAction {\n    kind: typeof SetModelAction.KIND\n    newRoot: SModelRoot\n}\nexport namespace SetModelAction {\n    export const KIND = 'setModel';\n\n    export function create(newRoot: SModelRoot, requestId: string = ''): SetModelAction {\n        return {\n            kind: KIND,\n            newRoot,\n            responseId: requestId\n        };\n    }\n}\n\n/**\n * Sent from the model source to the client in order to update the model. If no model is present yet,\n * this behaves the same as a SetModelAction. The transition from the old model to the new one can be animated.\n */\nexport interface UpdateModelAction {\n    kind: typeof UpdateModelAction.KIND\n    newRoot?: SModelRoot\n    matches?: Match[]\n    animate?: boolean\n    cause?: Action\n}\nexport namespace UpdateModelAction {\n    export const KIND = 'updateModel';\n\n    export function create(input: SModelRoot | Match[], options: { animate?: boolean, cause?: Action } = {}): UpdateModelAction {\n        if (Array.isArray(input)) {\n            return {\n                kind: KIND,\n                matches: input,\n                animate: options.animate,\n                cause: options.cause\n            };\n        } else {\n            return {\n                kind: KIND,\n                newRoot: input,\n                animate: options.animate,\n                cause: options.cause\n            };\n        }\n    }\n}\n\nexport interface Match {\n    left?: SModelElement\n    right?: SModelElement\n    leftParentId?: string\n    rightParentId?: string\n}\n\n/**\n * Triggered when the user hovers the mouse pointer over an element to get a popup with details on\n * that element. This action is sent from the client to the model source, e.g. a DiagramServer.\n * The response is a SetPopupModelAction.\n */\nexport interface RequestPopupModelAction extends RequestAction<SetPopupModelAction> {\n    kind: typeof RequestPopupModelAction.KIND\n    elementId: string\n    bounds: Bounds\n}\nexport namespace RequestPopupModelAction {\n    export const KIND = 'requestPopupModel';\n\n    export function create(options: { elementId: string, bounds: Bounds }): RequestPopupModelAction {\n        return {\n            kind: KIND,\n            elementId: options.elementId,\n            bounds: options.bounds,\n            requestId: generateRequestId()\n        };\n    }\n}\n\n/**\n * Sent from the model source to the client to display a popup in response to a RequestPopupModelAction.\n * This action can also be used to remove any existing popup by choosing EMPTY_ROOT as root element.\n */\nexport interface SetPopupModelAction extends ResponseAction {\n    kind: typeof SetPopupModelAction.KIND\n    newRoot: SModelRoot\n}\nexport namespace SetPopupModelAction {\n    export const KIND = 'setPopupModel';\n\n    export function create(newRoot: SModelRoot, requestId: string = ''): SetPopupModelAction {\n        return {\n            kind: KIND,\n            newRoot,\n            responseId: requestId\n        };\n    }\n}\n\n/**\n * Sent from the model source (e.g. a DiagramServer) to the client to update the bounds of some\n * (or all) model elements.\n */\nexport interface SetBoundsAction extends Action {\n    kind: typeof SetBoundsAction.KIND\n    bounds: ElementAndBounds[]\n}\nexport namespace SetBoundsAction {\n    export const KIND = 'setBounds';\n\n    export function create(bounds: ElementAndBounds[]): SetBoundsAction {\n        return {\n            kind: KIND,\n            bounds\n        };\n    }\n}\n\n/**\n * Sent from the model source to the client to request bounds for the given model. The model is\n * rendered invisibly so the bounds can derived from the DOM. The response is a ComputedBoundsAction.\n * This hidden rendering round-trip is necessary if the client is responsible for parts of the layout\n * (see `needsClientLayout` viewer option).\n */\nexport interface RequestBoundsAction extends RequestAction<ComputedBoundsAction> {\n    kind: typeof RequestBoundsAction.KIND\n    newRoot: SModelRoot\n}\nexport namespace RequestBoundsAction {\n    export const KIND = 'requestBounds';\n\n    export function create(newRoot: SModelRoot): RequestBoundsAction {\n        return {\n            kind: KIND,\n            newRoot,\n            requestId: generateRequestId()\n        };\n    }\n}\n\n/**\n * Sent from the client to the model source (e.g. a DiagramServer) to transmit the result of bounds\n * computation as a response to a RequestBoundsAction. If the server is responsible for parts of\n * the layout (see `needsServerLayout` viewer option), it can do so after applying the computed bounds\n * received with this action. Otherwise there is no need to send the computed bounds to the server,\n * so they can be processed locally by the client.\n */\nexport interface ComputedBoundsAction extends ResponseAction {\n    kind: typeof ComputedBoundsAction.KIND\n    bounds: ElementAndBounds[]\n    revision?: number\n    alignments?: ElementAndAlignment[]\n}\nexport namespace ComputedBoundsAction {\n    export const KIND = 'computedBounds';\n\n    export function create(bounds: ElementAndBounds[], options: { revision?: number, alignments?: ElementAndAlignment[], requestId?: string } = {}): ComputedBoundsAction {\n        return {\n            kind: KIND,\n            bounds,\n            revision: options.revision,\n            alignments: options.alignments,\n            responseId: options.requestId ?? ''\n        };\n    }\n}\n\n/**\n * Associates new bounds with a model element, which is referenced via its id.\n */\nexport interface ElementAndBounds {\n    elementId: string\n    newPosition?: Point\n    newSize: Dimension\n}\n\n/**\n * Associates a new alignment with a model element, which is referenced via its id.\n */\nexport interface ElementAndAlignment {\n    elementId: string\n    newAlignment: Point\n}\n\n/**\n * Transport logging data to be stored elsewhere.\n */\nexport interface LoggingAction extends Action {\n    kind: typeof LoggingAction.KIND;\n    severity: string\n    time: string\n    caller: string\n    message: string\n    params: string[]\n}\nexport namespace LoggingAction {\n    export const KIND = 'logging';\n\n    export function create(options: { severity: string, time: string, caller: string, message: string, params: string[] }): LoggingAction {\n        return {\n            kind: KIND,\n            ...options\n        };\n    }\n}\n\n/**\n * Triggered when the user changes the selection, e.g. by clicking on a selectable element. The resulting\n * SelectCommand changes the `selected` state accordingly, so the elements can be rendered differently.\n * This action is also forwarded to the diagram server, if present, so it may react on the selection change.\n * Furthermore, the server can send such an action to the client in order to change the selection programmatically.\n */\nexport interface SelectAction {\n    kind: typeof SelectAction.KIND\n    selectedElementsIDs: string[]\n    deselectedElementsIDs: string[]\n}\nexport namespace SelectAction {\n    export const KIND = 'elementSelected';\n\n    export function create(options: { selectedElementsIDs?: string[], deselectedElementsIDs?: string[] }): SelectAction {\n        return {\n            kind: KIND,\n            selectedElementsIDs: options.selectedElementsIDs ?? [],\n            deselectedElementsIDs: options.deselectedElementsIDs ?? []\n        };\n    }\n}\n\n/**\n * Programmatic action for selecting or deselecting all elements.\n * If `select` is true, all elements are selected, otherwise they are deselected.\n */\nexport interface SelectAllAction {\n    kind: typeof SelectAllAction.KIND\n    select: boolean\n}\nexport namespace SelectAllAction {\n    export const KIND = 'allSelected';\n\n    export function create(options: { select?: boolean } = {}): SelectAllAction {\n        return {\n            kind: KIND,\n            select: options.select ?? true\n        };\n    }\n}\n\n/**\n * Request action for retrieving the current selection.\n */\nexport interface GetSelectionAction extends RequestAction<SelectionResult> {\n    kind: typeof GetSelectionAction.KIND\n}\nexport namespace GetSelectionAction {\n    export const KIND = 'getSelection';\n\n    export function create(): GetSelectionAction {\n        return {\n            kind: KIND,\n            requestId: generateRequestId()\n        };\n    }\n}\n\n/**\n * Result for a `GetSelectionAction`.\n */\nexport interface SelectionResult extends ResponseAction {\n    kind: typeof SelectionResult.KIND\n    selectedElementsIDs: string[]\n}\nexport namespace SelectionResult {\n    export const KIND = 'selectionResult';\n\n    export function create(selectedElementsIDs: string[], requestId: string): SelectionResult {\n        return {\n            kind: KIND,\n            selectedElementsIDs,\n            responseId: requestId\n        };\n    }\n}\n\n/**\n * Sent from the client to the model source to recalculate a diagram when elements\n * are collapsed/expanded by the client.\n */\nexport interface CollapseExpandAction {\n    kind: typeof CollapseExpandAction.KIND\n    expandIds: string[]\n    collapseIds: string[]\n}\nexport namespace CollapseExpandAction {\n    export const KIND = 'collapseExpand';\n\n    export function create(options: { expandIds?: string[], collapseIds?: string[] }): CollapseExpandAction {\n        return {\n            kind: KIND,\n            expandIds: options.expandIds ?? [],\n            collapseIds: options.collapseIds ?? []\n        };\n    }\n}\n\n/**\n * Programmatic action for expanding or collapsing all elements.\n * If `expand` is true, all elements are expanded, otherwise they are collapsed.\n */\nexport interface CollapseExpandAllAction {\n    kind: typeof CollapseExpandAllAction.KIND\n    expand: boolean\n}\nexport namespace CollapseExpandAllAction {\n    export const KIND = 'collapseExpandAll';\n\n    export function create(options: { expand?: boolean } = {}): CollapseExpandAllAction {\n        return {\n            kind: KIND,\n            expand: options.expand ?? true\n        };\n    }\n}\n\nexport interface OpenAction {\n    kind: typeof OpenAction.KIND\n    elementId: string\n}\nexport namespace OpenAction {\n    export const KIND = 'open';\n\n    export function create(elementId: string): OpenAction {\n        return {\n            kind: KIND,\n            elementId\n        };\n    }\n}\n\n/**\n * Request a layout of the diagram or the selected elements only.\n */\nexport interface LayoutAction {\n    kind: typeof LayoutAction.KIND\n    layoutType?: string\n    elementIds?: string[]\n}\nexport namespace LayoutAction {\n    export const KIND = 'layout';\n\n    export function create(options: { layoutType?: string, elementIds?: string[] } = {}): LayoutAction {\n        return {\n            kind: KIND,\n            layoutType: options.layoutType,\n            elementIds: options.elementIds\n        };\n    }\n}\n\n/**\n * Triggered when the user requests the viewer to center on the current model. The resulting\n * CenterCommand changes the scroll setting of the viewport accordingly.\n * It also resets the zoom to its default if retainZoom is false.\n * This action can also be sent from the model source to the client in order to perform such a\n * viewport change programmatically.\n */\nexport interface CenterAction extends Action {\n    kind: typeof CenterAction.KIND\n    elementIds: string[]\n    animate: boolean\n    retainZoom: boolean\n    zoomScale?: number\n}\nexport namespace CenterAction {\n    export const KIND = 'center';\n\n    export function create(elementIds: string[], options: { animate?: boolean, retainZoom?: boolean, zoomScale?: number } = {}): CenterAction {\n        return {\n            kind: KIND,\n            elementIds,\n            animate: options.animate ?? true,\n            retainZoom: options.retainZoom ?? false,\n            zoomScale: options.zoomScale\n        };\n    }\n}\n\n/**\n * Triggered when the user requests the viewer to fit its content to the available drawing area.\n * The resulting FitToScreenCommand changes the zoom and scroll settings of the viewport so the model\n * can be shown completely. This action can also be sent from the model source to the client in order\n * to perform such a viewport change programmatically.\n */\nexport interface FitToScreenAction extends Action {\n    kind: typeof FitToScreenAction.KIND;\n    elementIds: string[]\n    padding?: number\n    maxZoom?: number\n    animate: boolean\n}\nexport namespace FitToScreenAction {\n    export const KIND = 'fit';\n\n    export function create(elementIds: string[], options: { padding?: number, maxZoom?: number, animate?: boolean } = {}): FitToScreenAction {\n        return {\n            kind: KIND,\n            elementIds,\n            padding: options.padding,\n            maxZoom: options.maxZoom,\n            animate: options.animate ?? true\n        };\n    }\n}\n\n/**\n * Directly set the diagram viewport to the given scroll and zoom values.\n * The ID of the viewport element to manipulate must be given with the action\n * (usually it is the root element's ID).\n */\nexport interface SetViewportAction extends Action {\n    kind: typeof SetViewportAction.KIND;\n    elementId: string\n    newViewport: Viewport\n    animate: boolean\n}\nexport namespace SetViewportAction {\n    export const KIND = 'viewport';\n\n    export function create(elementId: string, newViewport: Viewport, options: { animate?: boolean } = {}): SetViewportAction {\n        return {\n            kind: KIND,\n            elementId,\n            newViewport,\n            animate: options.animate ?? true\n        };\n    }\n}\n\n/**\n * Request action for retrieving the current viewport and canvas bounds.\n */\nexport interface GetViewportAction extends RequestAction<ViewportResult> {\n    kind: typeof GetViewportAction.KIND;\n}\nexport namespace GetViewportAction {\n    export const KIND = 'getViewport';\n\n    export function create(): GetViewportAction {\n        return {\n            kind: KIND,\n            requestId: generateRequestId()\n        };\n    }\n}\n\n/**\n * Response to a `GetViewportAction`.\n */\nexport interface ViewportResult extends ResponseAction {\n    kind: typeof ViewportResult.KIND;\n    viewport: Viewport\n    canvasBounds: Bounds\n}\nexport namespace ViewportResult {\n    export const KIND = 'viewportResult';\n\n    export function create(viewport: Viewport, canvasBounds: Bounds, requestId: string): ViewportResult {\n        return {\n            kind: KIND,\n            viewport,\n            canvasBounds,\n            responseId: requestId\n        };\n    }\n}\n\n/**\n * Action to render the selected elements in front of others by manipulating the z-order.\n */\nexport interface BringToFrontAction extends Action {\n    kind: typeof BringToFrontAction.KIND;\n    elementIDs: string[]\n}\nexport namespace BringToFrontAction {\n    export const KIND = 'bringToFront';\n\n    export function create(elementIDs: string[]): BringToFrontAction {\n        return {\n            kind: KIND,\n            elementIDs\n        };\n    }\n}\n\n/**\n * Undo the previous operation on the stack of operations.\n */\nexport interface UndoAction extends Action {\n    kind: typeof UndoAction.KIND;\n}\nexport namespace UndoAction {\n    export const KIND = 'undo';\n\n    export function create(): UndoAction {\n        return {\n            kind: KIND\n        };\n    }\n}\n\n/**\n * Redo a previously undone operation.\n */\nexport interface RedoAction extends Action {\n    kind: typeof RedoAction.KIND;\n}\nexport namespace RedoAction {\n    export const KIND = 'redo';\n\n    export function create(): RedoAction {\n        return {\n            kind: KIND\n        };\n    }\n}\n\n/**\n * Move an arbitrary set of elements to new positions.\n */\nexport interface MoveAction extends Action {\n    kind: typeof MoveAction.KIND\n    moves: ElementMove[]\n    animate: boolean\n    finished: boolean\n    stoppable: boolean\n}\nexport namespace MoveAction {\n    export const KIND = 'move';\n\n    export function create(moves: ElementMove[], options: { animate?: boolean, finished?: boolean, stoppable?: boolean } = {}): MoveAction {\n        return {\n            kind: KIND,\n            moves,\n            animate: options.animate ?? true,\n            finished: options.finished ?? false,\n            stoppable: options.stoppable ?? false\n        };\n    }\n}\n\nexport interface ElementMove {\n    elementId: string\n    elementType?: string\n    fromPosition?: Point\n    toPosition: Point\n}\n\n/**\n * Triggered when the user puts the mouse pointer over an element.\n */\nexport interface HoverFeedbackAction extends Action {\n    kind: typeof HoverFeedbackAction.KIND\n    mouseoverElement: string\n    mouseIsOver: boolean\n}\nexport namespace HoverFeedbackAction {\n    export const KIND = 'hoverFeedback';\n\n    export function create(options: { mouseoverElement: string, mouseIsOver: boolean }): HoverFeedbackAction {\n        return {\n            kind: KIND,\n            mouseoverElement: options.mouseoverElement,\n            mouseIsOver: options.mouseIsOver\n        };\n    }\n}\n\n/**\n * Create an element with the given schema and add it to the diagram.\n */\nexport interface CreateElementAction extends Action {\n    kind: typeof CreateElementAction.KIND\n    containerId: string\n    elementSchema: SModelElement\n}\nexport namespace CreateElementAction {\n    export const KIND = 'createElement';\n\n    export function create(elementSchema: SModelElement, options: { containerId: string }): CreateElementAction {\n        return {\n            kind: KIND,\n            elementSchema,\n            containerId: options.containerId\n        };\n    }\n}\n\n/**\n * Delete a set of elements identified by their IDs.\n */\nexport interface DeleteElementAction extends Action {\n    kind: typeof DeleteElementAction.KIND\n    elementIds: string[]\n}\nexport namespace DeleteElementAction {\n    export const KIND = 'delete';\n\n    export function create(elementIds: string[]): DeleteElementAction {\n        return {\n            kind: KIND,\n            elementIds\n        };\n    }\n}\n\n/**\n * Apply a text change to a label element.\n */\nexport interface ApplyLabelEditAction extends Action {\n    kind: typeof ApplyLabelEditAction.KIND;\n    labelId: string,\n    text: string\n}\nexport namespace ApplyLabelEditAction {\n    export const KIND = 'applyLabelEdit';\n\n    export function create(labelId: string, text: string): ApplyLabelEditAction {\n        return {\n            kind: KIND,\n            labelId,\n            text\n        };\n    }\n}\n\n/**\n * Change the source or target node of a routable element (edge of a graph).\n */\nexport interface ReconnectAction extends Action {\n    kind: typeof ReconnectAction.KIND\n    routableId: string\n    newSourceId?: string\n    newTargetId?: string\n}\nexport namespace ReconnectAction {\n    export const KIND = 'reconnect';\n\n    export function create(options: { routableId: string, newSourceId?: string, newTargetId?: string }): ReconnectAction {\n        return {\n            kind: KIND,\n            routableId: options.routableId,\n            newSourceId: options.newSourceId,\n            newTargetId: options.newTargetId\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ServerActionHandlerRegistry } from './action-handler';\nimport {\n    Action, isResponseAction, ResponseAction, RequestModelAction, ComputedBoundsAction, LayoutAction, RequestBoundsAction,\n    RequestAction, generateRequestId, SetModelAction, UpdateModelAction, RejectAction, isRequestAction\n} from './actions';\nimport { DiagramServices, DiagramState, IDiagramGenerator, IModelLayoutEngine } from './diagram-services';\nimport { SModelRoot } from './model';\nimport { Deferred } from './utils/async';\nimport { applyBounds, cloneModel } from './utils/model-utils';\n\n/**\n * An instance of this class is responsible for handling a single diagram client. It holds the current\n * state of the diagram and manages communication with the client via actions.\n */\nexport class DiagramServer {\n\n    readonly state: DiagramState & {\n        lastSubmittedModelType?: string\n    } = {\n        currentRoot: {\n            type: 'NONE',\n            id: 'ROOT'\n        },\n        revision: 0\n    };\n    readonly dispatch: <A extends Action>(action: A) => Promise<void>;\n\n    protected readonly diagramGenerator: IDiagramGenerator;\n    protected readonly layoutEngine?: IModelLayoutEngine;\n    protected actionHandlerRegistry?: ServerActionHandlerRegistry;\n    protected readonly requests = new Map<string, Deferred<ResponseAction>>();\n\n    constructor(dispatch: <A extends Action>(action: A) => Promise<void>,\n                services: DiagramServices) {\n        this.dispatch = dispatch;\n        this.diagramGenerator = services.DiagramGenerator;\n        this.layoutEngine = services.ModelLayoutEngine;\n        this.actionHandlerRegistry = services.ServerActionHandlerRegistry;\n    }\n\n    /**\n     * Set the model and submit it to the client.\n     */\n    setModel(newRoot: SModelRoot): Promise<void> {\n        newRoot.revision = ++this.state.revision;\n        this.state.currentRoot = newRoot;\n        return this.submitModel(newRoot, false);\n    }\n\n    /**\n     * Update the model to a new state and submit it to the client.\n     */\n    updateModel(newRoot: SModelRoot): Promise<void> {\n        newRoot.revision = ++this.state.revision;\n        this.state.currentRoot = newRoot;\n        return this.submitModel(newRoot, true);\n    }\n\n    /**\n     * Whether the client needs to compute the layout of parts of the model. This affects the behavior\n     * of `submitModel`.\n     *\n     * This setting is determined by the `DiagramOptions` that are received with the `RequestModelAction`\n     * from the client. If the client does not specify whether it needs client layout, the default value\n     * is `true`.\n     */\n    get needsClientLayout(): boolean {\n        if (this.state.options && this.state.options.needsClientLayout !== undefined) {\n            return !!this.state.options.needsClientLayout;\n        }\n        return true;\n    }\n\n    /**\n     * Whether the server needs to compute the layout of parts of the model. This affects the behavior\n     * of `submitModel`.\n     *\n     * This setting is determined by the `DiagramOptions` that are received with the `RequestModelAction`\n     * from the client. If the client does not specify whether it needs server layout, the default value\n     * is `false`.\n     */\n    get needsServerLayout(): boolean {\n        if (this.state.options && this.state.options.needsServerLayout !== undefined) {\n            return !!this.state.options.needsServerLayout;\n        }\n        return false;\n    }\n\n    /**\n     * Called when an action is received from the client.\n     */\n    accept(action: Action): Promise<void> {\n        if (isResponseAction(action)) {\n            const id = action.responseId;\n            const future = this.requests.get(id);\n            if (future) {\n                this.requests.delete(id);\n                if (action.kind === RejectAction.KIND) {\n                    const rejectAction: RejectAction = action as any;\n                    future.reject(new Error(rejectAction.message));\n                    console.warn(`Request with id ${action.responseId} failed: ${rejectAction.message}`, rejectAction.detail);\n                } else {\n                    future.resolve(action);\n                }\n                return Promise.resolve();\n            }\n            console.info('No matching request for response:', action);\n        }\n        return this.handleAction(action);\n    }\n\n    /**\n     * Send a request action to the client. The resulting promise is resolved when a matching\n     * response is received and rejected when a `RejectAction` is received.\n     */\n    request<Res extends ResponseAction>(action: RequestAction<Res>): Promise<Res> {\n        if (!action.requestId) {\n            action.requestId = 'server_' + generateRequestId();\n        }\n        const future = new Deferred<Res>();\n        this.requests.set(action.requestId, future as any);\n        this.dispatch(action).catch(err => {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            this.requests.delete(action.requestId!);\n            future.reject(err);\n        });\n        return future.promise;\n    }\n\n    /**\n     * Send a `RejectAction` to the client to notify that a request could not be fulfilled.\n     */\n    rejectRemoteRequest(action: Action | undefined, error: Error): void {\n        if (action && isRequestAction(action)) {\n            this.dispatch({\n                kind: RejectAction.KIND,\n                responseId: action.requestId,\n                message: error.message,\n                detail: error.stack\n            });\n        }\n    }\n\n    protected handleAction(action: Action): Promise<void> {\n        // Find a matching action handler in the registry\n        const handlers = this.actionHandlerRegistry?.getHandler(action.kind);\n        if (handlers && handlers.length === 1) {\n            return handlers[0](action, this.state, this) ?? Promise.resolve();\n        } else if (handlers && handlers.length > 1) {\n            return Promise.all(handlers.map(h => h(action, this.state, this) ?? Promise.resolve())) as Promise<any>;\n        }\n        // If no handler is registered, call one of the default handling methods\n        switch (action.kind) {\n            case RequestModelAction.KIND:\n                return this.handleRequestModel(action as RequestModelAction);\n            case ComputedBoundsAction.KIND:\n                return this.handleComputedBounds(action as ComputedBoundsAction);\n            case LayoutAction.KIND:\n                return this.handleLayout(action as LayoutAction);\n        }\n        // We don't know this action kind, sigh\n        console.warn(`Unhandled action from client: ${action.kind}`);\n        return Promise.resolve();\n    }\n\n    protected async handleRequestModel(action: RequestModelAction): Promise<void> {\n        this.state.options = action.options;\n        try {\n            const newRoot = await this.diagramGenerator.generate({\n                options: this.state.options ?? {},\n                state: this.state\n            });\n            newRoot.revision = ++this.state.revision;\n            this.state.currentRoot = newRoot;\n            await this.submitModel(this.state.currentRoot, false, action);\n        } catch (err) {\n            this.rejectRemoteRequest(action, err as Error);\n            console.error('Failed to generate diagram:', err);\n        }\n    }\n\n    /**\n     * Submit a model to the client after it has been updated in the server state.\n     */\n     protected async submitModel(newRoot: SModelRoot, update: boolean, cause?: Action): Promise<void> {\n        if (this.needsClientLayout) {\n            if (!this.needsServerLayout) {\n                // In this case the client won't send us the computed bounds\n                this.dispatch({ kind: RequestBoundsAction.KIND, newRoot });\n            } else {\n                const request = RequestBoundsAction.create(newRoot);\n                const response = await this.request<ComputedBoundsAction>(request);\n                const currentRoot = this.state.currentRoot;\n                if (response.revision === currentRoot.revision) {\n                    applyBounds(currentRoot, response);\n                    await this.doSubmitModel(currentRoot, update, cause);\n                } else {\n                    this.rejectRemoteRequest(cause, new Error(`Model revision does not match: ${response.revision}`));\n                }\n            }\n        } else {\n            await this.doSubmitModel(newRoot, update, cause);\n        }\n    }\n\n    private async doSubmitModel(newRoot: SModelRoot, update: boolean, cause?: Action): Promise<void> {\n        if (newRoot.revision !== this.state.revision) {\n            return;\n        }\n        if (this.needsServerLayout && this.layoutEngine) {\n            newRoot = await this.layoutEngine.layout(newRoot);\n        }\n        const modelType = newRoot.type;\n        if (cause && cause.kind === RequestModelAction.KIND) {\n            const requestId = (cause as RequestModelAction).requestId;\n            const response = SetModelAction.create(newRoot, requestId);\n            await this.dispatch(response);\n        } else if (update && modelType === this.state.lastSubmittedModelType) {\n            await this.dispatch({ kind: UpdateModelAction.KIND, newRoot, cause });\n        } else {\n            await this.dispatch({ kind: SetModelAction.KIND, newRoot });\n        }\n        this.state.lastSubmittedModelType = modelType;\n    }\n\n    protected handleComputedBounds(action: ComputedBoundsAction): Promise<void> {\n        if (action.revision !== this.state.currentRoot.revision) {\n            return Promise.reject();\n        }\n        applyBounds(this.state.currentRoot, action);\n        return Promise.resolve();\n    }\n\n    protected async handleLayout(action: LayoutAction): Promise<void> {\n        if (!this.layoutEngine) {\n            return;\n        }\n        if (!this.needsServerLayout) {\n            let newRoot = cloneModel(this.state.currentRoot);\n            newRoot = await this.layoutEngine.layout(newRoot);\n            newRoot.revision = ++this.state.revision;\n            this.state.currentRoot = newRoot;\n        }\n        await this.doSubmitModel(this.state.currentRoot, true, action);\n    }\n\n}\n","/********************************************************************************\n * Copyright (c) 2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ServerActionHandlerRegistry } from './action-handler';\nimport { SModelRoot } from './model';\nimport { JsonMap } from './utils/json';\nimport { SModelIndex } from './utils/model-utils';\n\nexport type DiagramOptions = JsonMap;\n\n/**\n * The current state captured by a `DiagramServer`.\n */\nexport interface DiagramState {\n    options?: DiagramOptions\n    currentRoot: SModelRoot\n    revision: number\n    index?: SModelIndex\n}\n\n/**\n * The set of services required by a `DiagramServer`.\n */\nexport interface DiagramServices {\n    readonly DiagramGenerator: IDiagramGenerator\n    readonly ModelLayoutEngine?: IModelLayoutEngine\n    readonly ServerActionHandlerRegistry?: ServerActionHandlerRegistry\n}\n\n/**\n * A diagram generator is responsible for creating a diagram model from some source.\n * This process is controlled by the `DiagramOptions`, which for example may contain\n * a URI to the source document from which the diagram shall be created.\n */\nexport interface IDiagramGenerator {\n    generate(args: GeneratorArguments): SModelRoot | Promise<SModelRoot>\n}\n\nexport interface GeneratorArguments {\n    options: DiagramOptions\n    state: DiagramState\n}\n\n/**\n * This service is responsible for the \"macro layout\" of a model, that is the positioning\n * and sizing of the main structural elements of a model. In a graph, macro layout affects\n * positions of nodes and routings of edges, but not necessarily the layout of labels and\n * compartments inside a node, which are often arranged on the client side (\"micro layout\").\n */\nexport interface IModelLayoutEngine {\n    layout(model: SModelRoot, index?: SModelIndex): SModelRoot | Promise<SModelRoot>;\n}\n","/********************************************************************************\n * Copyright (c) 2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './action-handler';\nexport * from './actions';\nexport * from './diagram-server';\nexport * from './diagram-services';\nexport * from './model';\nexport * from './utils/async';\nexport * from './utils/geometry';\nexport * from './utils/json';\nexport * from './utils/model-utils';\nexport * from './utils/object';\n","/********************************************************************************\n * Copyright (c) 2021-2023 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Bounds, Point, Dimension } from './utils/geometry';\nimport { hasOwnProperty } from './utils/object';\n\n/**\n * Base type for all elements of the diagram model.\n * Each model element must have a unique ID and a type that is used to look up its view.\n */\nexport interface SModelElement {\n    type: string\n    id: string\n    children?: SModelElement[]\n    cssClasses?: string[]\n}\n\n/**\n * Base type for the root element of the diagram model tree.\n */\nexport interface SModelRoot extends SModelElement {\n    canvasBounds?: Bounds\n    revision?: number\n}\n\n/**\n * Usually the root of a model is also a viewport.\n */\nexport interface ViewportRootElement extends SModelRoot, Partial<Viewport>, Partial<BoundsAware> {\n}\n\n/**\n * Root element for graph-like models.\n */\nexport interface SGraph extends ViewportRootElement, Partial<LayoutableChild> {\n    children: SModelElement[]\n\n    /** @deprecated Use `position` and `size` instead. */\n    bounds?: Bounds\n}\n\nexport interface SShapeElement extends SModelElement, Partial<LayoutableChild> {\n}\n\n/**\n * Model element class for nodes, which are the main entities in a graph. A node can be connected to\n * another node via an SEdge. Such a connection can be direct, i.e. the node is the source or target of\n * the edge, or indirect through a port, i.e. it contains an SPort which is the source or target of the edge.\n */\nexport interface SNode extends SShapeElement, Partial<LayoutContainer>, Partial<Selectable>, Partial<Hoverable>, Partial<Fadeable> {\n    anchorKind?: string\n}\n\n/**\n * A port is a connection point for edges. It should always be contained in an SNode.\n */\nexport interface SPort extends SShapeElement, Partial<Selectable>, Partial<Hoverable>, Partial<Fadeable> {\n    anchorKind?: string\n}\n\n/**\n * Model element class for edges, which are the connectors in a graph. An edge has a source and a target,\n * each of which can be either a node or a port. The source and target elements are referenced via their ids.\n */\nexport interface SEdge extends SModelElement, Partial<Selectable>, Partial<Hoverable>, Partial<Fadeable> {\n    sourceId: string\n    targetId: string\n    routerKind?: string\n    routingPoints?: Point[]\n}\n\n/**\n * A label can be attached to a node, edge, or port, and contains some text to be rendered in its view.\n */\nexport interface SLabel extends SShapeElement, Partial<Selectable>, Partial<Alignable> {\n    text: string\n}\n\n/**\n * A compartment is used to group multiple child elements such as labels of a node. Usually a `vbox`\n * or `hbox` layout is used to arrange these children.\n */\nexport interface SCompartment extends SShapeElement, Partial<LayoutContainer> {\n}\n\n/**\n * A viewport has a scroll position and a zoom factor. Usually these properties are\n * applied to the root element to enable navigating through the diagram.\n */\nexport interface Viewport extends Scrollable, Zoomable {\n}\n\n/**\n * A scrollable element has a scroll position, which indicates the top left corner of the\n * visible area.\n */\nexport interface Scrollable {\n    scroll: Point\n}\n\nexport function isScrollable(element: SModelElement | Scrollable): element is Scrollable {\n    return hasOwnProperty(element, 'scroll');\n}\n\n/**\n * A zoomable element can be scaled so it appears smaller or larger than its actual size.\n * The zoom value 1 is the default scale where the content is drawn with its actual size.\n */\nexport interface Zoomable {\n    zoom: number\n}\n\nexport function isZoomable(element: SModelElement | Zoomable): element is Zoomable {\n    return hasOwnProperty(element, 'zoom');\n}\n\n/**\n * An element that can be placed at a specific location using its position property.\n * Feature extension interface for `moveFeature`.\n */\nexport interface Locateable {\n    position: Point\n}\n\n/**\n * Model elements that implement this interface have a position and a size.\n */\nexport interface BoundsAware extends Locateable {\n    size: Dimension\n}\n\n/**\n * Feature extension interface for `layoutableChildFeature`. This is used when the parent\n * element has a `layout` property (meaning it's a `LayoutContainer`).\n*/\nexport interface LayoutableChild extends BoundsAware {\n    layoutOptions?: ModelLayoutOptions\n}\n\n/**\n * Layout options of a `LayoutableChild`.\n */\nexport interface ModelLayoutOptions {\n    hAlign?: HAlignment\n    hGap?: number\n    vAlign?: VAlignment\n    vGap?: number\n    paddingTop?: number\n    paddingRight?: number\n    paddingBottom?: number\n    paddingLeft?: number\n    paddingFactor?: number\n    minWidth?: number\n    minHeight?: number\n    resizeContainer?: boolean\n    [key: string]: string | number | boolean | undefined\n};\n\nexport type HAlignment = 'left' | 'center' | 'right';\nexport type VAlignment = 'top' | 'center' | 'bottom';\n\n/**\n * Used to identify model elements that specify a layout to apply to their children.\n */\nexport interface LayoutContainer extends LayoutableChild {\n    layout: LayoutKind\n}\n\n/**\n * Type for the layout property of a `LayoutContainer`.\n */\nexport type LayoutKind = 'stack' | 'vbox' | 'hbox' | (string & {});\n\n/**\n * Feature extension interface for `alignFeature`.\n * Used to adjust elements whose bounding box is not at the origin, e.g. labels\n * or pre-rendered SVG figures.\n */\nexport interface Alignable {\n    alignment: Point\n}\n\n/**\n * Feature extension interface for `selectFeature`. The selection status is often considered\n * in the frontend views, e.g. by switching CSS classes.\n */\nexport interface Selectable {\n    selected: boolean\n}\n\n/**\n * Feature extension interface for `hoverFeedbackFeature`. The hover feedback status is often\n * considered in the frontend views, e.g. by switching CSS classes.\n */\nexport interface Hoverable {\n    hoverFeedback: boolean\n}\n\n/**\n * Feature extension interface for `fadeFeature`. Fading is mostly used to animate when an element\n * appears or disappears.\n */\nexport interface Fadeable {\n    opacity: number\n}\n\n/**\n * Feature extension interface for `expandFeature`.\n * Model elements that implement this interface can be expanded and collapsed.\n */\nexport interface Expandable {\n    expanded: boolean\n}\n\n/**\n * Model elements implementing this interface can be displayed on a projection bar.\n * _Note:_ If set, the projectedBounds property will be prefered over the model element bounds.\n * Otherwise model elements also have to be `BoundsAware` so their projections can be shown.\n */\nexport interface Projectable {\n    projectionCssClasses: string[],\n    projectedBounds?: Bounds,\n}\n\n/**\n * Feature extension interface for `edgeLayoutFeature`. This is often applied to\n * {@link SLabel} elements to specify their placement along the containing edge.\n */\nexport interface EdgeLayoutable {\n    edgePlacement: EdgePlacement\n}\n\nexport type EdgeSide = 'left' | 'right' | 'top' | 'bottom' | 'on';\n\n/**\n * Each label attached to an edge can be placed on the edge in different ways.\n * With this interface the placement of such a single label is defined.\n */\nexport interface EdgePlacement {\n    /**\n     * true, if the label should be rotated to touch the edge tangentially\n     */\n    rotate: boolean;\n\n    /**\n     * where is the label relative to the line's direction\n     */\n    side: EdgeSide;\n\n    /**\n     * between 0 (source anchor) and 1 (target anchor)\n     */\n    position: number;\n\n    /**\n     * space between label and edge/connected nodes\n     */\n    offset: number;\n\n    /**\n     * where should the label be moved when move feature is enabled.\n     * 'edge' means the label is moved along the edge, 'free' means the label is moved freely, 'none' means the label can not be moved.\n     * Default is 'edge'.\n     */\n    moveMode?: 'edge' | 'free' | 'none';\n}\n\n/**\n * Buttons are elements that can react to clicks. A button handler can be registered in the frontend.\n */\nexport interface SButton extends SShapeElement {\n    pressed: boolean\n    enabled: boolean\n}\n\n/**\n * An issue marker is used to display a symbol about an error or a warning attached to another model element.\n */\nexport interface SIssueMarker extends SShapeElement {\n    issues: SIssue[]\n}\n\nexport type SIssueSeverity = 'error' | 'warning' | 'info';\n\nexport interface SIssue {\n    message: string\n    severity: SIssueSeverity\n}\n\n/**\n * Root model element class for HTML content. Usually this is rendered with a `div` DOM element.\n */\nexport interface HtmlRoot extends SModelRoot {\n    classes?: string[]\n}\n\n/**\n * Pre-rendered elements contain HTML or SVG code to be transferred to the DOM. This can be useful to\n * render complex figures or to compute the view on the server instead of the client code.\n */\nexport interface PreRenderedElement extends SModelElement {\n    code: string\n}\n\n/**\n * Same as PreRenderedElement, but with a position and a size.\n */\nexport interface ShapedPreRenderedElement extends PreRenderedElement {\n    position?: Point\n    size?: Dimension\n}\n\n/**\n * A `foreignObject` element to be transferred to the DOM within the SVG.\n *\n * This can be useful to to benefit from e.g. HTML rendering features, such as line wrapping, inside of\n * the SVG diagram.  Note that `foreignObject` is not supported by all browsers and SVG viewers may not\n * support rendering the `foreignObject` content.\n *\n * If no dimensions are specified in the schema element, this element will obtain the dimension of\n * its parent to fill the entire available room. Thus, this element requires specified bounds itself\n * or bounds to be available for its parent.\n */\nexport interface ForeignObjectElement extends ShapedPreRenderedElement {\n    /** The namespace to be assigned to the elements inside of the `foreignObject`. */\n    namespace: string\n}\n","/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * Simple implementation of the deferred pattern.\n * An object that exposes a promise and functions to resolve and reject it.\n */\nexport class Deferred<T> {\n    resolve: (value?: T | PromiseLike<T>) => void;\n    reject: (reason?: any) => void;\n    readonly promise: Promise<T>;\n    private _state: DeferredState = 'unresolved';\n\n\n    constructor() {\n        this.promise = new Promise<T>((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n        this.promise.then(\n            res => this._state = 'resolved',\n            rej => this._state = 'rejected'\n        );\n    }\n\n    private set state(state: DeferredState) {\n        if (this._state === 'unresolved') {\n            this._state = state;\n        }\n    }\n\n    get state(): DeferredState {\n        return this._state;\n    }\n}\n\nexport type DeferredState = 'resolved' | 'rejected' | 'unresolved';\n","/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { hasOwnProperty } from \"./object\";\n\n/**\n * A Point is composed of the (x,y) coordinates of an object.\n */\nexport interface Point {\n    readonly x: number\n    readonly y: number\n}\n\nexport namespace Point {\n    /**\n     * (x,y) coordinates of the origin.\n     */\n    export const ORIGIN: Point = Object.freeze({\n        x: 0,\n        y: 0\n    });\n\n    /**\n     * Adds two points.\n     * @param {Point} p1 - First point\n     * @param {Point} p2 - Second point\n     * @returns {Point} The sum of the two points\n     */\n    export function add(p1: Point, p2: Point): Point {\n        return {\n            x: p1.x + p2.x,\n            y: p1.y + p2.y\n        };\n    }\n\n    /**\n     * Subtracts two points.\n     * @param {Point} p1 - First point\n     * @param {Point} p2 - Second point\n     * @returns {Point} The difference of the two points\n     */\n    export function subtract(p1: Point, p2: Point): Point {\n        return {\n            x: p1.x - p2.x,\n            y: p1.y - p2.y\n        };\n    }\n\n    /**\n     * Specifies whether a point has exactly the same coordinates as another point.\n     * @param {Point} point1 a point\n     * @param {Point} point2 another point\n     * @returns {boolean} `true` if `point1` has exactly the same `x` and `y` values as `point2`, `false` otherwise.\n     */\n    export function equals(point1: Point, point2: Point): boolean {\n        return point1.x === point2.x && point1.y === point2.y;\n    }\n\n    /**\n     * Computes a point that is the original `point` shifted towards `refPoint` by the given `distance`.\n     * @param {Point} point - Point to shift\n     * @param {Point} refPoint - Point to shift towards\n     * @param {Point} distance - Distance to shift\n     */\n    export function shiftTowards(point: Point, refPoint: Point, distance: number): Point {\n        const diff = subtract(refPoint, point);\n        const normalized = normalize(diff);\n        const shift = { x: normalized.x * distance, y: normalized.y * distance };\n        return add(point, shift);\n    }\n\n    /**\n     * Computes the normalized vector from the vector given in `point`; that is, computing its unit vector.\n     * @param {Point} point - Point representing the vector to be normalized\n     * @returns {Point} The normalized point\n     */\n    export function normalize(point: Point): Point {\n        const mag = magnitude(point);\n        if (mag === 0 || mag === 1) {\n            return ORIGIN;\n        }\n        return {\n            x: point.x / mag,\n            y: point.y / mag\n        };\n    }\n\n    /**\n     * Computes the magnitude of the vector given in `point`.\n     * @param {Point} point - Point representing the vector to compute the magnitude for\n     * @returns {number} The magnitude or also known as length of the `point`\n     */\n    export function magnitude(point: Point): number {\n        return Math.sqrt(Math.pow(point.x, 2) + Math.pow(point.y, 2));\n    }\n\n    /**\n     * Calculates a linear combination of p0 and p1 using lambda, i.e.\n     *   (1-lambda) * p0 + lambda * p1\n     */\n    export function linear(p0: Point, p1: Point, lambda: number): Point {\n        return {\n            x: (1 - lambda) * p0.x + lambda * p1.x,\n            y: (1 - lambda) * p0.y + lambda * p1.y\n        };\n    }\n\n    /**\n     * Returns the \"straight line\" distance between two points.\n     * @param {Point} a - First point\n     * @param {Point} b - Second point\n     * @returns {number} The Eucledian distance\n     */\n    export function euclideanDistance(a: Point, b: Point): number {\n        const dx = b.x - a.x;\n        const dy = b.y - a.y;\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n\n    /**\n     * Returns the distance between two points in a grid, using a\n     * strictly vertical and/or horizontal path (versus straight line).\n     * @param {Point} a - First point\n     * @param {Point} b - Second point\n     * @returns {number} The Manhattan distance\n     */\n    export function manhattanDistance(a: Point, b: Point): number {\n        return Math.abs(b.x - a.x) + Math.abs(b.y - a.y);\n    }\n\n    /**\n     * Returns the maximum of the horizontal and the vertical distance.\n     * @param {Point} a - First point\n     * @param {Point} b - Second point\n     * @returns {number} The maximum distance\n     */\n    export function maxDistance(a: Point, b: Point): number {\n        return Math.max(Math.abs(b.x - a.x), Math.abs(b.y - a.y));\n    }\n\n    /**\n     * Returns the dot product of two points.\n     * @param {Point} a - First point\n     * @param {Point} b - Second point\n     * @returns {number} The dot product\n     */\n    export function dotProduct(a: Point, b: Point): number {\n        return a.x * b.x + a.y * b.y;\n    }\n}\n\n/**\n * Computes the angle in radians of the given point to the x-axis of the coordinate system.\n * The result is in the range [-pi, pi].\n * @param {Point} p - A point in the Eucledian plane\n */\nexport function angleOfPoint(p: Point): number {\n    return Math.atan2(p.y, p.x);\n}\n\n/**\n * Computes the angle in radians between the two given points (relative to the origin of the coordinate system).\n * The result is in the range [0, pi]. Returns NaN if the points are equal.\n * @param {Point} a - First point\n * @param {Point} b - Second point\n */\nexport function angleBetweenPoints(a: Point, b: Point): number {\n    const lengthProduct = Math.sqrt((a.x * a.x + a.y * a.y) * (b.x * b.x + b.y * b.y));\n    if (isNaN(lengthProduct) || lengthProduct === 0)\n        return NaN;\n    const dotProduct = a.x * b.x + a.y * b.y;\n    return Math.acos(dotProduct / lengthProduct);\n}\n\n/**\n * Computes the center of the line segment spanned by the two given points.\n * @param {Point} s - Start point of the line\n * @param {Point} e - End point of the line\n */\nexport function centerOfLine(s: Point, e: Point): Point {\n    const b: Bounds = {\n        x: s.x > e.x ? e.x : s.x,\n        y: s.y > e.y ? e.y : s.y,\n        width: Math.abs(e.x - s.x),\n        height: Math.abs(e.y - s.y)\n    };\n    return Bounds.center(b);\n}\n\n/**\n * The Dimension of an object is composed of its width and height.\n */\nexport interface Dimension {\n    readonly width: number\n    readonly height: number\n}\n\nexport namespace Dimension {\n    /**\n     * A dimension with both width and height set to a negative value, which is considered as undefined.\n     */\n    export const EMPTY: Dimension = Object.freeze({\n        width: -1,\n        height: -1\n    });\n\n    /**\n     * Checks whether the given dimention is valid, i.e. the width and height are non-zero.\n     * @param {Dimension} b - Dimension object\n     * @returns {boolean} `true` if the dimension is valid\n     */\n    export function isValid(d: Dimension): boolean {\n        return d.width >= 0 && d.height >= 0;\n    }\n}\n\n/**\n * The bounds are the position (x, y) and dimension (width, height) of an object.\n */\nexport interface Bounds extends Point, Dimension {\n}\n\nexport function isBounds(element: unknown): element is Bounds {\n    return hasOwnProperty(element, ['x', 'y', 'width', 'height']);\n}\n\nexport namespace Bounds {\n    export const EMPTY: Bounds = Object.freeze({\n        x: 0,\n        y: 0,\n        width: -1,\n        height: -1\n    });\n\n    /**\n     * Combines the bounds of two objects into one, so that the new bounds\n     * are the minimum bounds that covers both of the original bounds.\n     * @param {Bounds} b0 - First bounds object\n     * @param {Bounds} b1 - Second bounds object\n     * @returns {Bounds} The combined bounds\n     */\n    export function combine(b0: Bounds, b1: Bounds): Bounds {\n        if (!Dimension.isValid(b0))\n            return Dimension.isValid(b1) ? b1 : EMPTY;\n        if (!Dimension.isValid(b1))\n            return b0;\n        const minX = Math.min(b0.x, b1.x);\n        const minY = Math.min(b0.y, b1.y);\n        const maxX = Math.max(b0.x + (b0.width >= 0 ? b0.width : 0), b1.x + (b1.width >= 0 ? b1.width : 0));\n        const maxY = Math.max(b0.y + (b0.height >= 0 ? b0.height : 0), b1.y + (b1.height >= 0 ? b1.height : 0));\n        return {\n            x: minX, y: minY, width: maxX - minX, height: maxY - minY\n        };\n    }\n\n    /**\n     * Translates the given bounds.\n     * @param {Bounds} b - Bounds object\n     * @param {Point} p - Vector by which to translate the bounds\n     * @returns {Bounds} The translated bounds\n     */\n    export function translate(b: Bounds, p: Point): Bounds {\n        return {\n            x: b.x + p.x,\n            y: b.y + p.y,\n            width: b.width,\n            height: b.height\n        };\n    }\n\n    /**\n     * Returns the center point of the bounds of an object\n     * @param {Bounds} b - Bounds object\n     * @returns {Point} the center point\n     */\n    export function center(b: Bounds): Point {\n        return {\n            x: b.x + (b.width >= 0 ? 0.5 * b.width : 0),\n            y: b.y + (b.height >= 0 ? 0.5 * b.height : 0)\n        };\n    }\n\n    /**\n    * Checks whether the point p is included in the bounds b.\n    */\n    export function includes(b: Bounds, p: Point): boolean {\n        return p.x >= b.x && p.x <= b.x + b.width && p.y >= b.y && p.y <= b.y + b.height;\n    }\n}\n\n/**\n * Converts from radians to degrees\n * @param {number} a - A value in radians\n * @returns {number} The converted value\n */\nexport function toDegrees(a: number): number {\n    return a * 180 / Math.PI;\n}\n\n/**\n * Converts from degrees to radians\n * @param {number} a - A value in degrees\n * @returns {number} The converted value\n */\nexport function toRadians(a: number): number {\n    return a * Math.PI / 180;\n}\n\n/**\n * Returns whether two numbers are almost equal, within a small margin (0.001)\n * @param {number} a - First number\n * @param {number} b - Second number\n * @returns {boolean} True if the two numbers are almost equal\n */\nexport function almostEquals(a: number, b: number): boolean {\n    return Math.abs(a - b) < 1e-3;\n}\n","/********************************************************************************\n * Copyright (c) 2020-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport type JsonAny =  JsonPrimitive | JsonMap | JsonArray | null;\n\nexport type JsonPrimitive = string | number | boolean;\n\nexport interface JsonMap {\n    [key: string]: JsonAny;\n}\n\nexport type JsonArray = Array<JsonAny>;\n","/********************************************************************************\n * Copyright (c) 2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Alignable, BoundsAware, SModelElement, SModelRoot } from '../model';\nimport { ComputedBoundsAction } from '../actions';\n\n/**\n * Clone a given model. This function requires that the model is serializable, so it's\n * free of cycles and functions.\n */\nexport function cloneModel<T extends SModelElement>(model: T): T {\n    return JSON.parse(JSON.stringify(model));\n}\n\n/**\n * Apply the computed bounds to the given model. This ensures that the model has complete\n * information about positions and sizes derived from its actual rendering in the frontend.\n */\nexport function applyBounds(root: SModelRoot, action: ComputedBoundsAction) {\n    const index = new SModelIndex();\n    index.add(root);\n    for (const b of action.bounds) {\n        const element = index.getById(b.elementId);\n        if (element) {\n            const bae = element as SModelElement & BoundsAware;\n            if (b.newPosition) {\n                bae.position = { x: b.newPosition.x, y: b.newPosition.y };\n            }\n            if (b.newSize) {\n                bae.size = { width: b.newSize.width, height: b.newSize.height };\n            }\n        }\n    }\n    if (action.alignments) {\n        for (const a of action.alignments) {\n            const element = index.getById(a.elementId);\n            if (element) {\n                const alignable = element as SModelElement & Alignable;\n                alignable.alignment = { x: a.newAlignment.x, y: a.newAlignment.y };\n            }\n        }\n    }\n}\n\n/**\n * Model element types can include a colon to separate the basic type and a sub-type. This function\n * extracts the basic type of a model element.\n */\nexport function getBasicType(element: { type: string }): string {\n    if (!element.type) {\n        return '';\n    }\n    const colonIndex = element.type.indexOf(':');\n    return colonIndex >= 0 ? element.type.substring(0, colonIndex) : element.type;\n}\n\n/**\n * Model element types can include a colon to separate the basic type and a sub-type. This function\n * extracts the sub-type of a model element.\n */\nexport function getSubType(schema: { type: string }): string {\n    if (!schema.type) {\n        return '';\n    }\n    const colonIndex = schema.type.indexOf(':');\n    return colonIndex >= 0 ? schema.type.substring(colonIndex + 1) : schema.type;\n}\n\n/**\n * Find the element with the given identifier. If you need to find multiple elements, using an\n * `SModelIndex` might be more effective.\n */\nexport function findElement(parent: SModelElement, elementId: string): SModelElement | undefined {\n    if (parent.id === elementId) {\n        return parent;\n    }\n    if (parent.children) {\n        for (const child of parent.children) {\n            const result = findElement(child, elementId);\n            if (result !== undefined) {\n                return result;\n            }\n        }\n    }\n    return undefined;\n}\n\n/**\n * Used to speed up model element lookup by id.\n * This index implementation is for the serializable _external model_ defined in `sprotty-protocol`.\n */\nexport class SModelIndex {\n\n    private readonly id2element: Map<string, SModelElement> = new Map();\n    private id2parent: Map<string, SModelElement> = new Map();\n\n    add(element: SModelElement): this {\n        if (!element.id) {\n            throw new Error(\"Model element has no ID.\");\n        } else if (this.contains(element)) {\n            throw new Error(\"Duplicate ID in model: \" + element.id);\n        }\n        this.id2element.set(element.id, element);\n        if (Array.isArray(element.children)) {\n            for (const child of element.children) {\n                this.add(child as any);\n                this.id2parent.set(child.id, element);\n            }\n        }\n        return this;\n    }\n\n    remove(element: SModelElement): this {\n        this.id2element.delete(element.id);\n        if (Array.isArray(element.children)) {\n            for (const child of element.children) {\n                this.id2parent.delete(child.id);\n                this.remove(child as any);\n            }\n        }\n        return this;\n    }\n\n    contains(element: SModelElement): boolean {\n        return this.id2element.has(element.id);\n    }\n\n    getById(id: string): SModelElement | undefined {\n        return this.id2element.get(id);\n    }\n\n    getParent(id: string): SModelElement | undefined {\n        return this.id2parent.get(id);\n    }\n\n    getRoot(element: SModelElement): SModelRoot {\n        let current: SModelElement | undefined = element;\n        while (current) {\n            const parent = this.id2parent.get(current.id);\n            if (parent === undefined) {\n                return current;\n            }\n            current = parent;\n        }\n        throw new Error(\"Element has no root\");\n    }\n\n}\n","/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport function isObject(data: unknown): data is Record<PropertyKey, unknown> {\n    return typeof data === 'object' && data !== null;\n}\n\nexport type TypeOf<T> =\n    T extends number ? 'number'\n    : T extends string ? 'string'\n    : T extends boolean ? 'boolean'\n    : T extends bigint ? 'bigint'\n    : T extends symbol ? 'symbol'\n    : T extends Function ? 'function'\n    : T extends object ? 'object'\n    : 'undefined';\n\nexport function hasOwnProperty<K extends PropertyKey, T>(arg: unknown, key: K | K[], type?: TypeOf<T> | ((v: unknown) => v is T)): arg is Record<K, T> {\n    if (!isObject(arg)) {\n        return false;\n    }\n    if (Array.isArray(key)) {\n        for (const k of key) {\n            if (!Object.prototype.hasOwnProperty.call(arg, k)) {\n                return false;\n            }\n            if (typeof type === 'string' && typeof arg[k] !== type) {\n                return false;\n            } else if (typeof type === 'function' && !type(arg[k])) {\n                return false;\n            }\n        }\n    } else {\n        if (!Object.prototype.hasOwnProperty.call(arg, key)) {\n            return false;\n        }\n        if (typeof type === 'string') {\n            return typeof arg[key] === type;\n        }\n        if (typeof type === 'function') {\n            return type(arg[key]);\n        }\n    }\n    return true;\n}\n\nexport function safeAssign<T extends {}>(target: T, partial: Partial<T>): T {\n    return Object.assign(target, partial);\n}\n","exports.get = function(belowFn) {\n  var oldLimit = Error.stackTraceLimit;\n  Error.stackTraceLimit = Infinity;\n\n  var dummyObject = {};\n\n  var v8Handler = Error.prepareStackTrace;\n  Error.prepareStackTrace = function(dummyObject, v8StackTrace) {\n    return v8StackTrace;\n  };\n  Error.captureStackTrace(dummyObject, belowFn || exports.get);\n\n  var v8StackTrace = dummyObject.stack;\n  Error.prepareStackTrace = v8Handler;\n  Error.stackTraceLimit = oldLimit;\n\n  return v8StackTrace;\n};\n\nexports.parse = function(err) {\n  if (!err.stack) {\n    return [];\n  }\n\n  var self = this;\n  var lines = err.stack.split('\\n').slice(1);\n\n  return lines\n    .map(function(line) {\n      if (line.match(/^\\s*[-]{4,}$/)) {\n        return self._createParsedCallSite({\n          fileName: line,\n          lineNumber: null,\n          functionName: null,\n          typeName: null,\n          methodName: null,\n          columnNumber: null,\n          'native': null,\n        });\n      }\n\n      var lineMatch = line.match(/at (?:(.+)\\s+\\()?(?:(.+?):(\\d+)(?::(\\d+))?|([^)]+))\\)?/);\n      if (!lineMatch) {\n        return;\n      }\n\n      var object = null;\n      var method = null;\n      var functionName = null;\n      var typeName = null;\n      var methodName = null;\n      var isNative = (lineMatch[5] === 'native');\n\n      if (lineMatch[1]) {\n        functionName = lineMatch[1];\n        var methodStart = functionName.lastIndexOf('.');\n        if (functionName[methodStart-1] == '.')\n          methodStart--;\n        if (methodStart > 0) {\n          object = functionName.substr(0, methodStart);\n          method = functionName.substr(methodStart + 1);\n          var objectEnd = object.indexOf('.Module');\n          if (objectEnd > 0) {\n            functionName = functionName.substr(objectEnd + 1);\n            object = object.substr(0, objectEnd);\n          }\n        }\n        typeName = null;\n      }\n\n      if (method) {\n        typeName = object;\n        methodName = method;\n      }\n\n      if (method === '<anonymous>') {\n        methodName = null;\n        functionName = null;\n      }\n\n      var properties = {\n        fileName: lineMatch[2] || null,\n        lineNumber: parseInt(lineMatch[3], 10) || null,\n        functionName: functionName,\n        typeName: typeName,\n        methodName: methodName,\n        columnNumber: parseInt(lineMatch[4], 10) || null,\n        'native': isNative,\n      };\n\n      return self._createParsedCallSite(properties);\n    })\n    .filter(function(callSite) {\n      return !!callSite;\n    });\n};\n\nfunction CallSite(properties) {\n  for (var property in properties) {\n    this[property] = properties[property];\n  }\n}\n\nvar strProperties = [\n  'this',\n  'typeName',\n  'functionName',\n  'methodName',\n  'fileName',\n  'lineNumber',\n  'columnNumber',\n  'function',\n  'evalOrigin'\n];\nvar boolProperties = [\n  'topLevel',\n  'eval',\n  'native',\n  'constructor'\n];\nstrProperties.forEach(function (property) {\n  CallSite.prototype[property] = null;\n  CallSite.prototype['get' + property[0].toUpperCase() + property.substr(1)] = function () {\n    return this[property];\n  }\n});\nboolProperties.forEach(function (property) {\n  CallSite.prototype[property] = false;\n  CallSite.prototype['is' + property[0].toUpperCase() + property.substr(1)] = function () {\n    return this[property];\n  }\n});\n\nexports._createParsedCallSite = function(properties) {\n  return new CallSite(properties);\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","'use strict';\n\n/***\n * Convert string to hex color.\n *\n * @param {String} str Text to hash and convert to hex.\n * @returns {String}\n * @api public\n */\nmodule.exports = function hex(str) {\n  for (\n    var i = 0, hash = 0;\n    i < str.length;\n    hash = str.charCodeAt(i++) + ((hash << 5) - hash)\n  );\n\n  var color = Math.floor(\n    Math.abs(\n      (Math.sin(hash) * 10000) % 1 * 16777216\n    )\n  ).toString(16);\n\n  return '#' + Array(6 - color.length + 1).join('0') + color;\n};\n","/**\n * cli.js: Config that conform to commonly used CLI logging levels.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\n/**\n * Default levels for the CLI configuration.\n * @type {Object}\n */\nexports.levels = {\n  error: 0,\n  warn: 1,\n  help: 2,\n  data: 3,\n  info: 4,\n  debug: 5,\n  prompt: 6,\n  verbose: 7,\n  input: 8,\n  silly: 9\n};\n\n/**\n * Default colors for the CLI configuration.\n * @type {Object}\n */\nexports.colors = {\n  error: 'red',\n  warn: 'yellow',\n  help: 'cyan',\n  data: 'grey',\n  info: 'green',\n  debug: 'blue',\n  prompt: 'grey',\n  verbose: 'cyan',\n  input: 'grey',\n  silly: 'magenta'\n};\n","/**\n * index.js: Default settings for all levels that winston knows about.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\n/**\n * Export config set for the CLI.\n * @type {Object}\n */\nObject.defineProperty(exports, 'cli', {\n  value: require('./cli')\n});\n\n/**\n * Export config set for npm.\n * @type {Object}\n */\nObject.defineProperty(exports, 'npm', {\n  value: require('./npm')\n});\n\n/**\n * Export config set for the syslog.\n * @type {Object}\n */\nObject.defineProperty(exports, 'syslog', {\n  value: require('./syslog')\n});\n","/**\n * npm.js: Config that conform to npm logging levels.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\n/**\n * Default levels for the npm configuration.\n * @type {Object}\n */\nexports.levels = {\n  error: 0,\n  warn: 1,\n  info: 2,\n  http: 3,\n  verbose: 4,\n  debug: 5,\n  silly: 6\n};\n\n/**\n * Default levels for the npm configuration.\n * @type {Object}\n */\nexports.colors = {\n  error: 'red',\n  warn: 'yellow',\n  info: 'green',\n  http: 'green',\n  verbose: 'cyan',\n  debug: 'blue',\n  silly: 'magenta'\n};\n","/**\n * syslog.js: Config that conform to syslog logging levels.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\n/**\n * Default levels for the syslog configuration.\n * @type {Object}\n */\nexports.levels = {\n  emerg: 0,\n  alert: 1,\n  crit: 2,\n  error: 3,\n  warning: 4,\n  notice: 5,\n  info: 6,\n  debug: 7\n};\n\n/**\n * Default levels for the syslog configuration.\n * @type {Object}\n */\nexports.colors = {\n  emerg: 'red',\n  alert: 'yellow',\n  crit: 'red',\n  error: 'red',\n  warning: 'red',\n  notice: 'yellow',\n  info: 'green',\n  debug: 'blue'\n};\n","'use strict';\n\n/**\n * A shareable symbol constant that can be used\n * as a non-enumerable / semi-hidden level identifier\n * to allow the readable level property to be mutable for\n * operations like colorization\n *\n * @type {Symbol}\n */\nObject.defineProperty(exports, 'LEVEL', {\n  value: Symbol.for('level')\n});\n\n/**\n * A shareable symbol constant that can be used\n * as a non-enumerable / semi-hidden message identifier\n * to allow the final message property to not have\n * side effects on another.\n *\n * @type {Symbol}\n */\nObject.defineProperty(exports, 'MESSAGE', {\n  value: Symbol.for('message')\n});\n\n/**\n * A shareable symbol constant that can be used\n * as a non-enumerable / semi-hidden message identifier\n * to allow the extracted splat property be hidden\n *\n * @type {Symbol}\n */\nObject.defineProperty(exports, 'SPLAT', {\n  value: Symbol.for('splat')\n});\n\n/**\n * A shareable object constant  that can be used\n * as a standard configuration for winston@3.\n *\n * @type {Object}\n */\nObject.defineProperty(exports, 'configs', {\n  value: require('./config')\n});\n","\n/**\n * For Node.js, simply re-export the core `util.deprecate` function.\n */\n\nmodule.exports = require('util').deprecate;\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In node.js\n// this is pretty straight-forward - we use the crypto API.\n\nvar crypto = require('crypto');\n\nmodule.exports = function nodeRNG() {\n  return crypto.randomBytes(16);\n};\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/uuidjs/uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/browser/main');","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createMessageConnection = exports.BrowserMessageWriter = exports.BrowserMessageReader = void 0;\nconst ril_1 = require(\"./ril\");\n// Install the browser runtime abstract.\nril_1.default.install();\nconst api_1 = require(\"../common/api\");\n__exportStar(require(\"../common/api\"), exports);\nclass BrowserMessageReader extends api_1.AbstractMessageReader {\n    constructor(port) {\n        super();\n        this._onData = new api_1.Emitter();\n        this._messageListener = (event) => {\n            this._onData.fire(event.data);\n        };\n        port.addEventListener('error', (event) => this.fireError(event));\n        port.onmessage = this._messageListener;\n    }\n    listen(callback) {\n        return this._onData.event(callback);\n    }\n}\nexports.BrowserMessageReader = BrowserMessageReader;\nclass BrowserMessageWriter extends api_1.AbstractMessageWriter {\n    constructor(port) {\n        super();\n        this.port = port;\n        this.errorCount = 0;\n        port.addEventListener('error', (event) => this.fireError(event));\n    }\n    write(msg) {\n        try {\n            this.port.postMessage(msg);\n            return Promise.resolve();\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n    }\n}\nexports.BrowserMessageWriter = BrowserMessageWriter;\nfunction createMessageConnection(reader, writer, logger, options) {\n    if (logger === undefined) {\n        logger = api_1.NullLogger;\n    }\n    if (api_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return (0, api_1.createMessageConnection)(reader, writer, logger, options);\n}\nexports.createMessageConnection = createMessageConnection;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst api_1 = require(\"../common/api\");\nclass MessageBuffer extends api_1.AbstractMessageBuffer {\n    constructor(encoding = 'utf-8') {\n        super(encoding);\n        this.asciiDecoder = new TextDecoder('ascii');\n    }\n    emptyBuffer() {\n        return MessageBuffer.emptyBuffer;\n    }\n    fromString(value, _encoding) {\n        return (new TextEncoder()).encode(value);\n    }\n    toString(value, encoding) {\n        if (encoding === 'ascii') {\n            return this.asciiDecoder.decode(value);\n        }\n        else {\n            return (new TextDecoder(encoding)).decode(value);\n        }\n    }\n    asNative(buffer, length) {\n        if (length === undefined) {\n            return buffer;\n        }\n        else {\n            return buffer.slice(0, length);\n        }\n    }\n    allocNative(length) {\n        return new Uint8Array(length);\n    }\n}\nMessageBuffer.emptyBuffer = new Uint8Array(0);\nclass ReadableStreamWrapper {\n    constructor(socket) {\n        this.socket = socket;\n        this._onData = new api_1.Emitter();\n        this._messageListener = (event) => {\n            const blob = event.data;\n            blob.arrayBuffer().then((buffer) => {\n                this._onData.fire(new Uint8Array(buffer));\n            }, () => {\n                (0, api_1.RAL)().console.error(`Converting blob to array buffer failed.`);\n            });\n        };\n        this.socket.addEventListener('message', this._messageListener);\n    }\n    onClose(listener) {\n        this.socket.addEventListener('close', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('close', listener));\n    }\n    onError(listener) {\n        this.socket.addEventListener('error', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('error', listener));\n    }\n    onEnd(listener) {\n        this.socket.addEventListener('end', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('end', listener));\n    }\n    onData(listener) {\n        return this._onData.event(listener);\n    }\n}\nclass WritableStreamWrapper {\n    constructor(socket) {\n        this.socket = socket;\n    }\n    onClose(listener) {\n        this.socket.addEventListener('close', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('close', listener));\n    }\n    onError(listener) {\n        this.socket.addEventListener('error', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('error', listener));\n    }\n    onEnd(listener) {\n        this.socket.addEventListener('end', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('end', listener));\n    }\n    write(data, encoding) {\n        if (typeof data === 'string') {\n            if (encoding !== undefined && encoding !== 'utf-8') {\n                throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${encoding}`);\n            }\n            this.socket.send(data);\n        }\n        else {\n            this.socket.send(data);\n        }\n        return Promise.resolve();\n    }\n    end() {\n        this.socket.close();\n    }\n}\nconst _textEncoder = new TextEncoder();\nconst _ril = Object.freeze({\n    messageBuffer: Object.freeze({\n        create: (encoding) => new MessageBuffer(encoding)\n    }),\n    applicationJson: Object.freeze({\n        encoder: Object.freeze({\n            name: 'application/json',\n            encode: (msg, options) => {\n                if (options.charset !== 'utf-8') {\n                    throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${options.charset}`);\n                }\n                return Promise.resolve(_textEncoder.encode(JSON.stringify(msg, undefined, 0)));\n            }\n        }),\n        decoder: Object.freeze({\n            name: 'application/json',\n            decode: (buffer, options) => {\n                if (!(buffer instanceof Uint8Array)) {\n                    throw new Error(`In a Browser environments only Uint8Arrays are supported.`);\n                }\n                return Promise.resolve(JSON.parse(new TextDecoder(options.charset).decode(buffer)));\n            }\n        })\n    }),\n    stream: Object.freeze({\n        asReadableStream: (socket) => new ReadableStreamWrapper(socket),\n        asWritableStream: (socket) => new WritableStreamWrapper(socket)\n    }),\n    console: console,\n    timer: Object.freeze({\n        setTimeout(callback, ms, ...args) {\n            const handle = setTimeout(callback, ms, ...args);\n            return { dispose: () => clearTimeout(handle) };\n        },\n        setImmediate(callback, ...args) {\n            const handle = setTimeout(callback, 0, ...args);\n            return { dispose: () => clearTimeout(handle) };\n        },\n        setInterval(callback, ms, ...args) {\n            const handle = setInterval(callback, ms, ...args);\n            return { dispose: () => clearInterval(handle) };\n        },\n    })\n});\nfunction RIL() {\n    return _ril;\n}\n(function (RIL) {\n    function install() {\n        api_1.RAL.install(_ril);\n    }\n    RIL.install = install;\n})(RIL || (RIL = {}));\nexports.default = RIL;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/thenable.d.ts\" />\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProgressType = exports.ProgressToken = exports.createMessageConnection = exports.NullLogger = exports.ConnectionOptions = exports.ConnectionStrategy = exports.AbstractMessageBuffer = exports.WriteableStreamMessageWriter = exports.AbstractMessageWriter = exports.MessageWriter = exports.ReadableStreamMessageReader = exports.AbstractMessageReader = exports.MessageReader = exports.SharedArrayReceiverStrategy = exports.SharedArraySenderStrategy = exports.CancellationToken = exports.CancellationTokenSource = exports.Emitter = exports.Event = exports.Disposable = exports.LRUCache = exports.Touch = exports.LinkedMap = exports.ParameterStructures = exports.NotificationType9 = exports.NotificationType8 = exports.NotificationType7 = exports.NotificationType6 = exports.NotificationType5 = exports.NotificationType4 = exports.NotificationType3 = exports.NotificationType2 = exports.NotificationType1 = exports.NotificationType0 = exports.NotificationType = exports.ErrorCodes = exports.ResponseError = exports.RequestType9 = exports.RequestType8 = exports.RequestType7 = exports.RequestType6 = exports.RequestType5 = exports.RequestType4 = exports.RequestType3 = exports.RequestType2 = exports.RequestType1 = exports.RequestType0 = exports.RequestType = exports.Message = exports.RAL = void 0;\nexports.MessageStrategy = exports.CancellationStrategy = exports.CancellationSenderStrategy = exports.CancellationReceiverStrategy = exports.ConnectionError = exports.ConnectionErrors = exports.LogTraceNotification = exports.SetTraceNotification = exports.TraceFormat = exports.TraceValues = exports.Trace = void 0;\nconst messages_1 = require(\"./messages\");\nObject.defineProperty(exports, \"Message\", { enumerable: true, get: function () { return messages_1.Message; } });\nObject.defineProperty(exports, \"RequestType\", { enumerable: true, get: function () { return messages_1.RequestType; } });\nObject.defineProperty(exports, \"RequestType0\", { enumerable: true, get: function () { return messages_1.RequestType0; } });\nObject.defineProperty(exports, \"RequestType1\", { enumerable: true, get: function () { return messages_1.RequestType1; } });\nObject.defineProperty(exports, \"RequestType2\", { enumerable: true, get: function () { return messages_1.RequestType2; } });\nObject.defineProperty(exports, \"RequestType3\", { enumerable: true, get: function () { return messages_1.RequestType3; } });\nObject.defineProperty(exports, \"RequestType4\", { enumerable: true, get: function () { return messages_1.RequestType4; } });\nObject.defineProperty(exports, \"RequestType5\", { enumerable: true, get: function () { return messages_1.RequestType5; } });\nObject.defineProperty(exports, \"RequestType6\", { enumerable: true, get: function () { return messages_1.RequestType6; } });\nObject.defineProperty(exports, \"RequestType7\", { enumerable: true, get: function () { return messages_1.RequestType7; } });\nObject.defineProperty(exports, \"RequestType8\", { enumerable: true, get: function () { return messages_1.RequestType8; } });\nObject.defineProperty(exports, \"RequestType9\", { enumerable: true, get: function () { return messages_1.RequestType9; } });\nObject.defineProperty(exports, \"ResponseError\", { enumerable: true, get: function () { return messages_1.ResponseError; } });\nObject.defineProperty(exports, \"ErrorCodes\", { enumerable: true, get: function () { return messages_1.ErrorCodes; } });\nObject.defineProperty(exports, \"NotificationType\", { enumerable: true, get: function () { return messages_1.NotificationType; } });\nObject.defineProperty(exports, \"NotificationType0\", { enumerable: true, get: function () { return messages_1.NotificationType0; } });\nObject.defineProperty(exports, \"NotificationType1\", { enumerable: true, get: function () { return messages_1.NotificationType1; } });\nObject.defineProperty(exports, \"NotificationType2\", { enumerable: true, get: function () { return messages_1.NotificationType2; } });\nObject.defineProperty(exports, \"NotificationType3\", { enumerable: true, get: function () { return messages_1.NotificationType3; } });\nObject.defineProperty(exports, \"NotificationType4\", { enumerable: true, get: function () { return messages_1.NotificationType4; } });\nObject.defineProperty(exports, \"NotificationType5\", { enumerable: true, get: function () { return messages_1.NotificationType5; } });\nObject.defineProperty(exports, \"NotificationType6\", { enumerable: true, get: function () { return messages_1.NotificationType6; } });\nObject.defineProperty(exports, \"NotificationType7\", { enumerable: true, get: function () { return messages_1.NotificationType7; } });\nObject.defineProperty(exports, \"NotificationType8\", { enumerable: true, get: function () { return messages_1.NotificationType8; } });\nObject.defineProperty(exports, \"NotificationType9\", { enumerable: true, get: function () { return messages_1.NotificationType9; } });\nObject.defineProperty(exports, \"ParameterStructures\", { enumerable: true, get: function () { return messages_1.ParameterStructures; } });\nconst linkedMap_1 = require(\"./linkedMap\");\nObject.defineProperty(exports, \"LinkedMap\", { enumerable: true, get: function () { return linkedMap_1.LinkedMap; } });\nObject.defineProperty(exports, \"LRUCache\", { enumerable: true, get: function () { return linkedMap_1.LRUCache; } });\nObject.defineProperty(exports, \"Touch\", { enumerable: true, get: function () { return linkedMap_1.Touch; } });\nconst disposable_1 = require(\"./disposable\");\nObject.defineProperty(exports, \"Disposable\", { enumerable: true, get: function () { return disposable_1.Disposable; } });\nconst events_1 = require(\"./events\");\nObject.defineProperty(exports, \"Event\", { enumerable: true, get: function () { return events_1.Event; } });\nObject.defineProperty(exports, \"Emitter\", { enumerable: true, get: function () { return events_1.Emitter; } });\nconst cancellation_1 = require(\"./cancellation\");\nObject.defineProperty(exports, \"CancellationTokenSource\", { enumerable: true, get: function () { return cancellation_1.CancellationTokenSource; } });\nObject.defineProperty(exports, \"CancellationToken\", { enumerable: true, get: function () { return cancellation_1.CancellationToken; } });\nconst sharedArrayCancellation_1 = require(\"./sharedArrayCancellation\");\nObject.defineProperty(exports, \"SharedArraySenderStrategy\", { enumerable: true, get: function () { return sharedArrayCancellation_1.SharedArraySenderStrategy; } });\nObject.defineProperty(exports, \"SharedArrayReceiverStrategy\", { enumerable: true, get: function () { return sharedArrayCancellation_1.SharedArrayReceiverStrategy; } });\nconst messageReader_1 = require(\"./messageReader\");\nObject.defineProperty(exports, \"MessageReader\", { enumerable: true, get: function () { return messageReader_1.MessageReader; } });\nObject.defineProperty(exports, \"AbstractMessageReader\", { enumerable: true, get: function () { return messageReader_1.AbstractMessageReader; } });\nObject.defineProperty(exports, \"ReadableStreamMessageReader\", { enumerable: true, get: function () { return messageReader_1.ReadableStreamMessageReader; } });\nconst messageWriter_1 = require(\"./messageWriter\");\nObject.defineProperty(exports, \"MessageWriter\", { enumerable: true, get: function () { return messageWriter_1.MessageWriter; } });\nObject.defineProperty(exports, \"AbstractMessageWriter\", { enumerable: true, get: function () { return messageWriter_1.AbstractMessageWriter; } });\nObject.defineProperty(exports, \"WriteableStreamMessageWriter\", { enumerable: true, get: function () { return messageWriter_1.WriteableStreamMessageWriter; } });\nconst messageBuffer_1 = require(\"./messageBuffer\");\nObject.defineProperty(exports, \"AbstractMessageBuffer\", { enumerable: true, get: function () { return messageBuffer_1.AbstractMessageBuffer; } });\nconst connection_1 = require(\"./connection\");\nObject.defineProperty(exports, \"ConnectionStrategy\", { enumerable: true, get: function () { return connection_1.ConnectionStrategy; } });\nObject.defineProperty(exports, \"ConnectionOptions\", { enumerable: true, get: function () { return connection_1.ConnectionOptions; } });\nObject.defineProperty(exports, \"NullLogger\", { enumerable: true, get: function () { return connection_1.NullLogger; } });\nObject.defineProperty(exports, \"createMessageConnection\", { enumerable: true, get: function () { return connection_1.createMessageConnection; } });\nObject.defineProperty(exports, \"ProgressToken\", { enumerable: true, get: function () { return connection_1.ProgressToken; } });\nObject.defineProperty(exports, \"ProgressType\", { enumerable: true, get: function () { return connection_1.ProgressType; } });\nObject.defineProperty(exports, \"Trace\", { enumerable: true, get: function () { return connection_1.Trace; } });\nObject.defineProperty(exports, \"TraceValues\", { enumerable: true, get: function () { return connection_1.TraceValues; } });\nObject.defineProperty(exports, \"TraceFormat\", { enumerable: true, get: function () { return connection_1.TraceFormat; } });\nObject.defineProperty(exports, \"SetTraceNotification\", { enumerable: true, get: function () { return connection_1.SetTraceNotification; } });\nObject.defineProperty(exports, \"LogTraceNotification\", { enumerable: true, get: function () { return connection_1.LogTraceNotification; } });\nObject.defineProperty(exports, \"ConnectionErrors\", { enumerable: true, get: function () { return connection_1.ConnectionErrors; } });\nObject.defineProperty(exports, \"ConnectionError\", { enumerable: true, get: function () { return connection_1.ConnectionError; } });\nObject.defineProperty(exports, \"CancellationReceiverStrategy\", { enumerable: true, get: function () { return connection_1.CancellationReceiverStrategy; } });\nObject.defineProperty(exports, \"CancellationSenderStrategy\", { enumerable: true, get: function () { return connection_1.CancellationSenderStrategy; } });\nObject.defineProperty(exports, \"CancellationStrategy\", { enumerable: true, get: function () { return connection_1.CancellationStrategy; } });\nObject.defineProperty(exports, \"MessageStrategy\", { enumerable: true, get: function () { return connection_1.MessageStrategy; } });\nconst ral_1 = require(\"./ral\");\nexports.RAL = ral_1.default;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CancellationTokenSource = exports.CancellationToken = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nvar CancellationToken;\n(function (CancellationToken) {\n    CancellationToken.None = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: events_1.Event.None\n    });\n    CancellationToken.Cancelled = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: events_1.Event.None\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate === CancellationToken.None\n            || candidate === CancellationToken.Cancelled\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\n    }\n    CancellationToken.is = is;\n})(CancellationToken || (exports.CancellationToken = CancellationToken = {}));\nconst shortcutEvent = Object.freeze(function (callback, context) {\n    const handle = (0, ral_1.default)().timer.setTimeout(callback.bind(context), 0);\n    return { dispose() { handle.dispose(); } };\n});\nclass MutableToken {\n    constructor() {\n        this._isCancelled = false;\n    }\n    cancel() {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this.dispose();\n            }\n        }\n    }\n    get isCancellationRequested() {\n        return this._isCancelled;\n    }\n    get onCancellationRequested() {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new events_1.Emitter();\n        }\n        return this._emitter.event;\n    }\n    dispose() {\n        if (this._emitter) {\n            this._emitter.dispose();\n            this._emitter = undefined;\n        }\n    }\n}\nclass CancellationTokenSource {\n    get token() {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n    cancel() {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        }\n        else {\n            this._token.cancel();\n        }\n    }\n    dispose() {\n        if (!this._token) {\n            // ensure to initialize with an empty token if we had none\n            this._token = CancellationToken.None;\n        }\n        else if (this._token instanceof MutableToken) {\n            // actually dispose\n            this._token.dispose();\n        }\n    }\n}\nexports.CancellationTokenSource = CancellationTokenSource;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createMessageConnection = exports.ConnectionOptions = exports.MessageStrategy = exports.CancellationStrategy = exports.CancellationSenderStrategy = exports.CancellationReceiverStrategy = exports.RequestCancellationReceiverStrategy = exports.IdCancellationReceiverStrategy = exports.ConnectionStrategy = exports.ConnectionError = exports.ConnectionErrors = exports.LogTraceNotification = exports.SetTraceNotification = exports.TraceFormat = exports.TraceValues = exports.Trace = exports.NullLogger = exports.ProgressType = exports.ProgressToken = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst messages_1 = require(\"./messages\");\nconst linkedMap_1 = require(\"./linkedMap\");\nconst events_1 = require(\"./events\");\nconst cancellation_1 = require(\"./cancellation\");\nvar CancelNotification;\n(function (CancelNotification) {\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\n})(CancelNotification || (CancelNotification = {}));\nvar ProgressToken;\n(function (ProgressToken) {\n    function is(value) {\n        return typeof value === 'string' || typeof value === 'number';\n    }\n    ProgressToken.is = is;\n})(ProgressToken || (exports.ProgressToken = ProgressToken = {}));\nvar ProgressNotification;\n(function (ProgressNotification) {\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\n})(ProgressNotification || (ProgressNotification = {}));\nclass ProgressType {\n    constructor() {\n    }\n}\nexports.ProgressType = ProgressType;\nvar StarRequestHandler;\n(function (StarRequestHandler) {\n    function is(value) {\n        return Is.func(value);\n    }\n    StarRequestHandler.is = is;\n})(StarRequestHandler || (StarRequestHandler = {}));\nexports.NullLogger = Object.freeze({\n    error: () => { },\n    warn: () => { },\n    info: () => { },\n    log: () => { }\n});\nvar Trace;\n(function (Trace) {\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\n    Trace[Trace[\"Compact\"] = 2] = \"Compact\";\n    Trace[Trace[\"Verbose\"] = 3] = \"Verbose\";\n})(Trace || (exports.Trace = Trace = {}));\nvar TraceValues;\n(function (TraceValues) {\n    /**\n     * Turn tracing off.\n     */\n    TraceValues.Off = 'off';\n    /**\n     * Trace messages only.\n     */\n    TraceValues.Messages = 'messages';\n    /**\n     * Compact message tracing.\n     */\n    TraceValues.Compact = 'compact';\n    /**\n     * Verbose message tracing.\n     */\n    TraceValues.Verbose = 'verbose';\n})(TraceValues || (exports.TraceValues = TraceValues = {}));\n(function (Trace) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return Trace.Off;\n        }\n        value = value.toLowerCase();\n        switch (value) {\n            case 'off':\n                return Trace.Off;\n            case 'messages':\n                return Trace.Messages;\n            case 'compact':\n                return Trace.Compact;\n            case 'verbose':\n                return Trace.Verbose;\n            default:\n                return Trace.Off;\n        }\n    }\n    Trace.fromString = fromString;\n    function toString(value) {\n        switch (value) {\n            case Trace.Off:\n                return 'off';\n            case Trace.Messages:\n                return 'messages';\n            case Trace.Compact:\n                return 'compact';\n            case Trace.Verbose:\n                return 'verbose';\n            default:\n                return 'off';\n        }\n    }\n    Trace.toString = toString;\n})(Trace || (exports.Trace = Trace = {}));\nvar TraceFormat;\n(function (TraceFormat) {\n    TraceFormat[\"Text\"] = \"text\";\n    TraceFormat[\"JSON\"] = \"json\";\n})(TraceFormat || (exports.TraceFormat = TraceFormat = {}));\n(function (TraceFormat) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return TraceFormat.Text;\n        }\n        value = value.toLowerCase();\n        if (value === 'json') {\n            return TraceFormat.JSON;\n        }\n        else {\n            return TraceFormat.Text;\n        }\n    }\n    TraceFormat.fromString = fromString;\n})(TraceFormat || (exports.TraceFormat = TraceFormat = {}));\nvar SetTraceNotification;\n(function (SetTraceNotification) {\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTrace');\n})(SetTraceNotification || (exports.SetTraceNotification = SetTraceNotification = {}));\nvar LogTraceNotification;\n(function (LogTraceNotification) {\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTrace');\n})(LogTraceNotification || (exports.LogTraceNotification = LogTraceNotification = {}));\nvar ConnectionErrors;\n(function (ConnectionErrors) {\n    /**\n     * The connection is closed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\n    /**\n     * The connection got disposed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\n    /**\n     * The connection is already in listening mode.\n     */\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\n})(ConnectionErrors || (exports.ConnectionErrors = ConnectionErrors = {}));\nclass ConnectionError extends Error {\n    constructor(code, message) {\n        super(message);\n        this.code = code;\n        Object.setPrototypeOf(this, ConnectionError.prototype);\n    }\n}\nexports.ConnectionError = ConnectionError;\nvar ConnectionStrategy;\n(function (ConnectionStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.cancelUndispatched);\n    }\n    ConnectionStrategy.is = is;\n})(ConnectionStrategy || (exports.ConnectionStrategy = ConnectionStrategy = {}));\nvar IdCancellationReceiverStrategy;\n(function (IdCancellationReceiverStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate.kind === undefined || candidate.kind === 'id') && Is.func(candidate.createCancellationTokenSource) && (candidate.dispose === undefined || Is.func(candidate.dispose));\n    }\n    IdCancellationReceiverStrategy.is = is;\n})(IdCancellationReceiverStrategy || (exports.IdCancellationReceiverStrategy = IdCancellationReceiverStrategy = {}));\nvar RequestCancellationReceiverStrategy;\n(function (RequestCancellationReceiverStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && candidate.kind === 'request' && Is.func(candidate.createCancellationTokenSource) && (candidate.dispose === undefined || Is.func(candidate.dispose));\n    }\n    RequestCancellationReceiverStrategy.is = is;\n})(RequestCancellationReceiverStrategy || (exports.RequestCancellationReceiverStrategy = RequestCancellationReceiverStrategy = {}));\nvar CancellationReceiverStrategy;\n(function (CancellationReceiverStrategy) {\n    CancellationReceiverStrategy.Message = Object.freeze({\n        createCancellationTokenSource(_) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n    });\n    function is(value) {\n        return IdCancellationReceiverStrategy.is(value) || RequestCancellationReceiverStrategy.is(value);\n    }\n    CancellationReceiverStrategy.is = is;\n})(CancellationReceiverStrategy || (exports.CancellationReceiverStrategy = CancellationReceiverStrategy = {}));\nvar CancellationSenderStrategy;\n(function (CancellationSenderStrategy) {\n    CancellationSenderStrategy.Message = Object.freeze({\n        sendCancellation(conn, id) {\n            return conn.sendNotification(CancelNotification.type, { id });\n        },\n        cleanup(_) { }\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.sendCancellation) && Is.func(candidate.cleanup);\n    }\n    CancellationSenderStrategy.is = is;\n})(CancellationSenderStrategy || (exports.CancellationSenderStrategy = CancellationSenderStrategy = {}));\nvar CancellationStrategy;\n(function (CancellationStrategy) {\n    CancellationStrategy.Message = Object.freeze({\n        receiver: CancellationReceiverStrategy.Message,\n        sender: CancellationSenderStrategy.Message\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && CancellationReceiverStrategy.is(candidate.receiver) && CancellationSenderStrategy.is(candidate.sender);\n    }\n    CancellationStrategy.is = is;\n})(CancellationStrategy || (exports.CancellationStrategy = CancellationStrategy = {}));\nvar MessageStrategy;\n(function (MessageStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.handleMessage);\n    }\n    MessageStrategy.is = is;\n})(MessageStrategy || (exports.MessageStrategy = MessageStrategy = {}));\nvar ConnectionOptions;\n(function (ConnectionOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (CancellationStrategy.is(candidate.cancellationStrategy) || ConnectionStrategy.is(candidate.connectionStrategy) || MessageStrategy.is(candidate.messageStrategy));\n    }\n    ConnectionOptions.is = is;\n})(ConnectionOptions || (exports.ConnectionOptions = ConnectionOptions = {}));\nvar ConnectionState;\n(function (ConnectionState) {\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\n})(ConnectionState || (ConnectionState = {}));\nfunction createMessageConnection(messageReader, messageWriter, _logger, options) {\n    const logger = _logger !== undefined ? _logger : exports.NullLogger;\n    let sequenceNumber = 0;\n    let notificationSequenceNumber = 0;\n    let unknownResponseSequenceNumber = 0;\n    const version = '2.0';\n    let starRequestHandler = undefined;\n    const requestHandlers = new Map();\n    let starNotificationHandler = undefined;\n    const notificationHandlers = new Map();\n    const progressHandlers = new Map();\n    let timer;\n    let messageQueue = new linkedMap_1.LinkedMap();\n    let responsePromises = new Map();\n    let knownCanceledRequests = new Set();\n    let requestTokens = new Map();\n    let trace = Trace.Off;\n    let traceFormat = TraceFormat.Text;\n    let tracer;\n    let state = ConnectionState.New;\n    const errorEmitter = new events_1.Emitter();\n    const closeEmitter = new events_1.Emitter();\n    const unhandledNotificationEmitter = new events_1.Emitter();\n    const unhandledProgressEmitter = new events_1.Emitter();\n    const disposeEmitter = new events_1.Emitter();\n    const cancellationStrategy = (options && options.cancellationStrategy) ? options.cancellationStrategy : CancellationStrategy.Message;\n    function createRequestQueueKey(id) {\n        if (id === null) {\n            throw new Error(`Can't send requests with id null since the response can't be correlated.`);\n        }\n        return 'req-' + id.toString();\n    }\n    function createResponseQueueKey(id) {\n        if (id === null) {\n            return 'res-unknown-' + (++unknownResponseSequenceNumber).toString();\n        }\n        else {\n            return 'res-' + id.toString();\n        }\n    }\n    function createNotificationQueueKey() {\n        return 'not-' + (++notificationSequenceNumber).toString();\n    }\n    function addMessageToQueue(queue, message) {\n        if (messages_1.Message.isRequest(message)) {\n            queue.set(createRequestQueueKey(message.id), message);\n        }\n        else if (messages_1.Message.isResponse(message)) {\n            queue.set(createResponseQueueKey(message.id), message);\n        }\n        else {\n            queue.set(createNotificationQueueKey(), message);\n        }\n    }\n    function cancelUndispatched(_message) {\n        return undefined;\n    }\n    function isListening() {\n        return state === ConnectionState.Listening;\n    }\n    function isClosed() {\n        return state === ConnectionState.Closed;\n    }\n    function isDisposed() {\n        return state === ConnectionState.Disposed;\n    }\n    function closeHandler() {\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\n            state = ConnectionState.Closed;\n            closeEmitter.fire(undefined);\n        }\n        // If the connection is disposed don't sent close events.\n    }\n    function readErrorHandler(error) {\n        errorEmitter.fire([error, undefined, undefined]);\n    }\n    function writeErrorHandler(data) {\n        errorEmitter.fire(data);\n    }\n    messageReader.onClose(closeHandler);\n    messageReader.onError(readErrorHandler);\n    messageWriter.onClose(closeHandler);\n    messageWriter.onError(writeErrorHandler);\n    function triggerMessageQueue() {\n        if (timer || messageQueue.size === 0) {\n            return;\n        }\n        timer = (0, ral_1.default)().timer.setImmediate(() => {\n            timer = undefined;\n            processMessageQueue();\n        });\n    }\n    function handleMessage(message) {\n        if (messages_1.Message.isRequest(message)) {\n            handleRequest(message);\n        }\n        else if (messages_1.Message.isNotification(message)) {\n            handleNotification(message);\n        }\n        else if (messages_1.Message.isResponse(message)) {\n            handleResponse(message);\n        }\n        else {\n            handleInvalidMessage(message);\n        }\n    }\n    function processMessageQueue() {\n        if (messageQueue.size === 0) {\n            return;\n        }\n        const message = messageQueue.shift();\n        try {\n            const messageStrategy = options?.messageStrategy;\n            if (MessageStrategy.is(messageStrategy)) {\n                messageStrategy.handleMessage(message, handleMessage);\n            }\n            else {\n                handleMessage(message);\n            }\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    }\n    const callback = (message) => {\n        try {\n            // We have received a cancellation message. Check if the message is still in the queue\n            // and cancel it if allowed to do so.\n            if (messages_1.Message.isNotification(message) && message.method === CancelNotification.type.method) {\n                const cancelId = message.params.id;\n                const key = createRequestQueueKey(cancelId);\n                const toCancel = messageQueue.get(key);\n                if (messages_1.Message.isRequest(toCancel)) {\n                    const strategy = options?.connectionStrategy;\n                    const response = (strategy && strategy.cancelUndispatched) ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\n                    if (response && (response.error !== undefined || response.result !== undefined)) {\n                        messageQueue.delete(key);\n                        requestTokens.delete(cancelId);\n                        response.id = toCancel.id;\n                        traceSendingResponse(response, message.method, Date.now());\n                        messageWriter.write(response).catch(() => logger.error(`Sending response for canceled message failed.`));\n                        return;\n                    }\n                }\n                const cancellationToken = requestTokens.get(cancelId);\n                // The request is already running. Cancel the token\n                if (cancellationToken !== undefined) {\n                    cancellationToken.cancel();\n                    traceReceivedNotification(message);\n                    return;\n                }\n                else {\n                    // Remember the cancel but still queue the message to\n                    // clean up state in process message.\n                    knownCanceledRequests.add(cancelId);\n                }\n            }\n            addMessageToQueue(messageQueue, message);\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    };\n    function handleRequest(requestMessage) {\n        if (isDisposed()) {\n            // we return here silently since we fired an event when the\n            // connection got disposed.\n            return;\n        }\n        function reply(resultOrError, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id\n            };\n            if (resultOrError instanceof messages_1.ResponseError) {\n                message.error = resultOrError.toJson();\n            }\n            else {\n                message.result = resultOrError === undefined ? null : resultOrError;\n            }\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        function replyError(error, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                error: error.toJson()\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        function replySuccess(result, method, startTime) {\n            // The JSON RPC defines that a response must either have a result or an error\n            // So we can't treat undefined as a valid response result.\n            if (result === undefined) {\n                result = null;\n            }\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                result: result\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        traceReceivedRequest(requestMessage);\n        const element = requestHandlers.get(requestMessage.method);\n        let type;\n        let requestHandler;\n        if (element) {\n            type = element.type;\n            requestHandler = element.handler;\n        }\n        const startTime = Date.now();\n        if (requestHandler || starRequestHandler) {\n            const tokenKey = requestMessage.id ?? String(Date.now()); //\n            const cancellationSource = IdCancellationReceiverStrategy.is(cancellationStrategy.receiver)\n                ? cancellationStrategy.receiver.createCancellationTokenSource(tokenKey)\n                : cancellationStrategy.receiver.createCancellationTokenSource(requestMessage);\n            if (requestMessage.id !== null && knownCanceledRequests.has(requestMessage.id)) {\n                cancellationSource.cancel();\n            }\n            if (requestMessage.id !== null) {\n                requestTokens.set(tokenKey, cancellationSource);\n            }\n            try {\n                let handlerResult;\n                if (requestHandler) {\n                    if (requestMessage.params === undefined) {\n                        if (type !== undefined && type.numberOfParams !== 0) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines ${type.numberOfParams} params but received none.`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(cancellationSource.token);\n                    }\n                    else if (Array.isArray(requestMessage.params)) {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byName) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by name but received parameters by position`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(...requestMessage.params, cancellationSource.token);\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by position but received parameters by name`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(requestMessage.params, cancellationSource.token);\n                    }\n                }\n                else if (starRequestHandler) {\n                    handlerResult = starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\n                }\n                const promise = handlerResult;\n                if (!handlerResult) {\n                    requestTokens.delete(tokenKey);\n                    replySuccess(handlerResult, requestMessage.method, startTime);\n                }\n                else if (promise.then) {\n                    promise.then((resultOrError) => {\n                        requestTokens.delete(tokenKey);\n                        reply(resultOrError, requestMessage.method, startTime);\n                    }, error => {\n                        requestTokens.delete(tokenKey);\n                        if (error instanceof messages_1.ResponseError) {\n                            replyError(error, requestMessage.method, startTime);\n                        }\n                        else if (error && Is.string(error.message)) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                        }\n                        else {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                        }\n                    });\n                }\n                else {\n                    requestTokens.delete(tokenKey);\n                    reply(handlerResult, requestMessage.method, startTime);\n                }\n            }\n            catch (error) {\n                requestTokens.delete(tokenKey);\n                if (error instanceof messages_1.ResponseError) {\n                    reply(error, requestMessage.method, startTime);\n                }\n                else if (error && Is.string(error.message)) {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                }\n                else {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                }\n            }\n        }\n        else {\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\n        }\n    }\n    function handleResponse(responseMessage) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        if (responseMessage.id === null) {\n            if (responseMessage.error) {\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\n            }\n            else {\n                logger.error(`Received response message without id. No further error information provided.`);\n            }\n        }\n        else {\n            const key = responseMessage.id;\n            const responsePromise = responsePromises.get(key);\n            traceReceivedResponse(responseMessage, responsePromise);\n            if (responsePromise !== undefined) {\n                responsePromises.delete(key);\n                try {\n                    if (responseMessage.error) {\n                        const error = responseMessage.error;\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\n                    }\n                    else if (responseMessage.result !== undefined) {\n                        responsePromise.resolve(responseMessage.result);\n                    }\n                    else {\n                        throw new Error('Should never happen.');\n                    }\n                }\n                catch (error) {\n                    if (error.message) {\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\n                    }\n                    else {\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\n                    }\n                }\n            }\n        }\n    }\n    function handleNotification(message) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        let type = undefined;\n        let notificationHandler;\n        if (message.method === CancelNotification.type.method) {\n            const cancelId = message.params.id;\n            knownCanceledRequests.delete(cancelId);\n            traceReceivedNotification(message);\n            return;\n        }\n        else {\n            const element = notificationHandlers.get(message.method);\n            if (element) {\n                notificationHandler = element.handler;\n                type = element.type;\n            }\n        }\n        if (notificationHandler || starNotificationHandler) {\n            try {\n                traceReceivedNotification(message);\n                if (notificationHandler) {\n                    if (message.params === undefined) {\n                        if (type !== undefined) {\n                            if (type.numberOfParams !== 0 && type.parameterStructures !== messages_1.ParameterStructures.byName) {\n                                logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received none.`);\n                            }\n                        }\n                        notificationHandler();\n                    }\n                    else if (Array.isArray(message.params)) {\n                        // There are JSON-RPC libraries that send progress message as positional params although\n                        // specified as named. So convert them if this is the case.\n                        const params = message.params;\n                        if (message.method === ProgressNotification.type.method && params.length === 2 && ProgressToken.is(params[0])) {\n                            notificationHandler({ token: params[0], value: params[1] });\n                        }\n                        else {\n                            if (type !== undefined) {\n                                if (type.parameterStructures === messages_1.ParameterStructures.byName) {\n                                    logger.error(`Notification ${message.method} defines parameters by name but received parameters by position`);\n                                }\n                                if (type.numberOfParams !== message.params.length) {\n                                    logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received ${params.length} arguments`);\n                                }\n                            }\n                            notificationHandler(...params);\n                        }\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            logger.error(`Notification ${message.method} defines parameters by position but received parameters by name`);\n                        }\n                        notificationHandler(message.params);\n                    }\n                }\n                else if (starNotificationHandler) {\n                    starNotificationHandler(message.method, message.params);\n                }\n            }\n            catch (error) {\n                if (error.message) {\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\n                }\n                else {\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\n                }\n            }\n        }\n        else {\n            unhandledNotificationEmitter.fire(message);\n        }\n    }\n    function handleInvalidMessage(message) {\n        if (!message) {\n            logger.error('Received empty message.');\n            return;\n        }\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\n        // Test whether we find an id to reject the promise\n        const responseMessage = message;\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\n            const key = responseMessage.id;\n            const responseHandler = responsePromises.get(key);\n            if (responseHandler) {\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\n            }\n        }\n    }\n    function stringifyTrace(params) {\n        if (params === undefined || params === null) {\n            return undefined;\n        }\n        switch (trace) {\n            case Trace.Verbose:\n                return JSON.stringify(params, null, 4);\n            case Trace.Compact:\n                return JSON.stringify(params);\n            default:\n                return undefined;\n        }\n    }\n    function traceSendingRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if ((trace === Trace.Verbose || trace === Trace.Compact) && message.params) {\n                data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n            }\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('send-request', message);\n        }\n    }\n    function traceSendingNotification(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.params) {\n                    data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Sending notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('send-notification', message);\n        }\n    }\n    function traceSendingResponse(message, method, startTime) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${stringifyTrace(message.error.data)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${stringifyTrace(message.result)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\n        }\n        else {\n            logLSPMessage('send-response', message);\n        }\n    }\n    function traceReceivedRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if ((trace === Trace.Verbose || trace === Trace.Compact) && message.params) {\n                data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n            }\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('receive-request', message);\n        }\n    }\n    function traceReceivedNotification(message) {\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.params) {\n                    data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Received notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('receive-notification', message);\n        }\n    }\n    function traceReceivedResponse(message, responsePromise) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${stringifyTrace(message.error.data)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${stringifyTrace(message.result)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            if (responsePromise) {\n                const error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\n            }\n            else {\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\n            }\n        }\n        else {\n            logLSPMessage('receive-response', message);\n        }\n    }\n    function logLSPMessage(type, message) {\n        if (!tracer || trace === Trace.Off) {\n            return;\n        }\n        const lspMessage = {\n            isLSPMessage: true,\n            type,\n            message,\n            timestamp: Date.now()\n        };\n        tracer.log(lspMessage);\n    }\n    function throwIfClosedOrDisposed() {\n        if (isClosed()) {\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\n        }\n        if (isDisposed()) {\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\n        }\n    }\n    function throwIfListening() {\n        if (isListening()) {\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\n        }\n    }\n    function throwIfNotListening() {\n        if (!isListening()) {\n            throw new Error('Call listen() first.');\n        }\n    }\n    function undefinedToNull(param) {\n        if (param === undefined) {\n            return null;\n        }\n        else {\n            return param;\n        }\n    }\n    function nullToUndefined(param) {\n        if (param === null) {\n            return undefined;\n        }\n        else {\n            return param;\n        }\n    }\n    function isNamedParam(param) {\n        return param !== undefined && param !== null && !Array.isArray(param) && typeof param === 'object';\n    }\n    function computeSingleParam(parameterStructures, param) {\n        switch (parameterStructures) {\n            case messages_1.ParameterStructures.auto:\n                if (isNamedParam(param)) {\n                    return nullToUndefined(param);\n                }\n                else {\n                    return [undefinedToNull(param)];\n                }\n            case messages_1.ParameterStructures.byName:\n                if (!isNamedParam(param)) {\n                    throw new Error(`Received parameters by name but param is not an object literal.`);\n                }\n                return nullToUndefined(param);\n            case messages_1.ParameterStructures.byPosition:\n                return [undefinedToNull(param)];\n            default:\n                throw new Error(`Unknown parameter structure ${parameterStructures.toString()}`);\n        }\n    }\n    function computeMessageParams(type, params) {\n        let result;\n        const numberOfParams = type.numberOfParams;\n        switch (numberOfParams) {\n            case 0:\n                result = undefined;\n                break;\n            case 1:\n                result = computeSingleParam(type.parameterStructures, params[0]);\n                break;\n            default:\n                result = [];\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\n                    result.push(undefinedToNull(params[i]));\n                }\n                if (params.length < numberOfParams) {\n                    for (let i = params.length; i < numberOfParams; i++) {\n                        result.push(null);\n                    }\n                }\n                break;\n        }\n        return result;\n    }\n    const connection = {\n        sendNotification: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            let method;\n            let messageParams;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                let paramEnd = args.length;\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Received ${numberOfParams} parameters for 'by Name' notification parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n            }\n            const notificationMessage = {\n                jsonrpc: version,\n                method: method,\n                params: messageParams\n            };\n            traceSendingNotification(notificationMessage);\n            return messageWriter.write(notificationMessage).catch((error) => {\n                logger.error(`Sending notification failed.`);\n                throw error;\n            });\n        },\n        onNotification: (type, handler) => {\n            throwIfClosedOrDisposed();\n            let method;\n            if (Is.func(type)) {\n                starNotificationHandler = type;\n            }\n            else if (handler) {\n                if (Is.string(type)) {\n                    method = type;\n                    notificationHandlers.set(type, { type: undefined, handler });\n                }\n                else {\n                    method = type.method;\n                    notificationHandlers.set(type.method, { type, handler });\n                }\n            }\n            return {\n                dispose: () => {\n                    if (method !== undefined) {\n                        notificationHandlers.delete(method);\n                    }\n                    else {\n                        starNotificationHandler = undefined;\n                    }\n                }\n            };\n        },\n        onProgress: (_type, token, handler) => {\n            if (progressHandlers.has(token)) {\n                throw new Error(`Progress handler for token ${token} already registered`);\n            }\n            progressHandlers.set(token, handler);\n            return {\n                dispose: () => {\n                    progressHandlers.delete(token);\n                }\n            };\n        },\n        sendProgress: (_type, token, value) => {\n            // This should not await but simple return to ensure that we don't have another\n            // async scheduling. Otherwise one send could overtake another send.\n            return connection.sendNotification(ProgressNotification.type, { token, value });\n        },\n        onUnhandledProgress: unhandledProgressEmitter.event,\n        sendRequest: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            throwIfNotListening();\n            let method;\n            let messageParams;\n            let token = undefined;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                const last = args[args.length - 1];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                let paramEnd = args.length;\n                if (cancellation_1.CancellationToken.is(last)) {\n                    paramEnd = paramEnd - 1;\n                    token = last;\n                }\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Received ${numberOfParams} parameters for 'by Name' request parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n                const numberOfParams = type.numberOfParams;\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\n            }\n            const id = sequenceNumber++;\n            let disposable;\n            if (token) {\n                disposable = token.onCancellationRequested(() => {\n                    const p = cancellationStrategy.sender.sendCancellation(connection, id);\n                    if (p === undefined) {\n                        logger.log(`Received no promise from cancellation strategy when cancelling id ${id}`);\n                        return Promise.resolve();\n                    }\n                    else {\n                        return p.catch(() => {\n                            logger.log(`Sending cancellation messages for id ${id} failed`);\n                        });\n                    }\n                });\n            }\n            const requestMessage = {\n                jsonrpc: version,\n                id: id,\n                method: method,\n                params: messageParams\n            };\n            traceSendingRequest(requestMessage);\n            if (typeof cancellationStrategy.sender.enableCancellation === 'function') {\n                cancellationStrategy.sender.enableCancellation(requestMessage);\n            }\n            return new Promise(async (resolve, reject) => {\n                const resolveWithCleanup = (r) => {\n                    resolve(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable?.dispose();\n                };\n                const rejectWithCleanup = (r) => {\n                    reject(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable?.dispose();\n                };\n                const responsePromise = { method: method, timerStart: Date.now(), resolve: resolveWithCleanup, reject: rejectWithCleanup };\n                try {\n                    await messageWriter.write(requestMessage);\n                    responsePromises.set(id, responsePromise);\n                }\n                catch (error) {\n                    logger.error(`Sending request failed.`);\n                    // Writing the message failed. So we need to reject the promise.\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, error.message ? error.message : 'Unknown reason'));\n                    throw error;\n                }\n            });\n        },\n        onRequest: (type, handler) => {\n            throwIfClosedOrDisposed();\n            let method = null;\n            if (StarRequestHandler.is(type)) {\n                method = undefined;\n                starRequestHandler = type;\n            }\n            else if (Is.string(type)) {\n                method = null;\n                if (handler !== undefined) {\n                    method = type;\n                    requestHandlers.set(type, { handler: handler, type: undefined });\n                }\n            }\n            else {\n                if (handler !== undefined) {\n                    method = type.method;\n                    requestHandlers.set(type.method, { type, handler });\n                }\n            }\n            return {\n                dispose: () => {\n                    if (method === null) {\n                        return;\n                    }\n                    if (method !== undefined) {\n                        requestHandlers.delete(method);\n                    }\n                    else {\n                        starRequestHandler = undefined;\n                    }\n                }\n            };\n        },\n        hasPendingResponse: () => {\n            return responsePromises.size > 0;\n        },\n        trace: async (_value, _tracer, sendNotificationOrTraceOptions) => {\n            let _sendNotification = false;\n            let _traceFormat = TraceFormat.Text;\n            if (sendNotificationOrTraceOptions !== undefined) {\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\n                    _sendNotification = sendNotificationOrTraceOptions;\n                }\n                else {\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\n                }\n            }\n            trace = _value;\n            traceFormat = _traceFormat;\n            if (trace === Trace.Off) {\n                tracer = undefined;\n            }\n            else {\n                tracer = _tracer;\n            }\n            if (_sendNotification && !isClosed() && !isDisposed()) {\n                await connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\n            }\n        },\n        onError: errorEmitter.event,\n        onClose: closeEmitter.event,\n        onUnhandledNotification: unhandledNotificationEmitter.event,\n        onDispose: disposeEmitter.event,\n        end: () => {\n            messageWriter.end();\n        },\n        dispose: () => {\n            if (isDisposed()) {\n                return;\n            }\n            state = ConnectionState.Disposed;\n            disposeEmitter.fire(undefined);\n            const error = new messages_1.ResponseError(messages_1.ErrorCodes.PendingResponseRejected, 'Pending response rejected since connection got disposed');\n            for (const promise of responsePromises.values()) {\n                promise.reject(error);\n            }\n            responsePromises = new Map();\n            requestTokens = new Map();\n            knownCanceledRequests = new Set();\n            messageQueue = new linkedMap_1.LinkedMap();\n            // Test for backwards compatibility\n            if (Is.func(messageWriter.dispose)) {\n                messageWriter.dispose();\n            }\n            if (Is.func(messageReader.dispose)) {\n                messageReader.dispose();\n            }\n        },\n        listen: () => {\n            throwIfClosedOrDisposed();\n            throwIfListening();\n            state = ConnectionState.Listening;\n            messageReader.listen(callback);\n        },\n        inspect: () => {\n            // eslint-disable-next-line no-console\n            (0, ral_1.default)().console.log('inspect');\n        }\n    };\n    connection.onNotification(LogTraceNotification.type, (params) => {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        const verbose = trace === Trace.Verbose || trace === Trace.Compact;\n        tracer.log(params.message, verbose ? params.verbose : undefined);\n    });\n    connection.onNotification(ProgressNotification.type, (params) => {\n        const handler = progressHandlers.get(params.token);\n        if (handler) {\n            handler(params.value);\n        }\n        else {\n            unhandledProgressEmitter.fire(params);\n        }\n    });\n    return connection;\n}\nexports.createMessageConnection = createMessageConnection;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Disposable = void 0;\nvar Disposable;\n(function (Disposable) {\n    function create(func) {\n        return {\n            dispose: func\n        };\n    }\n    Disposable.create = create;\n})(Disposable || (exports.Disposable = Disposable = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Emitter = exports.Event = void 0;\nconst ral_1 = require(\"./ral\");\nvar Event;\n(function (Event) {\n    const _disposable = { dispose() { } };\n    Event.None = function () { return _disposable; };\n})(Event || (exports.Event = Event = {}));\nclass CallbackList {\n    add(callback, context = null, bucket) {\n        if (!this._callbacks) {\n            this._callbacks = [];\n            this._contexts = [];\n        }\n        this._callbacks.push(callback);\n        this._contexts.push(context);\n        if (Array.isArray(bucket)) {\n            bucket.push({ dispose: () => this.remove(callback, context) });\n        }\n    }\n    remove(callback, context = null) {\n        if (!this._callbacks) {\n            return;\n        }\n        let foundCallbackWithDifferentContext = false;\n        for (let i = 0, len = this._callbacks.length; i < len; i++) {\n            if (this._callbacks[i] === callback) {\n                if (this._contexts[i] === context) {\n                    // callback & context match => remove it\n                    this._callbacks.splice(i, 1);\n                    this._contexts.splice(i, 1);\n                    return;\n                }\n                else {\n                    foundCallbackWithDifferentContext = true;\n                }\n            }\n        }\n        if (foundCallbackWithDifferentContext) {\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\n        }\n    }\n    invoke(...args) {\n        if (!this._callbacks) {\n            return [];\n        }\n        const ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\n        for (let i = 0, len = callbacks.length; i < len; i++) {\n            try {\n                ret.push(callbacks[i].apply(contexts[i], args));\n            }\n            catch (e) {\n                // eslint-disable-next-line no-console\n                (0, ral_1.default)().console.error(e);\n            }\n        }\n        return ret;\n    }\n    isEmpty() {\n        return !this._callbacks || this._callbacks.length === 0;\n    }\n    dispose() {\n        this._callbacks = undefined;\n        this._contexts = undefined;\n    }\n}\nclass Emitter {\n    constructor(_options) {\n        this._options = _options;\n    }\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event() {\n        if (!this._event) {\n            this._event = (listener, thisArgs, disposables) => {\n                if (!this._callbacks) {\n                    this._callbacks = new CallbackList();\n                }\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\n                    this._options.onFirstListenerAdd(this);\n                }\n                this._callbacks.add(listener, thisArgs);\n                const result = {\n                    dispose: () => {\n                        if (!this._callbacks) {\n                            // disposable is disposed after emitter is disposed.\n                            return;\n                        }\n                        this._callbacks.remove(listener, thisArgs);\n                        result.dispose = Emitter._noop;\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\n                            this._options.onLastListenerRemove(this);\n                        }\n                    }\n                };\n                if (Array.isArray(disposables)) {\n                    disposables.push(result);\n                }\n                return result;\n            };\n        }\n        return this._event;\n    }\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event) {\n        if (this._callbacks) {\n            this._callbacks.invoke.call(this._callbacks, event);\n        }\n    }\n    dispose() {\n        if (this._callbacks) {\n            this._callbacks.dispose();\n            this._callbacks = undefined;\n        }\n    }\n}\nexports.Emitter = Emitter;\nEmitter._noop = function () { };\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringArray = exports.array = exports.func = exports.error = exports.number = exports.string = exports.boolean = void 0;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LRUCache = exports.LinkedMap = exports.Touch = void 0;\nvar Touch;\n(function (Touch) {\n    Touch.None = 0;\n    Touch.First = 1;\n    Touch.AsOld = Touch.First;\n    Touch.Last = 2;\n    Touch.AsNew = Touch.Last;\n})(Touch || (exports.Touch = Touch = {}));\nclass LinkedMap {\n    constructor() {\n        this[_a] = 'LinkedMap';\n        this._map = new Map();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state = 0;\n    }\n    clear() {\n        this._map.clear();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state++;\n    }\n    isEmpty() {\n        return !this._head && !this._tail;\n    }\n    get size() {\n        return this._size;\n    }\n    get first() {\n        return this._head?.value;\n    }\n    get last() {\n        return this._tail?.value;\n    }\n    has(key) {\n        return this._map.has(key);\n    }\n    get(key, touch = Touch.None) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        if (touch !== Touch.None) {\n            this.touch(item, touch);\n        }\n        return item.value;\n    }\n    set(key, value, touch = Touch.None) {\n        let item = this._map.get(key);\n        if (item) {\n            item.value = value;\n            if (touch !== Touch.None) {\n                this.touch(item, touch);\n            }\n        }\n        else {\n            item = { key, value, next: undefined, previous: undefined };\n            switch (touch) {\n                case Touch.None:\n                    this.addItemLast(item);\n                    break;\n                case Touch.First:\n                    this.addItemFirst(item);\n                    break;\n                case Touch.Last:\n                    this.addItemLast(item);\n                    break;\n                default:\n                    this.addItemLast(item);\n                    break;\n            }\n            this._map.set(key, item);\n            this._size++;\n        }\n        return this;\n    }\n    delete(key) {\n        return !!this.remove(key);\n    }\n    remove(key) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        this._map.delete(key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    shift() {\n        if (!this._head && !this._tail) {\n            return undefined;\n        }\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        const item = this._head;\n        this._map.delete(item.key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    forEach(callbackfn, thisArg) {\n        const state = this._state;\n        let current = this._head;\n        while (current) {\n            if (thisArg) {\n                callbackfn.bind(thisArg)(current.value, current.key, this);\n            }\n            else {\n                callbackfn(current.value, current.key, this);\n            }\n            if (this._state !== state) {\n                throw new Error(`LinkedMap got modified during iteration.`);\n            }\n            current = current.next;\n        }\n    }\n    keys() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.key, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    values() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.value, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    entries() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: [current.key, current.value], done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    [(_a = Symbol.toStringTag, Symbol.iterator)]() {\n        return this.entries();\n    }\n    trimOld(newSize) {\n        if (newSize >= this.size) {\n            return;\n        }\n        if (newSize === 0) {\n            this.clear();\n            return;\n        }\n        let current = this._head;\n        let currentSize = this.size;\n        while (current && currentSize > newSize) {\n            this._map.delete(current.key);\n            current = current.next;\n            currentSize--;\n        }\n        this._head = current;\n        this._size = currentSize;\n        if (current) {\n            current.previous = undefined;\n        }\n        this._state++;\n    }\n    addItemFirst(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._tail = item;\n        }\n        else if (!this._head) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.next = this._head;\n            this._head.previous = item;\n        }\n        this._head = item;\n        this._state++;\n    }\n    addItemLast(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._head = item;\n        }\n        else if (!this._tail) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.previous = this._tail;\n            this._tail.next = item;\n        }\n        this._tail = item;\n        this._state++;\n    }\n    removeItem(item) {\n        if (item === this._head && item === this._tail) {\n            this._head = undefined;\n            this._tail = undefined;\n        }\n        else if (item === this._head) {\n            // This can only happened if size === 1 which is handle\n            // by the case above.\n            if (!item.next) {\n                throw new Error('Invalid list');\n            }\n            item.next.previous = undefined;\n            this._head = item.next;\n        }\n        else if (item === this._tail) {\n            // This can only happened if size === 1 which is handle\n            // by the case above.\n            if (!item.previous) {\n                throw new Error('Invalid list');\n            }\n            item.previous.next = undefined;\n            this._tail = item.previous;\n        }\n        else {\n            const next = item.next;\n            const previous = item.previous;\n            if (!next || !previous) {\n                throw new Error('Invalid list');\n            }\n            next.previous = previous;\n            previous.next = next;\n        }\n        item.next = undefined;\n        item.previous = undefined;\n        this._state++;\n    }\n    touch(item, touch) {\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\n            return;\n        }\n        if (touch === Touch.First) {\n            if (item === this._head) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item\n            if (item === this._tail) {\n                // previous must be defined since item was not head but is tail\n                // So there are more than on item in the map\n                previous.next = undefined;\n                this._tail = previous;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            // Insert the node at head\n            item.previous = undefined;\n            item.next = this._head;\n            this._head.previous = item;\n            this._head = item;\n            this._state++;\n        }\n        else if (touch === Touch.Last) {\n            if (item === this._tail) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item.\n            if (item === this._head) {\n                // next must be defined since item was not tail but is head\n                // So there are more than on item in the map\n                next.previous = undefined;\n                this._head = next;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            item.next = undefined;\n            item.previous = this._tail;\n            this._tail.next = item;\n            this._tail = item;\n            this._state++;\n        }\n    }\n    toJSON() {\n        const data = [];\n        this.forEach((value, key) => {\n            data.push([key, value]);\n        });\n        return data;\n    }\n    fromJSON(data) {\n        this.clear();\n        for (const [key, value] of data) {\n            this.set(key, value);\n        }\n    }\n}\nexports.LinkedMap = LinkedMap;\nclass LRUCache extends LinkedMap {\n    constructor(limit, ratio = 1) {\n        super();\n        this._limit = limit;\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n    }\n    get limit() {\n        return this._limit;\n    }\n    set limit(limit) {\n        this._limit = limit;\n        this.checkTrim();\n    }\n    get ratio() {\n        return this._ratio;\n    }\n    set ratio(ratio) {\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n        this.checkTrim();\n    }\n    get(key, touch = Touch.AsNew) {\n        return super.get(key, touch);\n    }\n    peek(key) {\n        return super.get(key, Touch.None);\n    }\n    set(key, value) {\n        super.set(key, value, Touch.Last);\n        this.checkTrim();\n        return this;\n    }\n    checkTrim() {\n        if (this.size > this._limit) {\n            this.trimOld(Math.round(this._limit * this._ratio));\n        }\n    }\n}\nexports.LRUCache = LRUCache;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AbstractMessageBuffer = void 0;\nconst CR = 13;\nconst LF = 10;\nconst CRLF = '\\r\\n';\nclass AbstractMessageBuffer {\n    constructor(encoding = 'utf-8') {\n        this._encoding = encoding;\n        this._chunks = [];\n        this._totalLength = 0;\n    }\n    get encoding() {\n        return this._encoding;\n    }\n    append(chunk) {\n        const toAppend = typeof chunk === 'string' ? this.fromString(chunk, this._encoding) : chunk;\n        this._chunks.push(toAppend);\n        this._totalLength += toAppend.byteLength;\n    }\n    tryReadHeaders(lowerCaseKeys = false) {\n        if (this._chunks.length === 0) {\n            return undefined;\n        }\n        let state = 0;\n        let chunkIndex = 0;\n        let offset = 0;\n        let chunkBytesRead = 0;\n        row: while (chunkIndex < this._chunks.length) {\n            const chunk = this._chunks[chunkIndex];\n            offset = 0;\n            column: while (offset < chunk.length) {\n                const value = chunk[offset];\n                switch (value) {\n                    case CR:\n                        switch (state) {\n                            case 0:\n                                state = 1;\n                                break;\n                            case 2:\n                                state = 3;\n                                break;\n                            default:\n                                state = 0;\n                        }\n                        break;\n                    case LF:\n                        switch (state) {\n                            case 1:\n                                state = 2;\n                                break;\n                            case 3:\n                                state = 4;\n                                offset++;\n                                break row;\n                            default:\n                                state = 0;\n                        }\n                        break;\n                    default:\n                        state = 0;\n                }\n                offset++;\n            }\n            chunkBytesRead += chunk.byteLength;\n            chunkIndex++;\n        }\n        if (state !== 4) {\n            return undefined;\n        }\n        // The buffer contains the two CRLF at the end. So we will\n        // have two empty lines after the split at the end as well.\n        const buffer = this._read(chunkBytesRead + offset);\n        const result = new Map();\n        const headers = this.toString(buffer, 'ascii').split(CRLF);\n        if (headers.length < 2) {\n            return result;\n        }\n        for (let i = 0; i < headers.length - 2; i++) {\n            const header = headers[i];\n            const index = header.indexOf(':');\n            if (index === -1) {\n                throw new Error(`Message header must separate key and value using ':'\\n${header}`);\n            }\n            const key = header.substr(0, index);\n            const value = header.substr(index + 1).trim();\n            result.set(lowerCaseKeys ? key.toLowerCase() : key, value);\n        }\n        return result;\n    }\n    tryReadBody(length) {\n        if (this._totalLength < length) {\n            return undefined;\n        }\n        return this._read(length);\n    }\n    get numberOfBytes() {\n        return this._totalLength;\n    }\n    _read(byteCount) {\n        if (byteCount === 0) {\n            return this.emptyBuffer();\n        }\n        if (byteCount > this._totalLength) {\n            throw new Error(`Cannot read so many bytes!`);\n        }\n        if (this._chunks[0].byteLength === byteCount) {\n            // super fast path, precisely first chunk must be returned\n            const chunk = this._chunks[0];\n            this._chunks.shift();\n            this._totalLength -= byteCount;\n            return this.asNative(chunk);\n        }\n        if (this._chunks[0].byteLength > byteCount) {\n            // fast path, the reading is entirely within the first chunk\n            const chunk = this._chunks[0];\n            const result = this.asNative(chunk, byteCount);\n            this._chunks[0] = chunk.slice(byteCount);\n            this._totalLength -= byteCount;\n            return result;\n        }\n        const result = this.allocNative(byteCount);\n        let resultOffset = 0;\n        let chunkIndex = 0;\n        while (byteCount > 0) {\n            const chunk = this._chunks[chunkIndex];\n            if (chunk.byteLength > byteCount) {\n                // this chunk will survive\n                const chunkPart = chunk.slice(0, byteCount);\n                result.set(chunkPart, resultOffset);\n                resultOffset += byteCount;\n                this._chunks[chunkIndex] = chunk.slice(byteCount);\n                this._totalLength -= byteCount;\n                byteCount -= byteCount;\n            }\n            else {\n                // this chunk will be entirely read\n                result.set(chunk, resultOffset);\n                resultOffset += chunk.byteLength;\n                this._chunks.shift();\n                this._totalLength -= chunk.byteLength;\n                byteCount -= chunk.byteLength;\n            }\n        }\n        return result;\n    }\n}\nexports.AbstractMessageBuffer = AbstractMessageBuffer;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReadableStreamMessageReader = exports.AbstractMessageReader = exports.MessageReader = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nconst semaphore_1 = require(\"./semaphore\");\nvar MessageReader;\n(function (MessageReader) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\n    }\n    MessageReader.is = is;\n})(MessageReader || (exports.MessageReader = MessageReader = {}));\nclass AbstractMessageReader {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n        this.partialMessageEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error) {\n        this.errorEmitter.fire(this.asError(error));\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    get onPartialMessage() {\n        return this.partialMessageEmitter.event;\n    }\n    firePartialMessage(info) {\n        this.partialMessageEmitter.fire(info);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageReader = AbstractMessageReader;\nvar ResolvedMessageReaderOptions;\n(function (ResolvedMessageReaderOptions) {\n    function fromOptions(options) {\n        let charset;\n        let result;\n        let contentDecoder;\n        const contentDecoders = new Map();\n        let contentTypeDecoder;\n        const contentTypeDecoders = new Map();\n        if (options === undefined || typeof options === 'string') {\n            charset = options ?? 'utf-8';\n        }\n        else {\n            charset = options.charset ?? 'utf-8';\n            if (options.contentDecoder !== undefined) {\n                contentDecoder = options.contentDecoder;\n                contentDecoders.set(contentDecoder.name, contentDecoder);\n            }\n            if (options.contentDecoders !== undefined) {\n                for (const decoder of options.contentDecoders) {\n                    contentDecoders.set(decoder.name, decoder);\n                }\n            }\n            if (options.contentTypeDecoder !== undefined) {\n                contentTypeDecoder = options.contentTypeDecoder;\n                contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n            }\n            if (options.contentTypeDecoders !== undefined) {\n                for (const decoder of options.contentTypeDecoders) {\n                    contentTypeDecoders.set(decoder.name, decoder);\n                }\n            }\n        }\n        if (contentTypeDecoder === undefined) {\n            contentTypeDecoder = (0, ral_1.default)().applicationJson.decoder;\n            contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n        }\n        return { charset, contentDecoder, contentDecoders, contentTypeDecoder, contentTypeDecoders };\n    }\n    ResolvedMessageReaderOptions.fromOptions = fromOptions;\n})(ResolvedMessageReaderOptions || (ResolvedMessageReaderOptions = {}));\nclass ReadableStreamMessageReader extends AbstractMessageReader {\n    constructor(readable, options) {\n        super();\n        this.readable = readable;\n        this.options = ResolvedMessageReaderOptions.fromOptions(options);\n        this.buffer = (0, ral_1.default)().messageBuffer.create(this.options.charset);\n        this._partialMessageTimeout = 10000;\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.readSemaphore = new semaphore_1.Semaphore(1);\n    }\n    set partialMessageTimeout(timeout) {\n        this._partialMessageTimeout = timeout;\n    }\n    get partialMessageTimeout() {\n        return this._partialMessageTimeout;\n    }\n    listen(callback) {\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.partialMessageTimer = undefined;\n        this.callback = callback;\n        const result = this.readable.onData((data) => {\n            this.onData(data);\n        });\n        this.readable.onError((error) => this.fireError(error));\n        this.readable.onClose(() => this.fireClose());\n        return result;\n    }\n    onData(data) {\n        try {\n            this.buffer.append(data);\n            while (true) {\n                if (this.nextMessageLength === -1) {\n                    const headers = this.buffer.tryReadHeaders(true);\n                    if (!headers) {\n                        return;\n                    }\n                    const contentLength = headers.get('content-length');\n                    if (!contentLength) {\n                        this.fireError(new Error(`Header must provide a Content-Length property.\\n${JSON.stringify(Object.fromEntries(headers))}`));\n                        return;\n                    }\n                    const length = parseInt(contentLength);\n                    if (isNaN(length)) {\n                        this.fireError(new Error(`Content-Length value must be a number. Got ${contentLength}`));\n                        return;\n                    }\n                    this.nextMessageLength = length;\n                }\n                const body = this.buffer.tryReadBody(this.nextMessageLength);\n                if (body === undefined) {\n                    /** We haven't received the full message yet. */\n                    this.setPartialMessageTimer();\n                    return;\n                }\n                this.clearPartialMessageTimer();\n                this.nextMessageLength = -1;\n                // Make sure that we convert one received message after the\n                // other. Otherwise it could happen that a decoding of a second\n                // smaller message finished before the decoding of a first larger\n                // message and then we would deliver the second message first.\n                this.readSemaphore.lock(async () => {\n                    const bytes = this.options.contentDecoder !== undefined\n                        ? await this.options.contentDecoder.decode(body)\n                        : body;\n                    const message = await this.options.contentTypeDecoder.decode(bytes, this.options);\n                    this.callback(message);\n                }).catch((error) => {\n                    this.fireError(error);\n                });\n            }\n        }\n        catch (error) {\n            this.fireError(error);\n        }\n    }\n    clearPartialMessageTimer() {\n        if (this.partialMessageTimer) {\n            this.partialMessageTimer.dispose();\n            this.partialMessageTimer = undefined;\n        }\n    }\n    setPartialMessageTimer() {\n        this.clearPartialMessageTimer();\n        if (this._partialMessageTimeout <= 0) {\n            return;\n        }\n        this.partialMessageTimer = (0, ral_1.default)().timer.setTimeout((token, timeout) => {\n            this.partialMessageTimer = undefined;\n            if (token === this.messageToken) {\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\n                this.setPartialMessageTimer();\n            }\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\n    }\n}\nexports.ReadableStreamMessageReader = ReadableStreamMessageReader;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WriteableStreamMessageWriter = exports.AbstractMessageWriter = exports.MessageWriter = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst semaphore_1 = require(\"./semaphore\");\nconst events_1 = require(\"./events\");\nconst ContentLength = 'Content-Length: ';\nconst CRLF = '\\r\\n';\nvar MessageWriter;\n(function (MessageWriter) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\n            Is.func(candidate.onError) && Is.func(candidate.write);\n    }\n    MessageWriter.is = is;\n})(MessageWriter || (exports.MessageWriter = MessageWriter = {}));\nclass AbstractMessageWriter {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error, message, count) {\n        this.errorEmitter.fire([this.asError(error), message, count]);\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageWriter = AbstractMessageWriter;\nvar ResolvedMessageWriterOptions;\n(function (ResolvedMessageWriterOptions) {\n    function fromOptions(options) {\n        if (options === undefined || typeof options === 'string') {\n            return { charset: options ?? 'utf-8', contentTypeEncoder: (0, ral_1.default)().applicationJson.encoder };\n        }\n        else {\n            return { charset: options.charset ?? 'utf-8', contentEncoder: options.contentEncoder, contentTypeEncoder: options.contentTypeEncoder ?? (0, ral_1.default)().applicationJson.encoder };\n        }\n    }\n    ResolvedMessageWriterOptions.fromOptions = fromOptions;\n})(ResolvedMessageWriterOptions || (ResolvedMessageWriterOptions = {}));\nclass WriteableStreamMessageWriter extends AbstractMessageWriter {\n    constructor(writable, options) {\n        super();\n        this.writable = writable;\n        this.options = ResolvedMessageWriterOptions.fromOptions(options);\n        this.errorCount = 0;\n        this.writeSemaphore = new semaphore_1.Semaphore(1);\n        this.writable.onError((error) => this.fireError(error));\n        this.writable.onClose(() => this.fireClose());\n    }\n    async write(msg) {\n        return this.writeSemaphore.lock(async () => {\n            const payload = this.options.contentTypeEncoder.encode(msg, this.options).then((buffer) => {\n                if (this.options.contentEncoder !== undefined) {\n                    return this.options.contentEncoder.encode(buffer);\n                }\n                else {\n                    return buffer;\n                }\n            });\n            return payload.then((buffer) => {\n                const headers = [];\n                headers.push(ContentLength, buffer.byteLength.toString(), CRLF);\n                headers.push(CRLF);\n                return this.doWrite(msg, headers, buffer);\n            }, (error) => {\n                this.fireError(error);\n                throw error;\n            });\n        });\n    }\n    async doWrite(msg, headers, data) {\n        try {\n            await this.writable.write(headers.join(''), 'ascii');\n            return this.writable.write(data);\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n        this.writable.end();\n    }\n}\nexports.WriteableStreamMessageWriter = WriteableStreamMessageWriter;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Message = exports.NotificationType9 = exports.NotificationType8 = exports.NotificationType7 = exports.NotificationType6 = exports.NotificationType5 = exports.NotificationType4 = exports.NotificationType3 = exports.NotificationType2 = exports.NotificationType1 = exports.NotificationType0 = exports.NotificationType = exports.RequestType9 = exports.RequestType8 = exports.RequestType7 = exports.RequestType6 = exports.RequestType5 = exports.RequestType4 = exports.RequestType3 = exports.RequestType2 = exports.RequestType1 = exports.RequestType = exports.RequestType0 = exports.AbstractMessageSignature = exports.ParameterStructures = exports.ResponseError = exports.ErrorCodes = void 0;\nconst is = require(\"./is\");\n/**\n * Predefined error codes.\n */\nvar ErrorCodes;\n(function (ErrorCodes) {\n    // Defined by JSON RPC\n    ErrorCodes.ParseError = -32700;\n    ErrorCodes.InvalidRequest = -32600;\n    ErrorCodes.MethodNotFound = -32601;\n    ErrorCodes.InvalidParams = -32602;\n    ErrorCodes.InternalError = -32603;\n    /**\n     * This is the start range of JSON RPC reserved error codes.\n     * It doesn't denote a real error code. No application error codes should\n     * be defined between the start and end range. For backwards\n     * compatibility the `ServerNotInitialized` and the `UnknownErrorCode`\n     * are left in the range.\n     *\n     * @since 3.16.0\n    */\n    ErrorCodes.jsonrpcReservedErrorRangeStart = -32099;\n    /** @deprecated use  jsonrpcReservedErrorRangeStart */\n    ErrorCodes.serverErrorStart = -32099;\n    /**\n     * An error occurred when write a message to the transport layer.\n     */\n    ErrorCodes.MessageWriteError = -32099;\n    /**\n     * An error occurred when reading a message from the transport layer.\n     */\n    ErrorCodes.MessageReadError = -32098;\n    /**\n     * The connection got disposed or lost and all pending responses got\n     * rejected.\n     */\n    ErrorCodes.PendingResponseRejected = -32097;\n    /**\n     * The connection is inactive and a use of it failed.\n     */\n    ErrorCodes.ConnectionInactive = -32096;\n    /**\n     * Error code indicating that a server received a notification or\n     * request before the server has received the `initialize` request.\n     */\n    ErrorCodes.ServerNotInitialized = -32002;\n    ErrorCodes.UnknownErrorCode = -32001;\n    /**\n     * This is the end range of JSON RPC reserved error codes.\n     * It doesn't denote a real error code.\n     *\n     * @since 3.16.0\n    */\n    ErrorCodes.jsonrpcReservedErrorRangeEnd = -32000;\n    /** @deprecated use  jsonrpcReservedErrorRangeEnd */\n    ErrorCodes.serverErrorEnd = -32000;\n})(ErrorCodes || (exports.ErrorCodes = ErrorCodes = {}));\n/**\n * An error object return in a response in case a request\n * has failed.\n */\nclass ResponseError extends Error {\n    constructor(code, message, data) {\n        super(message);\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\n        this.data = data;\n        Object.setPrototypeOf(this, ResponseError.prototype);\n    }\n    toJson() {\n        const result = {\n            code: this.code,\n            message: this.message\n        };\n        if (this.data !== undefined) {\n            result.data = this.data;\n        }\n        return result;\n    }\n}\nexports.ResponseError = ResponseError;\nclass ParameterStructures {\n    constructor(kind) {\n        this.kind = kind;\n    }\n    static is(value) {\n        return value === ParameterStructures.auto || value === ParameterStructures.byName || value === ParameterStructures.byPosition;\n    }\n    toString() {\n        return this.kind;\n    }\n}\nexports.ParameterStructures = ParameterStructures;\n/**\n * The parameter structure is automatically inferred on the number of parameters\n * and the parameter type in case of a single param.\n */\nParameterStructures.auto = new ParameterStructures('auto');\n/**\n * Forces `byPosition` parameter structure. This is useful if you have a single\n * parameter which has a literal type.\n */\nParameterStructures.byPosition = new ParameterStructures('byPosition');\n/**\n * Forces `byName` parameter structure. This is only useful when having a single\n * parameter. The library will report errors if used with a different number of\n * parameters.\n */\nParameterStructures.byName = new ParameterStructures('byName');\n/**\n * An abstract implementation of a MessageType.\n */\nclass AbstractMessageSignature {\n    constructor(method, numberOfParams) {\n        this.method = method;\n        this.numberOfParams = numberOfParams;\n    }\n    get parameterStructures() {\n        return ParameterStructures.auto;\n    }\n}\nexports.AbstractMessageSignature = AbstractMessageSignature;\n/**\n * Classes to type request response pairs\n */\nclass RequestType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.RequestType0 = RequestType0;\nclass RequestType extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType = RequestType;\nclass RequestType1 extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType1 = RequestType1;\nclass RequestType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.RequestType2 = RequestType2;\nclass RequestType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.RequestType3 = RequestType3;\nclass RequestType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.RequestType4 = RequestType4;\nclass RequestType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.RequestType5 = RequestType5;\nclass RequestType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.RequestType6 = RequestType6;\nclass RequestType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.RequestType7 = RequestType7;\nclass RequestType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.RequestType8 = RequestType8;\nclass RequestType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.RequestType9 = RequestType9;\nclass NotificationType extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType = NotificationType;\nclass NotificationType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.NotificationType0 = NotificationType0;\nclass NotificationType1 extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType1 = NotificationType1;\nclass NotificationType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.NotificationType2 = NotificationType2;\nclass NotificationType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.NotificationType3 = NotificationType3;\nclass NotificationType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.NotificationType4 = NotificationType4;\nclass NotificationType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.NotificationType5 = NotificationType5;\nclass NotificationType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.NotificationType6 = NotificationType6;\nclass NotificationType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.NotificationType7 = NotificationType7;\nclass NotificationType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.NotificationType8 = NotificationType8;\nclass NotificationType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.NotificationType9 = NotificationType9;\nvar Message;\n(function (Message) {\n    /**\n     * Tests if the given message is a request message\n     */\n    function isRequest(message) {\n        const candidate = message;\n        return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\n    }\n    Message.isRequest = isRequest;\n    /**\n     * Tests if the given message is a notification message\n     */\n    function isNotification(message) {\n        const candidate = message;\n        return candidate && is.string(candidate.method) && message.id === void 0;\n    }\n    Message.isNotification = isNotification;\n    /**\n     * Tests if the given message is a response message\n     */\n    function isResponse(message) {\n        const candidate = message;\n        return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\n    }\n    Message.isResponse = isResponse;\n})(Message || (exports.Message = Message = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nlet _ral;\nfunction RAL() {\n    if (_ral === undefined) {\n        throw new Error(`No runtime abstraction layer installed`);\n    }\n    return _ral;\n}\n(function (RAL) {\n    function install(ral) {\n        if (ral === undefined) {\n            throw new Error(`No runtime abstraction layer provided`);\n        }\n        _ral = ral;\n    }\n    RAL.install = install;\n})(RAL || (RAL = {}));\nexports.default = RAL;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Semaphore = void 0;\nconst ral_1 = require(\"./ral\");\nclass Semaphore {\n    constructor(capacity = 1) {\n        if (capacity <= 0) {\n            throw new Error('Capacity must be greater than 0');\n        }\n        this._capacity = capacity;\n        this._active = 0;\n        this._waiting = [];\n    }\n    lock(thunk) {\n        return new Promise((resolve, reject) => {\n            this._waiting.push({ thunk, resolve, reject });\n            this.runNext();\n        });\n    }\n    get active() {\n        return this._active;\n    }\n    runNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        (0, ral_1.default)().timer.setImmediate(() => this.doRunNext());\n    }\n    doRunNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        const next = this._waiting.shift();\n        this._active++;\n        if (this._active > this._capacity) {\n            throw new Error(`To many thunks active`);\n        }\n        try {\n            const result = next.thunk();\n            if (result instanceof Promise) {\n                result.then((value) => {\n                    this._active--;\n                    next.resolve(value);\n                    this.runNext();\n                }, (err) => {\n                    this._active--;\n                    next.reject(err);\n                    this.runNext();\n                });\n            }\n            else {\n                this._active--;\n                next.resolve(result);\n                this.runNext();\n            }\n        }\n        catch (err) {\n            this._active--;\n            next.reject(err);\n            this.runNext();\n        }\n    }\n}\nexports.Semaphore = Semaphore;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SharedArrayReceiverStrategy = exports.SharedArraySenderStrategy = void 0;\nconst cancellation_1 = require(\"./cancellation\");\nvar CancellationState;\n(function (CancellationState) {\n    CancellationState.Continue = 0;\n    CancellationState.Cancelled = 1;\n})(CancellationState || (CancellationState = {}));\nclass SharedArraySenderStrategy {\n    constructor() {\n        this.buffers = new Map();\n    }\n    enableCancellation(request) {\n        if (request.id === null) {\n            return;\n        }\n        const buffer = new SharedArrayBuffer(4);\n        const data = new Int32Array(buffer, 0, 1);\n        data[0] = CancellationState.Continue;\n        this.buffers.set(request.id, buffer);\n        request.$cancellationData = buffer;\n    }\n    async sendCancellation(_conn, id) {\n        const buffer = this.buffers.get(id);\n        if (buffer === undefined) {\n            return;\n        }\n        const data = new Int32Array(buffer, 0, 1);\n        Atomics.store(data, 0, CancellationState.Cancelled);\n    }\n    cleanup(id) {\n        this.buffers.delete(id);\n    }\n    dispose() {\n        this.buffers.clear();\n    }\n}\nexports.SharedArraySenderStrategy = SharedArraySenderStrategy;\nclass SharedArrayBufferCancellationToken {\n    constructor(buffer) {\n        this.data = new Int32Array(buffer, 0, 1);\n    }\n    get isCancellationRequested() {\n        return Atomics.load(this.data, 0) === CancellationState.Cancelled;\n    }\n    get onCancellationRequested() {\n        throw new Error(`Cancellation over SharedArrayBuffer doesn't support cancellation events`);\n    }\n}\nclass SharedArrayBufferCancellationTokenSource {\n    constructor(buffer) {\n        this.token = new SharedArrayBufferCancellationToken(buffer);\n    }\n    cancel() {\n    }\n    dispose() {\n    }\n}\nclass SharedArrayReceiverStrategy {\n    constructor() {\n        this.kind = 'request';\n    }\n    createCancellationTokenSource(request) {\n        const buffer = request.$cancellationData;\n        if (buffer === undefined) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n        return new SharedArrayBufferCancellationTokenSource(buffer);\n    }\n}\nexports.SharedArrayReceiverStrategy = SharedArrayReceiverStrategy;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createMessageConnection = exports.createServerSocketTransport = exports.createClientSocketTransport = exports.createServerPipeTransport = exports.createClientPipeTransport = exports.generateRandomPipeName = exports.StreamMessageWriter = exports.StreamMessageReader = exports.SocketMessageWriter = exports.SocketMessageReader = exports.PortMessageWriter = exports.PortMessageReader = exports.IPCMessageWriter = exports.IPCMessageReader = void 0;\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\nconst ril_1 = require(\"./ril\");\n// Install the node runtime abstract.\nril_1.default.install();\nconst path = require(\"path\");\nconst os = require(\"os\");\nconst crypto_1 = require(\"crypto\");\nconst net_1 = require(\"net\");\nconst api_1 = require(\"../common/api\");\n__exportStar(require(\"../common/api\"), exports);\nclass IPCMessageReader extends api_1.AbstractMessageReader {\n    constructor(process) {\n        super();\n        this.process = process;\n        let eventEmitter = this.process;\n        eventEmitter.on('error', (error) => this.fireError(error));\n        eventEmitter.on('close', () => this.fireClose());\n    }\n    listen(callback) {\n        this.process.on('message', callback);\n        return api_1.Disposable.create(() => this.process.off('message', callback));\n    }\n}\nexports.IPCMessageReader = IPCMessageReader;\nclass IPCMessageWriter extends api_1.AbstractMessageWriter {\n    constructor(process) {\n        super();\n        this.process = process;\n        this.errorCount = 0;\n        const eventEmitter = this.process;\n        eventEmitter.on('error', (error) => this.fireError(error));\n        eventEmitter.on('close', () => this.fireClose);\n    }\n    write(msg) {\n        try {\n            if (typeof this.process.send === 'function') {\n                this.process.send(msg, undefined, undefined, (error) => {\n                    if (error) {\n                        this.errorCount++;\n                        this.handleError(error, msg);\n                    }\n                    else {\n                        this.errorCount = 0;\n                    }\n                });\n            }\n            return Promise.resolve();\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n    }\n}\nexports.IPCMessageWriter = IPCMessageWriter;\nclass PortMessageReader extends api_1.AbstractMessageReader {\n    constructor(port) {\n        super();\n        this.onData = new api_1.Emitter;\n        port.on('close', () => this.fireClose);\n        port.on('error', (error) => this.fireError(error));\n        port.on('message', (message) => {\n            this.onData.fire(message);\n        });\n    }\n    listen(callback) {\n        return this.onData.event(callback);\n    }\n}\nexports.PortMessageReader = PortMessageReader;\nclass PortMessageWriter extends api_1.AbstractMessageWriter {\n    constructor(port) {\n        super();\n        this.port = port;\n        this.errorCount = 0;\n        port.on('close', () => this.fireClose());\n        port.on('error', (error) => this.fireError(error));\n    }\n    write(msg) {\n        try {\n            this.port.postMessage(msg);\n            return Promise.resolve();\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n    }\n}\nexports.PortMessageWriter = PortMessageWriter;\nclass SocketMessageReader extends api_1.ReadableStreamMessageReader {\n    constructor(socket, encoding = 'utf-8') {\n        super((0, ril_1.default)().stream.asReadableStream(socket), encoding);\n    }\n}\nexports.SocketMessageReader = SocketMessageReader;\nclass SocketMessageWriter extends api_1.WriteableStreamMessageWriter {\n    constructor(socket, options) {\n        super((0, ril_1.default)().stream.asWritableStream(socket), options);\n        this.socket = socket;\n    }\n    dispose() {\n        super.dispose();\n        this.socket.destroy();\n    }\n}\nexports.SocketMessageWriter = SocketMessageWriter;\nclass StreamMessageReader extends api_1.ReadableStreamMessageReader {\n    constructor(readable, encoding) {\n        super((0, ril_1.default)().stream.asReadableStream(readable), encoding);\n    }\n}\nexports.StreamMessageReader = StreamMessageReader;\nclass StreamMessageWriter extends api_1.WriteableStreamMessageWriter {\n    constructor(writable, options) {\n        super((0, ril_1.default)().stream.asWritableStream(writable), options);\n    }\n}\nexports.StreamMessageWriter = StreamMessageWriter;\nconst XDG_RUNTIME_DIR = process.env['XDG_RUNTIME_DIR'];\nconst safeIpcPathLengths = new Map([\n    ['linux', 107],\n    ['darwin', 103]\n]);\nfunction generateRandomPipeName() {\n    const randomSuffix = (0, crypto_1.randomBytes)(21).toString('hex');\n    if (process.platform === 'win32') {\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\n    }\n    let result;\n    if (XDG_RUNTIME_DIR) {\n        result = path.join(XDG_RUNTIME_DIR, `vscode-ipc-${randomSuffix}.sock`);\n    }\n    else {\n        result = path.join(os.tmpdir(), `vscode-${randomSuffix}.sock`);\n    }\n    const limit = safeIpcPathLengths.get(process.platform);\n    if (limit !== undefined && result.length > limit) {\n        (0, ril_1.default)().console.warn(`WARNING: IPC handle \"${result}\" is longer than ${limit} characters.`);\n    }\n    return result;\n}\nexports.generateRandomPipeName = generateRandomPipeName;\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\n    let connectResolve;\n    const connected = new Promise((resolve, _reject) => {\n        connectResolve = resolve;\n    });\n    return new Promise((resolve, reject) => {\n        let server = (0, net_1.createServer)((socket) => {\n            server.close();\n            connectResolve([\n                new SocketMessageReader(socket, encoding),\n                new SocketMessageWriter(socket, encoding)\n            ]);\n        });\n        server.on('error', reject);\n        server.listen(pipeName, () => {\n            server.removeListener('error', reject);\n            resolve({\n                onConnected: () => { return connected; }\n            });\n        });\n    });\n}\nexports.createClientPipeTransport = createClientPipeTransport;\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\n    const socket = (0, net_1.createConnection)(pipeName);\n    return [\n        new SocketMessageReader(socket, encoding),\n        new SocketMessageWriter(socket, encoding)\n    ];\n}\nexports.createServerPipeTransport = createServerPipeTransport;\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\n    let connectResolve;\n    const connected = new Promise((resolve, _reject) => {\n        connectResolve = resolve;\n    });\n    return new Promise((resolve, reject) => {\n        const server = (0, net_1.createServer)((socket) => {\n            server.close();\n            connectResolve([\n                new SocketMessageReader(socket, encoding),\n                new SocketMessageWriter(socket, encoding)\n            ]);\n        });\n        server.on('error', reject);\n        server.listen(port, '127.0.0.1', () => {\n            server.removeListener('error', reject);\n            resolve({\n                onConnected: () => { return connected; }\n            });\n        });\n    });\n}\nexports.createClientSocketTransport = createClientSocketTransport;\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\n    const socket = (0, net_1.createConnection)(port, '127.0.0.1');\n    return [\n        new SocketMessageReader(socket, encoding),\n        new SocketMessageWriter(socket, encoding)\n    ];\n}\nexports.createServerSocketTransport = createServerSocketTransport;\nfunction isReadableStream(value) {\n    const candidate = value;\n    return candidate.read !== undefined && candidate.addListener !== undefined;\n}\nfunction isWritableStream(value) {\n    const candidate = value;\n    return candidate.write !== undefined && candidate.addListener !== undefined;\n}\nfunction createMessageConnection(input, output, logger, options) {\n    if (!logger) {\n        logger = api_1.NullLogger;\n    }\n    const reader = isReadableStream(input) ? new StreamMessageReader(input) : input;\n    const writer = isWritableStream(output) ? new StreamMessageWriter(output) : output;\n    if (api_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return (0, api_1.createMessageConnection)(reader, writer, logger, options);\n}\nexports.createMessageConnection = createMessageConnection;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"util\");\nconst api_1 = require(\"../common/api\");\nclass MessageBuffer extends api_1.AbstractMessageBuffer {\n    constructor(encoding = 'utf-8') {\n        super(encoding);\n    }\n    emptyBuffer() {\n        return MessageBuffer.emptyBuffer;\n    }\n    fromString(value, encoding) {\n        return Buffer.from(value, encoding);\n    }\n    toString(value, encoding) {\n        if (value instanceof Buffer) {\n            return value.toString(encoding);\n        }\n        else {\n            return new util_1.TextDecoder(encoding).decode(value);\n        }\n    }\n    asNative(buffer, length) {\n        if (length === undefined) {\n            return buffer instanceof Buffer ? buffer : Buffer.from(buffer);\n        }\n        else {\n            return buffer instanceof Buffer ? buffer.slice(0, length) : Buffer.from(buffer, 0, length);\n        }\n    }\n    allocNative(length) {\n        return Buffer.allocUnsafe(length);\n    }\n}\nMessageBuffer.emptyBuffer = Buffer.allocUnsafe(0);\nclass ReadableStreamWrapper {\n    constructor(stream) {\n        this.stream = stream;\n    }\n    onClose(listener) {\n        this.stream.on('close', listener);\n        return api_1.Disposable.create(() => this.stream.off('close', listener));\n    }\n    onError(listener) {\n        this.stream.on('error', listener);\n        return api_1.Disposable.create(() => this.stream.off('error', listener));\n    }\n    onEnd(listener) {\n        this.stream.on('end', listener);\n        return api_1.Disposable.create(() => this.stream.off('end', listener));\n    }\n    onData(listener) {\n        this.stream.on('data', listener);\n        return api_1.Disposable.create(() => this.stream.off('data', listener));\n    }\n}\nclass WritableStreamWrapper {\n    constructor(stream) {\n        this.stream = stream;\n    }\n    onClose(listener) {\n        this.stream.on('close', listener);\n        return api_1.Disposable.create(() => this.stream.off('close', listener));\n    }\n    onError(listener) {\n        this.stream.on('error', listener);\n        return api_1.Disposable.create(() => this.stream.off('error', listener));\n    }\n    onEnd(listener) {\n        this.stream.on('end', listener);\n        return api_1.Disposable.create(() => this.stream.off('end', listener));\n    }\n    write(data, encoding) {\n        return new Promise((resolve, reject) => {\n            const callback = (error) => {\n                if (error === undefined || error === null) {\n                    resolve();\n                }\n                else {\n                    reject(error);\n                }\n            };\n            if (typeof data === 'string') {\n                this.stream.write(data, encoding, callback);\n            }\n            else {\n                this.stream.write(data, callback);\n            }\n        });\n    }\n    end() {\n        this.stream.end();\n    }\n}\nconst _ril = Object.freeze({\n    messageBuffer: Object.freeze({\n        create: (encoding) => new MessageBuffer(encoding)\n    }),\n    applicationJson: Object.freeze({\n        encoder: Object.freeze({\n            name: 'application/json',\n            encode: (msg, options) => {\n                try {\n                    return Promise.resolve(Buffer.from(JSON.stringify(msg, undefined, 0), options.charset));\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            }\n        }),\n        decoder: Object.freeze({\n            name: 'application/json',\n            decode: (buffer, options) => {\n                try {\n                    if (buffer instanceof Buffer) {\n                        return Promise.resolve(JSON.parse(buffer.toString(options.charset)));\n                    }\n                    else {\n                        return Promise.resolve(JSON.parse(new util_1.TextDecoder(options.charset).decode(buffer)));\n                    }\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            }\n        })\n    }),\n    stream: Object.freeze({\n        asReadableStream: (stream) => new ReadableStreamWrapper(stream),\n        asWritableStream: (stream) => new WritableStreamWrapper(stream)\n    }),\n    console: console,\n    timer: Object.freeze({\n        setTimeout(callback, ms, ...args) {\n            const handle = setTimeout(callback, ms, ...args);\n            return { dispose: () => clearTimeout(handle) };\n        },\n        setImmediate(callback, ...args) {\n            const handle = setImmediate(callback, ...args);\n            return { dispose: () => clearImmediate(handle) };\n        },\n        setInterval(callback, ms, ...args) {\n            const handle = setInterval(callback, ms, ...args);\n            return { dispose: () => clearInterval(handle) };\n        }\n    })\n});\nfunction RIL() {\n    return _ril;\n}\n(function (RIL) {\n    function install() {\n        api_1.RAL.install(_ril);\n    }\n    RIL.install = install;\n})(RIL || (RIL = {}));\nexports.default = RIL;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/node/main');","'use strict';\n\n// Expose modern transport directly as the export\nmodule.exports = require('./modern');\n\n// Expose legacy stream\nmodule.exports.LegacyTransportStream = require('./legacy');\n","'use strict';\n\nconst util = require('util');\nconst { LEVEL } = require('triple-beam');\nconst TransportStream = require('./modern');\n\n/**\n * Constructor function for the LegacyTransportStream. This is an internal\n * wrapper `winston >= 3` uses to wrap older transports implementing\n * log(level, message, meta).\n * @param {Object} options - Options for this TransportStream instance.\n * @param {Transpot} options.transport - winston@2 or older Transport to wrap.\n */\n\nconst LegacyTransportStream = module.exports = function LegacyTransportStream(options = {}) {\n  TransportStream.call(this, options);\n  if (!options.transport || typeof options.transport.log !== 'function') {\n    throw new Error('Invalid transport, must be an object with a log method.');\n  }\n\n  this.transport = options.transport;\n  this.level = this.level || options.transport.level;\n  this.handleExceptions = this.handleExceptions || options.transport.handleExceptions;\n\n  // Display our deprecation notice.\n  this._deprecated();\n\n  // Properly bubble up errors from the transport to the\n  // LegacyTransportStream instance, but only once no matter how many times\n  // this transport is shared.\n  function transportError(err) {\n    this.emit('error', err, this.transport);\n  }\n\n  if (!this.transport.__winstonError) {\n    this.transport.__winstonError = transportError.bind(this);\n    this.transport.on('error', this.transport.__winstonError);\n  }\n};\n\n/*\n * Inherit from TransportStream using Node.js built-ins\n */\nutil.inherits(LegacyTransportStream, TransportStream);\n\n/**\n * Writes the info object to our transport instance.\n * @param {mixed} info - TODO: add param description.\n * @param {mixed} enc - TODO: add param description.\n * @param {function} callback - TODO: add param description.\n * @returns {undefined}\n * @private\n */\nLegacyTransportStream.prototype._write = function _write(info, enc, callback) {\n  if (this.silent || (info.exception === true && !this.handleExceptions)) {\n    return callback(null);\n  }\n\n  // Remark: This has to be handled in the base transport now because we\n  // cannot conditionally write to our pipe targets as stream.\n  if (!this.level || this.levels[this.level] >= this.levels[info[LEVEL]]) {\n    this.transport.log(info[LEVEL], info.message, info, this._nop);\n  }\n\n  callback(null);\n};\n\n/**\n * Writes the batch of info objects (i.e. \"object chunks\") to our transport\n * instance after performing any necessary filtering.\n * @param {mixed} chunks - TODO: add params description.\n * @param {function} callback - TODO: add params description.\n * @returns {mixed} - TODO: add returns description.\n * @private\n */\nLegacyTransportStream.prototype._writev = function _writev(chunks, callback) {\n  for (let i = 0; i < chunks.length; i++) {\n    if (this._accept(chunks[i])) {\n      this.transport.log(\n        chunks[i].chunk[LEVEL],\n        chunks[i].chunk.message,\n        chunks[i].chunk,\n        this._nop\n      );\n      chunks[i].callback();\n    }\n  }\n\n  return callback(null);\n};\n\n/**\n * Displays a deprecation notice. Defined as a function so it can be\n * overriden in tests.\n * @returns {undefined}\n */\nLegacyTransportStream.prototype._deprecated = function _deprecated() {\n  // eslint-disable-next-line no-console\n  console.error([\n    `${this.transport.name} is a legacy winston transport. Consider upgrading: `,\n    '- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md'\n  ].join('\\n'));\n};\n\n/**\n * Clean up error handling state on the legacy transport associated\n * with this instance.\n * @returns {undefined}\n */\nLegacyTransportStream.prototype.close = function close() {\n  if (this.transport.close) {\n    this.transport.close();\n  }\n\n  if (this.transport.__winstonError) {\n    this.transport.removeListener('error', this.transport.__winstonError);\n    this.transport.__winstonError = null;\n  }\n};\n","'use strict';\n\nconst util = require('util');\nconst Writable = require('readable-stream/lib/_stream_writable.js');\nconst { LEVEL } = require('triple-beam');\n\n/**\n * Constructor function for the TransportStream. This is the base prototype\n * that all `winston >= 3` transports should inherit from.\n * @param {Object} options - Options for this TransportStream instance\n * @param {String} options.level - Highest level according to RFC5424.\n * @param {Boolean} options.handleExceptions - If true, info with\n * { exception: true } will be written.\n * @param {Function} options.log - Custom log function for simple Transport\n * creation\n * @param {Function} options.close - Called on \"unpipe\" from parent.\n */\nconst TransportStream = module.exports = function TransportStream(options = {}) {\n  Writable.call(this, { objectMode: true, highWaterMark: options.highWaterMark });\n\n  this.format = options.format;\n  this.level = options.level;\n  this.handleExceptions = options.handleExceptions;\n  this.handleRejections = options.handleRejections;\n  this.silent = options.silent;\n\n  if (options.log) this.log = options.log;\n  if (options.logv) this.logv = options.logv;\n  if (options.close) this.close = options.close;\n\n  // Get the levels from the source we are piped from.\n  this.once('pipe', logger => {\n    // Remark (indexzero): this bookkeeping can only support multiple\n    // Logger parents with the same `levels`. This comes into play in\n    // the `winston.Container` code in which `container.add` takes\n    // a fully realized set of options with pre-constructed TransportStreams.\n    this.levels = logger.levels;\n    this.parent = logger;\n  });\n\n  // If and/or when the transport is removed from this instance\n  this.once('unpipe', src => {\n    // Remark (indexzero): this bookkeeping can only support multiple\n    // Logger parents with the same `levels`. This comes into play in\n    // the `winston.Container` code in which `container.add` takes\n    // a fully realized set of options with pre-constructed TransportStreams.\n    if (src === this.parent) {\n      this.parent = null;\n      if (this.close) {\n        this.close();\n      }\n    }\n  });\n};\n\n/*\n * Inherit from Writeable using Node.js built-ins\n */\nutil.inherits(TransportStream, Writable);\n\n/**\n * Writes the info object to our transport instance.\n * @param {mixed} info - TODO: add param description.\n * @param {mixed} enc - TODO: add param description.\n * @param {function} callback - TODO: add param description.\n * @returns {undefined}\n * @private\n */\nTransportStream.prototype._write = function _write(info, enc, callback) {\n  if (this.silent || (info.exception === true && !this.handleExceptions)) {\n    return callback(null);\n  }\n\n  // Remark: This has to be handled in the base transport now because we\n  // cannot conditionally write to our pipe targets as stream. We always\n  // prefer any explicit level set on the Transport itself falling back to\n  // any level set on the parent.\n  const level = this.level || (this.parent && this.parent.level);\n\n  if (!level || this.levels[level] >= this.levels[info[LEVEL]]) {\n    if (info && !this.format) {\n      return this.log(info, callback);\n    }\n\n    let errState;\n    let transformed;\n\n    // We trap(and re-throw) any errors generated by the user-provided format, but also\n    // guarantee that the streams callback is invoked so that we can continue flowing.\n    try {\n      transformed = this.format.transform(Object.assign({}, info), this.format.options);\n    } catch (err) {\n      errState = err;\n    }\n\n    if (errState || !transformed) {\n      // eslint-disable-next-line callback-return\n      callback();\n      if (errState) throw errState;\n      return;\n    }\n\n    return this.log(transformed, callback);\n  }\n  this._writableState.sync = false;\n  return callback(null);\n};\n\n/**\n * Writes the batch of info objects (i.e. \"object chunks\") to our transport\n * instance after performing any necessary filtering.\n * @param {mixed} chunks - TODO: add params description.\n * @param {function} callback - TODO: add params description.\n * @returns {mixed} - TODO: add returns description.\n * @private\n */\nTransportStream.prototype._writev = function _writev(chunks, callback) {\n  if (this.logv) {\n    const infos = chunks.filter(this._accept, this);\n    if (!infos.length) {\n      return callback(null);\n    }\n\n    // Remark (indexzero): from a performance perspective if Transport\n    // implementers do choose to implement logv should we make it their\n    // responsibility to invoke their format?\n    return this.logv(infos, callback);\n  }\n\n  for (let i = 0; i < chunks.length; i++) {\n    if (!this._accept(chunks[i])) continue;\n\n    if (chunks[i].chunk && !this.format) {\n      this.log(chunks[i].chunk, chunks[i].callback);\n      continue;\n    }\n\n    let errState;\n    let transformed;\n\n    // We trap(and re-throw) any errors generated by the user-provided format, but also\n    // guarantee that the streams callback is invoked so that we can continue flowing.\n    try {\n      transformed = this.format.transform(\n        Object.assign({}, chunks[i].chunk),\n        this.format.options\n      );\n    } catch (err) {\n      errState = err;\n    }\n\n    if (errState || !transformed) {\n      // eslint-disable-next-line callback-return\n      chunks[i].callback();\n      if (errState) {\n        // eslint-disable-next-line callback-return\n        callback(null);\n        throw errState;\n      }\n    } else {\n      this.log(transformed, chunks[i].callback);\n    }\n  }\n\n  return callback(null);\n};\n\n/**\n * Predicate function that returns true if the specfied `info` on the\n * WriteReq, `write`, should be passed down into the derived\n * TransportStream's I/O via `.log(info, callback)`.\n * @param {WriteReq} write - winston@3 Node.js WriteReq for the `info` object\n * representing the log message.\n * @returns {Boolean} - Value indicating if the `write` should be accepted &\n * logged.\n */\nTransportStream.prototype._accept = function _accept(write) {\n  const info = write.chunk;\n  if (this.silent) {\n    return false;\n  }\n\n  // We always prefer any explicit level set on the Transport itself\n  // falling back to any level set on the parent.\n  const level = this.level || (this.parent && this.parent.level);\n\n  // Immediately check the average case: log level filtering.\n  if (\n    info.exception === true ||\n    !level ||\n    this.levels[level] >= this.levels[info[LEVEL]]\n  ) {\n    // Ensure the info object is valid based on `{ exception }`:\n    // 1. { handleExceptions: true }: all `info` objects are valid\n    // 2. { exception: false }: accepted by all transports.\n    if (this.handleExceptions || info.exception !== true) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\n/**\n * _nop is short for \"No operation\"\n * @returns {Boolean} Intentionally false.\n */\nTransportStream.prototype._nop = function _nop() {\n  // eslint-disable-next-line no-undefined\n  return void undefined;\n};\n","'use strict'\n\n// Keep this file as an alias for the full stream module.\nmodule.exports = require('./stream').Writable\n","'use strict'\n\nconst { SymbolDispose } = require('../../ours/primordials')\nconst { AbortError, codes } = require('../../ours/errors')\nconst { isNodeStream, isWebStream, kControllerErrorFunction } = require('./utils')\nconst eos = require('./end-of-stream')\nconst { ERR_INVALID_ARG_TYPE } = codes\nlet addAbortListener\n\n// This method is inlined here for readable-stream\n// It also does not allow for signal to not exist on the stream\n// https://github.com/nodejs/node/pull/36061#discussion_r533718029\nconst validateAbortSignal = (signal, name) => {\n  if (typeof signal !== 'object' || !('aborted' in signal)) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'AbortSignal', signal)\n  }\n}\nmodule.exports.addAbortSignal = function addAbortSignal(signal, stream) {\n  validateAbortSignal(signal, 'signal')\n  if (!isNodeStream(stream) && !isWebStream(stream)) {\n    throw new ERR_INVALID_ARG_TYPE('stream', ['ReadableStream', 'WritableStream', 'Stream'], stream)\n  }\n  return module.exports.addAbortSignalNoValidate(signal, stream)\n}\nmodule.exports.addAbortSignalNoValidate = function (signal, stream) {\n  if (typeof signal !== 'object' || !('aborted' in signal)) {\n    return stream\n  }\n  const onAbort = isNodeStream(stream)\n    ? () => {\n        stream.destroy(\n          new AbortError(undefined, {\n            cause: signal.reason\n          })\n        )\n      }\n    : () => {\n        stream[kControllerErrorFunction](\n          new AbortError(undefined, {\n            cause: signal.reason\n          })\n        )\n      }\n  if (signal.aborted) {\n    onAbort()\n  } else {\n    addAbortListener = addAbortListener || require('../../ours/util').addAbortListener\n    const disposable = addAbortListener(signal, onAbort)\n    eos(stream, disposable[SymbolDispose])\n  }\n  return stream\n}\n","'use strict'\n\nconst { StringPrototypeSlice, SymbolIterator, TypedArrayPrototypeSet, Uint8Array } = require('../../ours/primordials')\nconst { Buffer } = require('buffer')\nconst { inspect } = require('../../ours/util')\nmodule.exports = class BufferList {\n  constructor() {\n    this.head = null\n    this.tail = null\n    this.length = 0\n  }\n  push(v) {\n    const entry = {\n      data: v,\n      next: null\n    }\n    if (this.length > 0) this.tail.next = entry\n    else this.head = entry\n    this.tail = entry\n    ++this.length\n  }\n  unshift(v) {\n    const entry = {\n      data: v,\n      next: this.head\n    }\n    if (this.length === 0) this.tail = entry\n    this.head = entry\n    ++this.length\n  }\n  shift() {\n    if (this.length === 0) return\n    const ret = this.head.data\n    if (this.length === 1) this.head = this.tail = null\n    else this.head = this.head.next\n    --this.length\n    return ret\n  }\n  clear() {\n    this.head = this.tail = null\n    this.length = 0\n  }\n  join(s) {\n    if (this.length === 0) return ''\n    let p = this.head\n    let ret = '' + p.data\n    while ((p = p.next) !== null) ret += s + p.data\n    return ret\n  }\n  concat(n) {\n    if (this.length === 0) return Buffer.alloc(0)\n    const ret = Buffer.allocUnsafe(n >>> 0)\n    let p = this.head\n    let i = 0\n    while (p) {\n      TypedArrayPrototypeSet(ret, p.data, i)\n      i += p.data.length\n      p = p.next\n    }\n    return ret\n  }\n\n  // Consumes a specified amount of bytes or characters from the buffered data.\n  consume(n, hasStrings) {\n    const data = this.head.data\n    if (n < data.length) {\n      // `slice` is the same for buffers and strings.\n      const slice = data.slice(0, n)\n      this.head.data = data.slice(n)\n      return slice\n    }\n    if (n === data.length) {\n      // First chunk is a perfect match.\n      return this.shift()\n    }\n    // Result spans more than one buffer.\n    return hasStrings ? this._getString(n) : this._getBuffer(n)\n  }\n  first() {\n    return this.head.data\n  }\n  *[SymbolIterator]() {\n    for (let p = this.head; p; p = p.next) {\n      yield p.data\n    }\n  }\n\n  // Consumes a specified amount of characters from the buffered data.\n  _getString(n) {\n    let ret = ''\n    let p = this.head\n    let c = 0\n    do {\n      const str = p.data\n      if (n > str.length) {\n        ret += str\n        n -= str.length\n      } else {\n        if (n === str.length) {\n          ret += str\n          ++c\n          if (p.next) this.head = p.next\n          else this.head = this.tail = null\n        } else {\n          ret += StringPrototypeSlice(str, 0, n)\n          this.head = p\n          p.data = StringPrototypeSlice(str, n)\n        }\n        break\n      }\n      ++c\n    } while ((p = p.next) !== null)\n    this.length -= c\n    return ret\n  }\n\n  // Consumes a specified amount of bytes from the buffered data.\n  _getBuffer(n) {\n    const ret = Buffer.allocUnsafe(n)\n    const retLen = n\n    let p = this.head\n    let c = 0\n    do {\n      const buf = p.data\n      if (n > buf.length) {\n        TypedArrayPrototypeSet(ret, buf, retLen - n)\n        n -= buf.length\n      } else {\n        if (n === buf.length) {\n          TypedArrayPrototypeSet(ret, buf, retLen - n)\n          ++c\n          if (p.next) this.head = p.next\n          else this.head = this.tail = null\n        } else {\n          TypedArrayPrototypeSet(ret, new Uint8Array(buf.buffer, buf.byteOffset, n), retLen - n)\n          this.head = p\n          p.data = buf.slice(n)\n        }\n        break\n      }\n      ++c\n    } while ((p = p.next) !== null)\n    this.length -= c\n    return ret\n  }\n\n  // Make sure the linked list only shows the minimal necessary information.\n  [Symbol.for('nodejs.util.inspect.custom')](_, options) {\n    return inspect(this, {\n      ...options,\n      // Only inspect one level.\n      depth: 0,\n      // It should not recurse.\n      customInspect: false\n    })\n  }\n}\n","'use strict'\n\nconst { pipeline } = require('./pipeline')\nconst Duplex = require('./duplex')\nconst { destroyer } = require('./destroy')\nconst {\n  isNodeStream,\n  isReadable,\n  isWritable,\n  isWebStream,\n  isTransformStream,\n  isWritableStream,\n  isReadableStream\n} = require('./utils')\nconst {\n  AbortError,\n  codes: { ERR_INVALID_ARG_VALUE, ERR_MISSING_ARGS }\n} = require('../../ours/errors')\nconst eos = require('./end-of-stream')\nmodule.exports = function compose(...streams) {\n  if (streams.length === 0) {\n    throw new ERR_MISSING_ARGS('streams')\n  }\n  if (streams.length === 1) {\n    return Duplex.from(streams[0])\n  }\n  const orgStreams = [...streams]\n  if (typeof streams[0] === 'function') {\n    streams[0] = Duplex.from(streams[0])\n  }\n  if (typeof streams[streams.length - 1] === 'function') {\n    const idx = streams.length - 1\n    streams[idx] = Duplex.from(streams[idx])\n  }\n  for (let n = 0; n < streams.length; ++n) {\n    if (!isNodeStream(streams[n]) && !isWebStream(streams[n])) {\n      // TODO(ronag): Add checks for non streams.\n      continue\n    }\n    if (\n      n < streams.length - 1 &&\n      !(isReadable(streams[n]) || isReadableStream(streams[n]) || isTransformStream(streams[n]))\n    ) {\n      throw new ERR_INVALID_ARG_VALUE(`streams[${n}]`, orgStreams[n], 'must be readable')\n    }\n    if (n > 0 && !(isWritable(streams[n]) || isWritableStream(streams[n]) || isTransformStream(streams[n]))) {\n      throw new ERR_INVALID_ARG_VALUE(`streams[${n}]`, orgStreams[n], 'must be writable')\n    }\n  }\n  let ondrain\n  let onfinish\n  let onreadable\n  let onclose\n  let d\n  function onfinished(err) {\n    const cb = onclose\n    onclose = null\n    if (cb) {\n      cb(err)\n    } else if (err) {\n      d.destroy(err)\n    } else if (!readable && !writable) {\n      d.destroy()\n    }\n  }\n  const head = streams[0]\n  const tail = pipeline(streams, onfinished)\n  const writable = !!(isWritable(head) || isWritableStream(head) || isTransformStream(head))\n  const readable = !!(isReadable(tail) || isReadableStream(tail) || isTransformStream(tail))\n\n  // TODO(ronag): Avoid double buffering.\n  // Implement Writable/Readable/Duplex traits.\n  // See, https://github.com/nodejs/node/pull/33515.\n  d = new Duplex({\n    // TODO (ronag): highWaterMark?\n    writableObjectMode: !!(head !== null && head !== undefined && head.writableObjectMode),\n    readableObjectMode: !!(tail !== null && tail !== undefined && tail.readableObjectMode),\n    writable,\n    readable\n  })\n  if (writable) {\n    if (isNodeStream(head)) {\n      d._write = function (chunk, encoding, callback) {\n        if (head.write(chunk, encoding)) {\n          callback()\n        } else {\n          ondrain = callback\n        }\n      }\n      d._final = function (callback) {\n        head.end()\n        onfinish = callback\n      }\n      head.on('drain', function () {\n        if (ondrain) {\n          const cb = ondrain\n          ondrain = null\n          cb()\n        }\n      })\n    } else if (isWebStream(head)) {\n      const writable = isTransformStream(head) ? head.writable : head\n      const writer = writable.getWriter()\n      d._write = async function (chunk, encoding, callback) {\n        try {\n          await writer.ready\n          writer.write(chunk).catch(() => {})\n          callback()\n        } catch (err) {\n          callback(err)\n        }\n      }\n      d._final = async function (callback) {\n        try {\n          await writer.ready\n          writer.close().catch(() => {})\n          onfinish = callback\n        } catch (err) {\n          callback(err)\n        }\n      }\n    }\n    const toRead = isTransformStream(tail) ? tail.readable : tail\n    eos(toRead, () => {\n      if (onfinish) {\n        const cb = onfinish\n        onfinish = null\n        cb()\n      }\n    })\n  }\n  if (readable) {\n    if (isNodeStream(tail)) {\n      tail.on('readable', function () {\n        if (onreadable) {\n          const cb = onreadable\n          onreadable = null\n          cb()\n        }\n      })\n      tail.on('end', function () {\n        d.push(null)\n      })\n      d._read = function () {\n        while (true) {\n          const buf = tail.read()\n          if (buf === null) {\n            onreadable = d._read\n            return\n          }\n          if (!d.push(buf)) {\n            return\n          }\n        }\n      }\n    } else if (isWebStream(tail)) {\n      const readable = isTransformStream(tail) ? tail.readable : tail\n      const reader = readable.getReader()\n      d._read = async function () {\n        while (true) {\n          try {\n            const { value, done } = await reader.read()\n            if (!d.push(value)) {\n              return\n            }\n            if (done) {\n              d.push(null)\n              return\n            }\n          } catch {\n            return\n          }\n        }\n      }\n    }\n  }\n  d._destroy = function (err, callback) {\n    if (!err && onclose !== null) {\n      err = new AbortError()\n    }\n    onreadable = null\n    ondrain = null\n    onfinish = null\n    if (onclose === null) {\n      callback(err)\n    } else {\n      onclose = callback\n      if (isNodeStream(tail)) {\n        destroyer(tail, err)\n      }\n    }\n  }\n  return d\n}\n","'use strict'\n\n/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n\nconst {\n  aggregateTwoErrors,\n  codes: { ERR_MULTIPLE_CALLBACK },\n  AbortError\n} = require('../../ours/errors')\nconst { Symbol } = require('../../ours/primordials')\nconst { kIsDestroyed, isDestroyed, isFinished, isServerRequest } = require('./utils')\nconst kDestroy = Symbol('kDestroy')\nconst kConstruct = Symbol('kConstruct')\nfunction checkError(err, w, r) {\n  if (err) {\n    // Avoid V8 leak, https://github.com/nodejs/node/pull/34103#issuecomment-652002364\n    err.stack // eslint-disable-line no-unused-expressions\n\n    if (w && !w.errored) {\n      w.errored = err\n    }\n    if (r && !r.errored) {\n      r.errored = err\n    }\n  }\n}\n\n// Backwards compat. cb() is undocumented and unused in core but\n// unfortunately might be used by modules.\nfunction destroy(err, cb) {\n  const r = this._readableState\n  const w = this._writableState\n  // With duplex streams we use the writable side for state.\n  const s = w || r\n  if ((w !== null && w !== undefined && w.destroyed) || (r !== null && r !== undefined && r.destroyed)) {\n    if (typeof cb === 'function') {\n      cb()\n    }\n    return this\n  }\n\n  // We set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n  checkError(err, w, r)\n  if (w) {\n    w.destroyed = true\n  }\n  if (r) {\n    r.destroyed = true\n  }\n\n  // If still constructing then defer calling _destroy.\n  if (!s.constructed) {\n    this.once(kDestroy, function (er) {\n      _destroy(this, aggregateTwoErrors(er, err), cb)\n    })\n  } else {\n    _destroy(this, err, cb)\n  }\n  return this\n}\nfunction _destroy(self, err, cb) {\n  let called = false\n  function onDestroy(err) {\n    if (called) {\n      return\n    }\n    called = true\n    const r = self._readableState\n    const w = self._writableState\n    checkError(err, w, r)\n    if (w) {\n      w.closed = true\n    }\n    if (r) {\n      r.closed = true\n    }\n    if (typeof cb === 'function') {\n      cb(err)\n    }\n    if (err) {\n      process.nextTick(emitErrorCloseNT, self, err)\n    } else {\n      process.nextTick(emitCloseNT, self)\n    }\n  }\n  try {\n    self._destroy(err || null, onDestroy)\n  } catch (err) {\n    onDestroy(err)\n  }\n}\nfunction emitErrorCloseNT(self, err) {\n  emitErrorNT(self, err)\n  emitCloseNT(self)\n}\nfunction emitCloseNT(self) {\n  const r = self._readableState\n  const w = self._writableState\n  if (w) {\n    w.closeEmitted = true\n  }\n  if (r) {\n    r.closeEmitted = true\n  }\n  if ((w !== null && w !== undefined && w.emitClose) || (r !== null && r !== undefined && r.emitClose)) {\n    self.emit('close')\n  }\n}\nfunction emitErrorNT(self, err) {\n  const r = self._readableState\n  const w = self._writableState\n  if ((w !== null && w !== undefined && w.errorEmitted) || (r !== null && r !== undefined && r.errorEmitted)) {\n    return\n  }\n  if (w) {\n    w.errorEmitted = true\n  }\n  if (r) {\n    r.errorEmitted = true\n  }\n  self.emit('error', err)\n}\nfunction undestroy() {\n  const r = this._readableState\n  const w = this._writableState\n  if (r) {\n    r.constructed = true\n    r.closed = false\n    r.closeEmitted = false\n    r.destroyed = false\n    r.errored = null\n    r.errorEmitted = false\n    r.reading = false\n    r.ended = r.readable === false\n    r.endEmitted = r.readable === false\n  }\n  if (w) {\n    w.constructed = true\n    w.destroyed = false\n    w.closed = false\n    w.closeEmitted = false\n    w.errored = null\n    w.errorEmitted = false\n    w.finalCalled = false\n    w.prefinished = false\n    w.ended = w.writable === false\n    w.ending = w.writable === false\n    w.finished = w.writable === false\n  }\n}\nfunction errorOrDestroy(stream, err, sync) {\n  // We have tests that rely on errors being emitted\n  // in the same tick, so changing this is semver major.\n  // For now when you opt-in to autoDestroy we allow\n  // the error to be emitted nextTick. In a future\n  // semver major update we should change the default to this.\n\n  const r = stream._readableState\n  const w = stream._writableState\n  if ((w !== null && w !== undefined && w.destroyed) || (r !== null && r !== undefined && r.destroyed)) {\n    return this\n  }\n  if ((r !== null && r !== undefined && r.autoDestroy) || (w !== null && w !== undefined && w.autoDestroy))\n    stream.destroy(err)\n  else if (err) {\n    // Avoid V8 leak, https://github.com/nodejs/node/pull/34103#issuecomment-652002364\n    err.stack // eslint-disable-line no-unused-expressions\n\n    if (w && !w.errored) {\n      w.errored = err\n    }\n    if (r && !r.errored) {\n      r.errored = err\n    }\n    if (sync) {\n      process.nextTick(emitErrorNT, stream, err)\n    } else {\n      emitErrorNT(stream, err)\n    }\n  }\n}\nfunction construct(stream, cb) {\n  if (typeof stream._construct !== 'function') {\n    return\n  }\n  const r = stream._readableState\n  const w = stream._writableState\n  if (r) {\n    r.constructed = false\n  }\n  if (w) {\n    w.constructed = false\n  }\n  stream.once(kConstruct, cb)\n  if (stream.listenerCount(kConstruct) > 1) {\n    // Duplex\n    return\n  }\n  process.nextTick(constructNT, stream)\n}\nfunction constructNT(stream) {\n  let called = false\n  function onConstruct(err) {\n    if (called) {\n      errorOrDestroy(stream, err !== null && err !== undefined ? err : new ERR_MULTIPLE_CALLBACK())\n      return\n    }\n    called = true\n    const r = stream._readableState\n    const w = stream._writableState\n    const s = w || r\n    if (r) {\n      r.constructed = true\n    }\n    if (w) {\n      w.constructed = true\n    }\n    if (s.destroyed) {\n      stream.emit(kDestroy, err)\n    } else if (err) {\n      errorOrDestroy(stream, err, true)\n    } else {\n      process.nextTick(emitConstructNT, stream)\n    }\n  }\n  try {\n    stream._construct((err) => {\n      process.nextTick(onConstruct, err)\n    })\n  } catch (err) {\n    process.nextTick(onConstruct, err)\n  }\n}\nfunction emitConstructNT(stream) {\n  stream.emit(kConstruct)\n}\nfunction isRequest(stream) {\n  return (stream === null || stream === undefined ? undefined : stream.setHeader) && typeof stream.abort === 'function'\n}\nfunction emitCloseLegacy(stream) {\n  stream.emit('close')\n}\nfunction emitErrorCloseLegacy(stream, err) {\n  stream.emit('error', err)\n  process.nextTick(emitCloseLegacy, stream)\n}\n\n// Normalize destroy for legacy.\nfunction destroyer(stream, err) {\n  if (!stream || isDestroyed(stream)) {\n    return\n  }\n  if (!err && !isFinished(stream)) {\n    err = new AbortError()\n  }\n\n  // TODO: Remove isRequest branches.\n  if (isServerRequest(stream)) {\n    stream.socket = null\n    stream.destroy(err)\n  } else if (isRequest(stream)) {\n    stream.abort()\n  } else if (isRequest(stream.req)) {\n    stream.req.abort()\n  } else if (typeof stream.destroy === 'function') {\n    stream.destroy(err)\n  } else if (typeof stream.close === 'function') {\n    // TODO: Don't lose err?\n    stream.close()\n  } else if (err) {\n    process.nextTick(emitErrorCloseLegacy, stream, err)\n  } else {\n    process.nextTick(emitCloseLegacy, stream)\n  }\n  if (!stream.destroyed) {\n    stream[kIsDestroyed] = true\n  }\n}\nmodule.exports = {\n  construct,\n  destroyer,\n  destroy,\n  undestroy,\n  errorOrDestroy\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototype inheritance, this class\n// prototypically inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict'\n\nconst {\n  ObjectDefineProperties,\n  ObjectGetOwnPropertyDescriptor,\n  ObjectKeys,\n  ObjectSetPrototypeOf\n} = require('../../ours/primordials')\nmodule.exports = Duplex\nconst Readable = require('./readable')\nconst Writable = require('./writable')\nObjectSetPrototypeOf(Duplex.prototype, Readable.prototype)\nObjectSetPrototypeOf(Duplex, Readable)\n{\n  const keys = ObjectKeys(Writable.prototype)\n  // Allow the keys array to be GC'ed.\n  for (let i = 0; i < keys.length; i++) {\n    const method = keys[i]\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method]\n  }\n}\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options)\n  Readable.call(this, options)\n  Writable.call(this, options)\n  if (options) {\n    this.allowHalfOpen = options.allowHalfOpen !== false\n    if (options.readable === false) {\n      this._readableState.readable = false\n      this._readableState.ended = true\n      this._readableState.endEmitted = true\n    }\n    if (options.writable === false) {\n      this._writableState.writable = false\n      this._writableState.ending = true\n      this._writableState.ended = true\n      this._writableState.finished = true\n    }\n  } else {\n    this.allowHalfOpen = true\n  }\n}\nObjectDefineProperties(Duplex.prototype, {\n  writable: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writable')\n  },\n  writableHighWaterMark: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableHighWaterMark')\n  },\n  writableObjectMode: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableObjectMode')\n  },\n  writableBuffer: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableBuffer')\n  },\n  writableLength: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableLength')\n  },\n  writableFinished: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableFinished')\n  },\n  writableCorked: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableCorked')\n  },\n  writableEnded: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableEnded')\n  },\n  writableNeedDrain: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableNeedDrain')\n  },\n  destroyed: {\n    __proto__: null,\n    get() {\n      if (this._readableState === undefined || this._writableState === undefined) {\n        return false\n      }\n      return this._readableState.destroyed && this._writableState.destroyed\n    },\n    set(value) {\n      // Backward compatibility, the user is explicitly\n      // managing destroyed.\n      if (this._readableState && this._writableState) {\n        this._readableState.destroyed = value\n        this._writableState.destroyed = value\n      }\n    }\n  }\n})\nlet webStreamsAdapters\n\n// Lazy to avoid circular references\nfunction lazyWebStreams() {\n  if (webStreamsAdapters === undefined) webStreamsAdapters = {}\n  return webStreamsAdapters\n}\nDuplex.fromWeb = function (pair, options) {\n  return lazyWebStreams().newStreamDuplexFromReadableWritablePair(pair, options)\n}\nDuplex.toWeb = function (duplex) {\n  return lazyWebStreams().newReadableWritablePairFromDuplex(duplex)\n}\nlet duplexify\nDuplex.from = function (body) {\n  if (!duplexify) {\n    duplexify = require('./duplexify')\n  }\n  return duplexify(body, 'body')\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n\n;('use strict')\nconst bufferModule = require('buffer')\nconst {\n  isReadable,\n  isWritable,\n  isIterable,\n  isNodeStream,\n  isReadableNodeStream,\n  isWritableNodeStream,\n  isDuplexNodeStream,\n  isReadableStream,\n  isWritableStream\n} = require('./utils')\nconst eos = require('./end-of-stream')\nconst {\n  AbortError,\n  codes: { ERR_INVALID_ARG_TYPE, ERR_INVALID_RETURN_VALUE }\n} = require('../../ours/errors')\nconst { destroyer } = require('./destroy')\nconst Duplex = require('./duplex')\nconst Readable = require('./readable')\nconst Writable = require('./writable')\nconst { createDeferredPromise } = require('../../ours/util')\nconst from = require('./from')\nconst Blob = globalThis.Blob || bufferModule.Blob\nconst isBlob =\n  typeof Blob !== 'undefined'\n    ? function isBlob(b) {\n        return b instanceof Blob\n      }\n    : function isBlob(b) {\n        return false\n      }\nconst AbortController = globalThis.AbortController || require('abort-controller').AbortController\nconst { FunctionPrototypeCall } = require('../../ours/primordials')\n\n// This is needed for pre node 17.\nclass Duplexify extends Duplex {\n  constructor(options) {\n    super(options)\n\n    // https://github.com/nodejs/node/pull/34385\n\n    if ((options === null || options === undefined ? undefined : options.readable) === false) {\n      this._readableState.readable = false\n      this._readableState.ended = true\n      this._readableState.endEmitted = true\n    }\n    if ((options === null || options === undefined ? undefined : options.writable) === false) {\n      this._writableState.writable = false\n      this._writableState.ending = true\n      this._writableState.ended = true\n      this._writableState.finished = true\n    }\n  }\n}\nmodule.exports = function duplexify(body, name) {\n  if (isDuplexNodeStream(body)) {\n    return body\n  }\n  if (isReadableNodeStream(body)) {\n    return _duplexify({\n      readable: body\n    })\n  }\n  if (isWritableNodeStream(body)) {\n    return _duplexify({\n      writable: body\n    })\n  }\n  if (isNodeStream(body)) {\n    return _duplexify({\n      writable: false,\n      readable: false\n    })\n  }\n  if (isReadableStream(body)) {\n    return _duplexify({\n      readable: Readable.fromWeb(body)\n    })\n  }\n  if (isWritableStream(body)) {\n    return _duplexify({\n      writable: Writable.fromWeb(body)\n    })\n  }\n  if (typeof body === 'function') {\n    const { value, write, final, destroy } = fromAsyncGen(body)\n    if (isIterable(value)) {\n      return from(Duplexify, value, {\n        // TODO (ronag): highWaterMark?\n        objectMode: true,\n        write,\n        final,\n        destroy\n      })\n    }\n    const then = value === null || value === undefined ? undefined : value.then\n    if (typeof then === 'function') {\n      let d\n      const promise = FunctionPrototypeCall(\n        then,\n        value,\n        (val) => {\n          if (val != null) {\n            throw new ERR_INVALID_RETURN_VALUE('nully', 'body', val)\n          }\n        },\n        (err) => {\n          destroyer(d, err)\n        }\n      )\n      return (d = new Duplexify({\n        // TODO (ronag): highWaterMark?\n        objectMode: true,\n        readable: false,\n        write,\n        final(cb) {\n          final(async () => {\n            try {\n              await promise\n              process.nextTick(cb, null)\n            } catch (err) {\n              process.nextTick(cb, err)\n            }\n          })\n        },\n        destroy\n      }))\n    }\n    throw new ERR_INVALID_RETURN_VALUE('Iterable, AsyncIterable or AsyncFunction', name, value)\n  }\n  if (isBlob(body)) {\n    return duplexify(body.arrayBuffer())\n  }\n  if (isIterable(body)) {\n    return from(Duplexify, body, {\n      // TODO (ronag): highWaterMark?\n      objectMode: true,\n      writable: false\n    })\n  }\n  if (\n    isReadableStream(body === null || body === undefined ? undefined : body.readable) &&\n    isWritableStream(body === null || body === undefined ? undefined : body.writable)\n  ) {\n    return Duplexify.fromWeb(body)\n  }\n  if (\n    typeof (body === null || body === undefined ? undefined : body.writable) === 'object' ||\n    typeof (body === null || body === undefined ? undefined : body.readable) === 'object'\n  ) {\n    const readable =\n      body !== null && body !== undefined && body.readable\n        ? isReadableNodeStream(body === null || body === undefined ? undefined : body.readable)\n          ? body === null || body === undefined\n            ? undefined\n            : body.readable\n          : duplexify(body.readable)\n        : undefined\n    const writable =\n      body !== null && body !== undefined && body.writable\n        ? isWritableNodeStream(body === null || body === undefined ? undefined : body.writable)\n          ? body === null || body === undefined\n            ? undefined\n            : body.writable\n          : duplexify(body.writable)\n        : undefined\n    return _duplexify({\n      readable,\n      writable\n    })\n  }\n  const then = body === null || body === undefined ? undefined : body.then\n  if (typeof then === 'function') {\n    let d\n    FunctionPrototypeCall(\n      then,\n      body,\n      (val) => {\n        if (val != null) {\n          d.push(val)\n        }\n        d.push(null)\n      },\n      (err) => {\n        destroyer(d, err)\n      }\n    )\n    return (d = new Duplexify({\n      objectMode: true,\n      writable: false,\n      read() {}\n    }))\n  }\n  throw new ERR_INVALID_ARG_TYPE(\n    name,\n    [\n      'Blob',\n      'ReadableStream',\n      'WritableStream',\n      'Stream',\n      'Iterable',\n      'AsyncIterable',\n      'Function',\n      '{ readable, writable } pair',\n      'Promise'\n    ],\n    body\n  )\n}\nfunction fromAsyncGen(fn) {\n  let { promise, resolve } = createDeferredPromise()\n  const ac = new AbortController()\n  const signal = ac.signal\n  const value = fn(\n    (async function* () {\n      while (true) {\n        const _promise = promise\n        promise = null\n        const { chunk, done, cb } = await _promise\n        process.nextTick(cb)\n        if (done) return\n        if (signal.aborted)\n          throw new AbortError(undefined, {\n            cause: signal.reason\n          })\n        ;({ promise, resolve } = createDeferredPromise())\n        yield chunk\n      }\n    })(),\n    {\n      signal\n    }\n  )\n  return {\n    value,\n    write(chunk, encoding, cb) {\n      const _resolve = resolve\n      resolve = null\n      _resolve({\n        chunk,\n        done: false,\n        cb\n      })\n    },\n    final(cb) {\n      const _resolve = resolve\n      resolve = null\n      _resolve({\n        done: true,\n        cb\n      })\n    },\n    destroy(err, cb) {\n      ac.abort()\n      cb(err)\n    }\n  }\n}\nfunction _duplexify(pair) {\n  const r = pair.readable && typeof pair.readable.read !== 'function' ? Readable.wrap(pair.readable) : pair.readable\n  const w = pair.writable\n  let readable = !!isReadable(r)\n  let writable = !!isWritable(w)\n  let ondrain\n  let onfinish\n  let onreadable\n  let onclose\n  let d\n  function onfinished(err) {\n    const cb = onclose\n    onclose = null\n    if (cb) {\n      cb(err)\n    } else if (err) {\n      d.destroy(err)\n    }\n  }\n\n  // TODO(ronag): Avoid double buffering.\n  // Implement Writable/Readable/Duplex traits.\n  // See, https://github.com/nodejs/node/pull/33515.\n  d = new Duplexify({\n    // TODO (ronag): highWaterMark?\n    readableObjectMode: !!(r !== null && r !== undefined && r.readableObjectMode),\n    writableObjectMode: !!(w !== null && w !== undefined && w.writableObjectMode),\n    readable,\n    writable\n  })\n  if (writable) {\n    eos(w, (err) => {\n      writable = false\n      if (err) {\n        destroyer(r, err)\n      }\n      onfinished(err)\n    })\n    d._write = function (chunk, encoding, callback) {\n      if (w.write(chunk, encoding)) {\n        callback()\n      } else {\n        ondrain = callback\n      }\n    }\n    d._final = function (callback) {\n      w.end()\n      onfinish = callback\n    }\n    w.on('drain', function () {\n      if (ondrain) {\n        const cb = ondrain\n        ondrain = null\n        cb()\n      }\n    })\n    w.on('finish', function () {\n      if (onfinish) {\n        const cb = onfinish\n        onfinish = null\n        cb()\n      }\n    })\n  }\n  if (readable) {\n    eos(r, (err) => {\n      readable = false\n      if (err) {\n        destroyer(r, err)\n      }\n      onfinished(err)\n    })\n    r.on('readable', function () {\n      if (onreadable) {\n        const cb = onreadable\n        onreadable = null\n        cb()\n      }\n    })\n    r.on('end', function () {\n      d.push(null)\n    })\n    d._read = function () {\n      while (true) {\n        const buf = r.read()\n        if (buf === null) {\n          onreadable = d._read\n          return\n        }\n        if (!d.push(buf)) {\n          return\n        }\n      }\n    }\n  }\n  d._destroy = function (err, callback) {\n    if (!err && onclose !== null) {\n      err = new AbortError()\n    }\n    onreadable = null\n    ondrain = null\n    onfinish = null\n    if (onclose === null) {\n      callback(err)\n    } else {\n      onclose = callback\n      destroyer(w, err)\n      destroyer(r, err)\n    }\n  }\n  return d\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n// Ported from https://github.com/mafintosh/end-of-stream with\n// permission from the author, Mathias Buus (@mafintosh).\n\n;('use strict')\nconst { AbortError, codes } = require('../../ours/errors')\nconst { ERR_INVALID_ARG_TYPE, ERR_STREAM_PREMATURE_CLOSE } = codes\nconst { kEmptyObject, once } = require('../../ours/util')\nconst { validateAbortSignal, validateFunction, validateObject, validateBoolean } = require('../validators')\nconst { Promise, PromisePrototypeThen, SymbolDispose } = require('../../ours/primordials')\nconst {\n  isClosed,\n  isReadable,\n  isReadableNodeStream,\n  isReadableStream,\n  isReadableFinished,\n  isReadableErrored,\n  isWritable,\n  isWritableNodeStream,\n  isWritableStream,\n  isWritableFinished,\n  isWritableErrored,\n  isNodeStream,\n  willEmitClose: _willEmitClose,\n  kIsClosedPromise\n} = require('./utils')\nlet addAbortListener\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function'\n}\nconst nop = () => {}\nfunction eos(stream, options, callback) {\n  var _options$readable, _options$writable\n  if (arguments.length === 2) {\n    callback = options\n    options = kEmptyObject\n  } else if (options == null) {\n    options = kEmptyObject\n  } else {\n    validateObject(options, 'options')\n  }\n  validateFunction(callback, 'callback')\n  validateAbortSignal(options.signal, 'options.signal')\n  callback = once(callback)\n  if (isReadableStream(stream) || isWritableStream(stream)) {\n    return eosWeb(stream, options, callback)\n  }\n  if (!isNodeStream(stream)) {\n    throw new ERR_INVALID_ARG_TYPE('stream', ['ReadableStream', 'WritableStream', 'Stream'], stream)\n  }\n  const readable =\n    (_options$readable = options.readable) !== null && _options$readable !== undefined\n      ? _options$readable\n      : isReadableNodeStream(stream)\n  const writable =\n    (_options$writable = options.writable) !== null && _options$writable !== undefined\n      ? _options$writable\n      : isWritableNodeStream(stream)\n  const wState = stream._writableState\n  const rState = stream._readableState\n  const onlegacyfinish = () => {\n    if (!stream.writable) {\n      onfinish()\n    }\n  }\n\n  // TODO (ronag): Improve soft detection to include core modules and\n  // common ecosystem modules that do properly emit 'close' but fail\n  // this generic check.\n  let willEmitClose =\n    _willEmitClose(stream) && isReadableNodeStream(stream) === readable && isWritableNodeStream(stream) === writable\n  let writableFinished = isWritableFinished(stream, false)\n  const onfinish = () => {\n    writableFinished = true\n    // Stream should not be destroyed here. If it is that\n    // means that user space is doing something differently and\n    // we cannot trust willEmitClose.\n    if (stream.destroyed) {\n      willEmitClose = false\n    }\n    if (willEmitClose && (!stream.readable || readable)) {\n      return\n    }\n    if (!readable || readableFinished) {\n      callback.call(stream)\n    }\n  }\n  let readableFinished = isReadableFinished(stream, false)\n  const onend = () => {\n    readableFinished = true\n    // Stream should not be destroyed here. If it is that\n    // means that user space is doing something differently and\n    // we cannot trust willEmitClose.\n    if (stream.destroyed) {\n      willEmitClose = false\n    }\n    if (willEmitClose && (!stream.writable || writable)) {\n      return\n    }\n    if (!writable || writableFinished) {\n      callback.call(stream)\n    }\n  }\n  const onerror = (err) => {\n    callback.call(stream, err)\n  }\n  let closed = isClosed(stream)\n  const onclose = () => {\n    closed = true\n    const errored = isWritableErrored(stream) || isReadableErrored(stream)\n    if (errored && typeof errored !== 'boolean') {\n      return callback.call(stream, errored)\n    }\n    if (readable && !readableFinished && isReadableNodeStream(stream, true)) {\n      if (!isReadableFinished(stream, false)) return callback.call(stream, new ERR_STREAM_PREMATURE_CLOSE())\n    }\n    if (writable && !writableFinished) {\n      if (!isWritableFinished(stream, false)) return callback.call(stream, new ERR_STREAM_PREMATURE_CLOSE())\n    }\n    callback.call(stream)\n  }\n  const onclosed = () => {\n    closed = true\n    const errored = isWritableErrored(stream) || isReadableErrored(stream)\n    if (errored && typeof errored !== 'boolean') {\n      return callback.call(stream, errored)\n    }\n    callback.call(stream)\n  }\n  const onrequest = () => {\n    stream.req.on('finish', onfinish)\n  }\n  if (isRequest(stream)) {\n    stream.on('complete', onfinish)\n    if (!willEmitClose) {\n      stream.on('abort', onclose)\n    }\n    if (stream.req) {\n      onrequest()\n    } else {\n      stream.on('request', onrequest)\n    }\n  } else if (writable && !wState) {\n    // legacy streams\n    stream.on('end', onlegacyfinish)\n    stream.on('close', onlegacyfinish)\n  }\n\n  // Not all streams will emit 'close' after 'aborted'.\n  if (!willEmitClose && typeof stream.aborted === 'boolean') {\n    stream.on('aborted', onclose)\n  }\n  stream.on('end', onend)\n  stream.on('finish', onfinish)\n  if (options.error !== false) {\n    stream.on('error', onerror)\n  }\n  stream.on('close', onclose)\n  if (closed) {\n    process.nextTick(onclose)\n  } else if (\n    (wState !== null && wState !== undefined && wState.errorEmitted) ||\n    (rState !== null && rState !== undefined && rState.errorEmitted)\n  ) {\n    if (!willEmitClose) {\n      process.nextTick(onclosed)\n    }\n  } else if (\n    !readable &&\n    (!willEmitClose || isReadable(stream)) &&\n    (writableFinished || isWritable(stream) === false)\n  ) {\n    process.nextTick(onclosed)\n  } else if (\n    !writable &&\n    (!willEmitClose || isWritable(stream)) &&\n    (readableFinished || isReadable(stream) === false)\n  ) {\n    process.nextTick(onclosed)\n  } else if (rState && stream.req && stream.aborted) {\n    process.nextTick(onclosed)\n  }\n  const cleanup = () => {\n    callback = nop\n    stream.removeListener('aborted', onclose)\n    stream.removeListener('complete', onfinish)\n    stream.removeListener('abort', onclose)\n    stream.removeListener('request', onrequest)\n    if (stream.req) stream.req.removeListener('finish', onfinish)\n    stream.removeListener('end', onlegacyfinish)\n    stream.removeListener('close', onlegacyfinish)\n    stream.removeListener('finish', onfinish)\n    stream.removeListener('end', onend)\n    stream.removeListener('error', onerror)\n    stream.removeListener('close', onclose)\n  }\n  if (options.signal && !closed) {\n    const abort = () => {\n      // Keep it because cleanup removes it.\n      const endCallback = callback\n      cleanup()\n      endCallback.call(\n        stream,\n        new AbortError(undefined, {\n          cause: options.signal.reason\n        })\n      )\n    }\n    if (options.signal.aborted) {\n      process.nextTick(abort)\n    } else {\n      addAbortListener = addAbortListener || require('../../ours/util').addAbortListener\n      const disposable = addAbortListener(options.signal, abort)\n      const originalCallback = callback\n      callback = once((...args) => {\n        disposable[SymbolDispose]()\n        originalCallback.apply(stream, args)\n      })\n    }\n  }\n  return cleanup\n}\nfunction eosWeb(stream, options, callback) {\n  let isAborted = false\n  let abort = nop\n  if (options.signal) {\n    abort = () => {\n      isAborted = true\n      callback.call(\n        stream,\n        new AbortError(undefined, {\n          cause: options.signal.reason\n        })\n      )\n    }\n    if (options.signal.aborted) {\n      process.nextTick(abort)\n    } else {\n      addAbortListener = addAbortListener || require('../../ours/util').addAbortListener\n      const disposable = addAbortListener(options.signal, abort)\n      const originalCallback = callback\n      callback = once((...args) => {\n        disposable[SymbolDispose]()\n        originalCallback.apply(stream, args)\n      })\n    }\n  }\n  const resolverFn = (...args) => {\n    if (!isAborted) {\n      process.nextTick(() => callback.apply(stream, args))\n    }\n  }\n  PromisePrototypeThen(stream[kIsClosedPromise].promise, resolverFn, resolverFn)\n  return nop\n}\nfunction finished(stream, opts) {\n  var _opts\n  let autoCleanup = false\n  if (opts === null) {\n    opts = kEmptyObject\n  }\n  if ((_opts = opts) !== null && _opts !== undefined && _opts.cleanup) {\n    validateBoolean(opts.cleanup, 'cleanup')\n    autoCleanup = opts.cleanup\n  }\n  return new Promise((resolve, reject) => {\n    const cleanup = eos(stream, opts, (err) => {\n      if (autoCleanup) {\n        cleanup()\n      }\n      if (err) {\n        reject(err)\n      } else {\n        resolve()\n      }\n    })\n  })\n}\nmodule.exports = eos\nmodule.exports.finished = finished\n","'use strict'\n\n/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n\nconst { PromisePrototypeThen, SymbolAsyncIterator, SymbolIterator } = require('../../ours/primordials')\nconst { Buffer } = require('buffer')\nconst { ERR_INVALID_ARG_TYPE, ERR_STREAM_NULL_VALUES } = require('../../ours/errors').codes\nfunction from(Readable, iterable, opts) {\n  let iterator\n  if (typeof iterable === 'string' || iterable instanceof Buffer) {\n    return new Readable({\n      objectMode: true,\n      ...opts,\n      read() {\n        this.push(iterable)\n        this.push(null)\n      }\n    })\n  }\n  let isAsync\n  if (iterable && iterable[SymbolAsyncIterator]) {\n    isAsync = true\n    iterator = iterable[SymbolAsyncIterator]()\n  } else if (iterable && iterable[SymbolIterator]) {\n    isAsync = false\n    iterator = iterable[SymbolIterator]()\n  } else {\n    throw new ERR_INVALID_ARG_TYPE('iterable', ['Iterable'], iterable)\n  }\n  const readable = new Readable({\n    objectMode: true,\n    highWaterMark: 1,\n    // TODO(ronag): What options should be allowed?\n    ...opts\n  })\n\n  // Flag to protect against _read\n  // being called before last iteration completion.\n  let reading = false\n  readable._read = function () {\n    if (!reading) {\n      reading = true\n      next()\n    }\n  }\n  readable._destroy = function (error, cb) {\n    PromisePrototypeThen(\n      close(error),\n      () => process.nextTick(cb, error),\n      // nextTick is here in case cb throws\n      (e) => process.nextTick(cb, e || error)\n    )\n  }\n  async function close(error) {\n    const hadError = error !== undefined && error !== null\n    const hasThrow = typeof iterator.throw === 'function'\n    if (hadError && hasThrow) {\n      const { value, done } = await iterator.throw(error)\n      await value\n      if (done) {\n        return\n      }\n    }\n    if (typeof iterator.return === 'function') {\n      const { value } = await iterator.return()\n      await value\n    }\n  }\n  async function next() {\n    for (;;) {\n      try {\n        const { value, done } = isAsync ? await iterator.next() : iterator.next()\n        if (done) {\n          readable.push(null)\n        } else {\n          const res = value && typeof value.then === 'function' ? await value : value\n          if (res === null) {\n            reading = false\n            throw new ERR_STREAM_NULL_VALUES()\n          } else if (readable.push(res)) {\n            continue\n          } else {\n            reading = false\n          }\n        }\n      } catch (err) {\n        readable.destroy(err)\n      }\n      break\n    }\n  }\n  return readable\n}\nmodule.exports = from\n","'use strict'\n\nconst { ArrayIsArray, ObjectSetPrototypeOf } = require('../../ours/primordials')\nconst { EventEmitter: EE } = require('events')\nfunction Stream(opts) {\n  EE.call(this, opts)\n}\nObjectSetPrototypeOf(Stream.prototype, EE.prototype)\nObjectSetPrototypeOf(Stream, EE)\nStream.prototype.pipe = function (dest, options) {\n  const source = this\n  function ondata(chunk) {\n    if (dest.writable && dest.write(chunk) === false && source.pause) {\n      source.pause()\n    }\n  }\n  source.on('data', ondata)\n  function ondrain() {\n    if (source.readable && source.resume) {\n      source.resume()\n    }\n  }\n  dest.on('drain', ondrain)\n\n  // If the 'end' option is not supplied, dest.end() will be called when\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\n  if (!dest._isStdio && (!options || options.end !== false)) {\n    source.on('end', onend)\n    source.on('close', onclose)\n  }\n  let didOnEnd = false\n  function onend() {\n    if (didOnEnd) return\n    didOnEnd = true\n    dest.end()\n  }\n  function onclose() {\n    if (didOnEnd) return\n    didOnEnd = true\n    if (typeof dest.destroy === 'function') dest.destroy()\n  }\n\n  // Don't leave dangling pipes when there are errors.\n  function onerror(er) {\n    cleanup()\n    if (EE.listenerCount(this, 'error') === 0) {\n      this.emit('error', er)\n    }\n  }\n  prependListener(source, 'error', onerror)\n  prependListener(dest, 'error', onerror)\n\n  // Remove all the event listeners that were added.\n  function cleanup() {\n    source.removeListener('data', ondata)\n    dest.removeListener('drain', ondrain)\n    source.removeListener('end', onend)\n    source.removeListener('close', onclose)\n    source.removeListener('error', onerror)\n    dest.removeListener('error', onerror)\n    source.removeListener('end', cleanup)\n    source.removeListener('close', cleanup)\n    dest.removeListener('close', cleanup)\n  }\n  source.on('end', cleanup)\n  source.on('close', cleanup)\n  dest.on('close', cleanup)\n  dest.emit('pipe', source)\n\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\n  return dest\n}\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn)\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn)\n  else if (ArrayIsArray(emitter._events[event])) emitter._events[event].unshift(fn)\n  else emitter._events[event] = [fn, emitter._events[event]]\n}\nmodule.exports = {\n  Stream,\n  prependListener\n}\n","'use strict'\n\nconst AbortController = globalThis.AbortController || require('abort-controller').AbortController\nconst {\n  codes: { ERR_INVALID_ARG_VALUE, ERR_INVALID_ARG_TYPE, ERR_MISSING_ARGS, ERR_OUT_OF_RANGE },\n  AbortError\n} = require('../../ours/errors')\nconst { validateAbortSignal, validateInteger, validateObject } = require('../validators')\nconst kWeakHandler = require('../../ours/primordials').Symbol('kWeak')\nconst kResistStopPropagation = require('../../ours/primordials').Symbol('kResistStopPropagation')\nconst { finished } = require('./end-of-stream')\nconst staticCompose = require('./compose')\nconst { addAbortSignalNoValidate } = require('./add-abort-signal')\nconst { isWritable, isNodeStream } = require('./utils')\nconst { deprecate } = require('../../ours/util')\nconst {\n  ArrayPrototypePush,\n  Boolean,\n  MathFloor,\n  Number,\n  NumberIsNaN,\n  Promise,\n  PromiseReject,\n  PromiseResolve,\n  PromisePrototypeThen,\n  Symbol\n} = require('../../ours/primordials')\nconst kEmpty = Symbol('kEmpty')\nconst kEof = Symbol('kEof')\nfunction compose(stream, options) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  if (isNodeStream(stream) && !isWritable(stream)) {\n    throw new ERR_INVALID_ARG_VALUE('stream', stream, 'must be writable')\n  }\n  const composedStream = staticCompose(this, stream)\n  if (options !== null && options !== undefined && options.signal) {\n    // Not validating as we already validated before\n    addAbortSignalNoValidate(options.signal, composedStream)\n  }\n  return composedStream\n}\nfunction map(fn, options) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', ['Function', 'AsyncFunction'], fn)\n  }\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  let concurrency = 1\n  if ((options === null || options === undefined ? undefined : options.concurrency) != null) {\n    concurrency = MathFloor(options.concurrency)\n  }\n  let highWaterMark = concurrency - 1\n  if ((options === null || options === undefined ? undefined : options.highWaterMark) != null) {\n    highWaterMark = MathFloor(options.highWaterMark)\n  }\n  validateInteger(concurrency, 'options.concurrency', 1)\n  validateInteger(highWaterMark, 'options.highWaterMark', 0)\n  highWaterMark += concurrency\n  return async function* map() {\n    const signal = require('../../ours/util').AbortSignalAny(\n      [options === null || options === undefined ? undefined : options.signal].filter(Boolean)\n    )\n    const stream = this\n    const queue = []\n    const signalOpt = {\n      signal\n    }\n    let next\n    let resume\n    let done = false\n    let cnt = 0\n    function onCatch() {\n      done = true\n      afterItemProcessed()\n    }\n    function afterItemProcessed() {\n      cnt -= 1\n      maybeResume()\n    }\n    function maybeResume() {\n      if (resume && !done && cnt < concurrency && queue.length < highWaterMark) {\n        resume()\n        resume = null\n      }\n    }\n    async function pump() {\n      try {\n        for await (let val of stream) {\n          if (done) {\n            return\n          }\n          if (signal.aborted) {\n            throw new AbortError()\n          }\n          try {\n            val = fn(val, signalOpt)\n            if (val === kEmpty) {\n              continue\n            }\n            val = PromiseResolve(val)\n          } catch (err) {\n            val = PromiseReject(err)\n          }\n          cnt += 1\n          PromisePrototypeThen(val, afterItemProcessed, onCatch)\n          queue.push(val)\n          if (next) {\n            next()\n            next = null\n          }\n          if (!done && (queue.length >= highWaterMark || cnt >= concurrency)) {\n            await new Promise((resolve) => {\n              resume = resolve\n            })\n          }\n        }\n        queue.push(kEof)\n      } catch (err) {\n        const val = PromiseReject(err)\n        PromisePrototypeThen(val, afterItemProcessed, onCatch)\n        queue.push(val)\n      } finally {\n        done = true\n        if (next) {\n          next()\n          next = null\n        }\n      }\n    }\n    pump()\n    try {\n      while (true) {\n        while (queue.length > 0) {\n          const val = await queue[0]\n          if (val === kEof) {\n            return\n          }\n          if (signal.aborted) {\n            throw new AbortError()\n          }\n          if (val !== kEmpty) {\n            yield val\n          }\n          queue.shift()\n          maybeResume()\n        }\n        await new Promise((resolve) => {\n          next = resolve\n        })\n      }\n    } finally {\n      done = true\n      if (resume) {\n        resume()\n        resume = null\n      }\n    }\n  }.call(this)\n}\nfunction asIndexedPairs(options = undefined) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  return async function* asIndexedPairs() {\n    let index = 0\n    for await (const val of this) {\n      var _options$signal\n      if (\n        options !== null &&\n        options !== undefined &&\n        (_options$signal = options.signal) !== null &&\n        _options$signal !== undefined &&\n        _options$signal.aborted\n      ) {\n        throw new AbortError({\n          cause: options.signal.reason\n        })\n      }\n      yield [index++, val]\n    }\n  }.call(this)\n}\nasync function some(fn, options = undefined) {\n  for await (const unused of filter.call(this, fn, options)) {\n    return true\n  }\n  return false\n}\nasync function every(fn, options = undefined) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', ['Function', 'AsyncFunction'], fn)\n  }\n  // https://en.wikipedia.org/wiki/De_Morgan%27s_laws\n  return !(await some.call(\n    this,\n    async (...args) => {\n      return !(await fn(...args))\n    },\n    options\n  ))\n}\nasync function find(fn, options) {\n  for await (const result of filter.call(this, fn, options)) {\n    return result\n  }\n  return undefined\n}\nasync function forEach(fn, options) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', ['Function', 'AsyncFunction'], fn)\n  }\n  async function forEachFn(value, options) {\n    await fn(value, options)\n    return kEmpty\n  }\n  // eslint-disable-next-line no-unused-vars\n  for await (const unused of map.call(this, forEachFn, options));\n}\nfunction filter(fn, options) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', ['Function', 'AsyncFunction'], fn)\n  }\n  async function filterFn(value, options) {\n    if (await fn(value, options)) {\n      return value\n    }\n    return kEmpty\n  }\n  return map.call(this, filterFn, options)\n}\n\n// Specific to provide better error to reduce since the argument is only\n// missing if the stream has no items in it - but the code is still appropriate\nclass ReduceAwareErrMissingArgs extends ERR_MISSING_ARGS {\n  constructor() {\n    super('reduce')\n    this.message = 'Reduce of an empty stream requires an initial value'\n  }\n}\nasync function reduce(reducer, initialValue, options) {\n  var _options$signal2\n  if (typeof reducer !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('reducer', ['Function', 'AsyncFunction'], reducer)\n  }\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  let hasInitialValue = arguments.length > 1\n  if (\n    options !== null &&\n    options !== undefined &&\n    (_options$signal2 = options.signal) !== null &&\n    _options$signal2 !== undefined &&\n    _options$signal2.aborted\n  ) {\n    const err = new AbortError(undefined, {\n      cause: options.signal.reason\n    })\n    this.once('error', () => {}) // The error is already propagated\n    await finished(this.destroy(err))\n    throw err\n  }\n  const ac = new AbortController()\n  const signal = ac.signal\n  if (options !== null && options !== undefined && options.signal) {\n    const opts = {\n      once: true,\n      [kWeakHandler]: this,\n      [kResistStopPropagation]: true\n    }\n    options.signal.addEventListener('abort', () => ac.abort(), opts)\n  }\n  let gotAnyItemFromStream = false\n  try {\n    for await (const value of this) {\n      var _options$signal3\n      gotAnyItemFromStream = true\n      if (\n        options !== null &&\n        options !== undefined &&\n        (_options$signal3 = options.signal) !== null &&\n        _options$signal3 !== undefined &&\n        _options$signal3.aborted\n      ) {\n        throw new AbortError()\n      }\n      if (!hasInitialValue) {\n        initialValue = value\n        hasInitialValue = true\n      } else {\n        initialValue = await reducer(initialValue, value, {\n          signal\n        })\n      }\n    }\n    if (!gotAnyItemFromStream && !hasInitialValue) {\n      throw new ReduceAwareErrMissingArgs()\n    }\n  } finally {\n    ac.abort()\n  }\n  return initialValue\n}\nasync function toArray(options) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  const result = []\n  for await (const val of this) {\n    var _options$signal4\n    if (\n      options !== null &&\n      options !== undefined &&\n      (_options$signal4 = options.signal) !== null &&\n      _options$signal4 !== undefined &&\n      _options$signal4.aborted\n    ) {\n      throw new AbortError(undefined, {\n        cause: options.signal.reason\n      })\n    }\n    ArrayPrototypePush(result, val)\n  }\n  return result\n}\nfunction flatMap(fn, options) {\n  const values = map.call(this, fn, options)\n  return async function* flatMap() {\n    for await (const val of values) {\n      yield* val\n    }\n  }.call(this)\n}\nfunction toIntegerOrInfinity(number) {\n  // We coerce here to align with the spec\n  // https://github.com/tc39/proposal-iterator-helpers/issues/169\n  number = Number(number)\n  if (NumberIsNaN(number)) {\n    return 0\n  }\n  if (number < 0) {\n    throw new ERR_OUT_OF_RANGE('number', '>= 0', number)\n  }\n  return number\n}\nfunction drop(number, options = undefined) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  number = toIntegerOrInfinity(number)\n  return async function* drop() {\n    var _options$signal5\n    if (\n      options !== null &&\n      options !== undefined &&\n      (_options$signal5 = options.signal) !== null &&\n      _options$signal5 !== undefined &&\n      _options$signal5.aborted\n    ) {\n      throw new AbortError()\n    }\n    for await (const val of this) {\n      var _options$signal6\n      if (\n        options !== null &&\n        options !== undefined &&\n        (_options$signal6 = options.signal) !== null &&\n        _options$signal6 !== undefined &&\n        _options$signal6.aborted\n      ) {\n        throw new AbortError()\n      }\n      if (number-- <= 0) {\n        yield val\n      }\n    }\n  }.call(this)\n}\nfunction take(number, options = undefined) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  number = toIntegerOrInfinity(number)\n  return async function* take() {\n    var _options$signal7\n    if (\n      options !== null &&\n      options !== undefined &&\n      (_options$signal7 = options.signal) !== null &&\n      _options$signal7 !== undefined &&\n      _options$signal7.aborted\n    ) {\n      throw new AbortError()\n    }\n    for await (const val of this) {\n      var _options$signal8\n      if (\n        options !== null &&\n        options !== undefined &&\n        (_options$signal8 = options.signal) !== null &&\n        _options$signal8 !== undefined &&\n        _options$signal8.aborted\n      ) {\n        throw new AbortError()\n      }\n      if (number-- > 0) {\n        yield val\n      }\n\n      // Don't get another item from iterator in case we reached the end\n      if (number <= 0) {\n        return\n      }\n    }\n  }.call(this)\n}\nmodule.exports.streamReturningOperators = {\n  asIndexedPairs: deprecate(asIndexedPairs, 'readable.asIndexedPairs will be removed in a future version.'),\n  drop,\n  filter,\n  flatMap,\n  map,\n  take,\n  compose\n}\nmodule.exports.promiseReturningOperators = {\n  every,\n  forEach,\n  reduce,\n  toArray,\n  some,\n  find\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict'\n\nconst { ObjectSetPrototypeOf } = require('../../ours/primordials')\nmodule.exports = PassThrough\nconst Transform = require('./transform')\nObjectSetPrototypeOf(PassThrough.prototype, Transform.prototype)\nObjectSetPrototypeOf(PassThrough, Transform)\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options)\n  Transform.call(this, options)\n}\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk)\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n// Ported from https://github.com/mafintosh/pump with\n// permission from the author, Mathias Buus (@mafintosh).\n\n;('use strict')\nconst { ArrayIsArray, Promise, SymbolAsyncIterator, SymbolDispose } = require('../../ours/primordials')\nconst eos = require('./end-of-stream')\nconst { once } = require('../../ours/util')\nconst destroyImpl = require('./destroy')\nconst Duplex = require('./duplex')\nconst {\n  aggregateTwoErrors,\n  codes: {\n    ERR_INVALID_ARG_TYPE,\n    ERR_INVALID_RETURN_VALUE,\n    ERR_MISSING_ARGS,\n    ERR_STREAM_DESTROYED,\n    ERR_STREAM_PREMATURE_CLOSE\n  },\n  AbortError\n} = require('../../ours/errors')\nconst { validateFunction, validateAbortSignal } = require('../validators')\nconst {\n  isIterable,\n  isReadable,\n  isReadableNodeStream,\n  isNodeStream,\n  isTransformStream,\n  isWebStream,\n  isReadableStream,\n  isReadableFinished\n} = require('./utils')\nconst AbortController = globalThis.AbortController || require('abort-controller').AbortController\nlet PassThrough\nlet Readable\nlet addAbortListener\nfunction destroyer(stream, reading, writing) {\n  let finished = false\n  stream.on('close', () => {\n    finished = true\n  })\n  const cleanup = eos(\n    stream,\n    {\n      readable: reading,\n      writable: writing\n    },\n    (err) => {\n      finished = !err\n    }\n  )\n  return {\n    destroy: (err) => {\n      if (finished) return\n      finished = true\n      destroyImpl.destroyer(stream, err || new ERR_STREAM_DESTROYED('pipe'))\n    },\n    cleanup\n  }\n}\nfunction popCallback(streams) {\n  // Streams should never be an empty array. It should always contain at least\n  // a single stream. Therefore optimize for the average case instead of\n  // checking for length === 0 as well.\n  validateFunction(streams[streams.length - 1], 'streams[stream.length - 1]')\n  return streams.pop()\n}\nfunction makeAsyncIterable(val) {\n  if (isIterable(val)) {\n    return val\n  } else if (isReadableNodeStream(val)) {\n    // Legacy streams are not Iterable.\n    return fromReadable(val)\n  }\n  throw new ERR_INVALID_ARG_TYPE('val', ['Readable', 'Iterable', 'AsyncIterable'], val)\n}\nasync function* fromReadable(val) {\n  if (!Readable) {\n    Readable = require('./readable')\n  }\n  yield* Readable.prototype[SymbolAsyncIterator].call(val)\n}\nasync function pumpToNode(iterable, writable, finish, { end }) {\n  let error\n  let onresolve = null\n  const resume = (err) => {\n    if (err) {\n      error = err\n    }\n    if (onresolve) {\n      const callback = onresolve\n      onresolve = null\n      callback()\n    }\n  }\n  const wait = () =>\n    new Promise((resolve, reject) => {\n      if (error) {\n        reject(error)\n      } else {\n        onresolve = () => {\n          if (error) {\n            reject(error)\n          } else {\n            resolve()\n          }\n        }\n      }\n    })\n  writable.on('drain', resume)\n  const cleanup = eos(\n    writable,\n    {\n      readable: false\n    },\n    resume\n  )\n  try {\n    if (writable.writableNeedDrain) {\n      await wait()\n    }\n    for await (const chunk of iterable) {\n      if (!writable.write(chunk)) {\n        await wait()\n      }\n    }\n    if (end) {\n      writable.end()\n      await wait()\n    }\n    finish()\n  } catch (err) {\n    finish(error !== err ? aggregateTwoErrors(error, err) : err)\n  } finally {\n    cleanup()\n    writable.off('drain', resume)\n  }\n}\nasync function pumpToWeb(readable, writable, finish, { end }) {\n  if (isTransformStream(writable)) {\n    writable = writable.writable\n  }\n  // https://streams.spec.whatwg.org/#example-manual-write-with-backpressure\n  const writer = writable.getWriter()\n  try {\n    for await (const chunk of readable) {\n      await writer.ready\n      writer.write(chunk).catch(() => {})\n    }\n    await writer.ready\n    if (end) {\n      await writer.close()\n    }\n    finish()\n  } catch (err) {\n    try {\n      await writer.abort(err)\n      finish(err)\n    } catch (err) {\n      finish(err)\n    }\n  }\n}\nfunction pipeline(...streams) {\n  return pipelineImpl(streams, once(popCallback(streams)))\n}\nfunction pipelineImpl(streams, callback, opts) {\n  if (streams.length === 1 && ArrayIsArray(streams[0])) {\n    streams = streams[0]\n  }\n  if (streams.length < 2) {\n    throw new ERR_MISSING_ARGS('streams')\n  }\n  const ac = new AbortController()\n  const signal = ac.signal\n  const outerSignal = opts === null || opts === undefined ? undefined : opts.signal\n\n  // Need to cleanup event listeners if last stream is readable\n  // https://github.com/nodejs/node/issues/35452\n  const lastStreamCleanup = []\n  validateAbortSignal(outerSignal, 'options.signal')\n  function abort() {\n    finishImpl(new AbortError())\n  }\n  addAbortListener = addAbortListener || require('../../ours/util').addAbortListener\n  let disposable\n  if (outerSignal) {\n    disposable = addAbortListener(outerSignal, abort)\n  }\n  let error\n  let value\n  const destroys = []\n  let finishCount = 0\n  function finish(err) {\n    finishImpl(err, --finishCount === 0)\n  }\n  function finishImpl(err, final) {\n    var _disposable\n    if (err && (!error || error.code === 'ERR_STREAM_PREMATURE_CLOSE')) {\n      error = err\n    }\n    if (!error && !final) {\n      return\n    }\n    while (destroys.length) {\n      destroys.shift()(error)\n    }\n    ;(_disposable = disposable) === null || _disposable === undefined ? undefined : _disposable[SymbolDispose]()\n    ac.abort()\n    if (final) {\n      if (!error) {\n        lastStreamCleanup.forEach((fn) => fn())\n      }\n      process.nextTick(callback, error, value)\n    }\n  }\n  let ret\n  for (let i = 0; i < streams.length; i++) {\n    const stream = streams[i]\n    const reading = i < streams.length - 1\n    const writing = i > 0\n    const end = reading || (opts === null || opts === undefined ? undefined : opts.end) !== false\n    const isLastStream = i === streams.length - 1\n    if (isNodeStream(stream)) {\n      if (end) {\n        const { destroy, cleanup } = destroyer(stream, reading, writing)\n        destroys.push(destroy)\n        if (isReadable(stream) && isLastStream) {\n          lastStreamCleanup.push(cleanup)\n        }\n      }\n\n      // Catch stream errors that occur after pipe/pump has completed.\n      function onError(err) {\n        if (err && err.name !== 'AbortError' && err.code !== 'ERR_STREAM_PREMATURE_CLOSE') {\n          finish(err)\n        }\n      }\n      stream.on('error', onError)\n      if (isReadable(stream) && isLastStream) {\n        lastStreamCleanup.push(() => {\n          stream.removeListener('error', onError)\n        })\n      }\n    }\n    if (i === 0) {\n      if (typeof stream === 'function') {\n        ret = stream({\n          signal\n        })\n        if (!isIterable(ret)) {\n          throw new ERR_INVALID_RETURN_VALUE('Iterable, AsyncIterable or Stream', 'source', ret)\n        }\n      } else if (isIterable(stream) || isReadableNodeStream(stream) || isTransformStream(stream)) {\n        ret = stream\n      } else {\n        ret = Duplex.from(stream)\n      }\n    } else if (typeof stream === 'function') {\n      if (isTransformStream(ret)) {\n        var _ret\n        ret = makeAsyncIterable((_ret = ret) === null || _ret === undefined ? undefined : _ret.readable)\n      } else {\n        ret = makeAsyncIterable(ret)\n      }\n      ret = stream(ret, {\n        signal\n      })\n      if (reading) {\n        if (!isIterable(ret, true)) {\n          throw new ERR_INVALID_RETURN_VALUE('AsyncIterable', `transform[${i - 1}]`, ret)\n        }\n      } else {\n        var _ret2\n        if (!PassThrough) {\n          PassThrough = require('./passthrough')\n        }\n\n        // If the last argument to pipeline is not a stream\n        // we must create a proxy stream so that pipeline(...)\n        // always returns a stream which can be further\n        // composed through `.pipe(stream)`.\n\n        const pt = new PassThrough({\n          objectMode: true\n        })\n\n        // Handle Promises/A+ spec, `then` could be a getter that throws on\n        // second use.\n        const then = (_ret2 = ret) === null || _ret2 === undefined ? undefined : _ret2.then\n        if (typeof then === 'function') {\n          finishCount++\n          then.call(\n            ret,\n            (val) => {\n              value = val\n              if (val != null) {\n                pt.write(val)\n              }\n              if (end) {\n                pt.end()\n              }\n              process.nextTick(finish)\n            },\n            (err) => {\n              pt.destroy(err)\n              process.nextTick(finish, err)\n            }\n          )\n        } else if (isIterable(ret, true)) {\n          finishCount++\n          pumpToNode(ret, pt, finish, {\n            end\n          })\n        } else if (isReadableStream(ret) || isTransformStream(ret)) {\n          const toRead = ret.readable || ret\n          finishCount++\n          pumpToNode(toRead, pt, finish, {\n            end\n          })\n        } else {\n          throw new ERR_INVALID_RETURN_VALUE('AsyncIterable or Promise', 'destination', ret)\n        }\n        ret = pt\n        const { destroy, cleanup } = destroyer(ret, false, true)\n        destroys.push(destroy)\n        if (isLastStream) {\n          lastStreamCleanup.push(cleanup)\n        }\n      }\n    } else if (isNodeStream(stream)) {\n      if (isReadableNodeStream(ret)) {\n        finishCount += 2\n        const cleanup = pipe(ret, stream, finish, {\n          end\n        })\n        if (isReadable(stream) && isLastStream) {\n          lastStreamCleanup.push(cleanup)\n        }\n      } else if (isTransformStream(ret) || isReadableStream(ret)) {\n        const toRead = ret.readable || ret\n        finishCount++\n        pumpToNode(toRead, stream, finish, {\n          end\n        })\n      } else if (isIterable(ret)) {\n        finishCount++\n        pumpToNode(ret, stream, finish, {\n          end\n        })\n      } else {\n        throw new ERR_INVALID_ARG_TYPE(\n          'val',\n          ['Readable', 'Iterable', 'AsyncIterable', 'ReadableStream', 'TransformStream'],\n          ret\n        )\n      }\n      ret = stream\n    } else if (isWebStream(stream)) {\n      if (isReadableNodeStream(ret)) {\n        finishCount++\n        pumpToWeb(makeAsyncIterable(ret), stream, finish, {\n          end\n        })\n      } else if (isReadableStream(ret) || isIterable(ret)) {\n        finishCount++\n        pumpToWeb(ret, stream, finish, {\n          end\n        })\n      } else if (isTransformStream(ret)) {\n        finishCount++\n        pumpToWeb(ret.readable, stream, finish, {\n          end\n        })\n      } else {\n        throw new ERR_INVALID_ARG_TYPE(\n          'val',\n          ['Readable', 'Iterable', 'AsyncIterable', 'ReadableStream', 'TransformStream'],\n          ret\n        )\n      }\n      ret = stream\n    } else {\n      ret = Duplex.from(stream)\n    }\n  }\n  if (\n    (signal !== null && signal !== undefined && signal.aborted) ||\n    (outerSignal !== null && outerSignal !== undefined && outerSignal.aborted)\n  ) {\n    process.nextTick(abort)\n  }\n  return ret\n}\nfunction pipe(src, dst, finish, { end }) {\n  let ended = false\n  dst.on('close', () => {\n    if (!ended) {\n      // Finish if the destination closes before the source has completed.\n      finish(new ERR_STREAM_PREMATURE_CLOSE())\n    }\n  })\n  src.pipe(dst, {\n    end: false\n  }) // If end is true we already will have a listener to end dst.\n\n  if (end) {\n    // Compat. Before node v10.12.0 stdio used to throw an error so\n    // pipe() did/does not end() stdio destinations.\n    // Now they allow it but \"secretly\" don't close the underlying fd.\n\n    function endFn() {\n      ended = true\n      dst.end()\n    }\n    if (isReadableFinished(src)) {\n      // End the destination if the source has already ended.\n      process.nextTick(endFn)\n    } else {\n      src.once('end', endFn)\n    }\n  } else {\n    finish()\n  }\n  eos(\n    src,\n    {\n      readable: true,\n      writable: false\n    },\n    (err) => {\n      const rState = src._readableState\n      if (\n        err &&\n        err.code === 'ERR_STREAM_PREMATURE_CLOSE' &&\n        rState &&\n        rState.ended &&\n        !rState.errored &&\n        !rState.errorEmitted\n      ) {\n        // Some readable streams will emit 'close' before 'end'. However, since\n        // this is on the readable side 'end' should still be emitted if the\n        // stream has been ended and no error emitted. This should be allowed in\n        // favor of backwards compatibility. Since the stream is piped to a\n        // destination this should not result in any observable difference.\n        // We don't need to check if this is a writable premature close since\n        // eos will only fail with premature close on the reading side for\n        // duplex streams.\n        src.once('end', finish).once('error', finish)\n      } else {\n        finish(err)\n      }\n    }\n  )\n  return eos(\n    dst,\n    {\n      readable: false,\n      writable: true\n    },\n    finish\n  )\n}\nmodule.exports = {\n  pipelineImpl,\n  pipeline\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n;('use strict')\nconst {\n  ArrayPrototypeIndexOf,\n  NumberIsInteger,\n  NumberIsNaN,\n  NumberParseInt,\n  ObjectDefineProperties,\n  ObjectKeys,\n  ObjectSetPrototypeOf,\n  Promise,\n  SafeSet,\n  SymbolAsyncDispose,\n  SymbolAsyncIterator,\n  Symbol\n} = require('../../ours/primordials')\nmodule.exports = Readable\nReadable.ReadableState = ReadableState\nconst { EventEmitter: EE } = require('events')\nconst { Stream, prependListener } = require('./legacy')\nconst { Buffer } = require('buffer')\nconst { addAbortSignal } = require('./add-abort-signal')\nconst eos = require('./end-of-stream')\nlet debug = require('../../ours/util').debuglog('stream', (fn) => {\n  debug = fn\n})\nconst BufferList = require('./buffer_list')\nconst destroyImpl = require('./destroy')\nconst { getHighWaterMark, getDefaultHighWaterMark } = require('./state')\nconst {\n  aggregateTwoErrors,\n  codes: {\n    ERR_INVALID_ARG_TYPE,\n    ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_OUT_OF_RANGE,\n    ERR_STREAM_PUSH_AFTER_EOF,\n    ERR_STREAM_UNSHIFT_AFTER_END_EVENT\n  },\n  AbortError\n} = require('../../ours/errors')\nconst { validateObject } = require('../validators')\nconst kPaused = Symbol('kPaused')\nconst { StringDecoder } = require('string_decoder')\nconst from = require('./from')\nObjectSetPrototypeOf(Readable.prototype, Stream.prototype)\nObjectSetPrototypeOf(Readable, Stream)\nconst nop = () => {}\nconst { errorOrDestroy } = destroyImpl\nconst kObjectMode = 1 << 0\nconst kEnded = 1 << 1\nconst kEndEmitted = 1 << 2\nconst kReading = 1 << 3\nconst kConstructed = 1 << 4\nconst kSync = 1 << 5\nconst kNeedReadable = 1 << 6\nconst kEmittedReadable = 1 << 7\nconst kReadableListening = 1 << 8\nconst kResumeScheduled = 1 << 9\nconst kErrorEmitted = 1 << 10\nconst kEmitClose = 1 << 11\nconst kAutoDestroy = 1 << 12\nconst kDestroyed = 1 << 13\nconst kClosed = 1 << 14\nconst kCloseEmitted = 1 << 15\nconst kMultiAwaitDrain = 1 << 16\nconst kReadingMore = 1 << 17\nconst kDataEmitted = 1 << 18\n\n// TODO(benjamingr) it is likely slower to do it this way than with free functions\nfunction makeBitMapDescriptor(bit) {\n  return {\n    enumerable: false,\n    get() {\n      return (this.state & bit) !== 0\n    },\n    set(value) {\n      if (value) this.state |= bit\n      else this.state &= ~bit\n    }\n  }\n}\nObjectDefineProperties(ReadableState.prototype, {\n  objectMode: makeBitMapDescriptor(kObjectMode),\n  ended: makeBitMapDescriptor(kEnded),\n  endEmitted: makeBitMapDescriptor(kEndEmitted),\n  reading: makeBitMapDescriptor(kReading),\n  // Stream is still being constructed and cannot be\n  // destroyed until construction finished or failed.\n  // Async construction is opt in, therefore we start as\n  // constructed.\n  constructed: makeBitMapDescriptor(kConstructed),\n  // A flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  sync: makeBitMapDescriptor(kSync),\n  // Whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  needReadable: makeBitMapDescriptor(kNeedReadable),\n  emittedReadable: makeBitMapDescriptor(kEmittedReadable),\n  readableListening: makeBitMapDescriptor(kReadableListening),\n  resumeScheduled: makeBitMapDescriptor(kResumeScheduled),\n  // True if the error was already emitted and should not be thrown again.\n  errorEmitted: makeBitMapDescriptor(kErrorEmitted),\n  emitClose: makeBitMapDescriptor(kEmitClose),\n  autoDestroy: makeBitMapDescriptor(kAutoDestroy),\n  // Has it been destroyed.\n  destroyed: makeBitMapDescriptor(kDestroyed),\n  // Indicates whether the stream has finished destroying.\n  closed: makeBitMapDescriptor(kClosed),\n  // True if close has been emitted or would have been emitted\n  // depending on emitClose.\n  closeEmitted: makeBitMapDescriptor(kCloseEmitted),\n  multiAwaitDrain: makeBitMapDescriptor(kMultiAwaitDrain),\n  // If true, a maybeReadMore has been scheduled.\n  readingMore: makeBitMapDescriptor(kReadingMore),\n  dataEmitted: makeBitMapDescriptor(kDataEmitted)\n})\nfunction ReadableState(options, stream, isDuplex) {\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof require('./duplex')\n\n  // Bit map field to store ReadableState more effciently with 1 bit per field\n  // instead of a V8 slot per field.\n  this.state = kEmitClose | kAutoDestroy | kConstructed | kSync\n  // Object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away.\n  if (options && options.objectMode) this.state |= kObjectMode\n  if (isDuplex && options && options.readableObjectMode) this.state |= kObjectMode\n\n  // The point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  this.highWaterMark = options\n    ? getHighWaterMark(this, options, 'readableHighWaterMark', isDuplex)\n    : getDefaultHighWaterMark(false)\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift().\n  this.buffer = new BufferList()\n  this.length = 0\n  this.pipes = []\n  this.flowing = null\n  this[kPaused] = null\n\n  // Should close be emitted on destroy. Defaults to true.\n  if (options && options.emitClose === false) this.state &= ~kEmitClose\n\n  // Should .destroy() be called after 'end' (and potentially 'finish').\n  if (options && options.autoDestroy === false) this.state &= ~kAutoDestroy\n\n  // Indicates whether the stream has errored. When true no further\n  // _read calls, 'data' or 'readable' events should occur. This is needed\n  // since when autoDestroy is disabled we need a way to tell whether the\n  // stream has failed.\n  this.errored = null\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = (options && options.defaultEncoding) || 'utf8'\n\n  // Ref the piped dest which we need a drain event on it\n  // type: null | Writable | Set<Writable>.\n  this.awaitDrainWriters = null\n  this.decoder = null\n  this.encoding = null\n  if (options && options.encoding) {\n    this.decoder = new StringDecoder(options.encoding)\n    this.encoding = options.encoding\n  }\n}\nfunction Readable(options) {\n  if (!(this instanceof Readable)) return new Readable(options)\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the ReadableState constructor, at least with V8 6.5.\n  const isDuplex = this instanceof require('./duplex')\n  this._readableState = new ReadableState(options, this, isDuplex)\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read\n    if (typeof options.destroy === 'function') this._destroy = options.destroy\n    if (typeof options.construct === 'function') this._construct = options.construct\n    if (options.signal && !isDuplex) addAbortSignal(options.signal, this)\n  }\n  Stream.call(this, options)\n  destroyImpl.construct(this, () => {\n    if (this._readableState.needReadable) {\n      maybeReadMore(this, this._readableState)\n    }\n  })\n}\nReadable.prototype.destroy = destroyImpl.destroy\nReadable.prototype._undestroy = destroyImpl.undestroy\nReadable.prototype._destroy = function (err, cb) {\n  cb(err)\n}\nReadable.prototype[EE.captureRejectionSymbol] = function (err) {\n  this.destroy(err)\n}\nReadable.prototype[SymbolAsyncDispose] = function () {\n  let error\n  if (!this.destroyed) {\n    error = this.readableEnded ? null : new AbortError()\n    this.destroy(error)\n  }\n  return new Promise((resolve, reject) => eos(this, (err) => (err && err !== error ? reject(err) : resolve(null))))\n}\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  return readableAddChunk(this, chunk, encoding, false)\n}\n\n// Unshift should *always* be something directly out of read().\nReadable.prototype.unshift = function (chunk, encoding) {\n  return readableAddChunk(this, chunk, encoding, true)\n}\nfunction readableAddChunk(stream, chunk, encoding, addToFront) {\n  debug('readableAddChunk', chunk)\n  const state = stream._readableState\n  let err\n  if ((state.state & kObjectMode) === 0) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding\n      if (state.encoding !== encoding) {\n        if (addToFront && state.encoding) {\n          // When unshifting, if state.encoding is set, we have to save\n          // the string in the BufferList with the state encoding.\n          chunk = Buffer.from(chunk, encoding).toString(state.encoding)\n        } else {\n          chunk = Buffer.from(chunk, encoding)\n          encoding = ''\n        }\n      }\n    } else if (chunk instanceof Buffer) {\n      encoding = ''\n    } else if (Stream._isUint8Array(chunk)) {\n      chunk = Stream._uint8ArrayToBuffer(chunk)\n      encoding = ''\n    } else if (chunk != null) {\n      err = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk)\n    }\n  }\n  if (err) {\n    errorOrDestroy(stream, err)\n  } else if (chunk === null) {\n    state.state &= ~kReading\n    onEofChunk(stream, state)\n  } else if ((state.state & kObjectMode) !== 0 || (chunk && chunk.length > 0)) {\n    if (addToFront) {\n      if ((state.state & kEndEmitted) !== 0) errorOrDestroy(stream, new ERR_STREAM_UNSHIFT_AFTER_END_EVENT())\n      else if (state.destroyed || state.errored) return false\n      else addChunk(stream, state, chunk, true)\n    } else if (state.ended) {\n      errorOrDestroy(stream, new ERR_STREAM_PUSH_AFTER_EOF())\n    } else if (state.destroyed || state.errored) {\n      return false\n    } else {\n      state.state &= ~kReading\n      if (state.decoder && !encoding) {\n        chunk = state.decoder.write(chunk)\n        if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false)\n        else maybeReadMore(stream, state)\n      } else {\n        addChunk(stream, state, chunk, false)\n      }\n    }\n  } else if (!addToFront) {\n    state.state &= ~kReading\n    maybeReadMore(stream, state)\n  }\n\n  // We can push more data if we are below the highWaterMark.\n  // Also, if we have no data yet, we can stand some more bytes.\n  // This is to work around cases where hwm=0, such as the repl.\n  return !state.ended && (state.length < state.highWaterMark || state.length === 0)\n}\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync && stream.listenerCount('data') > 0) {\n    // Use the guard to avoid creating `Set()` repeatedly\n    // when we have multiple pipes.\n    if ((state.state & kMultiAwaitDrain) !== 0) {\n      state.awaitDrainWriters.clear()\n    } else {\n      state.awaitDrainWriters = null\n    }\n    state.dataEmitted = true\n    stream.emit('data', chunk)\n  } else {\n    // Update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length\n    if (addToFront) state.buffer.unshift(chunk)\n    else state.buffer.push(chunk)\n    if ((state.state & kNeedReadable) !== 0) emitReadable(stream)\n  }\n  maybeReadMore(stream, state)\n}\nReadable.prototype.isPaused = function () {\n  const state = this._readableState\n  return state[kPaused] === true || state.flowing === false\n}\n\n// Backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  const decoder = new StringDecoder(enc)\n  this._readableState.decoder = decoder\n  // If setEncoding(null), decoder.encoding equals utf8.\n  this._readableState.encoding = this._readableState.decoder.encoding\n  const buffer = this._readableState.buffer\n  // Iterate over current buffer to convert already stored Buffers:\n  let content = ''\n  for (const data of buffer) {\n    content += decoder.write(data)\n  }\n  buffer.clear()\n  if (content !== '') buffer.push(content)\n  this._readableState.length = content.length\n  return this\n}\n\n// Don't raise the hwm > 1GB.\nconst MAX_HWM = 0x40000000\nfunction computeNewHighWaterMark(n) {\n  if (n > MAX_HWM) {\n    throw new ERR_OUT_OF_RANGE('size', '<= 1GiB', n)\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts.\n    n--\n    n |= n >>> 1\n    n |= n >>> 2\n    n |= n >>> 4\n    n |= n >>> 8\n    n |= n >>> 16\n    n++\n  }\n  return n\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || (state.length === 0 && state.ended)) return 0\n  if ((state.state & kObjectMode) !== 0) return 1\n  if (NumberIsNaN(n)) {\n    // Only flow one buffer at a time.\n    if (state.flowing && state.length) return state.buffer.first().length\n    return state.length\n  }\n  if (n <= state.length) return n\n  return state.ended ? state.length : 0\n}\n\n// You can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n)\n  // Same as parseInt(undefined, 10), however V8 7.3 performance regressed\n  // in this scenario, so we are doing it manually.\n  if (n === undefined) {\n    n = NaN\n  } else if (!NumberIsInteger(n)) {\n    n = NumberParseInt(n, 10)\n  }\n  const state = this._readableState\n  const nOrig = n\n\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n)\n  if (n !== 0) state.state &= ~kEmittedReadable\n\n  // If we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (\n    n === 0 &&\n    state.needReadable &&\n    ((state.highWaterMark !== 0 ? state.length >= state.highWaterMark : state.length > 0) || state.ended)\n  ) {\n    debug('read: emitReadable', state.length, state.ended)\n    if (state.length === 0 && state.ended) endReadable(this)\n    else emitReadable(this)\n    return null\n  }\n  n = howMuchToRead(n, state)\n\n  // If we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this)\n    return null\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  let doRead = (state.state & kNeedReadable) !== 0\n  debug('need readable', doRead)\n\n  // If we currently have less than the highWaterMark, then also read some.\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true\n    debug('length less than watermark', doRead)\n  }\n\n  // However, if we've ended, then there's no point, if we're already\n  // reading, then it's unnecessary, if we're constructing we have to wait,\n  // and if we're destroyed or errored, then it's not allowed,\n  if (state.ended || state.reading || state.destroyed || state.errored || !state.constructed) {\n    doRead = false\n    debug('reading, ended or constructing', doRead)\n  } else if (doRead) {\n    debug('do read')\n    state.state |= kReading | kSync\n    // If the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.state |= kNeedReadable\n\n    // Call internal read method\n    try {\n      this._read(state.highWaterMark)\n    } catch (err) {\n      errorOrDestroy(this, err)\n    }\n    state.state &= ~kSync\n\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state)\n  }\n  let ret\n  if (n > 0) ret = fromList(n, state)\n  else ret = null\n  if (ret === null) {\n    state.needReadable = state.length <= state.highWaterMark\n    n = 0\n  } else {\n    state.length -= n\n    if (state.multiAwaitDrain) {\n      state.awaitDrainWriters.clear()\n    } else {\n      state.awaitDrainWriters = null\n    }\n  }\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this)\n  }\n  if (ret !== null && !state.errorEmitted && !state.closeEmitted) {\n    state.dataEmitted = true\n    this.emit('data', ret)\n  }\n  return ret\n}\nfunction onEofChunk(stream, state) {\n  debug('onEofChunk')\n  if (state.ended) return\n  if (state.decoder) {\n    const chunk = state.decoder.end()\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk)\n      state.length += state.objectMode ? 1 : chunk.length\n    }\n  }\n  state.ended = true\n  if (state.sync) {\n    // If we are sync, wait until next tick to emit the data.\n    // Otherwise we risk emitting data in the flow()\n    // the readable code triggers during a read() call.\n    emitReadable(stream)\n  } else {\n    // Emit 'readable' now to make sure it gets picked up.\n    state.needReadable = false\n    state.emittedReadable = true\n    // We have to emit readable now that we are EOF. Modules\n    // in the ecosystem (e.g. dicer) rely on this event being sync.\n    emitReadable_(stream)\n  }\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  const state = stream._readableState\n  debug('emitReadable', state.needReadable, state.emittedReadable)\n  state.needReadable = false\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing)\n    state.emittedReadable = true\n    process.nextTick(emitReadable_, stream)\n  }\n}\nfunction emitReadable_(stream) {\n  const state = stream._readableState\n  debug('emitReadable_', state.destroyed, state.length, state.ended)\n  if (!state.destroyed && !state.errored && (state.length || state.ended)) {\n    stream.emit('readable')\n    state.emittedReadable = false\n  }\n\n  // The stream needs another readable event if:\n  // 1. It is not flowing, as the flow mechanism will take\n  //    care of it.\n  // 2. It is not ended.\n  // 3. It is below the highWaterMark, so we can schedule\n  //    another readable later.\n  state.needReadable = !state.flowing && !state.ended && state.length <= state.highWaterMark\n  flow(stream)\n}\n\n// At this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore && state.constructed) {\n    state.readingMore = true\n    process.nextTick(maybeReadMore_, stream, state)\n  }\n}\nfunction maybeReadMore_(stream, state) {\n  // Attempt to read more data if we should.\n  //\n  // The conditions for reading more data are (one of):\n  // - Not enough data buffered (state.length < state.highWaterMark). The loop\n  //   is responsible for filling the buffer with enough data if such data\n  //   is available. If highWaterMark is 0 and we are not in the flowing mode\n  //   we should _not_ attempt to buffer any extra data. We'll get more data\n  //   when the stream consumer calls read() instead.\n  // - No data in the buffer, and the stream is in flowing mode. In this mode\n  //   the loop below is responsible for ensuring read() is called. Failing to\n  //   call read here would abort the flow and there's no other mechanism for\n  //   continuing the flow if the stream consumer has just subscribed to the\n  //   'data' event.\n  //\n  // In addition to the above conditions to keep reading data, the following\n  // conditions prevent the data from being read:\n  // - The stream has ended (state.ended).\n  // - There is already a pending 'read' operation (state.reading). This is a\n  //   case where the stream has called the implementation defined _read()\n  //   method, but they are processing the call asynchronously and have _not_\n  //   called push() with new data. In this case we skip performing more\n  //   read()s. The execution ends in this method again after the _read() ends\n  //   up calling push() with more data.\n  while (\n    !state.reading &&\n    !state.ended &&\n    (state.length < state.highWaterMark || (state.flowing && state.length === 0))\n  ) {\n    const len = state.length\n    debug('maybeReadMore read 0')\n    stream.read(0)\n    if (len === state.length)\n      // Didn't get any data, stop spinning.\n      break\n  }\n  state.readingMore = false\n}\n\n// Abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  throw new ERR_METHOD_NOT_IMPLEMENTED('_read()')\n}\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  const src = this\n  const state = this._readableState\n  if (state.pipes.length === 1) {\n    if (!state.multiAwaitDrain) {\n      state.multiAwaitDrain = true\n      state.awaitDrainWriters = new SafeSet(state.awaitDrainWriters ? [state.awaitDrainWriters] : [])\n    }\n  }\n  state.pipes.push(dest)\n  debug('pipe count=%d opts=%j', state.pipes.length, pipeOpts)\n  const doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr\n  const endFn = doEnd ? onend : unpipe\n  if (state.endEmitted) process.nextTick(endFn)\n  else src.once('end', endFn)\n  dest.on('unpipe', onunpipe)\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe')\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true\n        cleanup()\n      }\n    }\n  }\n  function onend() {\n    debug('onend')\n    dest.end()\n  }\n  let ondrain\n  let cleanedUp = false\n  function cleanup() {\n    debug('cleanup')\n    // Cleanup event handlers once the pipe is broken.\n    dest.removeListener('close', onclose)\n    dest.removeListener('finish', onfinish)\n    if (ondrain) {\n      dest.removeListener('drain', ondrain)\n    }\n    dest.removeListener('error', onerror)\n    dest.removeListener('unpipe', onunpipe)\n    src.removeListener('end', onend)\n    src.removeListener('end', unpipe)\n    src.removeListener('data', ondata)\n    cleanedUp = true\n\n    // If the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (ondrain && state.awaitDrainWriters && (!dest._writableState || dest._writableState.needDrain)) ondrain()\n  }\n  function pause() {\n    // If the user unpiped during `dest.write()`, it is possible\n    // to get stuck in a permanently paused state if that write\n    // also returned false.\n    // => Check whether `dest` is still a piping destination.\n    if (!cleanedUp) {\n      if (state.pipes.length === 1 && state.pipes[0] === dest) {\n        debug('false write response, pause', 0)\n        state.awaitDrainWriters = dest\n        state.multiAwaitDrain = false\n      } else if (state.pipes.length > 1 && state.pipes.includes(dest)) {\n        debug('false write response, pause', state.awaitDrainWriters.size)\n        state.awaitDrainWriters.add(dest)\n      }\n      src.pause()\n    }\n    if (!ondrain) {\n      // When the dest drains, it reduces the awaitDrain counter\n      // on the source.  This would be more elegant with a .once()\n      // handler in flow(), but adding and removing repeatedly is\n      // too slow.\n      ondrain = pipeOnDrain(src, dest)\n      dest.on('drain', ondrain)\n    }\n  }\n  src.on('data', ondata)\n  function ondata(chunk) {\n    debug('ondata')\n    const ret = dest.write(chunk)\n    debug('dest.write', ret)\n    if (ret === false) {\n      pause()\n    }\n  }\n\n  // If the dest has an error, then stop piping into it.\n  // However, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er)\n    unpipe()\n    dest.removeListener('error', onerror)\n    if (dest.listenerCount('error') === 0) {\n      const s = dest._writableState || dest._readableState\n      if (s && !s.errorEmitted) {\n        // User incorrectly emitted 'error' directly on the stream.\n        errorOrDestroy(dest, er)\n      } else {\n        dest.emit('error', er)\n      }\n    }\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror)\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish)\n    unpipe()\n  }\n  dest.once('close', onclose)\n  function onfinish() {\n    debug('onfinish')\n    dest.removeListener('close', onclose)\n    unpipe()\n  }\n  dest.once('finish', onfinish)\n  function unpipe() {\n    debug('unpipe')\n    src.unpipe(dest)\n  }\n\n  // Tell the dest that it's being piped to.\n  dest.emit('pipe', src)\n\n  // Start the flow if it hasn't been started already.\n\n  if (dest.writableNeedDrain === true) {\n    pause()\n  } else if (!state.flowing) {\n    debug('pipe resume')\n    src.resume()\n  }\n  return dest\n}\nfunction pipeOnDrain(src, dest) {\n  return function pipeOnDrainFunctionResult() {\n    const state = src._readableState\n\n    // `ondrain` will call directly,\n    // `this` maybe not a reference to dest,\n    // so we use the real dest here.\n    if (state.awaitDrainWriters === dest) {\n      debug('pipeOnDrain', 1)\n      state.awaitDrainWriters = null\n    } else if (state.multiAwaitDrain) {\n      debug('pipeOnDrain', state.awaitDrainWriters.size)\n      state.awaitDrainWriters.delete(dest)\n    }\n    if ((!state.awaitDrainWriters || state.awaitDrainWriters.size === 0) && src.listenerCount('data')) {\n      src.resume()\n    }\n  }\n}\nReadable.prototype.unpipe = function (dest) {\n  const state = this._readableState\n  const unpipeInfo = {\n    hasUnpiped: false\n  }\n\n  // If we're not piping anywhere, then do nothing.\n  if (state.pipes.length === 0) return this\n  if (!dest) {\n    // remove all.\n    const dests = state.pipes\n    state.pipes = []\n    this.pause()\n    for (let i = 0; i < dests.length; i++)\n      dests[i].emit('unpipe', this, {\n        hasUnpiped: false\n      })\n    return this\n  }\n\n  // Try to find the right one.\n  const index = ArrayPrototypeIndexOf(state.pipes, dest)\n  if (index === -1) return this\n  state.pipes.splice(index, 1)\n  if (state.pipes.length === 0) this.pause()\n  dest.emit('unpipe', this, unpipeInfo)\n  return this\n}\n\n// Set up data events if they are asked for\n// Ensure readable listeners eventually get something.\nReadable.prototype.on = function (ev, fn) {\n  const res = Stream.prototype.on.call(this, ev, fn)\n  const state = this._readableState\n  if (ev === 'data') {\n    // Update readableListening so that resume() may be a no-op\n    // a few lines down. This is needed to support once('readable').\n    state.readableListening = this.listenerCount('readable') > 0\n\n    // Try start flowing on next tick if stream isn't explicitly paused.\n    if (state.flowing !== false) this.resume()\n  } else if (ev === 'readable') {\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true\n      state.flowing = false\n      state.emittedReadable = false\n      debug('on readable', state.length, state.reading)\n      if (state.length) {\n        emitReadable(this)\n      } else if (!state.reading) {\n        process.nextTick(nReadingNextTick, this)\n      }\n    }\n  }\n  return res\n}\nReadable.prototype.addListener = Readable.prototype.on\nReadable.prototype.removeListener = function (ev, fn) {\n  const res = Stream.prototype.removeListener.call(this, ev, fn)\n  if (ev === 'readable') {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this)\n  }\n  return res\n}\nReadable.prototype.off = Readable.prototype.removeListener\nReadable.prototype.removeAllListeners = function (ev) {\n  const res = Stream.prototype.removeAllListeners.apply(this, arguments)\n  if (ev === 'readable' || ev === undefined) {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this)\n  }\n  return res\n}\nfunction updateReadableListening(self) {\n  const state = self._readableState\n  state.readableListening = self.listenerCount('readable') > 0\n  if (state.resumeScheduled && state[kPaused] === false) {\n    // Flowing needs to be set to true now, otherwise\n    // the upcoming resume will not flow.\n    state.flowing = true\n\n    // Crude way to check if we should resume.\n  } else if (self.listenerCount('data') > 0) {\n    self.resume()\n  } else if (!state.readableListening) {\n    state.flowing = null\n  }\n}\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0')\n  self.read(0)\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  const state = this._readableState\n  if (!state.flowing) {\n    debug('resume')\n    // We flow only if there is no one listening\n    // for readable, but we still have to call\n    // resume().\n    state.flowing = !state.readableListening\n    resume(this, state)\n  }\n  state[kPaused] = false\n  return this\n}\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true\n    process.nextTick(resume_, stream, state)\n  }\n}\nfunction resume_(stream, state) {\n  debug('resume', state.reading)\n  if (!state.reading) {\n    stream.read(0)\n  }\n  state.resumeScheduled = false\n  stream.emit('resume')\n  flow(stream)\n  if (state.flowing && !state.reading) stream.read(0)\n}\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing)\n  if (this._readableState.flowing !== false) {\n    debug('pause')\n    this._readableState.flowing = false\n    this.emit('pause')\n  }\n  this._readableState[kPaused] = true\n  return this\n}\nfunction flow(stream) {\n  const state = stream._readableState\n  debug('flow', state.flowing)\n  while (state.flowing && stream.read() !== null);\n}\n\n// Wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  let paused = false\n\n  // TODO (ronag): Should this.destroy(err) emit\n  // 'error' on the wrapped stream? Would require\n  // a static factory method, e.g. Readable.wrap(stream).\n\n  stream.on('data', (chunk) => {\n    if (!this.push(chunk) && stream.pause) {\n      paused = true\n      stream.pause()\n    }\n  })\n  stream.on('end', () => {\n    this.push(null)\n  })\n  stream.on('error', (err) => {\n    errorOrDestroy(this, err)\n  })\n  stream.on('close', () => {\n    this.destroy()\n  })\n  stream.on('destroy', () => {\n    this.destroy()\n  })\n  this._read = () => {\n    if (paused && stream.resume) {\n      paused = false\n      stream.resume()\n    }\n  }\n\n  // Proxy all the other methods. Important when wrapping filters and duplexes.\n  const streamKeys = ObjectKeys(stream)\n  for (let j = 1; j < streamKeys.length; j++) {\n    const i = streamKeys[j]\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = stream[i].bind(stream)\n    }\n  }\n  return this\n}\nReadable.prototype[SymbolAsyncIterator] = function () {\n  return streamToAsyncIterator(this)\n}\nReadable.prototype.iterator = function (options) {\n  if (options !== undefined) {\n    validateObject(options, 'options')\n  }\n  return streamToAsyncIterator(this, options)\n}\nfunction streamToAsyncIterator(stream, options) {\n  if (typeof stream.read !== 'function') {\n    stream = Readable.wrap(stream, {\n      objectMode: true\n    })\n  }\n  const iter = createAsyncIterator(stream, options)\n  iter.stream = stream\n  return iter\n}\nasync function* createAsyncIterator(stream, options) {\n  let callback = nop\n  function next(resolve) {\n    if (this === stream) {\n      callback()\n      callback = nop\n    } else {\n      callback = resolve\n    }\n  }\n  stream.on('readable', next)\n  let error\n  const cleanup = eos(\n    stream,\n    {\n      writable: false\n    },\n    (err) => {\n      error = err ? aggregateTwoErrors(error, err) : null\n      callback()\n      callback = nop\n    }\n  )\n  try {\n    while (true) {\n      const chunk = stream.destroyed ? null : stream.read()\n      if (chunk !== null) {\n        yield chunk\n      } else if (error) {\n        throw error\n      } else if (error === null) {\n        return\n      } else {\n        await new Promise(next)\n      }\n    }\n  } catch (err) {\n    error = aggregateTwoErrors(error, err)\n    throw error\n  } finally {\n    if (\n      (error || (options === null || options === undefined ? undefined : options.destroyOnReturn) !== false) &&\n      (error === undefined || stream._readableState.autoDestroy)\n    ) {\n      destroyImpl.destroyer(stream, null)\n    } else {\n      stream.off('readable', next)\n      cleanup()\n    }\n  }\n}\n\n// Making it explicit these properties are not enumerable\n// because otherwise some prototype manipulation in\n// userland will fail.\nObjectDefineProperties(Readable.prototype, {\n  readable: {\n    __proto__: null,\n    get() {\n      const r = this._readableState\n      // r.readable === false means that this is part of a Duplex stream\n      // where the readable side was disabled upon construction.\n      // Compat. The user might manually disable readable side through\n      // deprecated setter.\n      return !!r && r.readable !== false && !r.destroyed && !r.errorEmitted && !r.endEmitted\n    },\n    set(val) {\n      // Backwards compat.\n      if (this._readableState) {\n        this._readableState.readable = !!val\n      }\n    }\n  },\n  readableDidRead: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return this._readableState.dataEmitted\n    }\n  },\n  readableAborted: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return !!(\n        this._readableState.readable !== false &&\n        (this._readableState.destroyed || this._readableState.errored) &&\n        !this._readableState.endEmitted\n      )\n    }\n  },\n  readableHighWaterMark: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return this._readableState.highWaterMark\n    }\n  },\n  readableBuffer: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return this._readableState && this._readableState.buffer\n    }\n  },\n  readableFlowing: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return this._readableState.flowing\n    },\n    set: function (state) {\n      if (this._readableState) {\n        this._readableState.flowing = state\n      }\n    }\n  },\n  readableLength: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState.length\n    }\n  },\n  readableObjectMode: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.objectMode : false\n    }\n  },\n  readableEncoding: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.encoding : null\n    }\n  },\n  errored: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.errored : null\n    }\n  },\n  closed: {\n    __proto__: null,\n    get() {\n      return this._readableState ? this._readableState.closed : false\n    }\n  },\n  destroyed: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.destroyed : false\n    },\n    set(value) {\n      // We ignore the value if the stream\n      // has not been initialized yet.\n      if (!this._readableState) {\n        return\n      }\n\n      // Backward compatibility, the user is explicitly\n      // managing destroyed.\n      this._readableState.destroyed = value\n    }\n  },\n  readableEnded: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.endEmitted : false\n    }\n  }\n})\nObjectDefineProperties(ReadableState.prototype, {\n  // Legacy getter for `pipesCount`.\n  pipesCount: {\n    __proto__: null,\n    get() {\n      return this.pipes.length\n    }\n  },\n  // Legacy property for `paused`.\n  paused: {\n    __proto__: null,\n    get() {\n      return this[kPaused] !== false\n    },\n    set(value) {\n      this[kPaused] = !!value\n    }\n  }\n})\n\n// Exposed for testing purposes only.\nReadable._fromList = fromList\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered.\n  if (state.length === 0) return null\n  let ret\n  if (state.objectMode) ret = state.buffer.shift()\n  else if (!n || n >= state.length) {\n    // Read it all, truncate the list.\n    if (state.decoder) ret = state.buffer.join('')\n    else if (state.buffer.length === 1) ret = state.buffer.first()\n    else ret = state.buffer.concat(state.length)\n    state.buffer.clear()\n  } else {\n    // read part of list.\n    ret = state.buffer.consume(n, state.decoder)\n  }\n  return ret\n}\nfunction endReadable(stream) {\n  const state = stream._readableState\n  debug('endReadable', state.endEmitted)\n  if (!state.endEmitted) {\n    state.ended = true\n    process.nextTick(endReadableNT, state, stream)\n  }\n}\nfunction endReadableNT(state, stream) {\n  debug('endReadableNT', state.endEmitted, state.length)\n\n  // Check that we didn't get one last unshift.\n  if (!state.errored && !state.closeEmitted && !state.endEmitted && state.length === 0) {\n    state.endEmitted = true\n    stream.emit('end')\n    if (stream.writable && stream.allowHalfOpen === false) {\n      process.nextTick(endWritableNT, stream)\n    } else if (state.autoDestroy) {\n      // In case of duplex streams we need a way to detect\n      // if the writable side is ready for autoDestroy as well.\n      const wState = stream._writableState\n      const autoDestroy =\n        !wState ||\n        (wState.autoDestroy &&\n          // We don't expect the writable to ever 'finish'\n          // if writable is explicitly set to false.\n          (wState.finished || wState.writable === false))\n      if (autoDestroy) {\n        stream.destroy()\n      }\n    }\n  }\n}\nfunction endWritableNT(stream) {\n  const writable = stream.writable && !stream.writableEnded && !stream.destroyed\n  if (writable) {\n    stream.end()\n  }\n}\nReadable.from = function (iterable, opts) {\n  return from(Readable, iterable, opts)\n}\nlet webStreamsAdapters\n\n// Lazy to avoid circular references\nfunction lazyWebStreams() {\n  if (webStreamsAdapters === undefined) webStreamsAdapters = {}\n  return webStreamsAdapters\n}\nReadable.fromWeb = function (readableStream, options) {\n  return lazyWebStreams().newStreamReadableFromReadableStream(readableStream, options)\n}\nReadable.toWeb = function (streamReadable, options) {\n  return lazyWebStreams().newReadableStreamFromStreamReadable(streamReadable, options)\n}\nReadable.wrap = function (src, options) {\n  var _ref, _src$readableObjectMo\n  return new Readable({\n    objectMode:\n      (_ref =\n        (_src$readableObjectMo = src.readableObjectMode) !== null && _src$readableObjectMo !== undefined\n          ? _src$readableObjectMo\n          : src.objectMode) !== null && _ref !== undefined\n        ? _ref\n        : true,\n    ...options,\n    destroy(err, callback) {\n      destroyImpl.destroyer(src, err)\n      callback(err)\n    }\n  }).wrap(src)\n}\n","'use strict'\n\nconst { MathFloor, NumberIsInteger } = require('../../ours/primordials')\nconst { validateInteger } = require('../validators')\nconst { ERR_INVALID_ARG_VALUE } = require('../../ours/errors').codes\nlet defaultHighWaterMarkBytes = 16 * 1024\nlet defaultHighWaterMarkObjectMode = 16\nfunction highWaterMarkFrom(options, isDuplex, duplexKey) {\n  return options.highWaterMark != null ? options.highWaterMark : isDuplex ? options[duplexKey] : null\n}\nfunction getDefaultHighWaterMark(objectMode) {\n  return objectMode ? defaultHighWaterMarkObjectMode : defaultHighWaterMarkBytes\n}\nfunction setDefaultHighWaterMark(objectMode, value) {\n  validateInteger(value, 'value', 0)\n  if (objectMode) {\n    defaultHighWaterMarkObjectMode = value\n  } else {\n    defaultHighWaterMarkBytes = value\n  }\n}\nfunction getHighWaterMark(state, options, duplexKey, isDuplex) {\n  const hwm = highWaterMarkFrom(options, isDuplex, duplexKey)\n  if (hwm != null) {\n    if (!NumberIsInteger(hwm) || hwm < 0) {\n      const name = isDuplex ? `options.${duplexKey}` : 'options.highWaterMark'\n      throw new ERR_INVALID_ARG_VALUE(name, hwm)\n    }\n    return MathFloor(hwm)\n  }\n\n  // Default value\n  return getDefaultHighWaterMark(state.objectMode)\n}\nmodule.exports = {\n  getHighWaterMark,\n  getDefaultHighWaterMark,\n  setDefaultHighWaterMark\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict'\n\nconst { ObjectSetPrototypeOf, Symbol } = require('../../ours/primordials')\nmodule.exports = Transform\nconst { ERR_METHOD_NOT_IMPLEMENTED } = require('../../ours/errors').codes\nconst Duplex = require('./duplex')\nconst { getHighWaterMark } = require('./state')\nObjectSetPrototypeOf(Transform.prototype, Duplex.prototype)\nObjectSetPrototypeOf(Transform, Duplex)\nconst kCallback = Symbol('kCallback')\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options)\n\n  // TODO (ronag): This should preferably always be\n  // applied but would be semver-major. Or even better;\n  // make Transform a Readable with the Writable interface.\n  const readableHighWaterMark = options ? getHighWaterMark(this, options, 'readableHighWaterMark', true) : null\n  if (readableHighWaterMark === 0) {\n    // A Duplex will buffer both on the writable and readable side while\n    // a Transform just wants to buffer hwm number of elements. To avoid\n    // buffering twice we disable buffering on the writable side.\n    options = {\n      ...options,\n      highWaterMark: null,\n      readableHighWaterMark,\n      // TODO (ronag): 0 is not optimal since we have\n      // a \"bug\" where we check needDrain before calling _write and not after.\n      // Refs: https://github.com/nodejs/node/pull/32887\n      // Refs: https://github.com/nodejs/node/pull/35941\n      writableHighWaterMark: options.writableHighWaterMark || 0\n    }\n  }\n  Duplex.call(this, options)\n\n  // We have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false\n  this[kCallback] = null\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform\n    if (typeof options.flush === 'function') this._flush = options.flush\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  // Backwards compat. Some Transform streams incorrectly implement _final\n  // instead of or in addition to _flush. By using 'prefinish' instead of\n  // implementing _final we continue supporting this unfortunate use case.\n  this.on('prefinish', prefinish)\n}\nfunction final(cb) {\n  if (typeof this._flush === 'function' && !this.destroyed) {\n    this._flush((er, data) => {\n      if (er) {\n        if (cb) {\n          cb(er)\n        } else {\n          this.destroy(er)\n        }\n        return\n      }\n      if (data != null) {\n        this.push(data)\n      }\n      this.push(null)\n      if (cb) {\n        cb()\n      }\n    })\n  } else {\n    this.push(null)\n    if (cb) {\n      cb()\n    }\n  }\n}\nfunction prefinish() {\n  if (this._final !== final) {\n    final.call(this)\n  }\n}\nTransform.prototype._final = final\nTransform.prototype._transform = function (chunk, encoding, callback) {\n  throw new ERR_METHOD_NOT_IMPLEMENTED('_transform()')\n}\nTransform.prototype._write = function (chunk, encoding, callback) {\n  const rState = this._readableState\n  const wState = this._writableState\n  const length = rState.length\n  this._transform(chunk, encoding, (err, val) => {\n    if (err) {\n      callback(err)\n      return\n    }\n    if (val != null) {\n      this.push(val)\n    }\n    if (\n      wState.ended ||\n      // Backwards compat.\n      length === rState.length ||\n      // Backwards compat.\n      rState.length < rState.highWaterMark\n    ) {\n      callback()\n    } else {\n      this[kCallback] = callback\n    }\n  })\n}\nTransform.prototype._read = function () {\n  if (this[kCallback]) {\n    const callback = this[kCallback]\n    this[kCallback] = null\n    callback()\n  }\n}\n","'use strict'\n\nconst { SymbolAsyncIterator, SymbolIterator, SymbolFor } = require('../../ours/primordials')\n\n// We need to use SymbolFor to make these globally available\n// for interopt with readable-stream, i.e. readable-stream\n// and node core needs to be able to read/write private state\n// from each other for proper interoperability.\nconst kIsDestroyed = SymbolFor('nodejs.stream.destroyed')\nconst kIsErrored = SymbolFor('nodejs.stream.errored')\nconst kIsReadable = SymbolFor('nodejs.stream.readable')\nconst kIsWritable = SymbolFor('nodejs.stream.writable')\nconst kIsDisturbed = SymbolFor('nodejs.stream.disturbed')\nconst kIsClosedPromise = SymbolFor('nodejs.webstream.isClosedPromise')\nconst kControllerErrorFunction = SymbolFor('nodejs.webstream.controllerErrorFunction')\nfunction isReadableNodeStream(obj, strict = false) {\n  var _obj$_readableState\n  return !!(\n    (\n      obj &&\n      typeof obj.pipe === 'function' &&\n      typeof obj.on === 'function' &&\n      (!strict || (typeof obj.pause === 'function' && typeof obj.resume === 'function')) &&\n      (!obj._writableState ||\n        ((_obj$_readableState = obj._readableState) === null || _obj$_readableState === undefined\n          ? undefined\n          : _obj$_readableState.readable) !== false) &&\n      // Duplex\n      (!obj._writableState || obj._readableState)\n    ) // Writable has .pipe.\n  )\n}\n\nfunction isWritableNodeStream(obj) {\n  var _obj$_writableState\n  return !!(\n    (\n      obj &&\n      typeof obj.write === 'function' &&\n      typeof obj.on === 'function' &&\n      (!obj._readableState ||\n        ((_obj$_writableState = obj._writableState) === null || _obj$_writableState === undefined\n          ? undefined\n          : _obj$_writableState.writable) !== false)\n    ) // Duplex\n  )\n}\n\nfunction isDuplexNodeStream(obj) {\n  return !!(\n    obj &&\n    typeof obj.pipe === 'function' &&\n    obj._readableState &&\n    typeof obj.on === 'function' &&\n    typeof obj.write === 'function'\n  )\n}\nfunction isNodeStream(obj) {\n  return (\n    obj &&\n    (obj._readableState ||\n      obj._writableState ||\n      (typeof obj.write === 'function' && typeof obj.on === 'function') ||\n      (typeof obj.pipe === 'function' && typeof obj.on === 'function'))\n  )\n}\nfunction isReadableStream(obj) {\n  return !!(\n    obj &&\n    !isNodeStream(obj) &&\n    typeof obj.pipeThrough === 'function' &&\n    typeof obj.getReader === 'function' &&\n    typeof obj.cancel === 'function'\n  )\n}\nfunction isWritableStream(obj) {\n  return !!(obj && !isNodeStream(obj) && typeof obj.getWriter === 'function' && typeof obj.abort === 'function')\n}\nfunction isTransformStream(obj) {\n  return !!(obj && !isNodeStream(obj) && typeof obj.readable === 'object' && typeof obj.writable === 'object')\n}\nfunction isWebStream(obj) {\n  return isReadableStream(obj) || isWritableStream(obj) || isTransformStream(obj)\n}\nfunction isIterable(obj, isAsync) {\n  if (obj == null) return false\n  if (isAsync === true) return typeof obj[SymbolAsyncIterator] === 'function'\n  if (isAsync === false) return typeof obj[SymbolIterator] === 'function'\n  return typeof obj[SymbolAsyncIterator] === 'function' || typeof obj[SymbolIterator] === 'function'\n}\nfunction isDestroyed(stream) {\n  if (!isNodeStream(stream)) return null\n  const wState = stream._writableState\n  const rState = stream._readableState\n  const state = wState || rState\n  return !!(stream.destroyed || stream[kIsDestroyed] || (state !== null && state !== undefined && state.destroyed))\n}\n\n// Have been end():d.\nfunction isWritableEnded(stream) {\n  if (!isWritableNodeStream(stream)) return null\n  if (stream.writableEnded === true) return true\n  const wState = stream._writableState\n  if (wState !== null && wState !== undefined && wState.errored) return false\n  if (typeof (wState === null || wState === undefined ? undefined : wState.ended) !== 'boolean') return null\n  return wState.ended\n}\n\n// Have emitted 'finish'.\nfunction isWritableFinished(stream, strict) {\n  if (!isWritableNodeStream(stream)) return null\n  if (stream.writableFinished === true) return true\n  const wState = stream._writableState\n  if (wState !== null && wState !== undefined && wState.errored) return false\n  if (typeof (wState === null || wState === undefined ? undefined : wState.finished) !== 'boolean') return null\n  return !!(wState.finished || (strict === false && wState.ended === true && wState.length === 0))\n}\n\n// Have been push(null):d.\nfunction isReadableEnded(stream) {\n  if (!isReadableNodeStream(stream)) return null\n  if (stream.readableEnded === true) return true\n  const rState = stream._readableState\n  if (!rState || rState.errored) return false\n  if (typeof (rState === null || rState === undefined ? undefined : rState.ended) !== 'boolean') return null\n  return rState.ended\n}\n\n// Have emitted 'end'.\nfunction isReadableFinished(stream, strict) {\n  if (!isReadableNodeStream(stream)) return null\n  const rState = stream._readableState\n  if (rState !== null && rState !== undefined && rState.errored) return false\n  if (typeof (rState === null || rState === undefined ? undefined : rState.endEmitted) !== 'boolean') return null\n  return !!(rState.endEmitted || (strict === false && rState.ended === true && rState.length === 0))\n}\nfunction isReadable(stream) {\n  if (stream && stream[kIsReadable] != null) return stream[kIsReadable]\n  if (typeof (stream === null || stream === undefined ? undefined : stream.readable) !== 'boolean') return null\n  if (isDestroyed(stream)) return false\n  return isReadableNodeStream(stream) && stream.readable && !isReadableFinished(stream)\n}\nfunction isWritable(stream) {\n  if (stream && stream[kIsWritable] != null) return stream[kIsWritable]\n  if (typeof (stream === null || stream === undefined ? undefined : stream.writable) !== 'boolean') return null\n  if (isDestroyed(stream)) return false\n  return isWritableNodeStream(stream) && stream.writable && !isWritableEnded(stream)\n}\nfunction isFinished(stream, opts) {\n  if (!isNodeStream(stream)) {\n    return null\n  }\n  if (isDestroyed(stream)) {\n    return true\n  }\n  if ((opts === null || opts === undefined ? undefined : opts.readable) !== false && isReadable(stream)) {\n    return false\n  }\n  if ((opts === null || opts === undefined ? undefined : opts.writable) !== false && isWritable(stream)) {\n    return false\n  }\n  return true\n}\nfunction isWritableErrored(stream) {\n  var _stream$_writableStat, _stream$_writableStat2\n  if (!isNodeStream(stream)) {\n    return null\n  }\n  if (stream.writableErrored) {\n    return stream.writableErrored\n  }\n  return (_stream$_writableStat =\n    (_stream$_writableStat2 = stream._writableState) === null || _stream$_writableStat2 === undefined\n      ? undefined\n      : _stream$_writableStat2.errored) !== null && _stream$_writableStat !== undefined\n    ? _stream$_writableStat\n    : null\n}\nfunction isReadableErrored(stream) {\n  var _stream$_readableStat, _stream$_readableStat2\n  if (!isNodeStream(stream)) {\n    return null\n  }\n  if (stream.readableErrored) {\n    return stream.readableErrored\n  }\n  return (_stream$_readableStat =\n    (_stream$_readableStat2 = stream._readableState) === null || _stream$_readableStat2 === undefined\n      ? undefined\n      : _stream$_readableStat2.errored) !== null && _stream$_readableStat !== undefined\n    ? _stream$_readableStat\n    : null\n}\nfunction isClosed(stream) {\n  if (!isNodeStream(stream)) {\n    return null\n  }\n  if (typeof stream.closed === 'boolean') {\n    return stream.closed\n  }\n  const wState = stream._writableState\n  const rState = stream._readableState\n  if (\n    typeof (wState === null || wState === undefined ? undefined : wState.closed) === 'boolean' ||\n    typeof (rState === null || rState === undefined ? undefined : rState.closed) === 'boolean'\n  ) {\n    return (\n      (wState === null || wState === undefined ? undefined : wState.closed) ||\n      (rState === null || rState === undefined ? undefined : rState.closed)\n    )\n  }\n  if (typeof stream._closed === 'boolean' && isOutgoingMessage(stream)) {\n    return stream._closed\n  }\n  return null\n}\nfunction isOutgoingMessage(stream) {\n  return (\n    typeof stream._closed === 'boolean' &&\n    typeof stream._defaultKeepAlive === 'boolean' &&\n    typeof stream._removedConnection === 'boolean' &&\n    typeof stream._removedContLen === 'boolean'\n  )\n}\nfunction isServerResponse(stream) {\n  return typeof stream._sent100 === 'boolean' && isOutgoingMessage(stream)\n}\nfunction isServerRequest(stream) {\n  var _stream$req\n  return (\n    typeof stream._consuming === 'boolean' &&\n    typeof stream._dumped === 'boolean' &&\n    ((_stream$req = stream.req) === null || _stream$req === undefined ? undefined : _stream$req.upgradeOrConnect) ===\n      undefined\n  )\n}\nfunction willEmitClose(stream) {\n  if (!isNodeStream(stream)) return null\n  const wState = stream._writableState\n  const rState = stream._readableState\n  const state = wState || rState\n  return (\n    (!state && isServerResponse(stream)) || !!(state && state.autoDestroy && state.emitClose && state.closed === false)\n  )\n}\nfunction isDisturbed(stream) {\n  var _stream$kIsDisturbed\n  return !!(\n    stream &&\n    ((_stream$kIsDisturbed = stream[kIsDisturbed]) !== null && _stream$kIsDisturbed !== undefined\n      ? _stream$kIsDisturbed\n      : stream.readableDidRead || stream.readableAborted)\n  )\n}\nfunction isErrored(stream) {\n  var _ref,\n    _ref2,\n    _ref3,\n    _ref4,\n    _ref5,\n    _stream$kIsErrored,\n    _stream$_readableStat3,\n    _stream$_writableStat3,\n    _stream$_readableStat4,\n    _stream$_writableStat4\n  return !!(\n    stream &&\n    ((_ref =\n      (_ref2 =\n        (_ref3 =\n          (_ref4 =\n            (_ref5 =\n              (_stream$kIsErrored = stream[kIsErrored]) !== null && _stream$kIsErrored !== undefined\n                ? _stream$kIsErrored\n                : stream.readableErrored) !== null && _ref5 !== undefined\n              ? _ref5\n              : stream.writableErrored) !== null && _ref4 !== undefined\n            ? _ref4\n            : (_stream$_readableStat3 = stream._readableState) === null || _stream$_readableStat3 === undefined\n            ? undefined\n            : _stream$_readableStat3.errorEmitted) !== null && _ref3 !== undefined\n          ? _ref3\n          : (_stream$_writableStat3 = stream._writableState) === null || _stream$_writableStat3 === undefined\n          ? undefined\n          : _stream$_writableStat3.errorEmitted) !== null && _ref2 !== undefined\n        ? _ref2\n        : (_stream$_readableStat4 = stream._readableState) === null || _stream$_readableStat4 === undefined\n        ? undefined\n        : _stream$_readableStat4.errored) !== null && _ref !== undefined\n      ? _ref\n      : (_stream$_writableStat4 = stream._writableState) === null || _stream$_writableStat4 === undefined\n      ? undefined\n      : _stream$_writableStat4.errored)\n  )\n}\nmodule.exports = {\n  isDestroyed,\n  kIsDestroyed,\n  isDisturbed,\n  kIsDisturbed,\n  isErrored,\n  kIsErrored,\n  isReadable,\n  kIsReadable,\n  kIsClosedPromise,\n  kControllerErrorFunction,\n  kIsWritable,\n  isClosed,\n  isDuplexNodeStream,\n  isFinished,\n  isIterable,\n  isReadableNodeStream,\n  isReadableStream,\n  isReadableEnded,\n  isReadableFinished,\n  isReadableErrored,\n  isNodeStream,\n  isWebStream,\n  isWritable,\n  isWritableNodeStream,\n  isWritableStream,\n  isWritableEnded,\n  isWritableFinished,\n  isWritableErrored,\n  isServerRequest,\n  isServerResponse,\n  willEmitClose,\n  isTransformStream\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n;('use strict')\nconst {\n  ArrayPrototypeSlice,\n  Error,\n  FunctionPrototypeSymbolHasInstance,\n  ObjectDefineProperty,\n  ObjectDefineProperties,\n  ObjectSetPrototypeOf,\n  StringPrototypeToLowerCase,\n  Symbol,\n  SymbolHasInstance\n} = require('../../ours/primordials')\nmodule.exports = Writable\nWritable.WritableState = WritableState\nconst { EventEmitter: EE } = require('events')\nconst Stream = require('./legacy').Stream\nconst { Buffer } = require('buffer')\nconst destroyImpl = require('./destroy')\nconst { addAbortSignal } = require('./add-abort-signal')\nconst { getHighWaterMark, getDefaultHighWaterMark } = require('./state')\nconst {\n  ERR_INVALID_ARG_TYPE,\n  ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_MULTIPLE_CALLBACK,\n  ERR_STREAM_CANNOT_PIPE,\n  ERR_STREAM_DESTROYED,\n  ERR_STREAM_ALREADY_FINISHED,\n  ERR_STREAM_NULL_VALUES,\n  ERR_STREAM_WRITE_AFTER_END,\n  ERR_UNKNOWN_ENCODING\n} = require('../../ours/errors').codes\nconst { errorOrDestroy } = destroyImpl\nObjectSetPrototypeOf(Writable.prototype, Stream.prototype)\nObjectSetPrototypeOf(Writable, Stream)\nfunction nop() {}\nconst kOnFinished = Symbol('kOnFinished')\nfunction WritableState(options, stream, isDuplex) {\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream,\n  // e.g. options.readableObjectMode vs. options.writableObjectMode, etc.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof require('./duplex')\n\n  // Object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!(options && options.objectMode)\n  if (isDuplex) this.objectMode = this.objectMode || !!(options && options.writableObjectMode)\n\n  // The point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write().\n  this.highWaterMark = options\n    ? getHighWaterMark(this, options, 'writableHighWaterMark', isDuplex)\n    : getDefaultHighWaterMark(false)\n\n  // if _final has been called.\n  this.finalCalled = false\n\n  // drain event flag.\n  this.needDrain = false\n  // At the start of calling end()\n  this.ending = false\n  // When end() has been called, and returned.\n  this.ended = false\n  // When 'finish' is emitted.\n  this.finished = false\n\n  // Has it been destroyed\n  this.destroyed = false\n\n  // Should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  const noDecode = !!(options && options.decodeStrings === false)\n  this.decodeStrings = !noDecode\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = (options && options.defaultEncoding) || 'utf8'\n\n  // Not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0\n\n  // A flag to see when we're in the middle of a write.\n  this.writing = false\n\n  // When true all writes will be buffered until .uncork() call.\n  this.corked = 0\n\n  // A flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true\n\n  // A flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false\n\n  // The callback that's passed to _write(chunk, cb).\n  this.onwrite = onwrite.bind(undefined, stream)\n\n  // The callback that the user supplies to write(chunk, encoding, cb).\n  this.writecb = null\n\n  // The amount that is being written when _write is called.\n  this.writelen = 0\n\n  // Storage for data passed to the afterWrite() callback in case of\n  // synchronous _write() completion.\n  this.afterWriteTickInfo = null\n  resetBuffer(this)\n\n  // Number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted.\n  this.pendingcb = 0\n\n  // Stream is still being constructed and cannot be\n  // destroyed until construction finished or failed.\n  // Async construction is opt in, therefore we start as\n  // constructed.\n  this.constructed = true\n\n  // Emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams.\n  this.prefinished = false\n\n  // True if the error was already emitted and should not be thrown again.\n  this.errorEmitted = false\n\n  // Should close be emitted on destroy. Defaults to true.\n  this.emitClose = !options || options.emitClose !== false\n\n  // Should .destroy() be called after 'finish' (and potentially 'end').\n  this.autoDestroy = !options || options.autoDestroy !== false\n\n  // Indicates whether the stream has errored. When true all write() calls\n  // should return false. This is needed since when autoDestroy\n  // is disabled we need a way to tell whether the stream has failed.\n  this.errored = null\n\n  // Indicates whether the stream has finished destroying.\n  this.closed = false\n\n  // True if close has been emitted or would have been emitted\n  // depending on emitClose.\n  this.closeEmitted = false\n  this[kOnFinished] = []\n}\nfunction resetBuffer(state) {\n  state.buffered = []\n  state.bufferedIndex = 0\n  state.allBuffers = true\n  state.allNoop = true\n}\nWritableState.prototype.getBuffer = function getBuffer() {\n  return ArrayPrototypeSlice(this.buffered, this.bufferedIndex)\n}\nObjectDefineProperty(WritableState.prototype, 'bufferedRequestCount', {\n  __proto__: null,\n  get() {\n    return this.buffered.length - this.bufferedIndex\n  }\n})\nfunction Writable(options) {\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the WritableState constructor, at least with V8 6.5.\n  const isDuplex = this instanceof require('./duplex')\n  if (!isDuplex && !FunctionPrototypeSymbolHasInstance(Writable, this)) return new Writable(options)\n  this._writableState = new WritableState(options, this, isDuplex)\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write\n    if (typeof options.writev === 'function') this._writev = options.writev\n    if (typeof options.destroy === 'function') this._destroy = options.destroy\n    if (typeof options.final === 'function') this._final = options.final\n    if (typeof options.construct === 'function') this._construct = options.construct\n    if (options.signal) addAbortSignal(options.signal, this)\n  }\n  Stream.call(this, options)\n  destroyImpl.construct(this, () => {\n    const state = this._writableState\n    if (!state.writing) {\n      clearBuffer(this, state)\n    }\n    finishMaybe(this, state)\n  })\n}\nObjectDefineProperty(Writable, SymbolHasInstance, {\n  __proto__: null,\n  value: function (object) {\n    if (FunctionPrototypeSymbolHasInstance(this, object)) return true\n    if (this !== Writable) return false\n    return object && object._writableState instanceof WritableState\n  }\n})\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  errorOrDestroy(this, new ERR_STREAM_CANNOT_PIPE())\n}\nfunction _write(stream, chunk, encoding, cb) {\n  const state = stream._writableState\n  if (typeof encoding === 'function') {\n    cb = encoding\n    encoding = state.defaultEncoding\n  } else {\n    if (!encoding) encoding = state.defaultEncoding\n    else if (encoding !== 'buffer' && !Buffer.isEncoding(encoding)) throw new ERR_UNKNOWN_ENCODING(encoding)\n    if (typeof cb !== 'function') cb = nop\n  }\n  if (chunk === null) {\n    throw new ERR_STREAM_NULL_VALUES()\n  } else if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      if (state.decodeStrings !== false) {\n        chunk = Buffer.from(chunk, encoding)\n        encoding = 'buffer'\n      }\n    } else if (chunk instanceof Buffer) {\n      encoding = 'buffer'\n    } else if (Stream._isUint8Array(chunk)) {\n      chunk = Stream._uint8ArrayToBuffer(chunk)\n      encoding = 'buffer'\n    } else {\n      throw new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk)\n    }\n  }\n  let err\n  if (state.ending) {\n    err = new ERR_STREAM_WRITE_AFTER_END()\n  } else if (state.destroyed) {\n    err = new ERR_STREAM_DESTROYED('write')\n  }\n  if (err) {\n    process.nextTick(cb, err)\n    errorOrDestroy(stream, err, true)\n    return err\n  }\n  state.pendingcb++\n  return writeOrBuffer(stream, state, chunk, encoding, cb)\n}\nWritable.prototype.write = function (chunk, encoding, cb) {\n  return _write(this, chunk, encoding, cb) === true\n}\nWritable.prototype.cork = function () {\n  this._writableState.corked++\n}\nWritable.prototype.uncork = function () {\n  const state = this._writableState\n  if (state.corked) {\n    state.corked--\n    if (!state.writing) clearBuffer(this, state)\n  }\n}\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = StringPrototypeToLowerCase(encoding)\n  if (!Buffer.isEncoding(encoding)) throw new ERR_UNKNOWN_ENCODING(encoding)\n  this._writableState.defaultEncoding = encoding\n  return this\n}\n\n// If we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, chunk, encoding, callback) {\n  const len = state.objectMode ? 1 : chunk.length\n  state.length += len\n\n  // stream._write resets state.length\n  const ret = state.length < state.highWaterMark\n  // We must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true\n  if (state.writing || state.corked || state.errored || !state.constructed) {\n    state.buffered.push({\n      chunk,\n      encoding,\n      callback\n    })\n    if (state.allBuffers && encoding !== 'buffer') {\n      state.allBuffers = false\n    }\n    if (state.allNoop && callback !== nop) {\n      state.allNoop = false\n    }\n  } else {\n    state.writelen = len\n    state.writecb = callback\n    state.writing = true\n    state.sync = true\n    stream._write(chunk, encoding, state.onwrite)\n    state.sync = false\n  }\n\n  // Return false if errored or destroyed in order to break\n  // any synchronous while(stream.write(data)) loops.\n  return ret && !state.errored && !state.destroyed\n}\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len\n  state.writecb = cb\n  state.writing = true\n  state.sync = true\n  if (state.destroyed) state.onwrite(new ERR_STREAM_DESTROYED('write'))\n  else if (writev) stream._writev(chunk, state.onwrite)\n  else stream._write(chunk, encoding, state.onwrite)\n  state.sync = false\n}\nfunction onwriteError(stream, state, er, cb) {\n  --state.pendingcb\n  cb(er)\n  // Ensure callbacks are invoked even when autoDestroy is\n  // not enabled. Passing `er` here doesn't make sense since\n  // it's related to one specific write, not to the buffered\n  // writes.\n  errorBuffer(state)\n  // This can emit error, but error must always follow cb.\n  errorOrDestroy(stream, er)\n}\nfunction onwrite(stream, er) {\n  const state = stream._writableState\n  const sync = state.sync\n  const cb = state.writecb\n  if (typeof cb !== 'function') {\n    errorOrDestroy(stream, new ERR_MULTIPLE_CALLBACK())\n    return\n  }\n  state.writing = false\n  state.writecb = null\n  state.length -= state.writelen\n  state.writelen = 0\n  if (er) {\n    // Avoid V8 leak, https://github.com/nodejs/node/pull/34103#issuecomment-652002364\n    er.stack // eslint-disable-line no-unused-expressions\n\n    if (!state.errored) {\n      state.errored = er\n    }\n\n    // In case of duplex streams we need to notify the readable side of the\n    // error.\n    if (stream._readableState && !stream._readableState.errored) {\n      stream._readableState.errored = er\n    }\n    if (sync) {\n      process.nextTick(onwriteError, stream, state, er, cb)\n    } else {\n      onwriteError(stream, state, er, cb)\n    }\n  } else {\n    if (state.buffered.length > state.bufferedIndex) {\n      clearBuffer(stream, state)\n    }\n    if (sync) {\n      // It is a common case that the callback passed to .write() is always\n      // the same. In that case, we do not schedule a new nextTick(), but\n      // rather just increase a counter, to improve performance and avoid\n      // memory allocations.\n      if (state.afterWriteTickInfo !== null && state.afterWriteTickInfo.cb === cb) {\n        state.afterWriteTickInfo.count++\n      } else {\n        state.afterWriteTickInfo = {\n          count: 1,\n          cb,\n          stream,\n          state\n        }\n        process.nextTick(afterWriteTick, state.afterWriteTickInfo)\n      }\n    } else {\n      afterWrite(stream, state, 1, cb)\n    }\n  }\n}\nfunction afterWriteTick({ stream, state, count, cb }) {\n  state.afterWriteTickInfo = null\n  return afterWrite(stream, state, count, cb)\n}\nfunction afterWrite(stream, state, count, cb) {\n  const needDrain = !state.ending && !stream.destroyed && state.length === 0 && state.needDrain\n  if (needDrain) {\n    state.needDrain = false\n    stream.emit('drain')\n  }\n  while (count-- > 0) {\n    state.pendingcb--\n    cb()\n  }\n  if (state.destroyed) {\n    errorBuffer(state)\n  }\n  finishMaybe(stream, state)\n}\n\n// If there's something in the buffer waiting, then invoke callbacks.\nfunction errorBuffer(state) {\n  if (state.writing) {\n    return\n  }\n  for (let n = state.bufferedIndex; n < state.buffered.length; ++n) {\n    var _state$errored\n    const { chunk, callback } = state.buffered[n]\n    const len = state.objectMode ? 1 : chunk.length\n    state.length -= len\n    callback(\n      (_state$errored = state.errored) !== null && _state$errored !== undefined\n        ? _state$errored\n        : new ERR_STREAM_DESTROYED('write')\n    )\n  }\n  const onfinishCallbacks = state[kOnFinished].splice(0)\n  for (let i = 0; i < onfinishCallbacks.length; i++) {\n    var _state$errored2\n    onfinishCallbacks[i](\n      (_state$errored2 = state.errored) !== null && _state$errored2 !== undefined\n        ? _state$errored2\n        : new ERR_STREAM_DESTROYED('end')\n    )\n  }\n  resetBuffer(state)\n}\n\n// If there's something in the buffer waiting, then process it.\nfunction clearBuffer(stream, state) {\n  if (state.corked || state.bufferProcessing || state.destroyed || !state.constructed) {\n    return\n  }\n  const { buffered, bufferedIndex, objectMode } = state\n  const bufferedLength = buffered.length - bufferedIndex\n  if (!bufferedLength) {\n    return\n  }\n  let i = bufferedIndex\n  state.bufferProcessing = true\n  if (bufferedLength > 1 && stream._writev) {\n    state.pendingcb -= bufferedLength - 1\n    const callback = state.allNoop\n      ? nop\n      : (err) => {\n          for (let n = i; n < buffered.length; ++n) {\n            buffered[n].callback(err)\n          }\n        }\n    // Make a copy of `buffered` if it's going to be used by `callback` above,\n    // since `doWrite` will mutate the array.\n    const chunks = state.allNoop && i === 0 ? buffered : ArrayPrototypeSlice(buffered, i)\n    chunks.allBuffers = state.allBuffers\n    doWrite(stream, state, true, state.length, chunks, '', callback)\n    resetBuffer(state)\n  } else {\n    do {\n      const { chunk, encoding, callback } = buffered[i]\n      buffered[i++] = null\n      const len = objectMode ? 1 : chunk.length\n      doWrite(stream, state, false, len, chunk, encoding, callback)\n    } while (i < buffered.length && !state.writing)\n    if (i === buffered.length) {\n      resetBuffer(state)\n    } else if (i > 256) {\n      buffered.splice(0, i)\n      state.bufferedIndex = 0\n    } else {\n      state.bufferedIndex = i\n    }\n  }\n  state.bufferProcessing = false\n}\nWritable.prototype._write = function (chunk, encoding, cb) {\n  if (this._writev) {\n    this._writev(\n      [\n        {\n          chunk,\n          encoding\n        }\n      ],\n      cb\n    )\n  } else {\n    throw new ERR_METHOD_NOT_IMPLEMENTED('_write()')\n  }\n}\nWritable.prototype._writev = null\nWritable.prototype.end = function (chunk, encoding, cb) {\n  const state = this._writableState\n  if (typeof chunk === 'function') {\n    cb = chunk\n    chunk = null\n    encoding = null\n  } else if (typeof encoding === 'function') {\n    cb = encoding\n    encoding = null\n  }\n  let err\n  if (chunk !== null && chunk !== undefined) {\n    const ret = _write(this, chunk, encoding)\n    if (ret instanceof Error) {\n      err = ret\n    }\n  }\n\n  // .end() fully uncorks.\n  if (state.corked) {\n    state.corked = 1\n    this.uncork()\n  }\n  if (err) {\n    // Do nothing...\n  } else if (!state.errored && !state.ending) {\n    // This is forgiving in terms of unnecessary calls to end() and can hide\n    // logic errors. However, usually such errors are harmless and causing a\n    // hard error can be disproportionately destructive. It is not always\n    // trivial for the user to determine whether end() needs to be called\n    // or not.\n\n    state.ending = true\n    finishMaybe(this, state, true)\n    state.ended = true\n  } else if (state.finished) {\n    err = new ERR_STREAM_ALREADY_FINISHED('end')\n  } else if (state.destroyed) {\n    err = new ERR_STREAM_DESTROYED('end')\n  }\n  if (typeof cb === 'function') {\n    if (err || state.finished) {\n      process.nextTick(cb, err)\n    } else {\n      state[kOnFinished].push(cb)\n    }\n  }\n  return this\n}\nfunction needFinish(state) {\n  return (\n    state.ending &&\n    !state.destroyed &&\n    state.constructed &&\n    state.length === 0 &&\n    !state.errored &&\n    state.buffered.length === 0 &&\n    !state.finished &&\n    !state.writing &&\n    !state.errorEmitted &&\n    !state.closeEmitted\n  )\n}\nfunction callFinal(stream, state) {\n  let called = false\n  function onFinish(err) {\n    if (called) {\n      errorOrDestroy(stream, err !== null && err !== undefined ? err : ERR_MULTIPLE_CALLBACK())\n      return\n    }\n    called = true\n    state.pendingcb--\n    if (err) {\n      const onfinishCallbacks = state[kOnFinished].splice(0)\n      for (let i = 0; i < onfinishCallbacks.length; i++) {\n        onfinishCallbacks[i](err)\n      }\n      errorOrDestroy(stream, err, state.sync)\n    } else if (needFinish(state)) {\n      state.prefinished = true\n      stream.emit('prefinish')\n      // Backwards compat. Don't check state.sync here.\n      // Some streams assume 'finish' will be emitted\n      // asynchronously relative to _final callback.\n      state.pendingcb++\n      process.nextTick(finish, stream, state)\n    }\n  }\n  state.sync = true\n  state.pendingcb++\n  try {\n    stream._final(onFinish)\n  } catch (err) {\n    onFinish(err)\n  }\n  state.sync = false\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function' && !state.destroyed) {\n      state.finalCalled = true\n      callFinal(stream, state)\n    } else {\n      state.prefinished = true\n      stream.emit('prefinish')\n    }\n  }\n}\nfunction finishMaybe(stream, state, sync) {\n  if (needFinish(state)) {\n    prefinish(stream, state)\n    if (state.pendingcb === 0) {\n      if (sync) {\n        state.pendingcb++\n        process.nextTick(\n          (stream, state) => {\n            if (needFinish(state)) {\n              finish(stream, state)\n            } else {\n              state.pendingcb--\n            }\n          },\n          stream,\n          state\n        )\n      } else if (needFinish(state)) {\n        state.pendingcb++\n        finish(stream, state)\n      }\n    }\n  }\n}\nfunction finish(stream, state) {\n  state.pendingcb--\n  state.finished = true\n  const onfinishCallbacks = state[kOnFinished].splice(0)\n  for (let i = 0; i < onfinishCallbacks.length; i++) {\n    onfinishCallbacks[i]()\n  }\n  stream.emit('finish')\n  if (state.autoDestroy) {\n    // In case of duplex streams we need a way to detect\n    // if the readable side is ready for autoDestroy as well.\n    const rState = stream._readableState\n    const autoDestroy =\n      !rState ||\n      (rState.autoDestroy &&\n        // We don't expect the readable to ever 'end'\n        // if readable is explicitly set to false.\n        (rState.endEmitted || rState.readable === false))\n    if (autoDestroy) {\n      stream.destroy()\n    }\n  }\n}\nObjectDefineProperties(Writable.prototype, {\n  closed: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.closed : false\n    }\n  },\n  destroyed: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.destroyed : false\n    },\n    set(value) {\n      // Backward compatibility, the user is explicitly managing destroyed.\n      if (this._writableState) {\n        this._writableState.destroyed = value\n      }\n    }\n  },\n  writable: {\n    __proto__: null,\n    get() {\n      const w = this._writableState\n      // w.writable === false means that this is part of a Duplex stream\n      // where the writable side was disabled upon construction.\n      // Compat. The user might manually disable writable side through\n      // deprecated setter.\n      return !!w && w.writable !== false && !w.destroyed && !w.errored && !w.ending && !w.ended\n    },\n    set(val) {\n      // Backwards compatible.\n      if (this._writableState) {\n        this._writableState.writable = !!val\n      }\n    }\n  },\n  writableFinished: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.finished : false\n    }\n  },\n  writableObjectMode: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.objectMode : false\n    }\n  },\n  writableBuffer: {\n    __proto__: null,\n    get() {\n      return this._writableState && this._writableState.getBuffer()\n    }\n  },\n  writableEnded: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.ending : false\n    }\n  },\n  writableNeedDrain: {\n    __proto__: null,\n    get() {\n      const wState = this._writableState\n      if (!wState) return false\n      return !wState.destroyed && !wState.ending && wState.needDrain\n    }\n  },\n  writableHighWaterMark: {\n    __proto__: null,\n    get() {\n      return this._writableState && this._writableState.highWaterMark\n    }\n  },\n  writableCorked: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.corked : 0\n    }\n  },\n  writableLength: {\n    __proto__: null,\n    get() {\n      return this._writableState && this._writableState.length\n    }\n  },\n  errored: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._writableState ? this._writableState.errored : null\n    }\n  },\n  writableAborted: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return !!(\n        this._writableState.writable !== false &&\n        (this._writableState.destroyed || this._writableState.errored) &&\n        !this._writableState.finished\n      )\n    }\n  }\n})\nconst destroy = destroyImpl.destroy\nWritable.prototype.destroy = function (err, cb) {\n  const state = this._writableState\n\n  // Invoke pending callbacks.\n  if (!state.destroyed && (state.bufferedIndex < state.buffered.length || state[kOnFinished].length)) {\n    process.nextTick(errorBuffer, state)\n  }\n  destroy.call(this, err, cb)\n  return this\n}\nWritable.prototype._undestroy = destroyImpl.undestroy\nWritable.prototype._destroy = function (err, cb) {\n  cb(err)\n}\nWritable.prototype[EE.captureRejectionSymbol] = function (err) {\n  this.destroy(err)\n}\nlet webStreamsAdapters\n\n// Lazy to avoid circular references\nfunction lazyWebStreams() {\n  if (webStreamsAdapters === undefined) webStreamsAdapters = {}\n  return webStreamsAdapters\n}\nWritable.fromWeb = function (writableStream, options) {\n  return lazyWebStreams().newStreamWritableFromWritableStream(writableStream, options)\n}\nWritable.toWeb = function (streamWritable) {\n  return lazyWebStreams().newWritableStreamFromStreamWritable(streamWritable)\n}\n","/* eslint jsdoc/require-jsdoc: \"error\" */\n\n'use strict'\n\nconst {\n  ArrayIsArray,\n  ArrayPrototypeIncludes,\n  ArrayPrototypeJoin,\n  ArrayPrototypeMap,\n  NumberIsInteger,\n  NumberIsNaN,\n  NumberMAX_SAFE_INTEGER,\n  NumberMIN_SAFE_INTEGER,\n  NumberParseInt,\n  ObjectPrototypeHasOwnProperty,\n  RegExpPrototypeExec,\n  String,\n  StringPrototypeToUpperCase,\n  StringPrototypeTrim\n} = require('../ours/primordials')\nconst {\n  hideStackFrames,\n  codes: { ERR_SOCKET_BAD_PORT, ERR_INVALID_ARG_TYPE, ERR_INVALID_ARG_VALUE, ERR_OUT_OF_RANGE, ERR_UNKNOWN_SIGNAL }\n} = require('../ours/errors')\nconst { normalizeEncoding } = require('../ours/util')\nconst { isAsyncFunction, isArrayBufferView } = require('../ours/util').types\nconst signals = {}\n\n/**\n * @param {*} value\n * @returns {boolean}\n */\nfunction isInt32(value) {\n  return value === (value | 0)\n}\n\n/**\n * @param {*} value\n * @returns {boolean}\n */\nfunction isUint32(value) {\n  return value === value >>> 0\n}\nconst octalReg = /^[0-7]+$/\nconst modeDesc = 'must be a 32-bit unsigned integer or an octal string'\n\n/**\n * Parse and validate values that will be converted into mode_t (the S_*\n * constants). Only valid numbers and octal strings are allowed. They could be\n * converted to 32-bit unsigned integers or non-negative signed integers in the\n * C++ land, but any value higher than 0o777 will result in platform-specific\n * behaviors.\n * @param {*} value Values to be validated\n * @param {string} name Name of the argument\n * @param {number} [def] If specified, will be returned for invalid values\n * @returns {number}\n */\nfunction parseFileMode(value, name, def) {\n  if (typeof value === 'undefined') {\n    value = def\n  }\n  if (typeof value === 'string') {\n    if (RegExpPrototypeExec(octalReg, value) === null) {\n      throw new ERR_INVALID_ARG_VALUE(name, value, modeDesc)\n    }\n    value = NumberParseInt(value, 8)\n  }\n  validateUint32(value, name)\n  return value\n}\n\n/**\n * @callback validateInteger\n * @param {*} value\n * @param {string} name\n * @param {number} [min]\n * @param {number} [max]\n * @returns {asserts value is number}\n */\n\n/** @type {validateInteger} */\nconst validateInteger = hideStackFrames((value, name, min = NumberMIN_SAFE_INTEGER, max = NumberMAX_SAFE_INTEGER) => {\n  if (typeof value !== 'number') throw new ERR_INVALID_ARG_TYPE(name, 'number', value)\n  if (!NumberIsInteger(value)) throw new ERR_OUT_OF_RANGE(name, 'an integer', value)\n  if (value < min || value > max) throw new ERR_OUT_OF_RANGE(name, `>= ${min} && <= ${max}`, value)\n})\n\n/**\n * @callback validateInt32\n * @param {*} value\n * @param {string} name\n * @param {number} [min]\n * @param {number} [max]\n * @returns {asserts value is number}\n */\n\n/** @type {validateInt32} */\nconst validateInt32 = hideStackFrames((value, name, min = -2147483648, max = 2147483647) => {\n  // The defaults for min and max correspond to the limits of 32-bit integers.\n  if (typeof value !== 'number') {\n    throw new ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n  if (!NumberIsInteger(value)) {\n    throw new ERR_OUT_OF_RANGE(name, 'an integer', value)\n  }\n  if (value < min || value > max) {\n    throw new ERR_OUT_OF_RANGE(name, `>= ${min} && <= ${max}`, value)\n  }\n})\n\n/**\n * @callback validateUint32\n * @param {*} value\n * @param {string} name\n * @param {number|boolean} [positive=false]\n * @returns {asserts value is number}\n */\n\n/** @type {validateUint32} */\nconst validateUint32 = hideStackFrames((value, name, positive = false) => {\n  if (typeof value !== 'number') {\n    throw new ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n  if (!NumberIsInteger(value)) {\n    throw new ERR_OUT_OF_RANGE(name, 'an integer', value)\n  }\n  const min = positive ? 1 : 0\n  // 2 ** 32 === 4294967296\n  const max = 4294967295\n  if (value < min || value > max) {\n    throw new ERR_OUT_OF_RANGE(name, `>= ${min} && <= ${max}`, value)\n  }\n})\n\n/**\n * @callback validateString\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is string}\n */\n\n/** @type {validateString} */\nfunction validateString(value, name) {\n  if (typeof value !== 'string') throw new ERR_INVALID_ARG_TYPE(name, 'string', value)\n}\n\n/**\n * @callback validateNumber\n * @param {*} value\n * @param {string} name\n * @param {number} [min]\n * @param {number} [max]\n * @returns {asserts value is number}\n */\n\n/** @type {validateNumber} */\nfunction validateNumber(value, name, min = undefined, max) {\n  if (typeof value !== 'number') throw new ERR_INVALID_ARG_TYPE(name, 'number', value)\n  if (\n    (min != null && value < min) ||\n    (max != null && value > max) ||\n    ((min != null || max != null) && NumberIsNaN(value))\n  ) {\n    throw new ERR_OUT_OF_RANGE(\n      name,\n      `${min != null ? `>= ${min}` : ''}${min != null && max != null ? ' && ' : ''}${max != null ? `<= ${max}` : ''}`,\n      value\n    )\n  }\n}\n\n/**\n * @callback validateOneOf\n * @template T\n * @param {T} value\n * @param {string} name\n * @param {T[]} oneOf\n */\n\n/** @type {validateOneOf} */\nconst validateOneOf = hideStackFrames((value, name, oneOf) => {\n  if (!ArrayPrototypeIncludes(oneOf, value)) {\n    const allowed = ArrayPrototypeJoin(\n      ArrayPrototypeMap(oneOf, (v) => (typeof v === 'string' ? `'${v}'` : String(v))),\n      ', '\n    )\n    const reason = 'must be one of: ' + allowed\n    throw new ERR_INVALID_ARG_VALUE(name, value, reason)\n  }\n})\n\n/**\n * @callback validateBoolean\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is boolean}\n */\n\n/** @type {validateBoolean} */\nfunction validateBoolean(value, name) {\n  if (typeof value !== 'boolean') throw new ERR_INVALID_ARG_TYPE(name, 'boolean', value)\n}\n\n/**\n * @param {any} options\n * @param {string} key\n * @param {boolean} defaultValue\n * @returns {boolean}\n */\nfunction getOwnPropertyValueOrDefault(options, key, defaultValue) {\n  return options == null || !ObjectPrototypeHasOwnProperty(options, key) ? defaultValue : options[key]\n}\n\n/**\n * @callback validateObject\n * @param {*} value\n * @param {string} name\n * @param {{\n *   allowArray?: boolean,\n *   allowFunction?: boolean,\n *   nullable?: boolean\n * }} [options]\n */\n\n/** @type {validateObject} */\nconst validateObject = hideStackFrames((value, name, options = null) => {\n  const allowArray = getOwnPropertyValueOrDefault(options, 'allowArray', false)\n  const allowFunction = getOwnPropertyValueOrDefault(options, 'allowFunction', false)\n  const nullable = getOwnPropertyValueOrDefault(options, 'nullable', false)\n  if (\n    (!nullable && value === null) ||\n    (!allowArray && ArrayIsArray(value)) ||\n    (typeof value !== 'object' && (!allowFunction || typeof value !== 'function'))\n  ) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'Object', value)\n  }\n})\n\n/**\n * @callback validateDictionary - We are using the Web IDL Standard definition\n *                                of \"dictionary\" here, which means any value\n *                                whose Type is either Undefined, Null, or\n *                                Object (which includes functions).\n * @param {*} value\n * @param {string} name\n * @see https://webidl.spec.whatwg.org/#es-dictionary\n * @see https://tc39.es/ecma262/#table-typeof-operator-results\n */\n\n/** @type {validateDictionary} */\nconst validateDictionary = hideStackFrames((value, name) => {\n  if (value != null && typeof value !== 'object' && typeof value !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE(name, 'a dictionary', value)\n  }\n})\n\n/**\n * @callback validateArray\n * @param {*} value\n * @param {string} name\n * @param {number} [minLength]\n * @returns {asserts value is any[]}\n */\n\n/** @type {validateArray} */\nconst validateArray = hideStackFrames((value, name, minLength = 0) => {\n  if (!ArrayIsArray(value)) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'Array', value)\n  }\n  if (value.length < minLength) {\n    const reason = `must be longer than ${minLength}`\n    throw new ERR_INVALID_ARG_VALUE(name, value, reason)\n  }\n})\n\n/**\n * @callback validateStringArray\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is string[]}\n */\n\n/** @type {validateStringArray} */\nfunction validateStringArray(value, name) {\n  validateArray(value, name)\n  for (let i = 0; i < value.length; i++) {\n    validateString(value[i], `${name}[${i}]`)\n  }\n}\n\n/**\n * @callback validateBooleanArray\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is boolean[]}\n */\n\n/** @type {validateBooleanArray} */\nfunction validateBooleanArray(value, name) {\n  validateArray(value, name)\n  for (let i = 0; i < value.length; i++) {\n    validateBoolean(value[i], `${name}[${i}]`)\n  }\n}\n\n/**\n * @callback validateAbortSignalArray\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is AbortSignal[]}\n */\n\n/** @type {validateAbortSignalArray} */\nfunction validateAbortSignalArray(value, name) {\n  validateArray(value, name)\n  for (let i = 0; i < value.length; i++) {\n    const signal = value[i]\n    const indexedName = `${name}[${i}]`\n    if (signal == null) {\n      throw new ERR_INVALID_ARG_TYPE(indexedName, 'AbortSignal', signal)\n    }\n    validateAbortSignal(signal, indexedName)\n  }\n}\n\n/**\n * @param {*} signal\n * @param {string} [name='signal']\n * @returns {asserts signal is keyof signals}\n */\nfunction validateSignalName(signal, name = 'signal') {\n  validateString(signal, name)\n  if (signals[signal] === undefined) {\n    if (signals[StringPrototypeToUpperCase(signal)] !== undefined) {\n      throw new ERR_UNKNOWN_SIGNAL(signal + ' (signals must use all capital letters)')\n    }\n    throw new ERR_UNKNOWN_SIGNAL(signal)\n  }\n}\n\n/**\n * @callback validateBuffer\n * @param {*} buffer\n * @param {string} [name='buffer']\n * @returns {asserts buffer is ArrayBufferView}\n */\n\n/** @type {validateBuffer} */\nconst validateBuffer = hideStackFrames((buffer, name = 'buffer') => {\n  if (!isArrayBufferView(buffer)) {\n    throw new ERR_INVALID_ARG_TYPE(name, ['Buffer', 'TypedArray', 'DataView'], buffer)\n  }\n})\n\n/**\n * @param {string} data\n * @param {string} encoding\n */\nfunction validateEncoding(data, encoding) {\n  const normalizedEncoding = normalizeEncoding(encoding)\n  const length = data.length\n  if (normalizedEncoding === 'hex' && length % 2 !== 0) {\n    throw new ERR_INVALID_ARG_VALUE('encoding', encoding, `is invalid for data of length ${length}`)\n  }\n}\n\n/**\n * Check that the port number is not NaN when coerced to a number,\n * is an integer and that it falls within the legal range of port numbers.\n * @param {*} port\n * @param {string} [name='Port']\n * @param {boolean} [allowZero=true]\n * @returns {number}\n */\nfunction validatePort(port, name = 'Port', allowZero = true) {\n  if (\n    (typeof port !== 'number' && typeof port !== 'string') ||\n    (typeof port === 'string' && StringPrototypeTrim(port).length === 0) ||\n    +port !== +port >>> 0 ||\n    port > 0xffff ||\n    (port === 0 && !allowZero)\n  ) {\n    throw new ERR_SOCKET_BAD_PORT(name, port, allowZero)\n  }\n  return port | 0\n}\n\n/**\n * @callback validateAbortSignal\n * @param {*} signal\n * @param {string} name\n */\n\n/** @type {validateAbortSignal} */\nconst validateAbortSignal = hideStackFrames((signal, name) => {\n  if (signal !== undefined && (signal === null || typeof signal !== 'object' || !('aborted' in signal))) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'AbortSignal', signal)\n  }\n})\n\n/**\n * @callback validateFunction\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is Function}\n */\n\n/** @type {validateFunction} */\nconst validateFunction = hideStackFrames((value, name) => {\n  if (typeof value !== 'function') throw new ERR_INVALID_ARG_TYPE(name, 'Function', value)\n})\n\n/**\n * @callback validatePlainFunction\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is Function}\n */\n\n/** @type {validatePlainFunction} */\nconst validatePlainFunction = hideStackFrames((value, name) => {\n  if (typeof value !== 'function' || isAsyncFunction(value)) throw new ERR_INVALID_ARG_TYPE(name, 'Function', value)\n})\n\n/**\n * @callback validateUndefined\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is undefined}\n */\n\n/** @type {validateUndefined} */\nconst validateUndefined = hideStackFrames((value, name) => {\n  if (value !== undefined) throw new ERR_INVALID_ARG_TYPE(name, 'undefined', value)\n})\n\n/**\n * @template T\n * @param {T} value\n * @param {string} name\n * @param {T[]} union\n */\nfunction validateUnion(value, name, union) {\n  if (!ArrayPrototypeIncludes(union, value)) {\n    throw new ERR_INVALID_ARG_TYPE(name, `('${ArrayPrototypeJoin(union, '|')}')`, value)\n  }\n}\n\n/*\n  The rules for the Link header field are described here:\n  https://www.rfc-editor.org/rfc/rfc8288.html#section-3\n\n  This regex validates any string surrounded by angle brackets\n  (not necessarily a valid URI reference) followed by zero or more\n  link-params separated by semicolons.\n*/\nconst linkValueRegExp = /^(?:<[^>]*>)(?:\\s*;\\s*[^;\"\\s]+(?:=(\")?[^;\"\\s]*\\1)?)*$/\n\n/**\n * @param {any} value\n * @param {string} name\n */\nfunction validateLinkHeaderFormat(value, name) {\n  if (typeof value === 'undefined' || !RegExpPrototypeExec(linkValueRegExp, value)) {\n    throw new ERR_INVALID_ARG_VALUE(\n      name,\n      value,\n      'must be an array or string of format \"</styles.css>; rel=preload; as=style\"'\n    )\n  }\n}\n\n/**\n * @param {any} hints\n * @return {string}\n */\nfunction validateLinkHeaderValue(hints) {\n  if (typeof hints === 'string') {\n    validateLinkHeaderFormat(hints, 'hints')\n    return hints\n  } else if (ArrayIsArray(hints)) {\n    const hintsLength = hints.length\n    let result = ''\n    if (hintsLength === 0) {\n      return result\n    }\n    for (let i = 0; i < hintsLength; i++) {\n      const link = hints[i]\n      validateLinkHeaderFormat(link, 'hints')\n      result += link\n      if (i !== hintsLength - 1) {\n        result += ', '\n      }\n    }\n    return result\n  }\n  throw new ERR_INVALID_ARG_VALUE(\n    'hints',\n    hints,\n    'must be an array or string of format \"</styles.css>; rel=preload; as=style\"'\n  )\n}\nmodule.exports = {\n  isInt32,\n  isUint32,\n  parseFileMode,\n  validateArray,\n  validateStringArray,\n  validateBooleanArray,\n  validateAbortSignalArray,\n  validateBoolean,\n  validateBuffer,\n  validateDictionary,\n  validateEncoding,\n  validateFunction,\n  validateInt32,\n  validateInteger,\n  validateNumber,\n  validateObject,\n  validateOneOf,\n  validatePlainFunction,\n  validatePort,\n  validateSignalName,\n  validateString,\n  validateUint32,\n  validateUndefined,\n  validateUnion,\n  validateAbortSignal,\n  validateLinkHeaderValue\n}\n","'use strict'\n\nconst { format, inspect, AggregateError: CustomAggregateError } = require('./util')\n\n/*\n  This file is a reduced and adapted version of the main lib/internal/errors.js file defined at\n\n  https://github.com/nodejs/node/blob/master/lib/internal/errors.js\n\n  Don't try to replace with the original file and keep it up to date (starting from E(...) definitions)\n  with the upstream file.\n*/\n\nconst AggregateError = globalThis.AggregateError || CustomAggregateError\nconst kIsNodeError = Symbol('kIsNodeError')\nconst kTypes = [\n  'string',\n  'function',\n  'number',\n  'object',\n  // Accept 'Function' and 'Object' as alternative to the lower cased version.\n  'Function',\n  'Object',\n  'boolean',\n  'bigint',\n  'symbol'\n]\nconst classRegExp = /^([A-Z][a-z0-9]*)+$/\nconst nodeInternalPrefix = '__node_internal_'\nconst codes = {}\nfunction assert(value, message) {\n  if (!value) {\n    throw new codes.ERR_INTERNAL_ASSERTION(message)\n  }\n}\n\n// Only use this for integers! Decimal numbers do not work with this function.\nfunction addNumericalSeparator(val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\nfunction getMessage(key, msg, args) {\n  if (typeof msg === 'function') {\n    assert(\n      msg.length <= args.length,\n      // Default options do not count.\n      `Code: ${key}; The provided arguments length (${args.length}) does not match the required ones (${msg.length}).`\n    )\n    return msg(...args)\n  }\n  const expectedLength = (msg.match(/%[dfijoOs]/g) || []).length\n  assert(\n    expectedLength === args.length,\n    `Code: ${key}; The provided arguments length (${args.length}) does not match the required ones (${expectedLength}).`\n  )\n  if (args.length === 0) {\n    return msg\n  }\n  return format(msg, ...args)\n}\nfunction E(code, message, Base) {\n  if (!Base) {\n    Base = Error\n  }\n  class NodeError extends Base {\n    constructor(...args) {\n      super(getMessage(code, message, args))\n    }\n    toString() {\n      return `${this.name} [${code}]: ${this.message}`\n    }\n  }\n  Object.defineProperties(NodeError.prototype, {\n    name: {\n      value: Base.name,\n      writable: true,\n      enumerable: false,\n      configurable: true\n    },\n    toString: {\n      value() {\n        return `${this.name} [${code}]: ${this.message}`\n      },\n      writable: true,\n      enumerable: false,\n      configurable: true\n    }\n  })\n  NodeError.prototype.code = code\n  NodeError.prototype[kIsNodeError] = true\n  codes[code] = NodeError\n}\nfunction hideStackFrames(fn) {\n  // We rename the functions that will be hidden to cut off the stacktrace\n  // at the outermost one\n  const hidden = nodeInternalPrefix + fn.name\n  Object.defineProperty(fn, 'name', {\n    value: hidden\n  })\n  return fn\n}\nfunction aggregateTwoErrors(innerError, outerError) {\n  if (innerError && outerError && innerError !== outerError) {\n    if (Array.isArray(outerError.errors)) {\n      // If `outerError` is already an `AggregateError`.\n      outerError.errors.push(innerError)\n      return outerError\n    }\n    const err = new AggregateError([outerError, innerError], outerError.message)\n    err.code = outerError.code\n    return err\n  }\n  return innerError || outerError\n}\nclass AbortError extends Error {\n  constructor(message = 'The operation was aborted', options = undefined) {\n    if (options !== undefined && typeof options !== 'object') {\n      throw new codes.ERR_INVALID_ARG_TYPE('options', 'Object', options)\n    }\n    super(message, options)\n    this.code = 'ABORT_ERR'\n    this.name = 'AbortError'\n  }\n}\nE('ERR_ASSERTION', '%s', Error)\nE(\n  'ERR_INVALID_ARG_TYPE',\n  (name, expected, actual) => {\n    assert(typeof name === 'string', \"'name' must be a string\")\n    if (!Array.isArray(expected)) {\n      expected = [expected]\n    }\n    let msg = 'The '\n    if (name.endsWith(' argument')) {\n      // For cases like 'first argument'\n      msg += `${name} `\n    } else {\n      msg += `\"${name}\" ${name.includes('.') ? 'property' : 'argument'} `\n    }\n    msg += 'must be '\n    const types = []\n    const instances = []\n    const other = []\n    for (const value of expected) {\n      assert(typeof value === 'string', 'All expected entries have to be of type string')\n      if (kTypes.includes(value)) {\n        types.push(value.toLowerCase())\n      } else if (classRegExp.test(value)) {\n        instances.push(value)\n      } else {\n        assert(value !== 'object', 'The value \"object\" should be written as \"Object\"')\n        other.push(value)\n      }\n    }\n\n    // Special handle `object` in case other instances are allowed to outline\n    // the differences between each other.\n    if (instances.length > 0) {\n      const pos = types.indexOf('object')\n      if (pos !== -1) {\n        types.splice(types, pos, 1)\n        instances.push('Object')\n      }\n    }\n    if (types.length > 0) {\n      switch (types.length) {\n        case 1:\n          msg += `of type ${types[0]}`\n          break\n        case 2:\n          msg += `one of type ${types[0]} or ${types[1]}`\n          break\n        default: {\n          const last = types.pop()\n          msg += `one of type ${types.join(', ')}, or ${last}`\n        }\n      }\n      if (instances.length > 0 || other.length > 0) {\n        msg += ' or '\n      }\n    }\n    if (instances.length > 0) {\n      switch (instances.length) {\n        case 1:\n          msg += `an instance of ${instances[0]}`\n          break\n        case 2:\n          msg += `an instance of ${instances[0]} or ${instances[1]}`\n          break\n        default: {\n          const last = instances.pop()\n          msg += `an instance of ${instances.join(', ')}, or ${last}`\n        }\n      }\n      if (other.length > 0) {\n        msg += ' or '\n      }\n    }\n    switch (other.length) {\n      case 0:\n        break\n      case 1:\n        if (other[0].toLowerCase() !== other[0]) {\n          msg += 'an '\n        }\n        msg += `${other[0]}`\n        break\n      case 2:\n        msg += `one of ${other[0]} or ${other[1]}`\n        break\n      default: {\n        const last = other.pop()\n        msg += `one of ${other.join(', ')}, or ${last}`\n      }\n    }\n    if (actual == null) {\n      msg += `. Received ${actual}`\n    } else if (typeof actual === 'function' && actual.name) {\n      msg += `. Received function ${actual.name}`\n    } else if (typeof actual === 'object') {\n      var _actual$constructor\n      if (\n        (_actual$constructor = actual.constructor) !== null &&\n        _actual$constructor !== undefined &&\n        _actual$constructor.name\n      ) {\n        msg += `. Received an instance of ${actual.constructor.name}`\n      } else {\n        const inspected = inspect(actual, {\n          depth: -1\n        })\n        msg += `. Received ${inspected}`\n      }\n    } else {\n      let inspected = inspect(actual, {\n        colors: false\n      })\n      if (inspected.length > 25) {\n        inspected = `${inspected.slice(0, 25)}...`\n      }\n      msg += `. Received type ${typeof actual} (${inspected})`\n    }\n    return msg\n  },\n  TypeError\n)\nE(\n  'ERR_INVALID_ARG_VALUE',\n  (name, value, reason = 'is invalid') => {\n    let inspected = inspect(value)\n    if (inspected.length > 128) {\n      inspected = inspected.slice(0, 128) + '...'\n    }\n    const type = name.includes('.') ? 'property' : 'argument'\n    return `The ${type} '${name}' ${reason}. Received ${inspected}`\n  },\n  TypeError\n)\nE(\n  'ERR_INVALID_RETURN_VALUE',\n  (input, name, value) => {\n    var _value$constructor\n    const type =\n      value !== null &&\n      value !== undefined &&\n      (_value$constructor = value.constructor) !== null &&\n      _value$constructor !== undefined &&\n      _value$constructor.name\n        ? `instance of ${value.constructor.name}`\n        : `type ${typeof value}`\n    return `Expected ${input} to be returned from the \"${name}\"` + ` function but got ${type}.`\n  },\n  TypeError\n)\nE(\n  'ERR_MISSING_ARGS',\n  (...args) => {\n    assert(args.length > 0, 'At least one arg needs to be specified')\n    let msg\n    const len = args.length\n    args = (Array.isArray(args) ? args : [args]).map((a) => `\"${a}\"`).join(' or ')\n    switch (len) {\n      case 1:\n        msg += `The ${args[0]} argument`\n        break\n      case 2:\n        msg += `The ${args[0]} and ${args[1]} arguments`\n        break\n      default:\n        {\n          const last = args.pop()\n          msg += `The ${args.join(', ')}, and ${last} arguments`\n        }\n        break\n    }\n    return `${msg} must be specified`\n  },\n  TypeError\n)\nE(\n  'ERR_OUT_OF_RANGE',\n  (str, range, input) => {\n    assert(range, 'Missing \"range\" argument')\n    let received\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > 2n ** 32n || input < -(2n ** 32n)) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    } else {\n      received = inspect(input)\n    }\n    return `The value of \"${str}\" is out of range. It must be ${range}. Received ${received}`\n  },\n  RangeError\n)\nE('ERR_MULTIPLE_CALLBACK', 'Callback called multiple times', Error)\nE('ERR_METHOD_NOT_IMPLEMENTED', 'The %s method is not implemented', Error)\nE('ERR_STREAM_ALREADY_FINISHED', 'Cannot call %s after a stream was finished', Error)\nE('ERR_STREAM_CANNOT_PIPE', 'Cannot pipe, not readable', Error)\nE('ERR_STREAM_DESTROYED', 'Cannot call %s after a stream was destroyed', Error)\nE('ERR_STREAM_NULL_VALUES', 'May not write null values to stream', TypeError)\nE('ERR_STREAM_PREMATURE_CLOSE', 'Premature close', Error)\nE('ERR_STREAM_PUSH_AFTER_EOF', 'stream.push() after EOF', Error)\nE('ERR_STREAM_UNSHIFT_AFTER_END_EVENT', 'stream.unshift() after end event', Error)\nE('ERR_STREAM_WRITE_AFTER_END', 'write after end', Error)\nE('ERR_UNKNOWN_ENCODING', 'Unknown encoding: %s', TypeError)\nmodule.exports = {\n  AbortError,\n  aggregateTwoErrors: hideStackFrames(aggregateTwoErrors),\n  hideStackFrames,\n  codes\n}\n","'use strict'\n\n/*\n  This file is a reduced and adapted version of the main lib/internal/per_context/primordials.js file defined at\n\n  https://github.com/nodejs/node/blob/master/lib/internal/per_context/primordials.js\n\n  Don't try to replace with the original file and keep it up to date with the upstream file.\n*/\nmodule.exports = {\n  ArrayIsArray(self) {\n    return Array.isArray(self)\n  },\n  ArrayPrototypeIncludes(self, el) {\n    return self.includes(el)\n  },\n  ArrayPrototypeIndexOf(self, el) {\n    return self.indexOf(el)\n  },\n  ArrayPrototypeJoin(self, sep) {\n    return self.join(sep)\n  },\n  ArrayPrototypeMap(self, fn) {\n    return self.map(fn)\n  },\n  ArrayPrototypePop(self, el) {\n    return self.pop(el)\n  },\n  ArrayPrototypePush(self, el) {\n    return self.push(el)\n  },\n  ArrayPrototypeSlice(self, start, end) {\n    return self.slice(start, end)\n  },\n  Error,\n  FunctionPrototypeCall(fn, thisArgs, ...args) {\n    return fn.call(thisArgs, ...args)\n  },\n  FunctionPrototypeSymbolHasInstance(self, instance) {\n    return Function.prototype[Symbol.hasInstance].call(self, instance)\n  },\n  MathFloor: Math.floor,\n  Number,\n  NumberIsInteger: Number.isInteger,\n  NumberIsNaN: Number.isNaN,\n  NumberMAX_SAFE_INTEGER: Number.MAX_SAFE_INTEGER,\n  NumberMIN_SAFE_INTEGER: Number.MIN_SAFE_INTEGER,\n  NumberParseInt: Number.parseInt,\n  ObjectDefineProperties(self, props) {\n    return Object.defineProperties(self, props)\n  },\n  ObjectDefineProperty(self, name, prop) {\n    return Object.defineProperty(self, name, prop)\n  },\n  ObjectGetOwnPropertyDescriptor(self, name) {\n    return Object.getOwnPropertyDescriptor(self, name)\n  },\n  ObjectKeys(obj) {\n    return Object.keys(obj)\n  },\n  ObjectSetPrototypeOf(target, proto) {\n    return Object.setPrototypeOf(target, proto)\n  },\n  Promise,\n  PromisePrototypeCatch(self, fn) {\n    return self.catch(fn)\n  },\n  PromisePrototypeThen(self, thenFn, catchFn) {\n    return self.then(thenFn, catchFn)\n  },\n  PromiseReject(err) {\n    return Promise.reject(err)\n  },\n  PromiseResolve(val) {\n    return Promise.resolve(val)\n  },\n  ReflectApply: Reflect.apply,\n  RegExpPrototypeTest(self, value) {\n    return self.test(value)\n  },\n  SafeSet: Set,\n  String,\n  StringPrototypeSlice(self, start, end) {\n    return self.slice(start, end)\n  },\n  StringPrototypeToLowerCase(self) {\n    return self.toLowerCase()\n  },\n  StringPrototypeToUpperCase(self) {\n    return self.toUpperCase()\n  },\n  StringPrototypeTrim(self) {\n    return self.trim()\n  },\n  Symbol,\n  SymbolFor: Symbol.for,\n  SymbolAsyncIterator: Symbol.asyncIterator,\n  SymbolHasInstance: Symbol.hasInstance,\n  SymbolIterator: Symbol.iterator,\n  SymbolDispose: Symbol.dispose || Symbol('Symbol.dispose'),\n  SymbolAsyncDispose: Symbol.asyncDispose || Symbol('Symbol.asyncDispose'),\n  TypedArrayPrototypeSet(self, buf, len) {\n    return self.set(buf, len)\n  },\n  Boolean: Boolean,\n  Uint8Array\n}\n","'use strict'\n\nconst bufferModule = require('buffer')\nconst { kResistStopPropagation, SymbolDispose } = require('./primordials')\nconst AbortSignal = globalThis.AbortSignal || require('abort-controller').AbortSignal\nconst AbortController = globalThis.AbortController || require('abort-controller').AbortController\nconst AsyncFunction = Object.getPrototypeOf(async function () {}).constructor\nconst Blob = globalThis.Blob || bufferModule.Blob\n/* eslint-disable indent */\nconst isBlob =\n  typeof Blob !== 'undefined'\n    ? function isBlob(b) {\n        // eslint-disable-next-line indent\n        return b instanceof Blob\n      }\n    : function isBlob(b) {\n        return false\n      }\n/* eslint-enable indent */\n\nconst validateAbortSignal = (signal, name) => {\n  if (signal !== undefined && (signal === null || typeof signal !== 'object' || !('aborted' in signal))) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'AbortSignal', signal)\n  }\n}\nconst validateFunction = (value, name) => {\n  if (typeof value !== 'function') throw new ERR_INVALID_ARG_TYPE(name, 'Function', value)\n}\n\n// This is a simplified version of AggregateError\nclass AggregateError extends Error {\n  constructor(errors) {\n    if (!Array.isArray(errors)) {\n      throw new TypeError(`Expected input to be an Array, got ${typeof errors}`)\n    }\n    let message = ''\n    for (let i = 0; i < errors.length; i++) {\n      message += `    ${errors[i].stack}\\n`\n    }\n    super(message)\n    this.name = 'AggregateError'\n    this.errors = errors\n  }\n}\nmodule.exports = {\n  AggregateError,\n  kEmptyObject: Object.freeze({}),\n  once(callback) {\n    let called = false\n    return function (...args) {\n      if (called) {\n        return\n      }\n      called = true\n      callback.apply(this, args)\n    }\n  },\n  createDeferredPromise: function () {\n    let resolve\n    let reject\n\n    // eslint-disable-next-line promise/param-names\n    const promise = new Promise((res, rej) => {\n      resolve = res\n      reject = rej\n    })\n    return {\n      promise,\n      resolve,\n      reject\n    }\n  },\n  promisify(fn) {\n    return new Promise((resolve, reject) => {\n      fn((err, ...args) => {\n        if (err) {\n          return reject(err)\n        }\n        return resolve(...args)\n      })\n    })\n  },\n  debuglog() {\n    return function () {}\n  },\n  format(format, ...args) {\n    // Simplified version of https://nodejs.org/api/util.html#utilformatformat-args\n    return format.replace(/%([sdifj])/g, function (...[_unused, type]) {\n      const replacement = args.shift()\n      if (type === 'f') {\n        return replacement.toFixed(6)\n      } else if (type === 'j') {\n        return JSON.stringify(replacement)\n      } else if (type === 's' && typeof replacement === 'object') {\n        const ctor = replacement.constructor !== Object ? replacement.constructor.name : ''\n        return `${ctor} {}`.trim()\n      } else {\n        return replacement.toString()\n      }\n    })\n  },\n  inspect(value) {\n    // Vastly simplified version of https://nodejs.org/api/util.html#utilinspectobject-options\n    switch (typeof value) {\n      case 'string':\n        if (value.includes(\"'\")) {\n          if (!value.includes('\"')) {\n            return `\"${value}\"`\n          } else if (!value.includes('`') && !value.includes('${')) {\n            return `\\`${value}\\``\n          }\n        }\n        return `'${value}'`\n      case 'number':\n        if (isNaN(value)) {\n          return 'NaN'\n        } else if (Object.is(value, -0)) {\n          return String(value)\n        }\n        return value\n      case 'bigint':\n        return `${String(value)}n`\n      case 'boolean':\n      case 'undefined':\n        return String(value)\n      case 'object':\n        return '{}'\n    }\n  },\n  types: {\n    isAsyncFunction(fn) {\n      return fn instanceof AsyncFunction\n    },\n    isArrayBufferView(arr) {\n      return ArrayBuffer.isView(arr)\n    }\n  },\n  isBlob,\n  deprecate(fn, message) {\n    return fn\n  },\n  addAbortListener:\n    require('events').addAbortListener ||\n    function addAbortListener(signal, listener) {\n      if (signal === undefined) {\n        throw new ERR_INVALID_ARG_TYPE('signal', 'AbortSignal', signal)\n      }\n      validateAbortSignal(signal, 'signal')\n      validateFunction(listener, 'listener')\n      let removeEventListener\n      if (signal.aborted) {\n        queueMicrotask(() => listener())\n      } else {\n        signal.addEventListener('abort', listener, {\n          __proto__: null,\n          once: true,\n          [kResistStopPropagation]: true\n        })\n        removeEventListener = () => {\n          signal.removeEventListener('abort', listener)\n        }\n      }\n      return {\n        __proto__: null,\n        [SymbolDispose]() {\n          var _removeEventListener\n          ;(_removeEventListener = removeEventListener) === null || _removeEventListener === undefined\n            ? undefined\n            : _removeEventListener()\n        }\n      }\n    },\n  AbortSignalAny:\n    AbortSignal.any ||\n    function AbortSignalAny(signals) {\n      // Fast path if there is only one signal.\n      if (signals.length === 1) {\n        return signals[0]\n      }\n      const ac = new AbortController()\n      const abort = () => ac.abort()\n      signals.forEach((signal) => {\n        validateAbortSignal(signal, 'signals')\n        signal.addEventListener('abort', abort, {\n          once: true\n        })\n      })\n      ac.signal.addEventListener(\n        'abort',\n        () => {\n          signals.forEach((signal) => signal.removeEventListener('abort', abort))\n        },\n        {\n          once: true\n        }\n      )\n      return ac.signal\n    }\n}\nmodule.exports.promisify.custom = Symbol.for('nodejs.util.promisify.custom')\n","/* replacement start */\n\nconst { Buffer } = require('buffer')\n\n/* replacement end */\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n;('use strict')\nconst { ObjectDefineProperty, ObjectKeys, ReflectApply } = require('./ours/primordials')\nconst {\n  promisify: { custom: customPromisify }\n} = require('./ours/util')\nconst { streamReturningOperators, promiseReturningOperators } = require('./internal/streams/operators')\nconst {\n  codes: { ERR_ILLEGAL_CONSTRUCTOR }\n} = require('./ours/errors')\nconst compose = require('./internal/streams/compose')\nconst { setDefaultHighWaterMark, getDefaultHighWaterMark } = require('./internal/streams/state')\nconst { pipeline } = require('./internal/streams/pipeline')\nconst { destroyer } = require('./internal/streams/destroy')\nconst eos = require('./internal/streams/end-of-stream')\nconst internalBuffer = {}\nconst promises = require('./stream/promises')\nconst utils = require('./internal/streams/utils')\nconst Stream = (module.exports = require('./internal/streams/legacy').Stream)\nStream.isDestroyed = utils.isDestroyed\nStream.isDisturbed = utils.isDisturbed\nStream.isErrored = utils.isErrored\nStream.isReadable = utils.isReadable\nStream.isWritable = utils.isWritable\nStream.Readable = require('./internal/streams/readable')\nfor (const key of ObjectKeys(streamReturningOperators)) {\n  const op = streamReturningOperators[key]\n  function fn(...args) {\n    if (new.target) {\n      throw ERR_ILLEGAL_CONSTRUCTOR()\n    }\n    return Stream.Readable.from(ReflectApply(op, this, args))\n  }\n  ObjectDefineProperty(fn, 'name', {\n    __proto__: null,\n    value: op.name\n  })\n  ObjectDefineProperty(fn, 'length', {\n    __proto__: null,\n    value: op.length\n  })\n  ObjectDefineProperty(Stream.Readable.prototype, key, {\n    __proto__: null,\n    value: fn,\n    enumerable: false,\n    configurable: true,\n    writable: true\n  })\n}\nfor (const key of ObjectKeys(promiseReturningOperators)) {\n  const op = promiseReturningOperators[key]\n  function fn(...args) {\n    if (new.target) {\n      throw ERR_ILLEGAL_CONSTRUCTOR()\n    }\n    return ReflectApply(op, this, args)\n  }\n  ObjectDefineProperty(fn, 'name', {\n    __proto__: null,\n    value: op.name\n  })\n  ObjectDefineProperty(fn, 'length', {\n    __proto__: null,\n    value: op.length\n  })\n  ObjectDefineProperty(Stream.Readable.prototype, key, {\n    __proto__: null,\n    value: fn,\n    enumerable: false,\n    configurable: true,\n    writable: true\n  })\n}\nStream.Writable = require('./internal/streams/writable')\nStream.Duplex = require('./internal/streams/duplex')\nStream.Transform = require('./internal/streams/transform')\nStream.PassThrough = require('./internal/streams/passthrough')\nStream.pipeline = pipeline\nconst { addAbortSignal } = require('./internal/streams/add-abort-signal')\nStream.addAbortSignal = addAbortSignal\nStream.finished = eos\nStream.destroy = destroyer\nStream.compose = compose\nStream.setDefaultHighWaterMark = setDefaultHighWaterMark\nStream.getDefaultHighWaterMark = getDefaultHighWaterMark\nObjectDefineProperty(Stream, 'promises', {\n  __proto__: null,\n  configurable: true,\n  enumerable: true,\n  get() {\n    return promises\n  }\n})\nObjectDefineProperty(pipeline, customPromisify, {\n  __proto__: null,\n  enumerable: true,\n  get() {\n    return promises.pipeline\n  }\n})\nObjectDefineProperty(eos, customPromisify, {\n  __proto__: null,\n  enumerable: true,\n  get() {\n    return promises.finished\n  }\n})\n\n// Backwards-compat with node 0.4.x\nStream.Stream = Stream\nStream._isUint8Array = function isUint8Array(value) {\n  return value instanceof Uint8Array\n}\nStream._uint8ArrayToBuffer = function _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk.buffer, chunk.byteOffset, chunk.byteLength)\n}\n","'use strict'\n\nconst { ArrayPrototypePop, Promise } = require('../ours/primordials')\nconst { isIterable, isNodeStream, isWebStream } = require('../internal/streams/utils')\nconst { pipelineImpl: pl } = require('../internal/streams/pipeline')\nconst { finished } = require('../internal/streams/end-of-stream')\nrequire('../../lib/stream.js')\nfunction pipeline(...streams) {\n  return new Promise((resolve, reject) => {\n    let signal\n    let end\n    const lastArg = streams[streams.length - 1]\n    if (\n      lastArg &&\n      typeof lastArg === 'object' &&\n      !isNodeStream(lastArg) &&\n      !isIterable(lastArg) &&\n      !isWebStream(lastArg)\n    ) {\n      const options = ArrayPrototypePop(streams)\n      signal = options.signal\n      end = options.end\n    }\n    pl(\n      streams,\n      (err, value) => {\n        if (err) {\n          reject(err)\n        } else {\n          resolve(value)\n        }\n      },\n      {\n        signal,\n        end\n      }\n    )\n  })\n}\nmodule.exports = {\n  finished,\n  pipeline\n}\n","/**\n * winston.js: Top-level include defining Winston.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst logform = require('logform');\nconst { warn } = require('./winston/common');\n\n/**\n * Expose version. Use `require` method for `webpack` support.\n * @type {string}\n */\nexports.version = require('../package.json').version;\n/**\n * Include transports defined by default by winston\n * @type {Array}\n */\nexports.transports = require('./winston/transports');\n/**\n * Expose utility methods\n * @type {Object}\n */\nexports.config = require('./winston/config');\n/**\n * Hoist format-related functionality from logform.\n * @type {Object}\n */\nexports.addColors = logform.levels;\n/**\n * Hoist format-related functionality from logform.\n * @type {Object}\n */\nexports.format = logform.format;\n/**\n * Expose core Logging-related prototypes.\n * @type {function}\n */\nexports.createLogger = require('./winston/create-logger');\n/**\n * Expose core Logging-related prototypes.\n * @type {function}\n */\nexports.Logger = require('./winston/logger');\n/**\n * Expose core Logging-related prototypes.\n * @type {Object}\n */\nexports.ExceptionHandler = require('./winston/exception-handler');\n/**\n * Expose core Logging-related prototypes.\n * @type {Object}\n */\nexports.RejectionHandler = require('./winston/rejection-handler');\n/**\n * Expose core Logging-related prototypes.\n * @type {Container}\n */\nexports.Container = require('./winston/container');\n/**\n * Expose core Logging-related prototypes.\n * @type {Object}\n */\nexports.Transport = require('winston-transport');\n/**\n * We create and expose a default `Container` to `winston.loggers` so that the\n * programmer may manage multiple `winston.Logger` instances without any\n * additional overhead.\n * @example\n *   // some-file1.js\n *   const logger = require('winston').loggers.get('something');\n *\n *   // some-file2.js\n *   const logger = require('winston').loggers.get('something');\n */\nexports.loggers = new exports.Container();\n\n/**\n * We create and expose a 'defaultLogger' so that the programmer may do the\n * following without the need to create an instance of winston.Logger directly:\n * @example\n *   const winston = require('winston');\n *   winston.log('info', 'some message');\n *   winston.error('some error');\n */\nconst defaultLogger = exports.createLogger();\n\n// Pass through the target methods onto `winston.\nObject.keys(exports.config.npm.levels)\n  .concat([\n    'log',\n    'query',\n    'stream',\n    'add',\n    'remove',\n    'clear',\n    'profile',\n    'startTimer',\n    'handleExceptions',\n    'unhandleExceptions',\n    'handleRejections',\n    'unhandleRejections',\n    'configure',\n    'child'\n  ])\n  .forEach(\n    method => (exports[method] = (...args) => defaultLogger[method](...args))\n  );\n\n/**\n * Define getter / setter for the default logger level which need to be exposed\n * by winston.\n * @type {string}\n */\nObject.defineProperty(exports, 'level', {\n  get() {\n    return defaultLogger.level;\n  },\n  set(val) {\n    defaultLogger.level = val;\n  }\n});\n\n/**\n * Define getter for `exceptions` which replaces `handleExceptions` and\n * `unhandleExceptions`.\n * @type {Object}\n */\nObject.defineProperty(exports, 'exceptions', {\n  get() {\n    return defaultLogger.exceptions;\n  }\n});\n\n/**\n * Define getter for `rejections` which replaces `handleRejections` and\n * `unhandleRejections`.\n * @type {Object}\n */\nObject.defineProperty(exports, 'rejections', {\n  get() {\n    return defaultLogger.rejections;\n  }\n});\n\n/**\n * Define getters / setters for appropriate properties of the default logger\n * which need to be exposed by winston.\n * @type {Logger}\n */\n['exitOnError'].forEach(prop => {\n  Object.defineProperty(exports, prop, {\n    get() {\n      return defaultLogger[prop];\n    },\n    set(val) {\n      defaultLogger[prop] = val;\n    }\n  });\n});\n\n/**\n * The default transports and exceptionHandlers for the default winston logger.\n * @type {Object}\n */\nObject.defineProperty(exports, 'default', {\n  get() {\n    return {\n      exceptionHandlers: defaultLogger.exceptionHandlers,\n      rejectionHandlers: defaultLogger.rejectionHandlers,\n      transports: defaultLogger.transports\n    };\n  }\n});\n\n// Have friendlier breakage notices for properties that were exposed by default\n// on winston < 3.0.\nwarn.deprecated(exports, 'setLevels');\nwarn.forFunctions(exports, 'useFormat', ['cli']);\nwarn.forProperties(exports, 'useFormat', ['padLevels', 'stripColors']);\nwarn.forFunctions(exports, 'deprecated', [\n  'addRewriter',\n  'addFilter',\n  'clone',\n  'extend'\n]);\nwarn.forProperties(exports, 'deprecated', ['emitErrs', 'levelLength']);\n\n","/**\n * common.js: Internal helper and utility functions for winston.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst { format } = require('util');\n\n/**\n * Set of simple deprecation notices and a way to expose them for a set of\n * properties.\n * @type {Object}\n * @private\n */\nexports.warn = {\n  deprecated(prop) {\n    return () => {\n      throw new Error(format('{ %s } was removed in winston@3.0.0.', prop));\n    };\n  },\n  useFormat(prop) {\n    return () => {\n      throw new Error([\n        format('{ %s } was removed in winston@3.0.0.', prop),\n        'Use a custom winston.format = winston.format(function) instead.'\n      ].join('\\n'));\n    };\n  },\n  forFunctions(obj, type, props) {\n    props.forEach(prop => {\n      obj[prop] = exports.warn[type](prop);\n    });\n  },\n  forProperties(obj, type, props) {\n    props.forEach(prop => {\n      const notice = exports.warn[type](prop);\n      Object.defineProperty(obj, prop, {\n        get: notice,\n        set: notice\n      });\n    });\n  }\n};\n","/**\n * index.js: Default settings for all levels that winston knows about.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst logform = require('logform');\nconst { configs } = require('triple-beam');\n\n/**\n * Export config set for the CLI.\n * @type {Object}\n */\nexports.cli = logform.levels(configs.cli);\n\n/**\n * Export config set for npm.\n * @type {Object}\n */\nexports.npm = logform.levels(configs.npm);\n\n/**\n * Export config set for the syslog.\n * @type {Object}\n */\nexports.syslog = logform.levels(configs.syslog);\n\n/**\n * Hoist addColors from logform where it was refactored into in winston@3.\n * @type {Object}\n */\nexports.addColors = logform.levels;\n","/**\n * container.js: Inversion of control container for winston logger instances.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst createLogger = require('./create-logger');\n\n/**\n * Inversion of control container for winston logger instances.\n * @type {Container}\n */\nmodule.exports = class Container {\n  /**\n   * Constructor function for the Container object responsible for managing a\n   * set of `winston.Logger` instances based on string ids.\n   * @param {!Object} [options={}] - Default pass-thru options for Loggers.\n   */\n  constructor(options = {}) {\n    this.loggers = new Map();\n    this.options = options;\n  }\n\n  /**\n   * Retrieves a `winston.Logger` instance for the specified `id`. If an\n   * instance does not exist, one is created.\n   * @param {!string} id - The id of the Logger to get.\n   * @param {?Object} [options] - Options for the Logger instance.\n   * @returns {Logger} - A configured Logger instance with a specified id.\n   */\n  add(id, options) {\n    if (!this.loggers.has(id)) {\n      // Remark: Simple shallow clone for configuration options in case we pass\n      // in instantiated protoypal objects\n      options = Object.assign({}, options || this.options);\n      const existing = options.transports || this.options.transports;\n\n      // Remark: Make sure if we have an array of transports we slice it to\n      // make copies of those references.\n      if (existing) {\n        options.transports = Array.isArray(existing) ? existing.slice() : [existing];\n      } else {\n        options.transports = [];\n      }\n\n      const logger = createLogger(options);\n      logger.on('close', () => this._delete(id));\n      this.loggers.set(id, logger);\n    }\n\n    return this.loggers.get(id);\n  }\n\n  /**\n   * Retreives a `winston.Logger` instance for the specified `id`. If\n   * an instance does not exist, one is created.\n   * @param {!string} id - The id of the Logger to get.\n   * @param {?Object} [options] - Options for the Logger instance.\n   * @returns {Logger} - A configured Logger instance with a specified id.\n   */\n  get(id, options) {\n    return this.add(id, options);\n  }\n\n  /**\n   * Check if the container has a logger with the id.\n   * @param {?string} id - The id of the Logger instance to find.\n   * @returns {boolean} - Boolean value indicating if this instance has a\n   * logger with the specified `id`.\n   */\n  has(id) {\n    return !!this.loggers.has(id);\n  }\n\n  /**\n   * Closes a `Logger` instance with the specified `id` if it exists.\n   * If no `id` is supplied then all Loggers are closed.\n   * @param {?string} id - The id of the Logger instance to close.\n   * @returns {undefined}\n   */\n  close(id) {\n    if (id) {\n      return this._removeLogger(id);\n    }\n\n    this.loggers.forEach((val, key) => this._removeLogger(key));\n  }\n\n  /**\n   * Remove a logger based on the id.\n   * @param {!string} id - The id of the logger to remove.\n   * @returns {undefined}\n   * @private\n   */\n  _removeLogger(id) {\n    if (!this.loggers.has(id)) {\n      return;\n    }\n\n    const logger = this.loggers.get(id);\n    logger.close();\n    this._delete(id);\n  }\n\n  /**\n   * Deletes a `Logger` instance with the specified `id`.\n   * @param {!string} id - The id of the Logger instance to delete from\n   * container.\n   * @returns {undefined}\n   * @private\n   */\n  _delete(id) {\n    this.loggers.delete(id);\n  }\n};\n","/**\n * create-logger.js: Logger factory for winston logger instances.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst { LEVEL } = require('triple-beam');\nconst config = require('./config');\nconst Logger = require('./logger');\nconst debug = require('@dabh/diagnostics')('winston:create-logger');\n\nfunction isLevelEnabledFunctionName(level) {\n  return 'is' + level.charAt(0).toUpperCase() + level.slice(1) + 'Enabled';\n}\n\n/**\n * Create a new instance of a winston Logger. Creates a new\n * prototype for each instance.\n * @param {!Object} opts - Options for the created logger.\n * @returns {Logger} - A newly created logger instance.\n */\nmodule.exports = function (opts = {}) {\n  //\n  // Default levels: npm\n  //\n  opts.levels = opts.levels || config.npm.levels;\n\n  /**\n   * DerivedLogger to attach the logs level methods.\n   * @type {DerivedLogger}\n   * @extends {Logger}\n   */\n  class DerivedLogger extends Logger {\n    /**\n     * Create a new class derived logger for which the levels can be attached to\n     * the prototype of. This is a V8 optimization that is well know to increase\n     * performance of prototype functions.\n     * @param {!Object} options - Options for the created logger.\n     */\n    constructor(options) {\n      super(options);\n    }\n  }\n\n  const logger = new DerivedLogger(opts);\n\n  //\n  // Create the log level methods for the derived logger.\n  //\n  Object.keys(opts.levels).forEach(function (level) {\n    debug('Define prototype method for \"%s\"', level);\n    if (level === 'log') {\n      // eslint-disable-next-line no-console\n      console.warn('Level \"log\" not defined: conflicts with the method \"log\". Use a different level name.');\n      return;\n    }\n\n    //\n    // Define prototype methods for each log level e.g.:\n    // logger.log('info', msg) implies these methods are defined:\n    // - logger.info(msg)\n    // - logger.isInfoEnabled()\n    //\n    // Remark: to support logger.child this **MUST** be a function\n    // so it'll always be called on the instance instead of a fixed\n    // place in the prototype chain.\n    //\n    DerivedLogger.prototype[level] = function (...args) {\n      // Prefer any instance scope, but default to \"root\" logger\n      const self = this || logger;\n\n      // Optimize the hot-path which is the single object.\n      if (args.length === 1) {\n        const [msg] = args;\n        const info = msg && msg.message && msg || { message: msg };\n        info.level = info[LEVEL] = level;\n        self._addDefaultMeta(info);\n        self.write(info);\n        return (this || logger);\n      }\n\n      // When provided nothing assume the empty string\n      if (args.length === 0) {\n        self.log(level, '');\n        return self;\n      }\n\n      // Otherwise build argument list which could potentially conform to\n      // either:\n      // . v3 API: log(obj)\n      // 2. v1/v2 API: log(level, msg, ... [string interpolate], [{metadata}], [callback])\n      return self.log(level, ...args);\n    };\n\n    DerivedLogger.prototype[isLevelEnabledFunctionName(level)] = function () {\n      return (this || logger).isLevelEnabled(level);\n    };\n  });\n\n  return logger;\n};\n","/**\n * exception-handler.js: Object for handling uncaughtException events.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst os = require('os');\nconst asyncForEach = require('async/forEach');\nconst debug = require('@dabh/diagnostics')('winston:exception');\nconst once = require('one-time');\nconst stackTrace = require('stack-trace');\nconst ExceptionStream = require('./exception-stream');\n\n/**\n * Object for handling uncaughtException events.\n * @type {ExceptionHandler}\n */\nmodule.exports = class ExceptionHandler {\n  /**\n   * TODO: add contructor description\n   * @param {!Logger} logger - TODO: add param description\n   */\n  constructor(logger) {\n    if (!logger) {\n      throw new Error('Logger is required to handle exceptions');\n    }\n\n    this.logger = logger;\n    this.handlers = new Map();\n  }\n\n  /**\n   * Handles `uncaughtException` events for the current process by adding any\n   * handlers passed in.\n   * @returns {undefined}\n   */\n  handle(...args) {\n    args.forEach(arg => {\n      if (Array.isArray(arg)) {\n        return arg.forEach(handler => this._addHandler(handler));\n      }\n\n      this._addHandler(arg);\n    });\n\n    if (!this.catcher) {\n      this.catcher = this._uncaughtException.bind(this);\n      process.on('uncaughtException', this.catcher);\n    }\n  }\n\n  /**\n   * Removes any handlers to `uncaughtException` events for the current\n   * process. This does not modify the state of the `this.handlers` set.\n   * @returns {undefined}\n   */\n  unhandle() {\n    if (this.catcher) {\n      process.removeListener('uncaughtException', this.catcher);\n      this.catcher = false;\n\n      Array.from(this.handlers.values())\n        .forEach(wrapper => this.logger.unpipe(wrapper));\n    }\n  }\n\n  /**\n   * TODO: add method description\n   * @param {Error} err - Error to get information about.\n   * @returns {mixed} - TODO: add return description.\n   */\n  getAllInfo(err) {\n    let message = null;\n    if (err) {\n      message = typeof err === 'string' ? err : err.message;\n    }\n\n    return {\n      error: err,\n      // TODO (indexzero): how do we configure this?\n      level: 'error',\n      message: [\n        `uncaughtException: ${(message || '(no error message)')}`,\n        err && err.stack || '  No stack trace'\n      ].join('\\n'),\n      stack: err && err.stack,\n      exception: true,\n      date: new Date().toString(),\n      process: this.getProcessInfo(),\n      os: this.getOsInfo(),\n      trace: this.getTrace(err)\n    };\n  }\n\n  /**\n   * Gets all relevant process information for the currently running process.\n   * @returns {mixed} - TODO: add return description.\n   */\n  getProcessInfo() {\n    return {\n      pid: process.pid,\n      uid: process.getuid ? process.getuid() : null,\n      gid: process.getgid ? process.getgid() : null,\n      cwd: process.cwd(),\n      execPath: process.execPath,\n      version: process.version,\n      argv: process.argv,\n      memoryUsage: process.memoryUsage()\n    };\n  }\n\n  /**\n   * Gets all relevant OS information for the currently running process.\n   * @returns {mixed} - TODO: add return description.\n   */\n  getOsInfo() {\n    return {\n      loadavg: os.loadavg(),\n      uptime: os.uptime()\n    };\n  }\n\n  /**\n   * Gets a stack trace for the specified error.\n   * @param {mixed} err - TODO: add param description.\n   * @returns {mixed} - TODO: add return description.\n   */\n  getTrace(err) {\n    const trace = err ? stackTrace.parse(err) : stackTrace.get();\n    return trace.map(site => {\n      return {\n        column: site.getColumnNumber(),\n        file: site.getFileName(),\n        function: site.getFunctionName(),\n        line: site.getLineNumber(),\n        method: site.getMethodName(),\n        native: site.isNative()\n      };\n    });\n  }\n\n  /**\n   * Helper method to add a transport as an exception handler.\n   * @param {Transport} handler - The transport to add as an exception handler.\n   * @returns {void}\n   */\n  _addHandler(handler) {\n    if (!this.handlers.has(handler)) {\n      handler.handleExceptions = true;\n      const wrapper = new ExceptionStream(handler);\n      this.handlers.set(handler, wrapper);\n      this.logger.pipe(wrapper);\n    }\n  }\n\n  /**\n   * Logs all relevant information around the `err` and exits the current\n   * process.\n   * @param {Error} err - Error to handle\n   * @returns {mixed} - TODO: add return description.\n   * @private\n   */\n  _uncaughtException(err) {\n    const info = this.getAllInfo(err);\n    const handlers = this._getExceptionHandlers();\n    // Calculate if we should exit on this error\n    let doExit = typeof this.logger.exitOnError === 'function'\n      ? this.logger.exitOnError(err)\n      : this.logger.exitOnError;\n    let timeout;\n\n    if (!handlers.length && doExit) {\n      // eslint-disable-next-line no-console\n      console.warn('winston: exitOnError cannot be true with no exception handlers.');\n      // eslint-disable-next-line no-console\n      console.warn('winston: not exiting process.');\n      doExit = false;\n    }\n\n    function gracefulExit() {\n      debug('doExit', doExit);\n      debug('process._exiting', process._exiting);\n\n      if (doExit && !process._exiting) {\n        // Remark: Currently ignoring any exceptions from transports when\n        // catching uncaught exceptions.\n        if (timeout) {\n          clearTimeout(timeout);\n        }\n        // eslint-disable-next-line no-process-exit\n        process.exit(1);\n      }\n    }\n\n    if (!handlers || handlers.length === 0) {\n      return process.nextTick(gracefulExit);\n    }\n\n    // Log to all transports attempting to listen for when they are completed.\n    asyncForEach(handlers, (handler, next) => {\n      const done = once(next);\n      const transport = handler.transport || handler;\n\n      // Debug wrapping so that we can inspect what's going on under the covers.\n      function onDone(event) {\n        return () => {\n          debug(event);\n          done();\n        };\n      }\n\n      transport._ending = true;\n      transport.once('finish', onDone('finished'));\n      transport.once('error', onDone('error'));\n    }, () => doExit && gracefulExit());\n\n    this.logger.log(info);\n\n    // If exitOnError is true, then only allow the logging of exceptions to\n    // take up to `3000ms`.\n    if (doExit) {\n      timeout = setTimeout(gracefulExit, 3000);\n    }\n  }\n\n  /**\n   * Returns the list of transports and exceptionHandlers for this instance.\n   * @returns {Array} - List of transports and exceptionHandlers for this\n   * instance.\n   * @private\n   */\n  _getExceptionHandlers() {\n    // Remark (indexzero): since `logger.transports` returns all of the pipes\n    // from the _readableState of the stream we actually get the join of the\n    // explicit handlers and the implicit transports with\n    // `handleExceptions: true`\n    return this.logger.transports.filter(wrap => {\n      const transport = wrap.transport || wrap;\n      return transport.handleExceptions;\n    });\n  }\n};\n","/**\n * exception-stream.js: TODO: add file header handler.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst { Writable } = require('readable-stream');\n\n/**\n * TODO: add class description.\n * @type {ExceptionStream}\n * @extends {Writable}\n */\nmodule.exports = class ExceptionStream extends Writable {\n  /**\n   * Constructor function for the ExceptionStream responsible for wrapping a\n   * TransportStream; only allowing writes of `info` objects with\n   * `info.exception` set to true.\n   * @param {!TransportStream} transport - Stream to filter to exceptions\n   */\n  constructor(transport) {\n    super({ objectMode: true });\n\n    if (!transport) {\n      throw new Error('ExceptionStream requires a TransportStream instance.');\n    }\n\n    // Remark (indexzero): we set `handleExceptions` here because it's the\n    // predicate checked in ExceptionHandler.prototype.__getExceptionHandlers\n    this.handleExceptions = true;\n    this.transport = transport;\n  }\n\n  /**\n   * Writes the info object to our transport instance if (and only if) the\n   * `exception` property is set on the info.\n   * @param {mixed} info - TODO: add param description.\n   * @param {mixed} enc - TODO: add param description.\n   * @param {mixed} callback - TODO: add param description.\n   * @returns {mixed} - TODO: add return description.\n   * @private\n   */\n  _write(info, enc, callback) {\n    if (info.exception) {\n      return this.transport.log(info, callback);\n    }\n\n    callback();\n    return true;\n  }\n};\n","/**\n * logger.js: TODO: add file header description.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst { Stream, Transform } = require('readable-stream');\nconst asyncForEach = require('async/forEach');\nconst { LEVEL, SPLAT } = require('triple-beam');\nconst isStream = require('is-stream');\nconst ExceptionHandler = require('./exception-handler');\nconst RejectionHandler = require('./rejection-handler');\nconst LegacyTransportStream = require('winston-transport/legacy');\nconst Profiler = require('./profiler');\nconst { warn } = require('./common');\nconst config = require('./config');\n\n/**\n * Captures the number of format (i.e. %s strings) in a given string.\n * Based on `util.format`, see Node.js source:\n * https://github.com/nodejs/node/blob/b1c8f15c5f169e021f7c46eb7b219de95fe97603/lib/util.js#L201-L230\n * @type {RegExp}\n */\nconst formatRegExp = /%[scdjifoO%]/g;\n\n/**\n * TODO: add class description.\n * @type {Logger}\n * @extends {Transform}\n */\nclass Logger extends Transform {\n  /**\n   * Constructor function for the Logger object responsible for persisting log\n   * messages and metadata to one or more transports.\n   * @param {!Object} options - foo\n   */\n  constructor(options) {\n    super({ objectMode: true });\n    this.configure(options);\n  }\n\n  child(defaultRequestMetadata) {\n    const logger = this;\n    return Object.create(logger, {\n      write: {\n        value: function (info) {\n          const infoClone = Object.assign(\n            {},\n            defaultRequestMetadata,\n            info\n          );\n\n          // Object.assign doesn't copy inherited Error\n          // properties so we have to do that explicitly\n          //\n          // Remark (indexzero): we should remove this\n          // since the errors format will handle this case.\n          //\n          if (info instanceof Error) {\n            infoClone.stack = info.stack;\n            infoClone.message = info.message;\n          }\n\n          logger.write(infoClone);\n        }\n      }\n    });\n  }\n\n  /**\n   * This will wholesale reconfigure this instance by:\n   * 1. Resetting all transports. Older transports will be removed implicitly.\n   * 2. Set all other options including levels, colors, rewriters, filters,\n   *    exceptionHandlers, etc.\n   * @param {!Object} options - TODO: add param description.\n   * @returns {undefined}\n   */\n  configure({\n    silent,\n    format,\n    defaultMeta,\n    levels,\n    level = 'info',\n    exitOnError = true,\n    transports,\n    colors,\n    emitErrs,\n    formatters,\n    padLevels,\n    rewriters,\n    stripColors,\n    exceptionHandlers,\n    rejectionHandlers\n  } = {}) {\n    // Reset transports if we already have them\n    if (this.transports.length) {\n      this.clear();\n    }\n\n    this.silent = silent;\n    this.format = format || this.format || require('logform/json')();\n\n    this.defaultMeta = defaultMeta || null;\n    // Hoist other options onto this instance.\n    this.levels = levels || this.levels || config.npm.levels;\n    this.level = level;\n    if (this.exceptions) {\n      this.exceptions.unhandle();\n    }\n    if (this.rejections) {\n      this.rejections.unhandle();\n    }\n    this.exceptions = new ExceptionHandler(this);\n    this.rejections = new RejectionHandler(this);\n    this.profilers = {};\n    this.exitOnError = exitOnError;\n\n    // Add all transports we have been provided.\n    if (transports) {\n      transports = Array.isArray(transports) ? transports : [transports];\n      transports.forEach(transport => this.add(transport));\n    }\n\n    if (\n      colors ||\n      emitErrs ||\n      formatters ||\n      padLevels ||\n      rewriters ||\n      stripColors\n    ) {\n      throw new Error(\n        [\n          '{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.',\n          'Use a custom winston.format(function) instead.',\n          'See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md'\n        ].join('\\n')\n      );\n    }\n\n    if (exceptionHandlers) {\n      this.exceptions.handle(exceptionHandlers);\n    }\n    if (rejectionHandlers) {\n      this.rejections.handle(rejectionHandlers);\n    }\n  }\n\n  isLevelEnabled(level) {\n    const givenLevelValue = getLevelValue(this.levels, level);\n    if (givenLevelValue === null) {\n      return false;\n    }\n\n    const configuredLevelValue = getLevelValue(this.levels, this.level);\n    if (configuredLevelValue === null) {\n      return false;\n    }\n\n    if (!this.transports || this.transports.length === 0) {\n      return configuredLevelValue >= givenLevelValue;\n    }\n\n    const index = this.transports.findIndex(transport => {\n      let transportLevelValue = getLevelValue(this.levels, transport.level);\n      if (transportLevelValue === null) {\n        transportLevelValue = configuredLevelValue;\n      }\n      return transportLevelValue >= givenLevelValue;\n    });\n    return index !== -1;\n  }\n\n  /* eslint-disable valid-jsdoc */\n  /**\n   * Ensure backwards compatibility with a `log` method\n   * @param {mixed} level - Level the log message is written at.\n   * @param {mixed} msg - TODO: add param description.\n   * @param {mixed} meta - TODO: add param description.\n   * @returns {Logger} - TODO: add return description.\n   *\n   * @example\n   *    // Supports the existing API:\n   *    logger.log('info', 'Hello world', { custom: true });\n   *    logger.log('info', new Error('Yo, it\\'s on fire'));\n   *\n   *    // Requires winston.format.splat()\n   *    logger.log('info', '%s %d%%', 'A string', 50, { thisIsMeta: true });\n   *\n   *    // And the new API with a single JSON literal:\n   *    logger.log({ level: 'info', message: 'Hello world', custom: true });\n   *    logger.log({ level: 'info', message: new Error('Yo, it\\'s on fire') });\n   *\n   *    // Also requires winston.format.splat()\n   *    logger.log({\n   *      level: 'info',\n   *      message: '%s %d%%',\n   *      [SPLAT]: ['A string', 50],\n   *      meta: { thisIsMeta: true }\n   *    });\n   *\n   */\n  /* eslint-enable valid-jsdoc */\n  log(level, msg, ...splat) {\n    // eslint-disable-line max-params\n    // Optimize for the hotpath of logging JSON literals\n    if (arguments.length === 1) {\n      // Yo dawg, I heard you like levels ... seriously ...\n      // In this context the LHS `level` here is actually the `info` so read\n      // this as: info[LEVEL] = info.level;\n      level[LEVEL] = level.level;\n      this._addDefaultMeta(level);\n      this.write(level);\n      return this;\n    }\n\n    // Slightly less hotpath, but worth optimizing for.\n    if (arguments.length === 2) {\n      if (msg && typeof msg === 'object') {\n        msg[LEVEL] = msg.level = level;\n        this._addDefaultMeta(msg);\n        this.write(msg);\n        return this;\n      }\n\n      msg = { [LEVEL]: level, level, message: msg };\n      this._addDefaultMeta(msg);\n      this.write(msg);\n      return this;\n    }\n\n    const [meta] = splat;\n    if (typeof meta === 'object' && meta !== null) {\n      // Extract tokens, if none available default to empty array to\n      // ensure consistancy in expected results\n      const tokens = msg && msg.match && msg.match(formatRegExp);\n\n      if (!tokens) {\n        const info = Object.assign({}, this.defaultMeta, meta, {\n          [LEVEL]: level,\n          [SPLAT]: splat,\n          level,\n          message: msg\n        });\n\n        if (meta.message) info.message = `${info.message} ${meta.message}`;\n        if (meta.stack) info.stack = meta.stack;\n\n        this.write(info);\n        return this;\n      }\n    }\n\n    this.write(Object.assign({}, this.defaultMeta, {\n      [LEVEL]: level,\n      [SPLAT]: splat,\n      level,\n      message: msg\n    }));\n\n    return this;\n  }\n\n  /**\n   * Pushes data so that it can be picked up by all of our pipe targets.\n   * @param {mixed} info - TODO: add param description.\n   * @param {mixed} enc - TODO: add param description.\n   * @param {mixed} callback - Continues stream processing.\n   * @returns {undefined}\n   * @private\n   */\n  _transform(info, enc, callback) {\n    if (this.silent) {\n      return callback();\n    }\n\n    // [LEVEL] is only soft guaranteed to be set here since we are a proper\n    // stream. It is likely that `info` came in through `.log(info)` or\n    // `.info(info)`. If it is not defined, however, define it.\n    // This LEVEL symbol is provided by `triple-beam` and also used in:\n    // - logform\n    // - winston-transport\n    // - abstract-winston-transport\n    if (!info[LEVEL]) {\n      info[LEVEL] = info.level;\n    }\n\n    // Remark: really not sure what to do here, but this has been reported as\n    // very confusing by pre winston@2.0.0 users as quite confusing when using\n    // custom levels.\n    if (!this.levels[info[LEVEL]] && this.levels[info[LEVEL]] !== 0) {\n      // eslint-disable-next-line no-console\n      console.error('[winston] Unknown logger level: %s', info[LEVEL]);\n    }\n\n    // Remark: not sure if we should simply error here.\n    if (!this._readableState.pipes) {\n      // eslint-disable-next-line no-console\n      console.error(\n        '[winston] Attempt to write logs with no transports, which can increase memory usage: %j',\n        info\n      );\n    }\n\n    // Here we write to the `format` pipe-chain, which on `readable` above will\n    // push the formatted `info` Object onto the buffer for this instance. We trap\n    // (and re-throw) any errors generated by the user-provided format, but also\n    // guarantee that the streams callback is invoked so that we can continue flowing.\n    try {\n      this.push(this.format.transform(info, this.format.options));\n    } finally {\n      this._writableState.sync = false;\n      // eslint-disable-next-line callback-return\n      callback();\n    }\n  }\n\n  /**\n   * Delays the 'finish' event until all transport pipe targets have\n   * also emitted 'finish' or are already finished.\n   * @param {mixed} callback - Continues stream processing.\n   */\n  _final(callback) {\n    const transports = this.transports.slice();\n    asyncForEach(\n      transports,\n      (transport, next) => {\n        if (!transport || transport.finished) return setImmediate(next);\n        transport.once('finish', next);\n        transport.end();\n      },\n      callback\n    );\n  }\n\n  /**\n   * Adds the transport to this logger instance by piping to it.\n   * @param {mixed} transport - TODO: add param description.\n   * @returns {Logger} - TODO: add return description.\n   */\n  add(transport) {\n    // Support backwards compatibility with all existing `winston < 3.x.x`\n    // transports which meet one of two criteria:\n    // 1. They inherit from winston.Transport in  < 3.x.x which is NOT a stream.\n    // 2. They expose a log method which has a length greater than 2 (i.e. more then\n    //    just `log(info, callback)`.\n    const target =\n      !isStream(transport) || transport.log.length > 2\n        ? new LegacyTransportStream({ transport })\n        : transport;\n\n    if (!target._writableState || !target._writableState.objectMode) {\n      throw new Error(\n        'Transports must WritableStreams in objectMode. Set { objectMode: true }.'\n      );\n    }\n\n    // Listen for the `error` event and the `warn` event on the new Transport.\n    this._onEvent('error', target);\n    this._onEvent('warn', target);\n    this.pipe(target);\n\n    if (transport.handleExceptions) {\n      this.exceptions.handle();\n    }\n\n    if (transport.handleRejections) {\n      this.rejections.handle();\n    }\n\n    return this;\n  }\n\n  /**\n   * Removes the transport from this logger instance by unpiping from it.\n   * @param {mixed} transport - TODO: add param description.\n   * @returns {Logger} - TODO: add return description.\n   */\n  remove(transport) {\n    if (!transport) return this;\n    let target = transport;\n    if (!isStream(transport) || transport.log.length > 2) {\n      target = this.transports.filter(\n        match => match.transport === transport\n      )[0];\n    }\n\n    if (target) {\n      this.unpipe(target);\n    }\n    return this;\n  }\n\n  /**\n   * Removes all transports from this logger instance.\n   * @returns {Logger} - TODO: add return description.\n   */\n  clear() {\n    this.unpipe();\n    return this;\n  }\n\n  /**\n   * Cleans up resources (streams, event listeners) for all transports\n   * associated with this instance (if necessary).\n   * @returns {Logger} - TODO: add return description.\n   */\n  close() {\n    this.exceptions.unhandle();\n    this.rejections.unhandle();\n    this.clear();\n    this.emit('close');\n    return this;\n  }\n\n  /**\n   * Sets the `target` levels specified on this instance.\n   * @param {Object} Target levels to use on this instance.\n   */\n  setLevels() {\n    warn.deprecated('setLevels');\n  }\n\n  /**\n   * Queries the all transports for this instance with the specified `options`.\n   * This will aggregate each transport's results into one object containing\n   * a property per transport.\n   * @param {Object} options - Query options for this instance.\n   * @param {function} callback - Continuation to respond to when complete.\n   */\n  query(options, callback) {\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n\n    options = options || {};\n    const results = {};\n    const queryObject = Object.assign({}, options.query || {});\n\n    // Helper function to query a single transport\n    function queryTransport(transport, next) {\n      if (options.query && typeof transport.formatQuery === 'function') {\n        options.query = transport.formatQuery(queryObject);\n      }\n\n      transport.query(options, (err, res) => {\n        if (err) {\n          return next(err);\n        }\n\n        if (typeof transport.formatResults === 'function') {\n          res = transport.formatResults(res, options.format);\n        }\n\n        next(null, res);\n      });\n    }\n\n    // Helper function to accumulate the results from `queryTransport` into\n    // the `results`.\n    function addResults(transport, next) {\n      queryTransport(transport, (err, result) => {\n        // queryTransport could potentially invoke the callback multiple times\n        // since Transport code can be unpredictable.\n        if (next) {\n          result = err || result;\n          if (result) {\n            results[transport.name] = result;\n          }\n\n          // eslint-disable-next-line callback-return\n          next();\n        }\n\n        next = null;\n      });\n    }\n\n    // Iterate over the transports in parallel setting the appropriate key in\n    // the `results`.\n    asyncForEach(\n      this.transports.filter(transport => !!transport.query),\n      addResults,\n      () => callback(null, results)\n    );\n  }\n\n  /**\n   * Returns a log stream for all transports. Options object is optional.\n   * @param{Object} options={} - Stream options for this instance.\n   * @returns {Stream} - TODO: add return description.\n   */\n  stream(options = {}) {\n    const out = new Stream();\n    const streams = [];\n\n    out._streams = streams;\n    out.destroy = () => {\n      let i = streams.length;\n      while (i--) {\n        streams[i].destroy();\n      }\n    };\n\n    // Create a list of all transports for this instance.\n    this.transports\n      .filter(transport => !!transport.stream)\n      .forEach(transport => {\n        const str = transport.stream(options);\n        if (!str) {\n          return;\n        }\n\n        streams.push(str);\n\n        str.on('log', log => {\n          log.transport = log.transport || [];\n          log.transport.push(transport.name);\n          out.emit('log', log);\n        });\n\n        str.on('error', err => {\n          err.transport = err.transport || [];\n          err.transport.push(transport.name);\n          out.emit('error', err);\n        });\n      });\n\n    return out;\n  }\n\n  /**\n   * Returns an object corresponding to a specific timing. When done is called\n   * the timer will finish and log the duration. e.g.:\n   * @returns {Profile} - TODO: add return description.\n   * @example\n   *    const timer = winston.startTimer()\n   *    setTimeout(() => {\n   *      timer.done({\n   *        message: 'Logging message'\n   *      });\n   *    }, 1000);\n   */\n  startTimer() {\n    return new Profiler(this);\n  }\n\n  /**\n   * Tracks the time inbetween subsequent calls to this method with the same\n   * `id` parameter. The second call to this method will log the difference in\n   * milliseconds along with the message.\n   * @param {string} id Unique id of the profiler\n   * @returns {Logger} - TODO: add return description.\n   */\n  profile(id, ...args) {\n    const time = Date.now();\n    if (this.profilers[id]) {\n      const timeEnd = this.profilers[id];\n      delete this.profilers[id];\n\n      // Attempt to be kind to users if they are still using older APIs.\n      if (typeof args[args.length - 2] === 'function') {\n        // eslint-disable-next-line no-console\n        console.warn(\n          'Callback function no longer supported as of winston@3.0.0'\n        );\n        args.pop();\n      }\n\n      // Set the duration property of the metadata\n      const info = typeof args[args.length - 1] === 'object' ? args.pop() : {};\n      info.level = info.level || 'info';\n      info.durationMs = time - timeEnd;\n      info.message = info.message || id;\n      return this.write(info);\n    }\n\n    this.profilers[id] = time;\n    return this;\n  }\n\n  /**\n   * Backwards compatibility to `exceptions.handle` in winston < 3.0.0.\n   * @returns {undefined}\n   * @deprecated\n   */\n  handleExceptions(...args) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      'Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()'\n    );\n    this.exceptions.handle(...args);\n  }\n\n  /**\n   * Backwards compatibility to `exceptions.handle` in winston < 3.0.0.\n   * @returns {undefined}\n   * @deprecated\n   */\n  unhandleExceptions(...args) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      'Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()'\n    );\n    this.exceptions.unhandle(...args);\n  }\n\n  /**\n   * Throw a more meaningful deprecation notice\n   * @throws {Error} - TODO: add throws description.\n   */\n  cli() {\n    throw new Error(\n      [\n        'Logger.cli() was removed in winston@3.0.0',\n        'Use a custom winston.formats.cli() instead.',\n        'See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md'\n      ].join('\\n')\n    );\n  }\n\n  /**\n   * Bubbles the `event` that occured on the specified `transport` up\n   * from this instance.\n   * @param {string} event - The event that occured\n   * @param {Object} transport - Transport on which the event occured\n   * @private\n   */\n  _onEvent(event, transport) {\n    function transportEvent(err) {\n      // https://github.com/winstonjs/winston/issues/1364\n      if (event === 'error' && !this.transports.includes(transport)) {\n        this.add(transport);\n      }\n      this.emit(event, err, transport);\n    }\n\n    if (!transport['__winston' + event]) {\n      transport['__winston' + event] = transportEvent.bind(this);\n      transport.on(event, transport['__winston' + event]);\n    }\n  }\n\n  _addDefaultMeta(msg) {\n    if (this.defaultMeta) {\n      Object.assign(msg, this.defaultMeta);\n    }\n  }\n}\n\nfunction getLevelValue(levels, level) {\n  const value = levels[level];\n  if (!value && value !== 0) {\n    return null;\n  }\n  return value;\n}\n\n/**\n * Represents the current readableState pipe targets for this Logger instance.\n * @type {Array|Object}\n */\nObject.defineProperty(Logger.prototype, 'transports', {\n  configurable: false,\n  enumerable: true,\n  get() {\n    const { pipes } = this._readableState;\n    return !Array.isArray(pipes) ? [pipes].filter(Boolean) : pipes;\n  }\n});\n\nmodule.exports = Logger;\n","/**\n * profiler.js: TODO: add file header description.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n/**\n * TODO: add class description.\n * @type {Profiler}\n * @private\n */\nclass Profiler {\n  /**\n   * Constructor function for the Profiler instance used by\n   * `Logger.prototype.startTimer`. When done is called the timer will finish\n   * and log the duration.\n   * @param {!Logger} logger - TODO: add param description.\n   * @private\n   */\n  constructor(logger) {\n    const Logger = require('./logger');\n    if (typeof logger !== 'object' || Array.isArray(logger) || !(logger instanceof Logger)) {\n      throw new Error('Logger is required for profiling');\n    } else {\n      this.logger = logger;\n      this.start = Date.now();\n    }\n  }\n\n  /**\n   * Ends the current timer (i.e. Profiler) instance and logs the `msg` along\n   * with the duration since creation.\n   * @returns {mixed} - TODO: add return description.\n   * @private\n   */\n  done(...args) {\n    if (typeof args[args.length - 1] === 'function') {\n      // eslint-disable-next-line no-console\n      console.warn('Callback function no longer supported as of winston@3.0.0');\n      args.pop();\n    }\n\n    const info = typeof args[args.length - 1] === 'object' ? args.pop() : {};\n    info.level = info.level || 'info';\n    info.durationMs = (Date.now()) - this.start;\n\n    return this.logger.write(info);\n  }\n};\n\nmodule.exports = Profiler;\n","/**\n * exception-handler.js: Object for handling uncaughtException events.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst os = require('os');\nconst asyncForEach = require('async/forEach');\nconst debug = require('@dabh/diagnostics')('winston:rejection');\nconst once = require('one-time');\nconst stackTrace = require('stack-trace');\nconst RejectionStream = require('./rejection-stream');\n\n/**\n * Object for handling unhandledRejection events.\n * @type {RejectionHandler}\n */\nmodule.exports = class RejectionHandler {\n  /**\n   * TODO: add contructor description\n   * @param {!Logger} logger - TODO: add param description\n   */\n  constructor(logger) {\n    if (!logger) {\n      throw new Error('Logger is required to handle rejections');\n    }\n\n    this.logger = logger;\n    this.handlers = new Map();\n  }\n\n  /**\n   * Handles `unhandledRejection` events for the current process by adding any\n   * handlers passed in.\n   * @returns {undefined}\n   */\n  handle(...args) {\n    args.forEach(arg => {\n      if (Array.isArray(arg)) {\n        return arg.forEach(handler => this._addHandler(handler));\n      }\n\n      this._addHandler(arg);\n    });\n\n    if (!this.catcher) {\n      this.catcher = this._unhandledRejection.bind(this);\n      process.on('unhandledRejection', this.catcher);\n    }\n  }\n\n  /**\n   * Removes any handlers to `unhandledRejection` events for the current\n   * process. This does not modify the state of the `this.handlers` set.\n   * @returns {undefined}\n   */\n  unhandle() {\n    if (this.catcher) {\n      process.removeListener('unhandledRejection', this.catcher);\n      this.catcher = false;\n\n      Array.from(this.handlers.values()).forEach(wrapper =>\n        this.logger.unpipe(wrapper)\n      );\n    }\n  }\n\n  /**\n   * TODO: add method description\n   * @param {Error} err - Error to get information about.\n   * @returns {mixed} - TODO: add return description.\n   */\n  getAllInfo(err) {\n    let message = null;\n    if (err) {\n      message = typeof err === 'string' ? err : err.message;\n    }\n\n    return {\n      error: err,\n      // TODO (indexzero): how do we configure this?\n      level: 'error',\n      message: [\n        `unhandledRejection: ${message || '(no error message)'}`,\n        err && err.stack || '  No stack trace'\n      ].join('\\n'),\n      stack: err && err.stack,\n      rejection: true,\n      date: new Date().toString(),\n      process: this.getProcessInfo(),\n      os: this.getOsInfo(),\n      trace: this.getTrace(err)\n    };\n  }\n\n  /**\n   * Gets all relevant process information for the currently running process.\n   * @returns {mixed} - TODO: add return description.\n   */\n  getProcessInfo() {\n    return {\n      pid: process.pid,\n      uid: process.getuid ? process.getuid() : null,\n      gid: process.getgid ? process.getgid() : null,\n      cwd: process.cwd(),\n      execPath: process.execPath,\n      version: process.version,\n      argv: process.argv,\n      memoryUsage: process.memoryUsage()\n    };\n  }\n\n  /**\n   * Gets all relevant OS information for the currently running process.\n   * @returns {mixed} - TODO: add return description.\n   */\n  getOsInfo() {\n    return {\n      loadavg: os.loadavg(),\n      uptime: os.uptime()\n    };\n  }\n\n  /**\n   * Gets a stack trace for the specified error.\n   * @param {mixed} err - TODO: add param description.\n   * @returns {mixed} - TODO: add return description.\n   */\n  getTrace(err) {\n    const trace = err ? stackTrace.parse(err) : stackTrace.get();\n    return trace.map(site => {\n      return {\n        column: site.getColumnNumber(),\n        file: site.getFileName(),\n        function: site.getFunctionName(),\n        line: site.getLineNumber(),\n        method: site.getMethodName(),\n        native: site.isNative()\n      };\n    });\n  }\n\n  /**\n   * Helper method to add a transport as an exception handler.\n   * @param {Transport} handler - The transport to add as an exception handler.\n   * @returns {void}\n   */\n  _addHandler(handler) {\n    if (!this.handlers.has(handler)) {\n      handler.handleRejections = true;\n      const wrapper = new RejectionStream(handler);\n      this.handlers.set(handler, wrapper);\n      this.logger.pipe(wrapper);\n    }\n  }\n\n  /**\n   * Logs all relevant information around the `err` and exits the current\n   * process.\n   * @param {Error} err - Error to handle\n   * @returns {mixed} - TODO: add return description.\n   * @private\n   */\n  _unhandledRejection(err) {\n    const info = this.getAllInfo(err);\n    const handlers = this._getRejectionHandlers();\n    // Calculate if we should exit on this error\n    let doExit =\n      typeof this.logger.exitOnError === 'function'\n        ? this.logger.exitOnError(err)\n        : this.logger.exitOnError;\n    let timeout;\n\n    if (!handlers.length && doExit) {\n      // eslint-disable-next-line no-console\n      console.warn('winston: exitOnError cannot be true with no rejection handlers.');\n      // eslint-disable-next-line no-console\n      console.warn('winston: not exiting process.');\n      doExit = false;\n    }\n\n    function gracefulExit() {\n      debug('doExit', doExit);\n      debug('process._exiting', process._exiting);\n\n      if (doExit && !process._exiting) {\n        // Remark: Currently ignoring any rejections from transports when\n        // catching unhandled rejections.\n        if (timeout) {\n          clearTimeout(timeout);\n        }\n        // eslint-disable-next-line no-process-exit\n        process.exit(1);\n      }\n    }\n\n    if (!handlers || handlers.length === 0) {\n      return process.nextTick(gracefulExit);\n    }\n\n    // Log to all transports attempting to listen for when they are completed.\n    asyncForEach(\n      handlers,\n      (handler, next) => {\n        const done = once(next);\n        const transport = handler.transport || handler;\n\n        // Debug wrapping so that we can inspect what's going on under the covers.\n        function onDone(event) {\n          return () => {\n            debug(event);\n            done();\n          };\n        }\n\n        transport._ending = true;\n        transport.once('finish', onDone('finished'));\n        transport.once('error', onDone('error'));\n      },\n      () => doExit && gracefulExit()\n    );\n\n    this.logger.log(info);\n\n    // If exitOnError is true, then only allow the logging of exceptions to\n    // take up to `3000ms`.\n    if (doExit) {\n      timeout = setTimeout(gracefulExit, 3000);\n    }\n  }\n\n  /**\n   * Returns the list of transports and exceptionHandlers for this instance.\n   * @returns {Array} - List of transports and exceptionHandlers for this\n   * instance.\n   * @private\n   */\n  _getRejectionHandlers() {\n    // Remark (indexzero): since `logger.transports` returns all of the pipes\n    // from the _readableState of the stream we actually get the join of the\n    // explicit handlers and the implicit transports with\n    // `handleRejections: true`\n    return this.logger.transports.filter(wrap => {\n      const transport = wrap.transport || wrap;\n      return transport.handleRejections;\n    });\n  }\n};\n","/**\n * rejection-stream.js: TODO: add file header handler.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst { Writable } = require('readable-stream');\n\n/**\n * TODO: add class description.\n * @type {RejectionStream}\n * @extends {Writable}\n */\nmodule.exports = class RejectionStream extends Writable {\n  /**\n   * Constructor function for the RejectionStream responsible for wrapping a\n   * TransportStream; only allowing writes of `info` objects with\n   * `info.rejection` set to true.\n   * @param {!TransportStream} transport - Stream to filter to rejections\n   */\n  constructor(transport) {\n    super({ objectMode: true });\n\n    if (!transport) {\n      throw new Error('RejectionStream requires a TransportStream instance.');\n    }\n\n    this.handleRejections = true;\n    this.transport = transport;\n  }\n\n  /**\n   * Writes the info object to our transport instance if (and only if) the\n   * `rejection` property is set on the info.\n   * @param {mixed} info - TODO: add param description.\n   * @param {mixed} enc - TODO: add param description.\n   * @param {mixed} callback - TODO: add param description.\n   * @returns {mixed} - TODO: add return description.\n   * @private\n   */\n  _write(info, enc, callback) {\n    if (info.rejection) {\n      return this.transport.log(info, callback);\n    }\n\n    callback();\n    return true;\n  }\n};\n","/**\n * tail-file.js: TODO: add file header description.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst fs = require('fs');\nconst { StringDecoder } = require('string_decoder');\nconst { Stream } = require('readable-stream');\n\n/**\n * Simple no-op function.\n * @returns {undefined}\n */\nfunction noop() {}\n\n/**\n * TODO: add function description.\n * @param {Object} options - Options for tail.\n * @param {function} iter - Iterator function to execute on every line.\n* `tail -f` a file. Options must include file.\n * @returns {mixed} - TODO: add return description.\n */\nmodule.exports = (options, iter) => {\n  const buffer = Buffer.alloc(64 * 1024);\n  const decode = new StringDecoder('utf8');\n  const stream = new Stream();\n  let buff = '';\n  let pos = 0;\n  let row = 0;\n\n  if (options.start === -1) {\n    delete options.start;\n  }\n\n  stream.readable = true;\n  stream.destroy = () => {\n    stream.destroyed = true;\n    stream.emit('end');\n    stream.emit('close');\n  };\n\n  fs.open(options.file, 'a+', '0644', (err, fd) => {\n    if (err) {\n      if (!iter) {\n        stream.emit('error', err);\n      } else {\n        iter(err);\n      }\n      stream.destroy();\n      return;\n    }\n\n    (function read() {\n      if (stream.destroyed) {\n        fs.close(fd, noop);\n        return;\n      }\n\n      return fs.read(fd, buffer, 0, buffer.length, pos, (error, bytes) => {\n        if (error) {\n          if (!iter) {\n            stream.emit('error', error);\n          } else {\n            iter(error);\n          }\n          stream.destroy();\n          return;\n        }\n\n        if (!bytes) {\n          if (buff) {\n            // eslint-disable-next-line eqeqeq\n            if (options.start == null || row > options.start) {\n              if (!iter) {\n                stream.emit('line', buff);\n              } else {\n                iter(null, buff);\n              }\n            }\n            row++;\n            buff = '';\n          }\n          return setTimeout(read, 1000);\n        }\n\n        let data = decode.write(buffer.slice(0, bytes));\n        if (!iter) {\n          stream.emit('data', data);\n        }\n\n        data = (buff + data).split(/\\n+/);\n\n        const l = data.length - 1;\n        let i = 0;\n\n        for (; i < l; i++) {\n          // eslint-disable-next-line eqeqeq\n          if (options.start == null || row > options.start) {\n            if (!iter) {\n              stream.emit('line', data[i]);\n            } else {\n              iter(null, data[i]);\n            }\n          }\n          row++;\n        }\n\n        buff = data[l];\n        pos += bytes;\n        return read();\n      });\n    }());\n  });\n\n  if (!iter) {\n    return stream;\n  }\n\n  return stream.destroy;\n};\n","/* eslint-disable no-console */\n/*\n * console.js: Transport for outputting to the console.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst os = require('os');\nconst { LEVEL, MESSAGE } = require('triple-beam');\nconst TransportStream = require('winston-transport');\n\n/**\n * Transport for outputting to the console.\n * @type {Console}\n * @extends {TransportStream}\n */\nmodule.exports = class Console extends TransportStream {\n  /**\n   * Constructor function for the Console transport object responsible for\n   * persisting log messages and metadata to a terminal or TTY.\n   * @param {!Object} [options={}] - Options for this instance.\n   */\n  constructor(options = {}) {\n    super(options);\n\n    // Expose the name of this Transport on the prototype\n    this.name = options.name || 'console';\n    this.stderrLevels = this._stringArrayToSet(options.stderrLevels);\n    this.consoleWarnLevels = this._stringArrayToSet(options.consoleWarnLevels);\n    this.eol = typeof options.eol === 'string' ? options.eol : os.EOL;\n    this.forceConsole = options.forceConsole || false;\n\n    // Keep a reference to the log, warn, and error console methods\n    // in case they get redirected to this transport after the logger is\n    // instantiated. This prevents a circular reference issue.\n    this._consoleLog = console.log.bind(console);\n    this._consoleWarn = console.warn.bind(console);\n    this._consoleError = console.error.bind(console);\n\n    this.setMaxListeners(30);\n  }\n\n  /**\n   * Core logging method exposed to Winston.\n   * @param {Object} info - TODO: add param description.\n   * @param {Function} callback - TODO: add param description.\n   * @returns {undefined}\n   */\n  log(info, callback) {\n    setImmediate(() => this.emit('logged', info));\n\n    // Remark: what if there is no raw...?\n    if (this.stderrLevels[info[LEVEL]]) {\n      if (console._stderr && !this.forceConsole) {\n        // Node.js maps `process.stderr` to `console._stderr`.\n        console._stderr.write(`${info[MESSAGE]}${this.eol}`);\n      } else {\n        // console.error adds a newline\n        this._consoleError(info[MESSAGE]);\n      }\n\n      if (callback) {\n        callback(); // eslint-disable-line callback-return\n      }\n      return;\n    } else if (this.consoleWarnLevels[info[LEVEL]]) {\n      if (console._stderr && !this.forceConsole) {\n        // Node.js maps `process.stderr` to `console._stderr`.\n        // in Node.js console.warn is an alias for console.error\n        console._stderr.write(`${info[MESSAGE]}${this.eol}`);\n      } else {\n        // console.warn adds a newline\n        this._consoleWarn(info[MESSAGE]);\n      }\n\n      if (callback) {\n        callback(); // eslint-disable-line callback-return\n      }\n      return;\n    }\n\n    if (console._stdout && !this.forceConsole) {\n      // Node.js maps `process.stdout` to `console._stdout`.\n      console._stdout.write(`${info[MESSAGE]}${this.eol}`);\n    } else {\n      // console.log adds a newline.\n      this._consoleLog(info[MESSAGE]);\n    }\n\n    if (callback) {\n      callback(); // eslint-disable-line callback-return\n    }\n  }\n\n  /**\n   * Returns a Set-like object with strArray's elements as keys (each with the\n   * value true).\n   * @param {Array} strArray - Array of Set-elements as strings.\n   * @param {?string} [errMsg] - Custom error message thrown on invalid input.\n   * @returns {Object} - TODO: add return description.\n   * @private\n   */\n  _stringArrayToSet(strArray, errMsg) {\n    if (!strArray) return {};\n\n    errMsg =\n      errMsg || 'Cannot make set from type other than Array of string elements';\n\n    if (!Array.isArray(strArray)) {\n      throw new Error(errMsg);\n    }\n\n    return strArray.reduce((set, el) => {\n      if (typeof el !== 'string') {\n        throw new Error(errMsg);\n      }\n      set[el] = true;\n\n      return set;\n    }, {});\n  }\n};\n","/* eslint-disable complexity,max-statements */\n/**\n * file.js: Transport for outputting to a local log file.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst fs = require('fs');\nconst path = require('path');\nconst asyncSeries = require('async/series');\nconst zlib = require('zlib');\nconst { MESSAGE } = require('triple-beam');\nconst { Stream, PassThrough } = require('readable-stream');\nconst TransportStream = require('winston-transport');\nconst debug = require('@dabh/diagnostics')('winston:file');\nconst os = require('os');\nconst tailFile = require('../tail-file');\n\n/**\n * Transport for outputting to a local log file.\n * @type {File}\n * @extends {TransportStream}\n */\nmodule.exports = class File extends TransportStream {\n  /**\n   * Constructor function for the File transport object responsible for\n   * persisting log messages and metadata to one or more files.\n   * @param {Object} options - Options for this instance.\n   */\n  constructor(options = {}) {\n    super(options);\n\n    // Expose the name of this Transport on the prototype.\n    this.name = options.name || 'file';\n\n    // Helper function which throws an `Error` in the event that any of the\n    // rest of the arguments is present in `options`.\n    function throwIf(target, ...args) {\n      args.slice(1).forEach(name => {\n        if (options[name]) {\n          throw new Error(`Cannot set ${name} and ${target} together`);\n        }\n      });\n    }\n\n    // Setup the base stream that always gets piped to to handle buffering.\n    this._stream = new PassThrough();\n    this._stream.setMaxListeners(30);\n\n    // Bind this context for listener methods.\n    this._onError = this._onError.bind(this);\n\n    if (options.filename || options.dirname) {\n      throwIf('filename or dirname', 'stream');\n      this._basename = this.filename = options.filename\n        ? path.basename(options.filename)\n        : 'winston.log';\n\n      this.dirname = options.dirname || path.dirname(options.filename);\n      this.options = options.options || { flags: 'a' };\n    } else if (options.stream) {\n      // eslint-disable-next-line no-console\n      console.warn('options.stream will be removed in winston@4. Use winston.transports.Stream');\n      throwIf('stream', 'filename', 'maxsize');\n      this._dest = this._stream.pipe(this._setupStream(options.stream));\n      this.dirname = path.dirname(this._dest.path);\n      // We need to listen for drain events when write() returns false. This\n      // can make node mad at times.\n    } else {\n      throw new Error('Cannot log to file without filename or stream.');\n    }\n\n    this.maxsize = options.maxsize || null;\n    this.rotationFormat = options.rotationFormat || false;\n    this.zippedArchive = options.zippedArchive || false;\n    this.maxFiles = options.maxFiles || null;\n    this.eol = (typeof options.eol === 'string') ? options.eol : os.EOL;\n    this.tailable = options.tailable || false;\n    this.lazy = options.lazy || false;\n\n    // Internal state variables representing the number of files this instance\n    // has created and the current size (in bytes) of the current logfile.\n    this._size = 0;\n    this._pendingSize = 0;\n    this._created = 0;\n    this._drain = false;\n    this._opening = false;\n    this._ending = false;\n    this._fileExist = false;\n\n    if (this.dirname) this._createLogDirIfNotExist(this.dirname);\n    if (!this.lazy) this.open();\n  }\n\n  finishIfEnding() {\n    if (this._ending) {\n      if (this._opening) {\n        this.once('open', () => {\n          this._stream.once('finish', () => this.emit('finish'));\n          setImmediate(() => this._stream.end());\n        });\n      } else {\n        this._stream.once('finish', () => this.emit('finish'));\n        setImmediate(() => this._stream.end());\n      }\n    }\n  }\n\n  /**\n   * Core logging method exposed to Winston. Metadata is optional.\n   * @param {Object} info - TODO: add param description.\n   * @param {Function} callback - TODO: add param description.\n   * @returns {undefined}\n   */\n  log(info, callback = () => { }) {\n    // Remark: (jcrugzz) What is necessary about this callback(null, true) now\n    // when thinking about 3.x? Should silent be handled in the base\n    // TransportStream _write method?\n    if (this.silent) {\n      callback();\n      return true;\n    }\n\n\n    // Output stream buffer is full and has asked us to wait for the drain event\n    if (this._drain) {\n      this._stream.once('drain', () => {\n        this._drain = false;\n        this.log(info, callback);\n      });\n      return;\n    }\n    if (this._rotate) {\n      this._stream.once('rotate', () => {\n        this._rotate = false;\n        this.log(info, callback);\n      });\n      return;\n    }\n    if (this.lazy) {\n      if (!this._fileExist) {\n        if (!this._opening) {\n          this.open();\n        }\n        this.once('open', () => {\n          this._fileExist = true;\n          this.log(info, callback);\n          return;\n        });\n        return;\n      }\n      if (this._needsNewFile(this._pendingSize)) {\n        this._dest.once('close', () => {\n          if (!this._opening) {\n            this.open();\n          }\n          this.once('open', () => {\n            this.log(info, callback);\n            return;\n          });\n          return;\n        });\n        return;\n      }\n    }\n\n    // Grab the raw string and append the expected EOL.\n    const output = `${info[MESSAGE]}${this.eol}`;\n    const bytes = Buffer.byteLength(output);\n\n    // After we have written to the PassThrough check to see if we need\n    // to rotate to the next file.\n    //\n    // Remark: This gets called too early and does not depict when data\n    // has been actually flushed to disk.\n    function logged() {\n      this._size += bytes;\n      this._pendingSize -= bytes;\n\n      debug('logged %s %s', this._size, output);\n      this.emit('logged', info);\n\n      // Do not attempt to rotate files while rotating\n      if (this._rotate) {\n        return;\n      }\n\n      // Do not attempt to rotate files while opening\n      if (this._opening) {\n        return;\n      }\n\n      // Check to see if we need to end the stream and create a new one.\n      if (!this._needsNewFile()) {\n        return;\n      }\n      if (this.lazy) {\n        this._endStream(() => {this.emit('fileclosed');});\n        return;\n      }\n\n      // End the current stream, ensure it flushes and create a new one.\n      // This could potentially be optimized to not run a stat call but its\n      // the safest way since we are supporting `maxFiles`.\n      this._rotate = true;\n      this._endStream(() => this._rotateFile());\n    }\n\n    // Keep track of the pending bytes being written while files are opening\n    // in order to properly rotate the PassThrough this._stream when the file\n    // eventually does open.\n    this._pendingSize += bytes;\n    if (this._opening\n      && !this.rotatedWhileOpening\n      && this._needsNewFile(this._size + this._pendingSize)) {\n      this.rotatedWhileOpening = true;\n    }\n\n    const written = this._stream.write(output, logged.bind(this));\n    if (!written) {\n      this._drain = true;\n      this._stream.once('drain', () => {\n        this._drain = false;\n        callback();\n      });\n    } else {\n      callback(); // eslint-disable-line callback-return\n    }\n\n    debug('written', written, this._drain);\n\n    this.finishIfEnding();\n\n    return written;\n  }\n\n  /**\n   * Query the transport. Options object is optional.\n   * @param {Object} options - Loggly-like query options for this instance.\n   * @param {function} callback - Continuation to respond to when complete.\n   * TODO: Refactor me.\n   */\n  query(options, callback) {\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n\n    options = normalizeQuery(options);\n    const file = path.join(this.dirname, this.filename);\n    let buff = '';\n    let results = [];\n    let row = 0;\n\n    const stream = fs.createReadStream(file, {\n      encoding: 'utf8'\n    });\n\n    stream.on('error', err => {\n      if (stream.readable) {\n        stream.destroy();\n      }\n      if (!callback) {\n        return;\n      }\n\n      return err.code !== 'ENOENT' ? callback(err) : callback(null, results);\n    });\n\n    stream.on('data', data => {\n      data = (buff + data).split(/\\n+/);\n      const l = data.length - 1;\n      let i = 0;\n\n      for (; i < l; i++) {\n        if (!options.start || row >= options.start) {\n          add(data[i]);\n        }\n        row++;\n      }\n\n      buff = data[l];\n    });\n\n    stream.on('close', () => {\n      if (buff) {\n        add(buff, true);\n      }\n      if (options.order === 'desc') {\n        results = results.reverse();\n      }\n\n      // eslint-disable-next-line callback-return\n      if (callback) callback(null, results);\n    });\n\n    function add(buff, attempt) {\n      try {\n        const log = JSON.parse(buff);\n        if (check(log)) {\n          push(log);\n        }\n      } catch (e) {\n        if (!attempt) {\n          stream.emit('error', e);\n        }\n      }\n    }\n\n    function push(log) {\n      if (\n        options.rows &&\n        results.length >= options.rows &&\n        options.order !== 'desc'\n      ) {\n        if (stream.readable) {\n          stream.destroy();\n        }\n        return;\n      }\n\n      if (options.fields) {\n        log = options.fields.reduce((obj, key) => {\n          obj[key] = log[key];\n          return obj;\n        }, {});\n      }\n\n      if (options.order === 'desc') {\n        if (results.length >= options.rows) {\n          results.shift();\n        }\n      }\n      results.push(log);\n    }\n\n    function check(log) {\n      if (!log) {\n        return;\n      }\n\n      if (typeof log !== 'object') {\n        return;\n      }\n\n      const time = new Date(log.timestamp);\n      if (\n        (options.from && time < options.from) ||\n        (options.until && time > options.until) ||\n        (options.level && options.level !== log.level)\n      ) {\n        return;\n      }\n\n      return true;\n    }\n\n    function normalizeQuery(options) {\n      options = options || {};\n\n      // limit\n      options.rows = options.rows || options.limit || 10;\n\n      // starting row offset\n      options.start = options.start || 0;\n\n      // now\n      options.until = options.until || new Date();\n      if (typeof options.until !== 'object') {\n        options.until = new Date(options.until);\n      }\n\n      // now - 24\n      options.from = options.from || (options.until - (24 * 60 * 60 * 1000));\n      if (typeof options.from !== 'object') {\n        options.from = new Date(options.from);\n      }\n\n      // 'asc' or 'desc'\n      options.order = options.order || 'desc';\n\n      return options;\n    }\n  }\n\n  /**\n   * Returns a log stream for this transport. Options object is optional.\n   * @param {Object} options - Stream options for this instance.\n   * @returns {Stream} - TODO: add return description.\n   * TODO: Refactor me.\n   */\n  stream(options = {}) {\n    const file = path.join(this.dirname, this.filename);\n    const stream = new Stream();\n    const tail = {\n      file,\n      start: options.start\n    };\n\n    stream.destroy = tailFile(tail, (err, line) => {\n      if (err) {\n        return stream.emit('error', err);\n      }\n\n      try {\n        stream.emit('data', line);\n        line = JSON.parse(line);\n        stream.emit('log', line);\n      } catch (e) {\n        stream.emit('error', e);\n      }\n    });\n\n    return stream;\n  }\n\n  /**\n   * Checks to see the filesize of.\n   * @returns {undefined}\n   */\n  open() {\n    // If we do not have a filename then we were passed a stream and\n    // don't need to keep track of size.\n    if (!this.filename) return;\n    if (this._opening) return;\n\n    this._opening = true;\n\n    // Stat the target file to get the size and create the stream.\n    this.stat((err, size) => {\n      if (err) {\n        return this.emit('error', err);\n      }\n      debug('stat done: %s { size: %s }', this.filename, size);\n      this._size = size;\n      this._dest = this._createStream(this._stream);\n      this._opening = false;\n      this.once('open', () => {\n        if (!this._stream.emit('rotate')) {\n          this._rotate = false;\n        }\n      });\n    });\n  }\n\n  /**\n   * Stat the file and assess information in order to create the proper stream.\n   * @param {function} callback - TODO: add param description.\n   * @returns {undefined}\n   */\n  stat(callback) {\n    const target = this._getFile();\n    const fullpath = path.join(this.dirname, target);\n\n    fs.stat(fullpath, (err, stat) => {\n      if (err && err.code === 'ENOENT') {\n        debug('ENOENT ok', fullpath);\n        // Update internally tracked filename with the new target name.\n        this.filename = target;\n        return callback(null, 0);\n      }\n\n      if (err) {\n        debug(`err ${err.code} ${fullpath}`);\n        return callback(err);\n      }\n\n      if (!stat || this._needsNewFile(stat.size)) {\n        // If `stats.size` is greater than the `maxsize` for this\n        // instance then try again.\n        return this._incFile(() => this.stat(callback));\n      }\n\n      // Once we have figured out what the filename is, set it\n      // and return the size.\n      this.filename = target;\n      callback(null, stat.size);\n    });\n  }\n\n  /**\n   * Closes the stream associated with this instance.\n   * @param {function} cb - TODO: add param description.\n   * @returns {undefined}\n   */\n  close(cb) {\n    if (!this._stream) {\n      return;\n    }\n\n    this._stream.end(() => {\n      if (cb) {\n        cb(); // eslint-disable-line callback-return\n      }\n      this.emit('flush');\n      this.emit('closed');\n    });\n  }\n\n  /**\n   * TODO: add method description.\n   * @param {number} size - TODO: add param description.\n   * @returns {undefined}\n   */\n  _needsNewFile(size) {\n    size = size || this._size;\n    return this.maxsize && size >= this.maxsize;\n  }\n\n  /**\n   * TODO: add method description.\n   * @param {Error} err - TODO: add param description.\n   * @returns {undefined}\n   */\n  _onError(err) {\n    this.emit('error', err);\n  }\n\n  /**\n   * TODO: add method description.\n   * @param {Stream} stream - TODO: add param description.\n   * @returns {mixed} - TODO: add return description.\n   */\n  _setupStream(stream) {\n    stream.on('error', this._onError);\n\n    return stream;\n  }\n\n  /**\n   * TODO: add method description.\n   * @param {Stream} stream - TODO: add param description.\n   * @returns {mixed} - TODO: add return description.\n   */\n  _cleanupStream(stream) {\n    stream.removeListener('error', this._onError);\n    stream.destroy();\n    return stream;\n  }\n\n  /**\n   * TODO: add method description.\n   */\n  _rotateFile() {\n    this._incFile(() => this.open());\n  }\n\n  /**\n   * Unpipe from the stream that has been marked as full and end it so it\n   * flushes to disk.\n   *\n   * @param {function} callback - Callback for when the current file has closed.\n   * @private\n   */\n  _endStream(callback = () => { }) {\n    if (this._dest) {\n      this._stream.unpipe(this._dest);\n      this._dest.end(() => {\n        this._cleanupStream(this._dest);\n        callback();\n      });\n    } else {\n      callback(); // eslint-disable-line callback-return\n    }\n  }\n\n  /**\n   * Returns the WritableStream for the active file on this instance. If we\n   * should gzip the file then a zlib stream is returned.\n   *\n   * @param {ReadableStream} source –PassThrough to pipe to the file when open.\n   * @returns {WritableStream} Stream that writes to disk for the active file.\n   */\n  _createStream(source) {\n    const fullpath = path.join(this.dirname, this.filename);\n\n    debug('create stream start', fullpath, this.options);\n    const dest = fs.createWriteStream(fullpath, this.options)\n      // TODO: What should we do with errors here?\n      .on('error', err => debug(err))\n      .on('close', () => debug('close', dest.path, dest.bytesWritten))\n      .on('open', () => {\n        debug('file open ok', fullpath);\n        this.emit('open', fullpath);\n        source.pipe(dest);\n\n        // If rotation occured during the open operation then we immediately\n        // start writing to a new PassThrough, begin opening the next file\n        // and cleanup the previous source and dest once the source has drained.\n        if (this.rotatedWhileOpening) {\n          this._stream = new PassThrough();\n          this._stream.setMaxListeners(30);\n          this._rotateFile();\n          this.rotatedWhileOpening = false;\n          this._cleanupStream(dest);\n          source.end();\n        }\n      });\n\n    debug('create stream ok', fullpath);\n    return dest;\n  }\n\n  /**\n   * TODO: add method description.\n   * @param {function} callback - TODO: add param description.\n   * @returns {undefined}\n   */\n  _incFile(callback) {\n    debug('_incFile', this.filename);\n    const ext = path.extname(this._basename);\n    const basename = path.basename(this._basename, ext);\n    const tasks = [];\n\n    if (this.zippedArchive) {\n      tasks.push(\n        function (cb) {\n          const num = this._created > 0 && !this.tailable ? this._created : '';\n          this._compressFile(\n            path.join(this.dirname, `${basename}${num}${ext}`),\n            path.join(this.dirname, `${basename}${num}${ext}.gz`),\n            cb\n          );\n        }.bind(this)\n      );\n    }\n\n    tasks.push(\n      function (cb) {\n        if (!this.tailable) {\n          this._created += 1;\n          this._checkMaxFilesIncrementing(ext, basename, cb);\n        } else {\n          this._checkMaxFilesTailable(ext, basename, cb);\n        }\n      }.bind(this)\n    );\n\n    asyncSeries(tasks, callback);\n  }\n\n  /**\n   * Gets the next filename to use for this instance in the case that log\n   * filesizes are being capped.\n   * @returns {string} - TODO: add return description.\n   * @private\n   */\n  _getFile() {\n    const ext = path.extname(this._basename);\n    const basename = path.basename(this._basename, ext);\n    const isRotation = this.rotationFormat\n      ? this.rotationFormat()\n      : this._created;\n\n    // Caveat emptor (indexzero): rotationFormat() was broken by design When\n    // combined with max files because the set of files to unlink is never\n    // stored.\n    return !this.tailable && this._created\n      ? `${basename}${isRotation}${ext}`\n      : `${basename}${ext}`;\n  }\n\n  /**\n   * Increment the number of files created or checked by this instance.\n   * @param {mixed} ext - TODO: add param description.\n   * @param {mixed} basename - TODO: add param description.\n   * @param {mixed} callback - TODO: add param description.\n   * @returns {undefined}\n   * @private\n   */\n  _checkMaxFilesIncrementing(ext, basename, callback) {\n    // Check for maxFiles option and delete file.\n    if (!this.maxFiles || this._created < this.maxFiles) {\n      return setImmediate(callback);\n    }\n\n    const oldest = this._created - this.maxFiles;\n    const isOldest = oldest !== 0 ? oldest : '';\n    const isZipped = this.zippedArchive ? '.gz' : '';\n    const filePath = `${basename}${isOldest}${ext}${isZipped}`;\n    const target = path.join(this.dirname, filePath);\n\n    fs.unlink(target, callback);\n  }\n\n  /**\n   * Roll files forward based on integer, up to maxFiles. e.g. if base if\n   * file.log and it becomes oversized, roll to file1.log, and allow file.log\n   * to be re-used. If file is oversized again, roll file1.log to file2.log,\n   * roll file.log to file1.log, and so on.\n   * @param {mixed} ext - TODO: add param description.\n   * @param {mixed} basename - TODO: add param description.\n   * @param {mixed} callback - TODO: add param description.\n   * @returns {undefined}\n   * @private\n   */\n  _checkMaxFilesTailable(ext, basename, callback) {\n    const tasks = [];\n    if (!this.maxFiles) {\n      return;\n    }\n\n    // const isZipped = this.zippedArchive ? '.gz' : '';\n    const isZipped = this.zippedArchive ? '.gz' : '';\n    for (let x = this.maxFiles - 1; x > 1; x--) {\n      tasks.push(function (i, cb) {\n        let fileName = `${basename}${(i - 1)}${ext}${isZipped}`;\n        const tmppath = path.join(this.dirname, fileName);\n\n        fs.exists(tmppath, exists => {\n          if (!exists) {\n            return cb(null);\n          }\n\n          fileName = `${basename}${i}${ext}${isZipped}`;\n          fs.rename(tmppath, path.join(this.dirname, fileName), cb);\n        });\n      }.bind(this, x));\n    }\n\n    asyncSeries(tasks, () => {\n      fs.rename(\n        path.join(this.dirname, `${basename}${ext}${isZipped}`),\n        path.join(this.dirname, `${basename}1${ext}${isZipped}`),\n        callback\n      );\n    });\n  }\n\n  /**\n   * Compresses src to dest with gzip and unlinks src\n   * @param {string} src - path to source file.\n   * @param {string} dest - path to zipped destination file.\n   * @param {Function} callback - callback called after file has been compressed.\n   * @returns {undefined}\n   * @private\n   */\n  _compressFile(src, dest, callback) {\n    fs.access(src, fs.F_OK, (err) => {\n      if (err) {\n        return callback();\n      }\n      var gzip = zlib.createGzip();\n      var inp = fs.createReadStream(src);\n      var out = fs.createWriteStream(dest);\n      out.on('finish', () => {\n        fs.unlink(src, callback);\n      });\n      inp.pipe(gzip).pipe(out);\n    });\n  }\n\n  _createLogDirIfNotExist(dirPath) {\n    /* eslint-disable no-sync */\n    if (!fs.existsSync(dirPath)) {\n      fs.mkdirSync(dirPath, { recursive: true });\n    }\n    /* eslint-enable no-sync */\n  }\n};\n","/**\n * http.js: Transport for outputting to a json-rpcserver.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst http = require('http');\nconst https = require('https');\nconst { Stream } = require('readable-stream');\nconst TransportStream = require('winston-transport');\nconst { configure } = require('safe-stable-stringify');\n\n/**\n * Transport for outputting to a json-rpc server.\n * @type {Stream}\n * @extends {TransportStream}\n */\nmodule.exports = class Http extends TransportStream {\n  /**\n   * Constructor function for the Http transport object responsible for\n   * persisting log messages and metadata to a terminal or TTY.\n   * @param {!Object} [options={}] - Options for this instance.\n   */\n  // eslint-disable-next-line max-statements\n  constructor(options = {}) {\n    super(options);\n\n    this.options = options;\n    this.name = options.name || 'http';\n    this.ssl = !!options.ssl;\n    this.host = options.host || 'localhost';\n    this.port = options.port;\n    this.auth = options.auth;\n    this.path = options.path || '';\n    this.maximumDepth = options.maximumDepth;\n    this.agent = options.agent;\n    this.headers = options.headers || {};\n    this.headers['content-type'] = 'application/json';\n    this.batch = options.batch || false;\n    this.batchInterval = options.batchInterval || 5000;\n    this.batchCount = options.batchCount || 10;\n    this.batchOptions = [];\n    this.batchTimeoutID = -1;\n    this.batchCallback = {};\n\n    if (!this.port) {\n      this.port = this.ssl ? 443 : 80;\n    }\n  }\n\n  /**\n   * Core logging method exposed to Winston.\n   * @param {Object} info - TODO: add param description.\n   * @param {function} callback - TODO: add param description.\n   * @returns {undefined}\n   */\n  log(info, callback) {\n    this._request(info, null, null, (err, res) => {\n      if (res && res.statusCode !== 200) {\n        err = new Error(`Invalid HTTP Status Code: ${res.statusCode}`);\n      }\n\n      if (err) {\n        this.emit('warn', err);\n      } else {\n        this.emit('logged', info);\n      }\n    });\n\n    // Remark: (jcrugzz) Fire and forget here so requests dont cause buffering\n    // and block more requests from happening?\n    if (callback) {\n      setImmediate(callback);\n    }\n  }\n\n  /**\n   * Query the transport. Options object is optional.\n   * @param {Object} options -  Loggly-like query options for this instance.\n   * @param {function} callback - Continuation to respond to when complete.\n   * @returns {undefined}\n   */\n  query(options, callback) {\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n\n    options = {\n      method: 'query',\n      params: this.normalizeQuery(options)\n    };\n\n    const auth = options.params.auth || null;\n    delete options.params.auth;\n\n    const path = options.params.path || null;\n    delete options.params.path;\n\n    this._request(options, auth, path, (err, res, body) => {\n      if (res && res.statusCode !== 200) {\n        err = new Error(`Invalid HTTP Status Code: ${res.statusCode}`);\n      }\n\n      if (err) {\n        return callback(err);\n      }\n\n      if (typeof body === 'string') {\n        try {\n          body = JSON.parse(body);\n        } catch (e) {\n          return callback(e);\n        }\n      }\n\n      callback(null, body);\n    });\n  }\n\n  /**\n   * Returns a log stream for this transport. Options object is optional.\n   * @param {Object} options - Stream options for this instance.\n   * @returns {Stream} - TODO: add return description\n   */\n  stream(options = {}) {\n    const stream = new Stream();\n    options = {\n      method: 'stream',\n      params: options\n    };\n\n    const path = options.params.path || null;\n    delete options.params.path;\n\n    const auth = options.params.auth || null;\n    delete options.params.auth;\n\n    let buff = '';\n    const req = this._request(options, auth, path);\n\n    stream.destroy = () => req.destroy();\n    req.on('data', data => {\n      data = (buff + data).split(/\\n+/);\n      const l = data.length - 1;\n\n      let i = 0;\n      for (; i < l; i++) {\n        try {\n          stream.emit('log', JSON.parse(data[i]));\n        } catch (e) {\n          stream.emit('error', e);\n        }\n      }\n\n      buff = data[l];\n    });\n    req.on('error', err => stream.emit('error', err));\n\n    return stream;\n  }\n\n  /**\n   * Make a request to a winstond server or any http server which can\n   * handle json-rpc.\n   * @param {function} options - Options to sent the request.\n   * @param {Object?} auth - authentication options\n   * @param {string} path - request path\n   * @param {function} callback - Continuation to respond to when complete.\n   */\n  _request(options, auth, path, callback) {\n    options = options || {};\n\n    auth = auth || this.auth;\n    path = path || this.path || '';\n\n    if (this.batch) {\n      this._doBatch(options, callback, auth, path);\n    } else {\n      this._doRequest(options, callback, auth, path);\n    }\n  }\n\n  /**\n   * Send or memorize the options according to batch configuration\n   * @param {function} options - Options to sent the request.\n   * @param {function} callback - Continuation to respond to when complete.\n   * @param {Object?} auth - authentication options\n   * @param {string} path - request path\n   */\n  _doBatch(options, callback, auth, path) {\n    this.batchOptions.push(options);\n    if (this.batchOptions.length === 1) {\n      // First message stored, it's time to start the timeout!\n      const me = this;\n      this.batchCallback = callback;\n      this.batchTimeoutID = setTimeout(function () {\n        // timeout is reached, send all messages to endpoint\n        me.batchTimeoutID = -1;\n        me._doBatchRequest(me.batchCallback, auth, path);\n      }, this.batchInterval);\n    }\n    if (this.batchOptions.length === this.batchCount) {\n      // max batch count is reached, send all messages to endpoint\n      this._doBatchRequest(this.batchCallback, auth, path);\n    }\n  }\n\n  /**\n   * Initiate a request with the memorized batch options, stop the batch timeout\n   * @param {function} callback - Continuation to respond to when complete.\n   * @param {Object?} auth - authentication options\n   * @param {string} path - request path\n   */\n  _doBatchRequest(callback, auth, path) {\n    if (this.batchTimeoutID > 0) {\n      clearTimeout(this.batchTimeoutID);\n      this.batchTimeoutID = -1;\n    }\n    const batchOptionsCopy = this.batchOptions.slice();\n    this.batchOptions = [];\n    this._doRequest(batchOptionsCopy, callback, auth, path);\n  }\n\n  /**\n   * Make a request to a winstond server or any http server which can\n   * handle json-rpc.\n   * @param {function} options - Options to sent the request.\n   * @param {function} callback - Continuation to respond to when complete.\n   * @param {Object?} auth - authentication options\n   * @param {string} path - request path\n   */\n  _doRequest(options, callback, auth, path) {\n    // Prepare options for outgoing HTTP request\n    const headers = Object.assign({}, this.headers);\n    if (auth && auth.bearer) {\n      headers.Authorization = `Bearer ${auth.bearer}`;\n    }\n    const req = (this.ssl ? https : http).request({\n      ...this.options,\n      method: 'POST',\n      host: this.host,\n      port: this.port,\n      path: `/${path.replace(/^\\//, '')}`,\n      headers: headers,\n      auth: (auth && auth.username && auth.password) ? (`${auth.username}:${auth.password}`) : '',\n      agent: this.agent\n    });\n\n    req.on('error', callback);\n    req.on('response', res => (\n      res.on('end', () => callback(null, res)).resume()\n    ));\n    const jsonStringify = configure({\n      ...(this.maximumDepth && { maximumDepth: this.maximumDepth })\n    });\n    req.end(Buffer.from(jsonStringify(options, this.options.replacer), 'utf8'));\n  }\n};\n","/**\n * transports.js: Set of all transports Winston knows about.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\n/**\n * TODO: add property description.\n * @type {Console}\n */\nObject.defineProperty(exports, 'Console', {\n  configurable: true,\n  enumerable: true,\n  get() {\n    return require('./console');\n  }\n});\n\n/**\n * TODO: add property description.\n * @type {File}\n */\nObject.defineProperty(exports, 'File', {\n  configurable: true,\n  enumerable: true,\n  get() {\n    return require('./file');\n  }\n});\n\n/**\n * TODO: add property description.\n * @type {Http}\n */\nObject.defineProperty(exports, 'Http', {\n  configurable: true,\n  enumerable: true,\n  get() {\n    return require('./http');\n  }\n});\n\n/**\n * TODO: add property description.\n * @type {Stream}\n */\nObject.defineProperty(exports, 'Stream', {\n  configurable: true,\n  enumerable: true,\n  get() {\n    return require('./stream');\n  }\n});\n","/**\n * stream.js: Transport for outputting to any arbitrary stream.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst isStream = require('is-stream');\nconst { MESSAGE } = require('triple-beam');\nconst os = require('os');\nconst TransportStream = require('winston-transport');\n\n/**\n * Transport for outputting to any arbitrary stream.\n * @type {Stream}\n * @extends {TransportStream}\n */\nmodule.exports = class Stream extends TransportStream {\n  /**\n   * Constructor function for the Console transport object responsible for\n   * persisting log messages and metadata to a terminal or TTY.\n   * @param {!Object} [options={}] - Options for this instance.\n   */\n  constructor(options = {}) {\n    super(options);\n\n    if (!options.stream || !isStream(options.stream)) {\n      throw new Error('options.stream is required.');\n    }\n\n    // We need to listen for drain events when write() returns false. This can\n    // make node mad at times.\n    this._stream = options.stream;\n    this._stream.setMaxListeners(Infinity);\n    this.isObjectMode = options.stream._writableState.objectMode;\n    this.eol = (typeof options.eol === 'string') ? options.eol : os.EOL;\n  }\n\n  /**\n   * Core logging method exposed to Winston.\n   * @param {Object} info - TODO: add param description.\n   * @param {Function} callback - TODO: add param description.\n   * @returns {undefined}\n   */\n  log(info, callback) {\n    setImmediate(() => this.emit('logged', info));\n    if (this.isObjectMode) {\n      this._stream.write(info);\n      if (callback) {\n        callback(); // eslint-disable-line callback-return\n      }\n      return;\n    }\n\n    this._stream.write(`${info[MESSAGE]}${this.eol}`);\n    if (callback) {\n      callback(); // eslint-disable-line callback-return\n    }\n    return;\n  }\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = asyncify;\n\nvar _initialParams = require('./internal/initialParams.js');\n\nvar _initialParams2 = _interopRequireDefault(_initialParams);\n\nvar _setImmediate = require('./internal/setImmediate.js');\n\nvar _setImmediate2 = _interopRequireDefault(_setImmediate);\n\nvar _wrapAsync = require('./internal/wrapAsync.js');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Take a sync function and make it async, passing its return value to a\n * callback. This is useful for plugging sync functions into a waterfall,\n * series, or other async functions. Any arguments passed to the generated\n * function will be passed to the wrapped function (except for the final\n * callback argument). Errors thrown will be passed to the callback.\n *\n * If the function passed to `asyncify` returns a Promise, that promises's\n * resolved/rejected state will be used to call the callback, rather than simply\n * the synchronous return value.\n *\n * This also means you can asyncify ES2017 `async` functions.\n *\n * @name asyncify\n * @static\n * @memberOf module:Utils\n * @method\n * @alias wrapSync\n * @category Util\n * @param {Function} func - The synchronous function, or Promise-returning\n * function to convert to an {@link AsyncFunction}.\n * @returns {AsyncFunction} An asynchronous wrapper of the `func`. To be\n * invoked with `(args..., callback)`.\n * @example\n *\n * // passing a regular synchronous function\n * async.waterfall([\n *     async.apply(fs.readFile, filename, \"utf8\"),\n *     async.asyncify(JSON.parse),\n *     function (data, next) {\n *         // data is the result of parsing the text.\n *         // If there was a parsing error, it would have been caught.\n *     }\n * ], callback);\n *\n * // passing a function returning a promise\n * async.waterfall([\n *     async.apply(fs.readFile, filename, \"utf8\"),\n *     async.asyncify(function (contents) {\n *         return db.model.create(contents);\n *     }),\n *     function (model, next) {\n *         // `model` is the instantiated model object.\n *         // If there was an error, this function would be skipped.\n *     }\n * ], callback);\n *\n * // es2017 example, though `asyncify` is not needed if your JS environment\n * // supports async functions out of the box\n * var q = async.queue(async.asyncify(async function(file) {\n *     var intermediateStep = await processFile(file);\n *     return await somePromise(intermediateStep)\n * }));\n *\n * q.push(files);\n */\nfunction asyncify(func) {\n    if ((0, _wrapAsync.isAsync)(func)) {\n        return function (...args /*, callback*/) {\n            const callback = args.pop();\n            const promise = func.apply(this, args);\n            return handlePromise(promise, callback);\n        };\n    }\n\n    return (0, _initialParams2.default)(function (args, callback) {\n        var result;\n        try {\n            result = func.apply(this, args);\n        } catch (e) {\n            return callback(e);\n        }\n        // if result is Promise object\n        if (result && typeof result.then === 'function') {\n            return handlePromise(result, callback);\n        } else {\n            callback(null, result);\n        }\n    });\n}\n\nfunction handlePromise(promise, callback) {\n    return promise.then(value => {\n        invokeCallback(callback, null, value);\n    }, err => {\n        invokeCallback(callback, err && (err instanceof Error || err.message) ? err : new Error(err));\n    });\n}\n\nfunction invokeCallback(callback, error, value) {\n    try {\n        callback(error, value);\n    } catch (err) {\n        (0, _setImmediate2.default)(e => {\n            throw e;\n        }, err);\n    }\n}\nmodule.exports = exports.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _isArrayLike = require('./internal/isArrayLike.js');\n\nvar _isArrayLike2 = _interopRequireDefault(_isArrayLike);\n\nvar _breakLoop = require('./internal/breakLoop.js');\n\nvar _breakLoop2 = _interopRequireDefault(_breakLoop);\n\nvar _eachOfLimit = require('./eachOfLimit.js');\n\nvar _eachOfLimit2 = _interopRequireDefault(_eachOfLimit);\n\nvar _once = require('./internal/once.js');\n\nvar _once2 = _interopRequireDefault(_once);\n\nvar _onlyOnce = require('./internal/onlyOnce.js');\n\nvar _onlyOnce2 = _interopRequireDefault(_onlyOnce);\n\nvar _wrapAsync = require('./internal/wrapAsync.js');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nvar _awaitify = require('./internal/awaitify.js');\n\nvar _awaitify2 = _interopRequireDefault(_awaitify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// eachOf implementation optimized for array-likes\nfunction eachOfArrayLike(coll, iteratee, callback) {\n    callback = (0, _once2.default)(callback);\n    var index = 0,\n        completed = 0,\n        { length } = coll,\n        canceled = false;\n    if (length === 0) {\n        callback(null);\n    }\n\n    function iteratorCallback(err, value) {\n        if (err === false) {\n            canceled = true;\n        }\n        if (canceled === true) return;\n        if (err) {\n            callback(err);\n        } else if (++completed === length || value === _breakLoop2.default) {\n            callback(null);\n        }\n    }\n\n    for (; index < length; index++) {\n        iteratee(coll[index], index, (0, _onlyOnce2.default)(iteratorCallback));\n    }\n}\n\n// a generic version of eachOf which can handle array, object, and iterator cases.\nfunction eachOfGeneric(coll, iteratee, callback) {\n    return (0, _eachOfLimit2.default)(coll, Infinity, iteratee, callback);\n}\n\n/**\n * Like [`each`]{@link module:Collections.each}, except that it passes the key (or index) as the second argument\n * to the iteratee.\n *\n * @name eachOf\n * @static\n * @memberOf module:Collections\n * @method\n * @alias forEachOf\n * @category Collection\n * @see [async.each]{@link module:Collections.each}\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each\n * item in `coll`.\n * The `key` is the item's key, or index in the case of an array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n * @example\n *\n * // dev.json is a file containing a valid json object config for dev environment\n * // dev.json is a file containing a valid json object config for test environment\n * // prod.json is a file containing a valid json object config for prod environment\n * // invalid.json is a file with a malformed json object\n *\n * let configs = {}; //global variable\n * let validConfigFileMap = {dev: 'dev.json', test: 'test.json', prod: 'prod.json'};\n * let invalidConfigFileMap = {dev: 'dev.json', test: 'test.json', invalid: 'invalid.json'};\n *\n * // asynchronous function that reads a json file and parses the contents as json object\n * function parseFile(file, key, callback) {\n *     fs.readFile(file, \"utf8\", function(err, data) {\n *         if (err) return calback(err);\n *         try {\n *             configs[key] = JSON.parse(data);\n *         } catch (e) {\n *             return callback(e);\n *         }\n *         callback();\n *     });\n * }\n *\n * // Using callbacks\n * async.forEachOf(validConfigFileMap, parseFile, function (err) {\n *     if (err) {\n *         console.error(err);\n *     } else {\n *         console.log(configs);\n *         // configs is now a map of JSON data, e.g.\n *         // { dev: //parsed dev.json, test: //parsed test.json, prod: //parsed prod.json}\n *     }\n * });\n *\n * //Error handing\n * async.forEachOf(invalidConfigFileMap, parseFile, function (err) {\n *     if (err) {\n *         console.error(err);\n *         // JSON parse error exception\n *     } else {\n *         console.log(configs);\n *     }\n * });\n *\n * // Using Promises\n * async.forEachOf(validConfigFileMap, parseFile)\n * .then( () => {\n *     console.log(configs);\n *     // configs is now a map of JSON data, e.g.\n *     // { dev: //parsed dev.json, test: //parsed test.json, prod: //parsed prod.json}\n * }).catch( err => {\n *     console.error(err);\n * });\n *\n * //Error handing\n * async.forEachOf(invalidConfigFileMap, parseFile)\n * .then( () => {\n *     console.log(configs);\n * }).catch( err => {\n *     console.error(err);\n *     // JSON parse error exception\n * });\n *\n * // Using async/await\n * async () => {\n *     try {\n *         let result = await async.forEachOf(validConfigFileMap, parseFile);\n *         console.log(configs);\n *         // configs is now a map of JSON data, e.g.\n *         // { dev: //parsed dev.json, test: //parsed test.json, prod: //parsed prod.json}\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n * //Error handing\n * async () => {\n *     try {\n *         let result = await async.forEachOf(invalidConfigFileMap, parseFile);\n *         console.log(configs);\n *     }\n *     catch (err) {\n *         console.log(err);\n *         // JSON parse error exception\n *     }\n * }\n *\n */\nfunction eachOf(coll, iteratee, callback) {\n    var eachOfImplementation = (0, _isArrayLike2.default)(coll) ? eachOfArrayLike : eachOfGeneric;\n    return eachOfImplementation(coll, (0, _wrapAsync2.default)(iteratee), callback);\n}\n\nexports.default = (0, _awaitify2.default)(eachOf, 3);\nmodule.exports = exports.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _eachOfLimit2 = require('./internal/eachOfLimit.js');\n\nvar _eachOfLimit3 = _interopRequireDefault(_eachOfLimit2);\n\nvar _wrapAsync = require('./internal/wrapAsync.js');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nvar _awaitify = require('./internal/awaitify.js');\n\nvar _awaitify2 = _interopRequireDefault(_awaitify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * The same as [`eachOf`]{@link module:Collections.eachOf} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name eachOfLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.eachOf]{@link module:Collections.eachOf}\n * @alias forEachOfLimit\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each\n * item in `coll`. The `key` is the item's key, or index in the case of an\n * array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n */\nfunction eachOfLimit(coll, limit, iteratee, callback) {\n    return (0, _eachOfLimit3.default)(limit)(coll, (0, _wrapAsync2.default)(iteratee), callback);\n}\n\nexports.default = (0, _awaitify2.default)(eachOfLimit, 4);\nmodule.exports = exports.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _eachOfLimit = require('./eachOfLimit.js');\n\nvar _eachOfLimit2 = _interopRequireDefault(_eachOfLimit);\n\nvar _awaitify = require('./internal/awaitify.js');\n\nvar _awaitify2 = _interopRequireDefault(_awaitify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * The same as [`eachOf`]{@link module:Collections.eachOf} but runs only a single async operation at a time.\n *\n * @name eachOfSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.eachOf]{@link module:Collections.eachOf}\n * @alias forEachOfSeries\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n */\nfunction eachOfSeries(coll, iteratee, callback) {\n    return (0, _eachOfLimit2.default)(coll, 1, iteratee, callback);\n}\nexports.default = (0, _awaitify2.default)(eachOfSeries, 3);\nmodule.exports = exports.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _eachOf = require('./eachOf.js');\n\nvar _eachOf2 = _interopRequireDefault(_eachOf);\n\nvar _withoutIndex = require('./internal/withoutIndex.js');\n\nvar _withoutIndex2 = _interopRequireDefault(_withoutIndex);\n\nvar _wrapAsync = require('./internal/wrapAsync.js');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nvar _awaitify = require('./internal/awaitify.js');\n\nvar _awaitify2 = _interopRequireDefault(_awaitify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Applies the function `iteratee` to each item in `coll`, in parallel.\n * The `iteratee` is called with an item from the list, and a callback for when\n * it has finished. If the `iteratee` passes an error to its `callback`, the\n * main `callback` (for the `each` function) is immediately called with the\n * error.\n *\n * Note, that since this function applies `iteratee` to each item in parallel,\n * there is no guarantee that the iteratee functions will complete in order.\n *\n * @name each\n * @static\n * @memberOf module:Collections\n * @method\n * @alias forEach\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to\n * each item in `coll`. Invoked with (item, callback).\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOf`.\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n * @example\n *\n * // dir1 is a directory that contains file1.txt, file2.txt\n * // dir2 is a directory that contains file3.txt, file4.txt\n * // dir3 is a directory that contains file5.txt\n * // dir4 does not exist\n *\n * const fileList = [ 'dir1/file2.txt', 'dir2/file3.txt', 'dir/file5.txt'];\n * const withMissingFileList = ['dir1/file1.txt', 'dir4/file2.txt'];\n *\n * // asynchronous function that deletes a file\n * const deleteFile = function(file, callback) {\n *     fs.unlink(file, callback);\n * };\n *\n * // Using callbacks\n * async.each(fileList, deleteFile, function(err) {\n *     if( err ) {\n *         console.log(err);\n *     } else {\n *         console.log('All files have been deleted successfully');\n *     }\n * });\n *\n * // Error Handling\n * async.each(withMissingFileList, deleteFile, function(err){\n *     console.log(err);\n *     // [ Error: ENOENT: no such file or directory ]\n *     // since dir4/file2.txt does not exist\n *     // dir1/file1.txt could have been deleted\n * });\n *\n * // Using Promises\n * async.each(fileList, deleteFile)\n * .then( () => {\n *     console.log('All files have been deleted successfully');\n * }).catch( err => {\n *     console.log(err);\n * });\n *\n * // Error Handling\n * async.each(fileList, deleteFile)\n * .then( () => {\n *     console.log('All files have been deleted successfully');\n * }).catch( err => {\n *     console.log(err);\n *     // [ Error: ENOENT: no such file or directory ]\n *     // since dir4/file2.txt does not exist\n *     // dir1/file1.txt could have been deleted\n * });\n *\n * // Using async/await\n * async () => {\n *     try {\n *         await async.each(files, deleteFile);\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n * // Error Handling\n * async () => {\n *     try {\n *         await async.each(withMissingFileList, deleteFile);\n *     }\n *     catch (err) {\n *         console.log(err);\n *         // [ Error: ENOENT: no such file or directory ]\n *         // since dir4/file2.txt does not exist\n *         // dir1/file1.txt could have been deleted\n *     }\n * }\n *\n */\nfunction eachLimit(coll, iteratee, callback) {\n    return (0, _eachOf2.default)(coll, (0, _withoutIndex2.default)((0, _wrapAsync2.default)(iteratee)), callback);\n}\n\nexports.default = (0, _awaitify2.default)(eachLimit, 3);\nmodule.exports = exports.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = asyncEachOfLimit;\n\nvar _breakLoop = require('./breakLoop.js');\n\nvar _breakLoop2 = _interopRequireDefault(_breakLoop);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// for async generators\nfunction asyncEachOfLimit(generator, limit, iteratee, callback) {\n    let done = false;\n    let canceled = false;\n    let awaiting = false;\n    let running = 0;\n    let idx = 0;\n\n    function replenish() {\n        //console.log('replenish')\n        if (running >= limit || awaiting || done) return;\n        //console.log('replenish awaiting')\n        awaiting = true;\n        generator.next().then(({ value, done: iterDone }) => {\n            //console.log('got value', value)\n            if (canceled || done) return;\n            awaiting = false;\n            if (iterDone) {\n                done = true;\n                if (running <= 0) {\n                    //console.log('done nextCb')\n                    callback(null);\n                }\n                return;\n            }\n            running++;\n            iteratee(value, idx, iterateeCallback);\n            idx++;\n            replenish();\n        }).catch(handleError);\n    }\n\n    function iterateeCallback(err, result) {\n        //console.log('iterateeCallback')\n        running -= 1;\n        if (canceled) return;\n        if (err) return handleError(err);\n\n        if (err === false) {\n            done = true;\n            canceled = true;\n            return;\n        }\n\n        if (result === _breakLoop2.default || done && running <= 0) {\n            done = true;\n            //console.log('done iterCb')\n            return callback(null);\n        }\n        replenish();\n    }\n\n    function handleError(err) {\n        if (canceled) return;\n        awaiting = false;\n        done = true;\n        callback(err);\n    }\n\n    replenish();\n}\nmodule.exports = exports.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = awaitify;\n// conditionally promisify a function.\n// only return a promise if a callback is omitted\nfunction awaitify(asyncFn, arity) {\n    if (!arity) arity = asyncFn.length;\n    if (!arity) throw new Error('arity is undefined');\n    function awaitable(...args) {\n        if (typeof args[arity - 1] === 'function') {\n            return asyncFn.apply(this, args);\n        }\n\n        return new Promise((resolve, reject) => {\n            args[arity - 1] = (err, ...cbArgs) => {\n                if (err) return reject(err);\n                resolve(cbArgs.length > 1 ? cbArgs : cbArgs[0]);\n            };\n            asyncFn.apply(this, args);\n        });\n    }\n\n    return awaitable;\n}\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n// A temporary value used to identify if the loop should be broken.\n// See #1064, #1293\nconst breakLoop = {};\nexports.default = breakLoop;\nmodule.exports = exports.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _once = require('./once.js');\n\nvar _once2 = _interopRequireDefault(_once);\n\nvar _iterator = require('./iterator.js');\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _onlyOnce = require('./onlyOnce.js');\n\nvar _onlyOnce2 = _interopRequireDefault(_onlyOnce);\n\nvar _wrapAsync = require('./wrapAsync.js');\n\nvar _asyncEachOfLimit = require('./asyncEachOfLimit.js');\n\nvar _asyncEachOfLimit2 = _interopRequireDefault(_asyncEachOfLimit);\n\nvar _breakLoop = require('./breakLoop.js');\n\nvar _breakLoop2 = _interopRequireDefault(_breakLoop);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = limit => {\n    return (obj, iteratee, callback) => {\n        callback = (0, _once2.default)(callback);\n        if (limit <= 0) {\n            throw new RangeError('concurrency limit cannot be less than 1');\n        }\n        if (!obj) {\n            return callback(null);\n        }\n        if ((0, _wrapAsync.isAsyncGenerator)(obj)) {\n            return (0, _asyncEachOfLimit2.default)(obj, limit, iteratee, callback);\n        }\n        if ((0, _wrapAsync.isAsyncIterable)(obj)) {\n            return (0, _asyncEachOfLimit2.default)(obj[Symbol.asyncIterator](), limit, iteratee, callback);\n        }\n        var nextElem = (0, _iterator2.default)(obj);\n        var done = false;\n        var canceled = false;\n        var running = 0;\n        var looping = false;\n\n        function iterateeCallback(err, value) {\n            if (canceled) return;\n            running -= 1;\n            if (err) {\n                done = true;\n                callback(err);\n            } else if (err === false) {\n                done = true;\n                canceled = true;\n            } else if (value === _breakLoop2.default || done && running <= 0) {\n                done = true;\n                return callback(null);\n            } else if (!looping) {\n                replenish();\n            }\n        }\n\n        function replenish() {\n            looping = true;\n            while (running < limit && !done) {\n                var elem = nextElem();\n                if (elem === null) {\n                    done = true;\n                    if (running <= 0) {\n                        callback(null);\n                    }\n                    return;\n                }\n                running += 1;\n                iteratee(elem.value, elem.key, (0, _onlyOnce2.default)(iterateeCallback));\n            }\n            looping = false;\n        }\n\n        replenish();\n    };\n};\n\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (coll) {\n    return coll[Symbol.iterator] && coll[Symbol.iterator]();\n};\n\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (fn) {\n    return function (...args /*, callback*/) {\n        var callback = args.pop();\n        return fn.call(this, args, callback);\n    };\n};\n\nmodule.exports = exports.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = isArrayLike;\nfunction isArrayLike(value) {\n    return value && typeof value.length === 'number' && value.length >= 0 && value.length % 1 === 0;\n}\nmodule.exports = exports.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = createIterator;\n\nvar _isArrayLike = require('./isArrayLike.js');\n\nvar _isArrayLike2 = _interopRequireDefault(_isArrayLike);\n\nvar _getIterator = require('./getIterator.js');\n\nvar _getIterator2 = _interopRequireDefault(_getIterator);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction createArrayIterator(coll) {\n    var i = -1;\n    var len = coll.length;\n    return function next() {\n        return ++i < len ? { value: coll[i], key: i } : null;\n    };\n}\n\nfunction createES2015Iterator(iterator) {\n    var i = -1;\n    return function next() {\n        var item = iterator.next();\n        if (item.done) return null;\n        i++;\n        return { value: item.value, key: i };\n    };\n}\n\nfunction createObjectIterator(obj) {\n    var okeys = obj ? Object.keys(obj) : [];\n    var i = -1;\n    var len = okeys.length;\n    return function next() {\n        var key = okeys[++i];\n        if (key === '__proto__') {\n            return next();\n        }\n        return i < len ? { value: obj[key], key } : null;\n    };\n}\n\nfunction createIterator(coll) {\n    if ((0, _isArrayLike2.default)(coll)) {\n        return createArrayIterator(coll);\n    }\n\n    var iterator = (0, _getIterator2.default)(coll);\n    return iterator ? createES2015Iterator(iterator) : createObjectIterator(coll);\n}\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = once;\nfunction once(fn) {\n    function wrapper(...args) {\n        if (fn === null) return;\n        var callFn = fn;\n        fn = null;\n        callFn.apply(this, args);\n    }\n    Object.assign(wrapper, fn);\n    return wrapper;\n}\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = onlyOnce;\nfunction onlyOnce(fn) {\n    return function (...args) {\n        if (fn === null) throw new Error(\"Callback was already called.\");\n        var callFn = fn;\n        fn = null;\n        callFn.apply(this, args);\n    };\n}\nmodule.exports = exports.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _isArrayLike = require('./isArrayLike.js');\n\nvar _isArrayLike2 = _interopRequireDefault(_isArrayLike);\n\nvar _wrapAsync = require('./wrapAsync.js');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nvar _awaitify = require('./awaitify.js');\n\nvar _awaitify2 = _interopRequireDefault(_awaitify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = (0, _awaitify2.default)((eachfn, tasks, callback) => {\n    var results = (0, _isArrayLike2.default)(tasks) ? [] : {};\n\n    eachfn(tasks, (task, key, taskCb) => {\n        (0, _wrapAsync2.default)(task)((err, ...result) => {\n            if (result.length < 2) {\n                [result] = result;\n            }\n            results[key] = result;\n            taskCb(err);\n        });\n    }, err => callback(err, results));\n}, 3);\nmodule.exports = exports.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.fallback = fallback;\nexports.wrap = wrap;\n/* istanbul ignore file */\n\nvar hasQueueMicrotask = exports.hasQueueMicrotask = typeof queueMicrotask === 'function' && queueMicrotask;\nvar hasSetImmediate = exports.hasSetImmediate = typeof setImmediate === 'function' && setImmediate;\nvar hasNextTick = exports.hasNextTick = typeof process === 'object' && typeof process.nextTick === 'function';\n\nfunction fallback(fn) {\n    setTimeout(fn, 0);\n}\n\nfunction wrap(defer) {\n    return (fn, ...args) => defer(() => fn(...args));\n}\n\nvar _defer;\n\nif (hasQueueMicrotask) {\n    _defer = queueMicrotask;\n} else if (hasSetImmediate) {\n    _defer = setImmediate;\n} else if (hasNextTick) {\n    _defer = process.nextTick;\n} else {\n    _defer = fallback;\n}\n\nexports.default = wrap(_defer);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _withoutIndex;\nfunction _withoutIndex(iteratee) {\n    return (value, index, callback) => iteratee(value, callback);\n}\nmodule.exports = exports.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.isAsyncIterable = exports.isAsyncGenerator = exports.isAsync = undefined;\n\nvar _asyncify = require('../asyncify.js');\n\nvar _asyncify2 = _interopRequireDefault(_asyncify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction isAsync(fn) {\n    return fn[Symbol.toStringTag] === 'AsyncFunction';\n}\n\nfunction isAsyncGenerator(fn) {\n    return fn[Symbol.toStringTag] === 'AsyncGenerator';\n}\n\nfunction isAsyncIterable(obj) {\n    return typeof obj[Symbol.asyncIterator] === 'function';\n}\n\nfunction wrapAsync(asyncFn) {\n    if (typeof asyncFn !== 'function') throw new Error('expected a function');\n    return isAsync(asyncFn) ? (0, _asyncify2.default)(asyncFn) : asyncFn;\n}\n\nexports.default = wrapAsync;\nexports.isAsync = isAsync;\nexports.isAsyncGenerator = isAsyncGenerator;\nexports.isAsyncIterable = isAsyncIterable;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = series;\n\nvar _parallel2 = require('./internal/parallel.js');\n\nvar _parallel3 = _interopRequireDefault(_parallel2);\n\nvar _eachOfSeries = require('./eachOfSeries.js');\n\nvar _eachOfSeries2 = _interopRequireDefault(_eachOfSeries);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Run the functions in the `tasks` collection in series, each one running once\n * the previous function has completed. If any functions in the series pass an\n * error to its callback, no more functions are run, and `callback` is\n * immediately called with the value of the error. Otherwise, `callback`\n * receives an array of results when `tasks` have completed.\n *\n * It is also possible to use an object instead of an array. Each property will\n * be run as a function, and the results will be passed to the final `callback`\n * as an object instead of an array. This can be a more readable way of handling\n *  results from {@link async.series}.\n *\n * **Note** that while many implementations preserve the order of object\n * properties, the [ECMAScript Language Specification](http://www.ecma-international.org/ecma-262/5.1/#sec-8.6)\n * explicitly states that\n *\n * > The mechanics and order of enumerating the properties is not specified.\n *\n * So if you rely on the order in which your series of functions are executed,\n * and want this to work on all platforms, consider using an array.\n *\n * @name series\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|AsyncIterable|Object} tasks - A collection containing\n * [async functions]{@link AsyncFunction} to run in series.\n * Each function can complete with any number of optional `result` values.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed. This function gets a results array (or object)\n * containing all the result arguments passed to the `task` callbacks. Invoked\n * with (err, result).\n * @return {Promise} a promise, if no callback is passed\n * @example\n *\n * //Using Callbacks\n * async.series([\n *     function(callback) {\n *         setTimeout(function() {\n *             // do some async task\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             // then do another async task\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ], function(err, results) {\n *     console.log(results);\n *     // results is equal to ['one','two']\n * });\n *\n * // an example using objects instead of arrays\n * async.series({\n *     one: function(callback) {\n *         setTimeout(function() {\n *             // do some async task\n *             callback(null, 1);\n *         }, 200);\n *     },\n *     two: function(callback) {\n *         setTimeout(function() {\n *             // then do another async task\n *             callback(null, 2);\n *         }, 100);\n *     }\n * }, function(err, results) {\n *     console.log(results);\n *     // results is equal to: { one: 1, two: 2 }\n * });\n *\n * //Using Promises\n * async.series([\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ]).then(results => {\n *     console.log(results);\n *     // results is equal to ['one','two']\n * }).catch(err => {\n *     console.log(err);\n * });\n *\n * // an example using an object instead of an array\n * async.series({\n *     one: function(callback) {\n *         setTimeout(function() {\n *             // do some async task\n *             callback(null, 1);\n *         }, 200);\n *     },\n *     two: function(callback) {\n *         setTimeout(function() {\n *             // then do another async task\n *             callback(null, 2);\n *         }, 100);\n *     }\n * }).then(results => {\n *     console.log(results);\n *     // results is equal to: { one: 1, two: 2 }\n * }).catch(err => {\n *     console.log(err);\n * });\n *\n * //Using async/await\n * async () => {\n *     try {\n *         let results = await async.series([\n *             function(callback) {\n *                 setTimeout(function() {\n *                     // do some async task\n *                     callback(null, 'one');\n *                 }, 200);\n *             },\n *             function(callback) {\n *                 setTimeout(function() {\n *                     // then do another async task\n *                     callback(null, 'two');\n *                 }, 100);\n *             }\n *         ]);\n *         console.log(results);\n *         // results is equal to ['one','two']\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n * // an example using an object instead of an array\n * async () => {\n *     try {\n *         let results = await async.parallel({\n *             one: function(callback) {\n *                 setTimeout(function() {\n *                     // do some async task\n *                     callback(null, 1);\n *                 }, 200);\n *             },\n *            two: function(callback) {\n *                 setTimeout(function() {\n *                     // then do another async task\n *                     callback(null, 2);\n *                 }, 100);\n *            }\n *         });\n *         console.log(results);\n *         // results is equal to: { one: 1, two: 2 }\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n */\nfunction series(tasks, callback) {\n    return (0, _parallel3.default)(_eachOfSeries2.default, tasks, callback);\n}\nmodule.exports = exports.default;","'use strict';\n\nconst isStream = stream =>\n\tstream !== null &&\n\ttypeof stream === 'object' &&\n\ttypeof stream.pipe === 'function';\n\nisStream.writable = stream =>\n\tisStream(stream) &&\n\tstream.writable !== false &&\n\ttypeof stream._write === 'function' &&\n\ttypeof stream._writableState === 'object';\n\nisStream.readable = stream =>\n\tisStream(stream) &&\n\tstream.readable !== false &&\n\ttypeof stream._read === 'function' &&\n\ttypeof stream._readableState === 'object';\n\nisStream.duplex = stream =>\n\tisStream.writable(stream) &&\n\tisStream.readable(stream);\n\nisStream.transform = stream =>\n\tisStream.duplex(stream) &&\n\ttypeof stream._transform === 'function';\n\nmodule.exports = isStream;\n","'use strict';\n\nconst codes = {};\n\nfunction createErrorType(code, message, Base) {\n  if (!Base) {\n    Base = Error\n  }\n\n  function getMessage (arg1, arg2, arg3) {\n    if (typeof message === 'string') {\n      return message\n    } else {\n      return message(arg1, arg2, arg3)\n    }\n  }\n\n  class NodeError extends Base {\n    constructor (arg1, arg2, arg3) {\n      super(getMessage(arg1, arg2, arg3));\n    }\n  }\n\n  NodeError.prototype.name = Base.name;\n  NodeError.prototype.code = code;\n\n  codes[code] = NodeError;\n}\n\n// https://github.com/nodejs/node/blob/v10.8.0/lib/internal/errors.js\nfunction oneOf(expected, thing) {\n  if (Array.isArray(expected)) {\n    const len = expected.length;\n    expected = expected.map((i) => String(i));\n    if (len > 2) {\n      return `one of ${thing} ${expected.slice(0, len - 1).join(', ')}, or ` +\n             expected[len - 1];\n    } else if (len === 2) {\n      return `one of ${thing} ${expected[0]} or ${expected[1]}`;\n    } else {\n      return `of ${thing} ${expected[0]}`;\n    }\n  } else {\n    return `of ${thing} ${String(expected)}`;\n  }\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\nfunction startsWith(str, search, pos) {\n\treturn str.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\nfunction endsWith(str, search, this_len) {\n\tif (this_len === undefined || this_len > str.length) {\n\t\tthis_len = str.length;\n\t}\n\treturn str.substring(this_len - search.length, this_len) === search;\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes\nfunction includes(str, search, start) {\n  if (typeof start !== 'number') {\n    start = 0;\n  }\n\n  if (start + search.length > str.length) {\n    return false;\n  } else {\n    return str.indexOf(search, start) !== -1;\n  }\n}\n\ncreateErrorType('ERR_INVALID_OPT_VALUE', function (name, value) {\n  return 'The value \"' + value + '\" is invalid for option \"' + name + '\"'\n}, TypeError);\ncreateErrorType('ERR_INVALID_ARG_TYPE', function (name, expected, actual) {\n  // determiner: 'must be' or 'must not be'\n  let determiner;\n  if (typeof expected === 'string' && startsWith(expected, 'not ')) {\n    determiner = 'must not be';\n    expected = expected.replace(/^not /, '');\n  } else {\n    determiner = 'must be';\n  }\n\n  let msg;\n  if (endsWith(name, ' argument')) {\n    // For cases like 'first argument'\n    msg = `The ${name} ${determiner} ${oneOf(expected, 'type')}`;\n  } else {\n    const type = includes(name, '.') ? 'property' : 'argument';\n    msg = `The \"${name}\" ${type} ${determiner} ${oneOf(expected, 'type')}`;\n  }\n\n  msg += `. Received type ${typeof actual}`;\n  return msg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_PUSH_AFTER_EOF', 'stream.push() after EOF');\ncreateErrorType('ERR_METHOD_NOT_IMPLEMENTED', function (name) {\n  return 'The ' + name + ' method is not implemented'\n});\ncreateErrorType('ERR_STREAM_PREMATURE_CLOSE', 'Premature close');\ncreateErrorType('ERR_STREAM_DESTROYED', function (name) {\n  return 'Cannot call ' + name + ' after a stream was destroyed';\n});\ncreateErrorType('ERR_MULTIPLE_CALLBACK', 'Callback called multiple times');\ncreateErrorType('ERR_STREAM_CANNOT_PIPE', 'Cannot pipe, not readable');\ncreateErrorType('ERR_STREAM_WRITE_AFTER_END', 'write after end');\ncreateErrorType('ERR_STREAM_NULL_VALUES', 'May not write null values to stream', TypeError);\ncreateErrorType('ERR_UNKNOWN_ENCODING', function (arg) {\n  return 'Unknown encoding: ' + arg\n}, TypeError);\ncreateErrorType('ERR_STREAM_UNSHIFT_AFTER_END_EVENT', 'stream.unshift() after end event');\n\nmodule.exports.codes = codes;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\nrequire('inherits')(Duplex, Readable);\n{\n  // Allow the keys array to be GC'ed.\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n  Readable.call(this, options);\n  Writable.call(this, options);\n  this.allowHalfOpen = true;\n  if (options) {\n    if (options.readable === false) this.readable = false;\n    if (options.writable === false) this.writable = false;\n    if (options.allowHalfOpen === false) {\n      this.allowHalfOpen = false;\n      this.once('end', onend);\n    }\n  }\n}\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n});\n\n// the no-half-open enforcer\nfunction onend() {\n  // If the writable side ended, then we're ok.\n  if (this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  process.nextTick(onEndNT, this);\n}\nfunction onEndNT(self) {\n  self.end();\n}\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\nvar Transform = require('./_stream_transform');\nrequire('inherits')(PassThrough, Transform);\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n  Transform.call(this, options);\n}\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\nvar EElistenerCount = function EElistenerCount(emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\nvar Buffer = require('buffer').Buffer;\nvar OurUint8Array = (typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : {}).Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function debug() {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/buffer_list');\nvar destroyImpl = require('./internal/streams/destroy');\nvar _require = require('./internal/streams/state'),\n  getHighWaterMark = _require.getHighWaterMark;\nvar _require$codes = require('../errors').codes,\n  ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n  ERR_STREAM_PUSH_AFTER_EOF = _require$codes.ERR_STREAM_PUSH_AFTER_EOF,\n  ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_STREAM_UNSHIFT_AFTER_END_EVENT = _require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;\n\n// Lazy loaded to improve the startup performance.\nvar StringDecoder;\nvar createReadableStreamAsyncIterator;\nvar from;\nrequire('inherits')(Readable, Stream);\nvar errorOrDestroy = destroyImpl.errorOrDestroy;\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (Array.isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\nfunction ReadableState(options, stream, isDuplex) {\n  Duplex = Duplex || require('./_stream_duplex');\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  this.highWaterMark = getHighWaterMark(this, options, 'readableHighWaterMark', isDuplex);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n  this.paused = true;\n\n  // Should close be emitted on destroy. Defaults to true.\n  this.emitClose = options.emitClose !== false;\n\n  // Should .destroy() be called after 'end' (and potentially 'finish')\n  this.autoDestroy = !!options.autoDestroy;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the ReadableState constructor, at least with V8 6.5\n  var isDuplex = this instanceof Duplex;\n  this._readableState = new ReadableState(options, this, isDuplex);\n\n  // legacy\n  this.readable = true;\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n  Stream.call(this);\n}\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  debug('readableAddChunk', chunk);\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      errorOrDestroy(stream, er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n      if (addToFront) {\n        if (state.endEmitted) errorOrDestroy(stream, new ERR_STREAM_UNSHIFT_AFTER_END_EVENT());else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        errorOrDestroy(stream, new ERR_STREAM_PUSH_AFTER_EOF());\n      } else if (state.destroyed) {\n        return false;\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n      maybeReadMore(stream, state);\n    }\n  }\n\n  // We can push more data if we are below the highWaterMark.\n  // Also, if we have no data yet, we can stand some more bytes.\n  // This is to work around cases where hwm=0, such as the repl.\n  return !state.ended && (state.length < state.highWaterMark || state.length === 0);\n}\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    state.awaitDrain = 0;\n    stream.emit('data', chunk);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk);\n  }\n  return er;\n}\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  var decoder = new StringDecoder(enc);\n  this._readableState.decoder = decoder;\n  // If setEncoding(null), decoder.encoding equals utf8\n  this._readableState.encoding = this._readableState.decoder.encoding;\n\n  // Iterate over current buffer to convert already stored Buffers:\n  var p = this._readableState.buffer.head;\n  var content = '';\n  while (p !== null) {\n    content += decoder.write(p.data);\n    p = p.next;\n  }\n  this._readableState.buffer.clear();\n  if (content !== '') this._readableState.buffer.push(content);\n  this._readableState.length = content.length;\n  return this;\n};\n\n// Don't raise the hwm > 1GB\nvar MAX_HWM = 0x40000000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    // TODO(ronag): Throw ERR_VALUE_OUT_OF_RANGE.\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && ((state.highWaterMark !== 0 ? state.length >= state.highWaterMark : state.length > 0) || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n  if (ret === null) {\n    state.needReadable = state.length <= state.highWaterMark;\n    n = 0;\n  } else {\n    state.length -= n;\n    state.awaitDrain = 0;\n  }\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n  if (ret !== null) this.emit('data', ret);\n  return ret;\n};\nfunction onEofChunk(stream, state) {\n  debug('onEofChunk');\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n  if (state.sync) {\n    // if we are sync, wait until next tick to emit the data.\n    // Otherwise we risk emitting data in the flow()\n    // the readable code triggers during a read() call\n    emitReadable(stream);\n  } else {\n    // emit 'readable' now to make sure it gets picked up.\n    state.needReadable = false;\n    if (!state.emittedReadable) {\n      state.emittedReadable = true;\n      emitReadable_(stream);\n    }\n  }\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  debug('emitReadable', state.needReadable, state.emittedReadable);\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    process.nextTick(emitReadable_, stream);\n  }\n}\nfunction emitReadable_(stream) {\n  var state = stream._readableState;\n  debug('emitReadable_', state.destroyed, state.length, state.ended);\n  if (!state.destroyed && (state.length || state.ended)) {\n    stream.emit('readable');\n    state.emittedReadable = false;\n  }\n\n  // The stream needs another readable event if\n  // 1. It is not flowing, as the flow mechanism will take\n  //    care of it.\n  // 2. It is not ended.\n  // 3. It is below the highWaterMark, so we can schedule\n  //    another readable later.\n  state.needReadable = !state.flowing && !state.ended && state.length <= state.highWaterMark;\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    process.nextTick(maybeReadMore_, stream, state);\n  }\n}\nfunction maybeReadMore_(stream, state) {\n  // Attempt to read more data if we should.\n  //\n  // The conditions for reading more data are (one of):\n  // - Not enough data buffered (state.length < state.highWaterMark). The loop\n  //   is responsible for filling the buffer with enough data if such data\n  //   is available. If highWaterMark is 0 and we are not in the flowing mode\n  //   we should _not_ attempt to buffer any extra data. We'll get more data\n  //   when the stream consumer calls read() instead.\n  // - No data in the buffer, and the stream is in flowing mode. In this mode\n  //   the loop below is responsible for ensuring read() is called. Failing to\n  //   call read here would abort the flow and there's no other mechanism for\n  //   continuing the flow if the stream consumer has just subscribed to the\n  //   'data' event.\n  //\n  // In addition to the above conditions to keep reading data, the following\n  // conditions prevent the data from being read:\n  // - The stream has ended (state.ended).\n  // - There is already a pending 'read' operation (state.reading). This is a\n  //   case where the the stream has called the implementation defined _read()\n  //   method, but they are processing the call asynchronously and have _not_\n  //   called push() with new data. In this case we skip performing more\n  //   read()s. The execution ends in this method again after the _read() ends\n  //   up calling push() with more data.\n  while (!state.reading && !state.ended && (state.length < state.highWaterMark || state.flowing && state.length === 0)) {\n    var len = state.length;\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  errorOrDestroy(this, new ERR_METHOD_NOT_IMPLEMENTED('_read()'));\n};\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) process.nextTick(endFn);else src.once('end', endFn);\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    var ret = dest.write(chunk);\n    debug('dest.write', ret);\n    if (ret === false) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', state.awaitDrain);\n        state.awaitDrain++;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) errorOrDestroy(dest, er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n  return dest;\n};\nfunction pipeOnDrain(src) {\n  return function pipeOnDrainFunctionResult() {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = {\n    hasUnpiped: false\n  };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    for (var i = 0; i < len; i++) dests[i].emit('unpipe', this, {\n      hasUnpiped: false\n    });\n    return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n  dest.emit('unpipe', this, unpipeInfo);\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n  var state = this._readableState;\n  if (ev === 'data') {\n    // update readableListening so that resume() may be a no-op\n    // a few lines down. This is needed to support once('readable').\n    state.readableListening = this.listenerCount('readable') > 0;\n\n    // Try start flowing on next tick if stream isn't explicitly paused\n    if (state.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.flowing = false;\n      state.emittedReadable = false;\n      debug('on readable', state.length, state.reading);\n      if (state.length) {\n        emitReadable(this);\n      } else if (!state.reading) {\n        process.nextTick(nReadingNextTick, this);\n      }\n    }\n  }\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\nReadable.prototype.removeListener = function (ev, fn) {\n  var res = Stream.prototype.removeListener.call(this, ev, fn);\n  if (ev === 'readable') {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n  return res;\n};\nReadable.prototype.removeAllListeners = function (ev) {\n  var res = Stream.prototype.removeAllListeners.apply(this, arguments);\n  if (ev === 'readable' || ev === undefined) {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n  return res;\n};\nfunction updateReadableListening(self) {\n  var state = self._readableState;\n  state.readableListening = self.listenerCount('readable') > 0;\n  if (state.resumeScheduled && !state.paused) {\n    // flowing needs to be set to true now, otherwise\n    // the upcoming resume will not flow.\n    state.flowing = true;\n\n    // crude way to check if we should resume\n  } else if (self.listenerCount('data') > 0) {\n    self.resume();\n  }\n}\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    // we flow only if there is no one listening\n    // for readable, but we still have to call\n    // resume()\n    state.flowing = !state.readableListening;\n    resume(this, state);\n  }\n  state.paused = false;\n  return this;\n};\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    process.nextTick(resume_, stream, state);\n  }\n}\nfunction resume_(stream, state) {\n  debug('resume', state.reading);\n  if (!state.reading) {\n    stream.read(0);\n  }\n  state.resumeScheduled = false;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (this._readableState.flowing !== false) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  this._readableState.paused = true;\n  return this;\n};\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null);\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n  var state = this._readableState;\n  var paused = false;\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n    _this.push(null);\n  });\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function methodWrap(method) {\n        return function methodWrapReturnFunction() {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n  return this;\n};\nif (typeof Symbol === 'function') {\n  Readable.prototype[Symbol.asyncIterator] = function () {\n    if (createReadableStreamAsyncIterator === undefined) {\n      createReadableStreamAsyncIterator = require('./internal/streams/async_iterator');\n    }\n    return createReadableStreamAsyncIterator(this);\n  };\n}\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.highWaterMark;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState && this._readableState.buffer;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableFlowing', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.flowing;\n  },\n  set: function set(state) {\n    if (this._readableState) {\n      this._readableState.flowing = state;\n    }\n  }\n});\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\nObject.defineProperty(Readable.prototype, 'readableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.length;\n  }\n});\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.first();else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = state.buffer.consume(n, state.decoder);\n  }\n  return ret;\n}\nfunction endReadable(stream) {\n  var state = stream._readableState;\n  debug('endReadable', state.endEmitted);\n  if (!state.endEmitted) {\n    state.ended = true;\n    process.nextTick(endReadableNT, state, stream);\n  }\n}\nfunction endReadableNT(state, stream) {\n  debug('endReadableNT', state.endEmitted, state.length);\n\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n    if (state.autoDestroy) {\n      // In case of duplex streams we need a way to detect\n      // if the writable side is ready for autoDestroy as well\n      var wState = stream._writableState;\n      if (!wState || wState.autoDestroy && wState.finished) {\n        stream.destroy();\n      }\n    }\n  }\n}\nif (typeof Symbol === 'function') {\n  Readable.from = function (iterable, opts) {\n    if (from === undefined) {\n      from = require('./internal/streams/from');\n    }\n    return from(Readable, iterable, opts);\n  };\n}\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\nvar _require$codes = require('../errors').codes,\n  ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n  ERR_TRANSFORM_ALREADY_TRANSFORMING = _require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,\n  ERR_TRANSFORM_WITH_LENGTH_0 = _require$codes.ERR_TRANSFORM_WITH_LENGTH_0;\nvar Duplex = require('./_stream_duplex');\nrequire('inherits')(Transform, Duplex);\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n  var cb = ts.writecb;\n  if (cb === null) {\n    return this.emit('error', new ERR_MULTIPLE_CALLBACK());\n  }\n  ts.writechunk = null;\n  ts.writecb = null;\n  if (data != null)\n    // single equals check for both `null` and `undefined`\n    this.push(data);\n  cb(er);\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n  Duplex.call(this, options);\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\nfunction prefinish() {\n  var _this = this;\n  if (typeof this._flush === 'function' && !this._readableState.destroyed) {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_transform()'));\n};\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n  if (ts.writechunk !== null && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\nTransform.prototype._destroy = function (err, cb) {\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n  });\n};\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n  if (data != null)\n    // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // TODO(BridgeAR): Write a test for these two error cases\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new ERR_TRANSFORM_WITH_LENGTH_0();\n  if (stream._transformState.transforming) throw new ERR_TRANSFORM_ALREADY_TRANSFORMING();\n  return stream.push(null);\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\nvar Buffer = require('buffer').Buffer;\nvar OurUint8Array = (typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : {}).Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\nvar destroyImpl = require('./internal/streams/destroy');\nvar _require = require('./internal/streams/state'),\n  getHighWaterMark = _require.getHighWaterMark;\nvar _require$codes = require('../errors').codes,\n  ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n  ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n  ERR_STREAM_CANNOT_PIPE = _require$codes.ERR_STREAM_CANNOT_PIPE,\n  ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED,\n  ERR_STREAM_NULL_VALUES = _require$codes.ERR_STREAM_NULL_VALUES,\n  ERR_STREAM_WRITE_AFTER_END = _require$codes.ERR_STREAM_WRITE_AFTER_END,\n  ERR_UNKNOWN_ENCODING = _require$codes.ERR_UNKNOWN_ENCODING;\nvar errorOrDestroy = destroyImpl.errorOrDestroy;\nrequire('inherits')(Writable, Stream);\nfunction nop() {}\nfunction WritableState(options, stream, isDuplex) {\n  Duplex = Duplex || require('./_stream_duplex');\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream,\n  // e.g. options.readableObjectMode vs. options.writableObjectMode, etc.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  this.highWaterMark = getHighWaterMark(this, options, 'writableHighWaterMark', isDuplex);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // Should close be emitted on destroy. Defaults to true.\n  this.emitClose = options.emitClose !== false;\n\n  // Should .destroy() be called after 'finish' (and potentially 'end')\n  this.autoDestroy = !!options.autoDestroy;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function writableStateBufferGetter() {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function value(object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function realHasInstance(object) {\n    return object instanceof this;\n  };\n}\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the WritableState constructor, at least with V8 6.5\n  var isDuplex = this instanceof Duplex;\n  if (!isDuplex && !realHasInstance.call(Writable, this)) return new Writable(options);\n  this._writableState = new WritableState(options, this, isDuplex);\n\n  // legacy.\n  this.writable = true;\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n    if (typeof options.writev === 'function') this._writev = options.writev;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  errorOrDestroy(this, new ERR_STREAM_CANNOT_PIPE());\n};\nfunction writeAfterEnd(stream, cb) {\n  var er = new ERR_STREAM_WRITE_AFTER_END();\n  // TODO: defer error events consistently everywhere, not just the cb\n  errorOrDestroy(stream, er);\n  process.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var er;\n  if (chunk === null) {\n    er = new ERR_STREAM_NULL_VALUES();\n  } else if (typeof chunk !== 'string' && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer'], chunk);\n  }\n  if (er) {\n    errorOrDestroy(stream, er);\n    process.nextTick(cb, er);\n    return false;\n  }\n  return true;\n}\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n  if (typeof cb !== 'function') cb = nop;\n  if (state.ending) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n  return ret;\n};\nWritable.prototype.cork = function () {\n  this._writableState.corked++;\n};\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n  if (state.corked) {\n    state.corked--;\n    if (!state.writing && !state.corked && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new ERR_UNKNOWN_ENCODING(encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\nObject.defineProperty(Writable.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n  state.length += len;\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n  return ret;\n}\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (state.destroyed) state.onwrite(new ERR_STREAM_DESTROYED('write'));else if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    process.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    process.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    errorOrDestroy(stream, er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    errorOrDestroy(stream, er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n  if (typeof cb !== 'function') throw new ERR_MULTIPLE_CALLBACK();\n  onwriteStateUpdate(state);\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state) || stream.destroyed;\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n    if (sync) {\n      process.nextTick(afterWrite, stream, state, finished, cb);\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_write()'));\n};\nWritable.prototype._writev = null;\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending) endWritable(this, state, cb);\n  return this;\n};\nObject.defineProperty(Writable.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n});\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      errorOrDestroy(stream, err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function' && !state.destroyed) {\n      state.pendingcb++;\n      state.finalCalled = true;\n      process.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n      if (state.autoDestroy) {\n        // In case of duplex streams we need a way to detect\n        // if the readable side is ready for autoDestroy as well\n        var rState = stream._readableState;\n        if (!rState || rState.autoDestroy && rState.endEmitted) {\n          stream.destroy();\n        }\n      }\n    }\n  }\n  return need;\n}\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) process.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n\n  // reuse the free corkReq.\n  state.corkedRequestsFree.next = corkReq;\n}\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  cb(err);\n};","'use strict';\n\nvar _Object$setPrototypeO;\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar finished = require('./end-of-stream');\nvar kLastResolve = Symbol('lastResolve');\nvar kLastReject = Symbol('lastReject');\nvar kError = Symbol('error');\nvar kEnded = Symbol('ended');\nvar kLastPromise = Symbol('lastPromise');\nvar kHandlePromise = Symbol('handlePromise');\nvar kStream = Symbol('stream');\nfunction createIterResult(value, done) {\n  return {\n    value: value,\n    done: done\n  };\n}\nfunction readAndResolve(iter) {\n  var resolve = iter[kLastResolve];\n  if (resolve !== null) {\n    var data = iter[kStream].read();\n    // we defer if data is null\n    // we can be expecting either 'end' or\n    // 'error'\n    if (data !== null) {\n      iter[kLastPromise] = null;\n      iter[kLastResolve] = null;\n      iter[kLastReject] = null;\n      resolve(createIterResult(data, false));\n    }\n  }\n}\nfunction onReadable(iter) {\n  // we wait for the next tick, because it might\n  // emit an error with process.nextTick\n  process.nextTick(readAndResolve, iter);\n}\nfunction wrapForNext(lastPromise, iter) {\n  return function (resolve, reject) {\n    lastPromise.then(function () {\n      if (iter[kEnded]) {\n        resolve(createIterResult(undefined, true));\n        return;\n      }\n      iter[kHandlePromise](resolve, reject);\n    }, reject);\n  };\n}\nvar AsyncIteratorPrototype = Object.getPrototypeOf(function () {});\nvar ReadableStreamAsyncIteratorPrototype = Object.setPrototypeOf((_Object$setPrototypeO = {\n  get stream() {\n    return this[kStream];\n  },\n  next: function next() {\n    var _this = this;\n    // if we have detected an error in the meanwhile\n    // reject straight away\n    var error = this[kError];\n    if (error !== null) {\n      return Promise.reject(error);\n    }\n    if (this[kEnded]) {\n      return Promise.resolve(createIterResult(undefined, true));\n    }\n    if (this[kStream].destroyed) {\n      // We need to defer via nextTick because if .destroy(err) is\n      // called, the error will be emitted via nextTick, and\n      // we cannot guarantee that there is no error lingering around\n      // waiting to be emitted.\n      return new Promise(function (resolve, reject) {\n        process.nextTick(function () {\n          if (_this[kError]) {\n            reject(_this[kError]);\n          } else {\n            resolve(createIterResult(undefined, true));\n          }\n        });\n      });\n    }\n\n    // if we have multiple next() calls\n    // we will wait for the previous Promise to finish\n    // this logic is optimized to support for await loops,\n    // where next() is only called once at a time\n    var lastPromise = this[kLastPromise];\n    var promise;\n    if (lastPromise) {\n      promise = new Promise(wrapForNext(lastPromise, this));\n    } else {\n      // fast path needed to support multiple this.push()\n      // without triggering the next() queue\n      var data = this[kStream].read();\n      if (data !== null) {\n        return Promise.resolve(createIterResult(data, false));\n      }\n      promise = new Promise(this[kHandlePromise]);\n    }\n    this[kLastPromise] = promise;\n    return promise;\n  }\n}, _defineProperty(_Object$setPrototypeO, Symbol.asyncIterator, function () {\n  return this;\n}), _defineProperty(_Object$setPrototypeO, \"return\", function _return() {\n  var _this2 = this;\n  // destroy(err, cb) is a private API\n  // we can guarantee we have that here, because we control the\n  // Readable class this is attached to\n  return new Promise(function (resolve, reject) {\n    _this2[kStream].destroy(null, function (err) {\n      if (err) {\n        reject(err);\n        return;\n      }\n      resolve(createIterResult(undefined, true));\n    });\n  });\n}), _Object$setPrototypeO), AsyncIteratorPrototype);\nvar createReadableStreamAsyncIterator = function createReadableStreamAsyncIterator(stream) {\n  var _Object$create;\n  var iterator = Object.create(ReadableStreamAsyncIteratorPrototype, (_Object$create = {}, _defineProperty(_Object$create, kStream, {\n    value: stream,\n    writable: true\n  }), _defineProperty(_Object$create, kLastResolve, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kLastReject, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kError, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kEnded, {\n    value: stream._readableState.endEmitted,\n    writable: true\n  }), _defineProperty(_Object$create, kHandlePromise, {\n    value: function value(resolve, reject) {\n      var data = iterator[kStream].read();\n      if (data) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        resolve(createIterResult(data, false));\n      } else {\n        iterator[kLastResolve] = resolve;\n        iterator[kLastReject] = reject;\n      }\n    },\n    writable: true\n  }), _Object$create));\n  iterator[kLastPromise] = null;\n  finished(stream, function (err) {\n    if (err && err.code !== 'ERR_STREAM_PREMATURE_CLOSE') {\n      var reject = iterator[kLastReject];\n      // reject if we are waiting for data in the Promise\n      // returned by next() and store the error\n      if (reject !== null) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        reject(err);\n      }\n      iterator[kError] = err;\n      return;\n    }\n    var resolve = iterator[kLastResolve];\n    if (resolve !== null) {\n      iterator[kLastPromise] = null;\n      iterator[kLastResolve] = null;\n      iterator[kLastReject] = null;\n      resolve(createIterResult(undefined, true));\n    }\n    iterator[kEnded] = true;\n  });\n  stream.on('readable', onReadable.bind(null, iterator));\n  return iterator;\n};\nmodule.exports = createReadableStreamAsyncIterator;","'use strict';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar _require = require('buffer'),\n  Buffer = _require.Buffer;\nvar _require2 = require('util'),\n  inspect = _require2.inspect;\nvar custom = inspect && inspect.custom || 'inspect';\nfunction copyBuffer(src, target, offset) {\n  Buffer.prototype.copy.call(src, target, offset);\n}\nmodule.exports = /*#__PURE__*/function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n  _createClass(BufferList, [{\n    key: \"push\",\n    value: function push(v) {\n      var entry = {\n        data: v,\n        next: null\n      };\n      if (this.length > 0) this.tail.next = entry;else this.head = entry;\n      this.tail = entry;\n      ++this.length;\n    }\n  }, {\n    key: \"unshift\",\n    value: function unshift(v) {\n      var entry = {\n        data: v,\n        next: this.head\n      };\n      if (this.length === 0) this.tail = entry;\n      this.head = entry;\n      ++this.length;\n    }\n  }, {\n    key: \"shift\",\n    value: function shift() {\n      if (this.length === 0) return;\n      var ret = this.head.data;\n      if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n      --this.length;\n      return ret;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.head = this.tail = null;\n      this.length = 0;\n    }\n  }, {\n    key: \"join\",\n    value: function join(s) {\n      if (this.length === 0) return '';\n      var p = this.head;\n      var ret = '' + p.data;\n      while (p = p.next) ret += s + p.data;\n      return ret;\n    }\n  }, {\n    key: \"concat\",\n    value: function concat(n) {\n      if (this.length === 0) return Buffer.alloc(0);\n      var ret = Buffer.allocUnsafe(n >>> 0);\n      var p = this.head;\n      var i = 0;\n      while (p) {\n        copyBuffer(p.data, ret, i);\n        i += p.data.length;\n        p = p.next;\n      }\n      return ret;\n    }\n\n    // Consumes a specified amount of bytes or characters from the buffered data.\n  }, {\n    key: \"consume\",\n    value: function consume(n, hasStrings) {\n      var ret;\n      if (n < this.head.data.length) {\n        // `slice` is the same for buffers and strings.\n        ret = this.head.data.slice(0, n);\n        this.head.data = this.head.data.slice(n);\n      } else if (n === this.head.data.length) {\n        // First chunk is a perfect match.\n        ret = this.shift();\n      } else {\n        // Result spans more than one buffer.\n        ret = hasStrings ? this._getString(n) : this._getBuffer(n);\n      }\n      return ret;\n    }\n  }, {\n    key: \"first\",\n    value: function first() {\n      return this.head.data;\n    }\n\n    // Consumes a specified amount of characters from the buffered data.\n  }, {\n    key: \"_getString\",\n    value: function _getString(n) {\n      var p = this.head;\n      var c = 1;\n      var ret = p.data;\n      n -= ret.length;\n      while (p = p.next) {\n        var str = p.data;\n        var nb = n > str.length ? str.length : n;\n        if (nb === str.length) ret += str;else ret += str.slice(0, n);\n        n -= nb;\n        if (n === 0) {\n          if (nb === str.length) {\n            ++c;\n            if (p.next) this.head = p.next;else this.head = this.tail = null;\n          } else {\n            this.head = p;\n            p.data = str.slice(nb);\n          }\n          break;\n        }\n        ++c;\n      }\n      this.length -= c;\n      return ret;\n    }\n\n    // Consumes a specified amount of bytes from the buffered data.\n  }, {\n    key: \"_getBuffer\",\n    value: function _getBuffer(n) {\n      var ret = Buffer.allocUnsafe(n);\n      var p = this.head;\n      var c = 1;\n      p.data.copy(ret);\n      n -= p.data.length;\n      while (p = p.next) {\n        var buf = p.data;\n        var nb = n > buf.length ? buf.length : n;\n        buf.copy(ret, ret.length - n, 0, nb);\n        n -= nb;\n        if (n === 0) {\n          if (nb === buf.length) {\n            ++c;\n            if (p.next) this.head = p.next;else this.head = this.tail = null;\n          } else {\n            this.head = p;\n            p.data = buf.slice(nb);\n          }\n          break;\n        }\n        ++c;\n      }\n      this.length -= c;\n      return ret;\n    }\n\n    // Make sure the linked list only shows the minimal necessary information.\n  }, {\n    key: custom,\n    value: function value(_, options) {\n      return inspect(this, _objectSpread(_objectSpread({}, options), {}, {\n        // Only inspect one level.\n        depth: 0,\n        // It should not recurse.\n        customInspect: false\n      }));\n    }\n  }]);\n  return BufferList;\n}();","'use strict';\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err) {\n      if (!this._writableState) {\n        process.nextTick(emitErrorNT, this, err);\n      } else if (!this._writableState.errorEmitted) {\n        this._writableState.errorEmitted = true;\n        process.nextTick(emitErrorNT, this, err);\n      }\n    }\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      if (!_this._writableState) {\n        process.nextTick(emitErrorAndCloseNT, _this, err);\n      } else if (!_this._writableState.errorEmitted) {\n        _this._writableState.errorEmitted = true;\n        process.nextTick(emitErrorAndCloseNT, _this, err);\n      } else {\n        process.nextTick(emitCloseNT, _this);\n      }\n    } else if (cb) {\n      process.nextTick(emitCloseNT, _this);\n      cb(err);\n    } else {\n      process.nextTick(emitCloseNT, _this);\n    }\n  });\n  return this;\n}\nfunction emitErrorAndCloseNT(self, err) {\n  emitErrorNT(self, err);\n  emitCloseNT(self);\n}\nfunction emitCloseNT(self) {\n  if (self._writableState && !self._writableState.emitClose) return;\n  if (self._readableState && !self._readableState.emitClose) return;\n  self.emit('close');\n}\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finalCalled = false;\n    this._writableState.prefinished = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\nfunction errorOrDestroy(stream, err) {\n  // We have tests that rely on errors being emitted\n  // in the same tick, so changing this is semver major.\n  // For now when you opt-in to autoDestroy we allow\n  // the error to be emitted nextTick. In a future\n  // semver major update we should change the default to this.\n\n  var rState = stream._readableState;\n  var wState = stream._writableState;\n  if (rState && rState.autoDestroy || wState && wState.autoDestroy) stream.destroy(err);else stream.emit('error', err);\n}\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy,\n  errorOrDestroy: errorOrDestroy\n};","// Ported from https://github.com/mafintosh/end-of-stream with\n// permission from the author, Mathias Buus (@mafintosh).\n\n'use strict';\n\nvar ERR_STREAM_PREMATURE_CLOSE = require('../../../errors').codes.ERR_STREAM_PREMATURE_CLOSE;\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    callback.apply(this, args);\n  };\n}\nfunction noop() {}\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\nfunction eos(stream, opts, callback) {\n  if (typeof opts === 'function') return eos(stream, null, opts);\n  if (!opts) opts = {};\n  callback = once(callback || noop);\n  var readable = opts.readable || opts.readable !== false && stream.readable;\n  var writable = opts.writable || opts.writable !== false && stream.writable;\n  var onlegacyfinish = function onlegacyfinish() {\n    if (!stream.writable) onfinish();\n  };\n  var writableEnded = stream._writableState && stream._writableState.finished;\n  var onfinish = function onfinish() {\n    writable = false;\n    writableEnded = true;\n    if (!readable) callback.call(stream);\n  };\n  var readableEnded = stream._readableState && stream._readableState.endEmitted;\n  var onend = function onend() {\n    readable = false;\n    readableEnded = true;\n    if (!writable) callback.call(stream);\n  };\n  var onerror = function onerror(err) {\n    callback.call(stream, err);\n  };\n  var onclose = function onclose() {\n    var err;\n    if (readable && !readableEnded) {\n      if (!stream._readableState || !stream._readableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n    if (writable && !writableEnded) {\n      if (!stream._writableState || !stream._writableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n  };\n  var onrequest = function onrequest() {\n    stream.req.on('finish', onfinish);\n  };\n  if (isRequest(stream)) {\n    stream.on('complete', onfinish);\n    stream.on('abort', onclose);\n    if (stream.req) onrequest();else stream.on('request', onrequest);\n  } else if (writable && !stream._writableState) {\n    // legacy streams\n    stream.on('end', onlegacyfinish);\n    stream.on('close', onlegacyfinish);\n  }\n  stream.on('end', onend);\n  stream.on('finish', onfinish);\n  if (opts.error !== false) stream.on('error', onerror);\n  stream.on('close', onclose);\n  return function () {\n    stream.removeListener('complete', onfinish);\n    stream.removeListener('abort', onclose);\n    stream.removeListener('request', onrequest);\n    if (stream.req) stream.req.removeListener('finish', onfinish);\n    stream.removeListener('end', onlegacyfinish);\n    stream.removeListener('close', onlegacyfinish);\n    stream.removeListener('finish', onfinish);\n    stream.removeListener('end', onend);\n    stream.removeListener('error', onerror);\n    stream.removeListener('close', onclose);\n  };\n}\nmodule.exports = eos;","'use strict';\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar ERR_INVALID_ARG_TYPE = require('../../../errors').codes.ERR_INVALID_ARG_TYPE;\nfunction from(Readable, iterable, opts) {\n  var iterator;\n  if (iterable && typeof iterable.next === 'function') {\n    iterator = iterable;\n  } else if (iterable && iterable[Symbol.asyncIterator]) iterator = iterable[Symbol.asyncIterator]();else if (iterable && iterable[Symbol.iterator]) iterator = iterable[Symbol.iterator]();else throw new ERR_INVALID_ARG_TYPE('iterable', ['Iterable'], iterable);\n  var readable = new Readable(_objectSpread({\n    objectMode: true\n  }, opts));\n  // Reading boolean to protect against _read\n  // being called before last iteration completion.\n  var reading = false;\n  readable._read = function () {\n    if (!reading) {\n      reading = true;\n      next();\n    }\n  };\n  function next() {\n    return _next2.apply(this, arguments);\n  }\n  function _next2() {\n    _next2 = _asyncToGenerator(function* () {\n      try {\n        var _yield$iterator$next = yield iterator.next(),\n          value = _yield$iterator$next.value,\n          done = _yield$iterator$next.done;\n        if (done) {\n          readable.push(null);\n        } else if (readable.push(yield value)) {\n          next();\n        } else {\n          reading = false;\n        }\n      } catch (err) {\n        readable.destroy(err);\n      }\n    });\n    return _next2.apply(this, arguments);\n  }\n  return readable;\n}\nmodule.exports = from;\n","// Ported from https://github.com/mafintosh/pump with\n// permission from the author, Mathias Buus (@mafintosh).\n\n'use strict';\n\nvar eos;\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    callback.apply(void 0, arguments);\n  };\n}\nvar _require$codes = require('../../../errors').codes,\n  ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS,\n  ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED;\nfunction noop(err) {\n  // Rethrow the error if it exists to avoid swallowing it\n  if (err) throw err;\n}\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\nfunction destroyer(stream, reading, writing, callback) {\n  callback = once(callback);\n  var closed = false;\n  stream.on('close', function () {\n    closed = true;\n  });\n  if (eos === undefined) eos = require('./end-of-stream');\n  eos(stream, {\n    readable: reading,\n    writable: writing\n  }, function (err) {\n    if (err) return callback(err);\n    closed = true;\n    callback();\n  });\n  var destroyed = false;\n  return function (err) {\n    if (closed) return;\n    if (destroyed) return;\n    destroyed = true;\n\n    // request.destroy just do .end - .abort is what we want\n    if (isRequest(stream)) return stream.abort();\n    if (typeof stream.destroy === 'function') return stream.destroy();\n    callback(err || new ERR_STREAM_DESTROYED('pipe'));\n  };\n}\nfunction call(fn) {\n  fn();\n}\nfunction pipe(from, to) {\n  return from.pipe(to);\n}\nfunction popCallback(streams) {\n  if (!streams.length) return noop;\n  if (typeof streams[streams.length - 1] !== 'function') return noop;\n  return streams.pop();\n}\nfunction pipeline() {\n  for (var _len = arguments.length, streams = new Array(_len), _key = 0; _key < _len; _key++) {\n    streams[_key] = arguments[_key];\n  }\n  var callback = popCallback(streams);\n  if (Array.isArray(streams[0])) streams = streams[0];\n  if (streams.length < 2) {\n    throw new ERR_MISSING_ARGS('streams');\n  }\n  var error;\n  var destroys = streams.map(function (stream, i) {\n    var reading = i < streams.length - 1;\n    var writing = i > 0;\n    return destroyer(stream, reading, writing, function (err) {\n      if (!error) error = err;\n      if (err) destroys.forEach(call);\n      if (reading) return;\n      destroys.forEach(call);\n      callback(error);\n    });\n  });\n  return streams.reduce(pipe);\n}\nmodule.exports = pipeline;","'use strict';\n\nvar ERR_INVALID_OPT_VALUE = require('../../../errors').codes.ERR_INVALID_OPT_VALUE;\nfunction highWaterMarkFrom(options, isDuplex, duplexKey) {\n  return options.highWaterMark != null ? options.highWaterMark : isDuplex ? options[duplexKey] : null;\n}\nfunction getHighWaterMark(state, options, duplexKey, isDuplex) {\n  var hwm = highWaterMarkFrom(options, isDuplex, duplexKey);\n  if (hwm != null) {\n    if (!(isFinite(hwm) && Math.floor(hwm) === hwm) || hwm < 0) {\n      var name = isDuplex ? duplexKey : 'highWaterMark';\n      throw new ERR_INVALID_OPT_VALUE(name, hwm);\n    }\n    return Math.floor(hwm);\n  }\n\n  // Default value\n  return state.objectMode ? 16 : 16 * 1024;\n}\nmodule.exports = {\n  getHighWaterMark: getHighWaterMark\n};","module.exports = require('stream');\n","var Stream = require('stream');\nif (process.env.READABLE_STREAM === 'disable' && Stream) {\n  module.exports = Stream.Readable;\n  Object.assign(module.exports, Stream);\n  module.exports.Stream = Stream;\n} else {\n  exports = module.exports = require('./lib/_stream_readable.js');\n  exports.Stream = Stream || exports;\n  exports.Readable = exports;\n  exports.Writable = require('./lib/_stream_writable.js');\n  exports.Duplex = require('./lib/_stream_duplex.js');\n  exports.Transform = require('./lib/_stream_transform.js');\n  exports.PassThrough = require('./lib/_stream_passthrough.js');\n  exports.finished = require('./lib/internal/streams/end-of-stream.js');\n  exports.pipeline = require('./lib/internal/streams/pipeline.js');\n}\n","/********************************************************************************\n * Copyright (c) 2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied:\n * -- GNU General Public License, version 2 with the GNU Classpath Exception\n * which is available at https://www.gnu.org/software/classpath/license.html\n * -- MIT License which is available at https://opensource.org/license/mit.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR MIT\n ********************************************************************************/\nimport 'reflect-metadata';\n\nimport { createAppModule, createSocketCliParser, ServerModule, SocketServerLauncher } from '@eclipse-glsp/server/node';\nimport { Container } from 'inversify';\nimport { TaskListDiagramModule } from './diagram/tasklist-diagram-module';\n\nexport async function launch(argv?: string[]): Promise<void> {\n    const options = createSocketCliParser().parse(argv);\n    const appContainer = new Container();\n    appContainer.load(createAppModule(options));\n\n    const launcher = appContainer.resolve(SocketServerLauncher);\n    const serverModule = new ServerModule().configureDiagramModule(new TaskListDiagramModule());\n\n    launcher.configure(serverModule);\n    launcher.start({ port: options.port, host: options.host });\n}\n\nlaunch(process.argv).catch(error => console.error('Error in tasklist server launcher:', error));\n","/********************************************************************************\n * Copyright (c) 2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied:\n * -- GNU General Public License, version 2 with the GNU Classpath Exception\n * which is available at https://www.gnu.org/software/classpath/license.html\n * -- MIT License which is available at https://opensource.org/license/mit.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR MIT\n ********************************************************************************/\nimport {\n    DefaultTypes,\n    DiagramConfiguration,\n    EdgeTypeHint,\n    getDefaultMapping,\n    GModelElement,\n    GModelElementConstructor,\n    ServerLayoutKind,\n    ShapeTypeHint\n} from '@eclipse-glsp/server';\nimport { injectable } from 'inversify';\n\n@injectable()\nexport class TaskListDiagramConfiguration implements DiagramConfiguration {\n    layoutKind = ServerLayoutKind.MANUAL;\n    needsClientLayout = true;\n    animatedUpdate = true;\n\n    get typeMapping(): Map<string, GModelElementConstructor<GModelElement>> {\n        return getDefaultMapping();\n    }\n\n    get shapeTypeHints(): ShapeTypeHint[] {\n        return [\n            {\n                elementTypeId: DefaultTypes.NODE,\n                deletable: true,\n                reparentable: false,\n                repositionable: true,\n                resizable: true\n            }\n        ];\n    }\n\n    get edgeTypeHints(): EdgeTypeHint[] {\n        return [\n            {\n                elementTypeId: DefaultTypes.EDGE,\n                deletable: true,\n                repositionable: false,\n                routable: false,\n                sourceElementTypeIds: [DefaultTypes.NODE],\n                targetElementTypeIds: [DefaultTypes.NODE]\n            }\n        ];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied:\n * -- GNU General Public License, version 2 with the GNU Classpath Exception\n * which is available at https://www.gnu.org/software/classpath/license.html\n * -- MIT License which is available at https://opensource.org/license/mit.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR MIT\n ********************************************************************************/\nimport {\n    ActionHandlerConstructor,\n    BindingTarget,\n    ComputedBoundsActionHandler,\n    DiagramConfiguration,\n    DiagramModule,\n    GModelFactory,\n    GModelIndex,\n    InstanceMultiBinding,\n    LabelEditValidator,\n    ModelState,\n    OperationHandlerConstructor,\n    SourceModelStorage\n} from '@eclipse-glsp/server';\nimport { injectable } from 'inversify';\nimport { CreateTaskHandler } from '../handler/create-task-node-handler';\nimport { CreateTransitionHandler } from '../handler/create-transition-handler';\nimport { DeleteElementHandler } from '../handler/delete-element-handler';\nimport { TaskListApplyLabelEditHandler } from '../handler/tasklist-apply-label-edit-handler';\nimport { TaskListChangeBoundsHandler } from '../handler/tasklist-change-bounds-handler';\nimport { TaskListLabelEditValidator } from '../handler/tasklist-label-edit-validator';\nimport { TaskListGModelFactory } from '../model/tasklist-gmodel-factory';\nimport { TaskListModelIndex } from '../model/tasklist-model-index';\nimport { TaskListModelState } from '../model/tasklist-model-state';\nimport { TaskListStorage } from '../model/tasklist-storage';\nimport { TaskListDiagramConfiguration } from './tasklist-diagram-configuration';\n\n@injectable()\nexport class TaskListDiagramModule extends DiagramModule {\n    readonly diagramType = 'tasklist-diagram';\n\n    protected bindDiagramConfiguration(): BindingTarget<DiagramConfiguration> {\n        return TaskListDiagramConfiguration;\n    }\n\n    protected bindSourceModelStorage(): BindingTarget<SourceModelStorage> {\n        return TaskListStorage;\n    }\n\n    protected bindModelState(): BindingTarget<ModelState> {\n        return { service: TaskListModelState };\n    }\n\n    protected bindGModelFactory(): BindingTarget<GModelFactory> {\n        return TaskListGModelFactory;\n    }\n\n    protected override configureActionHandlers(binding: InstanceMultiBinding<ActionHandlerConstructor>): void {\n        super.configureActionHandlers(binding);\n        binding.add(ComputedBoundsActionHandler);\n    }\n\n    protected override configureOperationHandlers(binding: InstanceMultiBinding<OperationHandlerConstructor>): void {\n        super.configureOperationHandlers(binding);\n        binding.add(CreateTaskHandler);\n        binding.add(CreateTransitionHandler);\n        binding.add(TaskListChangeBoundsHandler);\n        binding.add(TaskListApplyLabelEditHandler);\n        binding.add(DeleteElementHandler);\n    }\n\n    protected override bindGModelIndex(): BindingTarget<GModelIndex> {\n        this.context.bind(TaskListModelIndex).toSelf().inSingletonScope();\n        return { service: TaskListModelIndex };\n    }\n\n    protected override bindLabelEditValidator(): BindingTarget<LabelEditValidator> | undefined {\n        return TaskListLabelEditValidator;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied:\n * -- GNU General Public License, version 2 with the GNU Classpath Exception\n * which is available at https://www.gnu.org/software/classpath/license.html\n * -- MIT License which is available at https://opensource.org/license/mit.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR MIT\n ********************************************************************************/\nimport {\n    Command,\n    CreateNodeOperation,\n    DefaultTypes,\n    GNode,\n    JsonCreateNodeOperationHandler,\n    MaybePromise,\n    Point\n} from '@eclipse-glsp/server';\nimport { inject, injectable } from 'inversify';\nimport * as uuid from 'uuid';\nimport { Task } from '../model/tasklist-model';\nimport { TaskListModelState } from '../model/tasklist-model-state';\n\n@injectable()\nexport class CreateTaskHandler extends JsonCreateNodeOperationHandler {\n    readonly elementTypeIds = [DefaultTypes.NODE];\n\n    @inject(TaskListModelState)\n    protected override modelState: TaskListModelState;\n\n    override createCommand(operation: CreateNodeOperation): MaybePromise<Command | undefined> {\n        return this.commandOf(() => {\n            const relativeLocation = this.getRelativeLocation(operation) ?? Point.ORIGIN;\n            const task = this.createTask(relativeLocation);\n            const taskList = this.modelState.sourceModel;\n            taskList.tasks.push(task);\n        });\n    }\n\n    protected createTask(position: Point): Task {\n        const nodeCounter = this.modelState.index.getAllByClass(GNode).length;\n        return {\n            id: uuid.v4(),\n            name: `NewTaskNode${nodeCounter}`,\n            position\n        };\n    }\n\n    get label(): string {\n        return 'Task';\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied:\n * -- GNU General Public License, version 2 with the GNU Classpath Exception\n * which is available at https://www.gnu.org/software/classpath/license.html\n * -- MIT License which is available at https://opensource.org/license/mit.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR MIT\n ********************************************************************************/\nimport { Command, CreateEdgeOperation, DefaultTypes, JsonCreateEdgeOperationHandler, MaybePromise } from '@eclipse-glsp/server';\nimport { inject, injectable } from 'inversify';\nimport * as uuid from 'uuid';\nimport { Transition } from '../model/tasklist-model';\nimport { TaskListModelState } from '../model/tasklist-model-state';\n\n@injectable()\nexport class CreateTransitionHandler extends JsonCreateEdgeOperationHandler {\n    readonly elementTypeIds = [DefaultTypes.EDGE];\n\n    @inject(TaskListModelState)\n    protected override modelState: TaskListModelState;\n\n    override createCommand(operation: CreateEdgeOperation): MaybePromise<Command | undefined> {\n        return this.commandOf(() => {\n            const transition: Transition = {\n                id: uuid.v4(),\n                sourceTaskId: operation.sourceElementId,\n                targetTaskId: operation.targetElementId\n            };\n            this.modelState.sourceModel.transitions.push(transition);\n        });\n    }\n\n    get label(): string {\n        return 'Transition';\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied:\n * -- GNU General Public License, version 2 with the GNU Classpath Exception\n * which is available at https://www.gnu.org/software/classpath/license.html\n * -- MIT License which is available at https://opensource.org/license/mit.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR MIT\n ********************************************************************************/\nimport {\n    Command,\n    DeleteElementOperation,\n    GEdge,\n    GNode,\n    JsonOperationHandler,\n    MaybePromise,\n    remove,\n    toTypeGuard\n} from '@eclipse-glsp/server';\nimport { inject, injectable } from 'inversify';\nimport { Task, Transition } from '../model/tasklist-model';\nimport { TaskListModelState } from '../model/tasklist-model-state';\n\n@injectable()\nexport class DeleteElementHandler extends JsonOperationHandler {\n    readonly operationType = DeleteElementOperation.KIND;\n\n    @inject(TaskListModelState)\n    protected override modelState: TaskListModelState;\n\n    override createCommand(operation: DeleteElementOperation): MaybePromise<Command | undefined> {\n        return this.commandOf(() => {\n            operation.elementIds.forEach(elementId => this.delete(elementId));\n        });\n    }\n\n    protected delete(elementId: string): void {\n        const index = this.modelState.index;\n        const gModelElement = this.getGModelElementToDelete(elementId);\n        const gModelElementId = gModelElement?.id ?? elementId;\n        const gEdgeIds = this.getIncomingAndOutgoingEdgeIds(gModelElement);\n\n        [...gEdgeIds, gModelElementId]\n            .map(id => index.findTaskOrTransition(id))\n            .forEach(modelElement => this.deleteModelElement(modelElement));\n    }\n\n    private getGModelElementToDelete(elementId: string): GNode | GEdge | undefined {\n        const index = this.modelState.index;\n        const element = index.get(elementId);\n        if (element instanceof GNode || element instanceof GEdge) {\n            return element;\n        }\n        return index.findParentElement(elementId, toTypeGuard(GNode)) ?? index.findParentElement(elementId, toTypeGuard(GEdge));\n    }\n\n    protected getIncomingAndOutgoingEdgeIds(node: GNode | GEdge | undefined): string[] {\n        return this.getIncomingAndOutgoingEdges(node).map(edge => edge.id);\n    }\n\n    protected getIncomingAndOutgoingEdges(node: GNode | GEdge | undefined): GEdge[] {\n        if (node instanceof GNode) {\n            return [...this.modelState.index.getIncomingEdges(node), ...this.modelState.index.getOutgoingEdges(node)];\n        }\n        return [];\n    }\n\n    private deleteModelElement(modelElement: Task | Transition | undefined): void {\n        if (Task.is(modelElement)) {\n            remove(this.modelState.sourceModel.tasks, modelElement);\n        } else if (Transition.is(modelElement)) {\n            remove(this.modelState.sourceModel.transitions, modelElement);\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied:\n * -- GNU General Public License, version 2 with the GNU Classpath Exception\n * which is available at https://www.gnu.org/software/classpath/license.html\n * -- MIT License which is available at https://opensource.org/license/mit.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR MIT\n ********************************************************************************/\nimport { ApplyLabelEditOperation } from '@eclipse-glsp/protocol';\nimport { Command, GLSPServerError, GNode, JsonOperationHandler, MaybePromise, toTypeGuard } from '@eclipse-glsp/server/node';\nimport { inject, injectable } from 'inversify';\nimport { TaskListModelState } from '../model/tasklist-model-state';\n\n@injectable()\nexport class TaskListApplyLabelEditHandler extends JsonOperationHandler {\n    readonly operationType = ApplyLabelEditOperation.KIND;\n\n    @inject(TaskListModelState)\n    protected override readonly modelState: TaskListModelState;\n\n    override createCommand(operation: ApplyLabelEditOperation): MaybePromise<Command | undefined> {\n        return this.commandOf(() => {\n            const index = this.modelState.index;\n            // Retrieve the parent node of the label that should be edited\n            const taskNode = index.findParentElement(operation.labelId, toTypeGuard(GNode));\n            if (taskNode) {\n                const task = index.findTask(taskNode.id);\n                if (!task) {\n                    throw new GLSPServerError(`Could not retrieve the parent task for the label with id ${operation.labelId}`);\n                }\n                task.name = operation.text;\n            }\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied:\n * -- GNU General Public License, version 2 with the GNU Classpath Exception\n * which is available at https://www.gnu.org/software/classpath/license.html\n * -- MIT License which is available at https://opensource.org/license/mit.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR MIT\n ********************************************************************************/\n\nimport { ChangeBoundsOperation, Command, Dimension, GNode, JsonOperationHandler, MaybePromise, Point } from '@eclipse-glsp/server';\nimport { inject, injectable } from 'inversify';\nimport { TaskListModelState } from '../model/tasklist-model-state';\n\n@injectable()\nexport class TaskListChangeBoundsHandler extends JsonOperationHandler {\n    readonly operationType = ChangeBoundsOperation.KIND;\n\n    @inject(TaskListModelState)\n    protected override modelState: TaskListModelState;\n\n    override createCommand(operation: ChangeBoundsOperation): MaybePromise<Command | undefined> {\n        return this.commandOf(() => {\n            operation.newBounds.forEach(element => this.changeElementBounds(element.elementId, element.newSize, element.newPosition));\n        });\n    }\n\n    protected changeElementBounds(elementId: string, newSize: Dimension, newPosition?: Point): void {\n        const index = this.modelState.index;\n        const taskNode = index.findByClass(elementId, GNode);\n        const task = taskNode ? index.findTask(taskNode.id) : undefined;\n        if (task) {\n            task.size = newSize;\n            if (newPosition) {\n                task.position = newPosition;\n            }\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied:\n * -- GNU General Public License, version 2 with the GNU Classpath Exception\n * which is available at https://www.gnu.org/software/classpath/license.html\n * -- MIT License which is available at https://opensource.org/license/mit.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR MIT\n ********************************************************************************/\nimport { GModelElement, LabelEditValidator, ValidationStatus } from '@eclipse-glsp/server';\nimport { inject, injectable } from 'inversify';\nimport { TaskListModelState } from '../model/tasklist-model-state';\n\n/**\n * A simple edit label validator that verifies that the given name label is not empty.\n */\n@injectable()\nexport class TaskListLabelEditValidator implements LabelEditValidator {\n    @inject(TaskListModelState)\n    protected modelState: TaskListModelState;\n\n    validate(label: string, element: GModelElement): ValidationStatus {\n        if (label.length < 1) {\n            return { severity: ValidationStatus.Severity.ERROR, message: 'Name must not be empty' };\n        }\n        return { severity: ValidationStatus.Severity.OK };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied:\n * -- GNU General Public License, version 2 with the GNU Classpath Exception\n * which is available at https://www.gnu.org/software/classpath/license.html\n * -- MIT License which is available at https://opensource.org/license/mit.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR MIT\n ********************************************************************************/\nimport { GEdge, GGraph, GLabel, GModelFactory, GNode } from '@eclipse-glsp/server';\nimport { inject, injectable } from 'inversify';\nimport { Task, Transition } from './tasklist-model';\nimport { TaskListModelState } from './tasklist-model-state';\n\n@injectable()\nexport class TaskListGModelFactory implements GModelFactory {\n    @inject(TaskListModelState)\n    protected modelState: TaskListModelState;\n\n    createModel(): void {\n        const taskList = this.modelState.sourceModel;\n        this.modelState.index.indexTaskList(taskList);\n        const childNodes = taskList.tasks.map(task => this.createTaskNode(task));\n        const childEdges = taskList.transitions.map(transition => this.createTransitionEdge(transition));\n        const newRoot = GGraph.builder() //\n            .id(taskList.id)\n            .addChildren(childNodes)\n            .addChildren(childEdges)\n            .build();\n        this.modelState.updateRoot(newRoot);\n    }\n\n    protected createTaskNode(task: Task): GNode {\n        const builder = GNode.builder()\n            .id(task.id)\n            .addCssClass('tasklist-node')\n            .add(GLabel.builder().text(task.name).id(`${task.id}_label`).build())\n            .layout('hbox')\n            .addLayoutOption('paddingLeft', 5)\n            .position(task.position);\n\n        if (task.size) {\n            builder.addLayoutOptions({ prefWidth: task.size.width, prefHeight: task.size.height });\n        }\n\n        return builder.build();\n    }\n\n    protected createTransitionEdge(transition: Transition): GEdge {\n        return GEdge.builder() //\n            .id(transition.id)\n            .addCssClass('tasklist-transition')\n            .sourceId(transition.sourceTaskId)\n            .targetId(transition.targetTaskId)\n            .build();\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied:\n * -- GNU General Public License, version 2 with the GNU Classpath Exception\n * which is available at https://www.gnu.org/software/classpath/license.html\n * -- MIT License which is available at https://opensource.org/license/mit.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR MIT\n ********************************************************************************/\nimport { GModelIndex } from '@eclipse-glsp/server';\nimport { injectable } from 'inversify';\nimport { Task, TaskList, Transition } from './tasklist-model';\n\n@injectable()\nexport class TaskListModelIndex extends GModelIndex {\n    protected idToTaskListElements = new Map<string, Task | Transition>();\n\n    indexTaskList(taskList: TaskList): void {\n        this.idToTaskListElements.clear();\n        for (const element of [...taskList.tasks, ...taskList.transitions]) {\n            this.idToTaskListElements.set(element.id, element);\n        }\n    }\n\n    findTask(id: string): Task | undefined {\n        const element = this.findTaskOrTransition(id);\n        return Task.is(element) ? element : undefined;\n    }\n\n    findTransition(id: string): Transition | undefined {\n        const element = this.findTaskOrTransition(id);\n        return Transition.is(element) ? element : undefined;\n    }\n\n    findTaskOrTransition(id: string): Task | Transition | undefined {\n        return this.idToTaskListElements.get(id);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied:\n * -- GNU General Public License, version 2 with the GNU Classpath Exception\n * which is available at https://www.gnu.org/software/classpath/license.html\n * -- MIT License which is available at https://opensource.org/license/mit.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR MIT\n ********************************************************************************/\nimport { DefaultModelState, JsonModelState } from '@eclipse-glsp/server';\nimport { inject, injectable } from 'inversify';\nimport { TaskList } from './tasklist-model';\nimport { TaskListModelIndex } from './tasklist-model-index';\n\n@injectable()\nexport class TaskListModelState extends DefaultModelState implements JsonModelState<TaskList> {\n    @inject(TaskListModelIndex)\n    override readonly index: TaskListModelIndex;\n\n    protected _taskList: TaskList;\n\n    get sourceModel(): TaskList {\n        return this._taskList;\n    }\n\n    updateSourceModel(taskList: TaskList): void {\n        this._taskList = taskList;\n        this.index.indexTaskList(taskList);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied:\n * -- GNU General Public License, version 2 with the GNU Classpath Exception\n * which is available at https://www.gnu.org/software/classpath/license.html\n * -- MIT License which is available at https://opensource.org/license/mit.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR MIT\n ********************************************************************************/\n\nimport { AnyObject, hasArrayProp, hasObjectProp, hasStringProp } from '@eclipse-glsp/server';\n\n/**\n * The source model for `tasklist` GLSP diagrams. A `TaskList` is a\n * plain JSON objects that contains a set of {@link Task tasks} and {@link Transition transitions}.\n */\nexport interface TaskList {\n    id: string;\n    tasks: Task[];\n    transitions: Transition[];\n}\n\nexport namespace TaskList {\n    export function is(object: any): object is TaskList {\n        return AnyObject.is(object) && hasStringProp(object, 'id') && hasArrayProp(object, 'tasks');\n    }\n}\n\nexport interface Task {\n    id: string;\n    name: string;\n    position: { x: number; y: number };\n    size?: { width: number; height: number };\n}\n\nexport namespace Task {\n    export function is(object: any): object is Task {\n        return AnyObject.is(object) && hasStringProp(object, 'id') && hasStringProp(object, 'name') && hasObjectProp(object, 'position');\n    }\n}\n\nexport interface Transition {\n    id: string;\n    sourceTaskId: string;\n    targetTaskId: string;\n}\n\nexport namespace Transition {\n    export function is(object: any): object is Transition {\n        return (\n            AnyObject.is(object) &&\n            hasStringProp(object, 'id') &&\n            hasStringProp(object, 'sourceTaskId') &&\n            hasStringProp(object, 'targetTaskId')\n        );\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied:\n * -- GNU General Public License, version 2 with the GNU Classpath Exception\n * which is available at https://www.gnu.org/software/classpath/license.html\n * -- MIT License which is available at https://opensource.org/license/mit.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR MIT\n ********************************************************************************/\n\nimport { AbstractJsonModelStorage, MaybePromise, RequestModelAction, SaveModelAction } from '@eclipse-glsp/server/node';\nimport { inject, injectable } from 'inversify';\nimport * as uuid from 'uuid';\nimport { TaskList } from './tasklist-model';\nimport { TaskListModelState } from './tasklist-model-state';\n\n@injectable()\nexport class TaskListStorage extends AbstractJsonModelStorage {\n    @inject(TaskListModelState)\n    protected override modelState: TaskListModelState;\n\n    loadSourceModel(action: RequestModelAction): MaybePromise<void> {\n        const sourceUri = this.getSourceUri(action);\n        const taskList = this.loadFromFile(sourceUri, TaskList.is);\n        this.modelState.updateSourceModel(taskList);\n    }\n\n    saveSourceModel(action: SaveModelAction): MaybePromise<void> {\n        const sourceUri = this.getFileUri(action);\n        this.writeFile(sourceUri, this.modelState.sourceModel);\n    }\n\n    protected override createModelForEmptyFile(path: string): TaskList {\n        return {\n            id: uuid.v4(),\n            tasks: [],\n            transitions: []\n        };\n    }\n}\n","module.exports = require(\"buffer\");","module.exports = require(\"child_process\");","module.exports = require(\"crypto\");","module.exports = require(\"events\");","module.exports = require(\"fs\");","module.exports = require(\"http\");","module.exports = require(\"https\");","module.exports = require(\"net\");","module.exports = require(\"node:crypto\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"stream\");","module.exports = require(\"string_decoder\");","module.exports = require(\"tls\");","module.exports = require(\"tty\");","module.exports = require(\"url\");","module.exports = require(\"util\");","module.exports = require(\"zlib\");","const { Argument } = require('./lib/argument.js');\nconst { Command } = require('./lib/command.js');\nconst { CommanderError, InvalidArgumentError } = require('./lib/error.js');\nconst { Help } = require('./lib/help.js');\nconst { Option } = require('./lib/option.js');\n\n// @ts-check\n\n/**\n * Expose the root command.\n */\n\nexports = module.exports = new Command();\nexports.program = exports; // More explicit access to global command.\n// Implicit export of createArgument, createCommand, and createOption.\n\n/**\n * Expose classes\n */\n\nexports.Argument = Argument;\nexports.Command = Command;\nexports.CommanderError = CommanderError;\nexports.Help = Help;\nexports.InvalidArgumentError = InvalidArgumentError;\nexports.InvalidOptionArgumentError = InvalidArgumentError; // Deprecated\nexports.Option = Option;\n","const { InvalidArgumentError } = require('./error.js');\n\n// @ts-check\n\nclass Argument {\n  /**\n   * Initialize a new command argument with the given name and description.\n   * The default is that the argument is required, and you can explicitly\n   * indicate this with <> around the name. Put [] around the name for an optional argument.\n   *\n   * @param {string} name\n   * @param {string} [description]\n   */\n\n  constructor(name, description) {\n    this.description = description || '';\n    this.variadic = false;\n    this.parseArg = undefined;\n    this.defaultValue = undefined;\n    this.defaultValueDescription = undefined;\n    this.argChoices = undefined;\n\n    switch (name[0]) {\n      case '<': // e.g. <required>\n        this.required = true;\n        this._name = name.slice(1, -1);\n        break;\n      case '[': // e.g. [optional]\n        this.required = false;\n        this._name = name.slice(1, -1);\n        break;\n      default:\n        this.required = true;\n        this._name = name;\n        break;\n    }\n\n    if (this._name.length > 3 && this._name.slice(-3) === '...') {\n      this.variadic = true;\n      this._name = this._name.slice(0, -3);\n    }\n  }\n\n  /**\n   * Return argument name.\n   *\n   * @return {string}\n   */\n\n  name() {\n    return this._name;\n  };\n\n  /**\n   * @api private\n   */\n\n  _concatValue(value, previous) {\n    if (previous === this.defaultValue || !Array.isArray(previous)) {\n      return [value];\n    }\n\n    return previous.concat(value);\n  }\n\n  /**\n   * Set the default value, and optionally supply the description to be displayed in the help.\n   *\n   * @param {any} value\n   * @param {string} [description]\n   * @return {Argument}\n   */\n\n  default(value, description) {\n    this.defaultValue = value;\n    this.defaultValueDescription = description;\n    return this;\n  };\n\n  /**\n   * Set the custom handler for processing CLI command arguments into argument values.\n   *\n   * @param {Function} [fn]\n   * @return {Argument}\n   */\n\n  argParser(fn) {\n    this.parseArg = fn;\n    return this;\n  };\n\n  /**\n   * Only allow option value to be one of choices.\n   *\n   * @param {string[]} values\n   * @return {Argument}\n   */\n\n  choices(values) {\n    this.argChoices = values;\n    this.parseArg = (arg, previous) => {\n      if (!values.includes(arg)) {\n        throw new InvalidArgumentError(`Allowed choices are ${values.join(', ')}.`);\n      }\n      if (this.variadic) {\n        return this._concatValue(arg, previous);\n      }\n      return arg;\n    };\n    return this;\n  };\n\n  /**\n   * Make option-argument required.\n   */\n  argRequired() {\n    this.required = true;\n    return this;\n  }\n\n  /**\n   * Make option-argument optional.\n   */\n  argOptional() {\n    this.required = false;\n    return this;\n  }\n}\n\n/**\n * Takes an argument and returns its human readable equivalent for help usage.\n *\n * @param {Argument} arg\n * @return {string}\n * @api private\n */\n\nfunction humanReadableArgName(arg) {\n  const nameOutput = arg.name() + (arg.variadic === true ? '...' : '');\n\n  return arg.required\n    ? '<' + nameOutput + '>'\n    : '[' + nameOutput + ']';\n}\n\nexports.Argument = Argument;\nexports.humanReadableArgName = humanReadableArgName;\n","const EventEmitter = require('events').EventEmitter;\nconst childProcess = require('child_process');\nconst path = require('path');\nconst fs = require('fs');\n\nconst { Argument, humanReadableArgName } = require('./argument.js');\nconst { CommanderError } = require('./error.js');\nconst { Help } = require('./help.js');\nconst { Option, splitOptionFlags } = require('./option.js');\nconst { suggestSimilar } = require('./suggestSimilar');\n\n// @ts-check\n\nclass Command extends EventEmitter {\n  /**\n   * Initialize a new `Command`.\n   *\n   * @param {string} [name]\n   */\n\n  constructor(name) {\n    super();\n    /** @type {Command[]} */\n    this.commands = [];\n    /** @type {Option[]} */\n    this.options = [];\n    this.parent = null;\n    this._allowUnknownOption = false;\n    this._allowExcessArguments = true;\n    /** @type {Argument[]} */\n    this._args = [];\n    /** @type {string[]} */\n    this.args = []; // cli args with options removed\n    this.rawArgs = [];\n    this.processedArgs = []; // like .args but after custom processing and collecting variadic\n    this._scriptPath = null;\n    this._name = name || '';\n    this._optionValues = {};\n    this._optionValueSources = {}; // default < config < env < cli\n    this._storeOptionsAsProperties = false;\n    this._actionHandler = null;\n    this._executableHandler = false;\n    this._executableFile = null; // custom name for executable\n    this._defaultCommandName = null;\n    this._exitCallback = null;\n    this._aliases = [];\n    this._combineFlagAndOptionalValue = true;\n    this._description = '';\n    this._argsDescription = undefined; // legacy\n    this._enablePositionalOptions = false;\n    this._passThroughOptions = false;\n    this._lifeCycleHooks = {}; // a hash of arrays\n    /** @type {boolean | string} */\n    this._showHelpAfterError = false;\n    this._showSuggestionAfterError = false;\n\n    // see .configureOutput() for docs\n    this._outputConfiguration = {\n      writeOut: (str) => process.stdout.write(str),\n      writeErr: (str) => process.stderr.write(str),\n      getOutHelpWidth: () => process.stdout.isTTY ? process.stdout.columns : undefined,\n      getErrHelpWidth: () => process.stderr.isTTY ? process.stderr.columns : undefined,\n      outputError: (str, write) => write(str)\n    };\n\n    this._hidden = false;\n    this._hasHelpOption = true;\n    this._helpFlags = '-h, --help';\n    this._helpDescription = 'display help for command';\n    this._helpShortFlag = '-h';\n    this._helpLongFlag = '--help';\n    this._addImplicitHelpCommand = undefined; // Deliberately undefined, not decided whether true or false\n    this._helpCommandName = 'help';\n    this._helpCommandnameAndArgs = 'help [command]';\n    this._helpCommandDescription = 'display help for command';\n    this._helpConfiguration = {};\n  }\n\n  /**\n   * Copy settings that are useful to have in common across root command and subcommands.\n   *\n   * (Used internally when adding a command using `.command()` so subcommands inherit parent settings.)\n   *\n   * @param {Command} sourceCommand\n   * @return {Command} returns `this` for executable command\n   */\n  copyInheritedSettings(sourceCommand) {\n    this._outputConfiguration = sourceCommand._outputConfiguration;\n    this._hasHelpOption = sourceCommand._hasHelpOption;\n    this._helpFlags = sourceCommand._helpFlags;\n    this._helpDescription = sourceCommand._helpDescription;\n    this._helpShortFlag = sourceCommand._helpShortFlag;\n    this._helpLongFlag = sourceCommand._helpLongFlag;\n    this._helpCommandName = sourceCommand._helpCommandName;\n    this._helpCommandnameAndArgs = sourceCommand._helpCommandnameAndArgs;\n    this._helpCommandDescription = sourceCommand._helpCommandDescription;\n    this._helpConfiguration = sourceCommand._helpConfiguration;\n    this._exitCallback = sourceCommand._exitCallback;\n    this._storeOptionsAsProperties = sourceCommand._storeOptionsAsProperties;\n    this._combineFlagAndOptionalValue = sourceCommand._combineFlagAndOptionalValue;\n    this._allowExcessArguments = sourceCommand._allowExcessArguments;\n    this._enablePositionalOptions = sourceCommand._enablePositionalOptions;\n    this._showHelpAfterError = sourceCommand._showHelpAfterError;\n    this._showSuggestionAfterError = sourceCommand._showSuggestionAfterError;\n\n    return this;\n  }\n\n  /**\n   * Define a command.\n   *\n   * There are two styles of command: pay attention to where to put the description.\n   *\n   * @example\n   * // Command implemented using action handler (description is supplied separately to `.command`)\n   * program\n   *   .command('clone <source> [destination]')\n   *   .description('clone a repository into a newly created directory')\n   *   .action((source, destination) => {\n   *     console.log('clone command called');\n   *   });\n   *\n   * // Command implemented using separate executable file (description is second parameter to `.command`)\n   * program\n   *   .command('start <service>', 'start named service')\n   *   .command('stop [service]', 'stop named service, or all if no name supplied');\n   *\n   * @param {string} nameAndArgs - command name and arguments, args are `<required>` or `[optional]` and last may also be `variadic...`\n   * @param {Object|string} [actionOptsOrExecDesc] - configuration options (for action), or description (for executable)\n   * @param {Object} [execOpts] - configuration options (for executable)\n   * @return {Command} returns new command for action handler, or `this` for executable command\n   */\n\n  command(nameAndArgs, actionOptsOrExecDesc, execOpts) {\n    let desc = actionOptsOrExecDesc;\n    let opts = execOpts;\n    if (typeof desc === 'object' && desc !== null) {\n      opts = desc;\n      desc = null;\n    }\n    opts = opts || {};\n    const [, name, args] = nameAndArgs.match(/([^ ]+) *(.*)/);\n\n    const cmd = this.createCommand(name);\n    if (desc) {\n      cmd.description(desc);\n      cmd._executableHandler = true;\n    }\n    if (opts.isDefault) this._defaultCommandName = cmd._name;\n    cmd._hidden = !!(opts.noHelp || opts.hidden); // noHelp is deprecated old name for hidden\n    cmd._executableFile = opts.executableFile || null; // Custom name for executable file, set missing to null to match constructor\n    if (args) cmd.arguments(args);\n    this.commands.push(cmd);\n    cmd.parent = this;\n    cmd.copyInheritedSettings(this);\n\n    if (desc) return this;\n    return cmd;\n  };\n\n  /**\n   * Factory routine to create a new unattached command.\n   *\n   * See .command() for creating an attached subcommand, which uses this routine to\n   * create the command. You can override createCommand to customise subcommands.\n   *\n   * @param {string} [name]\n   * @return {Command} new command\n   */\n\n  createCommand(name) {\n    return new Command(name);\n  };\n\n  /**\n   * You can customise the help with a subclass of Help by overriding createHelp,\n   * or by overriding Help properties using configureHelp().\n   *\n   * @return {Help}\n   */\n\n  createHelp() {\n    return Object.assign(new Help(), this.configureHelp());\n  };\n\n  /**\n   * You can customise the help by overriding Help properties using configureHelp(),\n   * or with a subclass of Help by overriding createHelp().\n   *\n   * @param {Object} [configuration] - configuration options\n   * @return {Command|Object} `this` command for chaining, or stored configuration\n   */\n\n  configureHelp(configuration) {\n    if (configuration === undefined) return this._helpConfiguration;\n\n    this._helpConfiguration = configuration;\n    return this;\n  }\n\n  /**\n   * The default output goes to stdout and stderr. You can customise this for special\n   * applications. You can also customise the display of errors by overriding outputError.\n   *\n   * The configuration properties are all functions:\n   *\n   *     // functions to change where being written, stdout and stderr\n   *     writeOut(str)\n   *     writeErr(str)\n   *     // matching functions to specify width for wrapping help\n   *     getOutHelpWidth()\n   *     getErrHelpWidth()\n   *     // functions based on what is being written out\n   *     outputError(str, write) // used for displaying errors, and not used for displaying help\n   *\n   * @param {Object} [configuration] - configuration options\n   * @return {Command|Object} `this` command for chaining, or stored configuration\n   */\n\n  configureOutput(configuration) {\n    if (configuration === undefined) return this._outputConfiguration;\n\n    Object.assign(this._outputConfiguration, configuration);\n    return this;\n  }\n\n  /**\n   * Display the help or a custom message after an error occurs.\n   *\n   * @param {boolean|string} [displayHelp]\n   * @return {Command} `this` command for chaining\n   */\n  showHelpAfterError(displayHelp = true) {\n    if (typeof displayHelp !== 'string') displayHelp = !!displayHelp;\n    this._showHelpAfterError = displayHelp;\n    return this;\n  }\n\n  /**\n   * Display suggestion of similar commands for unknown commands, or options for unknown options.\n   *\n   * @param {boolean} [displaySuggestion]\n   * @return {Command} `this` command for chaining\n   */\n  showSuggestionAfterError(displaySuggestion = true) {\n    this._showSuggestionAfterError = !!displaySuggestion;\n    return this;\n  }\n\n  /**\n   * Add a prepared subcommand.\n   *\n   * See .command() for creating an attached subcommand which inherits settings from its parent.\n   *\n   * @param {Command} cmd - new subcommand\n   * @param {Object} [opts] - configuration options\n   * @return {Command} `this` command for chaining\n   */\n\n  addCommand(cmd, opts) {\n    if (!cmd._name) throw new Error('Command passed to .addCommand() must have a name');\n\n    // To keep things simple, block automatic name generation for deeply nested executables.\n    // Fail fast and detect when adding rather than later when parsing.\n    function checkExplicitNames(commandArray) {\n      commandArray.forEach((cmd) => {\n        if (cmd._executableHandler && !cmd._executableFile) {\n          throw new Error(`Must specify executableFile for deeply nested executable: ${cmd.name()}`);\n        }\n        checkExplicitNames(cmd.commands);\n      });\n    }\n    checkExplicitNames(cmd.commands);\n\n    opts = opts || {};\n    if (opts.isDefault) this._defaultCommandName = cmd._name;\n    if (opts.noHelp || opts.hidden) cmd._hidden = true; // modifying passed command due to existing implementation\n\n    this.commands.push(cmd);\n    cmd.parent = this;\n    return this;\n  };\n\n  /**\n   * Factory routine to create a new unattached argument.\n   *\n   * See .argument() for creating an attached argument, which uses this routine to\n   * create the argument. You can override createArgument to return a custom argument.\n   *\n   * @param {string} name\n   * @param {string} [description]\n   * @return {Argument} new argument\n   */\n\n  createArgument(name, description) {\n    return new Argument(name, description);\n  };\n\n  /**\n   * Define argument syntax for command.\n   *\n   * The default is that the argument is required, and you can explicitly\n   * indicate this with <> around the name. Put [] around the name for an optional argument.\n   *\n   * @example\n   * program.argument('<input-file>');\n   * program.argument('[output-file]');\n   *\n   * @param {string} name\n   * @param {string} [description]\n   * @param {Function|*} [fn] - custom argument processing function\n   * @param {*} [defaultValue]\n   * @return {Command} `this` command for chaining\n   */\n  argument(name, description, fn, defaultValue) {\n    const argument = this.createArgument(name, description);\n    if (typeof fn === 'function') {\n      argument.default(defaultValue).argParser(fn);\n    } else {\n      argument.default(fn);\n    }\n    this.addArgument(argument);\n    return this;\n  }\n\n  /**\n   * Define argument syntax for command, adding multiple at once (without descriptions).\n   *\n   * See also .argument().\n   *\n   * @example\n   * program.arguments('<cmd> [env]');\n   *\n   * @param {string} names\n   * @return {Command} `this` command for chaining\n   */\n\n  arguments(names) {\n    names.split(/ +/).forEach((detail) => {\n      this.argument(detail);\n    });\n    return this;\n  };\n\n  /**\n   * Define argument syntax for command, adding a prepared argument.\n   *\n   * @param {Argument} argument\n   * @return {Command} `this` command for chaining\n   */\n  addArgument(argument) {\n    const previousArgument = this._args.slice(-1)[0];\n    if (previousArgument && previousArgument.variadic) {\n      throw new Error(`only the last argument can be variadic '${previousArgument.name()}'`);\n    }\n    if (argument.required && argument.defaultValue !== undefined && argument.parseArg === undefined) {\n      throw new Error(`a default value for a required argument is never used: '${argument.name()}'`);\n    }\n    this._args.push(argument);\n    return this;\n  }\n\n  /**\n   * Override default decision whether to add implicit help command.\n   *\n   *    addHelpCommand() // force on\n   *    addHelpCommand(false); // force off\n   *    addHelpCommand('help [cmd]', 'display help for [cmd]'); // force on with custom details\n   *\n   * @return {Command} `this` command for chaining\n   */\n\n  addHelpCommand(enableOrNameAndArgs, description) {\n    if (enableOrNameAndArgs === false) {\n      this._addImplicitHelpCommand = false;\n    } else {\n      this._addImplicitHelpCommand = true;\n      if (typeof enableOrNameAndArgs === 'string') {\n        this._helpCommandName = enableOrNameAndArgs.split(' ')[0];\n        this._helpCommandnameAndArgs = enableOrNameAndArgs;\n      }\n      this._helpCommandDescription = description || this._helpCommandDescription;\n    }\n    return this;\n  };\n\n  /**\n   * @return {boolean}\n   * @api private\n   */\n\n  _hasImplicitHelpCommand() {\n    if (this._addImplicitHelpCommand === undefined) {\n      return this.commands.length && !this._actionHandler && !this._findCommand('help');\n    }\n    return this._addImplicitHelpCommand;\n  };\n\n  /**\n   * Add hook for life cycle event.\n   *\n   * @param {string} event\n   * @param {Function} listener\n   * @return {Command} `this` command for chaining\n   */\n\n  hook(event, listener) {\n    const allowedValues = ['preAction', 'postAction'];\n    if (!allowedValues.includes(event)) {\n      throw new Error(`Unexpected value for event passed to hook : '${event}'.\nExpecting one of '${allowedValues.join(\"', '\")}'`);\n    }\n    if (this._lifeCycleHooks[event]) {\n      this._lifeCycleHooks[event].push(listener);\n    } else {\n      this._lifeCycleHooks[event] = [listener];\n    }\n    return this;\n  }\n\n  /**\n   * Register callback to use as replacement for calling process.exit.\n   *\n   * @param {Function} [fn] optional callback which will be passed a CommanderError, defaults to throwing\n   * @return {Command} `this` command for chaining\n   */\n\n  exitOverride(fn) {\n    if (fn) {\n      this._exitCallback = fn;\n    } else {\n      this._exitCallback = (err) => {\n        if (err.code !== 'commander.executeSubCommandAsync') {\n          throw err;\n        } else {\n          // Async callback from spawn events, not useful to throw.\n        }\n      };\n    }\n    return this;\n  };\n\n  /**\n   * Call process.exit, and _exitCallback if defined.\n   *\n   * @param {number} exitCode exit code for using with process.exit\n   * @param {string} code an id string representing the error\n   * @param {string} message human-readable description of the error\n   * @return never\n   * @api private\n   */\n\n  _exit(exitCode, code, message) {\n    if (this._exitCallback) {\n      this._exitCallback(new CommanderError(exitCode, code, message));\n      // Expecting this line is not reached.\n    }\n    process.exit(exitCode);\n  };\n\n  /**\n   * Register callback `fn` for the command.\n   *\n   * @example\n   * program\n   *   .command('serve')\n   *   .description('start service')\n   *   .action(function() {\n   *      // do work here\n   *   });\n   *\n   * @param {Function} fn\n   * @return {Command} `this` command for chaining\n   */\n\n  action(fn) {\n    const listener = (args) => {\n      // The .action callback takes an extra parameter which is the command or options.\n      const expectedArgsCount = this._args.length;\n      const actionArgs = args.slice(0, expectedArgsCount);\n      if (this._storeOptionsAsProperties) {\n        actionArgs[expectedArgsCount] = this; // backwards compatible \"options\"\n      } else {\n        actionArgs[expectedArgsCount] = this.opts();\n      }\n      actionArgs.push(this);\n\n      return fn.apply(this, actionArgs);\n    };\n    this._actionHandler = listener;\n    return this;\n  };\n\n  /**\n   * Factory routine to create a new unattached option.\n   *\n   * See .option() for creating an attached option, which uses this routine to\n   * create the option. You can override createOption to return a custom option.\n   *\n   * @param {string} flags\n   * @param {string} [description]\n   * @return {Option} new option\n   */\n\n  createOption(flags, description) {\n    return new Option(flags, description);\n  };\n\n  /**\n   * Add an option.\n   *\n   * @param {Option} option\n   * @return {Command} `this` command for chaining\n   */\n  addOption(option) {\n    const oname = option.name();\n    const name = option.attributeName();\n\n    let defaultValue = option.defaultValue;\n\n    // preassign default value for --no-*, [optional], <required>, or plain flag if boolean value\n    if (option.negate || option.optional || option.required || typeof defaultValue === 'boolean') {\n      // when --no-foo we make sure default is true, unless a --foo option is already defined\n      if (option.negate) {\n        const positiveLongFlag = option.long.replace(/^--no-/, '--');\n        defaultValue = this._findOption(positiveLongFlag) ? this.getOptionValue(name) : true;\n      }\n      // preassign only if we have a default\n      if (defaultValue !== undefined) {\n        this.setOptionValueWithSource(name, defaultValue, 'default');\n      }\n    }\n\n    // register the option\n    this.options.push(option);\n\n    // handler for cli and env supplied values\n    const handleOptionValue = (val, invalidValueMessage, valueSource) => {\n      // Note: using closure to access lots of lexical scoped variables.\n      const oldValue = this.getOptionValue(name);\n\n      // custom processing\n      if (val !== null && option.parseArg) {\n        try {\n          val = option.parseArg(val, oldValue === undefined ? defaultValue : oldValue);\n        } catch (err) {\n          if (err.code === 'commander.invalidArgument') {\n            const message = `${invalidValueMessage} ${err.message}`;\n            this._displayError(err.exitCode, err.code, message);\n          }\n          throw err;\n        }\n      } else if (val !== null && option.variadic) {\n        val = option._concatValue(val, oldValue);\n      }\n\n      // unassigned or boolean value\n      if (typeof oldValue === 'boolean' || typeof oldValue === 'undefined') {\n        // if no value, negate false, and we have a default, then use it!\n        if (val == null) {\n          this.setOptionValueWithSource(name, option.negate ? false : defaultValue || true, valueSource);\n        } else {\n          this.setOptionValueWithSource(name, val, valueSource);\n        }\n      } else if (val !== null) {\n        // reassign\n        this.setOptionValueWithSource(name, option.negate ? false : val, valueSource);\n      }\n    };\n\n    this.on('option:' + oname, (val) => {\n      const invalidValueMessage = `error: option '${option.flags}' argument '${val}' is invalid.`;\n      handleOptionValue(val, invalidValueMessage, 'cli');\n    });\n\n    if (option.envVar) {\n      this.on('optionEnv:' + oname, (val) => {\n        const invalidValueMessage = `error: option '${option.flags}' value '${val}' from env '${option.envVar}' is invalid.`;\n        handleOptionValue(val, invalidValueMessage, 'env');\n      });\n    }\n\n    return this;\n  }\n\n  /**\n   * Internal implementation shared by .option() and .requiredOption()\n   *\n   * @api private\n   */\n  _optionEx(config, flags, description, fn, defaultValue) {\n    const option = this.createOption(flags, description);\n    option.makeOptionMandatory(!!config.mandatory);\n    if (typeof fn === 'function') {\n      option.default(defaultValue).argParser(fn);\n    } else if (fn instanceof RegExp) {\n      // deprecated\n      const regex = fn;\n      fn = (val, def) => {\n        const m = regex.exec(val);\n        return m ? m[0] : def;\n      };\n      option.default(defaultValue).argParser(fn);\n    } else {\n      option.default(fn);\n    }\n\n    return this.addOption(option);\n  }\n\n  /**\n   * Define option with `flags`, `description` and optional\n   * coercion `fn`.\n   *\n   * The `flags` string contains the short and/or long flags,\n   * separated by comma, a pipe or space. The following are all valid\n   * all will output this way when `--help` is used.\n   *\n   *     \"-p, --pepper\"\n   *     \"-p|--pepper\"\n   *     \"-p --pepper\"\n   *\n   * @example\n   * // simple boolean defaulting to undefined\n   * program.option('-p, --pepper', 'add pepper');\n   *\n   * program.pepper\n   * // => undefined\n   *\n   * --pepper\n   * program.pepper\n   * // => true\n   *\n   * // simple boolean defaulting to true (unless non-negated option is also defined)\n   * program.option('-C, --no-cheese', 'remove cheese');\n   *\n   * program.cheese\n   * // => true\n   *\n   * --no-cheese\n   * program.cheese\n   * // => false\n   *\n   * // required argument\n   * program.option('-C, --chdir <path>', 'change the working directory');\n   *\n   * --chdir /tmp\n   * program.chdir\n   * // => \"/tmp\"\n   *\n   * // optional argument\n   * program.option('-c, --cheese [type]', 'add cheese [marble]');\n   *\n   * @param {string} flags\n   * @param {string} [description]\n   * @param {Function|*} [fn] - custom option processing function or default value\n   * @param {*} [defaultValue]\n   * @return {Command} `this` command for chaining\n   */\n\n  option(flags, description, fn, defaultValue) {\n    return this._optionEx({}, flags, description, fn, defaultValue);\n  };\n\n  /**\n  * Add a required option which must have a value after parsing. This usually means\n  * the option must be specified on the command line. (Otherwise the same as .option().)\n  *\n  * The `flags` string contains the short and/or long flags, separated by comma, a pipe or space.\n  *\n  * @param {string} flags\n  * @param {string} [description]\n  * @param {Function|*} [fn] - custom option processing function or default value\n  * @param {*} [defaultValue]\n  * @return {Command} `this` command for chaining\n  */\n\n  requiredOption(flags, description, fn, defaultValue) {\n    return this._optionEx({ mandatory: true }, flags, description, fn, defaultValue);\n  };\n\n  /**\n   * Alter parsing of short flags with optional values.\n   *\n   * @example\n   * // for `.option('-f,--flag [value]'):\n   * program.combineFlagAndOptionalValue(true);  // `-f80` is treated like `--flag=80`, this is the default behaviour\n   * program.combineFlagAndOptionalValue(false) // `-fb` is treated like `-f -b`\n   *\n   * @param {Boolean} [combine=true] - if `true` or omitted, an optional value can be specified directly after the flag.\n   */\n  combineFlagAndOptionalValue(combine = true) {\n    this._combineFlagAndOptionalValue = !!combine;\n    return this;\n  };\n\n  /**\n   * Allow unknown options on the command line.\n   *\n   * @param {Boolean} [allowUnknown=true] - if `true` or omitted, no error will be thrown\n   * for unknown options.\n   */\n  allowUnknownOption(allowUnknown = true) {\n    this._allowUnknownOption = !!allowUnknown;\n    return this;\n  };\n\n  /**\n   * Allow excess command-arguments on the command line. Pass false to make excess arguments an error.\n   *\n   * @param {Boolean} [allowExcess=true] - if `true` or omitted, no error will be thrown\n   * for excess arguments.\n   */\n  allowExcessArguments(allowExcess = true) {\n    this._allowExcessArguments = !!allowExcess;\n    return this;\n  };\n\n  /**\n   * Enable positional options. Positional means global options are specified before subcommands which lets\n   * subcommands reuse the same option names, and also enables subcommands to turn on passThroughOptions.\n   * The default behaviour is non-positional and global options may appear anywhere on the command line.\n   *\n   * @param {Boolean} [positional=true]\n   */\n  enablePositionalOptions(positional = true) {\n    this._enablePositionalOptions = !!positional;\n    return this;\n  };\n\n  /**\n   * Pass through options that come after command-arguments rather than treat them as command-options,\n   * so actual command-options come before command-arguments. Turning this on for a subcommand requires\n   * positional options to have been enabled on the program (parent commands).\n   * The default behaviour is non-positional and options may appear before or after command-arguments.\n   *\n   * @param {Boolean} [passThrough=true]\n   * for unknown options.\n   */\n  passThroughOptions(passThrough = true) {\n    this._passThroughOptions = !!passThrough;\n    if (!!this.parent && passThrough && !this.parent._enablePositionalOptions) {\n      throw new Error('passThroughOptions can not be used without turning on enablePositionalOptions for parent command(s)');\n    }\n    return this;\n  };\n\n  /**\n    * Whether to store option values as properties on command object,\n    * or store separately (specify false). In both cases the option values can be accessed using .opts().\n    *\n    * @param {boolean} [storeAsProperties=true]\n    * @return {Command} `this` command for chaining\n    */\n\n  storeOptionsAsProperties(storeAsProperties = true) {\n    this._storeOptionsAsProperties = !!storeAsProperties;\n    if (this.options.length) {\n      throw new Error('call .storeOptionsAsProperties() before adding options');\n    }\n    return this;\n  };\n\n  /**\n   * Retrieve option value.\n   *\n   * @param {string} key\n   * @return {Object} value\n   */\n\n  getOptionValue(key) {\n    if (this._storeOptionsAsProperties) {\n      return this[key];\n    }\n    return this._optionValues[key];\n  };\n\n  /**\n   * Store option value.\n   *\n   * @param {string} key\n   * @param {Object} value\n   * @return {Command} `this` command for chaining\n   */\n\n  setOptionValue(key, value) {\n    if (this._storeOptionsAsProperties) {\n      this[key] = value;\n    } else {\n      this._optionValues[key] = value;\n    }\n    return this;\n  };\n\n  /**\n   * Store option value and where the value came from.\n    *\n    * @param {string} key\n    * @param {Object} value\n    * @param {string} source - expected values are default/config/env/cli\n    * @return {Command} `this` command for chaining\n    */\n\n  setOptionValueWithSource(key, value, source) {\n    this.setOptionValue(key, value);\n    this._optionValueSources[key] = source;\n    return this;\n  }\n\n  /**\n    * Get source of option value.\n    * Expected values are default | config | env | cli\n    *\n    * @param {string} key\n    * @return {string}\n    */\n\n  getOptionValueSource(key) {\n    return this._optionValueSources[key];\n  };\n\n  /**\n   * Get user arguments implied or explicit arguments.\n   * Side-effects: set _scriptPath if args included application, and use that to set implicit command name.\n   *\n   * @api private\n   */\n\n  _prepareUserArgs(argv, parseOptions) {\n    if (argv !== undefined && !Array.isArray(argv)) {\n      throw new Error('first parameter to parse must be array or undefined');\n    }\n    parseOptions = parseOptions || {};\n\n    // Default to using process.argv\n    if (argv === undefined) {\n      argv = process.argv;\n      // @ts-ignore: unknown property\n      if (process.versions && process.versions.electron) {\n        parseOptions.from = 'electron';\n      }\n    }\n    this.rawArgs = argv.slice();\n\n    // make it a little easier for callers by supporting various argv conventions\n    let userArgs;\n    switch (parseOptions.from) {\n      case undefined:\n      case 'node':\n        this._scriptPath = argv[1];\n        userArgs = argv.slice(2);\n        break;\n      case 'electron':\n        // @ts-ignore: unknown property\n        if (process.defaultApp) {\n          this._scriptPath = argv[1];\n          userArgs = argv.slice(2);\n        } else {\n          userArgs = argv.slice(1);\n        }\n        break;\n      case 'user':\n        userArgs = argv.slice(0);\n        break;\n      default:\n        throw new Error(`unexpected parse option { from: '${parseOptions.from}' }`);\n    }\n    if (!this._scriptPath && require.main) {\n      this._scriptPath = require.main.filename;\n    }\n\n    // Guess name, used in usage in help.\n    this._name = this._name || (this._scriptPath && path.basename(this._scriptPath, path.extname(this._scriptPath)));\n\n    return userArgs;\n  }\n\n  /**\n   * Parse `argv`, setting options and invoking commands when defined.\n   *\n   * The default expectation is that the arguments are from node and have the application as argv[0]\n   * and the script being run in argv[1], with user parameters after that.\n   *\n   * @example\n   * program.parse(process.argv);\n   * program.parse(); // implicitly use process.argv and auto-detect node vs electron conventions\n   * program.parse(my-args, { from: 'user' }); // just user supplied arguments, nothing special about argv[0]\n   *\n   * @param {string[]} [argv] - optional, defaults to process.argv\n   * @param {Object} [parseOptions] - optionally specify style of options with from: node/user/electron\n   * @param {string} [parseOptions.from] - where the args are from: 'node', 'user', 'electron'\n   * @return {Command} `this` command for chaining\n   */\n\n  parse(argv, parseOptions) {\n    const userArgs = this._prepareUserArgs(argv, parseOptions);\n    this._parseCommand([], userArgs);\n\n    return this;\n  };\n\n  /**\n   * Parse `argv`, setting options and invoking commands when defined.\n   *\n   * Use parseAsync instead of parse if any of your action handlers are async. Returns a Promise.\n   *\n   * The default expectation is that the arguments are from node and have the application as argv[0]\n   * and the script being run in argv[1], with user parameters after that.\n   *\n   * @example\n   * await program.parseAsync(process.argv);\n   * await program.parseAsync(); // implicitly use process.argv and auto-detect node vs electron conventions\n   * await program.parseAsync(my-args, { from: 'user' }); // just user supplied arguments, nothing special about argv[0]\n   *\n   * @param {string[]} [argv]\n   * @param {Object} [parseOptions]\n   * @param {string} parseOptions.from - where the args are from: 'node', 'user', 'electron'\n   * @return {Promise}\n   */\n\n  async parseAsync(argv, parseOptions) {\n    const userArgs = this._prepareUserArgs(argv, parseOptions);\n    await this._parseCommand([], userArgs);\n\n    return this;\n  };\n\n  /**\n   * Execute a sub-command executable.\n   *\n   * @api private\n   */\n\n  _executeSubCommand(subcommand, args) {\n    args = args.slice();\n    let launchWithNode = false; // Use node for source targets so do not need to get permissions correct, and on Windows.\n    const sourceExt = ['.js', '.ts', '.tsx', '.mjs', '.cjs'];\n\n    // Not checking for help first. Unlikely to have mandatory and executable, and can't robustly test for help flags in external command.\n    this._checkForMissingMandatoryOptions();\n\n    // Want the entry script as the reference for command name and directory for searching for other files.\n    let scriptPath = this._scriptPath;\n    // Fallback in case not set, due to how Command created or called.\n    if (!scriptPath && require.main) {\n      scriptPath = require.main.filename;\n    }\n\n    let baseDir;\n    try {\n      const resolvedLink = fs.realpathSync(scriptPath);\n      baseDir = path.dirname(resolvedLink);\n    } catch (e) {\n      baseDir = '.'; // dummy, probably not going to find executable!\n    }\n\n    // name of the subcommand, like `pm-install`\n    let bin = path.basename(scriptPath, path.extname(scriptPath)) + '-' + subcommand._name;\n    if (subcommand._executableFile) {\n      bin = subcommand._executableFile;\n    }\n\n    const localBin = path.join(baseDir, bin);\n    if (fs.existsSync(localBin)) {\n      // prefer local `./<bin>` to bin in the $PATH\n      bin = localBin;\n    } else {\n      // Look for source files.\n      sourceExt.forEach((ext) => {\n        if (fs.existsSync(`${localBin}${ext}`)) {\n          bin = `${localBin}${ext}`;\n        }\n      });\n    }\n    launchWithNode = sourceExt.includes(path.extname(bin));\n\n    let proc;\n    if (process.platform !== 'win32') {\n      if (launchWithNode) {\n        args.unshift(bin);\n        // add executable arguments to spawn\n        args = incrementNodeInspectorPort(process.execArgv).concat(args);\n\n        proc = childProcess.spawn(process.argv[0], args, { stdio: 'inherit' });\n      } else {\n        proc = childProcess.spawn(bin, args, { stdio: 'inherit' });\n      }\n    } else {\n      args.unshift(bin);\n      // add executable arguments to spawn\n      args = incrementNodeInspectorPort(process.execArgv).concat(args);\n      proc = childProcess.spawn(process.execPath, args, { stdio: 'inherit' });\n    }\n\n    const signals = ['SIGUSR1', 'SIGUSR2', 'SIGTERM', 'SIGINT', 'SIGHUP'];\n    signals.forEach((signal) => {\n      // @ts-ignore\n      process.on(signal, () => {\n        if (proc.killed === false && proc.exitCode === null) {\n          proc.kill(signal);\n        }\n      });\n    });\n\n    // By default terminate process when spawned process terminates.\n    // Suppressing the exit if exitCallback defined is a bit messy and of limited use, but does allow process to stay running!\n    const exitCallback = this._exitCallback;\n    if (!exitCallback) {\n      proc.on('close', process.exit.bind(process));\n    } else {\n      proc.on('close', () => {\n        exitCallback(new CommanderError(process.exitCode || 0, 'commander.executeSubCommandAsync', '(close)'));\n      });\n    }\n    proc.on('error', (err) => {\n      // @ts-ignore\n      if (err.code === 'ENOENT') {\n        const executableMissing = `'${bin}' does not exist\n - if '${subcommand._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead\n - if the default executable name is not suitable, use the executableFile option to supply a custom name`;\n        throw new Error(executableMissing);\n      // @ts-ignore\n      } else if (err.code === 'EACCES') {\n        throw new Error(`'${bin}' not executable`);\n      }\n      if (!exitCallback) {\n        process.exit(1);\n      } else {\n        const wrappedError = new CommanderError(1, 'commander.executeSubCommandAsync', '(error)');\n        wrappedError.nestedError = err;\n        exitCallback(wrappedError);\n      }\n    });\n\n    // Store the reference to the child process\n    this.runningCommand = proc;\n  };\n\n  /**\n   * @api private\n   */\n\n  _dispatchSubcommand(commandName, operands, unknown) {\n    const subCommand = this._findCommand(commandName);\n    if (!subCommand) this.help({ error: true });\n\n    if (subCommand._executableHandler) {\n      this._executeSubCommand(subCommand, operands.concat(unknown));\n    } else {\n      return subCommand._parseCommand(operands, unknown);\n    }\n  };\n\n  /**\n   * Check this.args against expected this._args.\n   *\n   * @api private\n   */\n\n  _checkNumberOfArguments() {\n    // too few\n    this._args.forEach((arg, i) => {\n      if (arg.required && this.args[i] == null) {\n        this.missingArgument(arg.name());\n      }\n    });\n    // too many\n    if (this._args.length > 0 && this._args[this._args.length - 1].variadic) {\n      return;\n    }\n    if (this.args.length > this._args.length) {\n      this._excessArguments(this.args);\n    }\n  };\n\n  /**\n   * Process this.args using this._args and save as this.processedArgs!\n   *\n   * @api private\n   */\n\n  _processArguments() {\n    const myParseArg = (argument, value, previous) => {\n      // Extra processing for nice error message on parsing failure.\n      let parsedValue = value;\n      if (value !== null && argument.parseArg) {\n        try {\n          parsedValue = argument.parseArg(value, previous);\n        } catch (err) {\n          if (err.code === 'commander.invalidArgument') {\n            const message = `error: command-argument value '${value}' is invalid for argument '${argument.name()}'. ${err.message}`;\n            this._displayError(err.exitCode, err.code, message);\n          }\n          throw err;\n        }\n      }\n      return parsedValue;\n    };\n\n    this._checkNumberOfArguments();\n\n    const processedArgs = [];\n    this._args.forEach((declaredArg, index) => {\n      let value = declaredArg.defaultValue;\n      if (declaredArg.variadic) {\n        // Collect together remaining arguments for passing together as an array.\n        if (index < this.args.length) {\n          value = this.args.slice(index);\n          if (declaredArg.parseArg) {\n            value = value.reduce((processed, v) => {\n              return myParseArg(declaredArg, v, processed);\n            }, declaredArg.defaultValue);\n          }\n        } else if (value === undefined) {\n          value = [];\n        }\n      } else if (index < this.args.length) {\n        value = this.args[index];\n        if (declaredArg.parseArg) {\n          value = myParseArg(declaredArg, value, declaredArg.defaultValue);\n        }\n      }\n      processedArgs[index] = value;\n    });\n    this.processedArgs = processedArgs;\n  }\n\n  /**\n   * Once we have a promise we chain, but call synchronously until then.\n   *\n   * @param {Promise|undefined} promise\n   * @param {Function} fn\n   * @return {Promise|undefined}\n   * @api private\n   */\n\n  _chainOrCall(promise, fn) {\n    // thenable\n    if (promise && promise.then && typeof promise.then === 'function') {\n      // already have a promise, chain callback\n      return promise.then(() => fn());\n    }\n    // callback might return a promise\n    return fn();\n  }\n\n  /**\n   *\n   * @param {Promise|undefined} promise\n   * @param {string} event\n   * @return {Promise|undefined}\n   * @api private\n   */\n\n  _chainOrCallHooks(promise, event) {\n    let result = promise;\n    const hooks = [];\n    getCommandAndParents(this)\n      .reverse()\n      .filter(cmd => cmd._lifeCycleHooks[event] !== undefined)\n      .forEach(hookedCommand => {\n        hookedCommand._lifeCycleHooks[event].forEach((callback) => {\n          hooks.push({ hookedCommand, callback });\n        });\n      });\n    if (event === 'postAction') {\n      hooks.reverse();\n    }\n\n    hooks.forEach((hookDetail) => {\n      result = this._chainOrCall(result, () => {\n        return hookDetail.callback(hookDetail.hookedCommand, this);\n      });\n    });\n    return result;\n  }\n\n  /**\n   * Process arguments in context of this command.\n   * Returns action result, in case it is a promise.\n   *\n   * @api private\n   */\n\n  _parseCommand(operands, unknown) {\n    const parsed = this.parseOptions(unknown);\n    this._parseOptionsEnv(); // after cli, so parseArg not called on both cli and env\n    operands = operands.concat(parsed.operands);\n    unknown = parsed.unknown;\n    this.args = operands.concat(unknown);\n\n    if (operands && this._findCommand(operands[0])) {\n      return this._dispatchSubcommand(operands[0], operands.slice(1), unknown);\n    }\n    if (this._hasImplicitHelpCommand() && operands[0] === this._helpCommandName) {\n      if (operands.length === 1) {\n        this.help();\n      }\n      return this._dispatchSubcommand(operands[1], [], [this._helpLongFlag]);\n    }\n    if (this._defaultCommandName) {\n      outputHelpIfRequested(this, unknown); // Run the help for default command from parent rather than passing to default command\n      return this._dispatchSubcommand(this._defaultCommandName, operands, unknown);\n    }\n    if (this.commands.length && this.args.length === 0 && !this._actionHandler && !this._defaultCommandName) {\n      // probably missing subcommand and no handler, user needs help (and exit)\n      this.help({ error: true });\n    }\n\n    outputHelpIfRequested(this, parsed.unknown);\n    this._checkForMissingMandatoryOptions();\n\n    // We do not always call this check to avoid masking a \"better\" error, like unknown command.\n    const checkForUnknownOptions = () => {\n      if (parsed.unknown.length > 0) {\n        this.unknownOption(parsed.unknown[0]);\n      }\n    };\n\n    const commandEvent = `command:${this.name()}`;\n    if (this._actionHandler) {\n      checkForUnknownOptions();\n      this._processArguments();\n\n      let actionResult;\n      actionResult = this._chainOrCallHooks(actionResult, 'preAction');\n      actionResult = this._chainOrCall(actionResult, () => this._actionHandler(this.processedArgs));\n      if (this.parent) this.parent.emit(commandEvent, operands, unknown); // legacy\n      actionResult = this._chainOrCallHooks(actionResult, 'postAction');\n      return actionResult;\n    }\n    if (this.parent && this.parent.listenerCount(commandEvent)) {\n      checkForUnknownOptions();\n      this._processArguments();\n      this.parent.emit(commandEvent, operands, unknown); // legacy\n    } else if (operands.length) {\n      if (this._findCommand('*')) { // legacy default command\n        return this._dispatchSubcommand('*', operands, unknown);\n      }\n      if (this.listenerCount('command:*')) {\n        // skip option check, emit event for possible misspelling suggestion\n        this.emit('command:*', operands, unknown);\n      } else if (this.commands.length) {\n        this.unknownCommand();\n      } else {\n        checkForUnknownOptions();\n        this._processArguments();\n      }\n    } else if (this.commands.length) {\n      checkForUnknownOptions();\n      // This command has subcommands and nothing hooked up at this level, so display help (and exit).\n      this.help({ error: true });\n    } else {\n      checkForUnknownOptions();\n      this._processArguments();\n      // fall through for caller to handle after calling .parse()\n    }\n  };\n\n  /**\n   * Find matching command.\n   *\n   * @api private\n   */\n  _findCommand(name) {\n    if (!name) return undefined;\n    return this.commands.find(cmd => cmd._name === name || cmd._aliases.includes(name));\n  };\n\n  /**\n   * Return an option matching `arg` if any.\n   *\n   * @param {string} arg\n   * @return {Option}\n   * @api private\n   */\n\n  _findOption(arg) {\n    return this.options.find(option => option.is(arg));\n  };\n\n  /**\n   * Display an error message if a mandatory option does not have a value.\n   * Lazy calling after checking for help flags from leaf subcommand.\n   *\n   * @api private\n   */\n\n  _checkForMissingMandatoryOptions() {\n    // Walk up hierarchy so can call in subcommand after checking for displaying help.\n    for (let cmd = this; cmd; cmd = cmd.parent) {\n      cmd.options.forEach((anOption) => {\n        if (anOption.mandatory && (cmd.getOptionValue(anOption.attributeName()) === undefined)) {\n          cmd.missingMandatoryOptionValue(anOption);\n        }\n      });\n    }\n  };\n\n  /**\n   * Parse options from `argv` removing known options,\n   * and return argv split into operands and unknown arguments.\n   *\n   * Examples:\n   *\n   *     argv => operands, unknown\n   *     --known kkk op => [op], []\n   *     op --known kkk => [op], []\n   *     sub --unknown uuu op => [sub], [--unknown uuu op]\n   *     sub -- --unknown uuu op => [sub --unknown uuu op], []\n   *\n   * @param {String[]} argv\n   * @return {{operands: String[], unknown: String[]}}\n   */\n\n  parseOptions(argv) {\n    const operands = []; // operands, not options or values\n    const unknown = []; // first unknown option and remaining unknown args\n    let dest = operands;\n    const args = argv.slice();\n\n    function maybeOption(arg) {\n      return arg.length > 1 && arg[0] === '-';\n    }\n\n    // parse options\n    let activeVariadicOption = null;\n    while (args.length) {\n      const arg = args.shift();\n\n      // literal\n      if (arg === '--') {\n        if (dest === unknown) dest.push(arg);\n        dest.push(...args);\n        break;\n      }\n\n      if (activeVariadicOption && !maybeOption(arg)) {\n        this.emit(`option:${activeVariadicOption.name()}`, arg);\n        continue;\n      }\n      activeVariadicOption = null;\n\n      if (maybeOption(arg)) {\n        const option = this._findOption(arg);\n        // recognised option, call listener to assign value with possible custom processing\n        if (option) {\n          if (option.required) {\n            const value = args.shift();\n            if (value === undefined) this.optionMissingArgument(option);\n            this.emit(`option:${option.name()}`, value);\n          } else if (option.optional) {\n            let value = null;\n            // historical behaviour is optional value is following arg unless an option\n            if (args.length > 0 && !maybeOption(args[0])) {\n              value = args.shift();\n            }\n            this.emit(`option:${option.name()}`, value);\n          } else { // boolean flag\n            this.emit(`option:${option.name()}`);\n          }\n          activeVariadicOption = option.variadic ? option : null;\n          continue;\n        }\n      }\n\n      // Look for combo options following single dash, eat first one if known.\n      if (arg.length > 2 && arg[0] === '-' && arg[1] !== '-') {\n        const option = this._findOption(`-${arg[1]}`);\n        if (option) {\n          if (option.required || (option.optional && this._combineFlagAndOptionalValue)) {\n            // option with value following in same argument\n            this.emit(`option:${option.name()}`, arg.slice(2));\n          } else {\n            // boolean option, emit and put back remainder of arg for further processing\n            this.emit(`option:${option.name()}`);\n            args.unshift(`-${arg.slice(2)}`);\n          }\n          continue;\n        }\n      }\n\n      // Look for known long flag with value, like --foo=bar\n      if (/^--[^=]+=/.test(arg)) {\n        const index = arg.indexOf('=');\n        const option = this._findOption(arg.slice(0, index));\n        if (option && (option.required || option.optional)) {\n          this.emit(`option:${option.name()}`, arg.slice(index + 1));\n          continue;\n        }\n      }\n\n      // Not a recognised option by this command.\n      // Might be a command-argument, or subcommand option, or unknown option, or help command or option.\n\n      // An unknown option means further arguments also classified as unknown so can be reprocessed by subcommands.\n      if (maybeOption(arg)) {\n        dest = unknown;\n      }\n\n      // If using positionalOptions, stop processing our options at subcommand.\n      if ((this._enablePositionalOptions || this._passThroughOptions) && operands.length === 0 && unknown.length === 0) {\n        if (this._findCommand(arg)) {\n          operands.push(arg);\n          if (args.length > 0) unknown.push(...args);\n          break;\n        } else if (arg === this._helpCommandName && this._hasImplicitHelpCommand()) {\n          operands.push(arg);\n          if (args.length > 0) operands.push(...args);\n          break;\n        } else if (this._defaultCommandName) {\n          unknown.push(arg);\n          if (args.length > 0) unknown.push(...args);\n          break;\n        }\n      }\n\n      // If using passThroughOptions, stop processing options at first command-argument.\n      if (this._passThroughOptions) {\n        dest.push(arg);\n        if (args.length > 0) dest.push(...args);\n        break;\n      }\n\n      // add arg\n      dest.push(arg);\n    }\n\n    return { operands, unknown };\n  };\n\n  /**\n   * Return an object containing options as key-value pairs\n   *\n   * @return {Object}\n   */\n  opts() {\n    if (this._storeOptionsAsProperties) {\n      // Preserve original behaviour so backwards compatible when still using properties\n      const result = {};\n      const len = this.options.length;\n\n      for (let i = 0; i < len; i++) {\n        const key = this.options[i].attributeName();\n        result[key] = key === this._versionOptionName ? this._version : this[key];\n      }\n      return result;\n    }\n\n    return this._optionValues;\n  };\n\n  /**\n   * Internal bottleneck for handling of parsing errors.\n   *\n   * @api private\n   */\n  _displayError(exitCode, code, message) {\n    this._outputConfiguration.outputError(`${message}\\n`, this._outputConfiguration.writeErr);\n    if (typeof this._showHelpAfterError === 'string') {\n      this._outputConfiguration.writeErr(`${this._showHelpAfterError}\\n`);\n    } else if (this._showHelpAfterError) {\n      this._outputConfiguration.writeErr('\\n');\n      this.outputHelp({ error: true });\n    }\n    this._exit(exitCode, code, message);\n  }\n\n  /**\n   * Apply any option related environment variables, if option does\n   * not have a value from cli or client code.\n   *\n   * @api private\n   */\n  _parseOptionsEnv() {\n    this.options.forEach((option) => {\n      if (option.envVar && option.envVar in process.env) {\n        const optionKey = option.attributeName();\n        // Priority check. Do not overwrite cli or options from unknown source (client-code).\n        if (this.getOptionValue(optionKey) === undefined || ['default', 'config', 'env'].includes(this.getOptionValueSource(optionKey))) {\n          if (option.required || option.optional) { // option can take a value\n            // keep very simple, optional always takes value\n            this.emit(`optionEnv:${option.name()}`, process.env[option.envVar]);\n          } else { // boolean\n            // keep very simple, only care that envVar defined and not the value\n            this.emit(`optionEnv:${option.name()}`);\n          }\n        }\n      }\n    });\n  }\n\n  /**\n   * Argument `name` is missing.\n   *\n   * @param {string} name\n   * @api private\n   */\n\n  missingArgument(name) {\n    const message = `error: missing required argument '${name}'`;\n    this._displayError(1, 'commander.missingArgument', message);\n  };\n\n  /**\n   * `Option` is missing an argument.\n   *\n   * @param {Option} option\n   * @api private\n   */\n\n  optionMissingArgument(option) {\n    const message = `error: option '${option.flags}' argument missing`;\n    this._displayError(1, 'commander.optionMissingArgument', message);\n  };\n\n  /**\n   * `Option` does not have a value, and is a mandatory option.\n   *\n   * @param {Option} option\n   * @api private\n   */\n\n  missingMandatoryOptionValue(option) {\n    const message = `error: required option '${option.flags}' not specified`;\n    this._displayError(1, 'commander.missingMandatoryOptionValue', message);\n  };\n\n  /**\n   * Unknown option `flag`.\n   *\n   * @param {string} flag\n   * @api private\n   */\n\n  unknownOption(flag) {\n    if (this._allowUnknownOption) return;\n    let suggestion = '';\n\n    if (flag.startsWith('--') && this._showSuggestionAfterError) {\n      // Looping to pick up the global options too\n      let candidateFlags = [];\n      let command = this;\n      do {\n        const moreFlags = command.createHelp().visibleOptions(command)\n          .filter(option => option.long)\n          .map(option => option.long);\n        candidateFlags = candidateFlags.concat(moreFlags);\n        command = command.parent;\n      } while (command && !command._enablePositionalOptions);\n      suggestion = suggestSimilar(flag, candidateFlags);\n    }\n\n    const message = `error: unknown option '${flag}'${suggestion}`;\n    this._displayError(1, 'commander.unknownOption', message);\n  };\n\n  /**\n   * Excess arguments, more than expected.\n   *\n   * @param {string[]} receivedArgs\n   * @api private\n   */\n\n  _excessArguments(receivedArgs) {\n    if (this._allowExcessArguments) return;\n\n    const expected = this._args.length;\n    const s = (expected === 1) ? '' : 's';\n    const forSubcommand = this.parent ? ` for '${this.name()}'` : '';\n    const message = `error: too many arguments${forSubcommand}. Expected ${expected} argument${s} but got ${receivedArgs.length}.`;\n    this._displayError(1, 'commander.excessArguments', message);\n  };\n\n  /**\n   * Unknown command.\n   *\n   * @api private\n   */\n\n  unknownCommand() {\n    const unknownName = this.args[0];\n    let suggestion = '';\n\n    if (this._showSuggestionAfterError) {\n      const candidateNames = [];\n      this.createHelp().visibleCommands(this).forEach((command) => {\n        candidateNames.push(command.name());\n        // just visible alias\n        if (command.alias()) candidateNames.push(command.alias());\n      });\n      suggestion = suggestSimilar(unknownName, candidateNames);\n    }\n\n    const message = `error: unknown command '${unknownName}'${suggestion}`;\n    this._displayError(1, 'commander.unknownCommand', message);\n  };\n\n  /**\n   * Set the program version to `str`.\n   *\n   * This method auto-registers the \"-V, --version\" flag\n   * which will print the version number when passed.\n   *\n   * You can optionally supply the  flags and description to override the defaults.\n   *\n   * @param {string} str\n   * @param {string} [flags]\n   * @param {string} [description]\n   * @return {this | string} `this` command for chaining, or version string if no arguments\n   */\n\n  version(str, flags, description) {\n    if (str === undefined) return this._version;\n    this._version = str;\n    flags = flags || '-V, --version';\n    description = description || 'output the version number';\n    const versionOption = this.createOption(flags, description);\n    this._versionOptionName = versionOption.attributeName();\n    this.options.push(versionOption);\n    this.on('option:' + versionOption.name(), () => {\n      this._outputConfiguration.writeOut(`${str}\\n`);\n      this._exit(0, 'commander.version', str);\n    });\n    return this;\n  };\n\n  /**\n   * Set the description to `str`.\n   *\n   * @param {string} [str]\n   * @param {Object} [argsDescription]\n   * @return {string|Command}\n   */\n  description(str, argsDescription) {\n    if (str === undefined && argsDescription === undefined) return this._description;\n    this._description = str;\n    if (argsDescription) {\n      this._argsDescription = argsDescription;\n    }\n    return this;\n  };\n\n  /**\n   * Set an alias for the command.\n   *\n   * You may call more than once to add multiple aliases. Only the first alias is shown in the auto-generated help.\n   *\n   * @param {string} [alias]\n   * @return {string|Command}\n   */\n\n  alias(alias) {\n    if (alias === undefined) return this._aliases[0]; // just return first, for backwards compatibility\n\n    /** @type {Command} */\n    let command = this;\n    if (this.commands.length !== 0 && this.commands[this.commands.length - 1]._executableHandler) {\n      // assume adding alias for last added executable subcommand, rather than this\n      command = this.commands[this.commands.length - 1];\n    }\n\n    if (alias === command._name) throw new Error('Command alias can\\'t be the same as its name');\n\n    command._aliases.push(alias);\n    return this;\n  };\n\n  /**\n   * Set aliases for the command.\n   *\n   * Only the first alias is shown in the auto-generated help.\n   *\n   * @param {string[]} [aliases]\n   * @return {string[]|Command}\n   */\n\n  aliases(aliases) {\n    // Getter for the array of aliases is the main reason for having aliases() in addition to alias().\n    if (aliases === undefined) return this._aliases;\n\n    aliases.forEach((alias) => this.alias(alias));\n    return this;\n  };\n\n  /**\n   * Set / get the command usage `str`.\n   *\n   * @param {string} [str]\n   * @return {String|Command}\n   */\n\n  usage(str) {\n    if (str === undefined) {\n      if (this._usage) return this._usage;\n\n      const args = this._args.map((arg) => {\n        return humanReadableArgName(arg);\n      });\n      return [].concat(\n        (this.options.length || this._hasHelpOption ? '[options]' : []),\n        (this.commands.length ? '[command]' : []),\n        (this._args.length ? args : [])\n      ).join(' ');\n    }\n\n    this._usage = str;\n    return this;\n  };\n\n  /**\n   * Get or set the name of the command\n   *\n   * @param {string} [str]\n   * @return {string|Command}\n   */\n\n  name(str) {\n    if (str === undefined) return this._name;\n    this._name = str;\n    return this;\n  };\n\n  /**\n   * Return program help documentation.\n   *\n   * @param {{ error: boolean }} [contextOptions] - pass {error:true} to wrap for stderr instead of stdout\n   * @return {string}\n   */\n\n  helpInformation(contextOptions) {\n    const helper = this.createHelp();\n    if (helper.helpWidth === undefined) {\n      helper.helpWidth = (contextOptions && contextOptions.error) ? this._outputConfiguration.getErrHelpWidth() : this._outputConfiguration.getOutHelpWidth();\n    }\n    return helper.formatHelp(this, helper);\n  };\n\n  /**\n   * @api private\n   */\n\n  _getHelpContext(contextOptions) {\n    contextOptions = contextOptions || {};\n    const context = { error: !!contextOptions.error };\n    let write;\n    if (context.error) {\n      write = (arg) => this._outputConfiguration.writeErr(arg);\n    } else {\n      write = (arg) => this._outputConfiguration.writeOut(arg);\n    }\n    context.write = contextOptions.write || write;\n    context.command = this;\n    return context;\n  }\n\n  /**\n   * Output help information for this command.\n   *\n   * Outputs built-in help, and custom text added using `.addHelpText()`.\n   *\n   * @param {{ error: boolean } | Function} [contextOptions] - pass {error:true} to write to stderr instead of stdout\n   */\n\n  outputHelp(contextOptions) {\n    let deprecatedCallback;\n    if (typeof contextOptions === 'function') {\n      deprecatedCallback = contextOptions;\n      contextOptions = undefined;\n    }\n    const context = this._getHelpContext(contextOptions);\n\n    getCommandAndParents(this).reverse().forEach(command => command.emit('beforeAllHelp', context));\n    this.emit('beforeHelp', context);\n\n    let helpInformation = this.helpInformation(context);\n    if (deprecatedCallback) {\n      helpInformation = deprecatedCallback(helpInformation);\n      if (typeof helpInformation !== 'string' && !Buffer.isBuffer(helpInformation)) {\n        throw new Error('outputHelp callback must return a string or a Buffer');\n      }\n    }\n    context.write(helpInformation);\n\n    this.emit(this._helpLongFlag); // deprecated\n    this.emit('afterHelp', context);\n    getCommandAndParents(this).forEach(command => command.emit('afterAllHelp', context));\n  };\n\n  /**\n   * You can pass in flags and a description to override the help\n   * flags and help description for your command. Pass in false to\n   * disable the built-in help option.\n   *\n   * @param {string | boolean} [flags]\n   * @param {string} [description]\n   * @return {Command} `this` command for chaining\n   */\n\n  helpOption(flags, description) {\n    if (typeof flags === 'boolean') {\n      this._hasHelpOption = flags;\n      return this;\n    }\n    this._helpFlags = flags || this._helpFlags;\n    this._helpDescription = description || this._helpDescription;\n\n    const helpFlags = splitOptionFlags(this._helpFlags);\n    this._helpShortFlag = helpFlags.shortFlag;\n    this._helpLongFlag = helpFlags.longFlag;\n\n    return this;\n  };\n\n  /**\n   * Output help information and exit.\n   *\n   * Outputs built-in help, and custom text added using `.addHelpText()`.\n   *\n   * @param {{ error: boolean }} [contextOptions] - pass {error:true} to write to stderr instead of stdout\n   */\n\n  help(contextOptions) {\n    this.outputHelp(contextOptions);\n    let exitCode = process.exitCode || 0;\n    if (exitCode === 0 && contextOptions && typeof contextOptions !== 'function' && contextOptions.error) {\n      exitCode = 1;\n    }\n    // message: do not have all displayed text available so only passing placeholder.\n    this._exit(exitCode, 'commander.help', '(outputHelp)');\n  };\n\n  /**\n   * Add additional text to be displayed with the built-in help.\n   *\n   * Position is 'before' or 'after' to affect just this command,\n   * and 'beforeAll' or 'afterAll' to affect this command and all its subcommands.\n   *\n   * @param {string} position - before or after built-in help\n   * @param {string | Function} text - string to add, or a function returning a string\n   * @return {Command} `this` command for chaining\n   */\n  addHelpText(position, text) {\n    const allowedValues = ['beforeAll', 'before', 'after', 'afterAll'];\n    if (!allowedValues.includes(position)) {\n      throw new Error(`Unexpected value for position to addHelpText.\nExpecting one of '${allowedValues.join(\"', '\")}'`);\n    }\n    const helpEvent = `${position}Help`;\n    this.on(helpEvent, (context) => {\n      let helpStr;\n      if (typeof text === 'function') {\n        helpStr = text({ error: context.error, command: context.command });\n      } else {\n        helpStr = text;\n      }\n      // Ignore falsy value when nothing to output.\n      if (helpStr) {\n        context.write(`${helpStr}\\n`);\n      }\n    });\n    return this;\n  }\n};\n\n/**\n * Output help information if help flags specified\n *\n * @param {Command} cmd - command to output help for\n * @param {Array} args - array of options to search for help flags\n * @api private\n */\n\nfunction outputHelpIfRequested(cmd, args) {\n  const helpOption = cmd._hasHelpOption && args.find(arg => arg === cmd._helpLongFlag || arg === cmd._helpShortFlag);\n  if (helpOption) {\n    cmd.outputHelp();\n    // (Do not have all displayed text available so only passing placeholder.)\n    cmd._exit(0, 'commander.helpDisplayed', '(outputHelp)');\n  }\n}\n\n/**\n * Scan arguments and increment port number for inspect calls (to avoid conflicts when spawning new command).\n *\n * @param {string[]} args - array of arguments from node.execArgv\n * @returns {string[]}\n * @api private\n */\n\nfunction incrementNodeInspectorPort(args) {\n  // Testing for these options:\n  //  --inspect[=[host:]port]\n  //  --inspect-brk[=[host:]port]\n  //  --inspect-port=[host:]port\n  return args.map((arg) => {\n    if (!arg.startsWith('--inspect')) {\n      return arg;\n    }\n    let debugOption;\n    let debugHost = '127.0.0.1';\n    let debugPort = '9229';\n    let match;\n    if ((match = arg.match(/^(--inspect(-brk)?)$/)) !== null) {\n      // e.g. --inspect\n      debugOption = match[1];\n    } else if ((match = arg.match(/^(--inspect(-brk|-port)?)=([^:]+)$/)) !== null) {\n      debugOption = match[1];\n      if (/^\\d+$/.test(match[3])) {\n        // e.g. --inspect=1234\n        debugPort = match[3];\n      } else {\n        // e.g. --inspect=localhost\n        debugHost = match[3];\n      }\n    } else if ((match = arg.match(/^(--inspect(-brk|-port)?)=([^:]+):(\\d+)$/)) !== null) {\n      // e.g. --inspect=localhost:1234\n      debugOption = match[1];\n      debugHost = match[3];\n      debugPort = match[4];\n    }\n\n    if (debugOption && debugPort !== '0') {\n      return `${debugOption}=${debugHost}:${parseInt(debugPort) + 1}`;\n    }\n    return arg;\n  });\n}\n\n/**\n * @param {Command} startCommand\n * @returns {Command[]}\n * @api private\n */\n\nfunction getCommandAndParents(startCommand) {\n  const result = [];\n  for (let command = startCommand; command; command = command.parent) {\n    result.push(command);\n  }\n  return result;\n}\n\nexports.Command = Command;\n","// @ts-check\n\n/**\n * CommanderError class\n * @class\n */\nclass CommanderError extends Error {\n  /**\n   * Constructs the CommanderError class\n   * @param {number} exitCode suggested exit code which could be used with process.exit\n   * @param {string} code an id string representing the error\n   * @param {string} message human-readable description of the error\n   * @constructor\n   */\n  constructor(exitCode, code, message) {\n    super(message);\n    // properly capture stack trace in Node.js\n    Error.captureStackTrace(this, this.constructor);\n    this.name = this.constructor.name;\n    this.code = code;\n    this.exitCode = exitCode;\n    this.nestedError = undefined;\n  }\n}\n\n/**\n * InvalidArgumentError class\n * @class\n */\nclass InvalidArgumentError extends CommanderError {\n  /**\n   * Constructs the InvalidArgumentError class\n   * @param {string} [message] explanation of why argument is invalid\n   * @constructor\n   */\n  constructor(message) {\n    super(1, 'commander.invalidArgument', message);\n    // properly capture stack trace in Node.js\n    Error.captureStackTrace(this, this.constructor);\n    this.name = this.constructor.name;\n  }\n}\n\nexports.CommanderError = CommanderError;\nexports.InvalidArgumentError = InvalidArgumentError;\n","const { humanReadableArgName } = require('./argument.js');\n\n/**\n * TypeScript import types for JSDoc, used by Visual Studio Code IntelliSense and `npm run typescript-checkJS`\n * https://www.typescriptlang.org/docs/handbook/jsdoc-supported-types.html#import-types\n * @typedef { import(\"./argument.js\").Argument } Argument\n * @typedef { import(\"./command.js\").Command } Command\n * @typedef { import(\"./option.js\").Option } Option\n */\n\n// @ts-check\n\n// Although this is a class, methods are static in style to allow override using subclass or just functions.\nclass Help {\n  constructor() {\n    this.helpWidth = undefined;\n    this.sortSubcommands = false;\n    this.sortOptions = false;\n  }\n\n  /**\n   * Get an array of the visible subcommands. Includes a placeholder for the implicit help command, if there is one.\n   *\n   * @param {Command} cmd\n   * @returns {Command[]}\n   */\n\n  visibleCommands(cmd) {\n    const visibleCommands = cmd.commands.filter(cmd => !cmd._hidden);\n    if (cmd._hasImplicitHelpCommand()) {\n      // Create a command matching the implicit help command.\n      const [, helpName, helpArgs] = cmd._helpCommandnameAndArgs.match(/([^ ]+) *(.*)/);\n      const helpCommand = cmd.createCommand(helpName)\n        .helpOption(false);\n      helpCommand.description(cmd._helpCommandDescription);\n      if (helpArgs) helpCommand.arguments(helpArgs);\n      visibleCommands.push(helpCommand);\n    }\n    if (this.sortSubcommands) {\n      visibleCommands.sort((a, b) => {\n        // @ts-ignore: overloaded return type\n        return a.name().localeCompare(b.name());\n      });\n    }\n    return visibleCommands;\n  }\n\n  /**\n   * Get an array of the visible options. Includes a placeholder for the implicit help option, if there is one.\n   *\n   * @param {Command} cmd\n   * @returns {Option[]}\n   */\n\n  visibleOptions(cmd) {\n    const visibleOptions = cmd.options.filter((option) => !option.hidden);\n    // Implicit help\n    const showShortHelpFlag = cmd._hasHelpOption && cmd._helpShortFlag && !cmd._findOption(cmd._helpShortFlag);\n    const showLongHelpFlag = cmd._hasHelpOption && !cmd._findOption(cmd._helpLongFlag);\n    if (showShortHelpFlag || showLongHelpFlag) {\n      let helpOption;\n      if (!showShortHelpFlag) {\n        helpOption = cmd.createOption(cmd._helpLongFlag, cmd._helpDescription);\n      } else if (!showLongHelpFlag) {\n        helpOption = cmd.createOption(cmd._helpShortFlag, cmd._helpDescription);\n      } else {\n        helpOption = cmd.createOption(cmd._helpFlags, cmd._helpDescription);\n      }\n      visibleOptions.push(helpOption);\n    }\n    if (this.sortOptions) {\n      const getSortKey = (option) => {\n        // WYSIWYG for order displayed in help with short before long, no special handling for negated.\n        return option.short ? option.short.replace(/^-/, '') : option.long.replace(/^--/, '');\n      };\n      visibleOptions.sort((a, b) => {\n        return getSortKey(a).localeCompare(getSortKey(b));\n      });\n    }\n    return visibleOptions;\n  }\n\n  /**\n   * Get an array of the arguments if any have a description.\n   *\n   * @param {Command} cmd\n   * @returns {Argument[]}\n   */\n\n  visibleArguments(cmd) {\n    // Side effect! Apply the legacy descriptions before the arguments are displayed.\n    if (cmd._argsDescription) {\n      cmd._args.forEach(argument => {\n        argument.description = argument.description || cmd._argsDescription[argument.name()] || '';\n      });\n    }\n\n    // If there are any arguments with a description then return all the arguments.\n    if (cmd._args.find(argument => argument.description)) {\n      return cmd._args;\n    };\n    return [];\n  }\n\n  /**\n   * Get the command term to show in the list of subcommands.\n   *\n   * @param {Command} cmd\n   * @returns {string}\n   */\n\n  subcommandTerm(cmd) {\n    // Legacy. Ignores custom usage string, and nested commands.\n    const args = cmd._args.map(arg => humanReadableArgName(arg)).join(' ');\n    return cmd._name +\n      (cmd._aliases[0] ? '|' + cmd._aliases[0] : '') +\n      (cmd.options.length ? ' [options]' : '') + // simplistic check for non-help option\n      (args ? ' ' + args : '');\n  }\n\n  /**\n   * Get the option term to show in the list of options.\n   *\n   * @param {Option} option\n   * @returns {string}\n   */\n\n  optionTerm(option) {\n    return option.flags;\n  }\n\n  /**\n   * Get the argument term to show in the list of arguments.\n   *\n   * @param {Argument} argument\n   * @returns {string}\n   */\n\n  argumentTerm(argument) {\n    return argument.name();\n  }\n\n  /**\n   * Get the longest command term length.\n   *\n   * @param {Command} cmd\n   * @param {Help} helper\n   * @returns {number}\n   */\n\n  longestSubcommandTermLength(cmd, helper) {\n    return helper.visibleCommands(cmd).reduce((max, command) => {\n      return Math.max(max, helper.subcommandTerm(command).length);\n    }, 0);\n  };\n\n  /**\n   * Get the longest option term length.\n   *\n   * @param {Command} cmd\n   * @param {Help} helper\n   * @returns {number}\n   */\n\n  longestOptionTermLength(cmd, helper) {\n    return helper.visibleOptions(cmd).reduce((max, option) => {\n      return Math.max(max, helper.optionTerm(option).length);\n    }, 0);\n  };\n\n  /**\n   * Get the longest argument term length.\n   *\n   * @param {Command} cmd\n   * @param {Help} helper\n   * @returns {number}\n   */\n\n  longestArgumentTermLength(cmd, helper) {\n    return helper.visibleArguments(cmd).reduce((max, argument) => {\n      return Math.max(max, helper.argumentTerm(argument).length);\n    }, 0);\n  };\n\n  /**\n   * Get the command usage to be displayed at the top of the built-in help.\n   *\n   * @param {Command} cmd\n   * @returns {string}\n   */\n\n  commandUsage(cmd) {\n    // Usage\n    let cmdName = cmd._name;\n    if (cmd._aliases[0]) {\n      cmdName = cmdName + '|' + cmd._aliases[0];\n    }\n    let parentCmdNames = '';\n    for (let parentCmd = cmd.parent; parentCmd; parentCmd = parentCmd.parent) {\n      parentCmdNames = parentCmd.name() + ' ' + parentCmdNames;\n    }\n    return parentCmdNames + cmdName + ' ' + cmd.usage();\n  }\n\n  /**\n   * Get the description for the command.\n   *\n   * @param {Command} cmd\n   * @returns {string}\n   */\n\n  commandDescription(cmd) {\n    // @ts-ignore: overloaded return type\n    return cmd.description();\n  }\n\n  /**\n   * Get the command description to show in the list of subcommands.\n   *\n   * @param {Command} cmd\n   * @returns {string}\n   */\n\n  subcommandDescription(cmd) {\n    // @ts-ignore: overloaded return type\n    return cmd.description();\n  }\n\n  /**\n   * Get the option description to show in the list of options.\n   *\n   * @param {Option} option\n   * @return {string}\n   */\n\n  optionDescription(option) {\n    const extraInfo = [];\n    // Some of these do not make sense for negated boolean and suppress for backwards compatibility.\n\n    if (option.argChoices && !option.negate) {\n      extraInfo.push(\n        // use stringify to match the display of the default value\n        `choices: ${option.argChoices.map((choice) => JSON.stringify(choice)).join(', ')}`);\n    }\n    if (option.defaultValue !== undefined && !option.negate) {\n      extraInfo.push(`default: ${option.defaultValueDescription || JSON.stringify(option.defaultValue)}`);\n    }\n    if (option.envVar !== undefined) {\n      extraInfo.push(`env: ${option.envVar}`);\n    }\n    if (extraInfo.length > 0) {\n      return `${option.description} (${extraInfo.join(', ')})`;\n    }\n\n    return option.description;\n  };\n\n  /**\n   * Get the argument description to show in the list of arguments.\n   *\n   * @param {Argument} argument\n   * @return {string}\n   */\n\n  argumentDescription(argument) {\n    const extraInfo = [];\n    if (argument.argChoices) {\n      extraInfo.push(\n        // use stringify to match the display of the default value\n        `choices: ${argument.argChoices.map((choice) => JSON.stringify(choice)).join(', ')}`);\n    }\n    if (argument.defaultValue !== undefined) {\n      extraInfo.push(`default: ${argument.defaultValueDescription || JSON.stringify(argument.defaultValue)}`);\n    }\n    if (extraInfo.length > 0) {\n      const extraDescripton = `(${extraInfo.join(', ')})`;\n      if (argument.description) {\n        return `${argument.description} ${extraDescripton}`;\n      }\n      return extraDescripton;\n    }\n    return argument.description;\n  }\n\n  /**\n   * Generate the built-in help text.\n   *\n   * @param {Command} cmd\n   * @param {Help} helper\n   * @returns {string}\n   */\n\n  formatHelp(cmd, helper) {\n    const termWidth = helper.padWidth(cmd, helper);\n    const helpWidth = helper.helpWidth || 80;\n    const itemIndentWidth = 2;\n    const itemSeparatorWidth = 2; // between term and description\n    function formatItem(term, description) {\n      if (description) {\n        const fullText = `${term.padEnd(termWidth + itemSeparatorWidth)}${description}`;\n        return helper.wrap(fullText, helpWidth - itemIndentWidth, termWidth + itemSeparatorWidth);\n      }\n      return term;\n    };\n    function formatList(textArray) {\n      return textArray.join('\\n').replace(/^/gm, ' '.repeat(itemIndentWidth));\n    }\n\n    // Usage\n    let output = [`Usage: ${helper.commandUsage(cmd)}`, ''];\n\n    // Description\n    const commandDescription = helper.commandDescription(cmd);\n    if (commandDescription.length > 0) {\n      output = output.concat([commandDescription, '']);\n    }\n\n    // Arguments\n    const argumentList = helper.visibleArguments(cmd).map((argument) => {\n      return formatItem(helper.argumentTerm(argument), helper.argumentDescription(argument));\n    });\n    if (argumentList.length > 0) {\n      output = output.concat(['Arguments:', formatList(argumentList), '']);\n    }\n\n    // Options\n    const optionList = helper.visibleOptions(cmd).map((option) => {\n      return formatItem(helper.optionTerm(option), helper.optionDescription(option));\n    });\n    if (optionList.length > 0) {\n      output = output.concat(['Options:', formatList(optionList), '']);\n    }\n\n    // Commands\n    const commandList = helper.visibleCommands(cmd).map((cmd) => {\n      return formatItem(helper.subcommandTerm(cmd), helper.subcommandDescription(cmd));\n    });\n    if (commandList.length > 0) {\n      output = output.concat(['Commands:', formatList(commandList), '']);\n    }\n\n    return output.join('\\n');\n  }\n\n  /**\n   * Calculate the pad width from the maximum term length.\n   *\n   * @param {Command} cmd\n   * @param {Help} helper\n   * @returns {number}\n   */\n\n  padWidth(cmd, helper) {\n    return Math.max(\n      helper.longestOptionTermLength(cmd, helper),\n      helper.longestSubcommandTermLength(cmd, helper),\n      helper.longestArgumentTermLength(cmd, helper)\n    );\n  };\n\n  /**\n   * Wrap the given string to width characters per line, with lines after the first indented.\n   * Do not wrap if insufficient room for wrapping (minColumnWidth), or string is manually formatted.\n   *\n   * @param {string} str\n   * @param {number} width\n   * @param {number} indent\n   * @param {number} [minColumnWidth=40]\n   * @return {string}\n   *\n   */\n\n  wrap(str, width, indent, minColumnWidth = 40) {\n    // Detect manually wrapped and indented strings by searching for line breaks\n    // followed by multiple spaces/tabs.\n    if (str.match(/[\\n]\\s+/)) return str;\n    // Do not wrap if not enough room for a wrapped column of text (as could end up with a word per line).\n    const columnWidth = width - indent;\n    if (columnWidth < minColumnWidth) return str;\n\n    const leadingStr = str.substr(0, indent);\n    const columnText = str.substr(indent);\n\n    const indentString = ' '.repeat(indent);\n    const regex = new RegExp('.{1,' + (columnWidth - 1) + '}([\\\\s\\u200B]|$)|[^\\\\s\\u200B]+?([\\\\s\\u200B]|$)', 'g');\n    const lines = columnText.match(regex) || [];\n    return leadingStr + lines.map((line, i) => {\n      if (line.slice(-1) === '\\n') {\n        line = line.slice(0, line.length - 1);\n      }\n      return ((i > 0) ? indentString : '') + line.trimRight();\n    }).join('\\n');\n  }\n}\n\nexports.Help = Help;\n","const { InvalidArgumentError } = require('./error.js');\n\n// @ts-check\n\nclass Option {\n  /**\n   * Initialize a new `Option` with the given `flags` and `description`.\n   *\n   * @param {string} flags\n   * @param {string} [description]\n   */\n\n  constructor(flags, description) {\n    this.flags = flags;\n    this.description = description || '';\n\n    this.required = flags.includes('<'); // A value must be supplied when the option is specified.\n    this.optional = flags.includes('['); // A value is optional when the option is specified.\n    // variadic test ignores <value,...> et al which might be used to describe custom splitting of single argument\n    this.variadic = /\\w\\.\\.\\.[>\\]]$/.test(flags); // The option can take multiple values.\n    this.mandatory = false; // The option must have a value after parsing, which usually means it must be specified on command line.\n    const optionFlags = splitOptionFlags(flags);\n    this.short = optionFlags.shortFlag;\n    this.long = optionFlags.longFlag;\n    this.negate = false;\n    if (this.long) {\n      this.negate = this.long.startsWith('--no-');\n    }\n    this.defaultValue = undefined;\n    this.defaultValueDescription = undefined;\n    this.envVar = undefined;\n    this.parseArg = undefined;\n    this.hidden = false;\n    this.argChoices = undefined;\n  }\n\n  /**\n   * Set the default value, and optionally supply the description to be displayed in the help.\n   *\n   * @param {any} value\n   * @param {string} [description]\n   * @return {Option}\n   */\n\n  default(value, description) {\n    this.defaultValue = value;\n    this.defaultValueDescription = description;\n    return this;\n  };\n\n  /**\n   * Set environment variable to check for option value.\n   * Priority order of option values is default < env < cli\n   *\n   * @param {string} name\n   * @return {Option}\n   */\n\n  env(name) {\n    this.envVar = name;\n    return this;\n  };\n\n  /**\n   * Set the custom handler for processing CLI option arguments into option values.\n   *\n   * @param {Function} [fn]\n   * @return {Option}\n   */\n\n  argParser(fn) {\n    this.parseArg = fn;\n    return this;\n  };\n\n  /**\n   * Whether the option is mandatory and must have a value after parsing.\n   *\n   * @param {boolean} [mandatory=true]\n   * @return {Option}\n   */\n\n  makeOptionMandatory(mandatory = true) {\n    this.mandatory = !!mandatory;\n    return this;\n  };\n\n  /**\n   * Hide option in help.\n   *\n   * @param {boolean} [hide=true]\n   * @return {Option}\n   */\n\n  hideHelp(hide = true) {\n    this.hidden = !!hide;\n    return this;\n  };\n\n  /**\n   * @api private\n   */\n\n  _concatValue(value, previous) {\n    if (previous === this.defaultValue || !Array.isArray(previous)) {\n      return [value];\n    }\n\n    return previous.concat(value);\n  }\n\n  /**\n   * Only allow option value to be one of choices.\n   *\n   * @param {string[]} values\n   * @return {Option}\n   */\n\n  choices(values) {\n    this.argChoices = values;\n    this.parseArg = (arg, previous) => {\n      if (!values.includes(arg)) {\n        throw new InvalidArgumentError(`Allowed choices are ${values.join(', ')}.`);\n      }\n      if (this.variadic) {\n        return this._concatValue(arg, previous);\n      }\n      return arg;\n    };\n    return this;\n  };\n\n  /**\n   * Return option name.\n   *\n   * @return {string}\n   */\n\n  name() {\n    if (this.long) {\n      return this.long.replace(/^--/, '');\n    }\n    return this.short.replace(/^-/, '');\n  };\n\n  /**\n   * Return option name, in a camelcase format that can be used\n   * as a object attribute key.\n   *\n   * @return {string}\n   * @api private\n   */\n\n  attributeName() {\n    return camelcase(this.name().replace(/^no-/, ''));\n  };\n\n  /**\n   * Check if `arg` matches the short or long flag.\n   *\n   * @param {string} arg\n   * @return {boolean}\n   * @api private\n   */\n\n  is(arg) {\n    return this.short === arg || this.long === arg;\n  };\n}\n\n/**\n * Convert string from kebab-case to camelCase.\n *\n * @param {string} str\n * @return {string}\n * @api private\n */\n\nfunction camelcase(str) {\n  return str.split('-').reduce((str, word) => {\n    return str + word[0].toUpperCase() + word.slice(1);\n  });\n}\n\n/**\n * Split the short and long flag out of something like '-m,--mixed <value>'\n *\n * @api private\n */\n\nfunction splitOptionFlags(flags) {\n  let shortFlag;\n  let longFlag;\n  // Use original very loose parsing to maintain backwards compatibility for now,\n  // which allowed for example unintended `-sw, --short-word` [sic].\n  const flagParts = flags.split(/[ |,]+/);\n  if (flagParts.length > 1 && !/^[[<]/.test(flagParts[1])) shortFlag = flagParts.shift();\n  longFlag = flagParts.shift();\n  // Add support for lone short flag without significantly changing parsing!\n  if (!shortFlag && /^-[^-]$/.test(longFlag)) {\n    shortFlag = longFlag;\n    longFlag = undefined;\n  }\n  return { shortFlag, longFlag };\n}\n\nexports.Option = Option;\nexports.splitOptionFlags = splitOptionFlags;\n","const maxDistance = 3;\n\nfunction editDistance(a, b) {\n  // https://en.wikipedia.org/wiki/Damerau–Levenshtein_distance\n  // Calculating optimal string alignment distance, no substring is edited more than once.\n  // (Simple implementation.)\n\n  // Quick early exit, return worst case.\n  if (Math.abs(a.length - b.length) > maxDistance) return Math.max(a.length, b.length);\n\n  // distance between prefix substrings of a and b\n  const d = [];\n\n  // pure deletions turn a into empty string\n  for (let i = 0; i <= a.length; i++) {\n    d[i] = [i];\n  }\n  // pure insertions turn empty string into b\n  for (let j = 0; j <= b.length; j++) {\n    d[0][j] = j;\n  }\n\n  // fill matrix\n  for (let j = 1; j <= b.length; j++) {\n    for (let i = 1; i <= a.length; i++) {\n      let cost = 1;\n      if (a[i - 1] === b[j - 1]) {\n        cost = 0;\n      } else {\n        cost = 1;\n      }\n      d[i][j] = Math.min(\n        d[i - 1][j] + 1, // deletion\n        d[i][j - 1] + 1, // insertion\n        d[i - 1][j - 1] + cost // substitution\n      );\n      // transposition\n      if (i > 1 && j > 1 && a[i - 1] === b[j - 2] && a[i - 2] === b[j - 1]) {\n        d[i][j] = Math.min(d[i][j], d[i - 2][j - 2] + 1);\n      }\n    }\n  }\n\n  return d[a.length][b.length];\n}\n\n/**\n * Find close matches, restricted to same number of edits.\n *\n * @param {string} word\n * @param {string[]} candidates\n * @returns {string}\n */\n\nfunction suggestSimilar(word, candidates) {\n  if (!candidates || candidates.length === 0) return '';\n  // remove possible duplicates\n  candidates = Array.from(new Set(candidates));\n\n  const searchingOptions = word.startsWith('--');\n  if (searchingOptions) {\n    word = word.slice(2);\n    candidates = candidates.map(candidate => candidate.slice(2));\n  }\n\n  let similar = [];\n  let bestDistance = maxDistance;\n  const minSimilarity = 0.4;\n  candidates.forEach((candidate) => {\n    if (candidate.length <= 1) return; // no one character guesses\n\n    const distance = editDistance(word, candidate);\n    const length = Math.max(word.length, candidate.length);\n    const similarity = (length - distance) / length;\n    if (similarity > minSimilarity) {\n      if (distance < bestDistance) {\n        // better edit distance, throw away previous worse matches\n        bestDistance = distance;\n        similar = [candidate];\n      } else if (distance === bestDistance) {\n        similar.push(candidate);\n      }\n    }\n  });\n\n  similar.sort((a, b) => a.localeCompare(b));\n  if (searchingOptions) {\n    similar = similar.map(candidate => `--${candidate}`);\n  }\n\n  if (similar.length > 1) {\n    return `\\n(Did you mean one of ${similar.join(', ')}?)`;\n  }\n  if (similar.length === 1) {\n    return `\\n(Did you mean ${similar[0]}?)`;\n  }\n  return '';\n}\n\nexports.suggestSimilar = suggestSimilar;\n","export * from './module/core.mjs';\nexport * from './module/duplex.mjs';\nexport {\n    PatchError as JsonPatchError,\n    _deepClone as deepClone,\n    escapePathComponent,\n    unescapePathComponent\n} from './module/helpers.mjs';\n\n\n/**\n * Default export for backwards compat\n */\n\nimport * as core from './module/core.mjs';\nimport * as duplex from './module/duplex.mjs';\nimport {\n    PatchError as JsonPatchError,\n    _deepClone as deepClone,\n    escapePathComponent,\n    unescapePathComponent\n} from './module/helpers.mjs';\n\nexport default Object.assign({}, core, duplex, {\n    JsonPatchError,\n    deepClone,\n    escapePathComponent,\n    unescapePathComponent\n});","import { PatchError, _deepClone, isInteger, unescapePathComponent, hasUndefined } from './helpers.mjs';\nexport var JsonPatchError = PatchError;\nexport var deepClone = _deepClone;\n/* We use a Javascript hash to store each\n function. Each hash entry (property) uses\n the operation identifiers specified in rfc6902.\n In this way, we can map each patch operation\n to its dedicated function in efficient way.\n */\n/* The operations applicable to an object */\nvar objOps = {\n    add: function (obj, key, document) {\n        obj[key] = this.value;\n        return { newDocument: document };\n    },\n    remove: function (obj, key, document) {\n        var removed = obj[key];\n        delete obj[key];\n        return { newDocument: document, removed: removed };\n    },\n    replace: function (obj, key, document) {\n        var removed = obj[key];\n        obj[key] = this.value;\n        return { newDocument: document, removed: removed };\n    },\n    move: function (obj, key, document) {\n        /* in case move target overwrites an existing value,\n        return the removed value, this can be taxing performance-wise,\n        and is potentially unneeded */\n        var removed = getValueByPointer(document, this.path);\n        if (removed) {\n            removed = _deepClone(removed);\n        }\n        var originalValue = applyOperation(document, { op: \"remove\", path: this.from }).removed;\n        applyOperation(document, { op: \"add\", path: this.path, value: originalValue });\n        return { newDocument: document, removed: removed };\n    },\n    copy: function (obj, key, document) {\n        var valueToCopy = getValueByPointer(document, this.from);\n        // enforce copy by value so further operations don't affect source (see issue #177)\n        applyOperation(document, { op: \"add\", path: this.path, value: _deepClone(valueToCopy) });\n        return { newDocument: document };\n    },\n    test: function (obj, key, document) {\n        return { newDocument: document, test: _areEquals(obj[key], this.value) };\n    },\n    _get: function (obj, key, document) {\n        this.value = obj[key];\n        return { newDocument: document };\n    }\n};\n/* The operations applicable to an array. Many are the same as for the object */\nvar arrOps = {\n    add: function (arr, i, document) {\n        if (isInteger(i)) {\n            arr.splice(i, 0, this.value);\n        }\n        else { // array props\n            arr[i] = this.value;\n        }\n        // this may be needed when using '-' in an array\n        return { newDocument: document, index: i };\n    },\n    remove: function (arr, i, document) {\n        var removedList = arr.splice(i, 1);\n        return { newDocument: document, removed: removedList[0] };\n    },\n    replace: function (arr, i, document) {\n        var removed = arr[i];\n        arr[i] = this.value;\n        return { newDocument: document, removed: removed };\n    },\n    move: objOps.move,\n    copy: objOps.copy,\n    test: objOps.test,\n    _get: objOps._get\n};\n/**\n * Retrieves a value from a JSON document by a JSON pointer.\n * Returns the value.\n *\n * @param document The document to get the value from\n * @param pointer an escaped JSON pointer\n * @return The retrieved value\n */\nexport function getValueByPointer(document, pointer) {\n    if (pointer == '') {\n        return document;\n    }\n    var getOriginalDestination = { op: \"_get\", path: pointer };\n    applyOperation(document, getOriginalDestination);\n    return getOriginalDestination.value;\n}\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the {newDocument, result} of the operation.\n * It modifies the `document` and `operation` objects - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyOperation(document, jsonpatch._deepClone(operation))`.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return `{newDocument, result}` after the operation\n */\nexport function applyOperation(document, operation, validateOperation, mutateDocument, banPrototypeModifications, index) {\n    if (validateOperation === void 0) { validateOperation = false; }\n    if (mutateDocument === void 0) { mutateDocument = true; }\n    if (banPrototypeModifications === void 0) { banPrototypeModifications = true; }\n    if (index === void 0) { index = 0; }\n    if (validateOperation) {\n        if (typeof validateOperation == 'function') {\n            validateOperation(operation, 0, document, operation.path);\n        }\n        else {\n            validator(operation, 0);\n        }\n    }\n    /* ROOT OPERATIONS */\n    if (operation.path === \"\") {\n        var returnValue = { newDocument: document };\n        if (operation.op === 'add') {\n            returnValue.newDocument = operation.value;\n            return returnValue;\n        }\n        else if (operation.op === 'replace') {\n            returnValue.newDocument = operation.value;\n            returnValue.removed = document; //document we removed\n            return returnValue;\n        }\n        else if (operation.op === 'move' || operation.op === 'copy') { // it's a move or copy to root\n            returnValue.newDocument = getValueByPointer(document, operation.from); // get the value by json-pointer in `from` field\n            if (operation.op === 'move') { // report removed item\n                returnValue.removed = document;\n            }\n            return returnValue;\n        }\n        else if (operation.op === 'test') {\n            returnValue.test = _areEquals(document, operation.value);\n            if (returnValue.test === false) {\n                throw new JsonPatchError(\"Test operation failed\", 'TEST_OPERATION_FAILED', index, operation, document);\n            }\n            returnValue.newDocument = document;\n            return returnValue;\n        }\n        else if (operation.op === 'remove') { // a remove on root\n            returnValue.removed = document;\n            returnValue.newDocument = null;\n            return returnValue;\n        }\n        else if (operation.op === '_get') {\n            operation.value = document;\n            return returnValue;\n        }\n        else { /* bad operation */\n            if (validateOperation) {\n                throw new JsonPatchError('Operation `op` property is not one of operations defined in RFC-6902', 'OPERATION_OP_INVALID', index, operation, document);\n            }\n            else {\n                return returnValue;\n            }\n        }\n    } /* END ROOT OPERATIONS */\n    else {\n        if (!mutateDocument) {\n            document = _deepClone(document);\n        }\n        var path = operation.path || \"\";\n        var keys = path.split('/');\n        var obj = document;\n        var t = 1; //skip empty element - http://jsperf.com/to-shift-or-not-to-shift\n        var len = keys.length;\n        var existingPathFragment = undefined;\n        var key = void 0;\n        var validateFunction = void 0;\n        if (typeof validateOperation == 'function') {\n            validateFunction = validateOperation;\n        }\n        else {\n            validateFunction = validator;\n        }\n        while (true) {\n            key = keys[t];\n            if (key && key.indexOf('~') != -1) {\n                key = unescapePathComponent(key);\n            }\n            if (banPrototypeModifications &&\n                (key == '__proto__' ||\n                    (key == 'prototype' && t > 0 && keys[t - 1] == 'constructor'))) {\n                throw new TypeError('JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README');\n            }\n            if (validateOperation) {\n                if (existingPathFragment === undefined) {\n                    if (obj[key] === undefined) {\n                        existingPathFragment = keys.slice(0, t).join('/');\n                    }\n                    else if (t == len - 1) {\n                        existingPathFragment = operation.path;\n                    }\n                    if (existingPathFragment !== undefined) {\n                        validateFunction(operation, 0, document, existingPathFragment);\n                    }\n                }\n            }\n            t++;\n            if (Array.isArray(obj)) {\n                if (key === '-') {\n                    key = obj.length;\n                }\n                else {\n                    if (validateOperation && !isInteger(key)) {\n                        throw new JsonPatchError(\"Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index\", \"OPERATION_PATH_ILLEGAL_ARRAY_INDEX\", index, operation, document);\n                    } // only parse key when it's an integer for `arr.prop` to work\n                    else if (isInteger(key)) {\n                        key = ~~key;\n                    }\n                }\n                if (t >= len) {\n                    if (validateOperation && operation.op === \"add\" && key > obj.length) {\n                        throw new JsonPatchError(\"The specified index MUST NOT be greater than the number of elements in the array\", \"OPERATION_VALUE_OUT_OF_BOUNDS\", index, operation, document);\n                    }\n                    var returnValue = arrOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new JsonPatchError(\"Test operation failed\", 'TEST_OPERATION_FAILED', index, operation, document);\n                    }\n                    return returnValue;\n                }\n            }\n            else {\n                if (t >= len) {\n                    var returnValue = objOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new JsonPatchError(\"Test operation failed\", 'TEST_OPERATION_FAILED', index, operation, document);\n                    }\n                    return returnValue;\n                }\n            }\n            obj = obj[key];\n            // If we have more keys in the path, but the next value isn't a non-null object,\n            // throw an OPERATION_PATH_UNRESOLVABLE error instead of iterating again.\n            if (validateOperation && t < len && (!obj || typeof obj !== \"object\")) {\n                throw new JsonPatchError('Cannot perform operation at the desired path', 'OPERATION_PATH_UNRESOLVABLE', index, operation, document);\n            }\n        }\n    }\n}\n/**\n * Apply a full JSON Patch array on a JSON document.\n * Returns the {newDocument, result} of the patch.\n * It modifies the `document` object and `patch` - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyPatch(document, jsonpatch._deepClone(patch))`.\n *\n * @param document The document to patch\n * @param patch The patch to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return An array of `{newDocument, result}` after the patch\n */\nexport function applyPatch(document, patch, validateOperation, mutateDocument, banPrototypeModifications) {\n    if (mutateDocument === void 0) { mutateDocument = true; }\n    if (banPrototypeModifications === void 0) { banPrototypeModifications = true; }\n    if (validateOperation) {\n        if (!Array.isArray(patch)) {\n            throw new JsonPatchError('Patch sequence must be an array', 'SEQUENCE_NOT_AN_ARRAY');\n        }\n    }\n    if (!mutateDocument) {\n        document = _deepClone(document);\n    }\n    var results = new Array(patch.length);\n    for (var i = 0, length_1 = patch.length; i < length_1; i++) {\n        // we don't need to pass mutateDocument argument because if it was true, we already deep cloned the object, we'll just pass `true`\n        results[i] = applyOperation(document, patch[i], validateOperation, true, banPrototypeModifications, i);\n        document = results[i].newDocument; // in case root was replaced\n    }\n    results.newDocument = document;\n    return results;\n}\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the updated document.\n * Suitable as a reducer.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @return The updated document\n */\nexport function applyReducer(document, operation, index) {\n    var operationResult = applyOperation(document, operation);\n    if (operationResult.test === false) { // failed test\n        throw new JsonPatchError(\"Test operation failed\", 'TEST_OPERATION_FAILED', index, operation, document);\n    }\n    return operationResult.newDocument;\n}\n/**\n * Validates a single operation. Called from `jsonpatch.validate`. Throws `JsonPatchError` in case of an error.\n * @param {object} operation - operation object (patch)\n * @param {number} index - index of operation in the sequence\n * @param {object} [document] - object where the operation is supposed to be applied\n * @param {string} [existingPathFragment] - comes along with `document`\n */\nexport function validator(operation, index, document, existingPathFragment) {\n    if (typeof operation !== 'object' || operation === null || Array.isArray(operation)) {\n        throw new JsonPatchError('Operation is not an object', 'OPERATION_NOT_AN_OBJECT', index, operation, document);\n    }\n    else if (!objOps[operation.op]) {\n        throw new JsonPatchError('Operation `op` property is not one of operations defined in RFC-6902', 'OPERATION_OP_INVALID', index, operation, document);\n    }\n    else if (typeof operation.path !== 'string') {\n        throw new JsonPatchError('Operation `path` property is not a string', 'OPERATION_PATH_INVALID', index, operation, document);\n    }\n    else if (operation.path.indexOf('/') !== 0 && operation.path.length > 0) {\n        // paths that aren't empty string should start with \"/\"\n        throw new JsonPatchError('Operation `path` property must start with \"/\"', 'OPERATION_PATH_INVALID', index, operation, document);\n    }\n    else if ((operation.op === 'move' || operation.op === 'copy') && typeof operation.from !== 'string') {\n        throw new JsonPatchError('Operation `from` property is not present (applicable in `move` and `copy` operations)', 'OPERATION_FROM_REQUIRED', index, operation, document);\n    }\n    else if ((operation.op === 'add' || operation.op === 'replace' || operation.op === 'test') && operation.value === undefined) {\n        throw new JsonPatchError('Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)', 'OPERATION_VALUE_REQUIRED', index, operation, document);\n    }\n    else if ((operation.op === 'add' || operation.op === 'replace' || operation.op === 'test') && hasUndefined(operation.value)) {\n        throw new JsonPatchError('Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)', 'OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED', index, operation, document);\n    }\n    else if (document) {\n        if (operation.op == \"add\") {\n            var pathLen = operation.path.split(\"/\").length;\n            var existingPathLen = existingPathFragment.split(\"/\").length;\n            if (pathLen !== existingPathLen + 1 && pathLen !== existingPathLen) {\n                throw new JsonPatchError('Cannot perform an `add` operation at the desired path', 'OPERATION_PATH_CANNOT_ADD', index, operation, document);\n            }\n        }\n        else if (operation.op === 'replace' || operation.op === 'remove' || operation.op === '_get') {\n            if (operation.path !== existingPathFragment) {\n                throw new JsonPatchError('Cannot perform the operation at a path that does not exist', 'OPERATION_PATH_UNRESOLVABLE', index, operation, document);\n            }\n        }\n        else if (operation.op === 'move' || operation.op === 'copy') {\n            var existingValue = { op: \"_get\", path: operation.from, value: undefined };\n            var error = validate([existingValue], document);\n            if (error && error.name === 'OPERATION_PATH_UNRESOLVABLE') {\n                throw new JsonPatchError('Cannot perform the operation from a path that does not exist', 'OPERATION_FROM_UNRESOLVABLE', index, operation, document);\n            }\n        }\n    }\n}\n/**\n * Validates a sequence of operations. If `document` parameter is provided, the sequence is additionally validated against the object document.\n * If error is encountered, returns a JsonPatchError object\n * @param sequence\n * @param document\n * @returns {JsonPatchError|undefined}\n */\nexport function validate(sequence, document, externalValidator) {\n    try {\n        if (!Array.isArray(sequence)) {\n            throw new JsonPatchError('Patch sequence must be an array', 'SEQUENCE_NOT_AN_ARRAY');\n        }\n        if (document) {\n            //clone document and sequence so that we can safely try applying operations\n            applyPatch(_deepClone(document), _deepClone(sequence), externalValidator || true);\n        }\n        else {\n            externalValidator = externalValidator || validator;\n            for (var i = 0; i < sequence.length; i++) {\n                externalValidator(sequence[i], i, document, undefined);\n            }\n        }\n    }\n    catch (e) {\n        if (e instanceof JsonPatchError) {\n            return e;\n        }\n        else {\n            throw e;\n        }\n    }\n}\n// based on https://github.com/epoberezkin/fast-deep-equal\n// MIT License\n// Copyright (c) 2017 Evgeny Poberezkin\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nexport function _areEquals(a, b) {\n    if (a === b)\n        return true;\n    if (a && b && typeof a == 'object' && typeof b == 'object') {\n        var arrA = Array.isArray(a), arrB = Array.isArray(b), i, length, key;\n        if (arrA && arrB) {\n            length = a.length;\n            if (length != b.length)\n                return false;\n            for (i = length; i-- !== 0;)\n                if (!_areEquals(a[i], b[i]))\n                    return false;\n            return true;\n        }\n        if (arrA != arrB)\n            return false;\n        var keys = Object.keys(a);\n        length = keys.length;\n        if (length !== Object.keys(b).length)\n            return false;\n        for (i = length; i-- !== 0;)\n            if (!b.hasOwnProperty(keys[i]))\n                return false;\n        for (i = length; i-- !== 0;) {\n            key = keys[i];\n            if (!_areEquals(a[key], b[key]))\n                return false;\n        }\n        return true;\n    }\n    return a !== a && b !== b;\n}\n;\n","/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2017-2021 Joachim Wester\n * MIT license\n */\nimport { _deepClone, _objectKeys, escapePathComponent, hasOwnProperty } from './helpers.mjs';\nimport { applyPatch } from './core.mjs';\nvar beforeDict = new WeakMap();\nvar Mirror = /** @class */ (function () {\n    function Mirror(obj) {\n        this.observers = new Map();\n        this.obj = obj;\n    }\n    return Mirror;\n}());\nvar ObserverInfo = /** @class */ (function () {\n    function ObserverInfo(callback, observer) {\n        this.callback = callback;\n        this.observer = observer;\n    }\n    return ObserverInfo;\n}());\nfunction getMirror(obj) {\n    return beforeDict.get(obj);\n}\nfunction getObserverFromMirror(mirror, callback) {\n    return mirror.observers.get(callback);\n}\nfunction removeObserverFromMirror(mirror, observer) {\n    mirror.observers.delete(observer.callback);\n}\n/**\n * Detach an observer from an object\n */\nexport function unobserve(root, observer) {\n    observer.unobserve();\n}\n/**\n * Observes changes made to an object, which can then be retrieved using generate\n */\nexport function observe(obj, callback) {\n    var patches = [];\n    var observer;\n    var mirror = getMirror(obj);\n    if (!mirror) {\n        mirror = new Mirror(obj);\n        beforeDict.set(obj, mirror);\n    }\n    else {\n        var observerInfo = getObserverFromMirror(mirror, callback);\n        observer = observerInfo && observerInfo.observer;\n    }\n    if (observer) {\n        return observer;\n    }\n    observer = {};\n    mirror.value = _deepClone(obj);\n    if (callback) {\n        observer.callback = callback;\n        observer.next = null;\n        var dirtyCheck = function () {\n            generate(observer);\n        };\n        var fastCheck = function () {\n            clearTimeout(observer.next);\n            observer.next = setTimeout(dirtyCheck);\n        };\n        if (typeof window !== 'undefined') { //not Node\n            window.addEventListener('mouseup', fastCheck);\n            window.addEventListener('keyup', fastCheck);\n            window.addEventListener('mousedown', fastCheck);\n            window.addEventListener('keydown', fastCheck);\n            window.addEventListener('change', fastCheck);\n        }\n    }\n    observer.patches = patches;\n    observer.object = obj;\n    observer.unobserve = function () {\n        generate(observer);\n        clearTimeout(observer.next);\n        removeObserverFromMirror(mirror, observer);\n        if (typeof window !== 'undefined') {\n            window.removeEventListener('mouseup', fastCheck);\n            window.removeEventListener('keyup', fastCheck);\n            window.removeEventListener('mousedown', fastCheck);\n            window.removeEventListener('keydown', fastCheck);\n            window.removeEventListener('change', fastCheck);\n        }\n    };\n    mirror.observers.set(callback, new ObserverInfo(callback, observer));\n    return observer;\n}\n/**\n * Generate an array of patches from an observer\n */\nexport function generate(observer, invertible) {\n    if (invertible === void 0) { invertible = false; }\n    var mirror = beforeDict.get(observer.object);\n    _generate(mirror.value, observer.object, observer.patches, \"\", invertible);\n    if (observer.patches.length) {\n        applyPatch(mirror.value, observer.patches);\n    }\n    var temp = observer.patches;\n    if (temp.length > 0) {\n        observer.patches = [];\n        if (observer.callback) {\n            observer.callback(temp);\n        }\n    }\n    return temp;\n}\n// Dirty check if obj is different from mirror, generate patches and update mirror\nfunction _generate(mirror, obj, patches, path, invertible) {\n    if (obj === mirror) {\n        return;\n    }\n    if (typeof obj.toJSON === \"function\") {\n        obj = obj.toJSON();\n    }\n    var newKeys = _objectKeys(obj);\n    var oldKeys = _objectKeys(mirror);\n    var changed = false;\n    var deleted = false;\n    //if ever \"move\" operation is implemented here, make sure this test runs OK: \"should not generate the same patch twice (move)\"\n    for (var t = oldKeys.length - 1; t >= 0; t--) {\n        var key = oldKeys[t];\n        var oldVal = mirror[key];\n        if (hasOwnProperty(obj, key) && !(obj[key] === undefined && oldVal !== undefined && Array.isArray(obj) === false)) {\n            var newVal = obj[key];\n            if (typeof oldVal == \"object\" && oldVal != null && typeof newVal == \"object\" && newVal != null && Array.isArray(oldVal) === Array.isArray(newVal)) {\n                _generate(oldVal, newVal, patches, path + \"/\" + escapePathComponent(key), invertible);\n            }\n            else {\n                if (oldVal !== newVal) {\n                    changed = true;\n                    if (invertible) {\n                        patches.push({ op: \"test\", path: path + \"/\" + escapePathComponent(key), value: _deepClone(oldVal) });\n                    }\n                    patches.push({ op: \"replace\", path: path + \"/\" + escapePathComponent(key), value: _deepClone(newVal) });\n                }\n            }\n        }\n        else if (Array.isArray(mirror) === Array.isArray(obj)) {\n            if (invertible) {\n                patches.push({ op: \"test\", path: path + \"/\" + escapePathComponent(key), value: _deepClone(oldVal) });\n            }\n            patches.push({ op: \"remove\", path: path + \"/\" + escapePathComponent(key) });\n            deleted = true; // property has been deleted\n        }\n        else {\n            if (invertible) {\n                patches.push({ op: \"test\", path: path, value: mirror });\n            }\n            patches.push({ op: \"replace\", path: path, value: obj });\n            changed = true;\n        }\n    }\n    if (!deleted && newKeys.length == oldKeys.length) {\n        return;\n    }\n    for (var t = 0; t < newKeys.length; t++) {\n        var key = newKeys[t];\n        if (!hasOwnProperty(mirror, key) && obj[key] !== undefined) {\n            patches.push({ op: \"add\", path: path + \"/\" + escapePathComponent(key), value: _deepClone(obj[key]) });\n        }\n    }\n}\n/**\n * Create an array of patches from the differences in two objects\n */\nexport function compare(tree1, tree2, invertible) {\n    if (invertible === void 0) { invertible = false; }\n    var patches = [];\n    _generate(tree1, tree2, patches, '', invertible);\n    return patches;\n}\n","/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2017-2022 Joachim Wester\n * MIT licensed\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\nexport function hasOwnProperty(obj, key) {\n    return _hasOwnProperty.call(obj, key);\n}\nexport function _objectKeys(obj) {\n    if (Array.isArray(obj)) {\n        var keys_1 = new Array(obj.length);\n        for (var k = 0; k < keys_1.length; k++) {\n            keys_1[k] = \"\" + k;\n        }\n        return keys_1;\n    }\n    if (Object.keys) {\n        return Object.keys(obj);\n    }\n    var keys = [];\n    for (var i in obj) {\n        if (hasOwnProperty(obj, i)) {\n            keys.push(i);\n        }\n    }\n    return keys;\n}\n;\n/**\n* Deeply clone the object.\n* https://jsperf.com/deep-copy-vs-json-stringify-json-parse/25 (recursiveDeepCopy)\n* @param  {any} obj value to clone\n* @return {any} cloned obj\n*/\nexport function _deepClone(obj) {\n    switch (typeof obj) {\n        case \"object\":\n            return JSON.parse(JSON.stringify(obj)); //Faster than ES5 clone - http://jsperf.com/deep-cloning-of-objects/5\n        case \"undefined\":\n            return null; //this is how JSON.stringify behaves for array items\n        default:\n            return obj; //no need to clone primitives\n    }\n}\n//3x faster than cached /^\\d+$/.test(str)\nexport function isInteger(str) {\n    var i = 0;\n    var len = str.length;\n    var charCode;\n    while (i < len) {\n        charCode = str.charCodeAt(i);\n        if (charCode >= 48 && charCode <= 57) {\n            i++;\n            continue;\n        }\n        return false;\n    }\n    return true;\n}\n/**\n* Escapes a json pointer path\n* @param path The raw pointer\n* @return the Escaped path\n*/\nexport function escapePathComponent(path) {\n    if (path.indexOf('/') === -1 && path.indexOf('~') === -1)\n        return path;\n    return path.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n/**\n * Unescapes a json pointer path\n * @param path The escaped pointer\n * @return The unescaped path\n */\nexport function unescapePathComponent(path) {\n    return path.replace(/~1/g, '/').replace(/~0/g, '~');\n}\nexport function _getPathRecursive(root, obj) {\n    var found;\n    for (var key in root) {\n        if (hasOwnProperty(root, key)) {\n            if (root[key] === obj) {\n                return escapePathComponent(key) + '/';\n            }\n            else if (typeof root[key] === 'object') {\n                found = _getPathRecursive(root[key], obj);\n                if (found != '') {\n                    return escapePathComponent(key) + '/' + found;\n                }\n            }\n        }\n    }\n    return '';\n}\nexport function getPath(root, obj) {\n    if (root === obj) {\n        return '/';\n    }\n    var path = _getPathRecursive(root, obj);\n    if (path === '') {\n        throw new Error(\"Object not found in root\");\n    }\n    return \"/\" + path;\n}\n/**\n* Recursively checks whether an object has any undefined values inside.\n*/\nexport function hasUndefined(obj) {\n    if (obj === undefined) {\n        return true;\n    }\n    if (obj) {\n        if (Array.isArray(obj)) {\n            for (var i_1 = 0, len = obj.length; i_1 < len; i_1++) {\n                if (hasUndefined(obj[i_1])) {\n                    return true;\n                }\n            }\n        }\n        else if (typeof obj === \"object\") {\n            var objKeys = _objectKeys(obj);\n            var objKeysLength = objKeys.length;\n            for (var i = 0; i < objKeysLength; i++) {\n                if (hasUndefined(obj[objKeys[i]])) {\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n}\nfunction patchErrorMessageFormatter(message, args) {\n    var messageParts = [message];\n    for (var key in args) {\n        var value = typeof args[key] === 'object' ? JSON.stringify(args[key], null, 2) : args[key]; // pretty print\n        if (typeof value !== 'undefined') {\n            messageParts.push(key + \": \" + value);\n        }\n    }\n    return messageParts.join('\\n');\n}\nvar PatchError = /** @class */ (function (_super) {\n    __extends(PatchError, _super);\n    function PatchError(message, name, index, operation, tree) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, patchErrorMessageFormatter(message, { name: name, index: index, operation: operation, tree: tree })) || this;\n        _this.name = name;\n        _this.index = index;\n        _this.operation = operation;\n        _this.tree = tree;\n        Object.setPrototypeOf(_this, _newTarget.prototype); // restore prototype chain, see https://stackoverflow.com/a/48342359\n        _this.message = patchErrorMessageFormatter(message, { name: name, index: index, operation: operation, tree: tree });\n        return _this;\n    }\n    return PatchError;\n}(Error));\nexport { PatchError };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the module cache\n__webpack_require__.c = __webpack_module_cache__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","","// module cache are used so entry inlining is disabled\n// startup\n// Load entry module and return exports\nvar __webpack_exports__ = __webpack_require__(__webpack_require__.s = \"./lib/app.js\");\n",""],"names":["EventTarget","defineEventAttribute"],"sourceRoot":""}